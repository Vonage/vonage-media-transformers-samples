const n1=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const I of l.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&n(I)}).observe(document,{childList:!0,subtree:!0});function i(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=i(o);fetch(o.href,l)}};n1();var va=function(e,t){return va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},va(e,t)};function xo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");va(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var on=function(){return on=Object.assign||function(t){for(var i,n=1,o=arguments.length;n<o;n++){i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(t[l]=i[l])}return t},on.apply(this,arguments)};function z(e,t,i,n){var o=arguments.length,l=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,i,n);else for(var m=e.length-1;m>=0;m--)(I=e[m])&&(l=(o<3?I(l):o>3?I(t,i,l):I(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l}function Fl(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zo(e,t,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(e):n?n.value:t.get(e)}function sh(e,t,i,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,i):o?o.value=i:t.set(e,i),i}const o1="modulepreload",XC={},s1="",Sa=function(t,i){return!i||i.length===0?t():Promise.all(i.map(n=>{if(n=`${s1}${n}`,n in XC)return;XC[n]=!0;const o=n.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${l}`))return;const I=document.createElement("link");if(I.rel=o?"stylesheet":o1,o||(I.as="script",I.crossOrigin=""),I.href=n,document.head.appendChild(I),o)return new Promise((m,Z)=>{I.addEventListener("load",m),I.addEventListener("error",()=>Z(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};function Ur(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function $r(e){return function t(i){return arguments.length===0||Ur(i)?t:e.apply(this,arguments)}}function r1(e){return function t(i,n){switch(arguments.length){case 0:return t;case 1:return Ur(i)?t:$r(function(o){return e(i,o)});default:return Ur(i)&&Ur(n)?t:Ur(i)?$r(function(o){return e(o,n)}):Ur(n)?$r(function(o){return e(i,o)}):e(i,n)}}}function rh(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(i){return t.apply(this,arguments)};case 2:return function(i,n){return t.apply(this,arguments)};case 3:return function(i,n,o){return t.apply(this,arguments)};case 4:return function(i,n,o,l){return t.apply(this,arguments)};case 5:return function(i,n,o,l,I){return t.apply(this,arguments)};case 6:return function(i,n,o,l,I,m){return t.apply(this,arguments)};case 7:return function(i,n,o,l,I,m,Z){return t.apply(this,arguments)};case 8:return function(i,n,o,l,I,m,Z,x){return t.apply(this,arguments)};case 9:return function(i,n,o,l,I,m,Z,x,L){return t.apply(this,arguments)};case 10:return function(i,n,o,l,I,m,Z,x,L,K){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function l1(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var c1=$r(function(t){return function(){return t}}),lh=c1;function g1(e){return e}var d1=$r(g1),a1=d1,I1=r1(function(t,i){var n={};return rh(i.length,function(){var o=t.apply(this,arguments);return l1(o,n)||(n[o]=i.apply(this,arguments)),n[o]})}),u1=I1,C1=$r(function(t){var i=!1,n;return rh(t.length,function(){return i||(i=!0,n=t.apply(this,arguments)),n})}),m1=C1;const h1=m1(function(){return Sa(()=>import("./vvd-fonts.css.3aedccd3.js"),[]).then(({style:{cssText:e}})=>{document.querySelectorAll("head").forEach(t=>{t.appendChild(function(){const i=document.createElement("style");return i.innerHTML=e,i}())})}).then(lh(!0))});var Cr;(function(e){e.LIGHT="light",e.DARK="dark"})(Cr||(Cr={}));var wa;(function(e){e.SYNC_WITH_OS_SETTINGS="syncWithOsSettings"})(wa||(wa={}));const b1=e=>{switch(e){case Cr.DARK:return Sa(()=>import("./scheme.dark.css.15c97337.js"),[]);case Cr.LIGHT:default:return Sa(()=>import("./scheme.light.css.6732fb1d.js"),[])}},ch="vvd-scheme-style",p1=A1(ch);function A1(e){let t;const i=document.querySelectorAll(`.${e}`);return i.length?(console.error(`found ${i.length} scheme styles upon init while expected for 1, check your dependencies configuration`),t=i[0]):(t=document.createElement("style"),t.className=ch,document.head.appendChild(t)),t}async function gh(e){const t=await b1(e),i=t==null?void 0:t.style;i&&(p1.innerHTML=i.cssText||"")}const Fa=window.matchMedia("(prefers-color-scheme: dark)");function dh(){return Fa.matches?Cr.DARK:Cr.LIGHT}var Hl;class y1{constructor(){Hl.set(this,document.createDocumentFragment())}addEventListener(t,i,n){Zo(this,Hl,"f").addEventListener(t,i,n)}dispatchEvent(t){Zo(this,Hl,"f").dispatchEvent(t)}removeEventListener(t,i,n){Zo(this,Hl,"f").removeEventListener(t,i,n)}}Hl=new WeakMap;function ah(e){if(!e||!e.hasAttribute){console.error(`HTMLElement target expected, got '${e}'`);return}e.hasAttribute("autofocus")&&!document.body.matches(":focus-within")&&e.focus()}function Z1(e,t){t.has("dense")&&e.dense&&e.enlarged&&(e.enlarged=!1),t.has("enlarged")&&e.enlarged&&e.dense&&(e.removeAttribute("dense"),e.dense=!1)}const Ih=new y1;let Er;function f1(){return Er}let Or;function G1(){return Or}function V1(){return Cr.LIGHT}function W1(e=null){return e||Or||V1()}async function RC(){gh(dh())}function B1(e){let t;return e===wa.SYNC_WITH_OS_SETTINGS?(Fa.addListener(RC),t=dh()):(Fa.removeListener(RC),t=e),t}let xc=null;async function X1(e=null){const t=W1(e);if(t===Or&&xc)return xc;Or=t;let i;const n=B1(Or);return n!==Er?(Er=n,i=gh(Er)):i=Promise.resolve(),xc=i.then(()=>(R1(Er),{option:Or,scheme:Er})),xc}function R1(e){const t=new CustomEvent("vvd-scheme-select",{detail:{scheme:e}});Ih.dispatchEvent(t)}var v1=Object.freeze({set:X1,eventBus:Ih,getSelectedScheme:f1,getSelectedSchemeOption:G1});const S1="data-vvd-context",uh="none",vC=["scheme"];let Ha;const SC=F1();SC.autoInit?Ha=Ch(SC):Ha=Promise.reject(`auto-init unavailable when '${uh}' used`);Object.freeze({set:w1,settled:Ha});async function w1(e){return H1(e),Ch(e)}async function Ch(e){const t=await Promise.all([h1(),v1.set(e.scheme)]);return Object.freeze({fonts:t[0],scheme:t[1]})}function F1(){const e={autoInit:!0},t=document.documentElement.getAttribute(S1);if(t===uh)e.autoInit=!1;else if(t){const i=x1(t);Object.assign(e,i)}return e}function H1(e){const t=Object.keys(e).filter(i=>!vC.includes(i));t.length&&console.warn(`unexpected configuration part/s '${t}',	only some of '${vC}' expected`)}function x1(e){return e.trim().split(/\s+/).reduce((i,n)=>(/^theme:/.test(n)?i.scheme?console.error(`theme vivid context defined multiple times, only the first (${i.scheme}) will be effective`):i.scheme=n.replace(/^theme:/,""):console.warn(`unsupported token '${n}' in vivid context`),i),{})}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const wC=typeof window!="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,N1=(e,t,i=null,n=null)=>{for(;t!==i;){const o=t.nextSibling;e.insertBefore(t,n),t=o}},HI=(e,t,i=null)=>{for(;t!==i;){const n=t.nextSibling;e.removeChild(t),t=n}};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Is=`{{lit-${String(Math.random()).slice(2)}}}`,mh=`<!--${Is}-->`,FC=new RegExp(`${Is}|${mh}`),xl="$lit$";class hh{constructor(t,i){this.parts=[],this.element=i;const n=[],o=[],l=document.createTreeWalker(i.content,133,null,!1);let I=0,m=-1,Z=0;const{strings:x,values:{length:L}}=t;for(;Z<L;){const K=l.nextNode();if(K===null){l.currentNode=o.pop();continue}if(m++,K.nodeType===1){if(K.hasAttributes()){const st=K.attributes,{length:ut}=st;let P=0;for(let ct=0;ct<ut;ct++)HC(st[ct].name,xl)&&P++;for(;P-- >0;){const ct=x[Z],Rt=xa.exec(ct)[2],Bt=Rt.toLowerCase()+xl,Yt=K.getAttribute(Bt);K.removeAttribute(Bt);const _=Yt.split(FC);this.parts.push({type:"attribute",index:m,name:Rt,strings:_}),Z+=_.length-1}}K.tagName==="TEMPLATE"&&(o.push(K),l.currentNode=K.content)}else if(K.nodeType===3){const st=K.data;if(st.indexOf(Is)>=0){const ut=K.parentNode,P=st.split(FC),ct=P.length-1;for(let Rt=0;Rt<ct;Rt++){let Bt,Yt=P[Rt];if(Yt==="")Bt=Bs();else{const _=xa.exec(Yt);_!==null&&HC(_[2],xl)&&(Yt=Yt.slice(0,_.index)+_[1]+_[2].slice(0,-xl.length)+_[3]),Bt=document.createTextNode(Yt)}ut.insertBefore(Bt,K),this.parts.push({type:"node",index:++m})}P[ct]===""?(ut.insertBefore(Bs(),K),n.push(K)):K.data=P[ct],Z+=ct}}else if(K.nodeType===8)if(K.data===Is){const st=K.parentNode;(K.previousSibling===null||m===I)&&(m++,st.insertBefore(Bs(),K)),I=m,this.parts.push({type:"node",index:m}),K.nextSibling===null?K.data="":(n.push(K),m--),Z++}else{let st=-1;for(;(st=K.data.indexOf(Is,st+1))!==-1;)this.parts.push({type:"node",index:-1}),Z++}}for(const K of n)K.parentNode.removeChild(K)}}const HC=(e,t)=>{const i=e.length-t.length;return i>=0&&e.slice(i)===t},bh=e=>e.index!==-1,Bs=()=>document.createComment(""),xa=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const xI=133;function ph(e,t){const{element:{content:i},parts:n}=e,o=document.createTreeWalker(i,xI,null,!1);let l=Ml(n),I=n[l],m=-1,Z=0;const x=[];let L=null;for(;o.nextNode();){m++;const K=o.currentNode;for(K.previousSibling===L&&(L=null),t.has(K)&&(x.push(K),L===null&&(L=K)),L!==null&&Z++;I!==void 0&&I.index===m;)I.index=L!==null?-1:I.index-Z,l=Ml(n,l),I=n[l]}x.forEach(K=>K.parentNode.removeChild(K))}const Y1=e=>{let t=e.nodeType===11?0:1;const i=document.createTreeWalker(e,xI,null,!1);for(;i.nextNode();)t++;return t},Ml=(e,t=-1)=>{for(let i=t+1;i<e.length;i++){const n=e[i];if(bh(n))return i}return-1};function M1(e,t,i=null){const{element:{content:n},parts:o}=e;if(i==null){n.appendChild(t);return}const l=document.createTreeWalker(n,xI,null,!1);let I=Ml(o),m=0,Z=-1;for(;l.nextNode();)for(Z++,l.currentNode===i&&(m=Y1(t),i.parentNode.insertBefore(t,i));I!==-1&&o[I].index===Z;){if(m>0){for(;I!==-1;)o[I].index+=m,I=Ml(o,I);return}I=Ml(o,I)}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Ah=new WeakMap,Cl=e=>(...t)=>{const i=e(...t);return Ah.set(i,!0),i},_l=e=>typeof e=="function"&&Ah.has(e);/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const So={},Uo={};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class Na{constructor(t,i,n){this.__parts=[],this.template=t,this.processor=i,this.options=n}update(t){let i=0;for(const n of this.__parts)n!==void 0&&n.setValue(t[i]),i++;for(const n of this.__parts)n!==void 0&&n.commit()}_clone(){const t=wC?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),i=[],n=this.template.parts,o=document.createTreeWalker(t,133,null,!1);let l=0,I=0,m,Z=o.nextNode();for(;l<n.length;){if(m=n[l],!bh(m)){this.__parts.push(void 0),l++;continue}for(;I<m.index;)I++,Z.nodeName==="TEMPLATE"&&(i.push(Z),o.currentNode=Z.content),(Z=o.nextNode())===null&&(o.currentNode=i.pop(),Z=o.nextNode());if(m.type==="node"){const x=this.processor.handleTextExpression(this.options);x.insertAfterNode(Z.previousSibling),this.__parts.push(x)}else this.__parts.push(...this.processor.handleAttributeExpressions(Z,m.name,m.strings,this.options));l++}return wC&&(document.adoptNode(t),customElements.upgrade(t)),t}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const xC=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),L1=` ${Is} `;class yh{constructor(t,i,n,o){this.strings=t,this.values=i,this.type=n,this.processor=o}getHTML(){const t=this.strings.length-1;let i="",n=!1;for(let o=0;o<t;o++){const l=this.strings[o],I=l.lastIndexOf("<!--");n=(I>-1||n)&&l.indexOf("-->",I+1)===-1;const m=xa.exec(l);m===null?i+=l+(n?L1:mh):i+=l.substr(0,m.index)+m[1]+m[2]+xl+m[3]+Is}return i+=this.strings[t],i}getTemplateElement(){const t=document.createElement("template");let i=this.getHTML();return xC!==void 0&&(i=xC.createHTML(i)),t.innerHTML=i,t}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Ic=e=>e===null||!(typeof e=="object"||typeof e=="function"),Ya=e=>Array.isArray(e)||!!(e&&e[Symbol.iterator]);class Zh{constructor(t,i,n){this.dirty=!0,this.element=t,this.name=i,this.strings=n,this.parts=[];for(let o=0;o<n.length-1;o++)this.parts[o]=this._createPart()}_createPart(){return new Wr(this)}_getValue(){const t=this.strings,i=t.length-1,n=this.parts;if(i===1&&t[0]===""&&t[1]===""){const l=n[0].value;if(typeof l=="symbol")return String(l);if(typeof l=="string"||!Ya(l))return l}let o="";for(let l=0;l<i;l++){o+=t[l];const I=n[l];if(I!==void 0){const m=I.value;if(Ic(m)||!Ya(m))o+=typeof m=="string"?m:String(m);else for(const Z of m)o+=typeof Z=="string"?Z:String(Z)}}return o+=t[i],o}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Wr{constructor(t){this.value=void 0,this.committer=t}setValue(t){t!==So&&(!Ic(t)||t!==this.value)&&(this.value=t,_l(t)||(this.committer.dirty=!0))}commit(){for(;_l(this.value);){const t=this.value;this.value=So,t(this)}this.value!==So&&this.committer.commit()}}class Br{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(Bs()),this.endNode=t.appendChild(Bs())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=Bs()),t.__insert(this.endNode=Bs())}insertAfterPart(t){t.__insert(this.startNode=Bs()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(this.startNode.parentNode===null)return;for(;_l(this.__pendingValue);){const i=this.__pendingValue;this.__pendingValue=So,i(this)}const t=this.__pendingValue;t!==So&&(Ic(t)?t!==this.value&&this.__commitText(t):t instanceof yh?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):Ya(t)?this.__commitIterable(t):t===Uo?(this.value=Uo,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const i=this.startNode.nextSibling;t=t==null?"":t;const n=typeof t=="string"?t:String(t);i===this.endNode.previousSibling&&i.nodeType===3?i.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}__commitTemplateResult(t){const i=this.options.templateFactory(t);if(this.value instanceof Na&&this.value.template===i)this.value.update(t.values);else{const n=new Na(i,t.processor,this.options),o=n._clone();n.update(t.values),this.__commitNode(o),this.value=n}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const i=this.value;let n=0,o;for(const l of t)o=i[n],o===void 0&&(o=new Br(this.options),i.push(o),n===0?o.appendIntoPart(this):o.insertAfterPart(i[n-1])),o.setValue(l),o.commit(),n++;n<i.length&&(i.length=n,this.clear(o&&o.endNode))}clear(t=this.startNode){HI(this.startNode.parentNode,t.nextSibling,this.endNode)}}class NI{constructor(t,i,n){if(this.value=void 0,this.__pendingValue=void 0,n.length!==2||n[0]!==""||n[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=i,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;_l(this.__pendingValue);){const i=this.__pendingValue;this.__pendingValue=So,i(this)}if(this.__pendingValue===So)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=So}}class J1 extends Zh{constructor(t,i,n){super(t,i,n),this.single=n.length===2&&n[0]===""&&n[1]===""}_createPart(){return new ml(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class ml extends Wr{}let fh=!1;(()=>{try{const e={get capture(){return fh=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{}})();class YI{constructor(t,i,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=i,this.eventContext=n,this.__boundHandleEvent=o=>this.handleEvent(o)}setValue(t){this.__pendingValue=t}commit(){for(;_l(this.__pendingValue);){const l=this.__pendingValue;this.__pendingValue=So,l(this)}if(this.__pendingValue===So)return;const t=this.__pendingValue,i=this.value,n=t==null||i!=null&&(t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive),o=t!=null&&(i==null||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),o&&(this.__options=T1(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=So}handleEvent(t){typeof this.value=="function"?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const T1=e=>e&&(fh?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function k1(e){let t=Pl.get(e.type);t===void 0&&(t={stringsArray:new WeakMap,keyString:new Map},Pl.set(e.type,t));let i=t.stringsArray.get(e.strings);if(i!==void 0)return i;const n=e.strings.join(Is);return i=t.keyString.get(n),i===void 0&&(i=new hh(e,e.getTemplateElement()),t.keyString.set(n,i)),t.stringsArray.set(e.strings,i),i}const Pl=new Map;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const jr=new WeakMap,yg=(e,t,i)=>{let n=jr.get(t);n===void 0&&(HI(t,t.firstChild),jr.set(t,n=new Br(Object.assign({templateFactory:k1},i))),n.appendInto(t)),n.setValue(e),n.commit()};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class z1{handleAttributeExpressions(t,i,n,o){const l=i[0];return l==="."?new J1(t,i.slice(1),n).parts:l==="@"?[new YI(t,i.slice(1),o.eventContext)]:l==="?"?[new NI(t,i.slice(1),n)]:new Zh(t,i,n).parts}handleTextExpression(t){return new Br(t)}}const K1=new z1;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const Lt=(e,...t)=>new yh(e,t,"html",K1);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Gh=(e,t)=>`${e}--${t}`;let Zg=!0;typeof window.ShadyCSS=="undefined"?Zg=!1:typeof window.ShadyCSS.prepareTemplateDom=="undefined"&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),Zg=!1);const U1=e=>t=>{const i=Gh(t.type,e);let n=Pl.get(i);n===void 0&&(n={stringsArray:new WeakMap,keyString:new Map},Pl.set(i,n));let o=n.stringsArray.get(t.strings);if(o!==void 0)return o;const l=t.strings.join(Is);if(o=n.keyString.get(l),o===void 0){const I=t.getTemplateElement();Zg&&window.ShadyCSS.prepareTemplateDom(I,e),o=new hh(t,I),n.keyString.set(l,o)}return n.stringsArray.set(t.strings,o),o},E1=["html","svg"],Q1=e=>{E1.forEach(t=>{const i=Pl.get(Gh(t,e));i!==void 0&&i.keyString.forEach(n=>{const{element:{content:o}}=n,l=new Set;Array.from(o.querySelectorAll("style")).forEach(I=>{l.add(I)}),ph(n,l)})})},Vh=new Set,D1=(e,t,i)=>{Vh.add(e);const n=i?i.element:document.createElement("template"),o=t.querySelectorAll("style"),{length:l}=o;if(l===0){window.ShadyCSS.prepareTemplateStyles(n,e);return}const I=document.createElement("style");for(let x=0;x<l;x++){const L=o[x];L.parentNode.removeChild(L),I.textContent+=L.textContent}Q1(e);const m=n.content;i?M1(i,I,m.firstChild):m.insertBefore(I,m.firstChild),window.ShadyCSS.prepareTemplateStyles(n,e);const Z=m.querySelector("style");if(window.ShadyCSS.nativeShadow&&Z!==null)t.insertBefore(Z.cloneNode(!0),t.firstChild);else if(i){m.insertBefore(I,m.firstChild);const x=new Set;x.add(I),ph(i,x)}},O1=(e,t,i)=>{if(!i||typeof i!="object"||!i.scopeName)throw new Error("The `scopeName` option is required.");const n=i.scopeName,o=jr.has(t),l=Zg&&t.nodeType===11&&!!t.host,I=l&&!Vh.has(n),m=I?document.createDocumentFragment():t;if(yg(e,m,Object.assign({templateFactory:U1(n)},i)),I){const Z=jr.get(m);jr.delete(m);const x=Z.value instanceof Na?Z.value.template:void 0;D1(n,m,x),HI(t,t.firstChild),t.appendChild(m),jr.set(t,Z)}!o&&l&&window.ShadyCSS.styleElement(t.host)};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */var Wh;window.JSCompiler_renameProperty=(e,t)=>e;const Ma={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return e!==null;case Number:return e===null?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},Bh=(e,t)=>t!==e&&(t===t||e===e),jd={attribute:!0,type:String,converter:Ma,reflect:!1,hasChanged:Bh},_d=1,Pd=1<<2,qd=1<<3,$d=1<<4,La="finalized";class Xh extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((i,n)=>{const o=this._attributeNameForProperty(n,i);o!==void 0&&(this._attributeToPropertyMap.set(o,n),t.push(o))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;t!==void 0&&t.forEach((i,n)=>this._classProperties.set(n,i))}}static createProperty(t,i=jd){if(this._ensureClassProperties(),this._classProperties.set(t,i),i.noAccessor||this.prototype.hasOwnProperty(t))return;const n=typeof t=="symbol"?Symbol():`__${t}`,o=this.getPropertyDescriptor(t,n,i);o!==void 0&&Object.defineProperty(this.prototype,t,o)}static getPropertyDescriptor(t,i,n){return{get(){return this[i]},set(o){const l=this[t];this[i]=o,this.requestUpdateInternal(t,l,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||jd}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty(La)||t.finalize(),this[La]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const i=this.properties,n=[...Object.getOwnPropertyNames(i),...typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(i):[]];for(const o of n)this.createProperty(o,i[o])}}static _attributeNameForProperty(t,i){const n=i.attribute;return n===!1?void 0:typeof n=="string"?n:typeof t=="string"?t.toLowerCase():void 0}static _valueHasChanged(t,i,n=Bh){return n(t,i)}static _propertyValueFromAttribute(t,i){const n=i.type,o=i.converter||Ma,l=typeof o=="function"?o:o.fromAttribute;return l?l(t,n):t}static _propertyValueToAttribute(t,i){if(i.reflect===void 0)return;const n=i.type,o=i.converter;return(o&&o.toAttribute||Ma.toAttribute)(t,n)}initialize(){this._updateState=0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,i)=>{if(this.hasOwnProperty(i)){const n=this[i];delete this[i],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(i,n)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,i)=>this[i]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,i,n){i!==n&&this._attributeToProperty(t,n)}_propertyToAttribute(t,i,n=jd){const o=this.constructor,l=o._attributeNameForProperty(t,n);if(l!==void 0){const I=o._propertyValueToAttribute(i,n);if(I===void 0)return;this._updateState=this._updateState|qd,I==null?this.removeAttribute(l):this.setAttribute(l,I),this._updateState=this._updateState&~qd}}_attributeToProperty(t,i){if(this._updateState&qd)return;const n=this.constructor,o=n._attributeToPropertyMap.get(t);if(o!==void 0){const l=n.getPropertyOptions(o);this._updateState=this._updateState|$d,this[o]=n._propertyValueFromAttribute(i,l),this._updateState=this._updateState&~$d}}requestUpdateInternal(t,i,n){let o=!0;if(t!==void 0){const l=this.constructor;n=n||l.getPropertyOptions(t),l._valueHasChanged(this[t],i,n.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,i),n.reflect===!0&&!(this._updateState&$d)&&(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,n))):o=!1}!this._hasRequestedUpdate&&o&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,i){return this.requestUpdateInternal(t,i),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|Pd;try{await this._updatePromise}catch{}const t=this.performUpdate();return t!=null&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&Pd}get hasUpdated(){return this._updateState&_d}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const i=this._changedProperties;try{t=this.shouldUpdate(i),t?this.update(i):this._markUpdated()}catch(n){throw t=!1,this._markUpdated(),n}t&&(this._updateState&_d||(this._updateState=this._updateState|_d,this.firstUpdated(i)),this.updated(i))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~Pd}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((i,n)=>this._propertyToAttribute(n,this[n],i)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}Wh=La;Xh[Wh]=!0;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const j1=(e,t)=>(window.customElements.define(e,t),t),_1=(e,t)=>{const{kind:i,elements:n}=t;return{kind:i,elements:n,finisher(o){window.customElements.define(e,o)}}},Ni=e=>t=>typeof t=="function"?j1(e,t):_1(e,t),P1=(e,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(i){i.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}},q1=(e,t,i)=>{t.constructor.createProperty(i,e)};function lt(e){return(t,i)=>i!==void 0?q1(e,t,i):P1(e,t)}function $1(e){return lt({attribute:!1,hasChanged:e==null?void 0:e.hasChanged})}const Ri=e=>$1(e);function vi(e,t){return(i,n)=>{const o={get(){return this.renderRoot.querySelector(e)},enumerable:!0,configurable:!0};if(t){const l=n!==void 0?n:i.key,I=typeof l=="symbol"?Symbol():`__${l}`;o.get=function(){return this[I]===void 0&&(this[I]=this.renderRoot.querySelector(e)),this[I]}}return n!==void 0?MI(o,i,n):LI(o,i)}}function ad(e){return(t,i)=>{const n={async get(){return await this.updateComplete,this.renderRoot.querySelector(e)},enumerable:!0,configurable:!0};return i!==void 0?MI(n,t,i):LI(n,t)}}const MI=(e,t,i)=>{Object.defineProperty(t,i,e)},LI=(e,t)=>({kind:"method",placement:"prototype",key:t.key,descriptor:e}),tA=(e,t)=>Object.assign(Object.assign({},t),{finisher(i){Object.assign(i.prototype[t.key],e)}}),eA=(e,t,i)=>{Object.assign(t[i],e)};function hl(e){return(t,i)=>i!==void 0?eA(e,t,i):tA(e,t)}const NC=Element.prototype,iA=NC.msMatchesSelector||NC.webkitMatchesSelector;function Rh(e="",t=!1,i=""){return(n,o)=>{const l={get(){const I=`slot${e?`[name=${e}]`:":not([name])"}`,m=this.renderRoot.querySelector(I);let Z=m&&m.assignedNodes({flatten:t});return Z&&i&&(Z=Z.filter(x=>x.nodeType===Node.ELEMENT_NODE&&(x.matches?x.matches(i):iA.call(x,i)))),Z},enumerable:!0,configurable:!0};return o!==void 0?MI(l,n,o):LI(l,n)}}/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const Ja=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,JI=Symbol();class TI{constructor(t,i){if(i!==JI)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return this._styleSheet===void 0&&(Ja?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const nA=e=>new TI(String(e),JI),oA=e=>{if(e instanceof TI)return e.cssText;if(typeof e=="number")return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but
            take care to ensure page security.`)},bi=(e,...t)=>{const i=t.reduce((n,o,l)=>n+oA(o)+e[l+1],e[0]);return new TI(i,JI)};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const YC={};class jn extends Xh{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const i=(l,I)=>l.reduceRight((m,Z)=>Array.isArray(Z)?i(Z,m):(m.add(Z),m),I),n=i(t,new Set),o=[];n.forEach(l=>o.unshift(l)),this._styles=o}else this._styles=t===void 0?[]:[t];this._styles=this._styles.map(i=>{if(i instanceof CSSStyleSheet&&!Ja){const n=Array.prototype.slice.call(i.cssRules).reduce((o,l)=>o+l.cssText,"");return nA(n)}return i})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const t=this.constructor._styles;t.length!==0&&(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow?window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(i=>i.cssText),this.localName):Ja?this.renderRoot.adoptedStyleSheets=t.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet):this._needsShimAdoptedStyleSheets=!0)}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(t){const i=this.render();super.update(t),i!==YC&&this.constructor.render(i,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(n=>{const o=document.createElement("style");o.textContent=n.cssText,this.renderRoot.appendChild(o)}))}render(){return YC}}jn.finalized=!0;jn.render=O1;jn.shadowRootOptions={mode:"open"};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pi=e=>(t,i)=>{if(t.constructor._observers){if(!t.constructor.hasOwnProperty("_observers")){const n=t.constructor._observers;t.constructor._observers=new Map,n.forEach((o,l)=>t.constructor._observers.set(l,o))}}else{t.constructor._observers=new Map;const n=t.updated;t.updated=function(o){n.call(this,o),o.forEach((l,I)=>{const Z=this.constructor._observers.get(I);Z!==void 0&&Z.call(this,this[I],l)})}}t.constructor._observers.set(i,e)};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sA={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},sg={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},vh={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var No=function(){function e(t){t===void 0&&(t={}),this.adapter=t}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var rA=function(e){xo(t,e);function t(i){return e.call(this,on(on({},t.defaultAdapter),i))||this}return Object.defineProperty(t,"strings",{get:function(){return vh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return sA},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return sg},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!1,configurable:!0}),t.prototype.handleTargetScroll=function(){},t.prototype.handleWindowResize=function(){},t.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},t}(No);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Nc=0,lA=function(e){xo(t,e);function t(i){var n=e.call(this,i)||this;return n.wasDocked=!0,n.isDockedShowing=!0,n.currentAppBarOffsetTop=0,n.isCurrentlyBeingResized=!1,n.resizeThrottleId=Nc,n.resizeDebounceId=Nc,n.lastScrollPosition=n.adapter.getViewportScrollY(),n.topAppBarHeight=n.adapter.getTopAppBarHeight(),n}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.adapter.setStyle("top","")},t.prototype.handleTargetScroll=function(){var i=Math.max(this.adapter.getViewportScrollY(),0),n=i-this.lastScrollPosition;this.lastScrollPosition=i,this.isCurrentlyBeingResized||(this.currentAppBarOffsetTop-=n,this.currentAppBarOffsetTop>0?this.currentAppBarOffsetTop=0:Math.abs(this.currentAppBarOffsetTop)>this.topAppBarHeight&&(this.currentAppBarOffsetTop=-this.topAppBarHeight),this.moveTopAppBar())},t.prototype.handleWindowResize=function(){var i=this;this.resizeThrottleId||(this.resizeThrottleId=setTimeout(function(){i.resizeThrottleId=Nc,i.throttledResizeHandler()},sg.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized=!0,this.resizeDebounceId&&clearTimeout(this.resizeDebounceId),this.resizeDebounceId=setTimeout(function(){i.handleTargetScroll(),i.isCurrentlyBeingResized=!1,i.resizeDebounceId=Nc},sg.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},t.prototype.checkForUpdate=function(){var i=-this.topAppBarHeight,n=this.currentAppBarOffsetTop<0,o=this.currentAppBarOffsetTop>i,l=n&&o;if(l)this.wasDocked=!1;else if(this.wasDocked){if(this.isDockedShowing!==o)return this.isDockedShowing=o,!0}else return this.wasDocked=!0,!0;return l},t.prototype.moveTopAppBar=function(){if(this.checkForUpdate()){var i=this.currentAppBarOffsetTop;Math.abs(i)>=this.topAppBarHeight&&(i=-sg.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",i+"px")}},t.prototype.throttledResizeHandler=function(){var i=this.adapter.getTopAppBarHeight();this.topAppBarHeight!==i&&(this.wasDocked=!1,this.currentAppBarOffsetTop-=this.topAppBarHeight-i,this.topAppBarHeight=i),this.handleTargetScroll()},t}(rA),cA=lA;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sh=e=>e.nodeType===Node.ELEMENT_NODE;function uc(e){return{addClass:t=>{e.classList.add(t)},removeClass:t=>{e.classList.remove(t)},hasClass:t=>e.classList.contains(t)}}let wh=!1;const Fh=()=>{},gA={get passive(){return wh=!0,!1}};document.addEventListener("x",Fh,gA);document.removeEventListener("x",Fh);const dA=wh,kI=(e=window.document)=>{let t=e.activeElement;const i=[];if(!t)return i;for(;t&&(i.push(t),t.shadowRoot);)t=t.shadowRoot.activeElement;return i},Hh=e=>{const t=kI();if(!t.length)return!1;const i=t[t.length-1],n=new Event("check-if-focused",{bubbles:!0,composed:!0});let o=[];const l=I=>{o=I.composedPath()};return document.body.addEventListener("check-if-focused",l),i.dispatchEvent(n),document.body.removeEventListener("check-if-focused",l),o.indexOf(e)!==-1};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ks extends jn{click(){if(this.mdcRoot){this.mdcRoot.focus(),this.mdcRoot.click();return}super.click()}createFoundation(){this.mdcFoundation!==void 0&&this.mdcFoundation.destroy(),this.mdcFoundationClass&&(this.mdcFoundation=new this.mdcFoundationClass(this.createAdapter()),this.mdcFoundation.init())}firstUpdated(){this.createFoundation()}}/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class aA{constructor(t){this.classes=new Set,this.changed=!1,this.element=t;const i=(t.getAttribute("class")||"").split(/\s+/);for(const n of i)this.classes.add(n)}add(t){this.classes.add(t),this.changed=!0}remove(t){this.classes.delete(t),this.changed=!0}commit(){if(this.changed){let t="";this.classes.forEach(i=>t+=i+" "),this.element.setAttribute("class",t)}}}const MC=new WeakMap,In=Cl(e=>t=>{if(!(t instanceof Wr)||t instanceof ml||t.committer.name!=="class"||t.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:i}=t,{element:n}=i;let o=MC.get(t);o===void 0&&(n.setAttribute("class",i.strings.join(" ")),MC.set(t,o=new Set));const l=n.classList||new aA(n);o.forEach(I=>{I in e||(l.remove(I),o.delete(I))});for(const I in e){const m=e[I];m!=o.has(I)&&(m?(l.add(I),o.add(I)):(l.remove(I),o.delete(I)))}typeof l.commit=="function"&&l.commit()}),xh=dA?{passive:!0}:void 0;class Cc extends ks{constructor(){super(...arguments),this.centerTitle=!1,this.handleTargetScroll=()=>{this.mdcFoundation.handleTargetScroll()},this.handleNavigationClick=()=>{this.mdcFoundation.handleNavigationClick()}}get scrollTarget(){return this._scrollTarget||window}set scrollTarget(t){this.unregisterScrollListener();const i=this.scrollTarget;this._scrollTarget=t,this.updateRootPosition(),this.requestUpdate("scrollTarget",i),this.registerScrollListener()}updateRootPosition(){if(this.mdcRoot){const t=this.scrollTarget===window;this.mdcRoot.style.position=t?"":"absolute"}}render(){let t=Lt`<span class="mdc-top-app-bar__title"><slot name="title"></slot></span>`;return this.centerTitle&&(t=Lt`<section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-center">${t}</section>`),Lt`
      <header class="mdc-top-app-bar ${In(this.barClasses())}">
      <div class="mdc-top-app-bar__row">
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start" id="navigation">
          <slot name="navigationIcon"
            @click=${this.handleNavigationClick}></slot>
          ${this.centerTitle?null:t}
        </section>
        ${this.centerTitle?t:null}
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" id="actions" role="toolbar">
          <slot name="actionItems"></slot>
        </section>
      </div>
    </header>
    <div class="${In(this.contentClasses())}">
      <slot></slot>
    </div>
    `}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{setStyle:(t,i)=>this.mdcRoot.style.setProperty(t,i),getTopAppBarHeight:()=>this.mdcRoot.clientHeight,notifyNavigationIconClicked:()=>{this.dispatchEvent(new Event(vh.NAVIGATION_EVENT,{bubbles:!0,cancelable:!0}))},getViewportScrollY:()=>this.scrollTarget instanceof Window?this.scrollTarget.pageYOffset:this.scrollTarget.scrollTop,getTotalActionItems:()=>this._actionItemsSlot.assignedNodes({flatten:!0}).length})}registerListeners(){this.registerScrollListener()}unregisterListeners(){this.unregisterScrollListener()}registerScrollListener(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,xh)}unregisterScrollListener(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}firstUpdated(){super.firstUpdated(),this.updateRootPosition(),this.registerListeners()}disconnectedCallback(){super.disconnectedCallback(),this.unregisterListeners()}}z([vi(".mdc-top-app-bar")],Cc.prototype,"mdcRoot",void 0);z([vi('slot[name="actionItems"]')],Cc.prototype,"_actionItemsSlot",void 0);z([lt({type:Boolean})],Cc.prototype,"centerTitle",void 0);z([lt({type:Object})],Cc.prototype,"scrollTarget",null);class zI extends Cc{constructor(){super(...arguments),this.mdcFoundationClass=cA,this.prominent=!1,this.dense=!1,this.handleResize=()=>{this.mdcFoundation.handleWindowResize()}}barClasses(){return{"mdc-top-app-bar--dense":this.dense,"mdc-top-app-bar--prominent":this.prominent,"center-title":this.centerTitle}}contentClasses(){return{"mdc-top-app-bar--fixed-adjust":!this.dense&&!this.prominent,"mdc-top-app-bar--dense-fixed-adjust":this.dense&&!this.prominent,"mdc-top-app-bar--prominent-fixed-adjust":!this.dense&&this.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":this.dense&&this.prominent}}registerListeners(){super.registerListeners(),window.addEventListener("resize",this.handleResize,xh)}unregisterListeners(){super.unregisterListeners(),window.removeEventListener("resize",this.handleResize)}}z([lt({type:Boolean,reflect:!0})],zI.prototype,"prominent",void 0);z([lt({type:Boolean,reflect:!0})],zI.prototype,"dense",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const IA=bi`.mdc-top-app-bar{background-color:#6200ee;background-color:var(--mdc-theme-primary, #6200ee);color:white;display:flex;position:fixed;flex-direction:column;justify-content:space-between;box-sizing:border-box;width:100%;z-index:4}.mdc-top-app-bar .mdc-top-app-bar__action-item,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon{color:#fff;color:var(--mdc-theme-on-primary, #fff)}.mdc-top-app-bar .mdc-top-app-bar__action-item::before,.mdc-top-app-bar .mdc-top-app-bar__action-item::after,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon::after{background-color:#fff;background-color:var(--mdc-ripple-color, var(--mdc-theme-on-primary, #fff))}.mdc-top-app-bar .mdc-top-app-bar__action-item:hover::before,.mdc-top-app-bar .mdc-top-app-bar__action-item.mdc-ripple-surface--hover::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon:hover::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon.mdc-ripple-surface--hover::before{opacity:0.08;opacity:var(--mdc-ripple-hover-opacity, 0.08)}.mdc-top-app-bar .mdc-top-app-bar__action-item.mdc-ripple-upgraded--background-focused::before,.mdc-top-app-bar .mdc-top-app-bar__action-item:not(.mdc-ripple-upgraded):focus::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon.mdc-ripple-upgraded--background-focused::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-top-app-bar .mdc-top-app-bar__action-item:not(.mdc-ripple-upgraded)::after,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-top-app-bar .mdc-top-app-bar__action-item:not(.mdc-ripple-upgraded):active::after,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-top-app-bar .mdc-top-app-bar__action-item.mdc-ripple-upgraded,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-top-app-bar__row{display:flex;position:relative;box-sizing:border-box;width:100%;height:64px}.mdc-top-app-bar__section{display:inline-flex;flex:1 1 auto;align-items:center;min-width:0;padding:8px 12px;z-index:1}.mdc-top-app-bar__section--align-start{justify-content:flex-start;order:-1}.mdc-top-app-bar__section--align-end{justify-content:flex-end;order:1}.mdc-top-app-bar__title{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-headline6-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1.25rem;font-size:var(--mdc-typography-headline6-font-size, 1.25rem);line-height:2rem;line-height:var(--mdc-typography-headline6-line-height, 2rem);font-weight:500;font-weight:var(--mdc-typography-headline6-font-weight, 500);letter-spacing:0.0125em;letter-spacing:var(--mdc-typography-headline6-letter-spacing, 0.0125em);text-decoration:inherit;text-decoration:var(--mdc-typography-headline6-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-headline6-text-transform, inherit);padding-left:20px;padding-right:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;z-index:1}[dir=rtl] .mdc-top-app-bar__title,.mdc-top-app-bar__title[dir=rtl]{padding-left:0;padding-right:20px}.mdc-top-app-bar--short-collapsed{border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:24px;border-bottom-left-radius:0}[dir=rtl] .mdc-top-app-bar--short-collapsed,.mdc-top-app-bar--short-collapsed[dir=rtl]{border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:24px}.mdc-top-app-bar--short{top:0;right:auto;left:0;width:100%;transition:width 250ms cubic-bezier(0.4, 0, 0.2, 1)}[dir=rtl] .mdc-top-app-bar--short,.mdc-top-app-bar--short[dir=rtl]{right:0;left:auto}.mdc-top-app-bar--short .mdc-top-app-bar__row{height:56px}.mdc-top-app-bar--short .mdc-top-app-bar__section{padding:4px}.mdc-top-app-bar--short .mdc-top-app-bar__title{transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.mdc-top-app-bar--short-collapsed{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0,0,0,.12);width:56px;transition:width 300ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar--short-collapsed .mdc-top-app-bar__title{display:none}.mdc-top-app-bar--short-collapsed .mdc-top-app-bar__action-item{transition:padding 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar--short-collapsed.mdc-top-app-bar--short-has-action-item{width:112px}.mdc-top-app-bar--short-collapsed.mdc-top-app-bar--short-has-action-item .mdc-top-app-bar__section--align-end{padding-left:0;padding-right:12px}[dir=rtl] .mdc-top-app-bar--short-collapsed.mdc-top-app-bar--short-has-action-item .mdc-top-app-bar__section--align-end,.mdc-top-app-bar--short-collapsed.mdc-top-app-bar--short-has-action-item .mdc-top-app-bar__section--align-end[dir=rtl]{padding-left:12px;padding-right:0}.mdc-top-app-bar--dense .mdc-top-app-bar__row{height:48px}.mdc-top-app-bar--dense .mdc-top-app-bar__section{padding:0 4px}.mdc-top-app-bar--dense .mdc-top-app-bar__title{padding-left:12px;padding-right:0}[dir=rtl] .mdc-top-app-bar--dense .mdc-top-app-bar__title,.mdc-top-app-bar--dense .mdc-top-app-bar__title[dir=rtl]{padding-left:0;padding-right:12px}.mdc-top-app-bar--prominent .mdc-top-app-bar__row{height:128px}.mdc-top-app-bar--prominent .mdc-top-app-bar__title{align-self:flex-end;padding-bottom:2px}.mdc-top-app-bar--prominent .mdc-top-app-bar__action-item,.mdc-top-app-bar--prominent .mdc-top-app-bar__navigation-icon{align-self:flex-start}.mdc-top-app-bar--fixed{transition:box-shadow 200ms linear}.mdc-top-app-bar--fixed-scrolled{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0,0,0,.12);transition:box-shadow 200ms linear}.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__row{height:96px}.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__section{padding:0 12px}.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__title{padding-left:20px;padding-right:0;padding-bottom:9px}[dir=rtl] .mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__title,.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__title[dir=rtl]{padding-left:0;padding-right:20px}.mdc-top-app-bar--fixed-adjust{padding-top:64px}.mdc-top-app-bar--dense-fixed-adjust{padding-top:48px}.mdc-top-app-bar--short-fixed-adjust{padding-top:56px}.mdc-top-app-bar--prominent-fixed-adjust{padding-top:128px}.mdc-top-app-bar--dense-prominent-fixed-adjust{padding-top:96px}@media(max-width: 599px){.mdc-top-app-bar__row{height:56px}.mdc-top-app-bar__section{padding:4px}.mdc-top-app-bar--short{transition:width 200ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar--short-collapsed{transition:width 250ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar--short-collapsed .mdc-top-app-bar__section--align-end{padding-left:0;padding-right:12px}[dir=rtl] .mdc-top-app-bar--short-collapsed .mdc-top-app-bar__section--align-end,.mdc-top-app-bar--short-collapsed .mdc-top-app-bar__section--align-end[dir=rtl]{padding-left:12px;padding-right:0}.mdc-top-app-bar--prominent .mdc-top-app-bar__title{padding-bottom:6px}.mdc-top-app-bar--fixed-adjust{padding-top:56px}}:host{display:block}.mdc-top-app-bar{color:#fff;color:var(--mdc-theme-on-primary, #fff);width:100%;width:var(--mdc-top-app-bar-width, 100%)}.mdc-top-app-bar--prominent #navigation ::slotted(*),.mdc-top-app-bar--prominent #actions ::slotted(*){align-self:flex-start}#navigation ::slotted(*),#actions ::slotted(*){--mdc-icon-button-ripple-opacity: 0.24}.mdc-top-app-bar--short-collapsed #actions ::slotted(*){transition:padding 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar__section--align-center{justify-content:center}.mdc-top-app-bar__section--align-center .mdc-top-app-bar__title{padding-left:0;padding-right:0}.center-title .mdc-top-app-bar__section--align-start,.center-title .mdc-top-app-bar__section--align-end{flex-basis:0}.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__section--align-center .mdc-top-app-bar__title{padding-left:0;padding-right:0}.mdc-top-app-bar--fixed-scrolled{box-shadow:var(--mdc-top-app-bar-fixed-box-shadow, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}`,uA=bi`.mdc-top-app-bar{--mdc-theme-primary: var(--vvd-color-canvas);--mdc-theme-on-primary: var(--vvd-color-on-canvas);--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 20px;--vvd-typography-font-stretch: 75%;--vvd-typography-font-weight: 500;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 28px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-headline6-font-family: var(--vvd-typography-font-family);--mdc-typography-headline6-font-size: var(--vvd-typography-font-size);--mdc-typography-headline6-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-headline6-font-weight: var(--vvd-typography-font-weight);--mdc-typography-headline6-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-headline6-line-height: var(--vvd-typography-line-height);--mdc-typography-headline6-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-headline6-text-transform: var(--vvd-typography-text-transform)}.mdc-top-app-bar--fixed{transition:filter 200ms linear 0s}.mdc-top-app-bar--fixed-scrolled{box-shadow:unset;filter:var(--vvd-shadow-surface-4dp)}`;let fg=class extends zI{constructor(){super(...arguments),this.alternate=!1}};fg.styles=[IA,uA];z([lt({type:Boolean}),pi(function(e){e?this.mdcRoot.setAttribute("part","vvd-scheme-alternate"):this.mdcRoot.removeAttribute("part")})],fg.prototype,"alternate",void 0);fg=z([Ni("vwc-top-app-bar")],fg);var Xs;(function(e){e.Primary="primary",e.CTA="cta",e.Success="success",e.Alert="alert",e.Warning="warning",e.Info="info",e.Announcement="announcement"})(Xs||(Xs={}));var LC;(function(e){e.Pacific="pacific"})(LC||(LC={}));var JC;(function(e){e.Rounded="rounded",e.Pill="pill",e.Circled="circled"})(JC||(JC={}));var Gg;(function(e){e.xxx_Small="xxxs",e.xx_Small="xxs",e.x_Small="xs",e.Small="sm",e.Medium="md",e.Large="lg",e.x_Large="xl",e.xx_Large="xxl",e.xxx_Large="xxxl"})(Gg||(Gg={}));var TC;(function(e){e.Text="text",e.Filled="filled",e.Outlined="outlined",e.Soft="soft",e.Ghost="ghost"})(TC||(TC={}));var kC;(function(e){e.Small="small",e.Medium="medium",e.Large="large"})(kC||(kC={}));var rs;(function(e){e.Top="TOP",e.Bottom="BOTTOM",e.Start="START",e.Center="CENTER",e.End="END"})(rs||(rs={}));var Ta;(function(e){e.Status="status",e.Alert="alert"})(Ta||(Ta={}));var ka;(function(e){e.Polite="polite",e.Assertive="assertive"})(ka||(ka={}));const CA=bi`.layout{display:grid;grid-auto-rows:min-content}.layout.layout-column-basis-sm{grid-template-columns:var(--layout-grid-template-columns, repeat(var(--layout-auto-sizing), minmax(10rem, 1fr)))}.layout:not(.layout-column-basis-sm):not(.layout-column-basis-md):not(.layout-column-basis-lg):not(.layout-column-basis-block),.layout.layout-column-basis-md{grid-template-columns:var(--layout-grid-template-columns, repeat(var(--layout-auto-sizing), minmax(20rem, 1fr)))}.layout.layout-column-basis-lg{grid-template-columns:var(--layout-grid-template-columns, repeat(var(--layout-auto-sizing), minmax(30rem, 1fr)))}.layout.layout-column-basis-block{grid-template-columns:var(--layout-grid-template-columns, repeat(var(--layout-auto-sizing), minmax(1fr, 1fr)))}.layout.layout-column-spacing-xs{gap:16px}.layout:not(.layout-column-spacing-xs):not(.layout-column-spacing-md):not(.layout-column-spacing-xl),.layout.layout-column-spacing-md{gap:24px}.layout.layout-column-spacing-xl{gap:32px}.layout.layout-gutters-xs{margin:16px}.layout.layout-gutters-md{margin:24px}.layout.layout-gutters-xl{margin:32px}.layout.layout-auto-sizing-fill{--layout-auto-sizing:auto-fill}.layout:not(.layout-auto-sizing-fill):not(.layout-auto-sizing-fit),.layout.layout-auto-sizing-fit{--layout-auto-sizing:auto-fit}`;var zC;(function(e){e.Fit="fit",e.Fill="fill"})(zC||(zC={}));let mr=class extends jn{constructor(){super(...arguments),this.columnBasis=Gg.Small,this.columnSpacing=Gg.Medium}getRenderClasses(){return{[`layout-column-basis-${this.columnBasis}`]:!!this.columnBasis,[`layout-gutters-${this.gutters}`]:!!this.gutters,[`layout-column-spacing-${this.columnSpacing}`]:!!this.columnSpacing,[`layout-auto-sizing-${this.autoSizing}`]:!!this.autoSizing}}render(){return Lt`<div class="layout ${In(this.getRenderClasses())}">
			<slot></slot>
		</div>`}};mr.styles=CA;z([lt({type:String,reflect:!0,attribute:"gutters"})],mr.prototype,"gutters",void 0);z([lt({type:String,reflect:!0,attribute:"column-basis"})],mr.prototype,"columnBasis",void 0);z([lt({type:String,reflect:!0,attribute:"column-spacing"})],mr.prototype,"columnSpacing",void 0);z([lt({type:String,reflect:!0,attribute:"auto-sizing"})],mr.prototype,"autoSizing",void 0);mr=z([Ni("vwc-layout")],mr);class Id extends jn{constructor(){super(...arguments),this.tight=!1}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation,[`font-face-${this.fontFace}`]:!!this.fontFace,tight:this.tight}}render(){return Lt`<slot class="vwc-text ${In(this.getRenderClasses())}"></slot>`}}z([lt({type:String,reflect:!0,attribute:"font-face"})],Id.prototype,"fontFace",void 0);z([lt({type:String,reflect:!0})],Id.prototype,"connotation",void 0);z([lt({type:Boolean,reflect:!0})],Id.prototype,"tight",void 0);const mA=bi`.vwc-text{font:400 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;color:var(--connotation)}.vwc-text.connotation-primary,.vwc-text:not(.connotation-cta):not(.connotation-announcement):not(.connotation-info):not(.connotation-success):not(.connotation-alert){--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary)}.vwc-text.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta)}.vwc-text.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement)}.vwc-text.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info)}.vwc-text.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}.vwc-text.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}.vwc-text.font-face-body-1{font:400 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-1-bold{font:600 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-1-code{font:400 ultra-condensed 16px / 24px SpeziaMonoWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-1-link{font:400 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:underline;text-transform:none}.vwc-text.font-face-body-2{font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-2-bold{font:600 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-2-code{font:400 ultra-condensed 14px / 20px SpeziaMonoWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-2-link{font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:underline;text-transform:none}.vwc-text.font-face-button{font:600 ultra-condensed 14px / 100% SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-button-dense{font:600 ultra-condensed 12px / 100% SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-button-enlarge{font:600 ultra-condensed 16px / 100% SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-caption{font:400 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-caption-bold{font:600 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-caption-code{font:400 ultra-condensed 12px / 16px SpeziaMonoWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-caption-link{font:400 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:underline;text-transform:none}.vwc-text.font-face-headline-1{font:500 condensed 66px / 88px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-headline-2{font:500 condensed 52px / 68px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-subtitle-1{font:500 condensed 26px / 36px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-subtitle-2{font:500 condensed 20px / 28px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-title-1{font:500 condensed 40px / 52px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-title-2{font:500 condensed 32px / 44px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-headline-1,.vwc-text.font-face-headline-2{--font-face-margin: 2.5rem 0}.vwc-text.font-face-title-1,.vwc-text.font-face-title-2{--font-face-margin: 2rem 0}.vwc-text.font-face-subtitle-1,.vwc-text.font-face-subtitle-2{--font-face-margin: 1.5rem 0}.vwc-text.font-face-body-1,.vwc-text.font-face-body-2{--font-face-margin: 1rem 0}.vwc-text:not(.tight):where(.font-face-headline-1, .font-face-headline-2, .font-face-title-1, .font-face-title-2, .font-face-subtitle-1, .font-face-subtitle-2, .font-face-body-1, .font-face-body-2){display:block;margin:var(--font-face-margin, 0)}::slotted(:where(h1, h2, h3, h4, h5, h6, p)){margin:initial}::slotted(*){color:inherit;font:inherit}`;let za=class extends Id{};za.styles=mA;za=z([Ni("vwc-text")],za);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const KC=new WeakMap,hA=window.navigator.userAgent.indexOf("Trident/")>0,UC=Cl(e=>t=>{if(!(t instanceof Br))throw new Error("unsafeSVG can only be used in text bindings");const i=KC.get(t);if(i!==void 0&&Ic(e)&&e===i.value&&t.value===i.fragment)return;const n=document.createElement("template"),o=n.content;let l;hA?(n.innerHTML=`<svg>${e}</svg>`,l=o.firstChild):(l=document.createElementNS("http://www.w3.org/2000/svg","svg"),o.appendChild(l),l.innerHTML=e),o.removeChild(l),N1(o,l.firstChild);const I=document.importNode(o,!0);t.setValue(I),KC.set(t,{value:e,fragment:I})});/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const EC=new WeakMap,QC=2147483647,bA=Cl((...e)=>t=>{let i=EC.get(t);i===void 0&&(i={lastRenderedIndex:QC,values:[]},EC.set(t,i));const n=i.values;let o=n.length;i.values=e;for(let l=0;l<e.length&&!(l>i.lastRenderedIndex);l++){const I=e[l];if(Ic(I)||typeof I.then!="function"){t.setValue(I),i.lastRenderedIndex=l;break}l<o&&I===n[l]||(i.lastRenderedIndex=QC,o=0,Promise.resolve(I).then(m=>{const Z=i.values.indexOf(I);Z>-1&&Z<i.lastRenderedIndex&&(i.lastRenderedIndex=Z,t.setValue(m),t.commit())}))}});/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const ta=new WeakMap,Do=Cl(e=>t=>{const i=ta.get(t);if(e===void 0&&t instanceof Wr){if(i!==void 0||!ta.has(t)){const n=t.committer.name;t.committer.element.removeAttribute(n)}}else e!==i&&t.setValue(e);ta.set(t,e)});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pA(e,t,i){const n=e.constructor;if(!i){const m=`__${t}`;if(i=n.getPropertyDescriptor(t,m),!i)throw new Error("@ariaProperty must be used after a @property decorator")}const o=i;let l="";if(!o.set)throw new Error(`@ariaProperty requires a setter for ${t}`);const I={configurable:!0,enumerable:!0,set(m){l===""&&(l=n.getPropertyOptions(t).attribute),this.hasAttribute(l)&&this.removeAttribute(l),o.set.call(this,m)}};return o.get&&(I.get=function(){return o.get.call(this)}),I}function mc(e,t,i){if(t!==void 0)return pA(e,t,i);throw new Error("@ariaProperty only supports TypeScript Decorators")}const AA=bi`.icon{color:var(--connotation, currentColor)}.icon.connotation-primary{--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary)}.icon.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta)}.icon.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement)}.icon.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}.icon.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}.icon.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info)}:host([size=small]){--vvd-icon-size:16px}:host,:host([size=medium]){--vvd-icon-size:24px}:host([size=large]){--vvd-icon-size:32px}:host([inline]){--vvd-icon-size:1em;line-height:1;vertical-align:middle}:host{display:inline-block;width:var(--icon-size, var(--vvd-icon-size));height:var(--icon-size, var(--vvd-icon-size));block-size:var(--icon-size, var(--vvd-icon-size));inline-size:var(--icon-size, var(--vvd-icon-size));line-height:1;vertical-align:middle}.icon{display:contents}.icon>svg{block-size:100%;fill:currentColor;inline-size:100%;vertical-align:super}`,yA="https://icon.resources.vonage.com",ZA="4.0.29",fA='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><style>@keyframes rotation { from { transform: rotate(0deg) } to { transform: rotate(360deg) } } g#circle { transform-origin: center center; animation: 1s rotation 0s linear infinite; } path { fill: currentColor }</style> <g id="circle"> <path d="M7.5 2C3.91014 2 1 4.91014 1 8.5C1 12.0899 3.91014 15 7.5 15C11.0899 15 14 12.0899 14 8.5C14 8.22386 14.2239 8 14.5 8C14.7761 8 15 8.22386 15 8.5C15 12.6421 11.6421 16 7.5 16C3.35786 16 0 12.6421 0 8.5C0 4.35786 3.35786 1 7.5 1C10.3622 1 12.7088 2.78366 13.9478 5.27753C14.0706 5.52484 13.9698 5.82492 13.7225 5.94778C13.4752 6.07065 13.1751 5.96977 13.0522 5.72247C11.9472 3.49834 9.90985 2 7.5 2Z"/><path d="M13.5 0C13.7761 0 14 0.223858 14 0.5V5.5C14 5.77614 13.7761 6 13.5 6H8.5C8.22386 6 8 5.77614 8 5.5C8 5.22386 8.22386 5 8.5 5H13V0.5C13 0.223858 13.2239 0 13.5 0Z"/></g></svg>',GA=500,VA=2e3,DC=e=>new Promise(t=>setTimeout(t,e)),WA=(e,t)=>[yA,`v${t}`,e].join("/"),BA=u1(a1,(e="")=>e.trim()?fetch(WA([e,"svg"].join("."),ZA)).then(t=>t.headers.get("content-type")==="image/svg+xml"?t.text():""):Promise.resolve("")),XA=(e,t)=>(i="")=>i.replace(/<svg[^>]*>/,n=>n.replace(/<svg[^>]+/,o=>o.split(" ").concat([e,t].filter(Boolean).join("=")).join(" ")));let hr=class extends jn{constructor(){super(...arguments),this.ariaLabel=""}static get styles(){return AA}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation}}render(){return Lt`<figure class="icon ${In(this.getRenderClasses())}" aria-label="${Do(this.ariaLabel)}">${bA(BA(this.type).then(XA("aria-hidden","true")).then(UC),DC(VA),DC(GA).then(lh(UC(fA))))}</figure>`}};z([lt({type:String,reflect:!0})],hr.prototype,"connotation",void 0);z([lt({attribute:!0,type:String,reflect:!0})],hr.prototype,"type",void 0);z([lt({attribute:!0,type:Boolean,reflect:!0})],hr.prototype,"inline",void 0);z([lt({attribute:!0,type:String,reflect:!0})],hr.prototype,"size",void 0);z([mc,lt({attribute:"aria-label",type:String})],hr.prototype,"ariaLabel",void 0);hr=z([Ni("vwc-icon")],hr);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function RA(e,t){var i=e.matches||e.webkitMatchesSelector||e.msMatchesSelector;return i.call(e,t)}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var vA={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},SA={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},OC={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};function wA(e,t,i){if(!e)return{x:0,y:0};var n=t.x,o=t.y,l=n+i.left,I=o+i.top,m,Z;if(e.type==="touchstart"){var x=e;m=x.changedTouches[0].pageX-l,Z=x.changedTouches[0].pageY-I}else{var L=e;m=L.pageX-l,Z=L.pageY-I}return{x:m,y:Z}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var jC=["touchstart","pointerdown","mousedown","keydown"],_C=["touchend","pointerup","mouseup","contextmenu"],Yc=[],FA=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.activationAnimationHasEnded=!1,n.activationTimer=0,n.fgDeactivationRemovalTimer=0,n.fgScale="0",n.frame={width:0,height:0},n.initialSize=0,n.layoutFrame=0,n.maxRadius=0,n.unboundedCoords={left:0,top:0},n.activationState=n.defaultActivationState(),n.activationTimerCallback=function(){n.activationAnimationHasEnded=!0,n.runDeactivationUXLogicIfReady()},n.activateHandler=function(o){n.activateImpl(o)},n.deactivateHandler=function(){n.deactivateImpl()},n.focusHandler=function(){n.handleFocus()},n.blurHandler=function(){n.handleBlur()},n.resizeHandler=function(){n.layout()},n}return Object.defineProperty(t,"cssClasses",{get:function(){return vA},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return SA},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return OC},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var i=this,n=this.supportsPressRipple();if(this.registerRootHandlers(n),n){var o=t.cssClasses,l=o.ROOT,I=o.UNBOUNDED;requestAnimationFrame(function(){i.adapter.addClass(l),i.adapter.isUnbounded()&&(i.adapter.addClass(I),i.layoutInternal())})}},t.prototype.destroy=function(){var i=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,o=n.ROOT,l=n.UNBOUNDED;requestAnimationFrame(function(){i.adapter.removeClass(o),i.adapter.removeClass(l),i.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},t.prototype.activate=function(i){this.activateImpl(i)},t.prototype.deactivate=function(){this.deactivateImpl()},t.prototype.layout=function(){var i=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){i.layoutInternal(),i.layoutFrame=0})},t.prototype.setUnbounded=function(i){var n=t.cssClasses.UNBOUNDED;i?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var i=this;requestAnimationFrame(function(){return i.adapter.addClass(t.cssClasses.BG_FOCUSED)})},t.prototype.handleBlur=function(){var i=this;requestAnimationFrame(function(){return i.adapter.removeClass(t.cssClasses.BG_FOCUSED)})},t.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers=function(i){var n,o;if(i){try{for(var l=Fl(jC),I=l.next();!I.done;I=l.next()){var m=I.value;this.adapter.registerInteractionHandler(m,this.activateHandler)}}catch(Z){n={error:Z}}finally{try{I&&!I.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},t.prototype.registerDeactivationHandlers=function(i){var n,o;if(i.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var l=Fl(_C),I=l.next();!I.done;I=l.next()){var m=I.value;this.adapter.registerDocumentInteractionHandler(m,this.deactivateHandler)}}catch(Z){n={error:Z}}finally{try{I&&!I.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}},t.prototype.deregisterRootHandlers=function(){var i,n;try{for(var o=Fl(jC),l=o.next();!l.done;l=o.next()){var I=l.value;this.adapter.deregisterInteractionHandler(I,this.activateHandler)}}catch(m){i={error:m}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},t.prototype.deregisterDeactivationHandlers=function(){var i,n;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var o=Fl(_C),l=o.next();!l.done;l=o.next()){var I=l.value;this.adapter.deregisterDocumentInteractionHandler(I,this.deactivateHandler)}}catch(m){i={error:m}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}},t.prototype.removeCssVars=function(){var i=this,n=t.strings,o=Object.keys(n);o.forEach(function(l){l.indexOf("VAR_")===0&&i.adapter.updateCssVariable(n[l],null)})},t.prototype.activateImpl=function(i){var n=this;if(!this.adapter.isSurfaceDisabled()){var o=this.activationState;if(!o.isActivated){var l=this.previousActivationEvent,I=l&&i!==void 0&&l.type!==i.type;if(!I){o.isActivated=!0,o.isProgrammatic=i===void 0,o.activationEvent=i,o.wasActivatedByPointer=o.isProgrammatic?!1:i!==void 0&&(i.type==="mousedown"||i.type==="touchstart"||i.type==="pointerdown");var m=i!==void 0&&Yc.length>0&&Yc.some(function(Z){return n.adapter.containsEventTarget(Z)});if(m){this.resetActivationState();return}i!==void 0&&(Yc.push(i.target),this.registerDeactivationHandlers(i)),o.wasElementMadeActive=this.checkElementMadeActive(i),o.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Yc=[],!o.wasElementMadeActive&&i!==void 0&&(i.key===" "||i.keyCode===32)&&(o.wasElementMadeActive=n.checkElementMadeActive(i),o.wasElementMadeActive&&n.animateActivation()),o.wasElementMadeActive||(n.activationState=n.defaultActivationState())})}}}},t.prototype.checkElementMadeActive=function(i){return i!==void 0&&i.type==="keydown"?this.adapter.isSurfaceActive():!0},t.prototype.animateActivation=function(){var i=this,n=t.strings,o=n.VAR_FG_TRANSLATE_START,l=n.VAR_FG_TRANSLATE_END,I=t.cssClasses,m=I.FG_DEACTIVATION,Z=I.FG_ACTIVATION,x=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var L="",K="";if(!this.adapter.isUnbounded()){var st=this.getFgTranslationCoordinates(),ut=st.startPoint,P=st.endPoint;L=ut.x+"px, "+ut.y+"px",K=P.x+"px, "+P.y+"px"}this.adapter.updateCssVariable(o,L),this.adapter.updateCssVariable(l,K),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(m),this.adapter.computeBoundingRect(),this.adapter.addClass(Z),this.activationTimer=setTimeout(function(){i.activationTimerCallback()},x)},t.prototype.getFgTranslationCoordinates=function(){var i=this.activationState,n=i.activationEvent,o=i.wasActivatedByPointer,l;o?l=wA(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):l={x:this.frame.width/2,y:this.frame.height/2},l={x:l.x-this.initialSize/2,y:l.y-this.initialSize/2};var I={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:l,endPoint:I}},t.prototype.runDeactivationUXLogicIfReady=function(){var i=this,n=t.cssClasses.FG_DEACTIVATION,o=this.activationState,l=o.hasDeactivationUXRun,I=o.isActivated,m=l||!I;m&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer=setTimeout(function(){i.adapter.removeClass(n)},OC.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses=function(){var i=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(i),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState=function(){var i=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return i.previousActivationEvent=void 0},t.numbers.TAP_DELAY_MS)},t.prototype.deactivateImpl=function(){var i=this,n=this.activationState;if(!!n.isActivated){var o=on({},n);n.isProgrammatic?(requestAnimationFrame(function(){i.animateDeactivation(o)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){i.activationState.hasDeactivationUXRun=!0,i.animateDeactivation(o),i.resetActivationState()}))}},t.prototype.animateDeactivation=function(i){var n=i.wasActivatedByPointer,o=i.wasElementMadeActive;(n||o)&&this.runDeactivationUXLogicIfReady()},t.prototype.layoutInternal=function(){var i=this;this.frame=this.adapter.computeBoundingRect();var n=Math.max(this.frame.height,this.frame.width),o=function(){var I=Math.sqrt(Math.pow(i.frame.width,2)+Math.pow(i.frame.height,2));return I+t.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?n:o();var l=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&l%2!==0?this.initialSize=l-1:this.initialSize=l,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},t.prototype.updateLayoutCssVars=function(){var i=t.strings,n=i.VAR_FG_SIZE,o=i.VAR_LEFT,l=i.VAR_TOP,I=i.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize+"px"),this.adapter.updateCssVariable(I,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(o,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(l,this.unboundedCoords.top+"px"))},t}(No),HA=FA;/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const PC=new WeakMap,Nh=Cl(e=>t=>{if(!(t instanceof Wr)||t instanceof ml||t.committer.name!=="style"||t.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");const{committer:i}=t,{style:n}=i.element;let o=PC.get(t);o===void 0&&(n.cssText=i.strings.join(" "),PC.set(t,o=new Set)),o.forEach(l=>{l in e||(o.delete(l),l.indexOf("-")===-1?n[l]=null:n.removeProperty(l))});for(const l in e)o.add(l),l.indexOf("-")===-1?n[l]=e[l]:n.setProperty(l,e[l])});class wn extends ks{constructor(){super(...arguments),this.primary=!1,this.accent=!1,this.unbounded=!1,this.disabled=!1,this.activated=!1,this.selected=!1,this.internalUseStateLayerCustomProperties=!1,this.hovering=!1,this.bgFocused=!1,this.fgActivation=!1,this.fgDeactivation=!1,this.fgScale="",this.fgSize="",this.translateStart="",this.translateEnd="",this.leftPos="",this.topPos="",this.mdcFoundationClass=HA}get isActive(){return RA(this.parentElement||this,":active")}createAdapter(){return{browserSupportsCssVars:()=>!0,isUnbounded:()=>this.unbounded,isSurfaceActive:()=>this.isActive,isSurfaceDisabled:()=>this.disabled,addClass:t=>{switch(t){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!0;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!0;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!0;break}},removeClass:t=>{switch(t){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!1;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!1;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!1;break}},containsEventTarget:()=>!0,registerInteractionHandler:()=>{},deregisterInteractionHandler:()=>{},registerDocumentInteractionHandler:()=>{},deregisterDocumentInteractionHandler:()=>{},registerResizeHandler:()=>{},deregisterResizeHandler:()=>{},updateCssVariable:(t,i)=>{switch(t){case"--mdc-ripple-fg-scale":this.fgScale=i;break;case"--mdc-ripple-fg-size":this.fgSize=i;break;case"--mdc-ripple-fg-translate-end":this.translateEnd=i;break;case"--mdc-ripple-fg-translate-start":this.translateStart=i;break;case"--mdc-ripple-left":this.leftPos=i;break;case"--mdc-ripple-top":this.topPos=i;break}},computeBoundingRect:()=>(this.parentElement||this).getBoundingClientRect(),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset})}}startPress(t){this.waitForFoundation(()=>{this.mdcFoundation.activate(t)})}endPress(){this.waitForFoundation(()=>{this.mdcFoundation.deactivate()})}startFocus(){this.waitForFoundation(()=>{this.mdcFoundation.handleFocus()})}endFocus(){this.waitForFoundation(()=>{this.mdcFoundation.handleBlur()})}startHover(){this.hovering=!0}endHover(){this.hovering=!1}waitForFoundation(t){this.mdcFoundation?t():this.updateComplete.then(t)}update(t){t.has("disabled")&&this.disabled&&this.endHover(),super.update(t)}render(){const t=this.activated&&(this.primary||!this.accent),i=this.selected&&(this.primary||!this.accent),n={"mdc-ripple-surface--accent":this.accent,"mdc-ripple-surface--primary--activated":t,"mdc-ripple-surface--accent--activated":this.accent&&this.activated,"mdc-ripple-surface--primary--selected":i,"mdc-ripple-surface--accent--selected":this.accent&&this.selected,"mdc-ripple-surface--disabled":this.disabled,"mdc-ripple-surface--hover":this.hovering,"mdc-ripple-surface--primary":this.primary,"mdc-ripple-surface--selected":this.selected,"mdc-ripple-upgraded--background-focused":this.bgFocused,"mdc-ripple-upgraded--foreground-activation":this.fgActivation,"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation,"mdc-ripple-upgraded--unbounded":this.unbounded,"mdc-ripple-surface--internal-use-state-layer-custom-properties":this.internalUseStateLayerCustomProperties};return Lt`
        <div class="mdc-ripple-surface mdc-ripple-upgraded ${In(n)}"
          style="${Nh({"--mdc-ripple-fg-scale":this.fgScale,"--mdc-ripple-fg-size":this.fgSize,"--mdc-ripple-fg-translate-end":this.translateEnd,"--mdc-ripple-fg-translate-start":this.translateStart,"--mdc-ripple-left":this.leftPos,"--mdc-ripple-top":this.topPos})}"></div>`}}z([vi(".mdc-ripple-surface")],wn.prototype,"mdcRoot",void 0);z([lt({type:Boolean})],wn.prototype,"primary",void 0);z([lt({type:Boolean})],wn.prototype,"accent",void 0);z([lt({type:Boolean})],wn.prototype,"unbounded",void 0);z([lt({type:Boolean})],wn.prototype,"disabled",void 0);z([lt({type:Boolean})],wn.prototype,"activated",void 0);z([lt({type:Boolean})],wn.prototype,"selected",void 0);z([lt({type:Boolean})],wn.prototype,"internalUseStateLayerCustomProperties",void 0);z([Ri()],wn.prototype,"hovering",void 0);z([Ri()],wn.prototype,"bgFocused",void 0);z([Ri()],wn.prototype,"fgActivation",void 0);z([Ri()],wn.prototype,"fgDeactivation",void 0);z([Ri()],wn.prototype,"fgScale",void 0);z([Ri()],wn.prototype,"fgSize",void 0);z([Ri()],wn.prototype,"translateStart",void 0);z([Ri()],wn.prototype,"translateEnd",void 0);z([Ri()],wn.prototype,"leftPos",void 0);z([Ri()],wn.prototype,"topPos",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const xA=bi`.mdc-ripple-surface{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0);will-change:transform,opacity;position:relative;outline:none;overflow:hidden}.mdc-ripple-surface::before,.mdc-ripple-surface::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-ripple-surface::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index, 1)}.mdc-ripple-surface::after{z-index:0;z-index:var(--mdc-ripple-z-index, 0)}.mdc-ripple-surface.mdc-ripple-upgraded::before{transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-ripple-surface.mdc-ripple-upgraded::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-ripple-surface.mdc-ripple-upgraded--unbounded::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-activation::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-deactivation::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-ripple-surface::before,.mdc-ripple-surface::after{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-ripple-surface.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded],.mdc-ripple-upgraded--unbounded{overflow:visible}.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::before,.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::after,.mdc-ripple-upgraded--unbounded::before,.mdc-ripple-upgraded--unbounded::after{top:calc(50% - 50%);left:calc(50% - 50%);width:100%;height:100%}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::before,.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::before,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after{top:var(--mdc-ripple-top, calc(50% - 50%));left:var(--mdc-ripple-left, calc(50% - 50%));width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface::before,.mdc-ripple-surface::after{background-color:#000;background-color:var(--mdc-ripple-color, #000)}.mdc-ripple-surface:hover::before,.mdc-ripple-surface.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}:host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:block}:host .mdc-ripple-surface{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;will-change:unset}.mdc-ripple-surface--primary::before,.mdc-ripple-surface--primary::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary:hover::before,.mdc-ripple-surface--primary.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface--primary.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--primary.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--primary--activated::before{opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12)}.mdc-ripple-surface--primary--activated::before,.mdc-ripple-surface--primary--activated::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary--activated:hover::before,.mdc-ripple-surface--primary--activated.mdc-ripple-surface--hover::before{opacity:0.16;opacity:var(--mdc-ripple-hover-opacity, 0.16)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--primary--selected::before{opacity:0.08;opacity:var(--mdc-ripple-selected-opacity, 0.08)}.mdc-ripple-surface--primary--selected::before,.mdc-ripple-surface--primary--selected::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary--selected:hover::before,.mdc-ripple-surface--primary--selected.mdc-ripple-surface--hover::before{opacity:0.12;opacity:var(--mdc-ripple-hover-opacity, 0.12)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-focus-opacity, 0.2)}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--accent::before,.mdc-ripple-surface--accent::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent:hover::before,.mdc-ripple-surface--accent.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface--accent.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--accent.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--accent--activated::before{opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12)}.mdc-ripple-surface--accent--activated::before,.mdc-ripple-surface--accent--activated::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent--activated:hover::before,.mdc-ripple-surface--accent--activated.mdc-ripple-surface--hover::before{opacity:0.16;opacity:var(--mdc-ripple-hover-opacity, 0.16)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--accent--selected::before{opacity:0.08;opacity:var(--mdc-ripple-selected-opacity, 0.08)}.mdc-ripple-surface--accent--selected::before,.mdc-ripple-surface--accent--selected::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent--selected:hover::before,.mdc-ripple-surface--accent--selected.mdc-ripple-surface--hover::before{opacity:0.12;opacity:var(--mdc-ripple-hover-opacity, 0.12)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-focus-opacity, 0.2)}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--disabled{opacity:0}.mdc-ripple-surface--internal-use-state-layer-custom-properties::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties::after{background-color:#000;background-color:var(--mdc-ripple-hover-state-layer-color, #000)}.mdc-ripple-surface--internal-use-state-layer-custom-properties:hover::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-state-layer-opacity, 0.04)}.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-state-layer-opacity, 0.12)}.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-pressed-state-layer-opacity, 0.12)}.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-pressed-state-layer-opacity, 0.12)}`;let Ka=class extends wn{};Ka.styles=[xA];Ka=z([Ni("mwc-ripple")],Ka);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ud{constructor(t){this.startPress=i=>{t().then(n=>{n&&n.startPress(i)})},this.endPress=()=>{t().then(i=>{i&&i.endPress()})},this.startFocus=()=>{t().then(i=>{i&&i.startFocus()})},this.endFocus=()=>{t().then(i=>{i&&i.endFocus()})},this.startHover=()=>{t().then(i=>{i&&i.startHover()})},this.endHover=()=>{t().then(i=>{i&&i.endHover()})}}}class bs extends jn{constructor(){super(...arguments),this.disabled=!1,this.icon="",this.shouldRenderRipple=!1,this.rippleHandlers=new ud(()=>(this.shouldRenderRipple=!0,this.ripple))}renderRipple(){return this.shouldRenderRipple?Lt`
            <mwc-ripple
                .disabled="${this.disabled}"
                unbounded>
            </mwc-ripple>`:""}focus(){const t=this.buttonElement;t&&(this.rippleHandlers.startFocus(),t.focus())}blur(){const t=this.buttonElement;t&&(this.rippleHandlers.endFocus(),t.blur())}render(){return Lt`<button
        class="mdc-icon-button"
        aria-label="${this.ariaLabel||this.icon}"
        ?disabled="${this.disabled}"
        @focus="${this.handleRippleFocus}"
        @blur="${this.handleRippleBlur}"
        @mousedown="${this.handleRippleMouseDown}"
        @mouseenter="${this.handleRippleMouseEnter}"
        @mouseleave="${this.handleRippleMouseLeave}"
        @touchstart="${this.handleRippleTouchStart}"
        @touchend="${this.handleRippleDeactivate}"
        @touchcancel="${this.handleRippleDeactivate}"
    >${this.renderRipple()}
    <i class="material-icons">${this.icon}</i>
    <span
      ><slot></slot
    ></span>
  </button>`}handleRippleMouseDown(t){const i=()=>{window.removeEventListener("mouseup",i),this.handleRippleDeactivate()};window.addEventListener("mouseup",i),this.rippleHandlers.startPress(t)}handleRippleTouchStart(t){this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}z([lt({type:Boolean,reflect:!0})],bs.prototype,"disabled",void 0);z([lt({type:String})],bs.prototype,"icon",void 0);z([mc,lt({type:String,attribute:"aria-label"})],bs.prototype,"ariaLabel",void 0);z([vi("button")],bs.prototype,"buttonElement",void 0);z([ad("mwc-ripple")],bs.prototype,"ripple",void 0);z([Ri()],bs.prototype,"shouldRenderRipple",void 0);z([hl({passive:!0})],bs.prototype,"handleRippleMouseDown",null);z([hl({passive:!0})],bs.prototype,"handleRippleTouchStart",null);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const Yh=bi`.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:transparent;fill:currentColor;color:inherit;font-size:24px;text-decoration:none;cursor:pointer;user-select:none;width:48px;height:48px;padding:12px}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button:disabled{color:rgba(0, 0, 0, 0.38);color:var(--mdc-theme-text-disabled-on-light, rgba(0, 0, 0, 0.38))}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button--touch{margin-top:0px;margin-bottom:0px}:host{display:inline-block;outline:none;--mdc-ripple-color: currentcolor;-webkit-tap-highlight-color:transparent}:host([disabled]){pointer-events:none}:host,.mdc-icon-button{vertical-align:top}.mdc-icon-button{width:var(--mdc-icon-button-size, 48px);height:var(--mdc-icon-button-size, 48px);padding:calc( (var(--mdc-icon-button-size, 48px) - var(--mdc-icon-size, 24px)) / 2 )}.mdc-icon-button>i{position:absolute;top:0;padding-top:inherit}.mdc-icon-button i,.mdc-icon-button svg,.mdc-icon-button img,.mdc-icon-button ::slotted(*){display:block;width:var(--mdc-icon-size, 24px);height:var(--mdc-icon-size, 24px)}`;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ql=class extends bs{};ql.styles=[Yh];ql=z([Ni("mwc-icon-button")],ql);const NA=bi`.mdc-icon-button.layout-filled{--layout-color-fill:var(--connotation);--layout-color-text:var(--on-connotation)}.mdc-icon-button.layout-outlined{--layout-color-fill:transparent;--layout-color-outline:var(--connotation-diverse);--layout-color-text:var(--connotation-diverse)}.mdc-icon-button.layout-ghost,.mdc-icon-button:not(.layout-filled):not(.layout-outlined){--layout-color-fill:transparent;--layout-color-text:var(--connotation-diverse)}:host(:not([shape=circled i])),:host([shape=rounded i]){--vvd-icon-button-shape:6px}:host([shape=circled i]){--vvd-icon-button-shape:50%}:host{--mdc-icon-button-size: var(--vvd-icon-button-block-size, 40px)}.mdc-icon-button{--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);display:inline-flex;overflow:hidden;align-items:center;justify-content:center;border:1px solid var(--layout-color-outline);background-color:var(--vvd-icon-button-color, var(--layout-color-fill));border-radius:var(--vvd-icon-button-shape);color:var(--vvd-icon-button-on-color, var(--layout-color-text));font-size:inherit}.mdc-icon-button.connotation-primary,.mdc-icon-button:not(.connotation-cta):not(.connotation-success):not(.connotation-alert):not(.connotation-info):not(.connotation-announcement){--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary);--connotation-diverse:var(--vvd-color-primary)}.mdc-icon-button.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta);--connotation-diverse:var(--vvd-color-cta-70)}.mdc-icon-button.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success);--connotation-diverse:var(--vvd-color-success-70)}.mdc-icon-button.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert);--connotation-diverse:var(--vvd-color-alert-70)}.mdc-icon-button.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info);--connotation-diverse:var(--vvd-color-info-70)}.mdc-icon-button.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement);--connotation-diverse:var(--vvd-color-announcement-70)}.mdc-icon-button:disabled{color:var(--vvd-formfield-disabled-ink)}:host([layout=filled i]) .mdc-icon-button:disabled{background-color:var(--vvd-color-neutral-30)}:host([layout=outlined i]) .mdc-icon-button:disabled{border-color:var(--vvd-formfield-disabled-ink)}:host([dense]){--mdc-icon-button-size: var(--vvd-icon-button-block-size, 32px)}:host([enlarged]){--mdc-icon-button-size: var(--vvd-icon-button-block-size, 48px)}vwc-icon{--connotation:initial}:host vwc-icon{--vvd-icon-size:var(--vvd-icon-button-icon-size, 20px)}:host([dense]) vwc-icon{--vvd-icon-size:var(--vvd-icon-button-icon-size, 16px)}:host([enlarged]) vwc-icon{--vvd-icon-size:var(--vvd-icon-button-icon-size, 24px)}`,hc=bi`:host{--mdc-theme-primary: var(--vvd-color-primary);--mdc-theme-on-primary: var(--vvd-color-on-primary);--mdc-theme-text-primary-on-background: var(--vvd-color-on-canvas);--mdc-theme-secondary: var(--vvd-color-primary);--mdc-theme-on-secondary: var(--vvd-color-on-primary);--mdc-theme-surface: var(--vvd-color-canvas);--mdc-theme-on-surface: var(--vvd-color-on-canvas);--mdc-theme-error: var(--vvd-color-alert)}`;ql.styles=[hc,Yh,NA];let br=class extends ql{constructor(){super(...arguments),this.dense=!1,this.enlarged=!1}updated(t){Z1(this,t)}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation,[`layout-${this.layout}`]:!!this.layout}}render(){return Lt`<button
			class="mdc-icon-button ${In(this.getRenderClasses())}"
			aria-label="${this.ariaLabel||this.icon}"
			?disabled="${this.disabled}"
			@focus="${this.handleRippleFocus}"
			@blur="${this.handleRippleBlur}"
			@mousedown="${this.handleRippleMouseDown}"
			@mouseenter="${this.handleRippleMouseEnter}"
			@mouseleave="${this.handleRippleMouseLeave}"
			@touchstart="${this.handleRippleTouchStart}"
			@touchend="${this.handleRippleDeactivate}"
			@touchcancel="${this.handleRippleDeactivate}"
		>
			${this.renderRipple()}
			${this.renderIcon()}
			<span>
				<slot></slot>
			</span>
		</button>`}renderIcon(){return Lt`<vwc-icon	type="${this.icon}"></vwc-icon>`}renderRipple(){return this.shouldRenderRipple?Lt` <mwc-ripple .disabled="${this.disabled}"></mwc-ripple>`:""}};z([lt({type:String,reflect:!0})],br.prototype,"layout",void 0);z([lt({type:String,reflect:!0})],br.prototype,"connotation",void 0);z([lt({type:String,reflect:!0})],br.prototype,"shape",void 0);z([lt({type:Boolean,reflect:!0})],br.prototype,"dense",void 0);z([lt({type:Boolean,reflect:!0})],br.prototype,"enlarged",void 0);br=z([Ni("vwc-icon-button")],br);const YA=bi`:host>.banner{overflow:hidden;max-height:0;transition:max-height var(--transition-delay, 200ms)}:host>.banner.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}:host>.banner.connotation-info,:host>.banner:not(.connotation-success):not(.connotation-alert):not(.connotation-announcement):not(.connotation-warning){--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info)}:host>.banner.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}:host>.banner.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement)}:host>.banner.connotation-warning{--connotation:var(--vvd-color-warning);--on-connotation:var(--vvd-color-on-warning)}:host>.banner>.header{font:600 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;display:flex;min-height:60px;align-items:center;justify-content:flex-start;background-color:var(--connotation);color:var(--on-connotation)}:host>.banner>.header>.user-content{display:flex;flex:1 0;align-items:center;justify-content:center;padding-inline:16px}:host>.banner>.header>.user-content>.icon{--connotation:initial;--icon-size: var(--vvd-banner-icon-size, 20px);flex:0 0 auto;padding-inline-end:15px}:host>.banner>.header>.user-content>.action-items{display:inline-block;flex:0 0 auto;padding-inline-start:15px}:host>.banner>.header>.user-content>.message{padding:20px 0}:host>.banner>.header>.dismiss-button{--vvd-icon-button-color: inherit;flex:0 0 auto;padding-inline-end:8px}.banner.banner-open{max-height:10rem}`;/**
 * @license
 * Copyright (c) 2021 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const wo={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6};class MA{constructor(t){this.type=wo.CHILD,this.options=t.options,this.legacyPart=t}get parentNode(){return this.legacyPart.startNode.parentNode}get startNode(){return this.legacyPart.startNode}get endNode(){return this.legacyPart.endNode}}class LA{constructor(t){this.legacyPart=t,this.type=t instanceof ml?wo.PROPERTY:wo.ATTRIBUTE}get options(){}get name(){return this.legacyPart.committer.name}get element(){return this.legacyPart.committer.element}get strings(){return this.legacyPart.committer.strings}get tagName(){return this.element.tagName}}class JA{constructor(t){this.type=wo.BOOLEAN_ATTRIBUTE,this.legacyPart=t}get options(){}get name(){return this.legacyPart.name}get element(){return this.legacyPart.element}get strings(){return this.legacyPart.strings}get tagName(){return this.element.tagName}}class TA{constructor(t){this.type=wo.EVENT,this.legacyPart=t}get options(){}get name(){return this.legacyPart.eventName}get element(){return this.legacyPart.element}get strings(){}get tagName(){return this.element.tagName}handleEvent(t){this.legacyPart.handleEvent(t)}}function kA(e){if(e instanceof Br)return new MA(e);if(e instanceof YI)return new TA(e);if(e instanceof NI)return new JA(e);if(e instanceof ml||e instanceof Wr)return new LA(e);throw new Error("Unknown part type")}class KI{constructor(t){}update(t,i){return this.render(...i)}}function Cd(e){const t=new WeakMap;return Cl((...n)=>o=>{const l=t.get(o);let I,m;l===void 0?(I=kA(o),m=new e(I),t.set(o,[I,m])):(I=l[0],m=l[1]),o.setValue(m.update(I,n)),o.commit()})}/**
 * @license
 * Copyright (c) 2021 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class Mh extends KI{constructor(t){super(t),this._renderedYet=!1,this._legacyPart=t.legacyPart}_legacyGetNode(){if(this._legacyPart instanceof Br)return this._legacyPart.startNode;if(this._legacyPart instanceof YI)return this._legacyPart.element;if(this._legacyPart instanceof NI)return this._legacyPart.element;if(this._legacyPart instanceof ml||this._legacyPart instanceof Wr)return this._legacyPart.committer.element}_shouldRender(){if(!this._renderedYet)return this._renderedYet=!0,!0;const t=this._legacyGetNode();return!!(t!=null&&t.isConnected)}setValue(t){!this._shouldRender()||(this._legacyPart.setValue(t),this._legacyPart.commit())}disconnected(){}reconnected(){}}class zA extends Mh{constructor(t){if(super(t),this.labelEl=null,this.timerId=null,this.previousPart=null,t.type!==wo.CHILD)throw new Error("AccessibleBannerDirective only supports child parts.")}update(t,[i,n,o,l]){var I;if(!n)return;if(this.labelEl===null){const x=document.createElement("div"),L=Lt`<div class="banner--message" role=${o} aria-live=${l}></div>`;yg(L,x);const K=x.firstElementChild;return K.textContent=i,(I=t.endNode)===null||I===void 0||I.parentNode.insertBefore(K,t.endNode),this.labelEl=K,K}const m=this.labelEl;m.setAttribute("role",""),m.setAttribute("aria-live","off"),m.textContent="";const Z=document.createElement("span");return Z.style.display="inline-block",Z.style.width="0",Z.style.height="1px",Z.textContent="\xA0",m.appendChild(Z),m.setAttribute("message-text",i),this.timerId!==null&&clearTimeout(this.timerId),this.timerId=window.setTimeout(()=>{this.timerId=null,m.setAttribute("role",o),m.setAttribute("aria-live",l),m.removeAttribute("message-text"),m.textContent=i,this.setValue(this.labelEl)},1e3),m}render(t,i,n,o){return i?Lt`
	  <div class="banner--message" role=${n} aria-live=${o}>${t}</div>`:Lt``}}const KA=Cd(zA);var rg;const qC=100,UA="Escape",EA=new Map([[Xs.Info,"info-solid"],[Xs.Announcement,"megaphone-solid"],[Xs.Success,"check-circle-solid"],[Xs.Warning,"warning-solid"],[Xs.Alert,"error-solid"]]),$C=function(e,t={}){return new CustomEvent(e,Object.assign({bubbles:!0,composed:!0,cancelable:!1},t))};let Oo=class extends jn{constructor(){super(...arguments),this.message="",this.dismissible=!1,this.open=!1,this.role=Ta.Status,this.ariaLive=ka.Polite,rg.set(this,void 0)}clickCloseHandler(){this.open=!1}firstUpdated(){var t;((t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector(".banner")).style.setProperty("--transition-delay",`${qC}ms`)}updated(t){t.has("open")&&(clearTimeout(Zo(this,rg,"f")),this.dispatchEvent($C(this.open?"opening":"closing")),sh(this,rg,setTimeout(()=>{this.dispatchEvent($C(this.open?"opened":"closed"))},qC),"f"))}renderDismissButton(){return this.dismissible?Lt`<vwc-icon-button
								class="dismiss-button"
								icon="close-line"
								@click="${this.clickCloseHandler}"
								dense></vwc-icon-button>`:Uo}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation,"banner-open":this.open}}renderIcon(t){if(!t){const i=this.connotation||Xs.Info;t=EA.get(i)}return Lt`<vwc-icon class="icon" .type="${t}"></vwc-icon>`}handleKeyDown(t){this.open=!(t.key===UA&&this.dismissible)}render(){return Lt`
      <div class="banner ${In(this.getRenderClasses())}" tabindex="0" @keydown=${this.handleKeyDown}>
				<header class="header">
					<span class="user-content">
						${this.renderIcon(this.icon)}
						${KA(this.message,this.open,this.role,this.ariaLive)}
						<slot class="action-items" name="actionItems"></slot>
					</span>
					${this.renderDismissButton()}
				</header>
			</div>
		`}};rg=new WeakMap;Oo.styles=[YA];z([lt({type:String,reflect:!0})],Oo.prototype,"message",void 0);z([lt({type:Boolean,reflect:!0})],Oo.prototype,"dismissible",void 0);z([lt({type:String,reflect:!0})],Oo.prototype,"connotation",void 0);z([lt({type:String,reflect:!0})],Oo.prototype,"icon",void 0);z([lt({type:Boolean,reflect:!0})],Oo.prototype,"open",void 0);z([lt({type:String,reflect:!0,attribute:"role"})],Oo.prototype,"role",void 0);z([mc,lt({type:String,reflect:!0,attribute:"aria-live"})],Oo.prototype,"ariaLive",void 0);Oo=z([Ni("vwc-banner")],Oo);const QA=bi`.vwc-card{block-size:100%;border-radius:6px}.vwc-card-container{display:flex;overflow:hidden;flex-flow:column;block-size:inherit;border-radius:inherit;color:var(--vvd-color-on-canvas)}.vwc-card-content{display:flex;flex-flow:column;padding:24px}.vwc-card-wrapper{display:flex;width:100%;column-gap:8px}:host([text]) .vwc-card-wrapper{margin-bottom:12px}.vwc-card-header{display:inline-flex;align-items:flex-start;justify-content:space-between;column-gap:8px}.vwc-card-title,.vwc-card-subtitle{display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical}.vwc-card-title{font:500 condensed 20px / 28px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;-webkit-line-clamp:var(--title-line-clamp)}.vwc-card-subtitle{-webkit-line-clamp:var(--subtitle-line-clamp)}.vwc-card-subtitle,.vwc-card-text{font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;color:var(--vvd-color-neutral-70)}.vwc-card-text{padding-right:8px}.vwc-card-footer{display:inline-flex;flex-direction:column;align-items:flex-end;padding-bottom:24px;margin-top:auto;padding-inline:24px}::slotted([slot=graphic i]),.icon{flex-shrink:0;align-self:baseline;margin:4px 2px 0 0}.icon{width:20px;height:20px}::slotted([slot=meta i]){flex-shrink:0;align-self:flex-start;margin-block-start:-8px;margin-inline-end:-8px;margin-inline-start:auto}.no-content{display:none}vwc-elevation{block-size:inherit}vwc-elevation::part(base){block-size:inherit}`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const DA=bi`:host{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}`;let Ua=class extends jn{render(){return Lt`<slot></slot>`}};Ua.styles=[DA];Ua=z([Ni("mwc-icon")],Ua);class Kn extends jn{constructor(){super(...arguments),this.raised=!1,this.unelevated=!1,this.outlined=!1,this.dense=!1,this.disabled=!1,this.trailingIcon=!1,this.fullwidth=!1,this.icon="",this.label="",this.expandContent=!1,this.shouldRenderRipple=!1,this.rippleHandlers=new ud(()=>(this.shouldRenderRipple=!0,this.ripple))}renderOverlay(){return Lt``}renderRipple(){const t=this.raised||this.unelevated;return this.shouldRenderRipple?Lt`<mwc-ripple class="ripple" .primary="${!t}" .disabled="${this.disabled}"></mwc-ripple>`:""}focus(){const t=this.buttonElement;t&&(this.rippleHandlers.startFocus(),t.focus())}blur(){const t=this.buttonElement;t&&(this.rippleHandlers.endFocus(),t.blur())}getRenderClasses(){return In({"mdc-button--raised":this.raised,"mdc-button--unelevated":this.unelevated,"mdc-button--outlined":this.outlined,"mdc-button--dense":this.dense})}render(){return Lt`
      <button
          id="button"
          class="mdc-button ${this.getRenderClasses()}"
          ?disabled="${this.disabled}"
          aria-label="${this.label||this.icon}"
          @focus="${this.handleRippleFocus}"
          @blur="${this.handleRippleBlur}"
          @mousedown="${this.handleRippleActivate}"
          @mouseenter="${this.handleRippleMouseEnter}"
          @mouseleave="${this.handleRippleMouseLeave}"
          @touchstart="${this.handleRippleActivate}"
          @touchend="${this.handleRippleDeactivate}"
          @touchcancel="${this.handleRippleDeactivate}">
        ${this.renderOverlay()}
        ${this.renderRipple()}
        <span class="leading-icon">
          <slot name="icon">
            ${this.icon&&!this.trailingIcon?this.renderIcon():""}
          </slot>
        </span>
        <span class="mdc-button__label">${this.label}</span>
        <span class="slot-container ${In({flex:this.expandContent})}">
          <slot></slot>
        </span>
        <span class="trailing-icon">
          <slot name="trailingIcon">
            ${this.icon&&this.trailingIcon?this.renderIcon():""}
          </slot>
        </span>
      </button>`}renderIcon(){return Lt`
    <mwc-icon class="mdc-button__icon">
      ${this.icon}
    </mwc-icon>`}handleRippleActivate(t){const i=()=>{window.removeEventListener("mouseup",i),this.handleRippleDeactivate()};window.addEventListener("mouseup",i),this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}Kn.shadowRootOptions={mode:"open",delegatesFocus:!0};z([lt({type:Boolean,reflect:!0})],Kn.prototype,"raised",void 0);z([lt({type:Boolean,reflect:!0})],Kn.prototype,"unelevated",void 0);z([lt({type:Boolean,reflect:!0})],Kn.prototype,"outlined",void 0);z([lt({type:Boolean})],Kn.prototype,"dense",void 0);z([lt({type:Boolean,reflect:!0})],Kn.prototype,"disabled",void 0);z([lt({type:Boolean,attribute:"trailingicon"})],Kn.prototype,"trailingIcon",void 0);z([lt({type:Boolean,reflect:!0})],Kn.prototype,"fullwidth",void 0);z([lt({type:String})],Kn.prototype,"icon",void 0);z([lt({type:String})],Kn.prototype,"label",void 0);z([lt({type:Boolean})],Kn.prototype,"expandContent",void 0);z([vi("#button")],Kn.prototype,"buttonElement",void 0);z([ad("mwc-ripple")],Kn.prototype,"ripple",void 0);z([Ri()],Kn.prototype,"shouldRenderRipple",void 0);z([hl({passive:!0})],Kn.prototype,"handleRippleActivate",null);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const Lh=bi`.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:0;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:#fff;background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-button{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-button-font-size, 0.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height, 2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight, 500);letter-spacing:0.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing, 0.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration, none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform, uppercase);position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:transparent}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;font-size:1.125rem;height:1.125rem;vertical-align:top;width:1.125rem}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--raised .mdc-button__icon,.mdc-button--unelevated .mdc-button__icon,.mdc-button--outlined .mdc-button__icon{margin-left:-4px;margin-right:8px}[dir=rtl] .mdc-button--raised .mdc-button__icon,[dir=rtl] .mdc-button--unelevated .mdc-button__icon,[dir=rtl] .mdc-button--outlined .mdc-button__icon,.mdc-button--raised .mdc-button__icon[dir=rtl],.mdc-button--unelevated .mdc-button__icon[dir=rtl],.mdc-button--outlined .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mdc-button--raised .mdc-button__label+.mdc-button__icon,.mdc-button--unelevated .mdc-button__label+.mdc-button__icon,.mdc-button--outlined .mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mdc-button--raised .mdc-button__label+.mdc-button__icon,[dir=rtl] .mdc-button--unelevated .mdc-button__label+.mdc-button__icon,[dir=rtl] .mdc-button--outlined .mdc-button__label+.mdc-button__icon,.mdc-button--raised .mdc-button__label+.mdc-button__icon[dir=rtl],.mdc-button--unelevated .mdc-button__label+.mdc-button__icon[dir=rtl],.mdc-button--outlined .mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button--raised{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0,0,0,.12);transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--raised:hover,.mdc-button--raised:focus{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0,0,0,.12)}.mdc-button--raised:active{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}.mdc-button--raised:disabled{box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2),0px 0px 0px 0px rgba(0, 0, 0, 0.14),0px 0px 0px 0px rgba(0,0,0,.12)}.mdc-button--outlined{border-style:solid}.mdc-button{height:36px;border-radius:4px;border-radius:var(--mdc-shape-small, 4px);padding:0 8px 0 8px}.mdc-button:not(:disabled){color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}.mdc-button:disabled{color:rgba(0, 0, 0, 0.38)}.mdc-button .mdc-button__ripple{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-button--raised,.mdc-button--unelevated{padding:0 16px 0 16px;height:36px;border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-button--raised:not(:disabled),.mdc-button--unelevated:not(:disabled){background-color:#6200ee;background-color:var(--mdc-theme-primary, #6200ee)}.mdc-button--raised:disabled,.mdc-button--unelevated:disabled{background-color:rgba(0, 0, 0, 0.12)}.mdc-button--raised:not(:disabled),.mdc-button--unelevated:not(:disabled){color:#fff;color:var(--mdc-theme-on-primary, #fff)}.mdc-button--raised:disabled,.mdc-button--unelevated:disabled{color:rgba(0, 0, 0, 0.38)}.mdc-button--raised .mdc-button__ripple,.mdc-button--unelevated .mdc-button__ripple{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-button--outlined{height:36px;border-radius:4px;border-radius:var(--mdc-shape-small, 4px);padding:0 15px 0 15px;border-width:1px}.mdc-button--outlined:not(:disabled){color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}.mdc-button--outlined:disabled{color:rgba(0, 0, 0, 0.38)}.mdc-button--outlined .mdc-button__ripple{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-button--outlined:not(:disabled){border-color:rgba(0, 0, 0, 0.12)}.mdc-button--outlined:disabled{border-color:rgba(0, 0, 0, 0.12)}.mdc-button--outlined.mdc-button--icon-trailing{padding:0 11px 0 15px}.mdc-button--outlined.mdc-button--icon-leading{padding:0 15px 0 11px}.mdc-button--outlined .mdc-button__ripple{top:-1px;left:-1px;border:1px solid transparent}.mdc-button--outlined .mdc-button__touch{left:-1px;width:calc(100% + 2 * 1px)}:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:transparent;vertical-align:top}:host([fullwidth]){width:100%}:host([raised]),:host([unelevated]){--mdc-ripple-color:#fff;--mdc-ripple-focus-opacity:0.24;--mdc-ripple-hover-opacity:0.08;--mdc-ripple-press-opacity:0.24}.trailing-icon ::slotted(*),.trailing-icon .mdc-button__icon,.leading-icon ::slotted(*),.leading-icon .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;font-size:1.125rem;height:1.125rem;vertical-align:top;width:1.125rem}[dir=rtl] .trailing-icon ::slotted(*),[dir=rtl] .trailing-icon .mdc-button__icon,[dir=rtl] .leading-icon ::slotted(*),[dir=rtl] .leading-icon .mdc-button__icon,.trailing-icon ::slotted(*[dir=rtl]),.trailing-icon .mdc-button__icon[dir=rtl],.leading-icon ::slotted(*[dir=rtl]),.leading-icon .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.trailing-icon ::slotted(*),.trailing-icon .mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .trailing-icon ::slotted(*),[dir=rtl] .trailing-icon .mdc-button__icon,.trailing-icon ::slotted(*[dir=rtl]),.trailing-icon .mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}.slot-container{display:inline-flex;align-items:center;justify-content:center}.slot-container.flex{flex:auto}.mdc-button{flex:auto;overflow:hidden;padding-left:8px;padding-left:var(--mdc-button-horizontal-padding, 8px);padding-right:8px;padding-right:var(--mdc-button-horizontal-padding, 8px)}.mdc-button--raised{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mdc-button--raised:focus{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow-focus, var(--mdc-button-raised-box-shadow-hover, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)))}.mdc-button--raised:hover{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow-hover, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mdc-button--raised:active{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow-active, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mdc-button--raised:disabled{box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow-disabled, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mdc-button--raised,.mdc-button--unelevated{padding-left:16px;padding-left:var(--mdc-button-horizontal-padding, 16px);padding-right:16px;padding-right:var(--mdc-button-horizontal-padding, 16px)}.mdc-button--outlined{border-width:1px;border-width:var(--mdc-button-outline-width, 1px);padding-left:calc(16px - 1px);padding-left:calc(var(--mdc-button-horizontal-padding, 16px) - var(--mdc-button-outline-width, 1px));padding-right:calc(16px - 1px);padding-right:calc(var(--mdc-button-horizontal-padding, 16px) - var(--mdc-button-outline-width, 1px))}.mdc-button--outlined:not(:disabled){border-color:rgba(0, 0, 0, 0.12);border-color:var(--mdc-button-outline-color, rgba(0, 0, 0, 0.12))}.mdc-button--outlined .ripple{top:calc(-1 * 1px);top:calc(-1 * var(--mdc-button-outline-width, 1px));left:calc(-1 * 1px);left:calc(-1 * var(--mdc-button-outline-width, 1px));right:initial;right:initial;border-width:1px;border-width:var(--mdc-button-outline-width, 1px);border-style:solid;border-color:transparent}[dir=rtl] .mdc-button--outlined .ripple,.mdc-button--outlined .ripple[dir=rtl]{left:initial;left:initial;right:calc(-1 * 1px);right:calc(-1 * var(--mdc-button-outline-width, 1px))}.mdc-button--dense{height:28px;margin-top:0;margin-bottom:0}.mdc-button--dense .mdc-button__touch{display:none}:host([disabled]){pointer-events:none}:host([disabled]) .mdc-button{color:rgba(0, 0, 0, 0.38);color:var(--mdc-button-disabled-ink-color, rgba(0, 0, 0, 0.38))}:host([disabled]) .mdc-button--raised,:host([disabled]) .mdc-button--unelevated{background-color:rgba(0, 0, 0, 0.12);background-color:var(--mdc-button-disabled-fill-color, rgba(0, 0, 0, 0.12))}:host([disabled]) .mdc-button--outlined{border-color:rgba(0, 0, 0, 0.12);border-color:var(--mdc-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}`;let $l=class extends Kn{};$l.styles=[Lh];$l=z([Ni("mwc-button")],$l);const OA=bi`:host{--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 14px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 600;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 100%;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-button-font-family: var(--vvd-typography-font-family);--mdc-typography-button-font-size: var(--vvd-typography-font-size);--mdc-typography-button-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-button-font-weight: var(--vvd-typography-font-weight);--mdc-typography-button-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-button-line-height: var(--vvd-typography-line-height);--mdc-typography-button-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-button-text-transform: var(--vvd-typography-text-transform)}:host([dense]){--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 12px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 600;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 16px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-button-font-family: var(--vvd-typography-font-family);--mdc-typography-button-font-size: var(--vvd-typography-font-size);--mdc-typography-button-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-button-font-weight: var(--vvd-typography-font-weight);--mdc-typography-button-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-button-line-height: var(--vvd-typography-line-height);--mdc-typography-button-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-button-text-transform: var(--vvd-typography-text-transform)}:host([enlarged]){--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 16px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 600;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 24px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-button-font-family: var(--vvd-typography-font-family);--mdc-typography-button-font-size: var(--vvd-typography-font-size);--mdc-typography-button-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-button-font-weight: var(--vvd-typography-font-weight);--mdc-typography-button-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-button-line-height: var(--vvd-typography-line-height);--mdc-typography-button-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-button-text-transform: var(--vvd-typography-text-transform)}.mdc-button.layout-filled{--layout-color-fill:var(--connotation);--layout-color-text:var(--on-connotation)}.mdc-button.layout-outlined{--layout-color-fill:transparent;--layout-color-outline:var(--connotation-diverse);--layout-color-text:var(--connotation-diverse)}.mdc-button.layout-ghost,.mdc-button:not(.layout-filled):not(.layout-outlined){--layout-color-fill:transparent;--layout-color-text:var(--connotation-diverse)}.mdc-button{--mdc-button-disabled-ink-color: var(--vvd-formfield-disabled-ink);--mdc-button-disabled-fill-color: var(--vvd-color-neutral-30);--mdc-button-disabled-outline-color: var(--vvd-formfield-disabled-ink);--mdc-button-outline-color: var(--layout-color-outline, var(--mdc-theme-primary));--mdc-button-horizontal-padding: 16px;--button-block-size: 40px;--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);height:var(--vvd-button-block-size, var(--button-block-size));border-radius:var(--vvd-button-shape);font-stretch:var(--mdc-typography-button-font-stretch);letter-spacing:normal}.mdc-button.connotation-primary,.mdc-button:not(.connotation-cta):not(.connotation-success):not(.connotation-alert):not(.connotation-info):not(.connotation-announcement){--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary);--connotation-diverse:var(--vvd-color-primary)}.mdc-button.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta);--connotation-diverse:var(--vvd-color-cta-70)}.mdc-button.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success);--connotation-diverse:var(--vvd-color-success-70)}.mdc-button.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert);--connotation-diverse:var(--vvd-color-alert-70)}.mdc-button.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info);--connotation-diverse:var(--vvd-color-info-70)}.mdc-button.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement);--connotation-diverse:var(--vvd-color-announcement-70)}.mdc-button:not(.mdc-button--dense) vwc-icon{--vvd-icon-size:var(--vvd-button-icon-size, 20px)}.mdc-button .leading-icon,.mdc-button .trailing-icon{--connotation:currentColor;display:flex}.mdc-button>.trailing-icon vwc-icon,.mdc-button>.leading-icon vwc-icon{--gutter: 8px}:host([enlarged]) .mdc-button>.trailing-icon vwc-icon,:host([enlarged]) .mdc-button>.leading-icon vwc-icon{--gutter: 10px}:host([stacked]) .mdc-button>.trailing-icon vwc-icon,:host([stacked]) .mdc-button>.leading-icon vwc-icon{--gutter: 0}.mdc-button>.trailing-icon vwc-icon{margin-inline-start:var(--gutter)}.mdc-button>.leading-icon vwc-icon{margin-inline-end:var(--gutter)}:host([dense]) .mdc-button{--button-block-size: 32px}:host([dense]) .mdc-button vwc-icon{--vvd-icon-size:var(--vvd-button-icon-size, 16px)}:host([enlarged]) .mdc-button{--button-block-size: 48px}:host([enlarged]) .mdc-button vwc-icon{--vvd-icon-size:var(--vvd-button-icon-size, 24px)}:host([raised]) .mdc-button,:host([unelevated]) .mdc-button{--mdc-ripple-color: var(--vvd-button-on-color, var(--layout-color-text))}:host([unelevated]) .mdc-button{--mdc-theme-primary: var(--vvd-button-color, var(--layout-color-fill));--mdc-theme-on-primary: var(--vvd-button-on-color, var(--layout-color-text))}.mdc-button:not(.layout-filled){--mdc-theme-primary: var(--vvd-button-color, var(--layout-color-text));--mdc-theme-on-primary: var(--vvd-button-on-color, var(--layout-color-fill))}:host([dense]) .mdc-button{--mdc-button-horizontal-padding: 12px}:host([enlarged]) .mdc-button{--mdc-button-horizontal-padding: 20px}.mdc-button.button-stacked{--button-block-size: 68px;flex-direction:column;line-height:normal}:host([enlarged]) .mdc-button.button-stacked{--button-block-size: 80px}:host([dense]) .mdc-button.button-stacked{--button-block-size: 56px}.mdc-button.button-stacked>.leading-icon vwc-icon,.mdc-button.button-stacked .leading-icon ::slotted(*){margin-block-end:8px}.mdc-button.button-stacked>.trailing-icon vwc-icon,.mdc-button.button-stacked .trailing-icon ::slotted(*){margin-block-start:8px}.mdc-button.button-stacked .trailing-icon ::slotted(*),.mdc-button.button-stacked .leading-icon ::slotted(*){margin-inline-end:0;margin-inline-start:0}:host(:not([shape=pill i])),:host([shape=rounded i]){--vvd-button-shape:6px}:host([shape=pill i]){--vvd-button-shape:24px}`;var ns,Ea;$l.styles=[hc,Lh,OA];let Vo=Ea=class extends $l{constructor(){super(...arguments),this.dense=!1,this.enlarged=!1,this.type="submit",this.formId=null,this.stacked=!1,ns.set(this,Ea.createHiddenButton())}updateFormAndButton(){var t;const i=this.getAttribute("form");i!==null&&((t=Zo(this,ns,"f"))===null||t===void 0||t.setAttribute("form",i))}attributeChangedCallback(t,i,n){var o;t==="form"&&n&&n!==i?(o=Zo(this,ns,"f"))===null||o===void 0||o.setAttribute("form",n):super.attributeChangedCallback(t,i,n)}update(t){super.update(t),[...t.keys()].filter(i=>["name","value"].includes(i)).forEach(i=>{Zo(this,ns,"f").setAttribute(i,this[i])})}updated(t){var i,n;t.has("type")&&((i=Zo(this,ns,"f"))===null||i===void 0||i.setAttribute("type",(n=this.getAttribute("type"))!==null&&n!==void 0?n:"")),this.toggleAttribute("outlined",this.layout==="outlined"),this.toggleAttribute("unelevated",this.layout==="filled"),t.has("dense")&&this.dense&&this.enlarged&&(this.enlarged=!1),t.has("enlarged")&&this.enlarged&&this.dense&&(this.removeAttribute("dense"),this.dense=!1)}get form(){return Zo(this,ns,"f").form}set form(t){}_handleClick(t){if(this.form)switch(this.getAttribute("type")){case"reset":this.form.reset();break;case"button":break;default:t.target===this?Zo(this,ns,"f").click():t.stopImmediatePropagation();break}}renderIcon(){return Lt`<vwc-icon	type="${this.icon}"></vwc-icon>`}getRenderClasses(){return In({"mdc-button--raised":this.raised,"mdc-button--unelevated":this.unelevated,"mdc-button--outlined":this.outlined,"mdc-button--dense":this.dense,[`connotation-${this.connotation}`]:!!this.connotation,[`layout-${this.layout}`]:!!this.layout,"button-stacked":this.stacked})}static createHiddenButton(){const t=document.createElement("button");return t.style.display="none",t}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this._handleClick),this.appendChild(Zo(this,ns,"f"))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._handleClick)}};ns=new WeakMap;z([lt({type:String,reflect:!0})],Vo.prototype,"name",void 0);z([lt({type:String,reflect:!0})],Vo.prototype,"value",void 0);z([lt({type:Boolean,reflect:!0})],Vo.prototype,"dense",void 0);z([lt({type:Boolean,reflect:!0})],Vo.prototype,"enlarged",void 0);z([lt({type:String,reflect:!0})],Vo.prototype,"layout",void 0);z([lt({type:String,reflect:!0})],Vo.prototype,"connotation",void 0);z([lt({type:String,reflect:!0})],Vo.prototype,"shape",void 0);z([lt({type:String,reflect:!0})],Vo.prototype,"type",void 0);z([lt({attribute:"form",reflect:!0})],Vo.prototype,"formId",void 0);z([lt({type:Boolean,reflect:!0})],Vo.prototype,"stacked",void 0);Vo=Ea=z([Ni("vwc-button")],Vo);const jA=bi`.vwc-elevation-dp-0:not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-0dp);filter:var(--vvd-shadow-surface-0dp)}.vwc-elevation-dp-2:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-2dp);filter:var(--vvd-shadow-surface-2dp)}.vwc-elevation-dp-4:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-4dp);filter:var(--vvd-shadow-surface-4dp)}.vwc-elevation-dp-8:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-8dp);filter:var(--vvd-shadow-surface-8dp)}.vwc-elevation-dp-12:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-12dp);filter:var(--vvd-shadow-surface-12dp)}.vwc-elevation-dp-16:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-16dp);filter:var(--vvd-shadow-surface-16dp)}.vwc-elevation-dp-24:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16) ::slotted(*){background-color:var(--vvd-color-surface-24dp);filter:var(--vvd-shadow-surface-24dp)}`;let Vg=class extends jn{constructor(){super(...arguments),this.dp=2}render(){const t={[`vwc-elevation-dp-${this.dp}`]:!0};return Lt`
			<div class="vwc-elevation ${In(t)}" part="base">
				<slot></slot>
			</div>
		`}};Vg.styles=jA;z([lt({type:Number,reflect:!1})],Vg.prototype,"dp",void 0);Vg=z([Ni("vwc-elevation")],Vg);var lg;let Ns=class extends jn{constructor(){super(...arguments),this.icon=null,this.elevation="4",lg.set(this,void 0)}get headerContentExists(){var t;return Boolean(this.heading||this.subtitle||this.icon||((t=this.IconSlottedItems)===null||t===void 0?void 0:t.length))}get headerClass(){return this.headerContentExists?"":"no-content"}render(){const t={"no-content":!Zo(this,lg,"f")};return Lt`
			<vwc-elevation .dp=${this.elevation}>
			<!-- there are 2 wrapper due to a safari bug failing 'filter: drop-shadow'
			from rendering shadow on an element with 'overflow: hidden' -->
				<div class="vwc-card">
					<div class="vwc-card-container">
						<div class="vwc-card-media">
							<slot name="media"></slot>
						</div>
						<slot name="main">
							<div class="vwc-card-content">
								<div class="vwc-card-wrapper">
									${this.renderHeader()}
									<slot name="meta"></slot>
								</div>
								<div class="vwc-card-text">
									${this.text?this.text:Uo}
								</div>
							</div>
						</slot>
						<div class="vwc-card-footer ${In(t)}">
							<slot name="footer" @slotchange="${this.footerSlotChanged}"></slot>
						</div>
					</div>
				</div>
			</vwc-elevation>
		`}renderHeader(){return Lt`
			<header class="vwc-card-header ${this.headerClass}">
				<slot name="graphic" @slotchange="${this.graphicSlotChanged}">
					${this.icon?this.renderIcon():""}
				</slot>
				<div>
					<div class="vwc-card-title">${this.heading}</div>
					<div class="vwc-card-subtitle">${this.subtitle}</div>
				</div>
			</header>`}renderIcon(){return Lt`<vwc-icon class="icon" inline type="${this.icon}"></vwc-icon>`}graphicSlotChanged(){var t;const i=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector("header"),n=i==null?void 0:i.querySelector('slot[name="graphic"]');this.IconSlottedItems=n.assignedNodes(),this.headerContentExists?i==null||i.classList.remove("no-content"):i==null||i.classList.add("no-content")}footerSlotChanged(){var t;const i=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector('slot[name="footer"]');sh(this,lg,Boolean(i.assignedNodes().length),"f"),this.requestUpdate()}};lg=new WeakMap;Ns.styles=QA;z([lt({reflect:!0,type:String})],Ns.prototype,"heading",void 0);z([lt({reflect:!0,type:String})],Ns.prototype,"subtitle",void 0);z([lt({reflect:!0,attribute:"icon",type:String})],Ns.prototype,"icon",void 0);z([lt({reflect:!0,attribute:"text",type:String})],Ns.prototype,"text",void 0);z([lt({reflect:!1,attribute:"elevation",type:String})],Ns.prototype,"elevation",void 0);Ns=z([Ni("vwc-card")],Ns);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UI extends ks{click(){this.formElement&&(this.formElement.focus(),this.formElement.click())}setAriaLabel(t){this.formElement&&this.formElement.setAttribute("aria-label",t)}firstUpdated(){super.firstUpdated(),this.shadowRoot&&this.mdcRoot.addEventListener("change",t=>{this.dispatchEvent(new Event("change",t))})}}UI.shadowRootOptions={mode:"open",delegatesFocus:!0};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Wl={CHECKED:"mdc-switch--checked",DISABLED:"mdc-switch--disabled"},t0={ARIA_CHECKED_ATTR:"aria-checked",NATIVE_CONTROL_SELECTOR:".mdc-switch__native-control",RIPPLE_SURFACE_SELECTOR:".mdc-switch__thumb-underlay"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _A=function(e){xo(t,e);function t(i){return e.call(this,on(on({},t.defaultAdapter),i))||this}return Object.defineProperty(t,"strings",{get:function(){return t0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return Wl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlChecked:function(){},setNativeControlDisabled:function(){},setNativeControlAttr:function(){}}},enumerable:!1,configurable:!0}),t.prototype.setChecked=function(i){this.adapter.setNativeControlChecked(i),this.updateAriaChecked(i),this.updateCheckedStyling(i)},t.prototype.setDisabled=function(i){this.adapter.setNativeControlDisabled(i),i?this.adapter.addClass(Wl.DISABLED):this.adapter.removeClass(Wl.DISABLED)},t.prototype.handleChange=function(i){var n=i.target;this.updateAriaChecked(n.checked),this.updateCheckedStyling(n.checked)},t.prototype.updateCheckedStyling=function(i){i?this.adapter.addClass(Wl.CHECKED):this.adapter.removeClass(Wl.CHECKED)},t.prototype.updateAriaChecked=function(i){this.adapter.setNativeControlAttr(t0.ARIA_CHECKED_ATTR,""+!!i)},t}(No),PA=_A;class Yo extends UI{constructor(){super(...arguments),this.checked=!1,this.disabled=!1,this.shouldRenderRipple=!1,this.mdcFoundationClass=PA,this.rippleHandlers=new ud(()=>(this.shouldRenderRipple=!0,this.ripple))}changeHandler(t){this.mdcFoundation.handleChange(t),this.checked=this.formElement.checked}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{setNativeControlChecked:t=>{this.formElement.checked=t},setNativeControlDisabled:t=>{this.formElement.disabled=t},setNativeControlAttr:(t,i)=>{this.formElement.setAttribute(t,i)}})}renderRipple(){return this.shouldRenderRipple?Lt`
        <mwc-ripple
          .accent="${this.checked}"
          .disabled="${this.disabled}"
          unbounded>
        </mwc-ripple>`:""}focus(){const t=this.formElement;t&&(this.rippleHandlers.startFocus(),t.focus())}blur(){const t=this.formElement;t&&(this.rippleHandlers.endFocus(),t.blur())}render(){return Lt`
      <div class="mdc-switch">
        <div class="mdc-switch__track"></div>
        <div class="mdc-switch__thumb-underlay">
          ${this.renderRipple()}
          <div class="mdc-switch__thumb">
            <input
              type="checkbox"
              id="basic-switch"
              class="mdc-switch__native-control"
              role="switch"
              aria-label="${Do(this.ariaLabel)}"
              aria-labelledby="${Do(this.ariaLabelledBy)}"
              @change="${this.changeHandler}"
              @focus="${this.handleRippleFocus}"
              @blur="${this.handleRippleBlur}"
              @mousedown="${this.handleRippleMouseDown}"
              @mouseenter="${this.handleRippleMouseEnter}"
              @mouseleave="${this.handleRippleMouseLeave}"
              @touchstart="${this.handleRippleTouchStart}"
              @touchend="${this.handleRippleDeactivate}"
              @touchcancel="${this.handleRippleDeactivate}">
          </div>
        </div>
      </div>`}handleRippleMouseDown(t){const i=()=>{window.removeEventListener("mouseup",i),this.handleRippleDeactivate()};window.addEventListener("mouseup",i),this.rippleHandlers.startPress(t)}handleRippleTouchStart(t){this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}z([lt({type:Boolean}),pi(function(e){this.mdcFoundation.setChecked(e)})],Yo.prototype,"checked",void 0);z([lt({type:Boolean}),pi(function(e){this.mdcFoundation.setDisabled(e)})],Yo.prototype,"disabled",void 0);z([mc,lt({attribute:"aria-label"})],Yo.prototype,"ariaLabel",void 0);z([mc,lt({attribute:"aria-labelledby"})],Yo.prototype,"ariaLabelledBy",void 0);z([vi(".mdc-switch")],Yo.prototype,"mdcRoot",void 0);z([vi("input")],Yo.prototype,"formElement",void 0);z([ad("mwc-ripple")],Yo.prototype,"ripple",void 0);z([Ri()],Yo.prototype,"shouldRenderRipple",void 0);z([hl({passive:!0})],Yo.prototype,"handleRippleMouseDown",null);z([hl({passive:!0})],Yo.prototype,"handleRippleTouchStart",null);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const Jh=bi`.mdc-switch__thumb-underlay{left:-14px;right:initial;top:-17px;width:48px;height:48px}[dir=rtl] .mdc-switch__thumb-underlay,.mdc-switch__thumb-underlay[dir=rtl]{left:initial;right:-14px}.mdc-switch__native-control{width:64px;height:48px}.mdc-switch{display:inline-block;position:relative;outline:none;user-select:none}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:#018786;background-color:var(--mdc-theme-secondary, #018786)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:#018786;background-color:var(--mdc-theme-secondary, #018786);border-color:#018786;border-color:var(--mdc-theme-secondary, #018786)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:#000;background-color:var(--mdc-theme-on-surface, #000)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:#fff;background-color:var(--mdc-theme-surface, #fff);border-color:#fff;border-color:var(--mdc-theme-surface, #fff)}.mdc-switch__native-control{left:0;right:initial;position:absolute;top:0;margin:0;opacity:0;cursor:pointer;pointer-events:auto;transition:transform 90ms cubic-bezier(0.4, 0, 0.2, 1)}[dir=rtl] .mdc-switch__native-control,.mdc-switch__native-control[dir=rtl]{left:initial;right:0}.mdc-switch__track{box-sizing:border-box;width:36px;height:14px;border:1px solid transparent;border-radius:7px;opacity:.38;transition:opacity 90ms cubic-bezier(0.4, 0, 0.2, 1),background-color 90ms cubic-bezier(0.4, 0, 0.2, 1),border-color 90ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-switch__thumb-underlay{display:flex;position:absolute;align-items:center;justify-content:center;transform:translateX(0);transition:transform 90ms cubic-bezier(0.4, 0, 0.2, 1),background-color 90ms cubic-bezier(0.4, 0, 0.2, 1),border-color 90ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-switch__thumb{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0,0,0,.12);box-sizing:border-box;width:20px;height:20px;border:10px solid;border-radius:50%;pointer-events:none;z-index:1}.mdc-switch--checked .mdc-switch__track{opacity:.54}.mdc-switch--checked .mdc-switch__thumb-underlay{transform:translateX(16px)}[dir=rtl] .mdc-switch--checked .mdc-switch__thumb-underlay,.mdc-switch--checked .mdc-switch__thumb-underlay[dir=rtl]{transform:translateX(-16px)}.mdc-switch--checked .mdc-switch__native-control{transform:translateX(-16px)}[dir=rtl] .mdc-switch--checked .mdc-switch__native-control,.mdc-switch--checked .mdc-switch__native-control[dir=rtl]{transform:translateX(16px)}.mdc-switch--disabled{opacity:.38;pointer-events:none}.mdc-switch--disabled .mdc-switch__thumb{border-width:1px}.mdc-switch--disabled .mdc-switch__native-control{cursor:default;pointer-events:none}:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:transparent}`;let tc=class extends Yo{};tc.styles=[Jh];tc=z([Ni("mwc-switch")],tc);const qA=bi`:host{--knob-size:12px;--knob-translate-x:16px;contain:content}.mdc-switch{--mdc-theme-secondary: var(--connotation);--vvd-switch-unchecked-background: trasparent;--vvd-switch-unchecked-background-hover: var(--vvd-color-neutral);--vvd-switch-unchecked-background-focus: var(--vvd-color-neutral);--vvd-switch-disabled-background: var(--vvd-color-neutral-30);--mdc-theme-surface: var(--vvd-color-neutral-10);--mdc-theme-on-surface: var(--vvd-switch-unchecked-background)}.mdc-switch.connotation-primary,.mdc-switch:not(.connotation-cta):not(.connotation-success):not(.connotation-alert){--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary)}.mdc-switch.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta)}.mdc-switch.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}.mdc-switch.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{--knob-size:14px;background-color:#f2f2f2}.mdc-switch.mdc-switch--checked .mdc-switch__thumb-underlay{transform:translateX(var(--knob-translate-x))}.mdc-switch.mdc-switch--checked .mdc-switch__native-control{transform:translateX(calc(var(--knob-translate-x) * -1))}.mdc-switch.mdc-switch--checked:hover .mdc-switch__thumb,.mdc-switch.mdc-switch--checked:hover .mdc-switch__track{filter:brightness(90%)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{border:1px solid #757575}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:#757575}.mdc-switch:not(.mdc-switch--checked):hover .mdc-switch__thumb{background-color:var(--vvd-color-neutral-70)}.mdc-switch:not(.mdc-switch--checked):hover .mdc-switch__track{border-color:var(--vvd-color-neutral-70)}.mdc-switch:not(.connotation-cta,.connotation-success,.connotation-alert,.mdc-switch--disabled).mdc-switch--checked .mdc-switch__thumb{background-color:var(--vvd-color-neutral-20)}.mdc-switch .mdc-switch__track,.mdc-switch.mdc-switch--checked .mdc-switch__track{opacity:initial}.mdc-switch.mdc-switch--disabled{opacity:initial}.mdc-switch.mdc-switch--disabled .mdc-switch__track{opacity:initial}.mdc-switch.mdc-switch--disabled.mdc-switch--checked .mdc-switch__track{background-color:var(--vvd-switch-disabled-background)}.mdc-switch.mdc-switch--disabled.mdc-switch--checked .mdc-switch__thumb{background-color:var(--vvd-color-neutral-20)}.mdc-switch.mdc-switch--disabled:not(.mdc-switch--checked) .mdc-switch__track{border-color:var(--vvd-switch-disabled-background)}.mdc-switch.mdc-switch--disabled:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:var(--vvd-switch-disabled-background)}.mdc-switch,.mdc-switch__native-control{width:36px;height:20px}.mdc-switch__track{width:100%;height:100%;border-width:0;border-radius:16px}.mdc-switch__thumb-underlay{top:0;left:0;width:20px;height:100%}.mdc-switch__thumb-underlay .mdc-switch__thumb{width:var(--knob-size);height:var(--knob-size);border:0;box-shadow:none}:host([enlarged]){--knob-size:24px;--knob-translate-x:28px}:host([enlarged]) .mdc-switch,:host([enlarged]) .mdc-switch__native-control{width:60px;height:32px}:host([enlarged]) .mdc-switch__thumb-underlay{width:32px}:host([enlarged]) .mdc-switch.mdc-switch--checked .mdc-switch__thumb{--knob-size:26px}`;tc.styles=[hc,Jh,qA];let Wg=class extends tc{constructor(){super(...arguments),this.enlarged=!1}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation}}render(){return Lt`
      <div class="mdc-switch ${In(this.getRenderClasses())}">
        <div class="mdc-switch__track"></div>
        <div class="mdc-switch__thumb-underlay">
          ${this.renderRipple()}
          <div class="mdc-switch__thumb">
            <input
              type="checkbox"
              id="basic-switch"
              class="mdc-switch__native-control"
              role="switch"
              aria-label="${Do(this.ariaLabel)}"
							aria-checked="${this.checked}"
              aria-labelledby="${Do(this.ariaLabelledBy)}"
              @change="${this.changeHandler}"
              @focus="${this.handleRippleFocus}"
              @blur="${this.handleRippleBlur}"
              @mousedown="${this.handleRippleMouseDown}"
              @mouseenter="${this.handleRippleMouseEnter}"
              @mouseleave="${this.handleRippleMouseLeave}"
              @touchstart="${this.handleRippleTouchStart}"
              @touchend="${this.handleRippleDeactivate}"
              @touchcancel="${this.handleRippleDeactivate}">
          </div>
        </div>
      </div>`}async firstUpdated(){await super.firstUpdated(),ah(this)}renderRipple(){return Lt``}};z([lt({type:String,reflect:!0})],Wg.prototype,"connotation",void 0);z([lt({type:Boolean,reflect:!0})],Wg.prototype,"enlarged",void 0);Wg=z([Ni("vwc-switch")],Wg);const $A=bi`:host{font:400 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);display:flex;align-items:center;color:var(--vvd-formfield-label-idle-ink);margin-block-start:4px;min-block-size:16px}:host .helper-icon{display:none;color:var(--vvd-formfield-label-error-ink)}:host .helper-text{overflow:hidden;margin-inline-start:16px;text-overflow:ellipsis;white-space:nowrap}:host([is-error]){color:var(--vvd-color-on-canvas)}:host([is-error]) .helper-icon{display:flex;flex-shrink:0}:host([is-error]) .helper-text{margin-inline-start:4px}:host([disabled]){color:var(--vvd-formfield-disabled-ink)}`;let Bg=class extends jn{constructor(){super(...arguments),this.isError=!1}render(){return Lt`
			<vwc-icon class="helper-icon" type="info-negative" size="small"></vwc-icon>
			<span class="helper-text"><slot></slot></span>
		`}};Bg.styles=[$A];z([lt({attribute:"is-error",type:Boolean,reflect:!0})],Bg.prototype,"isError",void 0);Bg=z([Ni("vwc-helper-message")],Bg);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ty={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},e0={NOTCH_ELEMENT_PADDING:8},ey={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var iy=function(e){xo(t,e);function t(i){return e.call(this,on(on({},t.defaultAdapter),i))||this}return Object.defineProperty(t,"strings",{get:function(){return ty},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return ey},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return e0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),t.prototype.notch=function(i){var n=t.cssClasses.OUTLINE_NOTCHED;i>0&&(i+=e0.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(i),this.adapter.addClass(n)},t.prototype.closeNotch=function(){var i=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(i),this.adapter.removeNotchWidthProperty()},t}(No);class bc extends ks{constructor(){super(...arguments),this.mdcFoundationClass=iy,this.width=0,this.open=!1,this.lastOpen=this.open}createAdapter(){return{addClass:t=>this.mdcRoot.classList.add(t),removeClass:t=>this.mdcRoot.classList.remove(t),setNotchWidthProperty:t=>this.notchElement.style.setProperty("width",`${t}px`),removeNotchWidthProperty:()=>this.notchElement.style.removeProperty("width")}}openOrClose(t,i){!this.mdcFoundation||(t&&i!==void 0?this.mdcFoundation.notch(i):this.mdcFoundation.closeNotch())}render(){this.openOrClose(this.open,this.width);const t=In({"mdc-notched-outline--notched":this.open});return Lt`
      <span class="mdc-notched-outline ${t}">
        <span class="mdc-notched-outline__leading"></span>
        <span class="mdc-notched-outline__notch">
          <slot></slot>
        </span>
        <span class="mdc-notched-outline__trailing"></span>
      </span>`}}z([vi(".mdc-notched-outline")],bc.prototype,"mdcRoot",void 0);z([lt({type:Number})],bc.prototype,"width",void 0);z([lt({type:Boolean,reflect:!0})],bc.prototype,"open",void 0);z([vi(".mdc-notched-outline__notch")],bc.prototype,"notchElement",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const Th=bi`.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(100% / 0.75)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}:host{display:block;position:absolute;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] :host,:host([dir=rtl]){text-align:right}::slotted(.mdc-floating-label){display:inline-block;position:relative;top:17px;bottom:auto;max-width:100%}::slotted(.mdc-floating-label--float-above){text-overflow:clip}.mdc-notched-outline--upgraded ::slotted(.mdc-floating-label--float-above){max-width:calc(100% / 0.75)}.mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-notched-outline .mdc-notched-outline__leading,.mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px)) * 2)}}.mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-color:var(--mdc-notched-outline-border-color, var(--mdc-theme-primary, #6200ee));border-width:1px;border-width:var(--mdc-notched-outline-stroke-width, 1px)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0;padding-top:var(--mdc-notched-outline-notch-offset, 0)}`;let ec=class extends bc{};ec.styles=[Th];ec=z([Ni("mwc-notched-outline")],ec);ec.styles=[Th];let i0=class extends ec{};i0=z([Ni("vwc-notched-outline")],i0);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Un extends jn{constructor(){super(...arguments),this.value="",this.group=null,this.tabindex=-1,this.disabled=!1,this.twoline=!1,this.activated=!1,this.graphic=null,this.multipleGraphics=!1,this.hasMeta=!1,this.noninteractive=!1,this.selected=!1,this.shouldRenderRipple=!1,this._managingList=null,this.boundOnClick=this.onClick.bind(this),this._firstChanged=!0,this._skipPropRequest=!1,this.rippleHandlers=new ud(()=>(this.shouldRenderRipple=!0,this.ripple)),this.listeners=[{target:this,eventNames:["click"],cb:()=>{this.onClick()}},{target:this,eventNames:["mouseenter"],cb:this.rippleHandlers.startHover},{target:this,eventNames:["mouseleave"],cb:this.rippleHandlers.endHover},{target:this,eventNames:["focus"],cb:this.rippleHandlers.startFocus},{target:this,eventNames:["blur"],cb:this.rippleHandlers.endFocus},{target:this,eventNames:["mousedown","touchstart"],cb:t=>{const i=t.type;this.onDown(i==="mousedown"?"mouseup":"touchend",t)}}]}get text(){const t=this.textContent;return t?t.trim():""}render(){const t=this.renderText(),i=this.graphic?this.renderGraphic():Lt``,n=this.hasMeta?this.renderMeta():Lt``;return Lt`
      ${this.renderRipple()}
      ${i}
      ${t}
      ${n}`}renderRipple(){return this.shouldRenderRipple?Lt`
      <mwc-ripple
        .activated=${this.activated}>
      </mwc-ripple>`:this.activated?Lt`<div class="fake-activated-ripple"></div>`:""}renderGraphic(){const t={multi:this.multipleGraphics};return Lt`
      <span class="mdc-deprecated-list-item__graphic material-icons ${In(t)}">
        <slot name="graphic"></slot>
      </span>`}renderMeta(){return Lt`
      <span class="mdc-deprecated-list-item__meta material-icons">
        <slot name="meta"></slot>
      </span>`}renderText(){const t=this.twoline?this.renderTwoline():this.renderSingleLine();return Lt`
      <span class="mdc-deprecated-list-item__text">
        ${t}
      </span>`}renderSingleLine(){return Lt`<slot></slot>`}renderTwoline(){return Lt`
      <span class="mdc-deprecated-list-item__primary-text">
        <slot></slot>
      </span>
      <span class="mdc-deprecated-list-item__secondary-text">
        <slot name="secondary"></slot>
      </span>
    `}onClick(){this.fireRequestSelected(!this.selected,"interaction")}onDown(t,i){const n=()=>{window.removeEventListener(t,n),this.rippleHandlers.endPress()};window.addEventListener(t,n),this.rippleHandlers.startPress(i)}fireRequestSelected(t,i){if(this.noninteractive)return;const n=new CustomEvent("request-selected",{bubbles:!0,composed:!0,detail:{source:i,selected:t}});this.dispatchEvent(n)}connectedCallback(){super.connectedCallback(),this.noninteractive||this.setAttribute("mwc-list-item","");for(const t of this.listeners)for(const i of t.eventNames)t.target.addEventListener(i,t.cb,{passive:!0})}disconnectedCallback(){super.disconnectedCallback();for(const t of this.listeners)for(const i of t.eventNames)t.target.removeEventListener(i,t.cb);this._managingList&&(this._managingList.debouncedLayout?this._managingList.debouncedLayout(!0):this._managingList.layout(!0))}firstUpdated(){const t=new Event("list-item-rendered",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}z([vi("slot")],Un.prototype,"slotElement",void 0);z([ad("mwc-ripple")],Un.prototype,"ripple",void 0);z([lt({type:String})],Un.prototype,"value",void 0);z([lt({type:String,reflect:!0})],Un.prototype,"group",void 0);z([lt({type:Number,reflect:!0})],Un.prototype,"tabindex",void 0);z([lt({type:Boolean,reflect:!0}),pi(function(e){e?this.setAttribute("aria-disabled","true"):this.setAttribute("aria-disabled","false")})],Un.prototype,"disabled",void 0);z([lt({type:Boolean,reflect:!0})],Un.prototype,"twoline",void 0);z([lt({type:Boolean,reflect:!0})],Un.prototype,"activated",void 0);z([lt({type:String,reflect:!0})],Un.prototype,"graphic",void 0);z([lt({type:Boolean})],Un.prototype,"multipleGraphics",void 0);z([lt({type:Boolean})],Un.prototype,"hasMeta",void 0);z([lt({type:Boolean,reflect:!0}),pi(function(e){e?(this.removeAttribute("aria-checked"),this.removeAttribute("mwc-list-item"),this.selected=!1,this.activated=!1,this.tabIndex=-1):this.setAttribute("mwc-list-item","")})],Un.prototype,"noninteractive",void 0);z([lt({type:Boolean,reflect:!0}),pi(function(e){const t=this.getAttribute("role"),i=t==="gridcell"||t==="option"||t==="row"||t==="tab";if(i&&e?this.setAttribute("aria-selected","true"):i&&this.setAttribute("aria-selected","false"),this._firstChanged){this._firstChanged=!1;return}this._skipPropRequest||this.fireRequestSelected(e,"property")})],Un.prototype,"selected",void 0);z([Ri()],Un.prototype,"shouldRenderRipple",void 0);z([Ri()],Un.prototype,"_managingList",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const kh=bi`:host{cursor:pointer;user-select:none;-webkit-tap-highlight-color:transparent;height:48px;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mdc-list-side-padding, 16px);padding-right:var(--mdc-list-side-padding, 16px);outline:none;height:48px;color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87))}:host:focus{outline:none}:host([activated]){color:#6200ee;color:var(--mdc-theme-primary, #6200ee);--mdc-ripple-color: var( --mdc-theme-primary, #6200ee )}:host([activated]) .mdc-deprecated-list-item__graphic{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}:host([activated]) .fake-activated-ripple::before{position:absolute;display:block;top:0;bottom:0;left:0;right:0;width:100%;height:100%;pointer-events:none;z-index:1;content:"";opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12);background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-deprecated-list-item__graphic{flex-shrink:0;align-items:center;justify-content:center;fill:currentColor;display:inline-flex}.mdc-deprecated-list-item__graphic ::slotted(*){flex-shrink:0;align-items:center;justify-content:center;fill:currentColor;width:100%;height:100%;text-align:center}.mdc-deprecated-list-item__meta{width:var(--mdc-list-item-meta-size, 24px);height:var(--mdc-list-item-meta-size, 24px);margin-left:auto;margin-right:0;color:rgba(0, 0, 0, 0.38);color:var(--mdc-theme-text-hint-on-background, rgba(0, 0, 0, 0.38))}.mdc-deprecated-list-item__meta.multi{width:auto}.mdc-deprecated-list-item__meta ::slotted(*){width:var(--mdc-list-item-meta-size, 24px);line-height:var(--mdc-list-item-meta-size, 24px)}.mdc-deprecated-list-item__meta ::slotted(.material-icons),.mdc-deprecated-list-item__meta ::slotted(mwc-icon){line-height:var(--mdc-list-item-meta-size, 24px) !important}.mdc-deprecated-list-item__meta ::slotted(:not(.material-icons):not(mwc-icon)){-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-caption-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.75rem;font-size:var(--mdc-typography-caption-font-size, 0.75rem);line-height:1.25rem;line-height:var(--mdc-typography-caption-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-caption-font-weight, 400);letter-spacing:0.0333333333em;letter-spacing:var(--mdc-typography-caption-letter-spacing, 0.0333333333em);text-decoration:inherit;text-decoration:var(--mdc-typography-caption-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-caption-text-transform, inherit)}[dir=rtl] .mdc-deprecated-list-item__meta,.mdc-deprecated-list-item__meta[dir=rtl]{margin-left:0;margin-right:auto}.mdc-deprecated-list-item__meta ::slotted(*){width:100%;height:100%}.mdc-deprecated-list-item__text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-deprecated-list-item__text ::slotted([for]),.mdc-deprecated-list-item__text[for]{pointer-events:none}.mdc-deprecated-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal;margin-bottom:-20px;display:block}.mdc-deprecated-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-deprecated-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-deprecated-list-item__secondary-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-body2-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-body2-font-size, 0.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight, 400);letter-spacing:0.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing, 0.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform, inherit);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal;display:block}.mdc-deprecated-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-deprecated-list--dense .mdc-deprecated-list-item__secondary-text{font-size:inherit}* ::slotted(a),a{color:inherit;text-decoration:none}:host([twoline]){height:72px}:host([twoline]) .mdc-deprecated-list-item__text{align-self:flex-start}:host([disabled]),:host([noninteractive]){cursor:default;pointer-events:none}:host([disabled]) .mdc-deprecated-list-item__text ::slotted(*){opacity:.38}:host([disabled]) .mdc-deprecated-list-item__text ::slotted(*),:host([disabled]) .mdc-deprecated-list-item__primary-text ::slotted(*),:host([disabled]) .mdc-deprecated-list-item__secondary-text ::slotted(*){color:#000;color:var(--mdc-theme-on-surface, #000)}.mdc-deprecated-list-item__secondary-text ::slotted(*){color:rgba(0, 0, 0, 0.54);color:var(--mdc-theme-text-secondary-on-background, rgba(0, 0, 0, 0.54))}.mdc-deprecated-list-item__graphic ::slotted(*){background-color:transparent;color:rgba(0, 0, 0, 0.38);color:var(--mdc-theme-text-icon-on-background, rgba(0, 0, 0, 0.38))}.mdc-deprecated-list-group__subheader ::slotted(*){color:rgba(0, 0, 0, 0.87);color:var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87))}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic{width:var(--mdc-list-item-graphic-size, 40px);height:var(--mdc-list-item-graphic-size, 40px)}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic.multi{width:auto}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic ::slotted(*){width:var(--mdc-list-item-graphic-size, 40px);line-height:var(--mdc-list-item-graphic-size, 40px)}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic ::slotted(.material-icons),:host([graphic=avatar]) .mdc-deprecated-list-item__graphic ::slotted(mwc-icon){line-height:var(--mdc-list-item-graphic-size, 40px) !important}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic ::slotted(*){border-radius:50%}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic,:host([graphic=medium]) .mdc-deprecated-list-item__graphic,:host([graphic=large]) .mdc-deprecated-list-item__graphic,:host([graphic=control]) .mdc-deprecated-list-item__graphic{margin-left:0;margin-right:var(--mdc-list-item-graphic-margin, 16px)}[dir=rtl] :host([graphic=avatar]) .mdc-deprecated-list-item__graphic,[dir=rtl] :host([graphic=medium]) .mdc-deprecated-list-item__graphic,[dir=rtl] :host([graphic=large]) .mdc-deprecated-list-item__graphic,[dir=rtl] :host([graphic=control]) .mdc-deprecated-list-item__graphic,:host([graphic=avatar]) .mdc-deprecated-list-item__graphic[dir=rtl],:host([graphic=medium]) .mdc-deprecated-list-item__graphic[dir=rtl],:host([graphic=large]) .mdc-deprecated-list-item__graphic[dir=rtl],:host([graphic=control]) .mdc-deprecated-list-item__graphic[dir=rtl]{margin-left:var(--mdc-list-item-graphic-margin, 16px);margin-right:0}:host([graphic=icon]) .mdc-deprecated-list-item__graphic{width:var(--mdc-list-item-graphic-size, 24px);height:var(--mdc-list-item-graphic-size, 24px);margin-left:0;margin-right:var(--mdc-list-item-graphic-margin, 32px)}:host([graphic=icon]) .mdc-deprecated-list-item__graphic.multi{width:auto}:host([graphic=icon]) .mdc-deprecated-list-item__graphic ::slotted(*){width:var(--mdc-list-item-graphic-size, 24px);line-height:var(--mdc-list-item-graphic-size, 24px)}:host([graphic=icon]) .mdc-deprecated-list-item__graphic ::slotted(.material-icons),:host([graphic=icon]) .mdc-deprecated-list-item__graphic ::slotted(mwc-icon){line-height:var(--mdc-list-item-graphic-size, 24px) !important}[dir=rtl] :host([graphic=icon]) .mdc-deprecated-list-item__graphic,:host([graphic=icon]) .mdc-deprecated-list-item__graphic[dir=rtl]{margin-left:var(--mdc-list-item-graphic-margin, 32px);margin-right:0}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:56px}:host([graphic=medium]:not([twoLine])),:host([graphic=large]:not([twoLine])){height:72px}:host([graphic=medium]) .mdc-deprecated-list-item__graphic,:host([graphic=large]) .mdc-deprecated-list-item__graphic{width:var(--mdc-list-item-graphic-size, 56px);height:var(--mdc-list-item-graphic-size, 56px)}:host([graphic=medium]) .mdc-deprecated-list-item__graphic.multi,:host([graphic=large]) .mdc-deprecated-list-item__graphic.multi{width:auto}:host([graphic=medium]) .mdc-deprecated-list-item__graphic ::slotted(*),:host([graphic=large]) .mdc-deprecated-list-item__graphic ::slotted(*){width:var(--mdc-list-item-graphic-size, 56px);line-height:var(--mdc-list-item-graphic-size, 56px)}:host([graphic=medium]) .mdc-deprecated-list-item__graphic ::slotted(.material-icons),:host([graphic=medium]) .mdc-deprecated-list-item__graphic ::slotted(mwc-icon),:host([graphic=large]) .mdc-deprecated-list-item__graphic ::slotted(.material-icons),:host([graphic=large]) .mdc-deprecated-list-item__graphic ::slotted(mwc-icon){line-height:var(--mdc-list-item-graphic-size, 56px) !important}:host([graphic=large]){padding-left:0px}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ic=class extends Un{};ic.styles=[kh];ic=z([Ni("mwc-list-item")],ic);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var We={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},_n=new Set;_n.add(We.BACKSPACE);_n.add(We.ENTER);_n.add(We.SPACEBAR);_n.add(We.PAGE_UP);_n.add(We.PAGE_DOWN);_n.add(We.END);_n.add(We.HOME);_n.add(We.ARROW_LEFT);_n.add(We.ARROW_UP);_n.add(We.ARROW_RIGHT);_n.add(We.ARROW_DOWN);_n.add(We.DELETE);_n.add(We.ESCAPE);_n.add(We.TAB);var no={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Pn=new Map;Pn.set(no.BACKSPACE,We.BACKSPACE);Pn.set(no.ENTER,We.ENTER);Pn.set(no.SPACEBAR,We.SPACEBAR);Pn.set(no.PAGE_UP,We.PAGE_UP);Pn.set(no.PAGE_DOWN,We.PAGE_DOWN);Pn.set(no.END,We.END);Pn.set(no.HOME,We.HOME);Pn.set(no.ARROW_LEFT,We.ARROW_LEFT);Pn.set(no.ARROW_UP,We.ARROW_UP);Pn.set(no.ARROW_RIGHT,We.ARROW_RIGHT);Pn.set(no.ARROW_DOWN,We.ARROW_DOWN);Pn.set(no.DELETE,We.DELETE);Pn.set(no.ESCAPE,We.ESCAPE);Pn.set(no.TAB,We.TAB);var zs=new Set;zs.add(We.PAGE_UP);zs.add(We.PAGE_DOWN);zs.add(We.END);zs.add(We.HOME);zs.add(We.ARROW_LEFT);zs.add(We.ARROW_UP);zs.add(We.ARROW_RIGHT);zs.add(We.ARROW_DOWN);function gn(e){var t=e.key;if(_n.has(t))return t;var i=Pn.get(e.keyCode);return i||We.UNKNOWN}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var As,es,Wi={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};As={},As[""+Wi.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",As[""+Wi.LIST_ITEM_CLASS]="mdc-list-item",As[""+Wi.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",As[""+Wi.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",As[""+Wi.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",As[""+Wi.ROOT]="mdc-list";var Rr=(es={},es[""+Wi.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",es[""+Wi.LIST_ITEM_CLASS]="mdc-deprecated-list-item",es[""+Wi.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",es[""+Wi.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",es[""+Wi.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",es[""+Wi.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",es[""+Wi.ROOT]="mdc-deprecated-list",es),Mc={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+Wi.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Wi.LIST_ITEM_CLASS+` a,
    .`+Rr[Wi.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+Rr[Wi.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+Wi.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Wi.LIST_ITEM_CLASS+` a,
    .`+Wi.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+Wi.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+Rr[Wi.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+Rr[Wi.LIST_ITEM_CLASS]+` a,
    .`+Rr[Wi.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+Rr[Wi.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},Qn={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qa=(e,t)=>e-t,ny=(e,t)=>{const i=Array.from(e),n=Array.from(t),o={added:[],removed:[]},l=i.sort(Qa),I=n.sort(Qa);let m=0,Z=0;for(;m<l.length||Z<I.length;){const x=l[m],L=I[Z];if(x===L){m++,Z++;continue}if(x!==void 0&&(L===void 0||x<L)){o.removed.push(x),m++;continue}if(L!==void 0&&(x===void 0||L<x)){o.added.push(L),Z++;continue}}return o},oy=["input","button","textarea","select"];function Ll(e){return e instanceof Set}const ea=e=>{const t=e===Qn.UNSET_INDEX?new Set:e;return Ll(t)?new Set(t):new Set([t])};class EI extends No{constructor(t){super(Object.assign(Object.assign({},EI.defaultAdapter),t)),this.isMulti_=!1,this.wrapFocus_=!1,this.isVertical_=!0,this.selectedIndex_=Qn.UNSET_INDEX,this.focusedItemIndex_=Qn.UNSET_INDEX,this.useActivatedClass_=!1,this.ariaCurrentAttrValue_=null}static get strings(){return Mc}static get numbers(){return Qn}static get defaultAdapter(){return{focusItemAtIndex:()=>{},getFocusedElementIndex:()=>0,getListItemCount:()=>0,isFocusInsideList:()=>!1,isRootFocused:()=>!1,notifyAction:()=>{},notifySelected:()=>{},getSelectedStateForElementIndex:()=>!1,setDisabledStateForElementIndex:()=>{},getDisabledStateForElementIndex:()=>!1,setSelectedStateForElementIndex:()=>{},setActivatedStateForElementIndex:()=>{},setTabIndexForElementIndex:()=>{},setAttributeForElementIndex:()=>{},getAttributeForElementIndex:()=>null}}setWrapFocus(t){this.wrapFocus_=t}setMulti(t){this.isMulti_=t;const i=this.selectedIndex_;if(t){if(!Ll(i)){const n=i===Qn.UNSET_INDEX;this.selectedIndex_=n?new Set:new Set([i])}}else if(Ll(i))if(i.size){const n=Array.from(i).sort(Qa);this.selectedIndex_=n[0]}else this.selectedIndex_=Qn.UNSET_INDEX}setVerticalOrientation(t){this.isVertical_=t}setUseActivatedClass(t){this.useActivatedClass_=t}getSelectedIndex(){return this.selectedIndex_}setSelectedIndex(t){!this.isIndexValid_(t)||(this.isMulti_?this.setMultiSelectionAtIndex_(ea(t)):this.setSingleSelectionAtIndex_(t))}handleFocusIn(t,i){i>=0&&this.adapter.setTabIndexForElementIndex(i,0)}handleFocusOut(t,i){i>=0&&this.adapter.setTabIndexForElementIndex(i,-1),setTimeout(()=>{this.adapter.isFocusInsideList()||this.setTabindexToFirstSelectedItem_()},0)}handleKeydown(t,i,n){const o=gn(t)==="ArrowLeft",l=gn(t)==="ArrowUp",I=gn(t)==="ArrowRight",m=gn(t)==="ArrowDown",Z=gn(t)==="Home",x=gn(t)==="End",L=gn(t)==="Enter",K=gn(t)==="Spacebar";if(this.adapter.isRootFocused()){l||x?(t.preventDefault(),this.focusLastElement()):(m||Z)&&(t.preventDefault(),this.focusFirstElement());return}let st=this.adapter.getFocusedElementIndex();if(st===-1&&(st=n,st<0))return;let ut;if(this.isVertical_&&m||!this.isVertical_&&I)this.preventDefaultEvent(t),ut=this.focusNextElement(st);else if(this.isVertical_&&l||!this.isVertical_&&o)this.preventDefaultEvent(t),ut=this.focusPrevElement(st);else if(Z)this.preventDefaultEvent(t),ut=this.focusFirstElement();else if(x)this.preventDefaultEvent(t),ut=this.focusLastElement();else if((L||K)&&i){const P=t.target;if(P&&P.tagName==="A"&&L)return;this.preventDefaultEvent(t),this.setSelectedIndexOnAction_(st,!0)}this.focusedItemIndex_=st,ut!==void 0&&(this.setTabindexAtIndex_(ut),this.focusedItemIndex_=ut)}handleSingleSelection(t,i,n){t!==Qn.UNSET_INDEX&&(this.setSelectedIndexOnAction_(t,i,n),this.setTabindexAtIndex_(t),this.focusedItemIndex_=t)}focusNextElement(t){const i=this.adapter.getListItemCount();let n=t+1;if(n>=i)if(this.wrapFocus_)n=0;else return t;return this.adapter.focusItemAtIndex(n),n}focusPrevElement(t){let i=t-1;if(i<0)if(this.wrapFocus_)i=this.adapter.getListItemCount()-1;else return t;return this.adapter.focusItemAtIndex(i),i}focusFirstElement(){return this.adapter.focusItemAtIndex(0),0}focusLastElement(){const t=this.adapter.getListItemCount()-1;return this.adapter.focusItemAtIndex(t),t}setEnabled(t,i){!this.isIndexValid_(t)||this.adapter.setDisabledStateForElementIndex(t,!i)}preventDefaultEvent(t){const n=`${t.target.tagName}`.toLowerCase();oy.indexOf(n)===-1&&t.preventDefault()}setSingleSelectionAtIndex_(t,i=!0){this.selectedIndex_!==t&&(this.selectedIndex_!==Qn.UNSET_INDEX&&(this.adapter.setSelectedStateForElementIndex(this.selectedIndex_,!1),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(this.selectedIndex_,!1)),i&&this.adapter.setSelectedStateForElementIndex(t,!0),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(t,!0),this.setAriaForSingleSelectionAtIndex_(t),this.selectedIndex_=t,this.adapter.notifySelected(t))}setMultiSelectionAtIndex_(t,i=!0){const n=ea(this.selectedIndex_),o=ny(n,t);if(!(!o.removed.length&&!o.added.length)){for(const l of o.removed)i&&this.adapter.setSelectedStateForElementIndex(l,!1),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(l,!1);for(const l of o.added)i&&this.adapter.setSelectedStateForElementIndex(l,!0),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(l,!0);this.selectedIndex_=t,this.adapter.notifySelected(t,o)}}setAriaForSingleSelectionAtIndex_(t){this.selectedIndex_===Qn.UNSET_INDEX&&(this.ariaCurrentAttrValue_=this.adapter.getAttributeForElementIndex(t,Mc.ARIA_CURRENT));const i=this.ariaCurrentAttrValue_!==null,n=i?Mc.ARIA_CURRENT:Mc.ARIA_SELECTED;this.selectedIndex_!==Qn.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex_,n,"false");const o=i?this.ariaCurrentAttrValue_:"true";this.adapter.setAttributeForElementIndex(t,n,o)}setTabindexAtIndex_(t){this.focusedItemIndex_===Qn.UNSET_INDEX&&t!==0?this.adapter.setTabIndexForElementIndex(0,-1):this.focusedItemIndex_>=0&&this.focusedItemIndex_!==t&&this.adapter.setTabIndexForElementIndex(this.focusedItemIndex_,-1),this.adapter.setTabIndexForElementIndex(t,0)}setTabindexToFirstSelectedItem_(){let t=0;typeof this.selectedIndex_=="number"&&this.selectedIndex_!==Qn.UNSET_INDEX?t=this.selectedIndex_:Ll(this.selectedIndex_)&&this.selectedIndex_.size>0&&(t=Math.min(...this.selectedIndex_)),this.setTabindexAtIndex_(t)}isIndexValid_(t){if(t instanceof Set){if(!this.isMulti_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");if(t.size===0)return!0;{let i=!1;for(const n of t)if(i=this.isIndexInRange_(n),i)break;return i}}else if(typeof t=="number"){if(this.isMulti_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+t);return t===Qn.UNSET_INDEX||this.isIndexInRange_(t)}else return!1}isIndexInRange_(t){const i=this.adapter.getListItemCount();return t>=0&&t<i}setSelectedIndexOnAction_(t,i,n){if(this.adapter.getDisabledStateForElementIndex(t))return;let o=t;this.isMulti_&&(o=new Set([t])),this.isIndexValid_(o)&&(this.isMulti_?this.toggleMultiAtIndex(t,n,i):i||n?this.setSingleSelectionAtIndex_(t,i):this.selectedIndex_===t&&this.setSingleSelectionAtIndex_(Qn.UNSET_INDEX),i&&this.adapter.notifyAction(t))}toggleMultiAtIndex(t,i,n=!0){let o=!1;i===void 0?o=!this.adapter.getSelectedStateForElementIndex(t):o=i;const l=ea(this.selectedIndex_);o?l.add(t):l.delete(t),this.setMultiSelectionAtIndex_(l,n)}}function sy(e,t=50){let i;return function(n=!0){clearTimeout(i),i=setTimeout(()=>{e(n)},t)}}const Lc=e=>e.hasAttribute("mwc-list-item");function ry(){const e=this.itemsReadyResolver;this.itemsReady=new Promise(t=>this.itemsReadyResolver=t),e()}class mo extends ks{constructor(){super(),this.mdcAdapter=null,this.mdcFoundationClass=EI,this.activatable=!1,this.multi=!1,this.wrapFocus=!1,this.itemRoles=null,this.innerRole=null,this.innerAriaLabel=null,this.rootTabbable=!1,this.previousTabindex=null,this.noninteractive=!1,this.itemsReadyResolver=()=>{},this.itemsReady=Promise.resolve([]),this.items_=[];const t=sy(this.layout.bind(this));this.debouncedLayout=(i=!0)=>{ry.call(this),t(i)}}async getUpdateComplete(){const t=await super.getUpdateComplete();return await this.itemsReady,t}get items(){return this.items_}updateItems(){var t;const i=(t=this.assignedElements)!==null&&t!==void 0?t:[],n=[];for(const I of i)Lc(I)&&(n.push(I),I._managingList=this),I.hasAttribute("divider")&&!I.hasAttribute("role")&&I.setAttribute("role","separator");this.items_=n;const o=new Set;if(this.items_.forEach((I,m)=>{this.itemRoles?I.setAttribute("role",this.itemRoles):I.removeAttribute("role"),I.selected&&o.add(m)}),this.multi)this.select(o);else{const I=o.size?o.entries().next().value[1]:-1;this.select(I)}const l=new Event("items-updated",{bubbles:!0,composed:!0});this.dispatchEvent(l)}get selected(){const t=this.index;if(!Ll(t))return t===-1?null:this.items[t];const i=[];for(const n of t)i.push(this.items[n]);return i}get index(){return this.mdcFoundation?this.mdcFoundation.getSelectedIndex():-1}render(){const t=this.innerRole===null?void 0:this.innerRole,i=this.innerAriaLabel===null?void 0:this.innerAriaLabel,n=this.rootTabbable?"0":"-1";return Lt`
      <!-- @ts-ignore -->
      <ul
          tabindex=${n}
          role="${Do(t)}"
          aria-label="${Do(i)}"
          class="mdc-deprecated-list"
          @keydown=${this.onKeydown}
          @focusin=${this.onFocusIn}
          @focusout=${this.onFocusOut}
          @request-selected=${this.onRequestSelected}
          @list-item-rendered=${this.onListItemConnected}>
        <slot></slot>
        ${this.renderPlaceholder()}
      </ul>
    `}renderPlaceholder(){var t;const i=(t=this.assignedElements)!==null&&t!==void 0?t:[];return this.emptyMessage!==void 0&&i.length===0?Lt`
        <mwc-list-item noninteractive>${this.emptyMessage}</mwc-list-item>
      `:null}firstUpdated(){super.firstUpdated(),this.items.length||(this.mdcFoundation.setMulti(this.multi),this.layout())}onFocusIn(t){if(this.mdcFoundation&&this.mdcRoot){const i=this.getIndexOfTarget(t);this.mdcFoundation.handleFocusIn(t,i)}}onFocusOut(t){if(this.mdcFoundation&&this.mdcRoot){const i=this.getIndexOfTarget(t);this.mdcFoundation.handleFocusOut(t,i)}}onKeydown(t){if(this.mdcFoundation&&this.mdcRoot){const i=this.getIndexOfTarget(t),n=t.target,o=Lc(n);this.mdcFoundation.handleKeydown(t,o,i)}}onRequestSelected(t){if(this.mdcFoundation){let i=this.getIndexOfTarget(t);if(i===-1&&(this.layout(),i=this.getIndexOfTarget(t),i===-1)||this.items[i].disabled)return;const o=t.detail.selected,l=t.detail.source;this.mdcFoundation.handleSingleSelection(i,l==="interaction",o),t.stopPropagation()}}getIndexOfTarget(t){const i=this.items,n=t.composedPath();for(const o of n){let l=-1;if(Sh(o)&&Lc(o)&&(l=i.indexOf(o)),l!==-1)return l}return-1}createAdapter(){return this.mdcAdapter={getListItemCount:()=>this.mdcRoot?this.items.length:0,getFocusedElementIndex:this.getFocusedItemIndex,getAttributeForElementIndex:(t,i)=>{if(!this.mdcRoot)return"";const o=this.items[t];return o?o.getAttribute(i):""},setAttributeForElementIndex:(t,i,n)=>{if(!this.mdcRoot)return;const o=this.items[t];o&&o.setAttribute(i,n)},focusItemAtIndex:t=>{const i=this.items[t];i&&i.focus()},setTabIndexForElementIndex:(t,i)=>{const n=this.items[t];n&&(n.tabindex=i)},notifyAction:t=>{const i={bubbles:!0,composed:!0};i.detail={index:t};const n=new CustomEvent("action",i);this.dispatchEvent(n)},notifySelected:(t,i)=>{const n={bubbles:!0,composed:!0};n.detail={index:t,diff:i};const o=new CustomEvent("selected",n);this.dispatchEvent(o)},isFocusInsideList:()=>Hh(this),isRootFocused:()=>{const t=this.mdcRoot;return t.getRootNode().activeElement===t},setDisabledStateForElementIndex:(t,i)=>{const n=this.items[t];!n||(n.disabled=i)},getDisabledStateForElementIndex:t=>{const i=this.items[t];return i?i.disabled:!1},setSelectedStateForElementIndex:(t,i)=>{const n=this.items[t];!n||(n.selected=i)},getSelectedStateForElementIndex:t=>{const i=this.items[t];return i?i.selected:!1},setActivatedStateForElementIndex:(t,i)=>{const n=this.items[t];!n||(n.activated=i)}},this.mdcAdapter}selectUi(t,i=!1){const n=this.items[t];n&&(n.selected=!0,n.activated=i)}deselectUi(t){const i=this.items[t];i&&(i.selected=!1,i.activated=!1)}select(t){!this.mdcFoundation||this.mdcFoundation.setSelectedIndex(t)}toggle(t,i){this.multi&&this.mdcFoundation.toggleMultiAtIndex(t,i)}onListItemConnected(t){const i=t.target;this.layout(this.items.indexOf(i)===-1)}layout(t=!0){t&&this.updateItems();const i=this.items[0];for(const n of this.items)n.tabindex=-1;i&&(this.noninteractive?this.previousTabindex||(this.previousTabindex=i):i.tabindex=0),this.itemsReadyResolver()}getFocusedItemIndex(){if(!this.mdcRoot||!this.items.length)return-1;const t=kI();if(!t.length)return-1;for(let i=t.length-1;i>=0;i--){const n=t[i];if(Lc(n))return this.items.indexOf(n)}return-1}focusItemAtIndex(t){for(const i of this.items)if(i.tabindex===0){i.tabindex=-1;break}this.items[t].tabindex=0,this.items[t].focus()}focus(){const t=this.mdcRoot;t&&t.focus()}blur(){const t=this.mdcRoot;t&&t.blur()}}z([lt({type:String})],mo.prototype,"emptyMessage",void 0);z([vi(".mdc-deprecated-list")],mo.prototype,"mdcRoot",void 0);z([Rh("",!0,"*")],mo.prototype,"assignedElements",void 0);z([Rh("",!0,'[tabindex="0"]')],mo.prototype,"tabbableElements",void 0);z([lt({type:Boolean}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setUseActivatedClass(e)})],mo.prototype,"activatable",void 0);z([lt({type:Boolean}),pi(function(e,t){this.mdcFoundation&&this.mdcFoundation.setMulti(e),t!==void 0&&this.layout()})],mo.prototype,"multi",void 0);z([lt({type:Boolean}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setWrapFocus(e)})],mo.prototype,"wrapFocus",void 0);z([lt({type:String}),pi(function(e,t){t!==void 0&&this.updateItems()})],mo.prototype,"itemRoles",void 0);z([lt({type:String})],mo.prototype,"innerRole",void 0);z([lt({type:String})],mo.prototype,"innerAriaLabel",void 0);z([lt({type:Boolean})],mo.prototype,"rootTabbable",void 0);z([lt({type:Boolean,reflect:!0}),pi(function(e){var t,i;if(e){const n=(i=(t=this.tabbableElements)===null||t===void 0?void 0:t[0])!==null&&i!==void 0?i:null;this.previousTabindex=n,n&&n.setAttribute("tabindex","-1")}else!e&&this.previousTabindex&&(this.previousTabindex.setAttribute("tabindex","0"),this.previousTabindex=null)})],mo.prototype,"noninteractive",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const ly=bi`@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}:host{display:block}.mdc-deprecated-list{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-subtitle1-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size, 1rem);line-height:1.75rem;line-height:var(--mdc-typography-subtitle1-line-height, 1.75rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight, 400);letter-spacing:0.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing, 0.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform, inherit);line-height:1.5rem;margin:0;padding:8px 0;list-style-type:none;color:rgba(0, 0, 0, 0.87);color:var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87));padding:var(--mdc-list-vertical-padding, 8px) 0}.mdc-deprecated-list:focus{outline:none}.mdc-deprecated-list-item{height:48px}.mdc-deprecated-list--dense{padding-top:4px;padding-bottom:4px;font-size:.812rem}.mdc-deprecated-list ::slotted([divider]){height:0;margin:0;border:none;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgba(0, 0, 0, 0.12)}.mdc-deprecated-list ::slotted([divider][padded]){margin:0 var(--mdc-list-side-padding, 16px)}.mdc-deprecated-list ::slotted([divider][inset]){margin-left:var(--mdc-list-inset-margin, 72px);margin-right:0;width:calc( 100% - var(--mdc-list-inset-margin, 72px) )}[dir=rtl] .mdc-deprecated-list ::slotted([divider][inset]),.mdc-deprecated-list ::slotted([divider][inset][dir=rtl]){margin-left:0;margin-right:var(--mdc-list-inset-margin, 72px)}.mdc-deprecated-list ::slotted([divider][inset][padded]){width:calc( 100% - var(--mdc-list-inset-margin, 72px) - var(--mdc-list-side-padding, 16px) )}.mdc-deprecated-list--dense ::slotted([mwc-list-item]){height:40px}.mdc-deprecated-list--dense ::slotted([mwc-list]){--mdc-list-item-graphic-size: 20px}.mdc-deprecated-list--two-line.mdc-deprecated-list--dense ::slotted([mwc-list-item]),.mdc-deprecated-list--avatar-list.mdc-deprecated-list--dense ::slotted([mwc-list-item]){height:60px}.mdc-deprecated-list--avatar-list.mdc-deprecated-list--dense ::slotted([mwc-list]){--mdc-list-item-graphic-size: 36px}:host([noninteractive]){pointer-events:none;cursor:default}.mdc-deprecated-list--dense ::slotted(.mdc-deprecated-list-item__primary-text){display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-deprecated-list--dense ::slotted(.mdc-deprecated-list-item__primary-text)::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-deprecated-list--dense ::slotted(.mdc-deprecated-list-item__primary-text)::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Da=class extends mo{};Da.styles=[ly];Da=z([Ni("mwc-list")],Da);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var cy={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},gy={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},Jc={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67},$i;(function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"})($i||($i={}));var Dn;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"})(Dn||(Dn={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var zh=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.isSurfaceOpen=!1,n.isQuickOpen=!1,n.isHoistedElement=!1,n.isFixedPosition=!1,n.isHorizontallyCenteredOnViewport=!1,n.maxHeight=0,n.openAnimationEndTimerId=0,n.closeAnimationEndTimerId=0,n.animationRequestId=0,n.anchorCorner=Dn.TOP_START,n.originCorner=Dn.TOP_START,n.anchorMargin={top:0,right:0,bottom:0,left:0},n.position={x:0,y:0},n}return Object.defineProperty(t,"cssClasses",{get:function(){return cy},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return gy},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Jc},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return Dn},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var i=t.cssClasses,n=i.ROOT,o=i.OPEN;if(!this.adapter.hasClass(n))throw new Error(n+" class required in root element.");this.adapter.hasClass(o)&&(this.isSurfaceOpen=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},t.prototype.setAnchorCorner=function(i){this.anchorCorner=i},t.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^$i.RIGHT},t.prototype.setAnchorMargin=function(i){this.anchorMargin.top=i.top||0,this.anchorMargin.right=i.right||0,this.anchorMargin.bottom=i.bottom||0,this.anchorMargin.left=i.left||0},t.prototype.setIsHoisted=function(i){this.isHoistedElement=i},t.prototype.setFixedPosition=function(i){this.isFixedPosition=i},t.prototype.setAbsolutePosition=function(i,n){this.position.x=this.isFinite(i)?i:0,this.position.y=this.isFinite(n)?n:0},t.prototype.setIsHorizontallyCenteredOnViewport=function(i){this.isHorizontallyCenteredOnViewport=i},t.prototype.setQuickOpen=function(i){this.isQuickOpen=i},t.prototype.setMaxHeight=function(i){this.maxHeight=i},t.prototype.isOpen=function(){return this.isSurfaceOpen},t.prototype.open=function(){var i=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(t.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){i.dimensions=i.adapter.getInnerDimensions(),i.autoposition(),i.adapter.addClass(t.cssClasses.OPEN),i.openAnimationEndTimerId=setTimeout(function(){i.openAnimationEndTimerId=0,i.adapter.removeClass(t.cssClasses.ANIMATING_OPEN),i.adapter.notifyOpen()},Jc.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},t.prototype.close=function(i){var n=this;if(i===void 0&&(i=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,i||this.maybeRestoreFocus(),this.adapter.removeClass(t.cssClasses.OPEN),this.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){n.adapter.removeClass(t.cssClasses.OPEN),n.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),n.closeAnimationEndTimerId=setTimeout(function(){n.closeAnimationEndTimerId=0,n.adapter.removeClass(t.cssClasses.ANIMATING_CLOSED),n.adapter.notifyClose()},Jc.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,i||this.maybeRestoreFocus()}},t.prototype.handleBodyClick=function(i){var n=i.target;this.adapter.isElementInContainer(n)||this.close()},t.prototype.handleKeydown=function(i){var n=i.keyCode,o=i.key,l=o==="Escape"||n===27;l&&this.close()},t.prototype.autoposition=function(){var i;this.measurements=this.getAutoLayoutmeasurements();var n=this.getoriginCorner(),o=this.getMenuSurfaceMaxHeight(n),l=this.hasBit(n,$i.BOTTOM)?"bottom":"top",I=this.hasBit(n,$i.RIGHT)?"right":"left",m=this.getHorizontalOriginOffset(n),Z=this.getVerticalOriginOffset(n),x=this.measurements,L=x.anchorSize,K=x.surfaceSize,st=(i={},i[I]=m,i[l]=Z,i);L.width/K.width>Jc.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(I="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(st),this.adapter.setTransformOrigin(I+" "+l),this.adapter.setPosition(st),this.adapter.setMaxHeight(o?o+"px":""),this.hasBit(n,$i.BOTTOM)||this.adapter.addClass(t.cssClasses.IS_OPEN_BELOW)},t.prototype.getAutoLayoutmeasurements=function(){var i=this.adapter.getAnchorDimensions(),n=this.adapter.getBodyDimensions(),o=this.adapter.getWindowDimensions(),l=this.adapter.getWindowScroll();return i||(i={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:i,bodySize:n,surfaceSize:this.dimensions,viewportDistance:{top:i.top,right:o.width-i.right,bottom:o.height-i.bottom,left:i.left},viewportSize:o,windowScroll:l}},t.prototype.getoriginCorner=function(){var i=this.originCorner,n=this.measurements,o=n.viewportDistance,l=n.anchorSize,I=n.surfaceSize,m=t.numbers.MARGIN_TO_EDGE,Z=this.hasBit(this.anchorCorner,$i.BOTTOM),x,L;Z?(x=o.top-m+this.anchorMargin.bottom,L=o.bottom-m-this.anchorMargin.bottom):(x=o.top-m+this.anchorMargin.top,L=o.bottom-m+l.height-this.anchorMargin.top);var K=L-I.height>0;!K&&x>L&&(i=this.setBit(i,$i.BOTTOM));var st=this.adapter.isRtl(),ut=this.hasBit(this.anchorCorner,$i.FLIP_RTL),P=this.hasBit(this.anchorCorner,$i.RIGHT)||this.hasBit(i,$i.RIGHT),ct=!1;st&&ut?ct=!P:ct=P;var Rt,Bt;ct?(Rt=o.left+l.width+this.anchorMargin.right,Bt=o.right-this.anchorMargin.right):(Rt=o.left+this.anchorMargin.left,Bt=o.right+l.width-this.anchorMargin.left);var Yt=Rt-I.width>0,_=Bt-I.width>0,qe=this.hasBit(i,$i.FLIP_RTL)&&this.hasBit(i,$i.RIGHT);return _&&qe&&st||!Yt&&qe?i=this.unsetBit(i,$i.RIGHT):(Yt&&ct&&st||Yt&&!ct&&P||!_&&Rt>=Bt)&&(i=this.setBit(i,$i.RIGHT)),i},t.prototype.getMenuSurfaceMaxHeight=function(i){if(this.maxHeight>0)return this.maxHeight;var n=this.measurements.viewportDistance,o=0,l=this.hasBit(i,$i.BOTTOM),I=this.hasBit(this.anchorCorner,$i.BOTTOM),m=t.numbers.MARGIN_TO_EDGE;return l?(o=n.top+this.anchorMargin.top-m,I||(o+=this.measurements.anchorSize.height)):(o=n.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-m,I&&(o-=this.measurements.anchorSize.height)),o},t.prototype.getHorizontalOriginOffset=function(i){var n=this.measurements.anchorSize,o=this.hasBit(i,$i.RIGHT),l=this.hasBit(this.anchorCorner,$i.RIGHT);if(o){var I=l?n.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?I-(this.measurements.viewportSize.width-this.measurements.bodySize.width):I}return l?n.width-this.anchorMargin.right:this.anchorMargin.left},t.prototype.getVerticalOriginOffset=function(i){var n=this.measurements.anchorSize,o=this.hasBit(i,$i.BOTTOM),l=this.hasBit(this.anchorCorner,$i.BOTTOM),I=0;return o?I=l?n.height-this.anchorMargin.top:-this.anchorMargin.bottom:I=l?n.height+this.anchorMargin.bottom:this.anchorMargin.top,I},t.prototype.adjustPositionForHoistedElement=function(i){var n,o,l=this.measurements,I=l.windowScroll,m=l.viewportDistance,Z=l.surfaceSize,x=l.viewportSize,L=Object.keys(i);try{for(var K=Fl(L),st=K.next();!st.done;st=K.next()){var ut=st.value,P=i[ut]||0;if(this.isHorizontallyCenteredOnViewport&&(ut==="left"||ut==="right")){i[ut]=(x.width-Z.width)/2;continue}P+=m[ut],this.isFixedPosition||(ut==="top"?P+=I.y:ut==="bottom"?P-=I.y:ut==="left"?P+=I.x:P-=I.x),i[ut]=P}}catch(ct){n={error:ct}}finally{try{st&&!st.done&&(o=K.return)&&o.call(K)}finally{if(n)throw n.error}}},t.prototype.maybeRestoreFocus=function(){var i=this.adapter.isFocused(),n=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(i||n)&&this.adapter.restoreFocus()},t.prototype.hasBit=function(i,n){return Boolean(i&n)},t.prototype.setBit=function(i,n){return i|n},t.prototype.unsetBit=function(i,n){return i^n},t.prototype.isFinite=function(i){return typeof i=="number"&&isFinite(i)},t}(No),dy=zh;const ay={TOP_LEFT:Dn.TOP_LEFT,TOP_RIGHT:Dn.TOP_RIGHT,BOTTOM_LEFT:Dn.BOTTOM_LEFT,BOTTOM_RIGHT:Dn.BOTTOM_RIGHT,TOP_START:Dn.TOP_START,TOP_END:Dn.TOP_END,BOTTOM_START:Dn.BOTTOM_START,BOTTOM_END:Dn.BOTTOM_END};class Gn extends ks{constructor(){super(...arguments),this.mdcFoundationClass=dy,this.absolute=!1,this.fullwidth=!1,this.fixed=!1,this.x=null,this.y=null,this.quick=!1,this.open=!1,this.stayOpenOnBodyClick=!1,this.bitwiseCorner=Dn.TOP_START,this.previousMenuCorner=null,this.menuCorner="START",this.corner="TOP_START",this.styleTop="",this.styleLeft="",this.styleRight="",this.styleBottom="",this.styleMaxHeight="",this.styleTransformOrigin="",this.anchor=null,this.previouslyFocused=null,this.previousAnchor=null,this.onBodyClickBound=()=>{}}render(){const t={"mdc-menu-surface--fixed":this.fixed,"mdc-menu-surface--fullwidth":this.fullwidth},i={top:this.styleTop,left:this.styleLeft,right:this.styleRight,bottom:this.styleBottom,"max-height":this.styleMaxHeight,"transform-origin":this.styleTransformOrigin};return Lt`
      <div
          class="mdc-menu-surface ${In(t)}"
          style="${Nh(i)}"
          @keydown=${this.onKeydown}
          @opened=${this.registerBodyClick}
          @closed=${this.deregisterBodyClick}>
        <slot></slot>
      </div>`}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{hasAnchor:()=>!!this.anchor,notifyClose:()=>{const t={bubbles:!0,composed:!0},i=new CustomEvent("closed",t);this.open=!1,this.mdcRoot.dispatchEvent(i)},notifyClosing:()=>{const t={bubbles:!0,composed:!0},i=new CustomEvent("closing",t);this.mdcRoot.dispatchEvent(i)},notifyOpen:()=>{const t={bubbles:!0,composed:!0},i=new CustomEvent("opened",t);this.open=!0,this.mdcRoot.dispatchEvent(i)},isElementInContainer:()=>!1,isRtl:()=>this.mdcRoot?getComputedStyle(this.mdcRoot).direction==="rtl":!1,setTransformOrigin:t=>{!this.mdcRoot||(this.styleTransformOrigin=t)},isFocused:()=>Hh(this),saveFocus:()=>{const t=kI(),i=t.length;i||(this.previouslyFocused=null),this.previouslyFocused=t[i-1]},restoreFocus:()=>{!this.previouslyFocused||"focus"in this.previouslyFocused&&this.previouslyFocused.focus()},getInnerDimensions:()=>{const t=this.mdcRoot;return t?{width:t.offsetWidth,height:t.offsetHeight}:{width:0,height:0}},getAnchorDimensions:()=>{const t=this.anchor;return t?t.getBoundingClientRect():null},getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:t=>{!this.mdcRoot||(this.styleLeft="left"in t?`${t.left}px`:"",this.styleRight="right"in t?`${t.right}px`:"",this.styleTop="top"in t?`${t.top}px`:"",this.styleBottom="bottom"in t?`${t.bottom}px`:"")},setMaxHeight:async t=>{!this.mdcRoot||(this.styleMaxHeight=t,await this.updateComplete,this.styleMaxHeight=`var(--mdc-menu-max-height, ${t})`)}})}onKeydown(t){this.mdcFoundation&&this.mdcFoundation.handleKeydown(t)}onBodyClick(t){if(this.stayOpenOnBodyClick)return;t.composedPath().indexOf(this)===-1&&this.close()}registerBodyClick(){this.onBodyClickBound=this.onBodyClick.bind(this),document.body.addEventListener("click",this.onBodyClickBound,{passive:!0,capture:!0})}deregisterBodyClick(){document.body.removeEventListener("click",this.onBodyClickBound,{capture:!0})}close(){this.open=!1}show(){this.open=!0}}z([vi(".mdc-menu-surface")],Gn.prototype,"mdcRoot",void 0);z([vi("slot")],Gn.prototype,"slotElement",void 0);z([lt({type:Boolean}),pi(function(e){this.mdcFoundation&&!this.fixed&&this.mdcFoundation.setIsHoisted(e)})],Gn.prototype,"absolute",void 0);z([lt({type:Boolean})],Gn.prototype,"fullwidth",void 0);z([lt({type:Boolean}),pi(function(e){this.mdcFoundation&&!this.absolute&&this.mdcFoundation.setFixedPosition(e)})],Gn.prototype,"fixed",void 0);z([lt({type:Number}),pi(function(e){this.mdcFoundation&&this.y!==null&&e!==null&&(this.mdcFoundation.setAbsolutePosition(e,this.y),this.mdcFoundation.setAnchorMargin({left:e,top:this.y,right:-e,bottom:this.y}))})],Gn.prototype,"x",void 0);z([lt({type:Number}),pi(function(e){this.mdcFoundation&&this.x!==null&&e!==null&&(this.mdcFoundation.setAbsolutePosition(this.x,e),this.mdcFoundation.setAnchorMargin({left:this.x,top:e,right:-this.x,bottom:e}))})],Gn.prototype,"y",void 0);z([lt({type:Boolean}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setQuickOpen(e)})],Gn.prototype,"quick",void 0);z([lt({type:Boolean,reflect:!0}),pi(function(e,t){this.mdcFoundation&&(e?this.mdcFoundation.open():t!==void 0&&this.mdcFoundation.close())})],Gn.prototype,"open",void 0);z([lt({type:Boolean})],Gn.prototype,"stayOpenOnBodyClick",void 0);z([Ri(),pi(function(e){this.mdcFoundation&&(e?this.mdcFoundation.setAnchorCorner(e):this.mdcFoundation.setAnchorCorner(e))})],Gn.prototype,"bitwiseCorner",void 0);z([lt({type:String}),pi(function(e){if(this.mdcFoundation){const t=e==="START"||e==="END",i=this.previousMenuCorner===null,n=!i&&e!==this.previousMenuCorner;t&&(n||i&&e==="END")&&(this.bitwiseCorner=this.bitwiseCorner^$i.RIGHT,this.mdcFoundation.flipCornerHorizontally(),this.previousMenuCorner=e)}})],Gn.prototype,"menuCorner",void 0);z([lt({type:String}),pi(function(e){if(this.mdcFoundation&&e){let t=ay[e];this.menuCorner==="END"&&(t=t^$i.RIGHT),this.bitwiseCorner=t}})],Gn.prototype,"corner",void 0);z([Ri()],Gn.prototype,"styleTop",void 0);z([Ri()],Gn.prototype,"styleLeft",void 0);z([Ri()],Gn.prototype,"styleRight",void 0);z([Ri()],Gn.prototype,"styleBottom",void 0);z([Ri()],Gn.prototype,"styleMaxHeight",void 0);z([Ri()],Gn.prototype,"styleTransformOrigin",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const Iy=bi`.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;transition:opacity .03s linear,transform .12s cubic-bezier(0, 0, 0.2, 1),height 250ms cubic-bezier(0, 0, 0.2, 1);box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12);background-color:#fff;background-color:var(--mdc-theme-surface, #fff);color:#000;color:var(--mdc-theme-on-surface, #000);border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0;transition:opacity .075s linear}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}:host(:not([open])){display:none}.mdc-menu-surface{z-index:8;z-index:var(--mdc-menu-z-index, 8);min-width:112px;min-width:var(--mdc-menu-min-width, 112px)}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Oa=class extends Gn{};Oa.styles=[Iy];Oa=z([Ni("mwc-menu-surface")],Oa);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ia={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},Bl={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected"},uy={FOCUS_ROOT_INDEX:-1},sr;(function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"})(sr||(sr={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Cy=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.closeAnimationEndTimerId=0,n.defaultFocusState=sr.LIST_ROOT,n.selectedIndex=-1,n}return Object.defineProperty(t,"cssClasses",{get:function(){return ia},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Bl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return uy},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},t.prototype.handleKeydown=function(i){var n=i.key,o=i.keyCode,l=n==="Tab"||o===9;l&&this.adapter.closeSurface(!0)},t.prototype.handleItemAction=function(i){var n=this,o=this.adapter.getElementIndex(i);o<0||(this.adapter.notifySelected({index:o}),this.adapter.closeSurface(),this.closeAnimationEndTimerId=setTimeout(function(){var l=n.adapter.getElementIndex(i);l>=0&&n.adapter.isSelectableItemAtIndex(l)&&n.setSelectedIndex(l)},zh.numbers.TRANSITION_CLOSE_DURATION))},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case sr.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case sr.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case sr.NONE:break;default:this.adapter.focusListRoot();break}},t.prototype.setDefaultFocusState=function(i){this.defaultFocusState=i},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(i){if(this.validatedIndex(i),!this.adapter.isSelectableItemAtIndex(i))throw new Error("MDCMenuFoundation: No selection group at specified index.");var n=this.adapter.getSelectedSiblingOfItemAtIndex(i);n>=0&&(this.adapter.removeAttributeFromElementAtIndex(n,Bl.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(n,ia.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(i,ia.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(i,Bl.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=i},t.prototype.setEnabled=function(i,n){this.validatedIndex(i),n?(this.adapter.removeClassFromElementAtIndex(i,Wi.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(i,Bl.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(i,Wi.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(i,Bl.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex=function(i){var n=this.adapter.getMenuItemCount(),o=i>=0&&i<n;if(!o)throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(No),my=Cy;class Vn extends ks{constructor(){super(...arguments),this.mdcFoundationClass=my,this.listElement_=null,this.anchor=null,this.open=!1,this.quick=!1,this.wrapFocus=!1,this.innerRole="menu",this.corner="TOP_START",this.x=null,this.y=null,this.absolute=!1,this.multi=!1,this.activatable=!1,this.fixed=!1,this.forceGroupSelection=!1,this.fullwidth=!1,this.menuCorner="START",this.stayOpenOnBodyClick=!1,this.defaultFocus="LIST_ROOT",this._listUpdateComplete=null}get listElement(){return this.listElement_?this.listElement_:(this.listElement_=this.renderRoot.querySelector("mwc-list"),this.listElement_)}get items(){const t=this.listElement;return t?t.items:[]}get index(){const t=this.listElement;return t?t.index:-1}get selected(){const t=this.listElement;return t?t.selected:null}render(){const t=this.innerRole==="menu"?"menuitem":"option";return Lt`
      <mwc-menu-surface
          ?hidden=${!this.open}
          .anchor=${this.anchor}
          .open=${this.open}
          .quick=${this.quick}
          .corner=${this.corner}
          .x=${this.x}
          .y=${this.y}
          .absolute=${this.absolute}
          .fixed=${this.fixed}
          .fullwidth=${this.fullwidth}
          .menuCorner=${this.menuCorner}
          ?stayOpenOnBodyClick=${this.stayOpenOnBodyClick}
          class="mdc-menu mdc-menu-surface"
          @closed=${this.onClosed}
          @opened=${this.onOpened}
          @keydown=${this.onKeydown}>
        <mwc-list
          rootTabbable
          .innerRole=${this.innerRole}
          .multi=${this.multi}
          class="mdc-deprecated-list"
          .itemRoles=${t}
          .wrapFocus=${this.wrapFocus}
          .activatable=${this.activatable}
          @action=${this.onAction}>
        <slot></slot>
      </mwc-list>
    </mwc-menu-surface>`}createAdapter(){return{addClassToElementAtIndex:(t,i)=>{const n=this.listElement;if(!n)return;const o=n.items[t];!o||(i==="mdc-menu-item--selected"?this.forceGroupSelection&&!o.selected&&n.toggle(t,!0):o.classList.add(i))},removeClassFromElementAtIndex:(t,i)=>{const n=this.listElement;if(!n)return;const o=n.items[t];!o||(i==="mdc-menu-item--selected"?o.selected&&n.toggle(t,!1):o.classList.remove(i))},addAttributeToElementAtIndex:(t,i,n)=>{const o=this.listElement;if(!o)return;const l=o.items[t];!l||l.setAttribute(i,n)},removeAttributeFromElementAtIndex:(t,i)=>{const n=this.listElement;if(!n)return;const o=n.items[t];!o||o.removeAttribute(i)},elementContainsClass:(t,i)=>t.classList.contains(i),closeSurface:()=>{this.open=!1},getElementIndex:t=>{const i=this.listElement;return i?i.items.indexOf(t):-1},notifySelected:()=>{},getMenuItemCount:()=>{const t=this.listElement;return t?t.items.length:0},focusItemAtIndex:t=>{const i=this.listElement;if(!i)return;const n=i.items[t];n&&n.focus()},focusListRoot:()=>{this.listElement&&this.listElement.focus()},getSelectedSiblingOfItemAtIndex:t=>{const i=this.listElement;if(!i)return-1;const n=i.items[t];if(!n||!n.group)return-1;for(let o=0;o<i.items.length;o++){if(o===t)continue;const l=i.items[o];if(l.selected&&l.group===n.group)return o}return-1},isSelectableItemAtIndex:t=>{const i=this.listElement;if(!i)return!1;const n=i.items[t];return n?n.hasAttribute("group"):!1}}}onKeydown(t){this.mdcFoundation&&this.mdcFoundation.handleKeydown(t)}onAction(t){const i=this.listElement;if(this.mdcFoundation&&i){const n=t.detail.index,o=i.items[n];o&&this.mdcFoundation.handleItemAction(o)}}onOpened(){this.open=!0,this.mdcFoundation&&this.mdcFoundation.handleMenuSurfaceOpened()}onClosed(){this.open=!1}async getUpdateComplete(){return await this._listUpdateComplete,await super.getUpdateComplete()}async firstUpdated(){super.firstUpdated();const t=this.listElement;t&&(this._listUpdateComplete=t.updateComplete,await this._listUpdateComplete)}select(t){const i=this.listElement;i&&i.select(t)}close(){this.open=!1}show(){this.open=!0}getFocusedItemIndex(){const t=this.listElement;return t?t.getFocusedItemIndex():-1}focusItemAtIndex(t){const i=this.listElement;i&&i.focusItemAtIndex(t)}layout(t=!0){const i=this.listElement;i&&i.layout(t)}}z([vi(".mdc-menu")],Vn.prototype,"mdcRoot",void 0);z([vi("slot")],Vn.prototype,"slotElement",void 0);z([lt({type:Object})],Vn.prototype,"anchor",void 0);z([lt({type:Boolean,reflect:!0})],Vn.prototype,"open",void 0);z([lt({type:Boolean})],Vn.prototype,"quick",void 0);z([lt({type:Boolean})],Vn.prototype,"wrapFocus",void 0);z([lt({type:String})],Vn.prototype,"innerRole",void 0);z([lt({type:String})],Vn.prototype,"corner",void 0);z([lt({type:Number})],Vn.prototype,"x",void 0);z([lt({type:Number})],Vn.prototype,"y",void 0);z([lt({type:Boolean})],Vn.prototype,"absolute",void 0);z([lt({type:Boolean})],Vn.prototype,"multi",void 0);z([lt({type:Boolean})],Vn.prototype,"activatable",void 0);z([lt({type:Boolean})],Vn.prototype,"fixed",void 0);z([lt({type:Boolean})],Vn.prototype,"forceGroupSelection",void 0);z([lt({type:Boolean})],Vn.prototype,"fullwidth",void 0);z([lt({type:String})],Vn.prototype,"menuCorner",void 0);z([lt({type:Boolean})],Vn.prototype,"stayOpenOnBodyClick",void 0);z([lt({type:String}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setDefaultFocusState(sr[e])})],Vn.prototype,"defaultFocus",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const hy=bi`mwc-list ::slotted([mwc-list-item]:not([twoline])){height:var(--mdc-menu-item-height, 48px)}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ja=class extends Vn{};ja.styles=[hy];ja=z([Ni("mwc-menu")],ja);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var by=["input","button","textarea","select"],n0=function(e){var t=e.target;if(!!t){var i=(""+t.tagName).toLowerCase();by.indexOf(i)===-1&&e.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function py(){var e={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return e}function o0(e,t){for(var i=new Map,n=0;n<e;n++){var o=t(n).trim();if(!!o){var l=o[0].toLowerCase();i.has(l)||i.set(l,[]),i.get(l).push({text:o.toLowerCase(),index:n})}}return i.forEach(function(I){I.sort(function(m,Z){return m.index-Z.index})}),i}function _a(e,t){var i=e.nextChar,n=e.focusItemAtIndex,o=e.sortedIndexByFirstChar,l=e.focusedItemIndex,I=e.skipFocus,m=e.isItemAtIndexDisabled;clearTimeout(t.bufferClearTimeout),t.bufferClearTimeout=setTimeout(function(){Zy(t)},Qn.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),t.typeaheadBuffer=t.typeaheadBuffer+i;var Z;return t.typeaheadBuffer.length===1?Z=Ay(o,l,m,t):Z=yy(o,m,t),Z!==-1&&!I&&n(Z),Z}function Ay(e,t,i,n){var o=n.typeaheadBuffer[0],l=e.get(o);if(!l)return-1;if(o===n.currentFirstChar&&l[n.sortedIndexCursor].index===t){n.sortedIndexCursor=(n.sortedIndexCursor+1)%l.length;var I=l[n.sortedIndexCursor].index;if(!i(I))return I}n.currentFirstChar=o;var m=-1,Z;for(Z=0;Z<l.length;Z++)if(!i(l[Z].index)){m=Z;break}for(;Z<l.length;Z++)if(l[Z].index>t&&!i(l[Z].index)){m=Z;break}return m!==-1?(n.sortedIndexCursor=m,l[n.sortedIndexCursor].index):-1}function yy(e,t,i){var n=i.typeaheadBuffer[0],o=e.get(n);if(!o)return-1;var l=o[i.sortedIndexCursor];if(l.text.lastIndexOf(i.typeaheadBuffer,0)===0&&!t(l.index))return l.index;for(var I=(i.sortedIndexCursor+1)%o.length,m=-1;I!==i.sortedIndexCursor;){var Z=o[I],x=Z.text.lastIndexOf(i.typeaheadBuffer,0)===0,L=!t(Z.index);if(x&&L){m=I;break}I=(I+1)%o.length}return m!==-1?(i.sortedIndexCursor=m,o[i.sortedIndexCursor].index):-1}function Kh(e){return e.typeaheadBuffer.length>0}function Zy(e){e.typeaheadBuffer=""}function fy(e,t){var i=e.event,n=e.isTargetListItem,o=e.focusedItemIndex,l=e.focusItemAtIndex,I=e.sortedIndexByFirstChar,m=e.isItemAtIndexDisabled,Z=gn(i)==="ArrowLeft",x=gn(i)==="ArrowUp",L=gn(i)==="ArrowRight",K=gn(i)==="ArrowDown",st=gn(i)==="Home",ut=gn(i)==="End",P=gn(i)==="Enter",ct=gn(i)==="Spacebar";if(i.ctrlKey||i.metaKey||Z||x||L||K||st||ut||P)return-1;var Rt=!ct&&i.key.length===1;if(Rt){n0(i);var Bt={focusItemAtIndex:l,focusedItemIndex:o,nextChar:i.key.toLowerCase(),sortedIndexByFirstChar:I,skipFocus:!1,isItemAtIndexDisabled:m};return _a(Bt,t)}if(!ct)return-1;n&&n0(i);var Yt=n&&Kh(t);if(Yt){var Bt={focusItemAtIndex:l,focusedItemIndex:o,nextChar:" ",sortedIndexByFirstChar:I,skipFocus:!1,isItemAtIndexDisabled:m};return _a(Bt,t)}return-1}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Gy={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Vy=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.shakeAnimationEndHandler=function(){n.handleShakeAnimationEnd()},n}return Object.defineProperty(t,"cssClasses",{get:function(){return Gy},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(i){var n=t.cssClasses.LABEL_SHAKE;i?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.float=function(i){var n=t.cssClasses,o=n.LABEL_FLOAT_ABOVE,l=n.LABEL_SHAKE;i?this.adapter.addClass(o):(this.adapter.removeClass(o),this.adapter.removeClass(l))},t.prototype.setRequired=function(i){var n=t.cssClasses.LABEL_REQUIRED;i?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleShakeAnimationEnd=function(){var i=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(i)},t}(No);const Wy=e=>({addClass:t=>e.classList.add(t),removeClass:t=>e.classList.remove(t),getWidth:()=>e.scrollWidth,registerInteractionHandler:(t,i)=>{e.addEventListener(t,i)},deregisterInteractionHandler:(t,i)=>{e.removeEventListener(t,i)}});class By extends KI{constructor(t){switch(super(t),this.foundation=null,this.previousPart=null,t.type){case wo.ATTRIBUTE:case wo.PROPERTY:break;default:throw new Error("FloatingLabel directive only support attribute and property parts")}}update(t,[i]){if(t!==this.previousPart){this.foundation&&this.foundation.destroy(),this.previousPart=t;const n=t.element;n.classList.add("mdc-floating-label");const o=Wy(n);this.foundation=new Vy(o),this.foundation.init()}return this.render(i)}render(t){return this.foundation}}const Xy=Cd(By);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _s={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ry=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.transitionEndHandler=function(o){n.handleTransitionEnd(o)},n}return Object.defineProperty(t,"cssClasses",{get:function(){return _s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},t.prototype.activate=function(){this.adapter.removeClass(_s.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(_s.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(i){this.adapter.setStyle("transform-origin",i+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(_s.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(i){var n=this.adapter.hasClass(_s.LINE_RIPPLE_DEACTIVATING);i.propertyName==="opacity"&&n&&(this.adapter.removeClass(_s.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(_s.LINE_RIPPLE_DEACTIVATING))},t}(No);const vy=e=>({addClass:t=>e.classList.add(t),removeClass:t=>e.classList.remove(t),hasClass:t=>e.classList.contains(t),setStyle:(t,i)=>e.style.setProperty(t,i),registerEventHandler:(t,i)=>{e.addEventListener(t,i)},deregisterEventHandler:(t,i)=>{e.removeEventListener(t,i)}});class Sy extends KI{constructor(t){switch(super(t),this.previousPart=null,this.foundation=null,t.type){case wo.ATTRIBUTE:case wo.PROPERTY:return;default:throw new Error("LineRipple only support attribute and property parts.")}}update(t,i){if(this.previousPart!==t){this.foundation&&this.foundation.destroy(),this.previousPart=t;const n=t.element;n.classList.add("mdc-line-ripple");const o=vy(n);this.foundation=new Ry(o),this.foundation.init()}return this.render()}render(){return this.foundation}}const wy=Cd(Sy);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var qi={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},na={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},Ps={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Fy=function(e){xo(t,e);function t(i,n){n===void 0&&(n={});var o=e.call(this,on(on({},t.defaultAdapter),i))||this;return o.disabled=!1,o.isMenuOpen=!1,o.useDefaultValidation=!0,o.customValidity=!0,o.lastSelectedIndex=Ps.UNSET_INDEX,o.clickDebounceTimeout=0,o.recentlyClicked=!1,o.leadingIcon=n.leadingIcon,o.helperText=n.helperText,o}return Object.defineProperty(t,"cssClasses",{get:function(){return qi},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Ps},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return na},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),t.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},t.prototype.setSelectedIndex=function(i,n,o){n===void 0&&(n=!1),o===void 0&&(o=!1),!(i>=this.adapter.getMenuItemCount())&&(i===Ps.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(i).trim()),this.adapter.setSelectedIndex(i),n&&this.adapter.closeMenu(),!o&&this.lastSelectedIndex!==i&&this.handleChange(),this.lastSelectedIndex=i)},t.prototype.setValue=function(i,n){n===void 0&&(n=!1);var o=this.adapter.getMenuItemValues().indexOf(i);this.setSelectedIndex(o,!1,n)},t.prototype.getValue=function(){var i=this.adapter.getSelectedIndex(),n=this.adapter.getMenuItemValues();return i!==Ps.UNSET_INDEX?n[i]:""},t.prototype.getDisabled=function(){return this.disabled},t.prototype.setDisabled=function(i){this.disabled=i,this.disabled?(this.adapter.addClass(qi.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(qi.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},t.prototype.openMenu=function(){this.adapter.addClass(qi.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},t.prototype.setHelperTextContent=function(i){this.helperText&&this.helperText.setContent(i)},t.prototype.layout=function(){if(this.adapter.hasLabel()){var i=this.getValue().length>0,n=this.adapter.hasClass(qi.FOCUSED),o=i||n,l=this.adapter.hasClass(qi.REQUIRED);this.notchOutline(o),this.adapter.floatLabel(o),this.adapter.setLabelRequired(l)}},t.prototype.layoutOptions=function(){var i=this.adapter.getMenuItemValues(),n=i.indexOf(this.getValue());this.setSelectedIndex(n,!1,!0)},t.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var i=this.getSelectedIndex(),n=i>=0?i:0;this.adapter.focusMenuItemAtIndex(n)}},t.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},t.prototype.handleMenuClosed=function(){this.adapter.removeClass(qi.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},t.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var i=this.adapter.hasClass(qi.REQUIRED);i&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.handleMenuItemAction=function(i){this.setSelectedIndex(i,!0)},t.prototype.handleFocus=function(){this.adapter.addClass(qi.FOCUSED),this.layout(),this.adapter.activateBottomLine()},t.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},t.prototype.handleClick=function(i){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(i),this.openMenu()}},t.prototype.handleKeydown=function(i){if(!(this.isMenuOpen||!this.adapter.hasClass(qi.FOCUSED))){var n=gn(i)===We.ENTER,o=gn(i)===We.SPACEBAR,l=gn(i)===We.ARROW_UP,I=gn(i)===We.ARROW_DOWN,m=i.ctrlKey||i.metaKey;if(!m&&(!o&&i.key&&i.key.length===1||o&&this.adapter.isTypeaheadInProgress())){var Z=o?" ":i.key,x=this.adapter.typeaheadMatchItem(Z,this.getSelectedIndex());x>=0&&this.setSelectedIndex(x),i.preventDefault();return}!n&&!o&&!l&&!I||(l&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):I&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),i.preventDefault())}},t.prototype.notchOutline=function(i){if(!!this.adapter.hasOutline()){var n=this.adapter.hasClass(qi.FOCUSED);if(i){var o=Ps.LABEL_SCALE,l=this.adapter.getLabelWidth()*o;this.adapter.notchOutline(l)}else n||this.adapter.closeOutline()}},t.prototype.setLeadingIconAriaLabel=function(i){this.leadingIcon&&this.leadingIcon.setAriaLabel(i)},t.prototype.setLeadingIconContent=function(i){this.leadingIcon&&this.leadingIcon.setContent(i)},t.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},t.prototype.setUseDefaultValidation=function(i){this.useDefaultValidation=i},t.prototype.setValid=function(i){this.useDefaultValidation||(this.customValidity=i),this.adapter.setSelectAnchorAttr("aria-invalid",(!i).toString()),i?(this.adapter.removeClass(qi.INVALID),this.adapter.removeMenuClass(qi.MENU_INVALID)):(this.adapter.addClass(qi.INVALID),this.adapter.addMenuClass(qi.MENU_INVALID)),this.syncHelperTextValidity(i)},t.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(qi.REQUIRED)&&!this.adapter.hasClass(qi.DISABLED)?this.getSelectedIndex()!==Ps.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},t.prototype.setRequired=function(i){i?this.adapter.addClass(qi.REQUIRED):this.adapter.removeClass(qi.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",i.toString()),this.adapter.setLabelRequired(i)},t.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},t.prototype.init=function(){var i=this.adapter.getAnchorElement();i&&(this.adapter.setMenuAnchorElement(i),this.adapter.setMenuAnchorCorner(Dn.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(qi.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(qi.INVALID)),this.layout(),this.layoutOptions()},t.prototype.blur=function(){this.adapter.removeClass(qi.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var i=this.adapter.hasClass(qi.REQUIRED);i&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.syncHelperTextValidity=function(i){if(!!this.helperText){this.helperText.setValidity(i);var n=this.helperText.isVisible(),o=this.helperText.getId();n&&o?this.adapter.setSelectAnchorAttr(na.ARIA_DESCRIBEDBY,o):this.adapter.removeSelectAnchorAttr(na.ARIA_DESCRIBEDBY)}},t.prototype.setClickDebounceTimeout=function(){var i=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){i.recentlyClicked=!1},Ps.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},t}(No),Hy=Fy;const s0=(e={})=>{const t={};for(const i in e)t[i]=e[i];return Object.assign({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1},t)};class Ai extends UI{constructor(){super(...arguments),this.mdcFoundationClass=Hy,this.disabled=!1,this.outlined=!1,this.label="",this.outlineOpen=!1,this.outlineWidth=0,this.value="",this.selectedText="",this.icon="",this.menuOpen=!1,this.helper="",this.validateOnInitialRender=!1,this.validationMessage="",this.required=!1,this.naturalMenuWidth=!1,this.isUiValid=!0,this.fixedMenuPosition=!1,this.typeaheadState=py(),this.sortedIndexByFirstChar=new Map,this.menuElement_=null,this.listeners=[],this.onBodyClickBound=()=>{},this._menuUpdateComplete=null,this.valueSetDirectly=!1,this.validityTransform=null,this._validity=s0()}get items(){return this.menuElement_||(this.menuElement_=this.menuElement),this.menuElement_?this.menuElement_.items:[]}get selected(){const t=this.menuElement;return t?t.selected:null}get index(){const t=this.menuElement;return t?t.index:-1}get shouldRenderHelperText(){return!!this.helper||!!this.validationMessage}get validity(){return this._checkValidity(this.value),this._validity}render(){const t={"mdc-select--disabled":this.disabled,"mdc-select--no-label":!this.label,"mdc-select--filled":!this.outlined,"mdc-select--outlined":this.outlined,"mdc-select--with-leading-icon":!!this.icon,"mdc-select--required":this.required,"mdc-select--invalid":!this.isUiValid},i={"mdc-select__menu--invalid":!this.isUiValid},n=this.label?"label":void 0,o=this.shouldRenderHelperText?"helper-text":void 0;return Lt`
      <div
          class="mdc-select ${In(t)}">
        <input
            class="formElement"
            .value=${this.value}
            hidden
            ?required=${this.required}>
        <!-- @ts-ignore -->
        <div class="mdc-select__anchor"
            aria-autocomplete="none"
            role="combobox"
            aria-expanded=${this.menuOpen}
            aria-invalid=${!this.isUiValid}
            aria-haspopup="listbox"
            aria-labelledby=${Do(n)}
            aria-required=${this.required}
            aria-describedby=${Do(o)}
            @click=${this.onClick}
            @focus=${this.onFocus}
            @blur=${this.onBlur}
            @keydown=${this.onKeydown}>
          ${this.renderRipple()}
          ${this.outlined?this.renderOutline():this.renderLabel()}
          ${this.renderLeadingIcon()}
          <span class="mdc-select__selected-text-container">
            <span class="mdc-select__selected-text">${this.selectedText}</span>
          </span>
          <span class="mdc-select__dropdown-icon">
            <svg
                class="mdc-select__dropdown-icon-graphic"
                viewBox="7 10 10 5"
                focusable="false">
              <polygon
                  class="mdc-select__dropdown-icon-inactive"
                  stroke="none"
                  fill-rule="evenodd"
                  points="7 10 12 15 17 10">
              </polygon>
              <polygon
                  class="mdc-select__dropdown-icon-active"
                  stroke="none"
                  fill-rule="evenodd"
                  points="7 15 12 10 17 15">
              </polygon>
            </svg>
          </span>
          ${this.renderLineRipple()}
        </div>
        <mwc-menu
            innerRole="listbox"
            wrapFocus
            class="mdc-select__menu mdc-menu mdc-menu-surface ${In(i)}"
            activatable
            .fullwidth=${this.fixedMenuPosition?!1:!this.naturalMenuWidth}
            .open=${this.menuOpen}
            .anchor=${this.anchorElement}
            .fixed=${this.fixedMenuPosition}
            @selected=${this.onSelected}
            @opened=${this.onOpened}
            @closed=${this.onClosed}
            @items-updated=${this.onItemsUpdated}
            @keydown=${this.handleTypeahead}>
          <slot></slot>
        </mwc-menu>
      </div>
      ${this.renderHelperText()}`}renderRipple(){return this.outlined?Uo:Lt`
      <span class="mdc-select__ripple"></span>
    `}renderOutline(){return this.outlined?Lt`
      <mwc-notched-outline
          .width=${this.outlineWidth}
          .open=${this.outlineOpen}
          class="mdc-notched-outline">
        ${this.renderLabel()}
      </mwc-notched-outline>`:Uo}renderLabel(){return this.label?Lt`
      <span
          .floatingLabelFoundation=${Xy(this.label)}
          id="label">${this.label}</span>
    `:Uo}renderLeadingIcon(){return this.icon?Lt`<mwc-icon class="mdc-select__icon"><div>${this.icon}</div></mwc-icon>`:Uo}renderLineRipple(){return this.outlined?Uo:Lt`
      <span .lineRippleFoundation=${wy()}></span>
    `}renderHelperText(){if(!this.shouldRenderHelperText)return Uo;const t=this.validationMessage&&!this.isUiValid;return Lt`
        <p
          class="mdc-select-helper-text ${In({"mdc-select-helper-text--validation-msg":t})}"
          id="helper-text">${t?this.validationMessage:this.helper}</p>`}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{activateBottomLine:()=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.activate()},deactivateBottomLine:()=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.deactivate()},hasLabel:()=>!!this.label,floatLabel:t=>{this.labelElement&&this.labelElement.floatingLabelFoundation.float(t)},getLabelWidth:()=>this.labelElement?this.labelElement.floatingLabelFoundation.getWidth():0,setLabelRequired:t=>{this.labelElement&&this.labelElement.floatingLabelFoundation.setRequired(t)},hasOutline:()=>this.outlined,notchOutline:t=>{this.outlineElement&&!this.outlineOpen&&(this.outlineWidth=t,this.outlineOpen=!0)},closeOutline:()=>{this.outlineElement&&(this.outlineOpen=!1)},setRippleCenter:t=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.setRippleCenter(t)},notifyChange:async t=>{if(!this.valueSetDirectly&&t===this.value)return;this.valueSetDirectly=!1,this.value=t,await this.updateComplete;const i=new Event("change",{bubbles:!0});this.dispatchEvent(i)},setSelectedText:t=>this.selectedText=t,isSelectAnchorFocused:()=>{const t=this.anchorElement;return t?t.getRootNode().activeElement===t:!1},getSelectAnchorAttr:t=>{const i=this.anchorElement;return i?i.getAttribute(t):null},setSelectAnchorAttr:(t,i)=>{const n=this.anchorElement;!n||n.setAttribute(t,i)},removeSelectAnchorAttr:t=>{const i=this.anchorElement;!i||i.removeAttribute(t)},openMenu:()=>{this.menuOpen=!0},closeMenu:()=>{this.menuOpen=!1},addMenuClass:()=>{},removeMenuClass:()=>{},getAnchorElement:()=>this.anchorElement,setMenuAnchorElement:()=>{},setMenuAnchorCorner:()=>{const t=this.menuElement;t&&(t.corner="BOTTOM_START")},setMenuWrapFocus:t=>{const i=this.menuElement;i&&(i.wrapFocus=t)},focusMenuItemAtIndex:t=>{const i=this.menuElement;if(!i)return;const n=i.items[t];!n||n.focus()},getMenuItemCount:()=>{const t=this.menuElement;return t?t.items.length:0},getMenuItemValues:()=>{const t=this.menuElement;return t?t.items.map(n=>n.value):[]},getMenuItemTextAtIndex:t=>{const i=this.menuElement;if(!i)return"";const n=i.items[t];return n?n.text:""},getSelectedIndex:()=>this.index,setSelectedIndex:()=>{},isTypeaheadInProgress:()=>Kh(this.typeaheadState),typeaheadMatchItem:(t,i)=>{if(!this.menuElement)return-1;const n={focusItemAtIndex:l=>{this.menuElement.focusItemAtIndex(l)},focusedItemIndex:i||this.menuElement.getFocusedItemIndex(),nextChar:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:!1,isItemAtIndexDisabled:l=>this.items[l].disabled},o=_a(n,this.typeaheadState);return o!==-1&&this.select(o),o}})}checkValidity(){const t=this._checkValidity(this.value);if(!t){const i=new Event("invalid",{bubbles:!1,cancelable:!0});this.dispatchEvent(i)}return t}reportValidity(){const t=this.checkValidity();return this.isUiValid=t,t}_checkValidity(t){const i=this.formElement.validity;let n=s0(i);if(this.validityTransform){const o=this.validityTransform(t,n);n=Object.assign(Object.assign({},n),o)}return this._validity=n,this._validity.valid}setCustomValidity(t){this.validationMessage=t,this.formElement.setCustomValidity(t)}async getUpdateComplete(){return await this._menuUpdateComplete,await super.getUpdateComplete()}async firstUpdated(){const t=this.menuElement;if(t&&(this._menuUpdateComplete=t.updateComplete,await this._menuUpdateComplete),super.firstUpdated(),this.mdcFoundation.isValid=()=>!0,this.mdcFoundation.setValid=()=>{},this.mdcFoundation.setDisabled(this.disabled),this.validateOnInitialRender&&this.reportValidity(),!this.selected){!this.items.length&&this.slotElement&&this.slotElement.assignedNodes({flatten:!0}).length&&(await new Promise(n=>requestAnimationFrame(n)),await this.layout());const i=this.items.length&&this.items[0].value==="";if(!this.value&&i){this.select(0);return}this.selectByValue(this.value)}this.sortedIndexByFirstChar=o0(this.items.length,i=>this.items[i].text)}onItemsUpdated(){this.sortedIndexByFirstChar=o0(this.items.length,t=>this.items[t].text)}select(t){const i=this.menuElement;i&&i.select(t)}selectByValue(t){let i=-1;for(let n=0;n<this.items.length;n++)if(this.items[n].value===t){i=n;break}this.valueSetDirectly=!0,this.select(i),this.mdcFoundation.handleChange()}disconnectedCallback(){super.disconnectedCallback();for(const t of this.listeners)t.target.removeEventListener(t.name,t.cb)}focus(){const t=new CustomEvent("focus"),i=this.anchorElement;i&&(i.dispatchEvent(t),i.focus())}blur(){const t=new CustomEvent("blur"),i=this.anchorElement;i&&(i.dispatchEvent(t),i.blur())}onFocus(){this.mdcFoundation&&this.mdcFoundation.handleFocus()}onBlur(){this.mdcFoundation&&this.mdcFoundation.handleBlur();const t=this.menuElement;t&&!t.open&&this.reportValidity()}onClick(t){if(this.mdcFoundation){this.focus();const i=t.target.getBoundingClientRect();let n=0;"touches"in t?n=t.touches[0].clientX:n=t.clientX;const o=n-i.left;this.mdcFoundation.handleClick(o)}}onKeydown(t){const i=gn(t)===We.ARROW_UP,n=gn(t)===We.ARROW_DOWN;if(n||i){const o=i&&this.index>0,l=n&&this.index<this.items.length-1;o?this.select(this.index-1):l&&this.select(this.index+1),t.preventDefault(),this.mdcFoundation.openMenu();return}this.mdcFoundation.handleKeydown(t)}handleTypeahead(t){if(!this.menuElement)return;const i=this.menuElement.getFocusedItemIndex(),n=Sh(t.target)?t.target:null,o=n?n.hasAttribute("mwc-list-item"):!1,l={event:t,focusItemAtIndex:I=>{this.menuElement.focusItemAtIndex(I)},focusedItemIndex:i,isTargetListItem:o,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:I=>this.items[I].disabled};fy(l,this.typeaheadState)}async onSelected(t){this.mdcFoundation||await this.updateComplete,this.mdcFoundation.handleMenuItemAction(t.detail.index);const i=this.items[t.detail.index];i&&(this.value=i.value)}onOpened(){this.mdcFoundation&&(this.menuOpen=!0,this.mdcFoundation.handleMenuOpened())}onClosed(){this.mdcFoundation&&(this.menuOpen=!1,this.mdcFoundation.handleMenuClosed())}async layout(t=!0){this.mdcFoundation&&this.mdcFoundation.layout(),await this.updateComplete;const i=this.menuElement;i&&i.layout(t);const n=this.labelElement;if(!n){this.outlineOpen=!1;return}const o=!!this.label&&!!this.value;if(n.floatingLabelFoundation.float(o),!this.outlined)return;this.outlineOpen=o,await this.updateComplete;const l=n.floatingLabelFoundation.getWidth();this.outlineOpen&&(this.outlineWidth=l)}async layoutOptions(){!this.mdcFoundation||this.mdcFoundation.layoutOptions()}}z([vi(".mdc-select")],Ai.prototype,"mdcRoot",void 0);z([vi(".formElement")],Ai.prototype,"formElement",void 0);z([vi("slot")],Ai.prototype,"slotElement",void 0);z([vi("select")],Ai.prototype,"nativeSelectElement",void 0);z([vi("input")],Ai.prototype,"nativeInputElement",void 0);z([vi(".mdc-line-ripple")],Ai.prototype,"lineRippleElement",void 0);z([vi(".mdc-floating-label")],Ai.prototype,"labelElement",void 0);z([vi("mwc-notched-outline")],Ai.prototype,"outlineElement",void 0);z([vi(".mdc-menu")],Ai.prototype,"menuElement",void 0);z([vi(".mdc-select__anchor")],Ai.prototype,"anchorElement",void 0);z([lt({type:Boolean,attribute:"disabled",reflect:!0}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setDisabled(e)})],Ai.prototype,"disabled",void 0);z([lt({type:Boolean}),pi(function(e,t){t!==void 0&&this.outlined!==t&&this.layout(!1)})],Ai.prototype,"outlined",void 0);z([lt({type:String}),pi(function(e,t){t!==void 0&&this.label!==t&&this.layout(!1)})],Ai.prototype,"label",void 0);z([Ri()],Ai.prototype,"outlineOpen",void 0);z([Ri()],Ai.prototype,"outlineWidth",void 0);z([lt({type:String}),pi(function(e){if(this.mdcFoundation){const t=this.selected===null&&!!e,i=this.selected&&this.selected.value!==e;(t||i)&&this.selectByValue(e),this.reportValidity()}})],Ai.prototype,"value",void 0);z([Ri()],Ai.prototype,"selectedText",void 0);z([lt({type:String})],Ai.prototype,"icon",void 0);z([Ri()],Ai.prototype,"menuOpen",void 0);z([lt({type:String})],Ai.prototype,"helper",void 0);z([lt({type:Boolean})],Ai.prototype,"validateOnInitialRender",void 0);z([lt({type:String})],Ai.prototype,"validationMessage",void 0);z([lt({type:Boolean})],Ai.prototype,"required",void 0);z([lt({type:Boolean})],Ai.prototype,"naturalMenuWidth",void 0);z([Ri()],Ai.prototype,"isUiValid",void 0);z([lt({type:Boolean})],Ai.prototype,"fixedMenuPosition",void 0);z([hl({capture:!0})],Ai.prototype,"handleTypeahead",null);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const Uh=bi`.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-subtitle1-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size, 1rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight, 400);letter-spacing:0.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing, 0.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform, inherit);position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform;transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required::after,.mdc-floating-label--required[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px;z-index:1}.mdc-line-ripple::after{transform:scaleX(0);border-bottom-width:2px;opacity:0;z-index:2}.mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(100% / 0.75)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-select{display:inline-flex;position:relative}.mdc-select:not(.mdc-select--disabled) .mdc-select__selected-text{color:rgba(0, 0, 0, 0.87)}.mdc-select.mdc-select--disabled .mdc-select__selected-text{color:rgba(0, 0, 0, 0.38)}.mdc-select:not(.mdc-select--disabled) .mdc-floating-label{color:rgba(0, 0, 0, 0.6)}.mdc-select:not(.mdc-select--disabled).mdc-select--focused .mdc-floating-label{color:rgba(98, 0, 238, 0.87)}.mdc-select.mdc-select--disabled .mdc-floating-label{color:rgba(0, 0, 0, 0.38)}.mdc-select:not(.mdc-select--disabled) .mdc-select__dropdown-icon{fill:rgba(0, 0, 0, 0.54)}.mdc-select:not(.mdc-select--disabled).mdc-select--focused .mdc-select__dropdown-icon{fill:#6200ee;fill:var(--mdc-theme-primary, #6200ee)}.mdc-select.mdc-select--disabled .mdc-select__dropdown-icon{fill:rgba(0, 0, 0, 0.38)}.mdc-select:not(.mdc-select--disabled)+.mdc-select-helper-text{color:rgba(0, 0, 0, 0.6)}.mdc-select.mdc-select--disabled+.mdc-select-helper-text{color:rgba(0, 0, 0, 0.38)}.mdc-select:not(.mdc-select--disabled) .mdc-select__icon{color:rgba(0, 0, 0, 0.54)}.mdc-select.mdc-select--disabled .mdc-select__icon{color:rgba(0, 0, 0, 0.38)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-select.mdc-select--disabled .mdc-select__selected-text{color:GrayText}.mdc-select.mdc-select--disabled .mdc-select__dropdown-icon{fill:red}.mdc-select.mdc-select--disabled .mdc-floating-label{color:GrayText}.mdc-select.mdc-select--disabled .mdc-line-ripple::before{border-bottom-color:GrayText}.mdc-select.mdc-select--disabled .mdc-notched-outline__leading,.mdc-select.mdc-select--disabled .mdc-notched-outline__notch,.mdc-select.mdc-select--disabled .mdc-notched-outline__trailing{border-color:GrayText}.mdc-select.mdc-select--disabled .mdc-select__icon{color:GrayText}.mdc-select.mdc-select--disabled+.mdc-select-helper-text{color:GrayText}}.mdc-select .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-select .mdc-select__anchor{padding-left:16px;padding-right:0}[dir=rtl] .mdc-select .mdc-select__anchor,.mdc-select .mdc-select__anchor[dir=rtl]{padding-left:0;padding-right:16px}.mdc-select.mdc-select--with-leading-icon .mdc-select__anchor{padding-left:0;padding-right:0}[dir=rtl] .mdc-select.mdc-select--with-leading-icon .mdc-select__anchor,.mdc-select.mdc-select--with-leading-icon .mdc-select__anchor[dir=rtl]{padding-left:0;padding-right:0}.mdc-select .mdc-select__icon{width:24px;height:24px;font-size:24px}.mdc-select .mdc-select__dropdown-icon{width:24px;height:24px}.mdc-select .mdc-select__menu .mdc-deprecated-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-select .mdc-select__menu .mdc-deprecated-list-item,.mdc-select .mdc-select__menu .mdc-deprecated-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-select .mdc-select__menu .mdc-deprecated-list-item__graphic{margin-left:0;margin-right:12px}[dir=rtl] .mdc-select .mdc-select__menu .mdc-deprecated-list-item__graphic,.mdc-select .mdc-select__menu .mdc-deprecated-list-item__graphic[dir=rtl]{margin-left:12px;margin-right:0}.mdc-select__dropdown-icon{margin-left:12px;margin-right:12px;display:inline-flex;position:relative;align-self:center;align-items:center;justify-content:center;flex-shrink:0;pointer-events:none}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-active,.mdc-select__dropdown-icon .mdc-select__dropdown-icon-inactive{position:absolute;top:0;left:0}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-graphic{width:41.6666666667%;height:20.8333333333%}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-inactive{opacity:1;transition:opacity 75ms linear 75ms}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-active{opacity:0;transition:opacity 75ms linear}[dir=rtl] .mdc-select__dropdown-icon,.mdc-select__dropdown-icon[dir=rtl]{margin-left:12px;margin-right:12px}.mdc-select--activated .mdc-select__dropdown-icon .mdc-select__dropdown-icon-inactive{opacity:0;transition:opacity 49.5ms linear}.mdc-select--activated .mdc-select__dropdown-icon .mdc-select__dropdown-icon-active{opacity:1;transition:opacity 100.5ms linear 49.5ms}.mdc-select__anchor{width:200px;min-width:0;flex:1 1 auto;position:relative;box-sizing:border-box;overflow:hidden;outline:none;cursor:pointer}.mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-select__selected-text-container{display:flex;appearance:none;pointer-events:none;box-sizing:border-box;width:auto;min-width:0;flex-grow:1;height:28px;border:none;outline:none;padding:0;background-color:transparent;color:inherit}.mdc-select__selected-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-subtitle1-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size, 1rem);line-height:1.75rem;line-height:var(--mdc-typography-subtitle1-line-height, 1.75rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight, 400);letter-spacing:0.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing, 0.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform, inherit);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;width:100%;text-align:left}[dir=rtl] .mdc-select__selected-text,.mdc-select__selected-text[dir=rtl]{text-align:right}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-floating-label{color:#b00020;color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-floating-label{color:#b00020;color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--invalid+.mdc-select-helper-text--validation-msg{color:#b00020;color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-select__dropdown-icon{fill:#b00020;fill:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-select__dropdown-icon{fill:#b00020;fill:var(--mdc-theme-error, #b00020)}.mdc-select--disabled{cursor:default;pointer-events:none}.mdc-select--with-leading-icon .mdc-select__menu .mdc-deprecated-list-item{padding-left:12px;padding-right:12px}[dir=rtl] .mdc-select--with-leading-icon .mdc-select__menu .mdc-deprecated-list-item,.mdc-select--with-leading-icon .mdc-select__menu .mdc-deprecated-list-item[dir=rtl]{padding-left:12px;padding-right:12px}.mdc-select__menu .mdc-deprecated-list .mdc-select__icon{margin-left:0;margin-right:0}[dir=rtl] .mdc-select__menu .mdc-deprecated-list .mdc-select__icon,.mdc-select__menu .mdc-deprecated-list .mdc-select__icon[dir=rtl]{margin-left:0;margin-right:0}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--activated{color:#000;color:var(--mdc-theme-on-surface, #000)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-deprecated-list-item__graphic,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--activated .mdc-deprecated-list-item__graphic{color:#000;color:var(--mdc-theme-on-surface, #000)}.mdc-select--filled .mdc-select__anchor{height:56px;display:flex;align-items:baseline}.mdc-select--filled .mdc-select__anchor::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-select--filled.mdc-select--no-label .mdc-select__anchor .mdc-select__selected-text::before{content:""}.mdc-select--filled.mdc-select--no-label .mdc-select__anchor .mdc-select__selected-text-container{height:100%;display:inline-flex;align-items:center}.mdc-select--filled.mdc-select--no-label .mdc-select__anchor::before{display:none}.mdc-select--filled .mdc-select__anchor{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-select--filled:not(.mdc-select--disabled) .mdc-select__anchor{background-color:whitesmoke}.mdc-select--filled.mdc-select--disabled .mdc-select__anchor{background-color:#fafafa}.mdc-select--filled:not(.mdc-select--disabled) .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.42)}.mdc-select--filled:not(.mdc-select--disabled):hover .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.87)}.mdc-select--filled:not(.mdc-select--disabled) .mdc-line-ripple::after{border-bottom-color:#6200ee;border-bottom-color:var(--mdc-theme-primary, #6200ee)}.mdc-select--filled.mdc-select--disabled .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.06)}.mdc-select--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-select--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-select--filled .mdc-menu-surface--is-open-below{border-top-left-radius:0px;border-top-right-radius:0px}.mdc-select--filled.mdc-select--focused.mdc-line-ripple::after{transform:scale(1, 2);opacity:1}.mdc-select--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-select--filled .mdc-floating-label,.mdc-select--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label{left:48px;right:initial}[dir=rtl] .mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label,.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-line-ripple::before{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled):hover .mdc-line-ripple::before{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-line-ripple::after{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error, #b00020)}.mdc-select--outlined{border:none}.mdc-select--outlined .mdc-select__anchor{height:56px}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined-56px 250ms 1}@keyframes mdc-floating-label-shake-float-above-select-outlined-56px{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px)) * 2)}}.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-select--outlined .mdc-select__anchor{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-select--outlined .mdc-select__anchor,.mdc-select--outlined .mdc-select__anchor[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-select--outlined .mdc-select__anchor,.mdc-select--outlined .mdc-select__anchor[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-select--outlined+.mdc-select-helper-text{margin-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-select--outlined+.mdc-select-helper-text,.mdc-select--outlined+.mdc-select-helper-text[dir=rtl]{margin-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-select--outlined+.mdc-select-helper-text,.mdc-select--outlined+.mdc-select-helper-text[dir=rtl]{margin-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-select--outlined:not(.mdc-select--disabled) .mdc-select__anchor{background-color:transparent}.mdc-select--outlined.mdc-select--disabled .mdc-select__anchor{background-color:transparent}.mdc-select--outlined:not(.mdc-select--disabled) .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled) .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled) .mdc-notched-outline__trailing{border-color:rgba(0, 0, 0, 0.38)}.mdc-select--outlined:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:rgba(0, 0, 0, 0.87)}.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:2px}.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#6200ee;border-color:var(--mdc-theme-primary, #6200ee)}.mdc-select--outlined.mdc-select--disabled .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--disabled .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--disabled .mdc-notched-outline__trailing{border-color:rgba(0, 0, 0, 0.06)}.mdc-select--outlined .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-select--outlined .mdc-select__anchor{display:flex;align-items:baseline;overflow:visible}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined 250ms 1}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-select--outlined .mdc-select__anchor .mdc-select__selected-text::before{content:""}.mdc-select--outlined .mdc-select__anchor .mdc-select__selected-text-container{height:100%;display:inline-flex;align-items:center}.mdc-select--outlined .mdc-select__anchor::before{display:none}.mdc-select--outlined .mdc-select__selected-text-container{display:flex;border:none;z-index:1;background-color:transparent}.mdc-select--outlined .mdc-select__icon{z-index:2}.mdc-select--outlined .mdc-floating-label{line-height:1.15rem;left:4px;right:initial}[dir=rtl] .mdc-select--outlined .mdc-floating-label,.mdc-select--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-select--outlined.mdc-select--focused .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled) .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled) .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled) .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error, #b00020)}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error, #b00020)}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:2px}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error, #b00020)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label,.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above{font-size:.75rem}.mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px 250ms 1}@keyframes mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--shake,.mdc-select--outlined.mdc-select--with-leading-icon[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px 250ms 1}@keyframes mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 96px)}.mdc-select--outlined .mdc-menu-surface{margin-bottom:8px}.mdc-select--outlined.mdc-select--no-label .mdc-menu-surface,.mdc-select--outlined .mdc-menu-surface--is-open-below{margin-bottom:0}.mdc-select__anchor{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0);will-change:transform,opacity}.mdc-select__anchor .mdc-select__ripple::before,.mdc-select__anchor .mdc-select__ripple::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-select__anchor .mdc-select__ripple::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index, 1)}.mdc-select__anchor .mdc-select__ripple::after{z-index:0;z-index:var(--mdc-ripple-z-index, 0)}.mdc-select__anchor.mdc-ripple-upgraded .mdc-select__ripple::before{transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-select__anchor.mdc-ripple-upgraded .mdc-select__ripple::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-select__anchor.mdc-ripple-upgraded--unbounded .mdc-select__ripple::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-select__anchor.mdc-ripple-upgraded--foreground-activation .mdc-select__ripple::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-select__anchor.mdc-ripple-upgraded--foreground-deactivation .mdc-select__ripple::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-select__anchor .mdc-select__ripple::before,.mdc-select__anchor .mdc-select__ripple::after{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-select__anchor.mdc-ripple-upgraded .mdc-select__ripple::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-select__anchor .mdc-select__ripple::before,.mdc-select__anchor .mdc-select__ripple::after{background-color:rgba(0, 0, 0, 0.87);background-color:var(--mdc-ripple-color, rgba(0, 0, 0, 0.87))}.mdc-select__anchor:hover .mdc-select__ripple::before,.mdc-select__anchor.mdc-ripple-surface--hover .mdc-select__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-select__anchor.mdc-ripple-upgraded--background-focused .mdc-select__ripple::before,.mdc-select__anchor:not(.mdc-ripple-upgraded):focus .mdc-select__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-select__anchor .mdc-select__ripple{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-deprecated-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-deprecated-list-item__ripple::after{background-color:#000;background-color:var(--mdc-ripple-color, var(--mdc-theme-on-surface, #000))}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:hover .mdc-deprecated-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-surface--hover .mdc-deprecated-list-item__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-upgraded--background-focused .mdc-deprecated-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded):focus .mdc-deprecated-list-item__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded) .mdc-deprecated-list-item__ripple::after{transition:opacity 150ms linear}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded):active .mdc-deprecated-list-item__ripple::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-list-item__ripple::after{background-color:#000;background-color:var(--mdc-ripple-color, var(--mdc-theme-on-surface, #000))}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:hover .mdc-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-surface--hover .mdc-list-item__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-upgraded--background-focused .mdc-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded):focus .mdc-list-item__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded) .mdc-list-item__ripple::after{transition:opacity 150ms linear}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded):active .mdc-list-item__ripple::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-select-helper-text{margin:0;margin-left:16px;margin-right:16px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-caption-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.75rem;font-size:var(--mdc-typography-caption-font-size, 0.75rem);line-height:1.25rem;line-height:var(--mdc-typography-caption-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-caption-font-weight, 400);letter-spacing:0.0333333333em;letter-spacing:var(--mdc-typography-caption-letter-spacing, 0.0333333333em);text-decoration:inherit;text-decoration:var(--mdc-typography-caption-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-caption-text-transform, inherit);display:block;margin-top:0;line-height:normal}[dir=rtl] .mdc-select-helper-text,.mdc-select-helper-text[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-select-helper-text::before{display:inline-block;width:0;height:16px;content:"";vertical-align:0}.mdc-select-helper-text--validation-msg{opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-select--invalid+.mdc-select-helper-text--validation-msg,.mdc-select-helper-text--validation-msg-persistent{opacity:1}.mdc-select--with-leading-icon .mdc-select__icon{display:inline-block;box-sizing:border-box;border:none;text-decoration:none;cursor:pointer;user-select:none;flex-shrink:0;align-self:center;background-color:transparent;fill:currentColor}.mdc-select--with-leading-icon .mdc-select__icon{margin-left:12px;margin-right:12px}[dir=rtl] .mdc-select--with-leading-icon .mdc-select__icon,.mdc-select--with-leading-icon .mdc-select__icon[dir=rtl]{margin-left:12px;margin-right:12px}.mdc-select__icon:not([tabindex]),.mdc-select__icon[tabindex="-1"]{cursor:default;pointer-events:none}.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}:host{display:inline-block;vertical-align:top;outline:none}.mdc-select{width:100%}[hidden]{display:none}.mdc-select__icon{z-index:2}.mdc-select--with-leading-icon{--mdc-list-item-graphic-margin: calc( 48px - var(--mdc-list-item-graphic-size, 24px) - var(--mdc-list-side-padding, 16px) )}.mdc-select .mdc-select__anchor .mdc-select__selected-text{overflow:hidden}.mdc-select .mdc-select__anchor *{display:inline-flex}.mdc-select .mdc-select__anchor .mdc-floating-label{display:inline-block}mwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-idle-border-color, rgba(0, 0, 0, 0.38) );--mdc-notched-outline-notch-offset: 1px}:host(:not([disabled]):hover) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) mwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-hover-border-color, rgba(0, 0, 0, 0.87) )}:host(:not([disabled])) .mdc-select:not(.mdc-select--disabled) .mdc-select__selected-text{color:rgba(0, 0, 0, 0.87);color:var(--mdc-select-ink-color, rgba(0, 0, 0, 0.87))}:host(:not([disabled])) .mdc-select:not(.mdc-select--disabled) .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.42);border-bottom-color:var(--mdc-select-idle-line-color, rgba(0, 0, 0, 0.42))}:host(:not([disabled])) .mdc-select:not(.mdc-select--disabled):hover .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.87);border-bottom-color:var(--mdc-select-hover-line-color, rgba(0, 0, 0, 0.87))}:host(:not([disabled])) .mdc-select:not(.mdc-select--outlined):not(.mdc-select--disabled) .mdc-select__anchor{background-color:whitesmoke;background-color:var(--mdc-select-fill-color, whitesmoke)}:host(:not([disabled])) .mdc-select.mdc-select--invalid .mdc-select__dropdown-icon{fill:var(--mdc-select-error-dropdown-icon-color, var(--mdc-select-error-color, var(--mdc-theme-error, #b00020)))}:host(:not([disabled])) .mdc-select.mdc-select--invalid .mdc-floating-label,:host(:not([disabled])) .mdc-select.mdc-select--invalid .mdc-floating-label::after{color:var(--mdc-select-error-color, var(--mdc-theme-error, #b00020))}:host(:not([disabled])) .mdc-select.mdc-select--invalid mwc-notched-outline{--mdc-notched-outline-border-color: var(--mdc-select-error-color, var(--mdc-theme-error, #b00020))}.mdc-select__menu--invalid{--mdc-theme-primary: var(--mdc-select-error-color, var(--mdc-theme-error, #b00020))}:host(:not([disabled])) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label,:host(:not([disabled])) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label::after{color:rgba(0, 0, 0, 0.6);color:var(--mdc-select-label-ink-color, rgba(0, 0, 0, 0.6))}:host(:not([disabled])) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-select__dropdown-icon{fill:rgba(0, 0, 0, 0.54);fill:var(--mdc-select-dropdown-icon-color, rgba(0, 0, 0, 0.54))}:host(:not([disabled])) .mdc-select.mdc-select--focused mwc-notched-outline{--mdc-notched-outline-stroke-width: 2px;--mdc-notched-outline-notch-offset: 2px}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) mwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-focused-label-color, var(--mdc-theme-primary, rgba(98, 0, 238, 0.87)) )}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-select__dropdown-icon{fill:rgba(98,0,238,.87);fill:var(--mdc-select-focused-dropdown-icon-color, var(--mdc-theme-primary, rgba(98, 0, 238, 0.87)))}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-floating-label{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-floating-label::after{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}:host(:not([disabled])) .mdc-select-helper-text:not(.mdc-select-helper-text--validation-msg){color:var(--mdc-select-label-ink-color, rgba(0, 0, 0, 0.6))}:host([disabled]){pointer-events:none}:host([disabled]) .mdc-select:not(.mdc-select--outlined).mdc-select--disabled .mdc-select__anchor{background-color:#fafafa;background-color:var(--mdc-select-disabled-fill-color, #fafafa)}:host([disabled]) .mdc-select.mdc-select--outlined mwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-disabled-border-color, rgba(0, 0, 0, 0.06) )}:host([disabled]) .mdc-select .mdc-select__dropdown-icon{fill:rgba(0, 0, 0, 0.38);fill:var(--mdc-select-disabled-dropdown-icon-color, rgba(0, 0, 0, 0.38))}:host([disabled]) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label,:host([disabled]) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label::after{color:rgba(0, 0, 0, 0.38);color:var(--mdc-select-disabled-ink-color, rgba(0, 0, 0, 0.38))}:host([disabled]) .mdc-select-helper-text{color:rgba(0, 0, 0, 0.38);color:var(--mdc-select-disabled-ink-color, rgba(0, 0, 0, 0.38))}:host([disabled]) .mdc-select__selected-text{color:rgba(0, 0, 0, 0.38);color:var(--mdc-select-disabled-ink-color, rgba(0, 0, 0, 0.38))}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nc=class extends Ai{};nc.styles=[Uh];nc=z([Ni("mwc-select")],nc);const xy=bi`:host{--mdc-shape-medium: 6px;--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 14px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 400;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 20px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-subtitle1-font-family: var(--vvd-typography-font-family);--mdc-typography-subtitle1-font-size: var(--vvd-typography-font-size);--mdc-typography-subtitle1-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-subtitle1-font-weight: var(--vvd-typography-font-weight);--mdc-typography-subtitle1-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-subtitle1-line-height: var(--vvd-typography-line-height);--mdc-typography-subtitle1-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-subtitle1-text-transform: var(--vvd-typography-text-transform)}:host .mdc-floating-label{--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 16px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 400;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 24px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-subtitle1-font-family: var(--vvd-typography-font-family);--mdc-typography-subtitle1-font-size: var(--vvd-typography-font-size);--mdc-typography-subtitle1-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-subtitle1-font-weight: var(--vvd-typography-font-weight);--mdc-typography-subtitle1-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-subtitle1-line-height: var(--vvd-typography-line-height);--mdc-typography-subtitle1-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-subtitle1-text-transform: var(--vvd-typography-text-transform)}:host .mdc-floating-label--float-above{--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 12px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 400;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 16px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-subtitle1-font-family: var(--vvd-typography-font-family);--mdc-typography-subtitle1-font-size: var(--vvd-typography-font-size);--mdc-typography-subtitle1-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-subtitle1-font-weight: var(--vvd-typography-font-weight);--mdc-typography-subtitle1-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-subtitle1-line-height: var(--vvd-typography-line-height);--mdc-typography-subtitle1-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-subtitle1-text-transform: var(--vvd-typography-text-transform)}:host([dense]) .mdc-floating-label{--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 14px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 400;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 20px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-subtitle1-font-family: var(--vvd-typography-font-family);--mdc-typography-subtitle1-font-size: var(--vvd-typography-font-size);--mdc-typography-subtitle1-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-subtitle1-font-weight: var(--vvd-typography-font-weight);--mdc-typography-subtitle1-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-subtitle1-line-height: var(--vvd-typography-line-height);--mdc-typography-subtitle1-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-subtitle1-text-transform: var(--vvd-typography-text-transform)}:host{--mdc-select-fill-color: var(--vvd-color-canvas);--mdc-select-ink-color: var(--vvd-color-on-canvas);--mdc-select-label-ink-color: var(--vvd-formfield-label-idle-ink);--mdc-select-disabled-ink-color: var( --vvd-formfield-disabled-ink );--mdc-select-disabled-fill-color: var( --vvd-formfield-disabled-fill );--mdc-select-dropdown-icon-color: var(--mdc-select-ink-color);--mdc-select-focused-dropdown-icon-color: var(--mdc-select-ink-color);--mdc-select-disabled-dropdown-icon-color: var( --mdc-select-disabled-ink-color );--mdc-select-outlined-idle-border-color: var( --vvd-formfield-border-idle );--mdc-select-outlined-hover-border-color: var( --vvd-formfield-border-hover );--mdc-select-outlined-disabled-border-color: var( --vvd-formfield-border-disabled );--mdc-select-error-color: var(--vvd-formfield-label-error-ink);--mdc-select-error-fill-color: var(--vvd-formfield-error-fill);--mdc-select-error-dropdown-icon-color: var(--mdc-select-error-color);--mdc-shape-small: var(--border-radius);--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);display:inline-flex;flex-direction:column;font-stretch:var(--mdc-typography-subtitle1-font-stretch);--vvd-select-size-block:48px}:host .mdc-select__selected-text{padding:22px 0 6px}:host .vvd-select-dropdown-icon,:host .vvd-select-icon{--icon-size: 20px;display:inline-flex;align-self:center;margin:0 16px;color:var(--mdc-select-label-ink-color)}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-floating-label{color:var(--mdc-select-label-ink-color)}:host([disabled]) .mdc-select{background-color:var(--mdc-select-disabled-fill-color)}:host([disabled]) .mdc-select vwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-disabled-border-color )}:host([disabled]) .mdc-select .mdc-select__selected-text{color:var(--mdc-select-disabled-ink-color)}:host([disabled]) .mdc-select .vvd-select-icon{color:var(--mdc-select-disabled-ink-color)}:host([disabled]) .mdc-select .mdc-notched-outline .mdc-floating-label--float-above{--mdc-theme-primary: var(--mdc-select-label-ink-color)}:host([disabled]) .mdc-select .vvd-select-dropdown-icon{color:var(--mdc-select-disabled-dropdown-icon-color)}:host([dense]){--vvd-select-size-block:40px}:host([dense]) .mdc-select__selected-text{padding:0}:host([dense]) .mdc-select .mdc-floating-label{--mdc-select-label-ink-color: var(--vvd-color-on-canvas);--mdc-select-error-color: var(--vvd-color-on-canvas);top:-24px;left:-12px;transform:none}:host([dense]) .mdc-select:not(.mdc-select--no-label){margin-top:24px}.mdc-select{border-radius:var(--mdc-shape-small)}.mdc-select .vvd-select-dropdown-icon{transition:transform 200ms}.mdc-select.mdc-select--activated .vvd-select-dropdown-icon{transform:rotateX(180deg)}.mdc-select--outlined{background-color:var(--mdc-select-fill-color)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label{left:calc(20px + 16px * 2 - 12px)}.mdc-select--outlined .mdc-select__anchor{height:var(--vvd-select-size-block);padding-inline-start:16px}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label{padding-right:8px;line-height:var(--mdc-typography-subtitle1-line-height);transition:transform .15s,font-size .15s}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{color:var(--mdc-select-label-ink-color);font-size:var(--mdc-typography-subtitle1-font-size);transform:translateY(-100%)}@media screen and (prefers-reduced-motion: reduce){.mdc-select--outlined .mdc-select__anchor .mdc-floating-label{padding-right:8px;line-height:var(--mdc-typography-subtitle1-line-height);transition:none}}.mdc-select--invalid.mdc-select--outlined{background-color:var(--mdc-select-error-fill-color)}.mdc-select--invalid.mdc-select--outlined vwc-notched-outline{--mdc-notched-outline-border-color: var(--mdc-select-error-color)}.mdc-select--invalid.mdc-select--outlined .mdc-floating-label{color:var(--mdc-select-error-color)}@media screen and (prefers-reduced-motion: reduce){.mdc-select .vvd-select-dropdown-icon{transition:none}}vwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-idle-border-color )}:host(:not([disabled])) .mdc-select.mdc-select--focused vwc-notched-outline,:host(:not([disabled]):hover) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) vwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-hover-border-color )}:host(:not([shape=pill i])),:host([shape=rounded i]){--mdc-shape-small:6px}:host([shape=pill i]){--mdc-shape-small:24px}:host([appearance=ghost i][dense]) .mdc-select .mdc-floating-label{left:0}:host([appearance=ghost i][dense]) vwc-notched-outline{--mdc-notched-outline-stroke-width: 0}:host([appearance=ghost i][dense]) .mdc-select__anchor{display:block}:host([appearance=ghost i][dense]) .mdc-select--outlined{--mdc-select-fill-color: transparent}:host([appearance=ghost i][dense][disabled]) .mdc-select.mdc-select--outlined{background-color:transparent}:host(:not([dense])) .mdc-select--no-label .mdc-select__selected-text{padding-top:8px}mwc-menu{--mdc-theme-surface: var(--vvd-color-surface-8dp)}`;function Ny(e){for(;e;){const t=e.closest("form");if(t)return t;const i=e.getRootNode();if(!i)return null;e=i.host}return null}function Yy(e){const t=e.getAttribute("form"),i=t?document.getElementById(t):Ny(e);return i instanceof HTMLFormElement?i:null}class My extends HTMLElement{disconnectedCallback(){this.dispatchEvent(new Event("disconnected"))}}window.customElements.define("form-association-disconnection",My);function Ly(e,{name:t,type:i,value:n}){e.style.display="none",t&&e.setAttribute("name",t),i&&e.setAttribute("type",i),e.defaultValue=n}function Jy(e,t){const i=document.createElement(t);return e.appendChild(i),i}function QI(e,t,i=""){!e||(e.value=t,e.setCustomValidity(i))}function Ty(e,t,i){return()=>{var n;e.value=t.value=(n=i==null?void 0:i.defaultValue)!==null&&n!==void 0?n:"",QI(i,e.value,t.validationMessage)}}function ky(e){e.addEventListener("invalid",t=>{t.stopPropagation(),t.preventDefault()})}function zy(e,t,i){["input","change"].forEach(o=>{e.addEventListener(o,()=>{QI(i,e.value,t.validationMessage)})})}function Ky(e,t){const i=document.createElement("form-association-disconnection");i.addEventListener("disconnected",()=>{t()}),e.appendChild(i)}function Uy(e,t,i){return()=>{e.remove(),t.removeEventListener("reset",i)}}function Ey(e,t){const i=Yy(e);if(!i)return;const n=Jy(i,t.nodeName);Ly(n,e),ky(n);const o=Ty(e,t,n),l=Uy(n,i,o);QI(n,e.value,t.validationMessage),i.addEventListener("reset",o),Ky(e,l),zy(e,t,n)}const Qy="vvd-select-dropdown-icon";nc.styles=[hc,Uh,xy];let pr=class extends nc{constructor(){super(...arguments),this.dense=!1}connectedCallback(){super.connectedCallback(),this.hasAttribute("outlined")||(this.outlined=!0)}async firstUpdated(){await super.firstUpdated(),this.replaceDropDownIcon(),Ey(this,this.formElement),ah(this)}update(t){super.update(t),(this.shape==="pill"||this.appearance==="ghost")&&(this.dense=!0)}updated(t){var i;super.updated(t);const n=(i=this.shadowRoot)===null||i===void 0?void 0:i.querySelector(".mdc-select__selected-text");n&&(n.setAttribute("aria-label","current selection"),n.setAttribute("role","textbox"))}renderHelperText(){if(!this.shouldRenderHelperText)return"";const t=this.validationMessage&&!this.isUiValid,i=t?this.validationMessage:this.helper;return Lt`<vwc-helper-message
			id="helper-text"
			class="helper-message"
			?disabled="${this.disabled}"
			?is-error="${t}"
			>${i}</vwc-helper-message
		>`}renderLeadingIcon(){return this.icon?Lt`<vwc-icon class="vvd-select-icon" type="${this.icon}"></vwc-icon>`:""}renderOutline(){return this.outlined?Lt`<vwc-notched-outline class="mdc-notched-outline vvd-notch">
			${this.renderLabel()}
		</vwc-notched-outline>`:{}}replaceDropDownIcon(){var t,i;const n=document.createElement("vwc-icon");n.classList.add(Qy),n.setAttribute("type","down"),(i=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector(".mdc-select__dropdown-icon"))===null||i===void 0||i.replaceWith(n)}};z([lt({type:Boolean,reflect:!0})],pr.prototype,"dense",void 0);z([lt({type:String,reflect:!0})],pr.prototype,"shape",void 0);z([lt({type:String,reflect:!0})],pr.prototype,"form",void 0);z([lt({type:String,reflect:!0})],pr.prototype,"name",void 0);z([lt({type:String,reflect:!0})],pr.prototype,"appearance",void 0);pr=z([Ni("vwc-select")],pr);const Dy=bi`:host{--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert)}:host .mdc-deprecated-list-item__text,:host([twoline]) .mdc-deprecated-list-item__text{align-self:center;margin-inline-end:4px}:host([twoline]) .mdc-deprecated-list-item__primary-text{font:600 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;margin-bottom:4px}:host([twoline]) .mdc-deprecated-list-item__primary-text::before,:host([twoline]) .mdc-deprecated-list-item__primary-text::after{display:none}:host([twoline]) .mdc-deprecated-list-item__secondary-text{font:400 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}:host([twoline]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([disabled]) .mdc-deprecated-list-item__text{color:var(--vvd-formfield-disabled-ink)}:host([shape=rounded i]){--vvd-list-item-shape:6px}:host{--mdc-list-side-padding: var(--vvd-list-item-side-padding);--mdc-list-item-graphic-margin: var(--vvd-list-item-graphic-margin);--mdc-list-item-graphic-size: 20px;--mdc-list-item-meta-size: 20px;--mdc-theme-text-icon-on-background: var( --vvd-color-on-canvas );--mdc-theme-text-hint-on-background: var( --vvd-color-on-canvas );font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);position:relative;height:var(--vvd-list-item-block-size);border-radius:var(--vvd-list-item-shape);--vvd-list-item-block-size:40px;--vvd-list-item-side-padding:16px;--vvd-list-item-graphic-margin:16px}:host:host([connotation=primary i]){--list-item-connotation:var(--vvd-color-primary);--list-item-on-connotation:var(--vvd-color-on-primary)}:host([activated]){--mdc-ripple-focus-opacity: 0;--mdc-ripple-hover-opacity: 0;z-index:0}:host([activated]) mwc-ripple,:host([activated]) .fake-activated-ripple{--mdc-ripple-activated-opacity: 0;z-index:-1}:host([activated][connotation=primary]) .mdc-deprecated-list-item__secondary-text ::slotted(*){--mdc-theme-text-secondary-on-background: var(--vvd-color-neutral-40)}:host([activated][twoline][connotation=primary]:not([disabled]))::after{--vvd-list-divider--color:var(--vvd-color-neutral-80)}:host([activated]:not([disabled])){--mdc-theme-text-icon-on-background: var( --list-item-on-connotation, var(--vvd-color-on-canvas) );--mdc-theme-text-hint-on-background: var( --list-item-on-connotation, var(--vvd-color-on-canvas) );--mdc-ripple-color: var( --list-item-on-connotation, var(--vvd-color-on-canvas) );color:var(--list-item-on-connotation, var(--vvd-color-on-canvas))}:host([activated]:not([disabled])) .fake-activated-ripple{--mdc-ripple-activated-opacity: 1;--mdc-ripple-color: var( --list-item-connotation, var(--vvd-color-neutral-30) )}:host([activated]:not([disabled])) mwc-ripple{background-color:var(--list-item-connotation, var(--vvd-color-neutral-30))}:host([graphic=icon]:not([twoline])){height:var(--vvd-list-item-block-size)}:host([twoline]){height:auto;min-block-size:var(--vvd-list-item-block-size);--vvd-list-item-block-size:64px;--vvd-list-item-side-padding:16px;--vvd-list-item-graphic-margin:12px}:host([twoline])::after{position:absolute;right:var(--vvd-list-item-side-padding);bottom:0;left:var(--vvd-list-item-side-padding);height:1px;border-bottom:1px solid var(--vvd-list-divider--color);content:""}:host([twoline]) .mdc-deprecated-list-item__meta{flex-shrink:0}:host([disabled]){--mdc-theme-text-icon-on-background: var(--vvd-formfield-disabled-ink);--mdc-theme-text-hint-on-background: var(--vvd-formfield-disabled-ink)}.mdc-deprecated-list-item__meta{display:flex}:host(:not([disabled])) .mdc-deprecated-list-item__graphic ::slotted(*),:host(:not([disabled])) .mdc-deprecated-list-item__meta ::slotted(*){color:var(--vvd-color-neutral-70)}:host([activated][connotation=primary]):host(:not([disabled])) .mdc-deprecated-list-item__graphic ::slotted(*),:host([activated][connotation=primary]):host(:not([disabled])) .mdc-deprecated-list-item__meta ::slotted(*){color:var(--list-item-on-connotation)}`;ic.styles=[hc,kh,Dy];let Xg=class extends ic{};z([lt({type:String,reflect:!0})],Xg.prototype,"connotation",void 0);z([lt({type:String,reflect:!0})],Xg.prototype,"shape",void 0);Xg=z([Ni("vwc-list-item")],Xg);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var os={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},DI={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},is={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var r0=os.OPENING,l0=os.OPEN,c0=os.CLOSING,Oy=DI.REASON_ACTION,oa=DI.REASON_DISMISS,jy=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.opened=!1,n.animationFrame=0,n.animationTimer=0,n.autoDismissTimer=0,n.autoDismissTimeoutMs=is.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,n.closeOnEscape=!0,n}return Object.defineProperty(t,"cssClasses",{get:function(){return os},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return DI},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return is},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer(),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=0,this.adapter.removeClass(r0),this.adapter.removeClass(l0),this.adapter.removeClass(c0)},t.prototype.open=function(){var i=this;this.clearAutoDismissTimer(),this.opened=!0,this.adapter.notifyOpening(),this.adapter.removeClass(c0),this.adapter.addClass(r0),this.adapter.announce(),this.runNextAnimationFrame(function(){i.adapter.addClass(l0),i.animationTimer=setTimeout(function(){var n=i.getTimeoutMs();i.handleAnimationTimerEnd(),i.adapter.notifyOpened(),n!==is.INDETERMINATE&&(i.autoDismissTimer=setTimeout(function(){i.close(oa)},n))},is.SNACKBAR_ANIMATION_OPEN_TIME_MS)})},t.prototype.close=function(i){var n=this;i===void 0&&(i=""),this.opened&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=0,this.clearAutoDismissTimer(),this.opened=!1,this.adapter.notifyClosing(i),this.adapter.addClass(os.CLOSING),this.adapter.removeClass(os.OPEN),this.adapter.removeClass(os.OPENING),clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){n.handleAnimationTimerEnd(),n.adapter.notifyClosed(i)},is.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.opened},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs},t.prototype.setTimeoutMs=function(i){var n=is.MIN_AUTO_DISMISS_TIMEOUT_MS,o=is.MAX_AUTO_DISMISS_TIMEOUT_MS,l=is.INDETERMINATE;if(i===is.INDETERMINATE||i<=o&&i>=n)this.autoDismissTimeoutMs=i;else throw new Error(`
        timeoutMs must be an integer in the range `+n+"\u2013"+o+`
        (or `+l+" to disable), but got '"+i+"'")},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape},t.prototype.setCloseOnEscape=function(i){this.closeOnEscape=i},t.prototype.handleKeyDown=function(i){var n=i.key==="Escape"||i.keyCode===27;n&&this.getCloseOnEscape()&&this.close(oa)},t.prototype.handleActionButtonClick=function(i){this.close(Oy)},t.prototype.handleActionIconClick=function(i){this.close(oa)},t.prototype.clearAutoDismissTimer=function(){clearTimeout(this.autoDismissTimer),this.autoDismissTimer=0},t.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(os.OPENING),this.adapter.removeClass(os.CLOSING)},t.prototype.runNextAnimationFrame=function(i){var n=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){n.animationFrame=0,clearTimeout(n.animationTimer),n.animationTimer=setTimeout(i,0)})},t}(No),OI=jy;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const{ARIA_LIVE_DELAY_MS:_y}=OI.numbers;class Py extends Mh{constructor(t){if(super(t),this.labelEl=null,this.timerId=null,this.previousPart=null,t.type!==wo.CHILD)throw new Error("AccessibleSnackbarLabel only supports child parts.")}update(t,[i,n]){var o;if(!n)return;if(this.labelEl===null){const m=document.createElement("div"),Z=Lt`<div class="mdc-snackbar__label" role="status" aria-live="polite">${i}</div>`;yg(Z,m);const x=m.firstElementChild;return(o=t.endNode)===null||o===void 0||o.parentNode.insertBefore(x,t.endNode),this.labelEl=x,x}const l=this.labelEl;l.setAttribute("aria-live","off"),l.textContent="";const I=Lt`<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>`;return yg(I,l),l.setAttribute("data-mdc-snackbar-label-text",i),this.timerId!==null&&clearTimeout(this.timerId),this.timerId=window.setTimeout(()=>{this.timerId=null,l.setAttribute("aria-live","polite"),l.removeAttribute("data-mdc-snackbar-label-text"),l.textContent=i,this.setValue(this.labelEl)},_y),l}render(t,i){return i?Lt`
      <div class="mdc-snackbar__label" role="status" aria-live="polite">${t}</div>`:Lt``}}const Pa=Cd(Py),{OPENING_EVENT:qy,OPENED_EVENT:$y,CLOSING_EVENT:tZ,CLOSED_EVENT:eZ}=OI.strings;class qo extends ks{constructor(){super(...arguments),this.mdcFoundationClass=OI,this.open=!1,this.timeoutMs=5e3,this.closeOnEscape=!1,this.labelText="",this.stacked=!1,this.leading=!1,this.reason=""}render(){const t={"mdc-snackbar--stacked":this.stacked,"mdc-snackbar--leading":this.leading};return Lt`
      <div class="mdc-snackbar ${In(t)}" @keydown="${this._handleKeydown}">
        <div class="mdc-snackbar__surface">
          ${Pa(this.labelText,this.open)}
          <div class="mdc-snackbar__actions">
            <slot name="action" @click="${this._handleActionClick}"></slot>
            <slot name="dismiss" @click="${this._handleDismissClick}"></slot>
          </div>
        </div>
      </div>`}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{announce:()=>{},notifyClosed:t=>{this.dispatchEvent(new CustomEvent(eZ,{bubbles:!0,cancelable:!0,detail:{reason:t}}))},notifyClosing:t=>{this.open=!1,this.dispatchEvent(new CustomEvent(tZ,{bubbles:!0,cancelable:!0,detail:{reason:t}}))},notifyOpened:()=>{this.dispatchEvent(new CustomEvent($y,{bubbles:!0,cancelable:!0}))},notifyOpening:()=>{this.open=!0,this.dispatchEvent(new CustomEvent(qy,{bubbles:!0,cancelable:!0}))}})}show(){this.open=!0}close(t=""){this.reason=t,this.open=!1}firstUpdated(){super.firstUpdated(),this.open&&this.mdcFoundation.open()}_handleKeydown(t){this.mdcFoundation.handleKeyDown(t)}_handleActionClick(t){this.mdcFoundation.handleActionButtonClick(t)}_handleDismissClick(t){this.mdcFoundation.handleActionIconClick(t)}}z([vi(".mdc-snackbar")],qo.prototype,"mdcRoot",void 0);z([vi(".mdc-snackbar__label")],qo.prototype,"labelElement",void 0);z([lt({type:Boolean,reflect:!0}),pi(function(e){this.mdcFoundation&&(e?this.mdcFoundation.open():(this.mdcFoundation.close(this.reason),this.reason=""))})],qo.prototype,"open",void 0);z([pi(function(e){this.mdcFoundation.setTimeoutMs(e)}),lt({type:Number})],qo.prototype,"timeoutMs",void 0);z([pi(function(e){this.mdcFoundation.setCloseOnEscape(e)}),lt({type:Boolean})],qo.prototype,"closeOnEscape",void 0);z([lt({type:String})],qo.prototype,"labelText",void 0);z([lt({type:Boolean})],qo.prototype,"stacked",void 0);z([lt({type:Boolean})],qo.prototype,"leading",void 0);const iZ=bi`.mdc-snackbar.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}.mdc-snackbar.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}.mdc-snackbar.connotation-warning{--connotation:var(--vvd-color-warning);--on-connotation:var(--vvd-color-on-warning)}.mdc-snackbar.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info)}.mdc-snackbar.connotation-announcement,.mdc-snackbar:not(.connotation-success):not(.connotation-alert):not(.connotation-warning):not(.connotation-info){--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement)}.mdc-snackbar[position^=TOP]{top:0;bottom:initial}.mdc-snackbar[position$=START]{justify-content:flex-start}.mdc-snackbar[position$=END]{justify-content:flex-end}.mdc-snackbar__surface{padding-right:initial;background-color:var(--vvd-color-canvas);border-radius:6px;box-shadow:0 6px 8px rgba(0,0,0,.05),0 12px 16px rgba(0,0,0,.05),0 4px 24px rgba(0,0,0,.1)}.mdc-snackbar__label{font:400 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;padding:22px 16px;color:var(--vvd-color-on-canvas);-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}.icon{flex-shrink:0;margin-block-end:auto;margin-block-start:16px;margin-inline-start:16px}.vwc-snackbar-legacy .icon{--connotation:initial;color:var(--vvd-color-on-canvas);margin-block-start:20px}.dismiss-container{display:flex;align-items:center;align-self:stretch;margin-inline-end:16px}.dismiss-container::before{align-self:stretch;border-left:1px solid var(--vvd-color-neutral-30);content:"";margin-inline-end:16px}.vwc-snackbar-legacy ::slotted([slot=action]){margin-block-start:16px}:not(.vwc-snackbar-legacy) ::slotted([slot=action]:last-child){margin-inline-end:16px}.vwc-snackbar-legacy .mdc-snackbar__surface{padding-inline-start:8px}.vwc-snackbar-legacy .mdc-snackbar__surface::before{border:1px solid var(--vvd-color-neutral-40);border-inline-start:8px solid var(--connotation)}.vwc-snackbar-legacy .header-and-label{padding:22px 16px}.vwc-snackbar-legacy .header-and-label>.heading{font:600 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-snackbar-legacy .mdc-snackbar__label{font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.header-and-label{padding:16px 16px}.header-and-label>.heading{font:600 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;color:var(--vvd-color-on-canvas);margin-block-end:4px;margin-block-start:0}.header-and-label>.mdc-snackbar__label{padding:0}.vwc-snackbar-legacy .mdc-snackbar__actions{align-items:baseline;margin-block-end:auto;margin-block-start:20px}.vwc-snackbar-legacy .mdc-snackbar__actions .dismiss-container::before{content:initial}`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const nZ=bi`.mdc-snackbar{z-index:8;margin:8px;display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar__surface{background-color:#333333}.mdc-snackbar__label{color:rgba(255, 255, 255, 0.87)}.mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mdc-snackbar__surface{min-width:100%}}.mdc-snackbar__surface{max-width:672px}.mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0,0,0,.12)}.mdc-snackbar__surface{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar--leading{justify-content:flex-start}.mdc-snackbar--stacked .mdc-snackbar__label{padding-left:16px;padding-right:8px;padding-bottom:12px}[dir=rtl] .mdc-snackbar--stacked .mdc-snackbar__label,.mdc-snackbar--stacked .mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar--stacked .mdc-snackbar__surface{flex-direction:column;align-items:flex-start}.mdc-snackbar--stacked .mdc-snackbar__actions{align-self:flex-end;margin-bottom:8px}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto;transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1);transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-snackbar__label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-body2-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-body2-font-size, 0.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight, 400);letter-spacing:0.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing, 0.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform, inherit);padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action:not(:disabled){color:#bb86fc}.mdc-snackbar__action::before,.mdc-snackbar__action::after{background-color:#bb86fc;background-color:var(--mdc-ripple-color, #bb86fc)}.mdc-snackbar__action:hover::before,.mdc-snackbar__action.mdc-ripple-surface--hover::before{opacity:0.08;opacity:var(--mdc-ripple-hover-opacity, 0.08)}.mdc-snackbar__action.mdc-ripple-upgraded--background-focused::before,.mdc-snackbar__action:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-snackbar__action:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-snackbar__action:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__action.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss{color:rgba(255, 255, 255, 0.87)}.mdc-snackbar__dismiss .mdc-icon-button__ripple::before,.mdc-snackbar__dismiss .mdc-icon-button__ripple::after{background-color:rgba(255, 255, 255, 0.87);background-color:var(--mdc-ripple-color, rgba(255, 255, 255, 0.87))}.mdc-snackbar__dismiss:hover .mdc-icon-button__ripple::before,.mdc-snackbar__dismiss.mdc-ripple-surface--hover .mdc-icon-button__ripple::before{opacity:0.08;opacity:var(--mdc-ripple-hover-opacity, 0.08)}.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__ripple::before,.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__ripple::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded) .mdc-icon-button__ripple::after{transition:opacity 150ms linear}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):active .mdc-icon-button__ripple::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss.mdc-snackbar__dismiss{width:36px;height:36px;padding:6px;font-size:18px}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}slot[name=action]::slotted(mwc-button){--mdc-theme-primary: var( --mdc-snackbar-action-color, #bb86fc )}slot[name=dismiss]::slotted(mwc-icon-button){--mdc-icon-size: 18px;--mdc-icon-button-size: 36px;color:rgba(255, 255, 255, 0.87);margin-left:8px;margin-right:0}[dir=rtl] slot[name=dismiss]::slotted(mwc-icon-button),::slotted(mwc-icon-buttonslot[name=dismiss][dir=rtl]){margin-left:0;margin-right:8px}`;var qa;const oZ="opening",sZ="opened",rZ="closing",lZ="closed";qo.styles=[nZ,iZ];const g0=`${rs.Bottom}-${rs.Center}`,cZ=new RegExp(`^(${rs.Top}|${rs.Bottom})-(${rs.Start}|${rs.Center}|${rs.End})$`);let ms=qa=class extends qo{constructor(){super(...arguments),this.legacy=!1,this.position=g0,this.message=""}connectedCallback(){super.connectedCallback(),this.setupEventListeners()}setupEventListeners(){const t="MDCSnackbar";for(const i of[oZ,sZ,rZ,lZ])this.addEventListener(`${t}:${i}`,this.getEventHandler(i))}getEventHandler(t){return i=>{const n=t,o=i.detail,l=o?Object.assign({},o):null,I=new CustomEvent(n,{bubbles:!0,composed:!0,detail:l});this.dispatchEvent(I)}}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation,"vwc-snackbar-legacy":this.legacy}}render(){const t=qa.preprocessPositionConfig(this.position),i=this.legacy?void 0:"vvd-scheme-alternate";return Lt`
			<div
				class="mdc-snackbar ${In(this.getRenderClasses())}"
				position="${t}"
				part="${Do(i)}"
				@keydown="${this._handleKeydown}">
				<div class="mdc-snackbar__surface">
					${this.icon?this.renderIcon():""}
					${this.legacy?this.renderLegacyUi():this.renderContent()}
					<div class="mdc-snackbar__actions">
            ${this.legacy?"":Lt`<slot name="action" @click="${this._handleActionClick}"></slot>`}
						${this.renderDismissAction()}
          </div>
				</div>
			</div>
		`}renderHeading(){return Lt`<h3 class="heading" aria-hidden="true">
					${this.header}
				</h3>`}renderLegacyUi(){return Lt`
			<div class="header-and-label">
				${this.header?this.renderHeading():""}
				${Pa(this.message,this.open)}
				<slot name="action" @click="${this._handleActionClick}"></slot>
			</div>`}renderContent(){return Lt`
			<div class="header-and-label">
				${this.header?this.renderHeading():""}
				${Pa(this.message,this.open)}
			</div>`}renderIcon(){return Lt`
    <vwc-icon class="icon" type="${this.icon}"></vwc-icon>`}renderDismissAction(){return this.dismissible?Lt`
			<div class="dismiss-container">
				<vwc-icon-button
					class="dismiss-button"
					icon="close-line"
					layout="ghost"
					dense
					@click="${this._handleDismissClick}"
				>
				</vwc-icon-button>
			</div>
		`:""}static preprocessPositionConfig(t){let i=g0;return typeof t=="string"&&cZ.test(t)&&(i=t),i}};z([lt({type:Boolean,reflect:!0})],ms.prototype,"legacy",void 0);z([lt({reflect:!0})],ms.prototype,"position",void 0);z([lt({type:String,reflect:!0})],ms.prototype,"connotation",void 0);z([lt({type:String,reflect:!0})],ms.prototype,"icon",void 0);z([lt({type:String,reflect:!0})],ms.prototype,"header",void 0);z([lt({type:String,reflect:!0})],ms.prototype,"message",void 0);z([lt({type:Boolean,reflect:!0})],ms.prototype,"dismissible",void 0);ms=qa=z([Ni("vwc-snackbar")],ms);class gZ{constructor(){this.video_=document.getElementById("source_video")}setStream(t){this.stream_=t,this.maybeAddVideoElement_()}maybeAddVideoElement_(){this.stream_&&this.video_&&(this.video_.srcObject=this.stream_,this.video_.play())}}class dZ{constructor(){this.video_=document.getElementById("priview_video")}setMediaStream(t){this.video_&&t!=null&&(this.video_.srcObject=t,this.video_.play())}destroy(){this.video_&&(this.video_.pause(),this.video_.srcObject=null)}}class aZ{constructor(){this.videoMirrorHelper_=new gZ,this.sink_=new dZ}init(){return new Promise((t,i)=>{navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(n=>{this.stream_=n,this.videoTrack_=this.stream_.getVideoTracks()[0],this.videoMirrorHelper_.setStream(this.stream_),t()}).catch(n=>{i(n)})})}setMediaProcessorConnector(t){return new Promise(async(i,n)=>{this.mediaProcessorConnector_=t,this.stream_||(console.log("[CameraSource] Requesting camera."),n("no stream")),this.mediaProcessorConnector_.setTrack(this.videoTrack_).then(o=>{let l=new MediaStream;l.addTrack(o),this.sink_.setMediaStream(l),i()}).catch(o=>{n(o)})})}async stopMediaProcessorConnector(){this.mediaProcessorConnector_&&this.mediaProcessorConnector_.destroy().then(()=>{this.sink_.destroy()}).catch(t=>{console.log(t)})}}function IZ(){return new Promise((e,t)=>{typeof MediaStreamTrackProcessor>"u"||typeof MediaStreamTrackGenerator>"u"?t("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):e()})}let as=class{};as.updates={transformer_new:"New transformer",transformer_null:"Null transformer"};as.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer",readable_null:"Readable is null",writable_null:"Writable is null"};function uZ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const ys=new WeakMap,cg=new WeakMap,Jl=new WeakMap,$a=Symbol("anyProducer"),d0=Promise.resolve(),Rg=Symbol("listenerAdded"),vg=Symbol("listenerRemoved");let sa=!1;function vr(e){if(typeof e!="string"&&typeof e!="symbol")throw new TypeError("eventName must be a string or a symbol")}function Tc(e){if(typeof e!="function")throw new TypeError("listener must be a function")}function Sr(e,t){const i=cg.get(e);return i.has(t)||i.set(t,new Set),i.get(t)}function Tl(e,t){const i=typeof t=="string"||typeof t=="symbol"?t:$a,n=Jl.get(e);return n.has(i)||n.set(i,new Set),n.get(i)}function CZ(e,t,i){const n=Jl.get(e);if(n.has(t))for(const o of n.get(t))o.enqueue(i);if(n.has($a)){const o=Promise.all([t,i]);for(const l of n.get($a))l.enqueue(o)}}function a0(e,t){t=Array.isArray(t)?t:[t];let i=!1,n=()=>{},o=[];const l={enqueue(I){o.push(I),n()},finish(){i=!0,n()}};for(const I of t)Tl(e,I).add(l);return{async next(){return o?o.length===0?i?(o=void 0,this.next()):(await new Promise(I=>{n=I}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(I){o=void 0;for(const m of t)Tl(e,m).delete(l);return n(),arguments.length>0?{done:!0,value:await I}:{done:!0}},[Symbol.asyncIterator](){return this}}}function I0(e){if(e===void 0)return u0;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!u0.includes(t))throw typeof t!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${t} is not Emittery method`);return e}const ra=e=>e===Rg||e===vg;let md=class tI{static mixin(t,i){return i=I0(i),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const I of i)if(n.prototype[I]!==void 0)throw new Error(`The property \`${I}\` already exists on \`target\``);function o(){return Object.defineProperty(this,t,{enumerable:!1,value:new tI}),this[t]}Object.defineProperty(n.prototype,t,{enumerable:!1,get:o});const l=I=>function(...m){return this[t][I](...m)};for(const I of i)Object.defineProperty(n.prototype,I,{enumerable:!1,value:l(I)});return n}}static get isDebugEnabled(){if(typeof process!="object")return sa;const{env:t}=process||{env:{}};return t.DEBUG==="emittery"||t.DEBUG==="*"||sa}static set isDebugEnabled(t){sa=t}constructor(t={}){ys.set(this,new Set),cg.set(this,new Map),Jl.set(this,new Map),this.debug=t.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(i,n,o,l)=>{try{l=JSON.stringify(l)}catch{l=`Object with the following keys failed to stringify: ${Object.keys(l).join(",")}`}typeof o=="symbol"&&(o=o.toString());const I=new Date,m=`${I.getHours()}:${I.getMinutes()}:${I.getSeconds()}.${I.getMilliseconds()}`;console.log(`[${m}][emittery:${i}][${n}] Event Name: ${o}
	data: ${l}`)})}logIfDebugEnabled(t,i,n){(tI.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,i,n)}on(t,i){Tc(i),t=Array.isArray(t)?t:[t];for(const n of t)vr(n),Sr(this,n).add(i),this.logIfDebugEnabled("subscribe",n,void 0),ra(n)||this.emit(Rg,{eventName:n,listener:i});return this.off.bind(this,t,i)}off(t,i){Tc(i),t=Array.isArray(t)?t:[t];for(const n of t)vr(n),Sr(this,n).delete(i),this.logIfDebugEnabled("unsubscribe",n,void 0),ra(n)||this.emit(vg,{eventName:n,listener:i})}once(t){return new Promise(i=>{const n=this.on(t,o=>{n(),i(o)})})}events(t){t=Array.isArray(t)?t:[t];for(const i of t)vr(i);return a0(this,t)}async emit(t,i){vr(t),this.logIfDebugEnabled("emit",t,i),CZ(this,t,i);const n=Sr(this,t),o=ys.get(this),l=[...n],I=ra(t)?[]:[...o];await d0,await Promise.all([...l.map(async m=>{if(n.has(m))return m(i)}),...I.map(async m=>{if(o.has(m))return m(t,i)})])}async emitSerial(t,i){vr(t),this.logIfDebugEnabled("emitSerial",t,i);const n=Sr(this,t),o=ys.get(this),l=[...n],I=[...o];await d0;for(const m of l)n.has(m)&&await m(i);for(const m of I)o.has(m)&&await m(t,i)}onAny(t){return Tc(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),ys.get(this).add(t),this.emit(Rg,{listener:t}),this.offAny.bind(this,t)}anyEvent(){return a0(this)}offAny(t){Tc(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(vg,{listener:t}),ys.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(const i of t)if(this.logIfDebugEnabled("clear",i,void 0),typeof i=="string"||typeof i=="symbol"){Sr(this,i).clear();const n=Tl(this,i);for(const o of n)o.finish();n.clear()}else{ys.get(this).clear();for(const n of cg.get(this).values())n.clear();for(const n of Jl.get(this).values()){for(const o of n)o.finish();n.clear()}}}listenerCount(t){t=Array.isArray(t)?t:[t];let i=0;for(const n of t){if(typeof n=="string"){i+=ys.get(this).size+Sr(this,n).size+Tl(this,n).size+Tl(this).size;continue}typeof n<"u"&&vr(n),i+=ys.get(this).size;for(const o of cg.get(this).values())i+=o.size;for(const o of Jl.get(this).values())i+=o.size}return i}bindMethods(t,i){if(typeof t!="object"||t===null)throw new TypeError("`target` must be an object");i=I0(i);for(const n of i){if(t[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(t,n,{enumerable:!1,value:this[n].bind(this)})}}};const u0=Object.getOwnPropertyNames(md.prototype).filter(e=>e!=="constructor");Object.defineProperty(md,"listenerAdded",{value:Rg,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(md,"listenerRemoved",{value:vg,writable:!1,enumerable:!0,configurable:!1});var mZ=md;const jI=uZ(mZ);function hZ(e){return typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"}function bZ(e){if(hZ(e))return e;try{return new Error(JSON.stringify(e))}catch{return new Error(String(e))}}function la(e){return bZ(e).message}var pZ=Object.defineProperty,AZ=(e,t,i)=>t in e?pZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,yZ=(e,t,i)=>(AZ(e,typeof t!="symbol"?t+"":t,i),i);const ZZ="hlg.tokbox.com/prod/logging/vcp_webrtc",fZ="https://",GZ=1e4;let kc;const VZ=new Uint8Array(16);function WZ(){if(!kc&&(kc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!kc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kc(VZ)}const Mn=[];for(let e=0;e<256;++e)Mn.push((e+256).toString(16).slice(1));function BZ(e,t=0){return(Mn[e[t+0]]+Mn[e[t+1]]+Mn[e[t+2]]+Mn[e[t+3]]+"-"+Mn[e[t+4]]+Mn[e[t+5]]+"-"+Mn[e[t+6]]+Mn[e[t+7]]+"-"+Mn[e[t+8]]+Mn[e[t+9]]+"-"+Mn[e[t+10]]+Mn[e[t+11]]+Mn[e[t+12]]+Mn[e[t+13]]+Mn[e[t+14]]+Mn[e[t+15]]).toLowerCase()}const XZ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),C0={randomUUID:XZ};function RZ(e,t,i){if(C0.randomUUID&&!t&&!e)return C0.randomUUID();e=e||{};const n=e.random||(e.rng||WZ)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){i=i||0;for(let o=0;o<16;++o)t[i+o]=n[o];return t}return BZ(n)}function _I(e,t){globalThis.vonage||(globalThis.vonage={}),globalThis.vonage.workerizer||(globalThis.vonage.workerizer={});let i=globalThis.vonage.workerizer;return i[e]||(i[e]=t),i[e]}const Ss=_I("globals",{});var rr=(e=>(e.INIT="INIT",e.FORWARD="FORWARD",e.TERMINATE="TERMINATE",e.GLOBALS_SYNC="GLOBALS_SYNC",e))(rr||{});function Eh(e){return[ImageBitmap,ReadableStream,WritableStream].some(t=>e instanceof t)}let vZ=0;function SZ(e,t,i,n,o){const l=vZ++;return e.postMessage({id:l,type:t,functionName:i,args:n},n.filter(I=>Eh(I))),new Promise(I=>{o==null||o.set(l,I)})}function pc(e,t){const{id:i,type:n}=e,o=Array.isArray(t)?t:[t];postMessage({id:i,type:n,result:t},o.filter(l=>Eh(l)))}const m0=_I("workerized",{});function Qh(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}async function wZ(){if(Qh())pc({type:rr.GLOBALS_SYNC},Ss);else{const e=[];for(const t in m0){const{worker:i,resolvers:n}=m0[t].workerContext;i&&e.push(SZ(i,rr.GLOBALS_SYNC,"",[Ss],n))}await Promise.all(e)}}function Sg(e,t){if(Array.isArray(t))t.splice(0,t.length);else if(typeof t=="object")for(const i in t)delete t[i];for(const i in e)Array.isArray(e[i])?(t[i]=[],Sg(e[i],t[i])):typeof e[i]=="object"?(t[i]={},Sg(e[i],t[i])):t[i]=e[i]}async function FZ(e,t){const{functionName:i,args:n}=e;if(!t.instance)throw"instance not initialized";if(!i)throw"missing function name to call";if(!t.instance[i])throw`undefined function [${i}] in class ${t.instance.constructor.workerId}`;pc(e,await t.instance[i](...n!=null?n:[]))}const HZ=_I("registeredWorkers",{});function xZ(e,t){if(!e.args)throw"Missing className while initializing worker";const[i,n]=e.args,o=HZ[i];if(o)t.instance=new o(e.args.slice(1));else throw`unknown worker class ${i}`;Sg(n,Ss),pc(e,typeof t.instance!==void 0)}async function NZ(e,t){const{args:i}=e;if(!t.instance)throw"instance not initialized";let n;t.instance.terminate&&(n=await t.instance.terminate(...i!=null?i:[])),pc(e,n)}function YZ(e){if(!e.args)throw"Missing globals while syncing";Sg(e.args[0],Ss),pc(e,{})}function MZ(){const e={};onmessage=async t=>{const i=t.data;switch(i.type){case rr.INIT:xZ(i,e);break;case rr.FORWARD:FZ(i,e);break;case rr.TERMINATE:NZ(i,e);break;case rr.GLOBALS_SYNC:YZ(i);break}}}Qh()&&MZ();function LZ(e,t){return Ss[e]||(Ss[e]=t),[()=>Ss[e],async i=>{Ss[e]=i,await wZ()}]}function JZ(e,t){return LZ(e,t)}const[TZ,kZ]=JZ("metadata");function zZ(e){kZ(e)}function gg(){return TZ()}let PI=class{constructor(t,i){yZ(this,"uuid"),this.config=t,this.uuid=i!=null?i:RZ()}async send(t){var i,n,o;const{appId:l,sourceType:I}=(i=gg())!=null?i:{};if(!l||!I)return"metadata missing";const m=new AbortController,Z=setTimeout(()=>m.abort(),GZ);return await((o=(n=this.config)==null?void 0:n.fetch)!=null?o:fetch)(this.getUrl(),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(this.buildReport(t)),signal:m.signal}),clearTimeout(Z),"success"}getUrl(){var t;let i=(t=gg().proxyUrl)!=null?t:fZ;return i+=(i.at(-1)==="/"?"":"/")+ZZ,i}getHeaders(){return{"Content-Type":"application/json"}}buildReport(t){const i=gg();return{guid:this.uuid,...t,applicationId:i.appId,timestamp:Date.now(),proxyUrl:i.proxyUrl,source:i.sourceType}}};const dg="2.0.4";let KZ=class{constructor(t,i){this.config=t,this.frameTransformedCount=0,this.frameFromSourceCount=0,this.startAt=0,this.reporter=new PI(t,i)}async onFrameFromSource(){this.frameFromSourceCount++}get fps(){const{startAt:t,frameFromSourceCount:i}=this,n=(Date.now()-t)/1e3;return i/n}async onFrameTransformed(t={},i=!1){this.startAt===0&&(this.startAt=Date.now()),this.frameTransformedCount++;const{startAt:n,frameTransformedCount:o,frameFromSourceCount:l}=this,I=Date.now(),m=(I-n)/1e3,Z=o/m,x=l/m;return i||this.frameTransformedCount>=this.config.loggingIntervalFrameCount?(this.frameFromSourceCount=0,this.frameTransformedCount=0,this.startAt=I,this.reporter.config=this.config,this.reporter.send({...this.config.report,variation:"QoS",fps:x,transformedFps:Z,framesTransformed:o,...t})):"success"}};var eI=(e=>(e.pipeline_ended="pipeline_ended",e.pipeline_ended_with_error="pipeline_ended_with_error",e.pipeline_started="pipeline_started",e.pipeline_started_with_error="pipeline_started_with_error",e.pipeline_restarted="pipeline_restarted",e.pipeline_restarted_with_error="pipeline_restarted_with_error",e))(eI||{});const UZ=500,EZ=.8;let QZ=class extends jI{constructor(t,i){super(),this.reporter_=new PI,this.reporterQos_=new KZ({loggingIntervalFrameCount:UZ,report:{version:dg}}),this.index_=i,this.transformer_=t,this.shouldStop_=!1,this.isFlashed_=!1,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in t&&(this.transformerType_=t.getTransformerType()),this.report({variation:"Create"})}setTrackExpectedRate(t){this.trackExpectedRate_=t}async start(t){if(this.controller_=t,this.transformer_&&typeof this.transformer_.start=="function")try{await this.transformer_.start(t)}catch(i){this.report({message:as.errors.transformer_start,variation:"Error",error:la(i)});const n={eventMetaData:{transformerIndex:this.index_},error:i,function:"start"};this.emit("error",n)}}async transform(t,i){var l,I;var n,o;if(this.mediaTransformerQosReportStartTimestamp_===0&&(this.mediaTransformerQosReportStartTimestamp_=Date.now()),t instanceof VideoFrame&&(this.videoHeight_=(l=t==null?void 0:t.displayHeight)!=null?l:0,this.videoWidth_=(I=t==null?void 0:t.displayWidth)!=null?I:0),this.reporterQos_.onFrameFromSource(),this.transformer_)if(this.shouldStop_)console.warn("[Pipeline] flush from transform"),t.close(),this.flush(i),i.terminate();else{try{await((o=(n=this.transformer_).transform)==null?void 0:o.call(n,t,i)),this.reportQos()}catch(m){this.report({message:as.errors.transformer_transform,variation:"Error",error:la(m)});const Z={eventMetaData:{transformerIndex:this.index_},error:m,function:"transform"};this.emit("error",Z)}if(this.trackExpectedRate_!=-1&&this.trackExpectedRate_*EZ>this.reporterQos_.fps){const m={eventMetaData:{transformerIndex:this.index_},warningType:"fps_drop",dropInfo:{requested:this.trackExpectedRate_,current:this.reporterQos_.fps}};this.emit("warn",m)}}}async flush(t){if(this.transformer_&&typeof this.transformer_.flush=="function"&&!this.isFlashed_){this.isFlashed_=!0;try{await this.transformer_.flush(t)}catch(i){this.report({message:as.errors.transformer_flush,variation:"Error",error:la(i)});const n={eventMetaData:{transformerIndex:this.index_},error:i,function:"flush"};this.emit("error",n)}}this.reportQos(!0),this.report({variation:"Delete"})}stop(){console.log("[Pipeline] Stop stream."),this.controller_&&(this.flush(this.controller_),this.controller_.terminate()),this.shouldStop_=!0}report(t){this.reporter_.send({version:dg,action:"MediaTransformer",transformerType:this.transformerType_,...t})}reportQos(t=!1){this.reporterQos_.config={...this.reporterQos_.config},this.reporterQos_.onFrameTransformed({version:dg,action:"MediaTransformer",transformerType:this.transformerType_,videoWidth:this.videoWidth_,videoHeight:this.videoHeight_},t)}},DZ=class extends jI{constructor(t){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let i=0;i<t.length;i++){let n=new QZ(t[i],i);n.on("error",o=>{this.emit("error",o)}),n.on("warn",o=>{this.emit("warn",o)}),this.transformers_.push(n)}}setTrackExpectedRate(t){this.trackExpectedRate_=t;for(let i of this.transformers_)i.setTrackExpectedRate(this.trackExpectedRate_)}async start(t,i){if(!this.transformers_||this.transformers_.length===0){console.log("[Pipeline] No transformers.");return}try{let n=t;for(let o of this.transformers_)t=t.pipeThrough(new TransformStream(o));t.pipeTo(i).then(async()=>{console.log("[Pipeline] Setup."),await i.abort(),await n.cancel(),this.emit("pipelineInfo","pipeline_ended")}).catch(async o=>{t.cancel().then(()=>{console.log("[Pipeline] Shutting down streams after abort.")}).catch(l=>{console.error("[Pipeline] Error from stream transform:",l)}),await i.abort(o),await n.cancel(o),this.emit("pipelineInfo","pipeline_ended_with_error")})}catch{this.emit("pipelineInfo","pipeline_started_with_error"),this.destroy();return}this.emit("pipelineInfo","pipeline_started"),console.log("[Pipeline] Pipeline started.")}async destroy(){console.log("[Pipeline] Destroying Pipeline.");for(let t of this.transformers_)t.stop()}},OZ=class extends jI{constructor(){super(),this.reporter_=new PI,this.trackExpectedRate_=-1,this.report({variation:"Create"})}setTrackExpectedRate(t){this.trackExpectedRate_=t,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(t,i){return this.readable_=t,this.writable_=i,this.transformInternal()}transformInternal(){return new Promise(async(t,i)=>{if(!this.transformers_||this.transformers_.length===0){this.report({message:as.errors.transformer_none,variation:"Error"}),i("[MediaProcessor] Need to set transformers.");return}if(!this.readable_){this.report({variation:"Error",message:as.errors.readable_null}),i("[MediaProcessor] Readable is null.");return}if(!this.writable_){this.report({variation:"Error",message:as.errors.writable_null}),i("[MediaProcessor] Writable is null.");return}let n=!1;this.pipeline_&&(n=!0,this.pipeline_.clearListeners(),this.pipeline_.destroy()),this.pipeline_=new DZ(this.transformers_),this.pipeline_.on("warn",o=>{this.emit("warn",o)}),this.pipeline_.on("error",o=>{this.emit("error",o)}),this.pipeline_.on("pipelineInfo",o=>{n&&(o==="pipeline_started"?o=eI.pipeline_restarted:o==="pipeline_started_with_error"&&(o=eI.pipeline_restarted_with_error)),this.emit("pipelineInfo",o)}),this.trackExpectedRate_!=-1&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then(()=>{t()}).catch(o=>{i(o)})})}setTransformers(t){return this.report({variation:"Update",message:as.updates.transformer_new}),this.transformers_=t,this.readable_&&this.writable_?this.transformInternal():Promise.resolve()}destroy(){return new Promise(async t=>{this.pipeline_&&this.pipeline_.destroy(),this.report({variation:"Delete"}),t()})}report(t){this.reporter_.send({version:dg,action:"MediaProcessor",...t})}},jZ=class{constructor(){this.processor_=null,this.generator_=null}init(t){return new Promise((i,n)=>{try{this.processor_=new MediaStreamTrackProcessor(t)}catch(o){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${o}`),n(o)}try{t.kind==="audio"?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):t.kind==="video"?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):n("kind not supported")}catch(o){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${o}`),n(o)}i()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}},_Z=class{constructor(t){this.insertableStreamHelper_=new jZ,this.mediaProcessor_=t}setTrack(t){return new Promise((i,n)=>{this.insertableStreamHelper_.init(t).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{i(this.insertableStreamHelper_.getProccesorTrack())}).catch(o=>{n(o)})}).catch(o=>{n(o)})})}destroy(){return new Promise((t,i)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{t()}).catch(n=>{i(n)}):i("no processor")})}};var ws=(e=>(e.Low="Low",e.High="High",e))(ws||{}),er=(e=>(e.BackgroundBlur="BackgroundBlur",e.VirtualBackground="VirtualBackground",e.VideoBackground="VideoBackground",e.SilhouetteBlur="SilhouetteBlur",e))(er||{}),oc=(e=>(e.FAST="FAST",e.PRECISE="PRECISE",e))(oc||{}),gr=(e=>(e.CANVAS="CANVAS",e.WEBGL="WEBGL",e))(gr||{});const PZ=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));async function qZ(e,t){const{wasm:i,insertableStreams:n,simd:o,webgl:l}=await $Z();if(!i.supported)throw i.message;if(!n.supported)throw n.message;if(!o.supported)throw o.message;if(!l.supported)throw l.message}async function $Z(e,t){const i={wasm:{supported:typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function",message:"Your browser does not support WebAssembly features."},simd:{supported:await PZ(),message:"Your browser does not support simd features."},insertableStreams:{supported:!0},gpu:{message:"Your browser does not support gpu features.",supported:!0},webgl:t3(),performance:Dh()};try{await IZ()}catch(n){i.insertableStreams.supported=!1,i.insertableStreams.message=n}return i}function t3(){return OffscreenCanvas?new OffscreenCanvas(0,0).getContext("webgl2")?{supported:!0}:{supported:!1,message:"Your browser does not support webgl 2"}:{supported:!1,message:"Your browser does not support offscreen canvas"}}function Dh(){return new OffscreenCanvas(0,0).getContext("webgl2",{failIfMajorPerformanceCaveat:!0})?{supported:!0}:{supported:!1,message:"Your hardware does not perform good enough to run the library efficiently"}}const e3={};(function(){var e;function t(A){var X=0;return function(){return X<A.length?{done:!1,value:A[X++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,X,R){return A==Array.prototype||A==Object.prototype||(A[X]=R.value),A};function n(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var X=0;X<A.length;++X){var R=A[X];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var o=n(this);function l(A,X){if(X)t:{var R=o;A=A.split(".");for(var k=0;k<A.length-1;k++){var $=A[k];if(!($ in R))break t;R=R[$]}A=A[A.length-1],k=R[A],X=X(k),X!=k&&X!=null&&i(R,A,{configurable:!0,writable:!0,value:X})}}l("Symbol",function(A){function X(It){if(this instanceof X)throw new TypeError("Symbol is not a constructor");return new R(k+(It||"")+"_"+$++,It)}function R(It,q){this.g=It,i(this,"description",{configurable:!0,writable:!0,value:q})}if(A)return A;R.prototype.toString=function(){return this.g};var k="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",$=0;return X}),l("Symbol.iterator",function(A){if(A)return A;A=Symbol("Symbol.iterator");for(var X="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),R=0;R<X.length;R++){var k=o[X[R]];typeof k=="function"&&typeof k.prototype[A]!="function"&&i(k.prototype,A,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return A});function I(A){return A={next:A},A[Symbol.iterator]=function(){return this},A}function m(A){var X=typeof Symbol!="undefined"&&Symbol.iterator&&A[Symbol.iterator];return X?X.call(A):{next:t(A)}}function Z(A){if(!(A instanceof Array)){A=m(A);for(var X,R=[];!(X=A.next()).done;)R.push(X.value);A=R}return A}var x=typeof Object.create=="function"?Object.create:function(A){function X(){}return X.prototype=A,new X},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var st={a:!0},ut={};try{ut.__proto__=st,K=ut.a;break t}catch{}K=!1}L=K?function(A,X){if(A.__proto__=X,A.__proto__!==X)throw new TypeError(A+" is not extensible");return A}:null}var P=L;function ct(A,X){if(A.prototype=x(X.prototype),A.prototype.constructor=A,P)P(A,X);else for(var R in X)if(R!="prototype")if(Object.defineProperties){var k=Object.getOwnPropertyDescriptor(X,R);k&&Object.defineProperty(A,R,k)}else A[R]=X[R];A.ea=X.prototype}function Rt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Bt(A){if(A.l)throw new TypeError("Generator is already running");A.l=!0}Rt.prototype.o=function(A){this.h=A};function Yt(A,X){A.j={U:X,V:!0},A.g=A.m||A.s}Rt.prototype.return=function(A){this.j={return:A},this.g=this.s};function _(A,X,R){return A.g=R,{value:X}}function qe(A){this.g=new Rt,this.h=A}function ni(A,X){Bt(A.g);var R=A.g.i;return R?we(A,"return"in R?R.return:function(k){return{value:k,done:!0}},X,A.g.return):(A.g.return(X),qt(A))}function we(A,X,R,k){try{var $=X.call(A.g.i,R);if(!($ instanceof Object))throw new TypeError("Iterator result "+$+" is not an object");if(!$.done)return A.g.l=!1,$;var It=$.value}catch(q){return A.g.i=null,Yt(A.g,q),qt(A)}return A.g.i=null,k.call(A.g,It),qt(A)}function qt(A){for(;A.g.g;)try{var X=A.h(A.g);if(X)return A.g.l=!1,{value:X.value,done:!1}}catch(R){A.g.h=void 0,Yt(A.g,R)}if(A.g.l=!1,A.g.j){if(X=A.g.j,A.g.j=null,X.V)throw X.U;return{value:X.return,done:!0}}return{value:void 0,done:!0}}function Bn(A){this.next=function(X){return Bt(A.g),A.g.i?X=we(A,A.g.i.next,X,A.g.o):(A.g.o(X),X=qt(A)),X},this.throw=function(X){return Bt(A.g),A.g.i?X=we(A,A.g.i.throw,X,A.g.o):(Yt(A.g,X),X=qt(A)),X},this.return=function(X){return ni(A,X)},this[Symbol.iterator]=function(){return this}}function ge(A,X){return X=new Bn(new qe(X)),P&&A.prototype&&P(X,A.prototype),X}function ft(A,X){A instanceof String&&(A+="");var R=0,k=!1,$={next:function(){if(!k&&R<A.length){var It=R++;return{value:X(It,A[It]),done:!1}}return k=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}var Yi=typeof Object.assign=="function"?Object.assign:function(A,X){for(var R=1;R<arguments.length;R++){var k=arguments[R];if(k)for(var $ in k)Object.prototype.hasOwnProperty.call(k,$)&&(A[$]=k[$])}return A};l("Object.assign",function(A){return A||Yi}),l("Promise",function(A){function X(q){this.h=0,this.i=void 0,this.g=[],this.o=!1;var dt=this.j();try{q(dt.resolve,dt.reject)}catch(yt){dt.reject(yt)}}function R(){this.g=null}function k(q){return q instanceof X?q:new X(function(dt){dt(q)})}if(A)return A;R.prototype.h=function(q){if(this.g==null){this.g=[];var dt=this;this.i(function(){dt.l()})}this.g.push(q)};var $=o.setTimeout;R.prototype.i=function(q){$(q,0)},R.prototype.l=function(){for(;this.g&&this.g.length;){var q=this.g;this.g=[];for(var dt=0;dt<q.length;++dt){var yt=q[dt];q[dt]=null;try{yt()}catch(St){this.j(St)}}}this.g=null},R.prototype.j=function(q){this.i(function(){throw q})},X.prototype.j=function(){function q(St){return function(Et){yt||(yt=!0,St.call(dt,Et))}}var dt=this,yt=!1;return{resolve:q(this.C),reject:q(this.l)}},X.prototype.C=function(q){if(q===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(q instanceof X)this.F(q);else{t:switch(typeof q){case"object":var dt=q!=null;break t;case"function":dt=!0;break t;default:dt=!1}dt?this.u(q):this.m(q)}},X.prototype.u=function(q){var dt=void 0;try{dt=q.then}catch(yt){this.l(yt);return}typeof dt=="function"?this.G(dt,q):this.m(q)},X.prototype.l=function(q){this.s(2,q)},X.prototype.m=function(q){this.s(1,q)},X.prototype.s=function(q,dt){if(this.h!=0)throw Error("Cannot settle("+q+", "+dt+"): Promise already settled in state"+this.h);this.h=q,this.i=dt,this.h===2&&this.D(),this.A()},X.prototype.D=function(){var q=this;$(function(){if(q.B()){var dt=o.console;typeof dt!="undefined"&&dt.error(q.i)}},1)},X.prototype.B=function(){if(this.o)return!1;var q=o.CustomEvent,dt=o.Event,yt=o.dispatchEvent;return typeof yt=="undefined"?!0:(typeof q=="function"?q=new q("unhandledrejection",{cancelable:!0}):typeof dt=="function"?q=new dt("unhandledrejection",{cancelable:!0}):(q=o.document.createEvent("CustomEvent"),q.initCustomEvent("unhandledrejection",!1,!0,q)),q.promise=this,q.reason=this.i,yt(q))},X.prototype.A=function(){if(this.g!=null){for(var q=0;q<this.g.length;++q)It.h(this.g[q]);this.g=null}};var It=new R;return X.prototype.F=function(q){var dt=this.j();q.J(dt.resolve,dt.reject)},X.prototype.G=function(q,dt){var yt=this.j();try{q.call(dt,yt.resolve,yt.reject)}catch(St){yt.reject(St)}},X.prototype.then=function(q,dt){function yt(re,zt){return typeof re=="function"?function(xt){try{St(re(xt))}catch(Ut){Et(Ut)}}:zt}var St,Et,kt=new X(function(re,zt){St=re,Et=zt});return this.J(yt(q,St),yt(dt,Et)),kt},X.prototype.catch=function(q){return this.then(void 0,q)},X.prototype.J=function(q,dt){function yt(){switch(St.h){case 1:q(St.i);break;case 2:dt(St.i);break;default:throw Error("Unexpected state: "+St.h)}}var St=this;this.g==null?It.h(yt):this.g.push(yt),this.o=!0},X.resolve=k,X.reject=function(q){return new X(function(dt,yt){yt(q)})},X.race=function(q){return new X(function(dt,yt){for(var St=m(q),Et=St.next();!Et.done;Et=St.next())k(Et.value).J(dt,yt)})},X.all=function(q){var dt=m(q),yt=dt.next();return yt.done?k([]):new X(function(St,Et){function kt(xt){return function(Ut){re[xt]=Ut,zt--,zt==0&&St(re)}}var re=[],zt=0;do re.push(void 0),zt++,k(yt.value).J(kt(re.length-1),Et),yt=dt.next();while(!yt.done)})},X}),l("Object.is",function(A){return A||function(X,R){return X===R?X!==0||1/X===1/R:X!==X&&R!==R}}),l("Array.prototype.includes",function(A){return A||function(X,R){var k=this;k instanceof String&&(k=String(k));var $=k.length;for(R=R||0,0>R&&(R=Math.max(R+$,0));R<$;R++){var It=k[R];if(It===X||Object.is(It,X))return!0}return!1}}),l("String.prototype.includes",function(A){return A||function(X,R){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(X instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(X,R||0)!==-1}}),l("Array.prototype.keys",function(A){return A||function(){return ft(this,function(X){return X})}});var Jn=this||self;function He(A,X){A=A.split(".");var R=Jn;A[0]in R||typeof R.execScript=="undefined"||R.execScript("var "+A[0]);for(var k;A.length&&(k=A.shift());)A.length||X===void 0?R[k]&&R[k]!==Object.prototype[k]?R=R[k]:R=R[k]={}:R[k]=X}function Tt(A,X){return X=String.fromCharCode.apply(null,X),A==null?X:A+X}var Je,yi=typeof TextDecoder!="undefined",Oi,An=typeof TextEncoder!="undefined";function sn(A){if(An)A=(Oi||(Oi=new TextEncoder)).encode(A);else{var X=void 0;X=X===void 0?!1:X;for(var R=0,k=new Uint8Array(3*A.length),$=0;$<A.length;$++){var It=A.charCodeAt($);if(128>It)k[R++]=It;else{if(2048>It)k[R++]=It>>6|192;else{if(55296<=It&&57343>=It){if(56319>=It&&$<A.length){var q=A.charCodeAt(++$);if(56320<=q&&57343>=q){It=1024*(It-55296)+q-56320+65536,k[R++]=It>>18|240,k[R++]=It>>12&63|128,k[R++]=It>>6&63|128,k[R++]=It&63|128;continue}else $--}if(X)throw Error("Found an unpaired surrogate");It=65533}k[R++]=It>>12|224,k[R++]=It>>6&63|128}k[R++]=It&63|128}}A=k.subarray(0,R)}return A}var Xn={},Si=null;function Mi(A,X){X===void 0&&(X=0),oi(),X=Xn[X];for(var R=Array(Math.floor(A.length/3)),k=X[64]||"",$=0,It=0;$<A.length-2;$+=3){var q=A[$],dt=A[$+1],yt=A[$+2],St=X[q>>2];q=X[(q&3)<<4|dt>>4],dt=X[(dt&15)<<2|yt>>6],yt=X[yt&63],R[It++]=St+q+dt+yt}switch(St=0,yt=k,A.length-$){case 2:St=A[$+1],yt=X[(St&15)<<2]||k;case 1:A=A[$],R[It]=X[A>>2]+X[(A&3)<<4|St>>4]+yt+k}return R.join("")}function Fn(A){var X=A.length,R=3*X/4;R%3?R=Math.floor(R):"=.".indexOf(A[X-1])!=-1&&(R="=.".indexOf(A[X-2])!=-1?R-2:R-1);var k=new Uint8Array(R),$=0;return yn(A,function(It){k[$++]=It}),k.subarray(0,$)}function yn(A,X){function R(yt){for(;k<A.length;){var St=A.charAt(k++),Et=Si[St];if(Et!=null)return Et;if(!/^[\s\xa0]*$/.test(St))throw Error("Unknown base64 encoding at char: "+St)}return yt}oi();for(var k=0;;){var $=R(-1),It=R(0),q=R(64),dt=R(64);if(dt===64&&$===-1)break;X($<<2|It>>4),q!=64&&(X(It<<4&240|q>>2),dt!=64&&X(q<<6&192|dt))}}function oi(){if(!Si){Si={};for(var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),X=["+/=","+/","-_=","-_.","-_"],R=0;5>R;R++){var k=A.concat(X[R].split(""));Xn[R]=k;for(var $=0;$<k.length;$++){var It=k[$];Si[It]===void 0&&(Si[It]=$)}}}}var ei=typeof Uint8Array.prototype.slice=="function",rn;function ji(A,X,R){return X===R?rn||(rn=new Uint8Array(0)):ei?A.slice(X,R):new Uint8Array(A.subarray(X,R))}var Ae=0,Me=0;function si(A,X){X=X===void 0?{}:X,X=X.v===void 0?!1:X.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=X,A&&de(this,A)}function de(A,X){X=X.constructor===Uint8Array?X:X.constructor===ArrayBuffer?new Uint8Array(X):X.constructor===Array?new Uint8Array(X):X.constructor===String?Fn(X):X instanceof Uint8Array?new Uint8Array(X.buffer,X.byteOffset,X.byteLength):new Uint8Array(0),A.h=X,A.j=0,A.i=A.h.length,A.g=A.j}si.prototype.reset=function(){this.g=this.j};function Fe(A){var X=A.h,R=X[A.g],k=R&127;return 128>R?(A.g+=1,k):(R=X[A.g+1],k|=(R&127)<<7,128>R?(A.g+=2,k):(R=X[A.g+2],k|=(R&127)<<14,128>R?(A.g+=3,k):(R=X[A.g+3],k|=(R&127)<<21,128>R?(A.g+=4,k):(R=X[A.g+4],k|=(R&15)<<28,128>R?(A.g+=5,k>>>0):(A.g+=5,128<=X[A.g++]&&128<=X[A.g++]&&128<=X[A.g++]&&128<=X[A.g++]&&A.g++,k)))))}function Zi(A){var X=A.h[A.g],R=A.h[A.g+1],k=A.h[A.g+2],$=A.h[A.g+3];return A.g+=4,R=(X<<0|R<<8|k<<16|$<<24)>>>0,A=2*(R>>31)+1,X=R>>>23&255,R&=8388607,X==255?R?NaN:1/0*A:X==0?A*Math.pow(2,-149)*R:A*Math.pow(2,X-150)*(R+Math.pow(2,23))}var $e=[];function ne(){this.g=new Uint8Array(64),this.h=0}ne.prototype.push=function(A){if(!(this.h+1<this.g.length)){var X=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(X)}this.g[this.h++]=A},ne.prototype.length=function(){return this.h},ne.prototype.end=function(){var A=this.g,X=this.h;return this.h=0,ji(A,0,X)};function Xe(A,X){for(;127<X;)A.push(X&127|128),X>>>=7;A.push(X)}function Ue(A){var X={},R=X.N===void 0?!1:X.N;this.o={v:X.v===void 0?!1:X.v},this.N=R,X=this.o,$e.length?(R=$e.pop(),X&&(R.v=X.v),A&&de(R,A),A=R):A=new si(A,X),this.g=A,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Ue.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function Dt(A){var X=A.g;if((X=X.g==X.i)||(X=A.j)||(X=A.g,X=X.l||0>X.g||X.g>X.i),X)return!1;A.m=A.g.g,X=Fe(A.g);var R=X&7;return R!=0&&R!=5&&R!=1&&R!=2&&R!=3&&R!=4?(A.j=!0,!1):(A.i=X,A.l=X>>>3,A.h=R,!0)}function xe(A){switch(A.h){case 0:if(A.h!=0)xe(A);else{for(A=A.g;A.h[A.g]&128;)A.g++;A.g++}break;case 1:A.h!=1?xe(A):(A=A.g,A.g+=8);break;case 2:if(A.h!=2)xe(A);else{var X=Fe(A.g);A=A.g,A.g+=X}break;case 5:A.h!=5?xe(A):(A=A.g,A.g+=4);break;case 3:X=A.l;do{if(!Dt(A)){A.j=!0;break}if(A.h==4){A.l!=X&&(A.j=!0);break}xe(A)}while(1);break;default:A.j=!0}}function $t(A,X,R){var k=A.g.i,$=Fe(A.g);return $=A.g.g+$,A.g.i=$,R(X,A),A.g.g=$,A.g.i=k,X}function Ge(A){var X=Fe(A.g);A=A.g;var R=A.g;A.g+=X,A=A.h;var k;if(yi)(k=Je)||(k=Je=new TextDecoder("utf-8",{fatal:!1})),k=k.decode(A.subarray(R,R+X));else{X=R+X;for(var $=[],It=null,q,dt,yt;R<X;)q=A[R++],128>q?$.push(q):224>q?R>=X?$.push(65533):(dt=A[R++],194>q||(dt&192)!==128?(R--,$.push(65533)):$.push((q&31)<<6|dt&63)):240>q?R>=X-1?$.push(65533):(dt=A[R++],(dt&192)!==128||q===224&&160>dt||q===237&&160<=dt||((k=A[R++])&192)!==128?(R--,$.push(65533)):$.push((q&15)<<12|(dt&63)<<6|k&63)):244>=q?R>=X-2?$.push(65533):(dt=A[R++],(dt&192)!==128||(q<<28)+(dt-144)>>30!==0||((k=A[R++])&192)!==128||((yt=A[R++])&192)!==128?(R--,$.push(65533)):(q=(q&7)<<18|(dt&63)<<12|(k&63)<<6|yt&63,q-=65536,$.push((q>>10&1023)+55296,(q&1023)+56320))):$.push(65533),8192<=$.length&&(It=Tt(It,$),$.length=0);k=Tt(It,$)}return k}function Te(){this.h=[],this.i=0,this.g=new ne}function di(A,X){X.length!==0&&(A.h.push(X),A.i+=X.length)}function Se(A){var X=A.i+A.g.length();if(X===0)return new Uint8Array(0);X=new Uint8Array(X);for(var R=A.h,k=R.length,$=0,It=0;It<k;It++){var q=R[It];q.length!==0&&(X.set(q,$),$+=q.length)}return R=A.g,k=R.h,k!==0&&(X.set(R.g.subarray(0,k),$),R.h=0),A.h=[X],X}function te(A,X,R){if(R!=null){Xe(A.g,8*X+5),A=A.g;var k=R;k=(R=0>k?1:0)?-k:k,k===0?0<1/k?Ae=Me=0:(Me=0,Ae=2147483648):isNaN(k)?(Me=0,Ae=2147483647):34028234663852886e22<k?(Me=0,Ae=(R<<31|2139095040)>>>0):11754943508222875e-54>k?(k=Math.round(k/Math.pow(2,-149)),Me=0,Ae=(R<<31|k)>>>0):(X=Math.floor(Math.log(k)/Math.LN2),k*=Math.pow(2,-X),k=Math.round(8388608*k)&8388607,Me=0,Ae=(R<<31|X+127<<23|k)>>>0),R=Ae,A.push(R>>>0&255),A.push(R>>>8&255),A.push(R>>>16&255),A.push(R>>>24&255)}}var ii=typeof Uint8Array=="function";function ri(A,X,R){if(A!=null)return typeof A=="object"?ii&&A instanceof Uint8Array?R(A):Ne(A,X,R):X(A)}function Ne(A,X,R){if(Array.isArray(A)){for(var k=Array(A.length),$=0;$<A.length;$++)k[$]=ri(A[$],X,R);return Array.isArray(A)&&A.W&&li(k),k}k={};for($ in A)k[$]=ri(A[$],X,R);return k}function _i(A){return typeof A=="number"?isFinite(A)?A:String(A):A}var fi={W:{value:!0,configurable:!0}};function li(A){return Array.isArray(A)&&!Object.isFrozen(A)&&Object.defineProperties(A,fi),A}var Gi;function Re(A,X,R){var k=Gi;Gi=null,A||(A=k),k=this.constructor.ca,A||(A=k?[k]:[]),this.j=k?0:-1,this.i=null,this.g=A;t:{if(k=this.g.length,A=k-1,k&&(k=this.g[A],k!==null&&typeof k=="object"&&k.constructor===Object)){this.l=A-this.j,this.h=k;break t}X!==void 0&&-1<X?(this.l=Math.max(X,A+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(R)for(X=0;X<R.length;X++)A=R[X],A<this.l?(A+=this.j,(k=this.g[A])?li(k):this.g[A]=ke):(ve(this),(k=this.h[A])?li(k):this.h[A]=ke)}var ke=Object.freeze(li([]));function ve(A){var X=A.l+A.j;A.g[X]||(A.h=A.g[X]={})}function ae(A,X,R){return X===-1?null:(R===void 0?0:R)||X>=A.l?A.h?A.h[X]:void 0:A.g[X+A.j]}function ci(A){var X=X===void 0?!1:X,R=ae(A,1,X);return R==null&&(R=ke),R===ke&&(R=li([]),ee(A,1,R,X)),R}function le(A,X,R){return A=ae(A,X),A=A==null?A:+A,A==null?R===void 0?0:R:A}function ee(A,X,R,k){(k===void 0?0:k)||X>=A.l?(ve(A),A.h[X]=R):A.g[X+A.j]=R}function wi(A,X){A.i||(A.i={});var R=A.i[1];if(!R){var k=ci(A);R=[];for(var $=0;$<k.length;$++)R[$]=new X(k[$]);A.i[1]=R}return R}function ye(A,X,R,k){var $=wi(A,R);X=X||new R,A=ci(A),k!=null?($.splice(k,0,X),A.splice(k,0,Jt(X))):($.push(X),A.push(Jt(X)))}Re.prototype.toJSON=function(){var A=Jt(this);return Ne(A,_i,Mi)};function Jt(A,X){if(A.i)for(var R in A.i){var k=A.i[R];if(Array.isArray(k))for(var $=0;$<k.length;$++)k[$]&&Jt(k[$]);else k&&Jt(k)}return A.g}Re.prototype.toString=function(){return Jt(this).toString()};function vt(A,X){return A=ae(A,X),A==null?0:A}function Ie(A,X){return A=ae(A,X),A==null?"":A}function ze(A,X){if(A=A.m){di(X,X.g.end());for(var R=0;R<A.length;R++)di(X,A[R])}}function ce(A,X){if(X.h==4)return!1;var R=X.m;return xe(X),X.N||(X=ji(X.g.h,R,X.g.g),(R=A.m)?R.push(X):A.m=[X]),!0}function ue(A,X){var R=void 0;return new(R||(R=Promise))(function(k,$){function It(yt){try{dt(X.next(yt))}catch(St){$(St)}}function q(yt){try{dt(X.throw(yt))}catch(St){$(St)}}function dt(yt){yt.done?k(yt.value):new R(function(St){St(yt.value)}).then(It,q)}dt((X=X.apply(A,void 0)).next())})}function rt(A){Re.call(this,A)}ct(rt,Re);function at(A,X){for(;Dt(X);)switch(X.i){case 8:var R=Fe(X.g);ee(A,1,R);break;case 21:R=Zi(X.g),ee(A,2,R);break;case 26:R=Ge(X),ee(A,3,R);break;case 34:R=Ge(X),ee(A,4,R);break;default:if(!ce(A,X))return A}return A}function ht(A){Re.call(this,A,-1,ie)}ct(ht,Re),ht.prototype.addClassification=function(A,X){ye(this,A,rt,X)};var ie=[1];function pe(A){Re.call(this,A)}ct(pe,Re);function he(A,X){for(;Dt(X);)switch(X.i){case 13:var R=Zi(X.g);ee(A,1,R);break;case 21:R=Zi(X.g),ee(A,2,R);break;case 29:R=Zi(X.g),ee(A,3,R);break;case 37:R=Zi(X.g),ee(A,4,R);break;case 45:R=Zi(X.g),ee(A,5,R);break;default:if(!ce(A,X))return A}return A}function Ht(A){Re.call(this,A,-1,Ze)}ct(Ht,Re);var Ze=[1];function Ee(A){Re.call(this,A)}ct(Ee,Re);function ai(A,X,R){if(R=A.createShader(R===0?A.VERTEX_SHADER:A.FRAGMENT_SHADER),A.shaderSource(R,X),A.compileShader(R),!A.getShaderParameter(R,A.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+A.getShaderInfoLog(R));return R}function Ii(A){return wi(A,rt).map(function(X){return{index:vt(X,1),Y:le(X,2),label:ae(X,3)!=null?Ie(X,3):void 0,displayName:ae(X,4)!=null?Ie(X,4):void 0}})}function Fi(A){return{x:le(A,1),y:le(A,2),z:le(A,3),visibility:ae(A,4)!=null?le(A,4):void 0}}function Li(A,X){this.h=A,this.g=X,this.l=0}function Ke(A,X,R){return ui(A,X),typeof A.g.canvas.transferToImageBitmap=="function"?Promise.resolve(A.g.canvas.transferToImageBitmap()):R?Promise.resolve(A.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(A.g.canvas):(A.i===void 0&&(A.i=document.createElement("canvas")),new Promise(function(k){A.i.height=A.g.canvas.height,A.i.width=A.g.canvas.width,A.i.getContext("2d",{}).drawImage(A.g.canvas,0,0,A.g.canvas.width,A.g.canvas.height),k(A.i)}))}function ui(A,X){var R=A.g;if(A.m===void 0){var k=ai(R,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),$=ai(R,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),It=R.createProgram();if(R.attachShader(It,k),R.attachShader(It,$),R.linkProgram(It),!R.getProgramParameter(It,R.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+R.getProgramInfoLog(It));k=A.m=It,R.useProgram(k),$=R.getUniformLocation(k,"sampler0"),A.j={I:R.getAttribLocation(k,"aVertex"),H:R.getAttribLocation(k,"aTex"),da:$},A.s=R.createBuffer(),R.bindBuffer(R.ARRAY_BUFFER,A.s),R.enableVertexAttribArray(A.j.I),R.vertexAttribPointer(A.j.I,2,R.FLOAT,!1,0,0),R.bufferData(R.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),R.STATIC_DRAW),R.bindBuffer(R.ARRAY_BUFFER,null),A.o=R.createBuffer(),R.bindBuffer(R.ARRAY_BUFFER,A.o),R.enableVertexAttribArray(A.j.H),R.vertexAttribPointer(A.j.H,2,R.FLOAT,!1,0,0),R.bufferData(R.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),R.STATIC_DRAW),R.bindBuffer(R.ARRAY_BUFFER,null),R.uniform1i($,0)}k=A.j,R.useProgram(A.m),R.canvas.width=X.width,R.canvas.height=X.height,R.viewport(0,0,X.width,X.height),R.activeTexture(R.TEXTURE0),A.h.bindTexture2d(X.glName),R.enableVertexAttribArray(k.I),R.bindBuffer(R.ARRAY_BUFFER,A.s),R.vertexAttribPointer(k.I,2,R.FLOAT,!1,0,0),R.enableVertexAttribArray(k.H),R.bindBuffer(R.ARRAY_BUFFER,A.o),R.vertexAttribPointer(k.H,2,R.FLOAT,!1,0,0),R.bindFramebuffer(R.DRAW_FRAMEBUFFER?R.DRAW_FRAMEBUFFER:R.FRAMEBUFFER,null),R.clearColor(0,0,0,0),R.clear(R.COLOR_BUFFER_BIT),R.colorMask(!0,!0,!0,!0),R.drawArrays(R.TRIANGLE_FAN,0,4),R.disableVertexAttribArray(k.I),R.disableVertexAttribArray(k.H),R.bindBuffer(R.ARRAY_BUFFER,null),A.h.bindTexture2d(0)}function Tn(A){this.g=A}var Ci=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Qe(A,X){return X+A}function zi(A,X){window[A]=X}function ln(A){var X=document.createElement("script");return X.setAttribute("src",A),X.setAttribute("crossorigin","anonymous"),new Promise(function(R){X.addEventListener("load",function(){R()},!1),X.addEventListener("error",function(){R()},!1),document.body.appendChild(X)})}function ti(){return ue(this,function A(){return ge(A,function(X){switch(X.g){case 1:return X.m=2,_(X,WebAssembly.instantiate(Ci),4);case 4:X.g=3,X.m=0;break;case 2:return X.m=0,X.j=null,X.return(!1);case 3:return X.return(!0)}})})}function Hn(A){if(this.g=A,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=A&&A.locateFile||Qe,typeof window=="object")var X=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")X=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=X,A.options){X=m(Object.keys(A.options));for(var R=X.next();!R.done;R=X.next()){R=R.value;var k=A.options[R].default;k!==void 0&&(this.j[R]=typeof k=="function"?k():k)}}}e=Hn.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function mi(A,X){return A.g.files===void 0?[]:typeof A.g.files=="function"?A.g.files(X):A.g.files}function Ki(A){return ue(A,function X(){var R=this,k,$,It,q,dt,yt,St,Et,kt,re,zt;return ge(X,function(xt){switch(xt.g){case 1:return k=R,R.R?($=mi(R,R.j),_(xt,ti(),2)):xt.return();case 2:if(It=xt.h,typeof window=="object")return zi("createMediapipeSolutionsWasm",{locateFile:R.locateFile}),zi("createMediapipeSolutionsPackedAssets",{locateFile:R.locateFile}),yt=$.filter(function(Ut){return Ut.data!==void 0}),St=$.filter(function(Ut){return Ut.data===void 0}),Et=Promise.all(yt.map(function(Ut){var oe=Vi(k,Ut.url);if(Ut.path!==void 0){var be=Ut.path;oe=oe.then(function(fe){return k.overrideFile(be,fe),Promise.resolve(fe)})}return oe})),kt=Promise.all(St.map(function(Ut){return Ut.simd===void 0||Ut.simd&&It||!Ut.simd&&!It?ln(k.locateFile(Ut.url,k.S)):Promise.resolve()})).then(function(){return ue(k,function Ut(){var oe,be,fe=this;return ge(Ut,function(Ve){if(Ve.g==1)return oe=window.createMediapipeSolutionsWasm,be=window.createMediapipeSolutionsPackedAssets,_(Ve,oe(be),2);fe.h=Ve.h,Ve.g=0})})}),re=function(){return ue(k,function Ut(){var oe=this;return ge(Ut,function(be){return oe.g.graph&&oe.g.graph.url?be=_(be,Vi(oe,oe.g.graph.url),0):(be.g=0,be=void 0),be})})}(),_(xt,Promise.all([kt,Et,re]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return q=$.filter(function(Ut){return Ut.simd===void 0||Ut.simd&&It||!Ut.simd&&!It}).map(function(Ut){return k.locateFile(Ut.url,k.S)}),importScripts.apply(null,Z(q)),_(xt,createMediapipeSolutionsWasm(Module),6);case 6:R.h=xt.h,R.l=new OffscreenCanvas(1,1),R.h.canvas=R.l,dt=R.h.GL.createContext(R.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext!="undefined"?2:1}),R.h.GL.makeContextCurrent(dt),xt.g=4;break;case 7:if(R.l=document.createElement("canvas"),zt=R.l.getContext("webgl2",{}),!zt&&(zt=R.l.getContext("webgl",{}),!zt))return alert("Failed to create WebGL canvas context when passing video frame."),xt.return();R.D=zt,R.h.canvas=R.l,R.h.createContext(R.l,!0,!0,{});case 4:R.i=new R.h.SolutionWasm,R.R=!1,xt.g=0}})})}function Cn(A){return ue(A,function X(){var R=this,k,$,It,q,dt,yt,St,Et;return ge(X,function(kt){if(kt.g==1){if(R.g.graph&&R.g.graph.url&&R.P===R.g.graph.url)return kt.return();if(R.o=!0,!R.g.graph||!R.g.graph.url){kt.g=2;return}return R.P=R.g.graph.url,_(kt,Vi(R,R.g.graph.url),3)}for(kt.g!=2&&(k=kt.h,R.i.loadGraph(k)),$=m(Object.keys(R.B)),It=$.next();!It.done;It=$.next())q=It.value,R.i.overrideFile(q,R.B[q]);if(R.B={},R.g.listeners)for(dt=m(R.g.listeners),yt=dt.next();!yt.done;yt=dt.next())St=yt.value,eo(R,St);Et=R.j,R.j={},R.setOptions(Et),kt.g=0})})}e.reset=function(){return ue(this,function A(){var X=this;return ge(A,function(R){X.i&&(X.i.reset(),X.m={},X.s={}),R.g=0})})},e.setOptions=function(A,X){var R=this;if(X=X||this.g.options){for(var k=[],$=[],It={},q=m(Object.keys(A)),dt=q.next();!dt.done;It={K:It.K,L:It.L},dt=q.next()){var yt=dt.value;yt in this.j&&this.j[yt]===A[yt]||(this.j[yt]=A[yt],dt=X[yt],dt!==void 0&&(dt.onChange&&(It.K=dt.onChange,It.L=A[yt],k.push(function(St){return function(){return ue(R,function Et(){var kt,re=this;return ge(Et,function(zt){if(zt.g==1)return _(zt,St.K(St.L),2);kt=zt.h,kt===!0&&(re.o=!0),zt.g=0})})}}(It))),dt.graphOptionXref&&(yt={valueNumber:dt.type===1?A[yt]:0,valueBoolean:dt.type===0?A[yt]:!1,valueString:dt.type===2?A[yt]:""},dt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),dt.graphOptionXref),yt),$.push(dt))))}(k.length!==0||$.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat($),this.u=(this.u===void 0?[]:this.u).concat(k))}};function Yn(A){return ue(A,function X(){var R=this,k,$,It,q,dt,yt,St;return ge(X,function(Et){switch(Et.g){case 1:if(!R.o)return Et.return();if(!R.u){Et.g=2;break}k=m(R.u),$=k.next();case 3:if($.done){Et.g=5;break}return It=$.value,_(Et,It(),4);case 4:$=k.next(),Et.g=3;break;case 5:R.u=void 0;case 2:if(R.A){for(q=new R.h.GraphOptionChangeRequestList,dt=m(R.A),yt=dt.next();!yt.done;yt=dt.next())St=yt.value,q.push_back(St);R.i.changeOptions(q),q.delete(),R.A=void 0}R.o=!1,Et.g=0}})})}e.initialize=function(){return ue(this,function A(){var X=this;return ge(A,function(R){return R.g==1?_(R,Ki(X),2):R.g!=3?_(R,Cn(X),3):_(R,Yn(X),0)})})};function Vi(A,X){return ue(A,function R(){var k=this,$,It;return ge(R,function(q){return X in k.F?q.return(k.F[X]):($=k.locateFile(X,""),It=fetch($).then(function(dt){return dt.arrayBuffer()}),k.F[X]=It,q.return(It))})})}e.overrideFile=function(A,X){this.i?this.i.overrideFile(A,X):this.B[A]=X},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(A,X){return ue(this,function R(){var k=this,$,It,q,dt,yt,St,Et,kt,re;return ge(R,function(zt){switch(zt.g){case 1:return k.g.inputs?($=1e3*(X==null?performance.now():X),_(zt,k.C,2)):zt.return();case 2:return _(zt,k.initialize(),3);case 3:for(It=new k.h.PacketDataList,q=m(Object.keys(A)),dt=q.next();!dt.done;dt=q.next())if(yt=dt.value,St=k.g.inputs[yt]){t:{var xt=k,Ut=A[yt];switch(St.type){case"video":var oe=xt.m[St.stream];if(oe||(oe=new Li(xt.h,xt.D),xt.m[St.stream]=oe),xt=oe,xt.l===0&&(xt.l=xt.h.createTexture()),typeof HTMLVideoElement!="undefined"&&Ut instanceof HTMLVideoElement){var be=Ut.videoWidth;oe=Ut.videoHeight}else typeof HTMLImageElement!="undefined"&&Ut instanceof HTMLImageElement?(be=Ut.naturalWidth,oe=Ut.naturalHeight):(be=Ut.width,oe=Ut.height);oe={glName:xt.l,width:be,height:oe},be=xt.g,be.canvas.width=oe.width,be.canvas.height=oe.height,be.activeTexture(be.TEXTURE0),xt.h.bindTexture2d(xt.l),be.texImage2D(be.TEXTURE_2D,0,be.RGBA,be.RGBA,be.UNSIGNED_BYTE,Ut),xt.h.bindTexture2d(0),xt=oe;break t;case"detections":for(oe=xt.m[St.stream],oe||(oe=new Tn(xt.h),xt.m[St.stream]=oe),xt=oe,xt.data||(xt.data=new xt.g.DetectionListData),xt.data.reset(Ut.length),oe=0;oe<Ut.length;++oe){be=Ut[oe];var fe=xt.data,Ve=fe.setBoundingBox,De=oe,b=be.T,f=new Ee;ee(f,1,b.Z),ee(f,2,b.$),ee(f,3,b.height),ee(f,4,b.width),ee(f,5,b.rotation),ee(f,6,b.X);var W=b=new Te;te(W,1,ae(f,1)),te(W,2,ae(f,2)),te(W,3,ae(f,3)),te(W,4,ae(f,4)),te(W,5,ae(f,5));var M=ae(f,6);if(M!=null&&M!=null){Xe(W.g,48);var Q=W.g,tt=M;M=0>tt,tt=Math.abs(tt);var D=tt>>>0;for(tt=Math.floor((tt-D)/4294967296),tt>>>=0,M&&(tt=~tt>>>0,D=(~D>>>0)+1,4294967295<D&&(D=0,tt++,4294967295<tt&&(tt=0))),Ae=D,Me=tt,M=Ae,D=Me;0<D||127<M;)Q.push(M&127|128),M=(M>>>7|D<<25)>>>0,D>>>=7;Q.push(M)}if(ze(f,W),b=Se(b),Ve.call(fe,De,b),be.O)for(fe=0;fe<be.O.length;++fe)f=be.O[fe],W=!!f.visibility,Ve=xt.data,De=Ve.addNormalizedLandmark,b=oe,f=Object.assign(Object.assign({},f),{visibility:W?f.visibility:0}),W=new pe,ee(W,1,f.x),ee(W,2,f.y),ee(W,3,f.z),f.visibility&&ee(W,4,f.visibility),Q=f=new Te,te(Q,1,ae(W,1)),te(Q,2,ae(W,2)),te(Q,3,ae(W,3)),te(Q,4,ae(W,4)),te(Q,5,ae(W,5)),ze(W,Q),f=Se(f),De.call(Ve,b,f);if(be.M)for(fe=0;fe<be.M.length;++fe){if(Ve=xt.data,De=Ve.addClassification,b=oe,f=be.M[fe],W=new rt,ee(W,2,f.Y),f.index&&ee(W,1,f.index),f.label&&ee(W,3,f.label),f.displayName&&ee(W,4,f.displayName),Q=f=new Te,D=ae(W,1),D!=null&&D!=null)if(Xe(Q.g,8),M=Q.g,0<=D)Xe(M,D);else{for(tt=0;9>tt;tt++)M.push(D&127|128),D>>=7;M.push(1)}te(Q,2,ae(W,2)),M=ae(W,3),M!=null&&(M=sn(M),Xe(Q.g,26),Xe(Q.g,M.length),di(Q,Q.g.end()),di(Q,M)),M=ae(W,4),M!=null&&(M=sn(M),Xe(Q.g,34),Xe(Q.g,M.length),di(Q,Q.g.end()),di(Q,M)),ze(W,Q),f=Se(f),De.call(Ve,b,f)}}xt=xt.data;break t;default:xt={}}}switch(Et=xt,kt=St.stream,St.type){case"video":It.pushTexture2d(Object.assign(Object.assign({},Et),{stream:kt,timestamp:$}));break;case"detections":re=Et,re.stream=kt,re.timestamp=$,It.pushDetectionList(re);break;default:throw Error("Unknown input config type: '"+St.type+"'")}}return k.i.send(It),_(zt,k.C,4);case 4:It.delete(),zt.g=0}})})};function mn(A,X,R){return ue(A,function k(){var $,It,q,dt,yt,St,Et=this,kt,re,zt,xt,Ut,oe,be,fe;return ge(k,function(Ve){switch(Ve.g){case 1:if(!R)return Ve.return(X);for($={},It=0,q=m(Object.keys(R)),dt=q.next();!dt.done;dt=q.next())yt=dt.value,St=R[yt],typeof St!="string"&&St.type==="texture"&&X[St.stream]!==void 0&&++It;1<It&&(Et.G=!1),kt=m(Object.keys(R)),dt=kt.next();case 2:if(dt.done){Ve.g=4;break}if(re=dt.value,zt=R[re],typeof zt=="string")return be=$,fe=re,_(Ve,to(Et,re,X[zt]),14);if(xt=X[zt.stream],zt.type==="detection_list"){if(xt){for(var De=xt.getRectList(),b=xt.getLandmarksList(),f=xt.getClassificationsList(),W=[],M=0;M<De.size();++M){var Q=De.get(M);t:{var tt=new Ee;for(Q=new Ue(Q);Dt(Q);)switch(Q.i){case 13:var D=Zi(Q.g);ee(tt,1,D);break;case 21:D=Zi(Q.g),ee(tt,2,D);break;case 29:D=Zi(Q.g),ee(tt,3,D);break;case 37:D=Zi(Q.g),ee(tt,4,D);break;case 45:D=Zi(Q.g),ee(tt,5,D);break;case 48:for(var ot=Q.g,mt=128,g=0,B=D=0;4>B&&128<=mt;B++)mt=ot.h[ot.g++],g|=(mt&127)<<7*B;if(128<=mt&&(mt=ot.h[ot.g++],g|=(mt&127)<<28,D|=(mt&127)>>4),128<=mt)for(B=0;5>B&&128<=mt;B++)mt=ot.h[ot.g++],D|=(mt&127)<<7*B+3;128>mt?(ot=g>>>0,mt=D>>>0,(D=mt&2147483648)&&(ot=~ot+1>>>0,mt=~mt>>>0,ot==0&&(mt=mt+1>>>0)),ot=4294967296*mt+(ot>>>0),D=D?-ot:ot):(ot.l=!0,D=void 0),ee(tt,6,D);break;default:if(!ce(tt,Q))break t}}tt={Z:le(tt,1),$:le(tt,2),height:le(tt,3),width:le(tt,4),rotation:le(tt,5,0),X:vt(tt,6)},D=b.get(M);t:for(Q=new Ht,D=new Ue(D);Dt(D);)switch(D.i){case 10:ot=$t(D,new pe,he),ye(Q,ot,pe,void 0);break;default:if(!ce(Q,D))break t}Q=wi(Q,pe).map(Fi),ot=f.get(M);t:for(D=new ht,ot=new Ue(ot);Dt(ot);)switch(ot.i){case 10:D.addClassification($t(ot,new rt,at));break;default:if(!ce(D,ot))break t}tt={T:tt,O:Q,M:Ii(D)},W.push(tt)}De=W}else De=[];$[re]=De,Ve.g=7;break}if(zt.type==="proto_list"){if(xt){for(De=Array(xt.size()),b=0;b<xt.size();b++)De[b]=xt.get(b);xt.delete()}else De=[];$[re]=De,Ve.g=7;break}if(xt===void 0){Ve.g=3;break}if(zt.type==="float_list"){$[re]=xt,Ve.g=7;break}if(zt.type==="proto"){$[re]=xt,Ve.g=7;break}if(zt.type!=="texture")throw Error("Unknown output config type: '"+zt.type+"'");return Ut=Et.s[re],Ut||(Ut=new Li(Et.h,Et.D),Et.s[re]=Ut),_(Ve,Ke(Ut,xt,Et.G),13);case 13:oe=Ve.h,$[re]=oe;case 7:zt.transform&&$[re]&&($[re]=zt.transform($[re])),Ve.g=3;break;case 14:be[fe]=Ve.h;case 3:dt=kt.next(),Ve.g=2;break;case 4:return Ve.return($)}})})}function to(A,X,R){return ue(A,function k(){var $=this,It;return ge(k,function(q){return typeof R=="number"||R instanceof Uint8Array||R instanceof $.h.Uint8BlobList?q.return(R):R instanceof $.h.Texture2dDataOut?(It=$.s[X],It||(It=new Li($.h,$.D),$.s[X]=It),q.return(Ke(It,R,$.G))):q.return(void 0)})})}function eo(A,X){for(var R=X.name||"$",k=[].concat(Z(X.wants)),$=new A.h.StringList,It=m(X.wants),q=It.next();!q.done;q=It.next())$.push_back(q.value);It=A.h.PacketListener.implement({onResults:function(dt){for(var yt={},St=0;St<X.wants.length;++St)yt[k[St]]=dt.get(St);var Et=A.listeners[R];Et&&(A.C=mn(A,yt,X.outs).then(function(kt){kt=Et(kt);for(var re=0;re<X.wants.length;++re){var zt=yt[k[re]];typeof zt=="object"&&zt.hasOwnProperty&&zt.hasOwnProperty("delete")&&zt.delete()}kt&&(A.C=kt)}))}}),A.i.attachMultiListener($,It),$.delete()}e.onResults=function(A,X){this.listeners[X||"$"]=A},He("Solution",Hn),He("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function hn(A){switch(A===void 0&&(A=0),A){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function Zn(A){var X=this;A=A||{},this.g=new Hn({locateFile:A.locateFile,files:function(R){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:hn(R.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(R){return ue(X,function k(){var $,It,q=this,dt;return ge(k,function(yt){return yt.g==1?($=hn(R),It="third_party/mediapipe/modules/selfie_segmentation/"+$,_(yt,Vi(q.g,$),2)):(dt=yt.h,q.g.overrideFile(It,dt),yt.return(!0))})})}}}})}e=Zn.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(A){this.g.onResults(A)},e.initialize=function(){return ue(this,function A(){var X=this;return ge(A,function(R){return _(R,X.g.initialize(),0)})})},e.reset=function(){this.g.reset()},e.send=function(A){return ue(this,function X(){var R=this;return ge(X,function(k){return _(k,R.g.send(A),0)})})},e.setOptions=function(A){this.g.setOptions(A)},He("SelfieSegmentation",Zn),He("VERSION","0.1.1632777926")}).call(e3);const i3={};(function(){var e;function t(d){var V=0;return function(){return V<d.length?{done:!1,value:d[V++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,V,S){return d==Array.prototype||d==Object.prototype||(d[V]=S.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var V=0;V<d.length;++V){var S=d[V];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var o=n(this);function l(d,V){if(V)t:{var S=o;d=d.split(".");for(var F=0;F<d.length-1;F++){var T=d[F];if(!(T in S))break t;S=S[T]}d=d[d.length-1],F=S[d],V=V(F),V!=F&&V!=null&&i(S,d,{configurable:!0,writable:!0,value:V})}}l("Symbol",function(d){function V(c){if(this instanceof V)throw new TypeError("Symbol is not a constructor");return new S(F+(c||"")+"_"+T++,c)}function S(c,h){this.g=c,i(this,"description",{configurable:!0,writable:!0,value:h})}if(d)return d;S.prototype.toString=function(){return this.g};var F="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",T=0;return V}),l("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var V="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),S=0;S<V.length;S++){var F=o[V[S]];typeof F=="function"&&typeof F.prototype[d]!="function"&&i(F.prototype,d,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return d});function I(d){return d={next:d},d[Symbol.iterator]=function(){return this},d}function m(d){var V=typeof Symbol!="undefined"&&Symbol.iterator&&d[Symbol.iterator];return V?V.call(d):{next:t(d)}}function Z(d){if(!(d instanceof Array)){d=m(d);for(var V,S=[];!(V=d.next()).done;)S.push(V.value);d=S}return d}var x=typeof Object.create=="function"?Object.create:function(d){function V(){}return V.prototype=d,new V},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var st={a:!0},ut={};try{ut.__proto__=st,K=ut.a;break t}catch{}K=!1}L=K?function(d,V){if(d.__proto__=V,d.__proto__!==V)throw new TypeError(d+" is not extensible");return d}:null}var P=L;function ct(d,V){if(d.prototype=x(V.prototype),d.prototype.constructor=d,P)P(d,V);else for(var S in V)if(S!="prototype")if(Object.defineProperties){var F=Object.getOwnPropertyDescriptor(V,S);F&&Object.defineProperty(d,S,F)}else d[S]=V[S];d.ra=V.prototype}function Rt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Bt(d){if(d.l)throw new TypeError("Generator is already running");d.l=!0}Rt.prototype.s=function(d){this.h=d};function Yt(d,V){d.j={fa:V,ga:!0},d.g=d.o||d.u}Rt.prototype.return=function(d){this.j={return:d},this.g=this.u};function _(d,V,S){return d.g=S,{value:V}}function qe(d){this.g=new Rt,this.h=d}function ni(d,V){Bt(d.g);var S=d.g.i;return S?we(d,"return"in S?S.return:function(F){return{value:F,done:!0}},V,d.g.return):(d.g.return(V),qt(d))}function we(d,V,S,F){try{var T=V.call(d.g.i,S);if(!(T instanceof Object))throw new TypeError("Iterator result "+T+" is not an object");if(!T.done)return d.g.l=!1,T;var c=T.value}catch(h){return d.g.i=null,Yt(d.g,h),qt(d)}return d.g.i=null,F.call(d.g,c),qt(d)}function qt(d){for(;d.g.g;)try{var V=d.h(d.g);if(V)return d.g.l=!1,{value:V.value,done:!1}}catch(S){d.g.h=void 0,Yt(d.g,S)}if(d.g.l=!1,d.g.j){if(V=d.g.j,d.g.j=null,V.ga)throw V.fa;return{value:V.return,done:!0}}return{value:void 0,done:!0}}function Bn(d){this.next=function(V){return Bt(d.g),d.g.i?V=we(d,d.g.i.next,V,d.g.s):(d.g.s(V),V=qt(d)),V},this.throw=function(V){return Bt(d.g),d.g.i?V=we(d,d.g.i.throw,V,d.g.s):(Yt(d.g,V),V=qt(d)),V},this.return=function(V){return ni(d,V)},this[Symbol.iterator]=function(){return this}}function ge(d){function V(F){return d.next(F)}function S(F){return d.throw(F)}return new Promise(function(F,T){function c(h){h.done?F(h.value):Promise.resolve(h.value).then(V,S).then(c,T)}c(d.next())})}function ft(d){return ge(new Bn(new qe(d)))}l("Promise",function(d){function V(h){this.h=0,this.i=void 0,this.g=[],this.s=!1;var G=this.j();try{h(G.resolve,G.reject)}catch(r){G.reject(r)}}function S(){this.g=null}function F(h){return h instanceof V?h:new V(function(G){G(h)})}if(d)return d;S.prototype.h=function(h){if(this.g==null){this.g=[];var G=this;this.i(function(){G.l()})}this.g.push(h)};var T=o.setTimeout;S.prototype.i=function(h){T(h,0)},S.prototype.l=function(){for(;this.g&&this.g.length;){var h=this.g;this.g=[];for(var G=0;G<h.length;++G){var r=h[G];h[G]=null;try{r()}catch(u){this.j(u)}}}this.g=null},S.prototype.j=function(h){this.i(function(){throw h})},V.prototype.j=function(){function h(u){return function(p){r||(r=!0,u.call(G,p))}}var G=this,r=!1;return{resolve:h(this.D),reject:h(this.l)}},V.prototype.D=function(h){if(h===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(h instanceof V)this.H(h);else{t:switch(typeof h){case"object":var G=h!=null;break t;case"function":G=!0;break t;default:G=!1}G?this.A(h):this.o(h)}},V.prototype.A=function(h){var G=void 0;try{G=h.then}catch(r){this.l(r);return}typeof G=="function"?this.I(G,h):this.o(h)},V.prototype.l=function(h){this.u(2,h)},V.prototype.o=function(h){this.u(1,h)},V.prototype.u=function(h,G){if(this.h!=0)throw Error("Cannot settle("+h+", "+G+"): Promise already settled in state"+this.h);this.h=h,this.i=G,this.h===2&&this.G(),this.B()},V.prototype.G=function(){var h=this;T(function(){if(h.C()){var G=o.console;typeof G!="undefined"&&G.error(h.i)}},1)},V.prototype.C=function(){if(this.s)return!1;var h=o.CustomEvent,G=o.Event,r=o.dispatchEvent;return typeof r=="undefined"?!0:(typeof h=="function"?h=new h("unhandledrejection",{cancelable:!0}):typeof G=="function"?h=new G("unhandledrejection",{cancelable:!0}):(h=o.document.createEvent("CustomEvent"),h.initCustomEvent("unhandledrejection",!1,!0,h)),h.promise=this,h.reason=this.i,r(h))},V.prototype.B=function(){if(this.g!=null){for(var h=0;h<this.g.length;++h)c.h(this.g[h]);this.g=null}};var c=new S;return V.prototype.H=function(h){var G=this.j();h.M(G.resolve,G.reject)},V.prototype.I=function(h,G){var r=this.j();try{h.call(G,r.resolve,r.reject)}catch(u){r.reject(u)}},V.prototype.then=function(h,G){function r(a,C){return typeof a=="function"?function(y){try{u(a(y))}catch(w){p(w)}}:C}var u,p,s=new V(function(a,C){u=a,p=C});return this.M(r(h,u),r(G,p)),s},V.prototype.catch=function(h){return this.then(void 0,h)},V.prototype.M=function(h,G){function r(){switch(u.h){case 1:h(u.i);break;case 2:G(u.i);break;default:throw Error("Unexpected state: "+u.h)}}var u=this;this.g==null?c.h(r):this.g.push(r),this.s=!0},V.resolve=F,V.reject=function(h){return new V(function(G,r){r(h)})},V.race=function(h){return new V(function(G,r){for(var u=m(h),p=u.next();!p.done;p=u.next())F(p.value).M(G,r)})},V.all=function(h){var G=m(h),r=G.next();return r.done?F([]):new V(function(u,p){function s(y){return function(w){a[y]=w,C--,C==0&&u(a)}}var a=[],C=0;do a.push(void 0),C++,F(r.value).M(s(a.length-1),p),r=G.next();while(!r.done)})},V});function Yi(d,V){d instanceof String&&(d+="");var S=0,F=!1,T={next:function(){if(!F&&S<d.length){var c=S++;return{value:V(c,d[c]),done:!1}}return F=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}var Jn=typeof Object.assign=="function"?Object.assign:function(d,V){for(var S=1;S<arguments.length;S++){var F=arguments[S];if(F)for(var T in F)Object.prototype.hasOwnProperty.call(F,T)&&(d[T]=F[T])}return d};l("Object.assign",function(d){return d||Jn}),l("Object.is",function(d){return d||function(V,S){return V===S?V!==0||1/V===1/S:V!==V&&S!==S}}),l("Array.prototype.includes",function(d){return d||function(V,S){var F=this;F instanceof String&&(F=String(F));var T=F.length;for(S=S||0,0>S&&(S=Math.max(S+T,0));S<T;S++){var c=F[S];if(c===V||Object.is(c,V))return!0}return!1}}),l("String.prototype.includes",function(d){return d||function(V,S){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(V instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(V,S||0)!==-1}}),l("Array.prototype.keys",function(d){return d||function(){return Yi(this,function(V){return V})}});var He=this||self;function Tt(d,V){d=d.split(".");var S=He;d[0]in S||typeof S.execScript=="undefined"||S.execScript("var "+d[0]);for(var F;d.length&&(F=d.shift());)d.length||V===void 0?S[F]&&S[F]!==Object.prototype[F]?S=S[F]:S=S[F]={}:S[F]=V}function Je(){throw Error("Invalid UTF8")}function yi(d,V){return V=String.fromCharCode.apply(null,V),d==null?V:d+V}var Oi,An=typeof TextDecoder!="undefined",sn,Xn=typeof TextEncoder!="undefined",Si={},Mi=null;function Fn(d){var V;V===void 0&&(V=0),ei(),V=Si[V];for(var S=Array(Math.floor(d.length/3)),F=V[64]||"",T=0,c=0;T<d.length-2;T+=3){var h=d[T],G=d[T+1],r=d[T+2],u=V[h>>2];h=V[(h&3)<<4|G>>4],G=V[(G&15)<<2|r>>6],r=V[r&63],S[c++]=u+h+G+r}switch(u=0,r=F,d.length-T){case 2:u=d[T+1],r=V[(u&15)<<2]||F;case 1:d=d[T],S[c]=V[d>>2]+V[(d&3)<<4|u>>4]+r+F}return S.join("")}function yn(d){var V=d.length,S=3*V/4;S%3?S=Math.floor(S):"=.".indexOf(d[V-1])!=-1&&(S="=.".indexOf(d[V-2])!=-1?S-2:S-1);var F=new Uint8Array(S),T=0;return oi(d,function(c){F[T++]=c}),T!==S?F.subarray(0,T):F}function oi(d,V){function S(r){for(;F<d.length;){var u=d.charAt(F++),p=Mi[u];if(p!=null)return p;if(!/^[\s\xa0]*$/.test(u))throw Error("Unknown base64 encoding at char: "+u)}return r}ei();for(var F=0;;){var T=S(-1),c=S(0),h=S(64),G=S(64);if(G===64&&T===-1)break;V(T<<2|c>>4),h!=64&&(V(c<<4&240|h>>2),G!=64&&V(h<<6&192|G))}}function ei(){if(!Mi){Mi={};for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),V=["+/=","+/","-_=","-_.","-_"],S=0;5>S;S++){var F=d.concat(V[S].split(""));Si[S]=F;for(var T=0;T<F.length;T++){var c=F[T];Mi[c]===void 0&&(Mi[c]=T)}}}}var rn=typeof Uint8Array=="function";function ji(d){return rn&&d!=null&&d instanceof Uint8Array}var Ae;function Me(d){if(this.L=d,d!==null&&d.length===0)throw Error("ByteString should be constructed with non-empty values")}var si=typeof Uint8Array.prototype.slice=="function",de=0,Fe=0;function Zi(d,V){if(d.constructor===Uint8Array)return d;if(d.constructor===ArrayBuffer)return new Uint8Array(d);if(d.constructor===Array)return new Uint8Array(d);if(d.constructor===String)return yn(d);if(d.constructor===Me)return!V&&(V=d.L)&&V.constructor===Uint8Array?V:(V=d.L,V=V==null||ji(V)?V:typeof V=="string"?yn(V):null,(d=d.L=V)?new Uint8Array(d):Ae||(Ae=new Uint8Array(0)));if(d instanceof Uint8Array)return new Uint8Array(d.buffer,d.byteOffset,d.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function $e(d,V){return Error("Invalid wire type: "+d+" (at position "+V+")")}function ne(){return Error("Failed to read varint, encoding is invalid.")}function Xe(d,V){V=V===void 0?{}:V,V=V.v===void 0?!1:V.v,this.h=null,this.g=this.i=this.j=0,this.v=V,d&&Ue(this,d)}function Ue(d,V){d.h=Zi(V,d.v),d.j=0,d.i=d.h.length,d.g=d.j}Xe.prototype.reset=function(){this.g=this.j};function Dt(d){if(d.g>d.i)throw Error("Tried to read past the end of the data "+d.g+" > "+d.i)}function xe(d){var V=d.h,S=V[d.g],F=S&127;if(128>S)return d.g+=1,Dt(d),F;if(S=V[d.g+1],F|=(S&127)<<7,128>S)return d.g+=2,Dt(d),F;if(S=V[d.g+2],F|=(S&127)<<14,128>S)return d.g+=3,Dt(d),F;if(S=V[d.g+3],F|=(S&127)<<21,128>S)return d.g+=4,Dt(d),F;if(S=V[d.g+4],d.g+=5,F|=(S&15)<<28,128>S)return Dt(d),F;if(128<=V[d.g++]&&128<=V[d.g++]&&128<=V[d.g++]&&128<=V[d.g++]&&128<=V[d.g++])throw ne();return Dt(d),F}var $t=[];function Ge(){this.g=[]}Ge.prototype.length=function(){return this.g.length},Ge.prototype.end=function(){var d=this.g;return this.g=[],d};function Te(d,V){for(;127<V;)d.g.push(V&127|128),V>>>=7;d.g.push(V)}function di(d){var V={},S=V.W===void 0?!1:V.W;this.l={v:V.v===void 0?!1:V.v},this.W=S,V=this.l,$t.length?(S=$t.pop(),V&&(S.v=V.v),d&&Ue(S,d),d=S):d=new Xe(d,V),this.g=d,this.j=this.g.g,this.h=this.i=-1}di.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function Se(d){var V=d.g;if(V.g==V.i)return!1;d.j=d.g.g;var S=xe(d.g)>>>0;if(V=S>>>3,S&=7,!(0<=S&&5>=S))throw $e(S,d.j);if(1>V)throw Error("Invalid field number: "+V+" (at position "+d.j+")");return d.i=V,d.h=S,!0}function te(d){switch(d.h){case 0:if(d.h!=0)te(d);else t:{d=d.g;for(var V=d.g,S=V+10;V<S;)if((d.h[V++]&128)===0){d.g=V,Dt(d);break t}throw ne()}break;case 1:d=d.g,d.g+=8,Dt(d);break;case 2:d.h!=2?te(d):(V=xe(d.g)>>>0,d=d.g,d.g+=V,Dt(d));break;case 5:d=d.g,d.g+=4,Dt(d);break;case 3:V=d.i;do{if(!Se(d))throw Error("Unmatched start-group tag: stream EOF");if(d.h==4){if(d.i!=V)throw Error("Unmatched end-group tag");break}te(d)}while(1);break;default:throw $e(d.h,d.j)}}var ii=[];function ri(){this.i=[],this.h=0,this.g=new Ge}function Ne(d,V){V.length!==0&&(d.i.push(V),d.h+=V.length)}function _i(d,V){if(V=V.ca){Ne(d,d.g.end());for(var S=0;S<V.length;S++)Ne(d,V[S])}}var fi=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function li(d,V){Object.isFrozen(d)||(fi?d[fi]|=V:d.N!==void 0?d.N|=V:Object.defineProperties(d,{N:{value:V,configurable:!0,writable:!0,enumerable:!1}}))}function Gi(d){var V;return fi?V=d[fi]:V=d.N,V==null?0:V}function Re(d){return li(d,1),d}function ke(d){return Array.isArray(d)?!!(Gi(d)&2):!1}function ve(d){if(!Array.isArray(d))throw Error("cannot mark non-array as immutable");li(d,2)}function ae(d){return d!==null&&typeof d=="object"&&!Array.isArray(d)&&d.constructor===Object}var ci=Object.freeze(Re([]));function le(d){if(ke(d.m))throw Error("Cannot mutate an immutable Message")}var ee=typeof Symbol!="undefined"&&typeof Symbol.hasInstance!="undefined";function wi(d){return{value:d,configurable:!1,writable:!1,enumerable:!1}}function ye(d,V,S){return V===-1?null:V>=d.i?d.g?d.g[V]:void 0:(S===void 0?0:S)&&d.g&&(S=d.g[V],S!=null)?S:d.m[V+d.h]}function Jt(d,V,S,F){F=F===void 0?!1:F,le(d),V<d.i&&!F?d.m[V+d.h]=S:(d.g||(d.g=d.m[d.i+d.h]={}))[V]=S}function vt(d,V,S,F){S=S===void 0?!0:S,F=F===void 0?!1:F;var T=ye(d,V,F);return T==null&&(T=ci),ke(d.m)?S&&(ve(T),Object.freeze(T)):(T===ci||ke(T))&&(T=Re(T.slice()),Jt(d,V,T,F)),T}function Ie(d,V,S){return d=ye(d,V),d=d==null?d:+d,d==null?S===void 0?0:S:d}function ze(d,V,S,F){d.j||(d.j={});var T=ke(d.m),c=d.j[S];if(!c){F=vt(d,S,!0,F===void 0?!1:F),c=[],T=T||ke(F);for(var h=0;h<F.length;h++)c[h]=new V(F[h]),T&&ve(c[h].m);T&&(ve(c),Object.freeze(c)),d.j[S]=c}return c}function ce(d,V,S,F,T){var c=c===void 0?!1:c;return le(d),c=ze(d,S,V,c),S=F||new S,d=vt(d,V),T!=null?(c.splice(T,0,S),d.splice(T,0,S.m)):(c.push(S),d.push(S.m)),S}function ue(d,V){return d=ye(d,V),d==null?0:d}function rt(d,V){return d=ye(d,V),d==null?"":d}function at(d){switch(typeof d){case"number":return isFinite(d)?d:String(d);case"object":if(d&&!Array.isArray(d)){if(ji(d))return Fn(d);if(d instanceof Me){var V=d.L;return V=V==null||typeof V=="string"?V:rn&&V instanceof Uint8Array?Fn(V):null,(d.L=V)||""}}}return d}function ht(d){var V=he;return V=V===void 0?Ht:V,pe(d,V)}function ie(d,V){if(d!=null){if(Array.isArray(d))d=pe(d,V);else if(ae(d)){var S={},F;for(F in d)S[F]=ie(d[F],V);d=S}else d=V(d);return d}}function pe(d,V){for(var S=d.slice(),F=0;F<S.length;F++)S[F]=ie(S[F],V);return Array.isArray(d)&&Gi(d)&1&&Re(S),S}function he(d){return d&&typeof d=="object"&&d.toJSON?d.toJSON():(d=at(d),Array.isArray(d)?ht(d):d)}function Ht(d){return ji(d)?new Uint8Array(d):d}function Ze(d,V,S){d||(d=Ee),Ee=null;var F=this.constructor.h;d||(d=F?[F]:[]),this.h=(F?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=d;t:{if(F=this.m.length,d=F-1,F&&(F=this.m[d],ae(F))){this.i=d-this.h,this.g=F;break t}V!==void 0&&-1<V?(this.i=Math.max(V,d+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(S)for(V=0;V<S.length;V++)if(d=S[V],d<this.i)d+=this.h,(F=this.m[d])?Array.isArray(F)&&Re(F):this.m[d]=ci;else{F=this.g||(this.g=this.m[this.i+this.h]={});var T=F[d];T?Array.isArray(T)&&Re(T):F[d]=ci}}Ze.prototype.toJSON=function(){return ht(this.m)},Ze.prototype.toString=function(){return this.m.toString()};var Ee;function ai(){Ze.apply(this,arguments)}if(ct(ai,Ze),ee){var Ii={};Object.defineProperties(ai,(Ii[Symbol.hasInstance]=wi(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Ii))}function Fi(d,V,S){if(S){var F={},T;for(T in S){var c=S[T],h=c.ja;h||(F.F=c.pa||c.ha.P,c.ba?(F.U=ln(c.ba),h=function(G){return function(r,u,p){return G.F(r,u,p,G.U)}}(F)):c.da?(F.T=ti(c.X.g,c.da),h=function(G){return function(r,u,p){return G.F(r,u,p,G.T)}}(F)):h=F.F,c.ja=h),h(V,d,c.X),F={F:F.F,U:F.U,T:F.T}}}_i(V,d)}var Li=Symbol();function Ke(d,V,S){return d[Li]||(d[Li]=function(F,T){return V(F,T,S)})}function ui(d){var V=d[Li];if(!V){var S=A(d);V=function(F,T){return X(F,T,S)},d[Li]=V}return V}function Tn(d){var V=d.ba;if(V)return ui(V);if(V=d.oa)return Ke(d.X.g,V,d.da)}function Ci(d){var V=Tn(d),S=d.X,F=d.ha.O;return V?function(T,c){return F(T,c,S,V)}:function(T,c){return F(T,c,S)}}function Qe(d,V,S,F,T,c){d=d();var h=0;for(d.length&&typeof d[0]!="number"&&(S(V,d[0]),h++);h<d.length;){S=d[h++];for(var G=h+1;G<d.length&&typeof d[G]!="number";)G++;var r=d[h++];switch(G-=h,G){case 0:F(V,S,r);break;case 1:F(V,S,r,d[h++]);break;case 2:T(V,S,r,d[h++],d[h++]);break;case 3:G=d[h++];var u=d[h++],p=d[h++];Array.isArray(p)?T(V,S,r,G,u,p):c(V,S,r,G,u,p);break;case 4:c(V,S,r,d[h++],d[h++],d[h++],d[h++]);break;default:throw Error("unexpected number of binary field arguments: "+G)}}return V}var zi=Symbol();function ln(d){var V=d[zi];if(!V){var S=Vi(d);V=function(F,T){return k(F,T,S)},d[zi]=V}return V}function ti(d,V){var S=d[zi];return S||(S=function(F,T){return Fi(F,T,V)},d[zi]=S),S}var Hn=Symbol();function mi(d,V){d.push(V)}function Ki(d,V,S){d.push(V,S.P)}function Cn(d,V,S,F,T){var c=ln(T),h=S.P;d.push(V,function(G,r,u){return h(G,r,u,F,c)})}function Yn(d,V,S,F,T,c){var h=ti(F,c),G=S.P;d.push(V,function(r,u,p){return G(r,u,p,F,h)})}function Vi(d){var V=d[Hn];return V||Qe(d,d[Hn]=[],mi,Ki,Cn,Yn)}var mn=Symbol();function to(d,V){d[0]=V}function eo(d,V,S,F){var T=S.O;d[V]=F?function(c,h,G){return T(c,h,G,F)}:T}function hn(d,V,S,F,T,c){var h=S.O,G=ui(T);d[V]=function(r,u,p){return h(r,u,p,F,G,c)}}function Zn(d,V,S,F,T,c,h){var G=S.O,r=Ke(F,T,c);d[V]=function(u,p,s){return G(u,p,s,F,r,h)}}function A(d){var V=d[mn];return V||Qe(d,d[mn]={},to,eo,hn,Zn)}function X(d,V,S){for(;Se(V)&&V.h!=4;){var F=V.i,T=S[F];if(!T){var c=S[0];c&&(c=c[F])&&(T=S[F]=Ci(c))}if((!T||!T(V,d,F))&&(T=V,F=d,c=T.j,te(T),!T.W)){var h=T.g.h;T=T.g.g,T=c===T?Ae||(Ae=new Uint8Array(0)):si?h.slice(c,T):new Uint8Array(h.subarray(c,T)),(c=F.ca)?c.push(T):F.ca=[T]}}return d}function R(d,V,S){if(ii.length){var F=ii.pop();d&&(Ue(F.g,d),F.i=-1,F.h=-1),d=F}else d=new di(d);try{return X(new V,d,A(S))}finally{V=d.g,V.h=null,V.j=0,V.i=0,V.g=0,V.v=!1,d.i=-1,d.h=-1,100>ii.length&&ii.push(d)}}function k(d,V,S){for(var F=S.length,T=F%2==1,c=T?1:0;c<F;c+=2)(0,S[c+1])(V,d,S[c]);Fi(d,V,T?S[0]:void 0)}function $(d,V){var S=new ri;k(d,S,Vi(V)),Ne(S,S.g.end()),d=new Uint8Array(S.h),V=S.i;for(var F=V.length,T=0,c=0;c<F;c++){var h=V[c];d.set(h,T),T+=h.length}return S.i=[d],d}function It(d,V){return{O:d,P:V}}var q=It(function(d,V,S){if(d.h!==5)return!1;d=d.g;var F=d.h[d.g],T=d.h[d.g+1],c=d.h[d.g+2],h=d.h[d.g+3];return d.g+=4,Dt(d),T=(F<<0|T<<8|c<<16|h<<24)>>>0,d=2*(T>>31)+1,F=T>>>23&255,T&=8388607,Jt(V,S,F==255?T?NaN:1/0*d:F==0?d*Math.pow(2,-149)*T:d*Math.pow(2,F-150)*(T+Math.pow(2,23))),!0},function(d,V,S){if(V=ye(V,S),V!=null){Te(d.g,8*S+5),d=d.g;var F=V;F=(S=0>F?1:0)?-F:F,F===0?0<1/F?de=Fe=0:(Fe=0,de=2147483648):isNaN(F)?(Fe=0,de=2147483647):34028234663852886e22<F?(Fe=0,de=(S<<31|2139095040)>>>0):11754943508222875e-54>F?(F=Math.round(F/Math.pow(2,-149)),Fe=0,de=(S<<31|F)>>>0):(V=Math.floor(Math.log(F)/Math.LN2),F*=Math.pow(2,-V),F=Math.round(8388608*F),16777216<=F&&++V,Fe=0,de=(S<<31|V+127<<23|F&8388607)>>>0),S=de,d.g.push(S>>>0&255),d.g.push(S>>>8&255),d.g.push(S>>>16&255),d.g.push(S>>>24&255)}}),dt=It(function(d,V,S){if(d.h!==0)return!1;for(var F=d.g,T=128,c=0,h=d=0;4>h&&128<=T;h++)T=F.h[F.g++],Dt(F),c|=(T&127)<<7*h;if(128<=T&&(T=F.h[F.g++],Dt(F),c|=(T&127)<<28,d|=(T&127)>>4),128<=T)for(h=0;5>h&&128<=T;h++)T=F.h[F.g++],Dt(F),d|=(T&127)<<7*h+3;if(128>T)F=c>>>0,T=d>>>0,(d=T&2147483648)&&(F=~F+1>>>0,T=~T>>>0,F==0&&(T=T+1>>>0)),F=4294967296*T+(F>>>0);else throw ne();return Jt(V,S,d?-F:F),!0},function(d,V,S){if(V=ye(V,S),V!=null&&V!=null){Te(d.g,8*S),d=d.g;var F=V;for(S=0>F,F=Math.abs(F),V=F>>>0,F=Math.floor((F-V)/4294967296),F>>>=0,S&&(F=~F>>>0,V=(~V>>>0)+1,4294967295<V&&(V=0,F++,4294967295<F&&(F=0))),de=V,Fe=F,S=de,V=Fe;0<V||127<S;)d.g.push(S&127|128),S=(S>>>7|V<<25)>>>0,V>>>=7;d.g.push(S)}}),yt=It(function(d,V,S){return d.h!==0?!1:(Jt(V,S,xe(d.g)),!0)},function(d,V,S){if(V=ye(V,S),V!=null&&V!=null)if(Te(d.g,8*S),d=d.g,S=V,0<=S)Te(d,S);else{for(V=0;9>V;V++)d.g.push(S&127|128),S>>=7;d.g.push(1)}}),St=It(function(d,V,S){if(d.h!==2)return!1;var F=xe(d.g)>>>0;d=d.g;var T=d.g;d.g+=F,Dt(d),d=d.h;var c;if(An)(c=Oi)||(c=Oi=new TextDecoder("utf-8",{fatal:!0})),c=c.decode(d.subarray(T,T+F));else{F=T+F;for(var h=[],G=null,r,u,p;T<F;)r=d[T++],128>r?h.push(r):224>r?T>=F?Je():(u=d[T++],194>r||(u&192)!==128?(T--,Je()):h.push((r&31)<<6|u&63)):240>r?T>=F-1?Je():(u=d[T++],(u&192)!==128||r===224&&160>u||r===237&&160<=u||((c=d[T++])&192)!==128?(T--,Je()):h.push((r&15)<<12|(u&63)<<6|c&63)):244>=r?T>=F-2?Je():(u=d[T++],(u&192)!==128||(r<<28)+(u-144)>>30!==0||((c=d[T++])&192)!==128||((p=d[T++])&192)!==128?(T--,Je()):(r=(r&7)<<18|(u&63)<<12|(c&63)<<6|p&63,r-=65536,h.push((r>>10&1023)+55296,(r&1023)+56320))):Je(),8192<=h.length&&(G=yi(G,h),h.length=0);c=yi(G,h)}return Jt(V,S,c),!0},function(d,V,S){if(V=ye(V,S),V!=null){var F=!1;if(F=F===void 0?!1:F,Xn){if(F&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(V))throw Error("Found an unpaired surrogate");V=(sn||(sn=new TextEncoder)).encode(V)}else{for(var T=0,c=new Uint8Array(3*V.length),h=0;h<V.length;h++){var G=V.charCodeAt(h);if(128>G)c[T++]=G;else{if(2048>G)c[T++]=G>>6|192;else{if(55296<=G&&57343>=G){if(56319>=G&&h<V.length){var r=V.charCodeAt(++h);if(56320<=r&&57343>=r){G=1024*(G-55296)+r-56320+65536,c[T++]=G>>18|240,c[T++]=G>>12&63|128,c[T++]=G>>6&63|128,c[T++]=G&63|128;continue}else h--}if(F)throw Error("Found an unpaired surrogate");G=65533}c[T++]=G>>12|224,c[T++]=G>>6&63|128}c[T++]=G&63|128}}V=c.subarray(0,T)}Te(d.g,8*S+2),Te(d.g,V.length),Ne(d,d.g.end()),Ne(d,V)}}),Et=It(function(d,V,S,F,T){if(d.h!==2)return!1;V=ce(V,S,F),S=d.g.i,F=xe(d.g)>>>0;var c=d.g.g+F,h=c-S;if(0>=h&&(d.g.i=c,T(V,d),h=c-d.g.g),h)throw Error("Message parsing ended unexpectedly. Expected to read "+(F+" bytes, instead read "+(F-h)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return d.g.g=c,d.g.i=S,!0},function(d,V,S,F,T){if(V=ze(V,F,S),V!=null)for(F=0;F<V.length;F++){var c=d;Te(c.g,8*S+2);var h=c.g.end();Ne(c,h),h.push(c.h),c=h,T(V[F],d),h=d;var G=c.pop();for(G=h.h+h.g.length()-G;127<G;)c.push(G&127|128),G>>>=7,h.h++;c.push(G),h.h++}});function kt(){ai.apply(this,arguments)}if(ct(kt,ai),ee){var re={};Object.defineProperties(kt,(re[Symbol.hasInstance]=wi(Object[Symbol.hasInstance]),re))}function zt(d){kt.call(this,d)}ct(zt,kt);function xt(){return[1,yt,2,q,3,St,4,St]}function Ut(d){kt.call(this,d,-1,be)}ct(Ut,kt),Ut.prototype.addClassification=function(d,V){return ce(this,1,zt,d,V),this};function oe(){return[1,Et,zt,xt]}var be=[1];function fe(d){kt.call(this,d)}ct(fe,kt);function Ve(){return[1,q,2,q,3,q,4,q,5,q]}function De(d){kt.call(this,d,-1,f)}ct(De,kt);function b(){return[1,Et,fe,Ve]}var f=[1];function W(d){kt.call(this,d)}ct(W,kt);function M(){return[1,q,2,q,3,q,4,q,5,q,6,dt]}function Q(d,V,S){if(S=d.createShader(S===0?d.VERTEX_SHADER:d.FRAGMENT_SHADER),d.shaderSource(S,V),d.compileShader(S),!d.getShaderParameter(S,d.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+d.getShaderInfoLog(S));return S}function tt(d){return ze(d,zt,1).map(function(V){return{index:ue(V,1),score:Ie(V,2),label:ye(V,3)!=null?rt(V,3):void 0,displayName:ye(V,4)!=null?rt(V,4):void 0}})}function D(d){return{x:Ie(d,1),y:Ie(d,2),z:Ie(d,3),visibility:ye(d,4)!=null?Ie(d,4):void 0}}function ot(d){return d.map(function(V){return ze(R(V,De,b),fe,1).map(D)})}function mt(d,V){this.h=d,this.g=V,this.l=0}function g(d,V,S){return B(d,V),typeof d.g.canvas.transferToImageBitmap=="function"?Promise.resolve(d.g.canvas.transferToImageBitmap()):S?Promise.resolve(d.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(d.g.canvas):(d.i===void 0&&(d.i=document.createElement("canvas")),new Promise(function(F){d.i.height=d.g.canvas.height,d.i.width=d.g.canvas.width,d.i.getContext("2d",{}).drawImage(d.g.canvas,0,0,d.g.canvas.width,d.g.canvas.height),F(d.i)}))}function B(d,V){var S=d.g;if(d.o===void 0){var F=Q(S,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),T=Q(S,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),c=S.createProgram();if(S.attachShader(c,F),S.attachShader(c,T),S.linkProgram(c),!S.getProgramParameter(c,S.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+S.getProgramInfoLog(c));F=d.o=c,S.useProgram(F),T=S.getUniformLocation(F,"sampler0"),d.j={K:S.getAttribLocation(F,"aVertex"),J:S.getAttribLocation(F,"aTex"),qa:T},d.u=S.createBuffer(),S.bindBuffer(S.ARRAY_BUFFER,d.u),S.enableVertexAttribArray(d.j.K),S.vertexAttribPointer(d.j.K,2,S.FLOAT,!1,0,0),S.bufferData(S.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),S.STATIC_DRAW),S.bindBuffer(S.ARRAY_BUFFER,null),d.s=S.createBuffer(),S.bindBuffer(S.ARRAY_BUFFER,d.s),S.enableVertexAttribArray(d.j.J),S.vertexAttribPointer(d.j.J,2,S.FLOAT,!1,0,0),S.bufferData(S.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),S.STATIC_DRAW),S.bindBuffer(S.ARRAY_BUFFER,null),S.uniform1i(T,0)}F=d.j,S.useProgram(d.o),S.canvas.width=V.width,S.canvas.height=V.height,S.viewport(0,0,V.width,V.height),S.activeTexture(S.TEXTURE0),d.h.bindTexture2d(V.glName),S.enableVertexAttribArray(F.K),S.bindBuffer(S.ARRAY_BUFFER,d.u),S.vertexAttribPointer(F.K,2,S.FLOAT,!1,0,0),S.enableVertexAttribArray(F.J),S.bindBuffer(S.ARRAY_BUFFER,d.s),S.vertexAttribPointer(F.J,2,S.FLOAT,!1,0,0),S.bindFramebuffer(S.DRAW_FRAMEBUFFER?S.DRAW_FRAMEBUFFER:S.FRAMEBUFFER,null),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT),S.colorMask(!0,!0,!0,!0),S.drawArrays(S.TRIANGLE_FAN,0,4),S.disableVertexAttribArray(F.K),S.disableVertexAttribArray(F.J),S.bindBuffer(S.ARRAY_BUFFER,null),d.h.bindTexture2d(0)}function v(d){this.g=d}var H=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function J(d,V){return V+d}function O(d,V){window[d]=V}function E(d){var V=document.createElement("script");return V.setAttribute("src",d),V.setAttribute("crossorigin","anonymous"),new Promise(function(S){V.addEventListener("load",function(){S()},!1),V.addEventListener("error",function(){S()},!1),document.body.appendChild(V)})}function gt(){return ft(function(d){switch(d.g){case 1:return d.o=2,_(d,WebAssembly.instantiate(H),4);case 4:d.g=3,d.o=0;break;case 2:return d.o=0,d.j=null,d.return(!1);case 3:return d.return(!0)}})}function nt(d){if(this.g=d,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.$=!0,this.D=Promise.resolve(),this.Z="",this.C={},this.locateFile=d&&d.locateFile||J,typeof window=="object")var V=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")V=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.aa=V,d.options){V=m(Object.keys(d.options));for(var S=V.next();!S.done;S=V.next()){S=S.value;var F=d.options[S].default;F!==void 0&&(this.j[S]=typeof F=="function"?F():F)}}}e=nt.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Zt(d){var V,S,F,T,c,h,G,r,u,p,s;return ft(function(a){switch(a.g){case 1:return d.$?(V=d.g.files===void 0?[]:typeof d.g.files=="function"?d.g.files(d.j):d.g.files,_(a,gt(),2)):a.return();case 2:if(S=a.h,typeof window=="object")return O("createMediapipeSolutionsWasm",{locateFile:d.locateFile}),O("createMediapipeSolutionsPackedAssets",{locateFile:d.locateFile}),h=V.filter(function(C){return C.data!==void 0}),G=V.filter(function(C){return C.data===void 0}),r=Promise.all(h.map(function(C){var y=wt(d,C.url);if(C.path!==void 0){var w=C.path;y=y.then(function(N){return d.overrideFile(w,N),Promise.resolve(N)})}return y})),u=Promise.all(G.map(function(C){return C.simd===void 0||C.simd&&S||!C.simd&&!S?E(d.locateFile(C.url,d.aa)):Promise.resolve()})).then(function(){var C,y,w;return ft(function(N){if(N.g==1)return C=window.createMediapipeSolutionsWasm,y=window.createMediapipeSolutionsPackedAssets,w=d,_(N,C(y),2);w.h=N.h,N.g=0})}),p=function(){return ft(function(C){return d.g.graph&&d.g.graph.url?C=_(C,wt(d,d.g.graph.url),0):(C.g=0,C=void 0),C})}(),_(a,Promise.all([u,r,p]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return F=V.filter(function(C){return C.simd===void 0||C.simd&&S||!C.simd&&!S}).map(function(C){return d.locateFile(C.url,d.aa)}),importScripts.apply(null,Z(F)),T=d,_(a,createMediapipeSolutionsWasm(Module),6);case 6:T.h=a.h,d.l=new OffscreenCanvas(1,1),d.h.canvas=d.l,c=d.h.GL.createContext(d.l,{antialias:!1,alpha:!1,na:typeof WebGL2RenderingContext!="undefined"?2:1}),d.h.GL.makeContextCurrent(c),a.g=4;break;case 7:if(d.l=document.createElement("canvas"),s=d.l.getContext("webgl2",{}),!s&&(s=d.l.getContext("webgl",{}),!s))return alert("Failed to create WebGL canvas context when passing video frame."),a.return();d.G=s,d.h.canvas=d.l,d.h.createContext(d.l,!0,!0,{});case 4:d.i=new d.h.SolutionWasm,d.$=!1,a.g=0}})}function Wt(d){var V,S,F,T,c,h,G,r;return ft(function(u){if(u.g==1){if(d.g.graph&&d.g.graph.url&&d.Z===d.g.graph.url)return u.return();if(d.s=!0,!d.g.graph||!d.g.graph.url){u.g=2;return}return d.Z=d.g.graph.url,_(u,wt(d,d.g.graph.url),3)}for(u.g!=2&&(V=u.h,d.i.loadGraph(V)),S=m(Object.keys(d.C)),F=S.next();!F.done;F=S.next())T=F.value,d.i.overrideFile(T,d.C[T]);if(d.C={},d.g.listeners)for(c=m(d.g.listeners),h=c.next();!h.done;h=c.next())G=h.value,Ft(d,G);r=d.j,d.j={},d.setOptions(r),u.g=0})}e.reset=function(){var d=this;return ft(function(V){d.i&&(d.i.reset(),d.o={},d.u={}),V.g=0})},e.setOptions=function(d,V){var S=this;if(V=V||this.g.options){for(var F=[],T=[],c={},h=m(Object.keys(d)),G=h.next();!G.done;c={R:c.R,S:c.S},G=h.next()){var r=G.value;r in this.j&&this.j[r]===d[r]||(this.j[r]=d[r],G=V[r],G!==void 0&&(G.onChange&&(c.R=G.onChange,c.S=d[r],F.push(function(u){return function(){var p;return ft(function(s){if(s.g==1)return _(s,u.R(u.S),2);p=s.h,p===!0&&(S.s=!0),s.g=0})}}(c))),G.graphOptionXref&&(r={valueNumber:G.type===1?d[r]:0,valueBoolean:G.type===0?d[r]:!1,valueString:G.type===2?d[r]:""},G=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),G.graphOptionXref),r),T.push(G))))}(F.length!==0||T.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(T),this.A=(this.A===void 0?[]:this.A).concat(F))}};function Qt(d){var V,S,F,T,c,h,G;return ft(function(r){switch(r.g){case 1:if(!d.s)return r.return();if(!d.A){r.g=2;break}V=m(d.A),S=V.next();case 3:if(S.done){r.g=5;break}return F=S.value,_(r,F(),4);case 4:S=V.next(),r.g=3;break;case 5:d.A=void 0;case 2:if(d.B){for(T=new d.h.GraphOptionChangeRequestList,c=m(d.B),h=c.next();!h.done;h=c.next())G=h.value,T.push_back(G);d.i.changeOptions(T),T.delete(),d.B=void 0}d.s=!1,r.g=0}})}e.initialize=function(){var d=this;return ft(function(V){return V.g==1?_(V,Zt(d),2):V.g!=3?_(V,Wt(d),3):_(V,Qt(d),0)})};function wt(d,V){var S,F;return ft(function(T){return V in d.H?T.return(d.H[V]):(S=d.locateFile(V,""),F=fetch(S).then(function(c){return c.arrayBuffer()}),d.H[V]=F,T.return(F))})}e.overrideFile=function(d,V){this.i?this.i.overrideFile(d,V):this.C[d]=V},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(d,V){var S=this,F,T,c,h,G,r,u,p,s;return ft(function(a){switch(a.g){case 1:return S.g.inputs?(F=1e3*(V==null?performance.now():V),_(a,S.D,2)):a.return();case 2:return _(a,S.initialize(),3);case 3:for(T=new S.h.PacketDataList,c=m(Object.keys(d)),h=c.next();!h.done;h=c.next())if(G=h.value,r=S.g.inputs[G]){t:{var C=d[G];switch(r.type){case"video":var y=S.o[r.stream];if(y||(y=new mt(S.h,S.G),S.o[r.stream]=y),y.l===0&&(y.l=y.h.createTexture()),typeof HTMLVideoElement!="undefined"&&C instanceof HTMLVideoElement)var w=C.videoWidth,N=C.videoHeight;else typeof HTMLImageElement!="undefined"&&C instanceof HTMLImageElement?(w=C.naturalWidth,N=C.naturalHeight):(w=C.width,N=C.height);N={glName:y.l,width:w,height:N},w=y.g,w.canvas.width=N.width,w.canvas.height=N.height,w.activeTexture(w.TEXTURE0),y.h.bindTexture2d(y.l),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,C),y.h.bindTexture2d(0),y=N;break t;case"detections":for(y=S.o[r.stream],y||(y=new v(S.h),S.o[r.stream]=y),y.data||(y.data=new y.g.DetectionListData),y.data.reset(C.length),N=0;N<C.length;++N){w=C[N];var Y=y.data,U=Y.setBoundingBox,j=N,et=w.ea,it=new W;if(Jt(it,1,et.ka),Jt(it,2,et.la),Jt(it,3,et.height),Jt(it,4,et.width),Jt(it,5,et.rotation),Jt(it,6,et.ia),et=$(it,M),U.call(Y,j,et),w.Y)for(Y=0;Y<w.Y.length;++Y){it=w.Y[Y];var Ct=!!it.visibility;U=y.data,j=U.addNormalizedLandmark,et=N,it=Object.assign(Object.assign({},it),{visibility:Ct?it.visibility:0}),Ct=new fe,Jt(Ct,1,it.x),Jt(Ct,2,it.y),Jt(Ct,3,it.z),it.visibility&&Jt(Ct,4,it.visibility),it=$(Ct,Ve),j.call(U,et,it)}if(w.V)for(Y=0;Y<w.V.length;++Y)U=y.data,j=U.addClassification,et=N,it=w.V[Y],Ct=new zt,Jt(Ct,2,it.score),it.index&&Jt(Ct,1,it.index),it.label&&Jt(Ct,3,it.label),it.displayName&&Jt(Ct,4,it.displayName),it=$(Ct,xt),j.call(U,et,it)}y=y.data;break t;default:y={}}}switch(u=y,p=r.stream,r.type){case"video":T.pushTexture2d(Object.assign(Object.assign({},u),{stream:p,timestamp:F}));break;case"detections":s=u,s.stream=p,s.timestamp=F,T.pushDetectionList(s);break;default:throw Error("Unknown input config type: '"+r.type+"'")}}return S.i.send(T),_(a,S.D,4);case 4:T.delete(),a.g=0}})};function bt(d,V,S){var F,T,c,h,G,r,u,p,s,a,C,y,w,N;return ft(function(Y){switch(Y.g){case 1:if(!S)return Y.return(V);for(F={},T=0,c=m(Object.keys(S)),h=c.next();!h.done;h=c.next())G=h.value,r=S[G],typeof r!="string"&&r.type==="texture"&&V[r.stream]!==void 0&&++T;1<T&&(d.I=!1),u=m(Object.keys(S)),h=u.next();case 2:if(h.done){Y.g=4;break}if(p=h.value,s=S[p],typeof s=="string")return w=F,N=p,_(Y,Xt(d,p,V[s]),14);if(a=V[s.stream],s.type==="detection_list"){if(a){for(var U=a.getRectList(),j=a.getLandmarksList(),et=a.getClassificationsList(),it=[],Ct=0;Ct<U.size();++Ct){var pt=R(U.get(Ct),W,M);pt={ea:{ka:Ie(pt,1),la:Ie(pt,2),height:Ie(pt,3),width:Ie(pt,4),rotation:Ie(pt,5,0),ia:ue(pt,6)},Y:ze(R(j.get(Ct),De,b),fe,1).map(D),V:tt(R(et.get(Ct),Ut,oe))},it.push(pt)}U=it}else U=[];F[p]=U,Y.g=7;break}if(s.type==="proto_list"){if(a){for(U=Array(a.size()),j=0;j<a.size();j++)U[j]=a.get(j);a.delete()}else U=[];F[p]=U,Y.g=7;break}if(a===void 0){Y.g=3;break}if(s.type==="float_list"){F[p]=a,Y.g=7;break}if(s.type==="proto"){F[p]=a,Y.g=7;break}if(s.type!=="texture")throw Error("Unknown output config type: '"+s.type+"'");return C=d.u[p],C||(C=new mt(d.h,d.G),d.u[p]=C),_(Y,g(C,a,d.I),13);case 13:y=Y.h,F[p]=y;case 7:s.transform&&F[p]&&(F[p]=s.transform(F[p])),Y.g=3;break;case 14:w[N]=Y.h;case 3:h=u.next(),Y.g=2;break;case 4:return Y.return(F)}})}function Xt(d,V,S){var F;return ft(function(T){return typeof S=="number"||S instanceof Uint8Array||S instanceof d.h.Uint8BlobList?T.return(S):S instanceof d.h.Texture2dDataOut?(F=d.u[V],F||(F=new mt(d.h,d.G),d.u[V]=F),T.return(g(F,S,d.I))):T.return(void 0)})}function Ft(d,V){for(var S=V.name||"$",F=[].concat(Z(V.wants)),T=new d.h.StringList,c=m(V.wants),h=c.next();!h.done;h=c.next())T.push_back(h.value);c=d.h.PacketListener.implement({onResults:function(G){for(var r={},u=0;u<V.wants.length;++u)r[F[u]]=G.get(u);var p=d.listeners[S];p&&(d.D=bt(d,r,V.outs).then(function(s){s=p(s);for(var a=0;a<V.wants.length;++a){var C=r[F[a]];typeof C=="object"&&C.hasOwnProperty&&C.hasOwnProperty("delete")&&C.delete()}s&&(d.D=s)}))}}),d.i.attachMultiListener(T,c),T.delete()}e.onResults=function(d,V){this.listeners[V||"$"]=d},Tt("Solution",nt),Tt("OptionType",{BOOL:0,NUMBER:1,ma:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Nt(d){return d===void 0&&(d=0),d===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Mt(d){var V=this;d=d||{},this.g=new nt({locateFile:d.locateFile,files:function(S){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Nt(S.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:ot},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:ot},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(S){return S.map(function(F){return tt(R(F,Ut,oe))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(S){var F,T,c;return ft(function(h){return h.g==1?(F=Nt(S),T="third_party/mediapipe/modules/hand_landmark/"+F,_(h,wt(V.g,F),2)):(c=h.h,V.g.overrideFile(T,c),h.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=Mt.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(d){this.g.onResults(d)},e.initialize=function(){var d=this;return ft(function(V){return _(V,d.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(d){var V=this;return ft(function(S){return _(S,V.g.send(d),0)})},e.setOptions=function(d){this.g.setOptions(d)},Tt("Hands",Mt),Tt("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Tt("VERSION","0.4.1646424915")}).call(i3);var n3={};(function(){var e;function t(r){var u=0;return function(){return u<r.length?{done:!1,value:r[u++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,u,p){return r==Array.prototype||r==Object.prototype||(r[u]=p.value),r};function n(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var u=0;u<r.length;++u){var p=r[u];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var o=n(this);function l(r,u){if(u)t:{var p=o;r=r.split(".");for(var s=0;s<r.length-1;s++){var a=r[s];if(!(a in p))break t;p=p[a]}r=r[r.length-1],s=p[r],u=u(s),u!=s&&u!=null&&i(p,r,{configurable:!0,writable:!0,value:u})}}l("Symbol",function(r){function u(C){if(this instanceof u)throw new TypeError("Symbol is not a constructor");return new p(s+(C||"")+"_"+a++,C)}function p(C,y){this.g=C,i(this,"description",{configurable:!0,writable:!0,value:y})}if(r)return r;p.prototype.toString=function(){return this.g};var s="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return u}),l("Symbol.iterator",function(r){if(r)return r;r=Symbol("Symbol.iterator");for(var u="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),p=0;p<u.length;p++){var s=o[u[p]];typeof s=="function"&&typeof s.prototype[r]!="function"&&i(s.prototype,r,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return r});function I(r){return r={next:r},r[Symbol.iterator]=function(){return this},r}function m(r){var u=typeof Symbol!="undefined"&&Symbol.iterator&&r[Symbol.iterator];return u?u.call(r):{next:t(r)}}function Z(r){if(!(r instanceof Array)){r=m(r);for(var u,p=[];!(u=r.next()).done;)p.push(u.value);r=p}return r}var x=typeof Object.create=="function"?Object.create:function(r){function u(){}return u.prototype=r,new u},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var st={a:!0},ut={};try{ut.__proto__=st,K=ut.a;break t}catch{}K=!1}L=K?function(r,u){if(r.__proto__=u,r.__proto__!==u)throw new TypeError(r+" is not extensible");return r}:null}var P=L;function ct(r,u){if(r.prototype=x(u.prototype),r.prototype.constructor=r,P)P(r,u);else for(var p in u)if(p!="prototype")if(Object.defineProperties){var s=Object.getOwnPropertyDescriptor(u,p);s&&Object.defineProperty(r,p,s)}else r[p]=u[p];r.da=u.prototype}function Rt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Bt(r){if(r.l)throw new TypeError("Generator is already running");r.l=!0}Rt.prototype.o=function(r){this.h=r};function Yt(r,u){r.j={U:u,V:!0},r.g=r.m||r.s}Rt.prototype.return=function(r){this.j={return:r},this.g=this.s};function _(r,u,p){return r.g=p,{value:u}}function qe(r){this.g=new Rt,this.h=r}function ni(r,u){Bt(r.g);var p=r.g.i;return p?we(r,"return"in p?p.return:function(s){return{value:s,done:!0}},u,r.g.return):(r.g.return(u),qt(r))}function we(r,u,p,s){try{var a=u.call(r.g.i,p);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return r.g.l=!1,a;var C=a.value}catch(y){return r.g.i=null,Yt(r.g,y),qt(r)}return r.g.i=null,s.call(r.g,C),qt(r)}function qt(r){for(;r.g.g;)try{var u=r.h(r.g);if(u)return r.g.l=!1,{value:u.value,done:!1}}catch(p){r.g.h=void 0,Yt(r.g,p)}if(r.g.l=!1,r.g.j){if(u=r.g.j,r.g.j=null,u.V)throw u.U;return{value:u.return,done:!0}}return{value:void 0,done:!0}}function Bn(r){this.next=function(u){return Bt(r.g),r.g.i?u=we(r,r.g.i.next,u,r.g.o):(r.g.o(u),u=qt(r)),u},this.throw=function(u){return Bt(r.g),r.g.i?u=we(r,r.g.i.throw,u,r.g.o):(Yt(r.g,u),u=qt(r)),u},this.return=function(u){return ni(r,u)},this[Symbol.iterator]=function(){return this}}function ge(r){function u(s){return r.next(s)}function p(s){return r.throw(s)}return new Promise(function(s,a){function C(y){y.done?s(y.value):Promise.resolve(y.value).then(u,p).then(C,a)}C(r.next())})}function ft(r){return ge(new Bn(new qe(r)))}l("Promise",function(r){function u(y){this.h=0,this.i=void 0,this.g=[],this.o=!1;var w=this.j();try{y(w.resolve,w.reject)}catch(N){w.reject(N)}}function p(){this.g=null}function s(y){return y instanceof u?y:new u(function(w){w(y)})}if(r)return r;p.prototype.h=function(y){if(this.g==null){this.g=[];var w=this;this.i(function(){w.l()})}this.g.push(y)};var a=o.setTimeout;p.prototype.i=function(y){a(y,0)},p.prototype.l=function(){for(;this.g&&this.g.length;){var y=this.g;this.g=[];for(var w=0;w<y.length;++w){var N=y[w];y[w]=null;try{N()}catch(Y){this.j(Y)}}}this.g=null},p.prototype.j=function(y){this.i(function(){throw y})},u.prototype.j=function(){function y(Y){return function(U){N||(N=!0,Y.call(w,U))}}var w=this,N=!1;return{resolve:y(this.C),reject:y(this.l)}},u.prototype.C=function(y){if(y===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(y instanceof u)this.F(y);else{t:switch(typeof y){case"object":var w=y!=null;break t;case"function":w=!0;break t;default:w=!1}w?this.v(y):this.m(y)}},u.prototype.v=function(y){var w=void 0;try{w=y.then}catch(N){this.l(N);return}typeof w=="function"?this.G(w,y):this.m(y)},u.prototype.l=function(y){this.s(2,y)},u.prototype.m=function(y){this.s(1,y)},u.prototype.s=function(y,w){if(this.h!=0)throw Error("Cannot settle("+y+", "+w+"): Promise already settled in state"+this.h);this.h=y,this.i=w,this.h===2&&this.D(),this.A()},u.prototype.D=function(){var y=this;a(function(){if(y.B()){var w=o.console;typeof w!="undefined"&&w.error(y.i)}},1)},u.prototype.B=function(){if(this.o)return!1;var y=o.CustomEvent,w=o.Event,N=o.dispatchEvent;return typeof N=="undefined"?!0:(typeof y=="function"?y=new y("unhandledrejection",{cancelable:!0}):typeof w=="function"?y=new w("unhandledrejection",{cancelable:!0}):(y=o.document.createEvent("CustomEvent"),y.initCustomEvent("unhandledrejection",!1,!0,y)),y.promise=this,y.reason=this.i,N(y))},u.prototype.A=function(){if(this.g!=null){for(var y=0;y<this.g.length;++y)C.h(this.g[y]);this.g=null}};var C=new p;return u.prototype.F=function(y){var w=this.j();y.J(w.resolve,w.reject)},u.prototype.G=function(y,w){var N=this.j();try{y.call(w,N.resolve,N.reject)}catch(Y){N.reject(Y)}},u.prototype.then=function(y,w){function N(et,it){return typeof et=="function"?function(Ct){try{Y(et(Ct))}catch(pt){U(pt)}}:it}var Y,U,j=new u(function(et,it){Y=et,U=it});return this.J(N(y,Y),N(w,U)),j},u.prototype.catch=function(y){return this.then(void 0,y)},u.prototype.J=function(y,w){function N(){switch(Y.h){case 1:y(Y.i);break;case 2:w(Y.i);break;default:throw Error("Unexpected state: "+Y.h)}}var Y=this;this.g==null?C.h(N):this.g.push(N),this.o=!0},u.resolve=s,u.reject=function(y){return new u(function(w,N){N(y)})},u.race=function(y){return new u(function(w,N){for(var Y=m(y),U=Y.next();!U.done;U=Y.next())s(U.value).J(w,N)})},u.all=function(y){var w=m(y),N=w.next();return N.done?s([]):new u(function(Y,U){function j(Ct){return function(pt){et[Ct]=pt,it--,it==0&&Y(et)}}var et=[],it=0;do et.push(void 0),it++,s(N.value).J(j(et.length-1),U),N=w.next();while(!N.done)})},u});function Yi(r,u){r instanceof String&&(r+="");var p=0,s=!1,a={next:function(){if(!s&&p<r.length){var C=p++;return{value:u(C,r[C]),done:!1}}return s=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}var Jn=typeof Object.assign=="function"?Object.assign:function(r,u){for(var p=1;p<arguments.length;p++){var s=arguments[p];if(s)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])}return r};l("Object.assign",function(r){return r||Jn}),l("Object.is",function(r){return r||function(u,p){return u===p?u!==0||1/u===1/p:u!==u&&p!==p}}),l("Array.prototype.includes",function(r){return r||function(u,p){var s=this;s instanceof String&&(s=String(s));var a=s.length;for(p=p||0,0>p&&(p=Math.max(p+a,0));p<a;p++){var C=s[p];if(C===u||Object.is(C,u))return!0}return!1}}),l("String.prototype.includes",function(r){return r||function(u,p){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(u instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(u,p||0)!==-1}}),l("Array.prototype.keys",function(r){return r||function(){return Yi(this,function(u){return u})}});var He=this||self;function Tt(r,u){r=r.split(".");var p=He;r[0]in p||typeof p.execScript=="undefined"||p.execScript("var "+r[0]);for(var s;r.length&&(s=r.shift());)r.length||u===void 0?p[s]&&p[s]!==Object.prototype[s]?p=p[s]:p=p[s]={}:p[s]=u}function Je(r){He.setTimeout(function(){throw r},0)}function yi(r){Je(r)}function Oi(r,u){yi(Error("Invalid wire type: "+r+" (at position "+u+")"))}function An(){yi(Error("Failed to read varint, encoding is invalid."))}function sn(r,u){return u=String.fromCharCode.apply(null,u),r==null?u:r+u}var Xn,Si=typeof TextDecoder!="undefined",Mi,Fn=typeof TextEncoder!="undefined";function yn(r){if(Fn)r=(Mi||(Mi=new TextEncoder)).encode(r);else{var u=void 0;u=u===void 0?!1:u;for(var p=0,s=new Uint8Array(3*r.length),a=0;a<r.length;a++){var C=r.charCodeAt(a);if(128>C)s[p++]=C;else{if(2048>C)s[p++]=C>>6|192;else{if(55296<=C&&57343>=C){if(56319>=C&&a<r.length){var y=r.charCodeAt(++a);if(56320<=y&&57343>=y){C=1024*(C-55296)+y-56320+65536,s[p++]=C>>18|240,s[p++]=C>>12&63|128,s[p++]=C>>6&63|128,s[p++]=C&63|128;continue}else a--}if(u)throw Error("Found an unpaired surrogate");C=65533}s[p++]=C>>12|224,s[p++]=C>>6&63|128}s[p++]=C&63|128}}r=s.subarray(0,p)}return r}var oi={},ei=null;function rn(r){var u;u===void 0&&(u=0),Me(),u=oi[u];for(var p=Array(Math.floor(r.length/3)),s=u[64]||"",a=0,C=0;a<r.length-2;a+=3){var y=r[a],w=r[a+1],N=r[a+2],Y=u[y>>2];y=u[(y&3)<<4|w>>4],w=u[(w&15)<<2|N>>6],N=u[N&63],p[C++]=Y+y+w+N}switch(Y=0,N=s,r.length-a){case 2:Y=r[a+1],N=u[(Y&15)<<2]||s;case 1:r=r[a],p[C]=u[r>>2]+u[(r&3)<<4|Y>>4]+N+s}return p.join("")}function ji(r){var u=r.length,p=3*u/4;p%3?p=Math.floor(p):"=.".indexOf(r[u-1])!=-1&&(p="=.".indexOf(r[u-2])!=-1?p-2:p-1);var s=new Uint8Array(p),a=0;return Ae(r,function(C){s[a++]=C}),s.subarray(0,a)}function Ae(r,u){function p(N){for(;s<r.length;){var Y=r.charAt(s++),U=ei[Y];if(U!=null)return U;if(!/^[\s\xa0]*$/.test(Y))throw Error("Unknown base64 encoding at char: "+Y)}return N}Me();for(var s=0;;){var a=p(-1),C=p(0),y=p(64),w=p(64);if(w===64&&a===-1)break;u(a<<2|C>>4),y!=64&&(u(C<<4&240|y>>2),w!=64&&u(y<<6&192|w))}}function Me(){if(!ei){ei={};for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],p=0;5>p;p++){var s=r.concat(u[p].split(""));oi[p]=s;for(var a=0;a<s.length;a++){var C=s[a];ei[C]===void 0&&(ei[C]=a)}}}}var si=typeof Uint8Array=="function",de;function Fe(r){if(this.g=r,r!==null&&r.length===0)throw Error("ByteString should be constructed with non-empty values")}Fe.prototype.toJSON=function(){if(this.g==null)var r="";else r=this.g,r=this.g=r==null||typeof r=="string"?r:si&&r instanceof Uint8Array?rn(r):null;return r};var Zi=typeof Uint8Array.prototype.slice=="function";function $e(r,u,p){return u===p?de||(de=new Uint8Array(0)):Zi?r.slice(u,p):new Uint8Array(r.subarray(u,p))}var ne=0,Xe=0;function Ue(r){if(r.constructor===Uint8Array)return r;if(r.constructor===ArrayBuffer)return new Uint8Array(r);if(r.constructor===Array)return new Uint8Array(r);if(r.constructor===String)return ji(r);if(r.constructor===Fe){if(r.g==null)var u=de||(de=new Uint8Array(0));else{u=Uint8Array;var p=r.g;p=p==null||si&&p!=null&&p instanceof Uint8Array?p:typeof p=="string"?ji(p):null,r=r.g=p,u=new u(r)}return u}if(r instanceof Uint8Array)return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Dt(r,u){u=u===void 0?{}:u,u=u.u===void 0?!1:u.u,this.h=null,this.g=this.i=this.m=0,this.l=!1,this.u=u,r&&xe(this,r)}function xe(r,u){r.h=Ue(u),r.m=0,r.i=r.h.length,r.g=r.m}Dt.prototype.reset=function(){this.g=this.m};function $t(r){for(var u=128,p=0,s=0,a=0;4>a&&128<=u;a++)u=r.h[r.g++],p|=(u&127)<<7*a;if(128<=u&&(u=r.h[r.g++],p|=(u&127)<<28,s|=(u&127)>>4),128<=u)for(a=0;5>a&&128<=u;a++)u=r.h[r.g++],s|=(u&127)<<7*a+3;if(128>u)return r=p>>>0,u=s>>>0,(s=u&2147483648)&&(r=~r+1>>>0,u=~u>>>0,r==0&&(u=u+1>>>0)),r=4294967296*u+(r>>>0),s?-r:r;r.l=!0,An()}function Ge(r){r.g>r.i&&(r.l=!0,yi(Error("Tried to read past the end of the data "+r.g+" > "+r.i)))}Dt.prototype.j=function(){var r=this.h,u=r[this.g],p=u&127;return 128>u?(this.g+=1,Ge(this),p):(u=r[this.g+1],p|=(u&127)<<7,128>u?(this.g+=2,Ge(this),p):(u=r[this.g+2],p|=(u&127)<<14,128>u?(this.g+=3,Ge(this),p):(u=r[this.g+3],p|=(u&127)<<21,128>u?(this.g+=4,Ge(this),p):(u=r[this.g+4],p|=(u&15)<<28,128>u?(this.g+=5,Ge(this),p>>>0):(this.g+=5,128<=r[this.g++]&&128<=r[this.g++]&&128<=r[this.g++]&&128<=r[this.g++]&&128<=r[this.g++]?(this.l=!0,An(),p):(Ge(this),p))))))},Dt.prototype.o=function(){var r=this.h[this.g],u=this.h[this.g+1],p=this.h[this.g+2],s=this.h[this.g+3];return this.g+=4,Ge(this),p=(r<<0|u<<8|p<<16|s<<24)>>>0,r=2*(p>>31)+1,u=p>>>23&255,p&=8388607,u==255?p?NaN:1/0*r:u==0?r*Math.pow(2,-149)*p:r*Math.pow(2,u-150)*(p+Math.pow(2,23))};var Te=[];function di(){this.g=new Uint8Array(64),this.h=0}function Se(r,u){if(!(r.h+1<r.g.length)){var p=r.g;r.g=new Uint8Array(Math.ceil(1+2*r.g.length)),r.g.set(p)}r.g[r.h++]=u}di.prototype.length=function(){return this.h},di.prototype.end=function(){var r=this.g,u=this.h;return this.h=0,$e(r,0,u)};function te(r,u){for(;127<u;)Se(r,u&127|128),u>>>=7;Se(r,u)}function ii(r){var u={},p=u.N===void 0?!1:u.N;this.m={u:u.u===void 0?!1:u.u},this.N=p,u=this.m,Te.length?(p=Te.pop(),u&&(p.u=u.u),r&&xe(p,r),r=p):r=new Dt(r,u),this.g=r,this.l=this.g.g,this.h=this.i=-1,this.j=!1}ii.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function ri(r){var u=r.g;if((u=u.g==u.i)||(u=r.j)||(u=r.g,u=u.l||0>u.g||u.g>u.i),u)return!1;r.l=r.g.g;var p=r.g.j();return u=p>>>3,p&=7,0<=p&&5>=p?(r.i=u,r.h=p,!0):(r.j=!0,Oi(p,r.l),!1)}function Ne(r){switch(r.h){case 0:if(r.h!=0)Ne(r);else t:{r=r.g;for(var u=r.g,p=0;10>p;p++){if((r.h[u]&128)===0){r.g=u+1,Ge(r);break t}u++}r.l=!0,An()}break;case 1:r=r.g,r.g+=8,Ge(r);break;case 2:r.h!=2?Ne(r):(u=r.g.j(),r=r.g,r.g+=u,Ge(r));break;case 5:r=r.g,r.g+=4,Ge(r);break;case 3:u=r.i;do{if(!ri(r)){r.j=!0,yi(Error("Unmatched start-group tag: stream EOF"));break}if(r.h==4){r.i!=u&&(r.j=!0,yi(Error("Unmatched end-group tag")));break}Ne(r)}while(1);break;default:r.j=!0,Oi(r.h,r.l)}}function _i(r,u,p){r.N||(r=$e(r.g.h,p,r.g.g),(p=u.o)?p.push(r):u.o=[r])}function fi(r,u,p){var s=r.g.i,a=r.g.j(),C=r.g.g+a;if(r.g.i=C,p(u,r),p=C-r.g.g,p!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(a+" bytes, instead read "+(a-p)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return r.g.g=C,r.g.i=s,u}function li(r,u,p){var s=r.g.j();for(s=r.g.g+s;r.g.g<s;)p.push(u.call(r.g))}var Gi=[];function Re(){this.h=[],this.i=0,this.g=new di}function ke(r,u){u.length!==0&&(r.h.push(u),r.i+=u.length)}function ve(r,u,p){te(r.g,8*u+2),te(r.g,p.length),ke(r,r.g.end()),ke(r,p)}var ae=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function ci(r,u){Object.isFrozen(r)||(ae?r[ae]|=u:r.g!==void 0?r.g|=u:Object.defineProperties(r,{g:{value:u,configurable:!0,writable:!0,enumerable:!1}}))}function le(r){if(!r)return 0;var u;return ae?u=r[ae]:u=r.g,u==null?0:u}function ee(r){return Array.isArray(r)&&ci(r,1),r}function wi(r){if(!Array.isArray(r))throw Error("cannot mark non-array as immutable");ci(r,2)}function ye(r){return r!==null&&typeof r=="object"&&r.constructor===Object}function Jt(r){switch(typeof r){case"number":return isFinite(r)?r:String(r);case"object":return si&&r!=null&&r instanceof Uint8Array?rn(r):r;default:return r}}function vt(r,u){if(r!=null)return Array.isArray(r)||ye(r)?Ie(r,u):u(r)}function Ie(r,u){if(Array.isArray(r)){for(var p=Array(r.length),s=0;s<r.length;s++)p[s]=vt(r[s],u);return le(r)&1&&ee(p),p}p={};for(s in r)p[s]=vt(r[s],u);return p}var ze;function ce(r,u,p){var s=ze;ze=null,r||(r=s),s=this.constructor.ba,r||(r=s?[s]:[]),this.j=(s?0:-1)-(this.constructor.$||0),this.m=this.g=null,this.h=r;t:{if(s=this.h.length,r=s-1,s&&(s=this.h[r],ye(s))){this.l=r-this.j,this.i=s;break t}u!==void 0&&-1<u?(this.l=Math.max(u,r+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(p)for(u=0;u<p.length;u++)r=p[u],r<this.l?(r+=this.j,(s=this.h[r])?ee(s):this.h[r]=ue):(rt(this),(s=this.i[r])?ee(s):this.i[r]=ue)}var ue=Object.freeze(ee([]));function rt(r){var u=r.l+r.j;r.h[u]||(r.i=r.h[u]={})}function at(r,u,p){return u===-1?null:(p===void 0?0:p)||u>=r.l?r.i?r.i[u]:void 0:r.h[u+r.j]}function ht(r,u,p){p=p===void 0?!0:p;var s=s===void 0?!1:s,a=at(r,u,s);return a==null&&(a=ue),a===ue?(a=ee([]),Ht(r,u,a,s)):p&&Array.isArray(a)&&le(a)&2&&(a=a.slice(),Ht(r,u,a,s)),a}function ie(r){var u=ht(r,3,!1);if(r.m||(r.m={}),!r.m[3]){for(var p=0;p<u.length;p++)u[p]=+u[p];r.m[3]=!0}return u}function pe(r,u,p){return r=at(r,u),r==null?p:r}function he(r,u,p){return r=at(r,u),r=r==null?r:+r,r==null?p===void 0?0:p:r}function Ht(r,u,p,s){(s===void 0?0:s)||u>=r.l?(rt(r),r.i[u]=p):r.h[u+r.j]=p}function Ze(r,u,p){if(p===-1)return null;r.g||(r.g={});var s=r.g[p];if(s)return s;var a=at(r,p,!1);return a==null?s:(u=new u(a),r.g[p]=u)}function Ee(r,u,p){r.g||(r.g={});var s=r.g[p];if(!s){var a=ht(r,p,!1);s=[];for(var C=Array.isArray(a)?!!(le(a)&2):!1,y=0;y<a.length;y++)s[y]=new u(a[y]),C&&wi(s[y].h);C&&(wi(s),Object.freeze(s)),r.g[p]=s}return s}function ai(r,u,p,s,a){var C=Ee(r,s,u);p=p||new s,r=ht(r,u),a!=null?(C.splice(a,0,p),r.splice(a,0,Ii(p))):(C.push(p),r.push(Ii(p)))}ce.prototype.toJSON=function(){var r=Ii(this);return Ie(r,Jt)};function Ii(r){if(r.g)for(var u in r.g){var p=r.g[u];if(Array.isArray(p))for(var s=0;s<p.length;s++)p[s]&&Ii(p[s]);else p&&Ii(p)}return r.h}ce.prototype.toString=function(){return Ii(this).toString()};function Fi(r,u){if(r=r.o){ke(u,u.g.end());for(var p=0;p<r.length;p++)ke(u,r[p])}}function Li(r){var u=r[0];switch(r.length){case 2:var p=r[1];return function(N,Y,U){return u(N,Y,U,p)};case 3:var s=r[1],a=r[2];return function(N,Y,U){return u(N,Y,U,s,a)};case 4:var C=r[1],y=r[2],w=r[3];return function(N,Y,U){return u(N,Y,U,C,y,w)};default:throw Error("unsupported number of parameters, expected [2-4], got "+r.length)}}function Ke(r,u,p){for(;ri(u)&&u.h!=4;){var s=u.i,a=p[s];if(a){if(Array.isArray(a)&&(a=p[s]=Li(a)),!a(u,r,s)){s=u,a=r;var C=s.l;Ne(s),_i(s,a,C)}}else s=u,a=r,C=s.l,Ne(s),_i(s,a,C)}return r}function ui(r,u){var p=new Re;if(u(r,p),r=p.i+p.g.length(),r===0)p=new Uint8Array(0);else{r=new Uint8Array(r);for(var s=p.h,a=s.length,C=u=0;C<a;C++){var y=s[C];y.length!==0&&(r.set(y,u),u+=y.length)}s=p.g,a=s.h,a!==0&&(r.set(s.g.subarray(0,a),u),s.h=0),p.h=[r],p=r}return p}function Tn(r,u,p){if(Gi.length){var s=Gi.pop();r&&(xe(s.g,r),s.i=-1,s.h=-1),r=s}else r=new ii(r);try{return p(new u,r)}finally{u=r.g,u.h=null,u.m=0,u.i=0,u.g=0,u.l=!1,u.u=!1,r.i=-1,r.h=-1,r.j=!1,100>Gi.length&&Gi.push(r)}}function Ci(r,u,p){if(u=at(u,p),u!=null){te(r.g,8*p+5),r=r.g;var s=u;s=(p=0>s?1:0)?-s:s,s===0?0<1/s?ne=Xe=0:(Xe=0,ne=2147483648):isNaN(s)?(Xe=0,ne=2147483647):34028234663852886e22<s?(Xe=0,ne=(p<<31|2139095040)>>>0):11754943508222875e-54>s?(s=Math.round(s/Math.pow(2,-149)),Xe=0,ne=(p<<31|s)>>>0):(u=Math.floor(Math.log(s)/Math.LN2),s*=Math.pow(2,-u),s=Math.round(8388608*s),16777216<=s&&++u,Xe=0,ne=(p<<31|u+127<<23|s&8388607)>>>0),p=ne,Se(r,p>>>0&255),Se(r,p>>>8&255),Se(r,p>>>16&255),Se(r,p>>>24&255)}}function Qe(r,u,p){return r.h!==5?!1:(Ht(u,p,r.g.o()),!0)}function zi(r,u,p){return r.h!==5&&r.h!==2?!1:(u=ht(u,p),r.h==2?li(r,Dt.prototype.o,u):u.push(r.g.o()),!0)}function ln(r,u,p){return r.h!==0?!1:(Ht(u,p,$t(r.g)),!0)}function ti(r,u,p){return r.h!==0?!1:(Ht(u,p,r.g.j()),!0)}function Hn(r,u,p){if(r.h!==2)return!1;var s=r.g.j();r=r.g;var a=r.g;r.g+=s,Ge(r),r=r.h;var C;if(Si)(C=Xn)||(C=Xn=new TextDecoder("utf-8",{fatal:!1})),C=C.decode(r.subarray(a,a+s));else{s=a+s;for(var y=[],w=null,N,Y,U;a<s;)N=r[a++],128>N?y.push(N):224>N?a>=s?y.push(65533):(Y=r[a++],194>N||(Y&192)!==128?(a--,y.push(65533)):y.push((N&31)<<6|Y&63)):240>N?a>=s-1?y.push(65533):(Y=r[a++],(Y&192)!==128||N===224&&160>Y||N===237&&160<=Y||((C=r[a++])&192)!==128?(a--,y.push(65533)):y.push((N&15)<<12|(Y&63)<<6|C&63)):244>=N?a>=s-2?y.push(65533):(Y=r[a++],(Y&192)!==128||(N<<28)+(Y-144)>>30!==0||((C=r[a++])&192)!==128||((U=r[a++])&192)!==128?(a--,y.push(65533)):(N=(N&7)<<18|(Y&63)<<12|(C&63)<<6|U&63,N-=65536,y.push((N>>10&1023)+55296,(N&1023)+56320))):y.push(65533),8192<=y.length&&(w=sn(w,y),y.length=0);C=sn(w,y)}return Ht(u,p,C),!0}function mi(r,u,p,s,a){if(r.h!==2)return!1;r=fi(r,new s,a);var C=C===void 0?!1:C;return u.g||(u.g={}),s=r&&Ii(r),u.g[p]=r,Ht(u,p,s,C),!0}function Ki(r,u,p,s,a){return r.h!==2?!1:(r=fi(r,new s,a),ai(u,p,r,s,void 0),!0)}function Cn(r,u,p){return r.h!==0&&r.h!==2?!1:(u=ht(u,p),r.h==2?li(r,Dt.prototype.j,u):u.push(r.g.j()),!0)}function Yn(r,u,p){return r.h!==0?!1:(Ht(u,p,$t(r.g)),!0)}function Vi(r){ce.call(this,r,-1,eo)}var mn;ct(Vi,ce),Vi.prototype.getRows=function(){return at(this,1)},Vi.prototype.getCols=function(){return at(this,2)},Vi.prototype.getPackedDataList=function(){return ie(this)},Vi.prototype.getLayout=function(){return pe(this,4,0)};function to(r,u){return Ke(r,u,mn||(mn={1:ti,2:ti,3:zi,4:Yn}))}var eo=[3];function hn(r){ce.call(this,r)}var Zn;ct(hn,ce);function A(r,u){var p=at(r,1);if(p!=null&&p!=null){te(u.g,8);var s=u.g;if(0<=p)te(s,p);else{for(var a=0;9>a;a++)Se(s,p&127|128),p>>=7;Se(s,1)}}Ci(u,r,2),s=at(r,3),s!=null&&ve(u,3,yn(s)),s=at(r,4),s!=null&&ve(u,4,yn(s)),Fi(r,u)}function X(r,u){return Ke(r,u,Zn||(Zn={1:ti,2:Qe,3:Hn,4:Hn}))}function R(r){ce.call(this,r,-1,It)}var k;ct(R,ce),R.prototype.addClassification=function(r,u){return ai(this,1,r,hn,u),this};function $(r,u){return Ke(r,u,k||(k={1:[Ki,hn,X]}))}var It=[1];function q(r){ce.call(this,r)}var dt;ct(q,ce);function yt(r,u){Ci(u,r,1),Ci(u,r,2),Ci(u,r,3),Ci(u,r,4),Ci(u,r,5),Fi(r,u)}function St(r,u){return Ke(r,u,dt||(dt={1:Qe,2:Qe,3:Qe,4:Qe,5:Qe}))}function Et(r){ce.call(this,r,-1,zt)}var kt;ct(Et,ce);function re(r,u){return Ke(r,u,kt||(kt={1:[Ki,q,St]}))}var zt=[1];function xt(r){ce.call(this,r)}var Ut;ct(xt,ce);function oe(r,u){Ci(u,r,1),Ci(u,r,2),Ci(u,r,3),Ci(u,r,4),Ci(u,r,5);var p=at(r,6);if(p!=null&&p!=null){te(u.g,48);var s=u.g,a=p;p=0>a,a=Math.abs(a);var C=a>>>0;for(a=Math.floor((a-C)/4294967296),a>>>=0,p&&(a=~a>>>0,C=(~C>>>0)+1,4294967295<C&&(C=0,a++,4294967295<a&&(a=0))),ne=C,Xe=a,p=ne,C=Xe;0<C||127<p;)Se(s,p&127|128),p=(p>>>7|C<<25)>>>0,C>>>=7;Se(s,p)}Fi(r,u)}function be(r,u){return Ke(r,u,Ut||(Ut={1:Qe,2:Qe,3:Qe,4:Qe,5:Qe,6:ln}))}function fe(r){ce.call(this,r,-1,b)}var Ve;ct(fe,ce),fe.prototype.getVertexType=function(){return pe(this,1,0)},fe.prototype.getPrimitiveType=function(){return pe(this,2,0)},fe.prototype.getVertexBufferList=function(){return ie(this)},fe.prototype.getIndexBufferList=function(){return ht(this,4)};function De(r,u){return Ke(r,u,Ve||(Ve={1:Yn,2:Yn,3:zi,4:Cn}))}var b=[3,4];function f(r){ce.call(this,r)}var W;ct(f,ce),f.prototype.getMesh=function(){return Ze(this,fe,1)},f.prototype.getPoseTransformMatrix=function(){return Ze(this,Vi,2)};function M(r,u){return Ke(r,u,W||(W={1:[mi,fe,De],2:[mi,Vi,to]}))}var Q=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],tt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],D=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],ot=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],mt=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],g=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],B=[].concat(Z(Q),Z(tt),Z(D),Z(ot),Z(mt),Z(g));function v(r,u,p){if(p=r.createShader(p===0?r.VERTEX_SHADER:r.FRAGMENT_SHADER),r.shaderSource(p,u),r.compileShader(p),!r.getShaderParameter(p,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+r.getShaderInfoLog(p));return p}function H(r){return Ee(r,hn,1).map(function(u){return{index:pe(u,1,0),score:he(u,2),label:at(u,3)!=null?pe(u,3,""):void 0,displayName:at(u,4)!=null?pe(u,4,""):void 0}})}function J(r){return{x:he(r,1),y:he(r,2),z:he(r,3),visibility:at(r,4)!=null?he(r,4):void 0}}function O(r){return Ee(Tn(r,Et,re),q,1).map(J)}function E(r,u){this.h=r,this.g=u,this.l=0}function gt(r,u,p){return nt(r,u),typeof r.g.canvas.transferToImageBitmap=="function"?Promise.resolve(r.g.canvas.transferToImageBitmap()):p?Promise.resolve(r.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(r.g.canvas):(r.i===void 0&&(r.i=document.createElement("canvas")),new Promise(function(s){r.i.height=r.g.canvas.height,r.i.width=r.g.canvas.width,r.i.getContext("2d",{}).drawImage(r.g.canvas,0,0,r.g.canvas.width,r.g.canvas.height),s(r.i)}))}function nt(r,u){var p=r.g;if(r.m===void 0){var s=v(p,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),a=v(p,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),C=p.createProgram();if(p.attachShader(C,s),p.attachShader(C,a),p.linkProgram(C),!p.getProgramParameter(C,p.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+p.getProgramInfoLog(C));s=r.m=C,p.useProgram(s),a=p.getUniformLocation(s,"sampler0"),r.j={I:p.getAttribLocation(s,"aVertex"),H:p.getAttribLocation(s,"aTex"),ca:a},r.s=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,r.s),p.enableVertexAttribArray(r.j.I),p.vertexAttribPointer(r.j.I,2,p.FLOAT,!1,0,0),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),p.STATIC_DRAW),p.bindBuffer(p.ARRAY_BUFFER,null),r.o=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,r.o),p.enableVertexAttribArray(r.j.H),p.vertexAttribPointer(r.j.H,2,p.FLOAT,!1,0,0),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),p.STATIC_DRAW),p.bindBuffer(p.ARRAY_BUFFER,null),p.uniform1i(a,0)}s=r.j,p.useProgram(r.m),p.canvas.width=u.width,p.canvas.height=u.height,p.viewport(0,0,u.width,u.height),p.activeTexture(p.TEXTURE0),r.h.bindTexture2d(u.glName),p.enableVertexAttribArray(s.I),p.bindBuffer(p.ARRAY_BUFFER,r.s),p.vertexAttribPointer(s.I,2,p.FLOAT,!1,0,0),p.enableVertexAttribArray(s.H),p.bindBuffer(p.ARRAY_BUFFER,r.o),p.vertexAttribPointer(s.H,2,p.FLOAT,!1,0,0),p.bindFramebuffer(p.DRAW_FRAMEBUFFER?p.DRAW_FRAMEBUFFER:p.FRAMEBUFFER,null),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.colorMask(!0,!0,!0,!0),p.drawArrays(p.TRIANGLE_FAN,0,4),p.disableVertexAttribArray(s.I),p.disableVertexAttribArray(s.H),p.bindBuffer(p.ARRAY_BUFFER,null),r.h.bindTexture2d(0)}function Zt(r){this.g=r}var Wt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Qt(r,u){return u+r}function wt(r,u){window[r]=u}function bt(r){var u=document.createElement("script");return u.setAttribute("src",r),u.setAttribute("crossorigin","anonymous"),new Promise(function(p){u.addEventListener("load",function(){p()},!1),u.addEventListener("error",function(){p()},!1),document.body.appendChild(u)})}function Xt(){return ft(function(r){switch(r.g){case 1:return r.m=2,_(r,WebAssembly.instantiate(Wt),4);case 4:r.g=3,r.m=0;break;case 2:return r.m=0,r.j=null,r.return(!1);case 3:return r.return(!0)}})}function Ft(r){if(this.g=r,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=r&&r.locateFile||Qt,typeof window=="object")var u=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")u=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=u,r.options){u=m(Object.keys(r.options));for(var p=u.next();!p.done;p=u.next()){p=p.value;var s=r.options[p].default;s!==void 0&&(this.j[p]=typeof s=="function"?s():s)}}}e=Ft.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Nt(r){var u,p,s,a,C,y,w,N,Y,U,j;return ft(function(et){switch(et.g){case 1:return r.R?(u=r.g.files===void 0?[]:typeof r.g.files=="function"?r.g.files(r.j):r.g.files,_(et,Xt(),2)):et.return();case 2:if(p=et.h,typeof window=="object")return wt("createMediapipeSolutionsWasm",{locateFile:r.locateFile}),wt("createMediapipeSolutionsPackedAssets",{locateFile:r.locateFile}),y=u.filter(function(it){return it.data!==void 0}),w=u.filter(function(it){return it.data===void 0}),N=Promise.all(y.map(function(it){var Ct=V(r,it.url);if(it.path!==void 0){var pt=it.path;Ct=Ct.then(function(At){return r.overrideFile(pt,At),Promise.resolve(At)})}return Ct})),Y=Promise.all(w.map(function(it){return it.simd===void 0||it.simd&&p||!it.simd&&!p?bt(r.locateFile(it.url,r.S)):Promise.resolve()})).then(function(){var it,Ct,pt;return ft(function(At){if(At.g==1)return it=window.createMediapipeSolutionsWasm,Ct=window.createMediapipeSolutionsPackedAssets,pt=r,_(At,it(Ct),2);pt.h=At.h,At.g=0})}),U=function(){return ft(function(it){return r.g.graph&&r.g.graph.url?it=_(it,V(r,r.g.graph.url),0):(it.g=0,it=void 0),it})}(),_(et,Promise.all([Y,N,U]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return s=u.filter(function(it){return it.simd===void 0||it.simd&&p||!it.simd&&!p}).map(function(it){return r.locateFile(it.url,r.S)}),importScripts.apply(null,Z(s)),a=r,_(et,createMediapipeSolutionsWasm(Module),6);case 6:a.h=et.h,r.l=new OffscreenCanvas(1,1),r.h.canvas=r.l,C=r.h.GL.createContext(r.l,{antialias:!1,alpha:!1,aa:typeof WebGL2RenderingContext!="undefined"?2:1}),r.h.GL.makeContextCurrent(C),et.g=4;break;case 7:if(r.l=document.createElement("canvas"),j=r.l.getContext("webgl2",{}),!j&&(j=r.l.getContext("webgl",{}),!j))return alert("Failed to create WebGL canvas context when passing video frame."),et.return();r.D=j,r.h.canvas=r.l,r.h.createContext(r.l,!0,!0,{});case 4:r.i=new r.h.SolutionWasm,r.R=!1,et.g=0}})}function Mt(r){var u,p,s,a,C,y,w,N;return ft(function(Y){if(Y.g==1){if(r.g.graph&&r.g.graph.url&&r.P===r.g.graph.url)return Y.return();if(r.o=!0,!r.g.graph||!r.g.graph.url){Y.g=2;return}return r.P=r.g.graph.url,_(Y,V(r,r.g.graph.url),3)}for(Y.g!=2&&(u=Y.h,r.i.loadGraph(u)),p=m(Object.keys(r.B)),s=p.next();!s.done;s=p.next())a=s.value,r.i.overrideFile(a,r.B[a]);if(r.B={},r.g.listeners)for(C=m(r.g.listeners),y=C.next();!y.done;y=C.next())w=y.value,T(r,w);N=r.j,r.j={},r.setOptions(N),Y.g=0})}e.reset=function(){var r=this;return ft(function(u){r.i&&(r.i.reset(),r.m={},r.s={}),u.g=0})},e.setOptions=function(r,u){var p=this;if(u=u||this.g.options){for(var s=[],a=[],C={},y=m(Object.keys(r)),w=y.next();!w.done;C={K:C.K,L:C.L},w=y.next()){var N=w.value;N in this.j&&this.j[N]===r[N]||(this.j[N]=r[N],w=u[N],w!==void 0&&(w.onChange&&(C.K=w.onChange,C.L=r[N],s.push(function(Y){return function(){var U;return ft(function(j){if(j.g==1)return _(j,Y.K(Y.L),2);U=j.h,U===!0&&(p.o=!0),j.g=0})}}(C))),w.graphOptionXref&&(N={valueNumber:w.type===1?r[N]:0,valueBoolean:w.type===0?r[N]:!1,valueString:w.type===2?r[N]:""},w=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),w.graphOptionXref),N),a.push(w))))}(s.length!==0||a.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(a),this.v=(this.v===void 0?[]:this.v).concat(s))}};function d(r){var u,p,s,a,C,y,w;return ft(function(N){switch(N.g){case 1:if(!r.o)return N.return();if(!r.v){N.g=2;break}u=m(r.v),p=u.next();case 3:if(p.done){N.g=5;break}return s=p.value,_(N,s(),4);case 4:p=u.next(),N.g=3;break;case 5:r.v=void 0;case 2:if(r.A){for(a=new r.h.GraphOptionChangeRequestList,C=m(r.A),y=C.next();!y.done;y=C.next())w=y.value,a.push_back(w);r.i.changeOptions(a),a.delete(),r.A=void 0}r.o=!1,N.g=0}})}e.initialize=function(){var r=this;return ft(function(u){return u.g==1?_(u,Nt(r),2):u.g!=3?_(u,Mt(r),3):_(u,d(r),0)})};function V(r,u){var p,s;return ft(function(a){return u in r.F?a.return(r.F[u]):(p=r.locateFile(u,""),s=fetch(p).then(function(C){return C.arrayBuffer()}),r.F[u]=s,a.return(s))})}e.overrideFile=function(r,u){this.i?this.i.overrideFile(r,u):this.B[r]=u},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(r,u){var p=this,s,a,C,y,w,N,Y,U,j;return ft(function(et){switch(et.g){case 1:return p.g.inputs?(s=1e3*(u==null?performance.now():u),_(et,p.C,2)):et.return();case 2:return _(et,p.initialize(),3);case 3:for(a=new p.h.PacketDataList,C=m(Object.keys(r)),y=C.next();!y.done;y=C.next())if(w=y.value,N=p.g.inputs[w]){t:{var it=r[w];switch(N.type){case"video":var Ct=p.m[N.stream];if(Ct||(Ct=new E(p.h,p.D),p.m[N.stream]=Ct),Ct.l===0&&(Ct.l=Ct.h.createTexture()),typeof HTMLVideoElement!="undefined"&&it instanceof HTMLVideoElement)var pt=it.videoWidth,At=it.videoHeight;else typeof HTMLImageElement!="undefined"&&it instanceof HTMLImageElement?(pt=it.naturalWidth,At=it.naturalHeight):(pt=it.width,At=it.height);At={glName:Ct.l,width:pt,height:At},pt=Ct.g,pt.canvas.width=At.width,pt.canvas.height=At.height,pt.activeTexture(pt.TEXTURE0),Ct.h.bindTexture2d(Ct.l),pt.texImage2D(pt.TEXTURE_2D,0,pt.RGBA,pt.RGBA,pt.UNSIGNED_BYTE,it),Ct.h.bindTexture2d(0),Ct=At;break t;case"detections":for(Ct=p.m[N.stream],Ct||(Ct=new Zt(p.h),p.m[N.stream]=Ct),Ct.data||(Ct.data=new Ct.g.DetectionListData),Ct.data.reset(it.length),At=0;At<it.length;++At){pt=it[At];var Vt=Ct.data,Gt=Vt.setBoundingBox,_t=At,Ce=pt.T,me=new xt;if(Ht(me,1,Ce.X),Ht(me,2,Ce.Y),Ht(me,3,Ce.height),Ht(me,4,Ce.width),Ht(me,5,Ce.rotation),Ht(me,6,Ce.W),Ce=ui(me,oe),Gt.call(Vt,_t,Ce),pt.O)for(Vt=0;Vt<pt.O.length;++Vt){me=pt.O[Vt];var je=!!me.visibility;Gt=Ct.data,_t=Gt.addNormalizedLandmark,Ce=At,me=Object.assign(Object.assign({},me),{visibility:je?me.visibility:0}),je=new q,Ht(je,1,me.x),Ht(je,2,me.y),Ht(je,3,me.z),me.visibility&&Ht(je,4,me.visibility),me=ui(je,yt),_t.call(Gt,Ce,me)}if(pt.M)for(Vt=0;Vt<pt.M.length;++Vt)Gt=Ct.data,_t=Gt.addClassification,Ce=At,me=pt.M[Vt],je=new hn,Ht(je,2,me.score),me.index&&Ht(je,1,me.index),me.label&&Ht(je,3,me.label),me.displayName&&Ht(je,4,me.displayName),me=ui(je,A),_t.call(Gt,Ce,me)}Ct=Ct.data;break t;default:Ct={}}}switch(Y=Ct,U=N.stream,N.type){case"video":a.pushTexture2d(Object.assign(Object.assign({},Y),{stream:U,timestamp:s}));break;case"detections":j=Y,j.stream=U,j.timestamp=s,a.pushDetectionList(j);break;default:throw Error("Unknown input config type: '"+N.type+"'")}}return p.i.send(a),_(et,p.C,4);case 4:a.delete(),et.g=0}})};function S(r,u,p){var s,a,C,y,w,N,Y,U,j,et,it,Ct,pt,At;return ft(function(Vt){switch(Vt.g){case 1:if(!p)return Vt.return(u);for(s={},a=0,C=m(Object.keys(p)),y=C.next();!y.done;y=C.next())w=y.value,N=p[w],typeof N!="string"&&N.type==="texture"&&u[N.stream]!==void 0&&++a;1<a&&(r.G=!1),Y=m(Object.keys(p)),y=Y.next();case 2:if(y.done){Vt.g=4;break}if(U=y.value,j=p[U],typeof j=="string")return pt=s,At=U,_(Vt,F(r,U,u[j]),14);if(et=u[j.stream],j.type==="detection_list"){if(et){for(var Gt=et.getRectList(),_t=et.getLandmarksList(),Ce=et.getClassificationsList(),me=[],je=0;je<Gt.size();++je){var Pi=Tn(Gt.get(je),xt,be);Pi={T:{X:he(Pi,1),Y:he(Pi,2),height:he(Pi,3),width:he(Pi,4),rotation:he(Pi,5,0),W:pe(Pi,6,0)},O:O(_t.get(je)),M:H(Tn(Ce.get(je),R,$))},me.push(Pi)}Gt=me}else Gt=[];s[U]=Gt,Vt.g=7;break}if(j.type==="proto_list"){if(et){for(Gt=Array(et.size()),_t=0;_t<et.size();_t++)Gt[_t]=et.get(_t);et.delete()}else Gt=[];s[U]=Gt,Vt.g=7;break}if(et===void 0){Vt.g=3;break}if(j.type==="float_list"){s[U]=et,Vt.g=7;break}if(j.type==="proto"){s[U]=et,Vt.g=7;break}if(j.type!=="texture")throw Error("Unknown output config type: '"+j.type+"'");return it=r.s[U],it||(it=new E(r.h,r.D),r.s[U]=it),_(Vt,gt(it,et,r.G),13);case 13:Ct=Vt.h,s[U]=Ct;case 7:j.transform&&s[U]&&(s[U]=j.transform(s[U])),Vt.g=3;break;case 14:pt[At]=Vt.h;case 3:y=Y.next(),Vt.g=2;break;case 4:return Vt.return(s)}})}function F(r,u,p){var s;return ft(function(a){return typeof p=="number"||p instanceof Uint8Array||p instanceof r.h.Uint8BlobList?a.return(p):p instanceof r.h.Texture2dDataOut?(s=r.s[u],s||(s=new E(r.h,r.D),r.s[u]=s),a.return(gt(s,p,r.G))):a.return(void 0)})}function T(r,u){for(var p=u.name||"$",s=[].concat(Z(u.wants)),a=new r.h.StringList,C=m(u.wants),y=C.next();!y.done;y=C.next())a.push_back(y.value);C=r.h.PacketListener.implement({onResults:function(w){for(var N={},Y=0;Y<u.wants.length;++Y)N[s[Y]]=w.get(Y);var U=r.listeners[p];U&&(r.C=S(r,N,u.outs).then(function(j){j=U(j);for(var et=0;et<u.wants.length;++et){var it=N[s[et]];typeof it=="object"&&it.hasOwnProperty&&it.hasOwnProperty("delete")&&it.delete()}j&&(r.C=j)}))}}),r.i.attachMultiListener(a,C),a.delete()}e.onResults=function(r,u){this.listeners[u||"$"]=r},Tt("Solution",Ft),Tt("OptionType",{BOOL:0,NUMBER:1,Z:2,0:"BOOL",1:"NUMBER",2:"STRING"});function c(r){return r.map(h)}function h(r){r=Tn(r,f,M);var u=r.getMesh();if(!u)return r;var p=new Float32Array(u.getVertexBufferList());u.getVertexBufferList=function(){return p};var s=new Uint32Array(u.getIndexBufferList());return u.getIndexBufferList=function(){return s},r}function G(r){var u=this;r=r||{},this.g=new Ft({locateFile:r.locateFile,files:[{url:"holistic_solution_packed_assets_loader.js"},{simd:!1,url:"holistic_solution_wasm_bin.js"},{simd:!0,url:"holistic_solution_simd_wasm_bin.js"}],graph:{url:"holistic.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:"left_hand_landmarks right_hand_landmarks face_landmarks pose_landmarks world_landmarks segmentation_mask image_transformed multi_face_geometry".split(" "),outs:{image:{type:"texture",stream:"image_transformed"},leftHandLandmarks:{type:"proto",stream:"left_hand_landmarks",transform:O},rightHandLandmarks:{type:"proto",stream:"right_hand_landmarks",transform:O},faceLandmarks:{type:"proto",stream:"face_landmarks",transform:O},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:O},ea:{type:"proto",stream:"world_landmarks",transform:O},segmentationMask:{type:"texture",stream:"segmentation_mask"},multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:c}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,default:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(p){var s,a,C,y;return ft(function(w){if(w.g==1){switch(s="",p){case 1:s="pose_landmark_full.tflite";break;case 2:s="pose_landmark_heavy.tflite";break;default:s="pose_landmark_lite.tflite"}return a="third_party/mediapipe/modules/pose_landmark/"+s,C=u.g.locateFile(s,""),_(w,fetch(C),3)}return w.g!=2?_(w,w.h.arrayBuffer(),2):(y=w.h,u.g.overrideFile(a,y),_(w,u.g.reset(),0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},refineFaceLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineFaceLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}})}e=G.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(r){this.g.onResults(r)},e.initialize=function(){var r=this;return ft(function(u){return _(u,r.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(r){var u=this;return ft(function(p){return _(p,u.g.send(r),0)})},e.setOptions=function(r){this.g.setOptions(r)},Tt("Holistic",G),Tt("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),Tt("FACEMESH_LIPS",Q),Tt("FACEMESH_LEFT_EYE",tt),Tt("FACEMESH_LEFT_EYEBROW",D),Tt("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),Tt("FACEMESH_RIGHT_EYE",ot),Tt("FACEMESH_RIGHT_EYEBROW",mt),Tt("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),Tt("FACEMESH_FACE_OVAL",g),Tt("FACEMESH_CONTOURS",B),Tt("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Tt("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Tt("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Tt("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Tt("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Tt("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Tt("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Tt("matrixDataToMatrix",function(r){for(var u=r.getCols(),p=r.getRows(),s=r.getPackedDataList(),a=[],C=0;C<p;C++)a.push(Array(u));for(C=0;C<p;C++)for(var y=0;y<u;y++){var w=r.getLayout()===1?C*u+y:y*p+C;a[C][y]=s[w]}return a}),Tt("VERSION","0.5.1635989137")}).call(n3);const o3={};(function(){var e;function t(c){var h=0;return function(){return h<c.length?{done:!1,value:c[h++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,G){return c==Array.prototype||c==Object.prototype||(c[h]=G.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var h=0;h<c.length;++h){var G=c[h];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var o=n(this);function l(c,h){if(h)t:{var G=o;c=c.split(".");for(var r=0;r<c.length-1;r++){var u=c[r];if(!(u in G))break t;G=G[u]}c=c[c.length-1],r=G[c],h=h(r),h!=r&&h!=null&&i(G,c,{configurable:!0,writable:!0,value:h})}}l("Symbol",function(c){function h(p){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return new G(r+(p||"")+"_"+u++,p)}function G(p,s){this.g=p,i(this,"description",{configurable:!0,writable:!0,value:s})}if(c)return c;G.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return h}),l("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var h="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),G=0;G<h.length;G++){var r=o[h[G]];typeof r=="function"&&typeof r.prototype[c]!="function"&&i(r.prototype,c,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return c});function I(c){return c={next:c},c[Symbol.iterator]=function(){return this},c}function m(c){var h=typeof Symbol!="undefined"&&Symbol.iterator&&c[Symbol.iterator];return h?h.call(c):{next:t(c)}}function Z(c){if(!(c instanceof Array)){c=m(c);for(var h,G=[];!(h=c.next()).done;)G.push(h.value);c=G}return c}var x=typeof Object.create=="function"?Object.create:function(c){function h(){}return h.prototype=c,new h},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var st={a:!0},ut={};try{ut.__proto__=st,K=ut.a;break t}catch{}K=!1}L=K?function(c,h){if(c.__proto__=h,c.__proto__!==h)throw new TypeError(c+" is not extensible");return c}:null}var P=L;function ct(c,h){if(c.prototype=x(h.prototype),c.prototype.constructor=c,P)P(c,h);else for(var G in h)if(G!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(h,G);r&&Object.defineProperty(c,G,r)}else c[G]=h[G];c.na=h.prototype}function Rt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Bt(c){if(c.l)throw new TypeError("Generator is already running");c.l=!0}Rt.prototype.s=function(c){this.h=c};function Yt(c,h){c.j={da:h,ea:!0},c.g=c.o||c.u}Rt.prototype.return=function(c){this.j={return:c},this.g=this.u};function _(c,h,G){return c.g=G,{value:h}}function qe(c){this.g=new Rt,this.h=c}function ni(c,h){Bt(c.g);var G=c.g.i;return G?we(c,"return"in G?G.return:function(r){return{value:r,done:!0}},h,c.g.return):(c.g.return(h),qt(c))}function we(c,h,G,r){try{var u=h.call(c.g.i,G);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return c.g.l=!1,u;var p=u.value}catch(s){return c.g.i=null,Yt(c.g,s),qt(c)}return c.g.i=null,r.call(c.g,p),qt(c)}function qt(c){for(;c.g.g;)try{var h=c.h(c.g);if(h)return c.g.l=!1,{value:h.value,done:!1}}catch(G){c.g.h=void 0,Yt(c.g,G)}if(c.g.l=!1,c.g.j){if(h=c.g.j,c.g.j=null,h.ea)throw h.da;return{value:h.return,done:!0}}return{value:void 0,done:!0}}function Bn(c){this.next=function(h){return Bt(c.g),c.g.i?h=we(c,c.g.i.next,h,c.g.s):(c.g.s(h),h=qt(c)),h},this.throw=function(h){return Bt(c.g),c.g.i?h=we(c,c.g.i.throw,h,c.g.s):(Yt(c.g,h),h=qt(c)),h},this.return=function(h){return ni(c,h)},this[Symbol.iterator]=function(){return this}}function ge(c){function h(r){return c.next(r)}function G(r){return c.throw(r)}return new Promise(function(r,u){function p(s){s.done?r(s.value):Promise.resolve(s.value).then(h,G).then(p,u)}p(c.next())})}function ft(c){return ge(new Bn(new qe(c)))}l("Promise",function(c){function h(s){this.h=0,this.i=void 0,this.g=[],this.s=!1;var a=this.j();try{s(a.resolve,a.reject)}catch(C){a.reject(C)}}function G(){this.g=null}function r(s){return s instanceof h?s:new h(function(a){a(s)})}if(c)return c;G.prototype.h=function(s){if(this.g==null){this.g=[];var a=this;this.i(function(){a.l()})}this.g.push(s)};var u=o.setTimeout;G.prototype.i=function(s){u(s,0)},G.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var a=0;a<s.length;++a){var C=s[a];s[a]=null;try{C()}catch(y){this.j(y)}}}this.g=null},G.prototype.j=function(s){this.i(function(){throw s})},h.prototype.j=function(){function s(y){return function(w){C||(C=!0,y.call(a,w))}}var a=this,C=!1;return{resolve:s(this.D),reject:s(this.l)}},h.prototype.D=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof h)this.H(s);else{t:switch(typeof s){case"object":var a=s!=null;break t;case"function":a=!0;break t;default:a=!1}a?this.A(s):this.o(s)}},h.prototype.A=function(s){var a=void 0;try{a=s.then}catch(C){this.l(C);return}typeof a=="function"?this.I(a,s):this.o(s)},h.prototype.l=function(s){this.u(2,s)},h.prototype.o=function(s){this.u(1,s)},h.prototype.u=function(s,a){if(this.h!=0)throw Error("Cannot settle("+s+", "+a+"): Promise already settled in state"+this.h);this.h=s,this.i=a,this.h===2&&this.G(),this.B()},h.prototype.G=function(){var s=this;u(function(){if(s.C()){var a=o.console;typeof a!="undefined"&&a.error(s.i)}},1)},h.prototype.C=function(){if(this.s)return!1;var s=o.CustomEvent,a=o.Event,C=o.dispatchEvent;return typeof C=="undefined"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof a=="function"?s=new a("unhandledrejection",{cancelable:!0}):(s=o.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,C(s))},h.prototype.B=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)p.h(this.g[s]);this.g=null}};var p=new G;return h.prototype.H=function(s){var a=this.j();s.M(a.resolve,a.reject)},h.prototype.I=function(s,a){var C=this.j();try{s.call(a,C.resolve,C.reject)}catch(y){C.reject(y)}},h.prototype.then=function(s,a){function C(Y,U){return typeof Y=="function"?function(j){try{y(Y(j))}catch(et){w(et)}}:U}var y,w,N=new h(function(Y,U){y=Y,w=U});return this.M(C(s,y),C(a,w)),N},h.prototype.catch=function(s){return this.then(void 0,s)},h.prototype.M=function(s,a){function C(){switch(y.h){case 1:s(y.i);break;case 2:a(y.i);break;default:throw Error("Unexpected state: "+y.h)}}var y=this;this.g==null?p.h(C):this.g.push(C),this.s=!0},h.resolve=r,h.reject=function(s){return new h(function(a,C){C(s)})},h.race=function(s){return new h(function(a,C){for(var y=m(s),w=y.next();!w.done;w=y.next())r(w.value).M(a,C)})},h.all=function(s){var a=m(s),C=a.next();return C.done?r([]):new h(function(y,w){function N(j){return function(et){Y[j]=et,U--,U==0&&y(Y)}}var Y=[],U=0;do Y.push(void 0),U++,r(C.value).M(N(Y.length-1),w),C=a.next();while(!C.done)})},h});function Yi(c,h){c instanceof String&&(c+="");var G=0,r=!1,u={next:function(){if(!r&&G<c.length){var p=G++;return{value:h(p,c[p]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}var Jn=typeof Object.assign=="function"?Object.assign:function(c,h){for(var G=1;G<arguments.length;G++){var r=arguments[G];if(r)for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(c[u]=r[u])}return c};l("Object.assign",function(c){return c||Jn}),l("Object.is",function(c){return c||function(h,G){return h===G?h!==0||1/h===1/G:h!==h&&G!==G}}),l("Array.prototype.includes",function(c){return c||function(h,G){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(G=G||0,0>G&&(G=Math.max(G+u,0));G<u;G++){var p=r[G];if(p===h||Object.is(p,h))return!0}return!1}}),l("String.prototype.includes",function(c){return c||function(h,G){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(h,G||0)!==-1}}),l("Array.prototype.keys",function(c){return c||function(){return Yi(this,function(h){return h})}});var He=this||self;function Tt(c,h){c=c.split(".");var G=He;c[0]in G||typeof G.execScript=="undefined"||G.execScript("var "+c[0]);for(var r;c.length&&(r=c.shift());)c.length||h===void 0?G[r]&&G[r]!==Object.prototype[r]?G=G[r]:G=G[r]={}:G[r]=h}function Je(){throw Error("Invalid UTF8")}function yi(c,h){return h=String.fromCharCode.apply(null,h),c==null?h:c+h}var Oi,An=typeof TextDecoder!="undefined",sn,Xn=typeof TextEncoder!="undefined",Si={},Mi=null;function Fn(c){var h;h===void 0&&(h=0),ei(),h=Si[h];for(var G=Array(Math.floor(c.length/3)),r=h[64]||"",u=0,p=0;u<c.length-2;u+=3){var s=c[u],a=c[u+1],C=c[u+2],y=h[s>>2];s=h[(s&3)<<4|a>>4],a=h[(a&15)<<2|C>>6],C=h[C&63],G[p++]=y+s+a+C}switch(y=0,C=r,c.length-u){case 2:y=c[u+1],C=h[(y&15)<<2]||r;case 1:c=c[u],G[p]=h[c>>2]+h[(c&3)<<4|y>>4]+C+r}return G.join("")}function yn(c){var h=c.length,G=3*h/4;G%3?G=Math.floor(G):"=.".indexOf(c[h-1])!=-1&&(G="=.".indexOf(c[h-2])!=-1?G-2:G-1);var r=new Uint8Array(G),u=0;return oi(c,function(p){r[u++]=p}),u!==G?r.subarray(0,u):r}function oi(c,h){function G(C){for(;r<c.length;){var y=c.charAt(r++),w=Mi[y];if(w!=null)return w;if(!/^[\s\xa0]*$/.test(y))throw Error("Unknown base64 encoding at char: "+y)}return C}ei();for(var r=0;;){var u=G(-1),p=G(0),s=G(64),a=G(64);if(a===64&&u===-1)break;h(u<<2|p>>4),s!=64&&(h(p<<4&240|s>>2),a!=64&&h(s<<6&192|a))}}function ei(){if(!Mi){Mi={};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),h=["+/=","+/","-_=","-_.","-_"],G=0;5>G;G++){var r=c.concat(h[G].split(""));Si[G]=r;for(var u=0;u<r.length;u++){var p=r[u];Mi[p]===void 0&&(Mi[p]=u)}}}}var rn=typeof Uint8Array=="function";function ji(c){return rn&&c!=null&&c instanceof Uint8Array}var Ae;function Me(c){if(this.L=c,c!==null&&c.length===0)throw Error("ByteString should be constructed with non-empty values")}var si=typeof Uint8Array.prototype.slice=="function",de=0,Fe=0;function Zi(c,h){if(c.constructor===Uint8Array)return c;if(c.constructor===ArrayBuffer)return new Uint8Array(c);if(c.constructor===Array)return new Uint8Array(c);if(c.constructor===String)return yn(c);if(c.constructor===Me)return!h&&(h=c.L)&&h.constructor===Uint8Array?h:(h=c.L,h=h==null||ji(h)?h:typeof h=="string"?yn(h):null,(c=c.L=h)?new Uint8Array(c):Ae||(Ae=new Uint8Array(0)));if(c instanceof Uint8Array)return new Uint8Array(c.buffer,c.byteOffset,c.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function $e(c,h){return Error("Invalid wire type: "+c+" (at position "+h+")")}function ne(){return Error("Failed to read varint, encoding is invalid.")}function Xe(c,h){h=h===void 0?{}:h,h=h.v===void 0?!1:h.v,this.h=null,this.g=this.i=this.j=0,this.v=h,c&&Ue(this,c)}function Ue(c,h){c.h=Zi(h,c.v),c.j=0,c.i=c.h.length,c.g=c.j}Xe.prototype.reset=function(){this.g=this.j};function Dt(c){if(c.g>c.i)throw Error("Tried to read past the end of the data "+c.g+" > "+c.i)}function xe(c){var h=c.h,G=h[c.g],r=G&127;if(128>G)return c.g+=1,Dt(c),r;if(G=h[c.g+1],r|=(G&127)<<7,128>G)return c.g+=2,Dt(c),r;if(G=h[c.g+2],r|=(G&127)<<14,128>G)return c.g+=3,Dt(c),r;if(G=h[c.g+3],r|=(G&127)<<21,128>G)return c.g+=4,Dt(c),r;if(G=h[c.g+4],c.g+=5,r|=(G&15)<<28,128>G)return Dt(c),r;if(128<=h[c.g++]&&128<=h[c.g++]&&128<=h[c.g++]&&128<=h[c.g++]&&128<=h[c.g++])throw ne();return Dt(c),r}var $t=[];function Ge(){this.g=[]}Ge.prototype.length=function(){return this.g.length},Ge.prototype.end=function(){var c=this.g;return this.g=[],c};function Te(c,h){for(;127<h;)c.g.push(h&127|128),h>>>=7;c.g.push(h)}function di(c){var h={},G=h.W===void 0?!1:h.W;this.l={v:h.v===void 0?!1:h.v},this.W=G,h=this.l,$t.length?(G=$t.pop(),h&&(G.v=h.v),c&&Ue(G,c),c=G):c=new Xe(c,h),this.g=c,this.j=this.g.g,this.h=this.i=-1}di.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function Se(c){var h=c.g;if(h.g==h.i)return!1;c.j=c.g.g;var G=xe(c.g)>>>0;if(h=G>>>3,G&=7,!(0<=G&&5>=G))throw $e(G,c.j);if(1>h)throw Error("Invalid field number: "+h+" (at position "+c.j+")");return c.i=h,c.h=G,!0}function te(c){switch(c.h){case 0:if(c.h!=0)te(c);else t:{c=c.g;for(var h=c.g,G=h+10;h<G;)if((c.h[h++]&128)===0){c.g=h,Dt(c);break t}throw ne()}break;case 1:c=c.g,c.g+=8,Dt(c);break;case 2:c.h!=2?te(c):(h=xe(c.g)>>>0,c=c.g,c.g+=h,Dt(c));break;case 5:c=c.g,c.g+=4,Dt(c);break;case 3:h=c.i;do{if(!Se(c))throw Error("Unmatched start-group tag: stream EOF");if(c.h==4){if(c.i!=h)throw Error("Unmatched end-group tag");break}te(c)}while(1);break;default:throw $e(c.h,c.j)}}var ii=[];function ri(){this.i=[],this.h=0,this.g=new Ge}function Ne(c,h){h.length!==0&&(c.i.push(h),c.h+=h.length)}function _i(c,h){if(h=h.ba){Ne(c,c.g.end());for(var G=0;G<h.length;G++)Ne(c,h[G])}}var fi=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function li(c,h){Object.isFrozen(c)||(fi?c[fi]|=h:c.N!==void 0?c.N|=h:Object.defineProperties(c,{N:{value:h,configurable:!0,writable:!0,enumerable:!1}}))}function Gi(c){var h;return fi?h=c[fi]:h=c.N,h==null?0:h}function Re(c){return li(c,1),c}function ke(c){return Array.isArray(c)?!!(Gi(c)&2):!1}function ve(c){if(!Array.isArray(c))throw Error("cannot mark non-array as immutable");li(c,2)}function ae(c){return c!==null&&typeof c=="object"&&!Array.isArray(c)&&c.constructor===Object}var ci=Object.freeze(Re([]));function le(c){if(ke(c.m))throw Error("Cannot mutate an immutable Message")}var ee=typeof Symbol!="undefined"&&typeof Symbol.hasInstance!="undefined";function wi(c){return{value:c,configurable:!1,writable:!1,enumerable:!1}}function ye(c,h,G){return h===-1?null:h>=c.i?c.g?c.g[h]:void 0:(G===void 0?0:G)&&c.g&&(G=c.g[h],G!=null)?G:c.m[h+c.h]}function Jt(c,h,G,r){r=r===void 0?!1:r,le(c),h<c.i&&!r?c.m[h+c.h]=G:(c.g||(c.g=c.m[c.i+c.h]={}))[h]=G}function vt(c,h,G,r){G=G===void 0?!0:G,r=r===void 0?!1:r;var u=ye(c,h,r);return u==null&&(u=ci),ke(c.m)?G&&(ve(u),Object.freeze(u)):(u===ci||ke(u))&&(u=Re(u.slice()),Jt(c,h,u,r)),u}function Ie(c,h,G){return c=ye(c,h),c=c==null?c:+c,c==null?G===void 0?0:G:c}function ze(c,h,G,r){c.j||(c.j={});var u=ke(c.m),p=c.j[G];if(!p){r=vt(c,G,!0,r===void 0?!1:r),p=[],u=u||ke(r);for(var s=0;s<r.length;s++)p[s]=new h(r[s]),u&&ve(p[s].m);u&&(ve(p),Object.freeze(p)),c.j[G]=p}return p}function ce(c,h,G,r,u){var p=p===void 0?!1:p;return le(c),p=ze(c,G,h,p),G=r||new G,c=vt(c,h),u!=null?(p.splice(u,0,G),c.splice(u,0,G.m)):(p.push(G),c.push(G.m)),G}function ue(c,h){return c=ye(c,h),c==null?0:c}function rt(c,h){return c=ye(c,h),c==null?"":c}function at(c){switch(typeof c){case"number":return isFinite(c)?c:String(c);case"object":if(c&&!Array.isArray(c)){if(ji(c))return Fn(c);if(c instanceof Me){var h=c.L;return h=h==null||typeof h=="string"?h:rn&&h instanceof Uint8Array?Fn(h):null,(c.L=h)||""}}}return c}function ht(c){var h=he;return h=h===void 0?Ht:h,pe(c,h)}function ie(c,h){if(c!=null){if(Array.isArray(c))c=pe(c,h);else if(ae(c)){var G={},r;for(r in c)G[r]=ie(c[r],h);c=G}else c=h(c);return c}}function pe(c,h){for(var G=c.slice(),r=0;r<G.length;r++)G[r]=ie(G[r],h);return Array.isArray(c)&&Gi(c)&1&&Re(G),G}function he(c){return c&&typeof c=="object"&&c.toJSON?c.toJSON():(c=at(c),Array.isArray(c)?ht(c):c)}function Ht(c){return ji(c)?new Uint8Array(c):c}function Ze(c,h,G){c||(c=Ee),Ee=null;var r=this.constructor.h;c||(c=r?[r]:[]),this.h=(r?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=c;t:{if(r=this.m.length,c=r-1,r&&(r=this.m[c],ae(r))){this.i=c-this.h,this.g=r;break t}h!==void 0&&-1<h?(this.i=Math.max(h,c+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(G)for(h=0;h<G.length;h++)if(c=G[h],c<this.i)c+=this.h,(r=this.m[c])?Array.isArray(r)&&Re(r):this.m[c]=ci;else{r=this.g||(this.g=this.m[this.i+this.h]={});var u=r[c];u?Array.isArray(u)&&Re(u):r[c]=ci}}Ze.prototype.toJSON=function(){return ht(this.m)},Ze.prototype.toString=function(){return this.m.toString()};var Ee;function ai(){Ze.apply(this,arguments)}if(ct(ai,Ze),ee){var Ii={};Object.defineProperties(ai,(Ii[Symbol.hasInstance]=wi(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Ii))}function Fi(c,h,G){if(G){var r={},u;for(u in G){var p=G[u],s=p.ha;s||(r.F=p.la||p.fa.P,p.aa?(r.U=ln(p.aa),s=function(a){return function(C,y,w){return a.F(C,y,w,a.U)}}(r)):p.ca?(r.T=ti(p.X.g,p.ca),s=function(a){return function(C,y,w){return a.F(C,y,w,a.T)}}(r)):s=r.F,p.ha=s),s(h,c,p.X),r={F:r.F,U:r.U,T:r.T}}}_i(h,c)}var Li=Symbol();function Ke(c,h,G){return c[Li]||(c[Li]=function(r,u){return h(r,u,G)})}function ui(c){var h=c[Li];if(!h){var G=A(c);h=function(r,u){return X(r,u,G)},c[Li]=h}return h}function Tn(c){var h=c.aa;if(h)return ui(h);if(h=c.ka)return Ke(c.X.g,h,c.ca)}function Ci(c){var h=Tn(c),G=c.X,r=c.fa.O;return h?function(u,p){return r(u,p,G,h)}:function(u,p){return r(u,p,G)}}function Qe(c,h,G,r,u,p){c=c();var s=0;for(c.length&&typeof c[0]!="number"&&(G(h,c[0]),s++);s<c.length;){G=c[s++];for(var a=s+1;a<c.length&&typeof c[a]!="number";)a++;var C=c[s++];switch(a-=s,a){case 0:r(h,G,C);break;case 1:r(h,G,C,c[s++]);break;case 2:u(h,G,C,c[s++],c[s++]);break;case 3:a=c[s++];var y=c[s++],w=c[s++];Array.isArray(w)?u(h,G,C,a,y,w):p(h,G,C,a,y,w);break;case 4:p(h,G,C,c[s++],c[s++],c[s++],c[s++]);break;default:throw Error("unexpected number of binary field arguments: "+a)}}return h}var zi=Symbol();function ln(c){var h=c[zi];if(!h){var G=Vi(c);h=function(r,u){return k(r,u,G)},c[zi]=h}return h}function ti(c,h){var G=c[zi];return G||(G=function(r,u){return Fi(r,u,h)},c[zi]=G),G}var Hn=Symbol();function mi(c,h){c.push(h)}function Ki(c,h,G){c.push(h,G.P)}function Cn(c,h,G,r,u){var p=ln(u),s=G.P;c.push(h,function(a,C,y){return s(a,C,y,r,p)})}function Yn(c,h,G,r,u,p){var s=ti(r,p),a=G.P;c.push(h,function(C,y,w){return a(C,y,w,r,s)})}function Vi(c){var h=c[Hn];return h||Qe(c,c[Hn]=[],mi,Ki,Cn,Yn)}var mn=Symbol();function to(c,h){c[0]=h}function eo(c,h,G,r){var u=G.O;c[h]=r?function(p,s,a){return u(p,s,a,r)}:u}function hn(c,h,G,r,u,p){var s=G.O,a=ui(u);c[h]=function(C,y,w){return s(C,y,w,r,a,p)}}function Zn(c,h,G,r,u,p,s){var a=G.O,C=Ke(r,u,p);c[h]=function(y,w,N){return a(y,w,N,r,C,s)}}function A(c){var h=c[mn];return h||Qe(c,c[mn]={},to,eo,hn,Zn)}function X(c,h,G){for(;Se(h)&&h.h!=4;){var r=h.i,u=G[r];if(!u){var p=G[0];p&&(p=p[r])&&(u=G[r]=Ci(p))}if((!u||!u(h,c,r))&&(u=h,r=c,p=u.j,te(u),!u.W)){var s=u.g.h;u=u.g.g,u=p===u?Ae||(Ae=new Uint8Array(0)):si?s.slice(p,u):new Uint8Array(s.subarray(p,u)),(p=r.ba)?p.push(u):r.ba=[u]}}return c}function R(c,h,G){if(ii.length){var r=ii.pop();c&&(Ue(r.g,c),r.i=-1,r.h=-1),c=r}else c=new di(c);try{return X(new h,c,A(G))}finally{h=c.g,h.h=null,h.j=0,h.i=0,h.g=0,h.v=!1,c.i=-1,c.h=-1,100>ii.length&&ii.push(c)}}function k(c,h,G){for(var r=G.length,u=r%2==1,p=u?1:0;p<r;p+=2)(0,G[p+1])(h,c,G[p]);Fi(c,h,u?G[0]:void 0)}function $(c,h){var G=new ri;k(c,G,Vi(h)),Ne(G,G.g.end()),c=new Uint8Array(G.h),h=G.i;for(var r=h.length,u=0,p=0;p<r;p++){var s=h[p];c.set(s,u),u+=s.length}return G.i=[c],c}function It(c,h){return{O:c,P:h}}var q=It(function(c,h,G){if(c.h!==5)return!1;c=c.g;var r=c.h[c.g],u=c.h[c.g+1],p=c.h[c.g+2],s=c.h[c.g+3];return c.g+=4,Dt(c),u=(r<<0|u<<8|p<<16|s<<24)>>>0,c=2*(u>>31)+1,r=u>>>23&255,u&=8388607,Jt(h,G,r==255?u?NaN:1/0*c:r==0?c*Math.pow(2,-149)*u:c*Math.pow(2,r-150)*(u+Math.pow(2,23))),!0},function(c,h,G){if(h=ye(h,G),h!=null){Te(c.g,8*G+5),c=c.g;var r=h;r=(G=0>r?1:0)?-r:r,r===0?0<1/r?de=Fe=0:(Fe=0,de=2147483648):isNaN(r)?(Fe=0,de=2147483647):34028234663852886e22<r?(Fe=0,de=(G<<31|2139095040)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),Fe=0,de=(G<<31|r)>>>0):(h=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-h),r=Math.round(8388608*r),16777216<=r&&++h,Fe=0,de=(G<<31|h+127<<23|r&8388607)>>>0),G=de,c.g.push(G>>>0&255),c.g.push(G>>>8&255),c.g.push(G>>>16&255),c.g.push(G>>>24&255)}}),dt=It(function(c,h,G){if(c.h!==0)return!1;for(var r=c.g,u=128,p=0,s=c=0;4>s&&128<=u;s++)u=r.h[r.g++],Dt(r),p|=(u&127)<<7*s;if(128<=u&&(u=r.h[r.g++],Dt(r),p|=(u&127)<<28,c|=(u&127)>>4),128<=u)for(s=0;5>s&&128<=u;s++)u=r.h[r.g++],Dt(r),c|=(u&127)<<7*s+3;if(128>u)r=p>>>0,u=c>>>0,(c=u&2147483648)&&(r=~r+1>>>0,u=~u>>>0,r==0&&(u=u+1>>>0)),r=4294967296*u+(r>>>0);else throw ne();return Jt(h,G,c?-r:r),!0},function(c,h,G){if(h=ye(h,G),h!=null&&h!=null){Te(c.g,8*G),c=c.g;var r=h;for(G=0>r,r=Math.abs(r),h=r>>>0,r=Math.floor((r-h)/4294967296),r>>>=0,G&&(r=~r>>>0,h=(~h>>>0)+1,4294967295<h&&(h=0,r++,4294967295<r&&(r=0))),de=h,Fe=r,G=de,h=Fe;0<h||127<G;)c.g.push(G&127|128),G=(G>>>7|h<<25)>>>0,h>>>=7;c.g.push(G)}}),yt=It(function(c,h,G){return c.h!==0?!1:(Jt(h,G,xe(c.g)),!0)},function(c,h,G){if(h=ye(h,G),h!=null&&h!=null)if(Te(c.g,8*G),c=c.g,G=h,0<=G)Te(c,G);else{for(h=0;9>h;h++)c.g.push(G&127|128),G>>=7;c.g.push(1)}}),St=It(function(c,h,G){if(c.h!==2)return!1;var r=xe(c.g)>>>0;c=c.g;var u=c.g;c.g+=r,Dt(c),c=c.h;var p;if(An)(p=Oi)||(p=Oi=new TextDecoder("utf-8",{fatal:!0})),p=p.decode(c.subarray(u,u+r));else{r=u+r;for(var s=[],a=null,C,y,w;u<r;)C=c[u++],128>C?s.push(C):224>C?u>=r?Je():(y=c[u++],194>C||(y&192)!==128?(u--,Je()):s.push((C&31)<<6|y&63)):240>C?u>=r-1?Je():(y=c[u++],(y&192)!==128||C===224&&160>y||C===237&&160<=y||((p=c[u++])&192)!==128?(u--,Je()):s.push((C&15)<<12|(y&63)<<6|p&63)):244>=C?u>=r-2?Je():(y=c[u++],(y&192)!==128||(C<<28)+(y-144)>>30!==0||((p=c[u++])&192)!==128||((w=c[u++])&192)!==128?(u--,Je()):(C=(C&7)<<18|(y&63)<<12|(p&63)<<6|w&63,C-=65536,s.push((C>>10&1023)+55296,(C&1023)+56320))):Je(),8192<=s.length&&(a=yi(a,s),s.length=0);p=yi(a,s)}return Jt(h,G,p),!0},function(c,h,G){if(h=ye(h,G),h!=null){var r=!1;if(r=r===void 0?!1:r,Xn){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(h))throw Error("Found an unpaired surrogate");h=(sn||(sn=new TextEncoder)).encode(h)}else{for(var u=0,p=new Uint8Array(3*h.length),s=0;s<h.length;s++){var a=h.charCodeAt(s);if(128>a)p[u++]=a;else{if(2048>a)p[u++]=a>>6|192;else{if(55296<=a&&57343>=a){if(56319>=a&&s<h.length){var C=h.charCodeAt(++s);if(56320<=C&&57343>=C){a=1024*(a-55296)+C-56320+65536,p[u++]=a>>18|240,p[u++]=a>>12&63|128,p[u++]=a>>6&63|128,p[u++]=a&63|128;continue}else s--}if(r)throw Error("Found an unpaired surrogate");a=65533}p[u++]=a>>12|224,p[u++]=a>>6&63|128}p[u++]=a&63|128}}h=p.subarray(0,u)}Te(c.g,8*G+2),Te(c.g,h.length),Ne(c,c.g.end()),Ne(c,h)}}),Et=It(function(c,h,G,r,u){if(c.h!==2)return!1;h=ce(h,G,r),G=c.g.i,r=xe(c.g)>>>0;var p=c.g.g+r,s=p-G;if(0>=s&&(c.g.i=p,u(h,c),s=p-c.g.g),s)throw Error("Message parsing ended unexpectedly. Expected to read "+(r+" bytes, instead read "+(r-s)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return c.g.g=p,c.g.i=G,!0},function(c,h,G,r,u){if(h=ze(h,r,G),h!=null)for(r=0;r<h.length;r++){var p=c;Te(p.g,8*G+2);var s=p.g.end();Ne(p,s),s.push(p.h),p=s,u(h[r],c),s=c;var a=p.pop();for(a=s.h+s.g.length()-a;127<a;)p.push(a&127|128),a>>>=7,s.h++;p.push(a),s.h++}});function kt(){ai.apply(this,arguments)}if(ct(kt,ai),ee){var re={};Object.defineProperties(kt,(re[Symbol.hasInstance]=wi(Object[Symbol.hasInstance]),re))}function zt(c){kt.call(this,c)}ct(zt,kt);function xt(){return[1,yt,2,q,3,St,4,St]}function Ut(c){kt.call(this,c,-1,be)}ct(Ut,kt),Ut.prototype.addClassification=function(c,h){return ce(this,1,zt,c,h),this};function oe(){return[1,Et,zt,xt]}var be=[1];function fe(c){kt.call(this,c)}ct(fe,kt);function Ve(){return[1,q,2,q,3,q,4,q,5,q]}function De(c){kt.call(this,c,-1,f)}ct(De,kt);function b(){return[1,Et,fe,Ve]}var f=[1];function W(c){kt.call(this,c)}ct(W,kt);function M(){return[1,q,2,q,3,q,4,q,5,q,6,dt]}var Q=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],tt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],D=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],ot=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],mt=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],g=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],B=[].concat(Z(Q),Z(tt),Z(D),Z(ot),Z(mt),Z(g));function v(c,h,G){if(G=c.createShader(G===0?c.VERTEX_SHADER:c.FRAGMENT_SHADER),c.shaderSource(G,h),c.compileShader(G),!c.getShaderParameter(G,c.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+c.getShaderInfoLog(G));return G}function H(c){return ze(c,zt,1).map(function(h){return{index:ue(h,1),ga:Ie(h,2),label:ye(h,3)!=null?rt(h,3):void 0,displayName:ye(h,4)!=null?rt(h,4):void 0}})}function J(c){return{x:Ie(c,1),y:Ie(c,2),z:Ie(c,3),visibility:ye(c,4)!=null?Ie(c,4):void 0}}function O(c,h){this.h=c,this.g=h,this.l=0}function E(c,h,G){return gt(c,h),typeof c.g.canvas.transferToImageBitmap=="function"?Promise.resolve(c.g.canvas.transferToImageBitmap()):G?Promise.resolve(c.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(c.g.canvas):(c.i===void 0&&(c.i=document.createElement("canvas")),new Promise(function(r){c.i.height=c.g.canvas.height,c.i.width=c.g.canvas.width,c.i.getContext("2d",{}).drawImage(c.g.canvas,0,0,c.g.canvas.width,c.g.canvas.height),r(c.i)}))}function gt(c,h){var G=c.g;if(c.o===void 0){var r=v(G,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),u=v(G,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),p=G.createProgram();if(G.attachShader(p,r),G.attachShader(p,u),G.linkProgram(p),!G.getProgramParameter(p,G.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+G.getProgramInfoLog(p));r=c.o=p,G.useProgram(r),u=G.getUniformLocation(r,"sampler0"),c.j={K:G.getAttribLocation(r,"aVertex"),J:G.getAttribLocation(r,"aTex"),ma:u},c.u=G.createBuffer(),G.bindBuffer(G.ARRAY_BUFFER,c.u),G.enableVertexAttribArray(c.j.K),G.vertexAttribPointer(c.j.K,2,G.FLOAT,!1,0,0),G.bufferData(G.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),G.STATIC_DRAW),G.bindBuffer(G.ARRAY_BUFFER,null),c.s=G.createBuffer(),G.bindBuffer(G.ARRAY_BUFFER,c.s),G.enableVertexAttribArray(c.j.J),G.vertexAttribPointer(c.j.J,2,G.FLOAT,!1,0,0),G.bufferData(G.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),G.STATIC_DRAW),G.bindBuffer(G.ARRAY_BUFFER,null),G.uniform1i(u,0)}r=c.j,G.useProgram(c.o),G.canvas.width=h.width,G.canvas.height=h.height,G.viewport(0,0,h.width,h.height),G.activeTexture(G.TEXTURE0),c.h.bindTexture2d(h.glName),G.enableVertexAttribArray(r.K),G.bindBuffer(G.ARRAY_BUFFER,c.u),G.vertexAttribPointer(r.K,2,G.FLOAT,!1,0,0),G.enableVertexAttribArray(r.J),G.bindBuffer(G.ARRAY_BUFFER,c.s),G.vertexAttribPointer(r.J,2,G.FLOAT,!1,0,0),G.bindFramebuffer(G.DRAW_FRAMEBUFFER?G.DRAW_FRAMEBUFFER:G.FRAMEBUFFER,null),G.clearColor(0,0,0,0),G.clear(G.COLOR_BUFFER_BIT),G.colorMask(!0,!0,!0,!0),G.drawArrays(G.TRIANGLE_FAN,0,4),G.disableVertexAttribArray(r.K),G.disableVertexAttribArray(r.J),G.bindBuffer(G.ARRAY_BUFFER,null),c.h.bindTexture2d(0)}function nt(c){this.g=c}var Zt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Wt(c,h){return h+c}function Qt(c,h){window[c]=h}function wt(c){var h=document.createElement("script");return h.setAttribute("src",c),h.setAttribute("crossorigin","anonymous"),new Promise(function(G){h.addEventListener("load",function(){G()},!1),h.addEventListener("error",function(){G()},!1),document.body.appendChild(h)})}function bt(){return ft(function(c){switch(c.g){case 1:return c.o=2,_(c,WebAssembly.instantiate(Zt),4);case 4:c.g=3,c.o=0;break;case 2:return c.o=0,c.j=null,c.return(!1);case 3:return c.return(!0)}})}function Xt(c){if(this.g=c,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=c&&c.locateFile||Wt,typeof window=="object")var h=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")h=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.$=h,c.options){h=m(Object.keys(c.options));for(var G=h.next();!G.done;G=h.next()){G=G.value;var r=c.options[G].default;r!==void 0&&(this.j[G]=typeof r=="function"?r():r)}}}e=Xt.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Ft(c){var h,G,r,u,p,s,a,C,y,w,N;return ft(function(Y){switch(Y.g){case 1:return c.Z?(h=c.g.files===void 0?[]:typeof c.g.files=="function"?c.g.files(c.j):c.g.files,_(Y,bt(),2)):Y.return();case 2:if(G=Y.h,typeof window=="object")return Qt("createMediapipeSolutionsWasm",{locateFile:c.locateFile}),Qt("createMediapipeSolutionsPackedAssets",{locateFile:c.locateFile}),s=h.filter(function(U){return U.data!==void 0}),a=h.filter(function(U){return U.data===void 0}),C=Promise.all(s.map(function(U){var j=d(c,U.url);if(U.path!==void 0){var et=U.path;j=j.then(function(it){return c.overrideFile(et,it),Promise.resolve(it)})}return j})),y=Promise.all(a.map(function(U){return U.simd===void 0||U.simd&&G||!U.simd&&!G?wt(c.locateFile(U.url,c.$)):Promise.resolve()})).then(function(){var U,j,et;return ft(function(it){if(it.g==1)return U=window.createMediapipeSolutionsWasm,j=window.createMediapipeSolutionsPackedAssets,et=c,_(it,U(j),2);et.h=it.h,it.g=0})}),w=function(){return ft(function(U){return c.g.graph&&c.g.graph.url?U=_(U,d(c,c.g.graph.url),0):(U.g=0,U=void 0),U})}(),_(Y,Promise.all([y,C,w]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return r=h.filter(function(U){return U.simd===void 0||U.simd&&G||!U.simd&&!G}).map(function(U){return c.locateFile(U.url,c.$)}),importScripts.apply(null,Z(r)),u=c,_(Y,createMediapipeSolutionsWasm(Module),6);case 6:u.h=Y.h,c.l=new OffscreenCanvas(1,1),c.h.canvas=c.l,p=c.h.GL.createContext(c.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext!="undefined"?2:1}),c.h.GL.makeContextCurrent(p),Y.g=4;break;case 7:if(c.l=document.createElement("canvas"),N=c.l.getContext("webgl2",{}),!N&&(N=c.l.getContext("webgl",{}),!N))return alert("Failed to create WebGL canvas context when passing video frame."),Y.return();c.G=N,c.h.canvas=c.l,c.h.createContext(c.l,!0,!0,{});case 4:c.i=new c.h.SolutionWasm,c.Z=!1,Y.g=0}})}function Nt(c){var h,G,r,u,p,s,a,C;return ft(function(y){if(y.g==1){if(c.g.graph&&c.g.graph.url&&c.Y===c.g.graph.url)return y.return();if(c.s=!0,!c.g.graph||!c.g.graph.url){y.g=2;return}return c.Y=c.g.graph.url,_(y,d(c,c.g.graph.url),3)}for(y.g!=2&&(h=y.h,c.i.loadGraph(h)),G=m(Object.keys(c.C)),r=G.next();!r.done;r=G.next())u=r.value,c.i.overrideFile(u,c.C[u]);if(c.C={},c.g.listeners)for(p=m(c.g.listeners),s=p.next();!s.done;s=p.next())a=s.value,F(c,a);C=c.j,c.j={},c.setOptions(C),y.g=0})}e.reset=function(){var c=this;return ft(function(h){c.i&&(c.i.reset(),c.o={},c.u={}),h.g=0})},e.setOptions=function(c,h){var G=this;if(h=h||this.g.options){for(var r=[],u=[],p={},s=m(Object.keys(c)),a=s.next();!a.done;p={R:p.R,S:p.S},a=s.next()){var C=a.value;C in this.j&&this.j[C]===c[C]||(this.j[C]=c[C],a=h[C],a!==void 0&&(a.onChange&&(p.R=a.onChange,p.S=c[C],r.push(function(y){return function(){var w;return ft(function(N){if(N.g==1)return _(N,y.R(y.S),2);w=N.h,w===!0&&(G.s=!0),N.g=0})}}(p))),a.graphOptionXref&&(C={valueNumber:a.type===1?c[C]:0,valueBoolean:a.type===0?c[C]:!1,valueString:a.type===2?c[C]:""},a=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),a.graphOptionXref),C),u.push(a))))}(r.length!==0||u.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(u),this.A=(this.A===void 0?[]:this.A).concat(r))}};function Mt(c){var h,G,r,u,p,s,a;return ft(function(C){switch(C.g){case 1:if(!c.s)return C.return();if(!c.A){C.g=2;break}h=m(c.A),G=h.next();case 3:if(G.done){C.g=5;break}return r=G.value,_(C,r(),4);case 4:G=h.next(),C.g=3;break;case 5:c.A=void 0;case 2:if(c.B){for(u=new c.h.GraphOptionChangeRequestList,p=m(c.B),s=p.next();!s.done;s=p.next())a=s.value,u.push_back(a);c.i.changeOptions(u),u.delete(),c.B=void 0}c.s=!1,C.g=0}})}e.initialize=function(){var c=this;return ft(function(h){return h.g==1?_(h,Ft(c),2):h.g!=3?_(h,Nt(c),3):_(h,Mt(c),0)})};function d(c,h){var G,r;return ft(function(u){return h in c.H?u.return(c.H[h]):(G=c.locateFile(h,""),r=fetch(G).then(function(p){return p.arrayBuffer()}),c.H[h]=r,u.return(r))})}e.overrideFile=function(c,h){this.i?this.i.overrideFile(c,h):this.C[c]=h},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(c,h){var G=this,r,u,p,s,a,C,y,w,N;return ft(function(Y){switch(Y.g){case 1:return G.g.inputs?(r=1e3*(h==null?performance.now():h),_(Y,G.D,2)):Y.return();case 2:return _(Y,G.initialize(),3);case 3:for(u=new G.h.PacketDataList,p=m(Object.keys(c)),s=p.next();!s.done;s=p.next())if(a=s.value,C=G.g.inputs[a]){t:{var U=c[a];switch(C.type){case"video":var j=G.o[C.stream];if(j||(j=new O(G.h,G.G),G.o[C.stream]=j),j.l===0&&(j.l=j.h.createTexture()),typeof HTMLVideoElement!="undefined"&&U instanceof HTMLVideoElement)var et=U.videoWidth,it=U.videoHeight;else typeof HTMLImageElement!="undefined"&&U instanceof HTMLImageElement?(et=U.naturalWidth,it=U.naturalHeight):(et=U.width,it=U.height);it={glName:j.l,width:et,height:it},et=j.g,et.canvas.width=it.width,et.canvas.height=it.height,et.activeTexture(et.TEXTURE0),j.h.bindTexture2d(j.l),et.texImage2D(et.TEXTURE_2D,0,et.RGBA,et.RGBA,et.UNSIGNED_BYTE,U),j.h.bindTexture2d(0),j=it;break t;case"detections":for(j=G.o[C.stream],j||(j=new nt(G.h),G.o[C.stream]=j),j.data||(j.data=new j.g.DetectionListData),j.data.reset(U.length),it=0;it<U.length;++it){et=U[it];var Ct=j.data,pt=Ct.setBoundingBox,At=it,Vt=et.boundingBox,Gt=new W;if(Jt(Gt,1,Vt.xCenter),Jt(Gt,2,Vt.yCenter),Jt(Gt,3,Vt.height),Jt(Gt,4,Vt.width),Jt(Gt,5,Vt.rotation),Jt(Gt,6,Vt.rectId),Vt=$(Gt,M),pt.call(Ct,At,Vt),et.landmarks)for(Ct=0;Ct<et.landmarks.length;++Ct){Gt=et.landmarks[Ct];var _t=!!Gt.visibility;pt=j.data,At=pt.addNormalizedLandmark,Vt=it,Gt=Object.assign(Object.assign({},Gt),{visibility:_t?Gt.visibility:0}),_t=new fe,Jt(_t,1,Gt.x),Jt(_t,2,Gt.y),Jt(_t,3,Gt.z),Gt.visibility&&Jt(_t,4,Gt.visibility),Gt=$(_t,Ve),At.call(pt,Vt,Gt)}if(et.V)for(Ct=0;Ct<et.V.length;++Ct)pt=j.data,At=pt.addClassification,Vt=it,Gt=et.V[Ct],_t=new zt,Jt(_t,2,Gt.ga),Gt.index&&Jt(_t,1,Gt.index),Gt.label&&Jt(_t,3,Gt.label),Gt.displayName&&Jt(_t,4,Gt.displayName),Gt=$(_t,xt),At.call(pt,Vt,Gt)}j=j.data;break t;default:j={}}}switch(y=j,w=C.stream,C.type){case"video":u.pushTexture2d(Object.assign(Object.assign({},y),{stream:w,timestamp:r}));break;case"detections":N=y,N.stream=w,N.timestamp=r,u.pushDetectionList(N);break;default:throw Error("Unknown input config type: '"+C.type+"'")}}return G.i.send(u),_(Y,G.D,4);case 4:u.delete(),Y.g=0}})};function V(c,h,G){var r,u,p,s,a,C,y,w,N,Y,U,j,et,it;return ft(function(Ct){switch(Ct.g){case 1:if(!G)return Ct.return(h);for(r={},u=0,p=m(Object.keys(G)),s=p.next();!s.done;s=p.next())a=s.value,C=G[a],typeof C!="string"&&C.type==="texture"&&h[C.stream]!==void 0&&++u;1<u&&(c.I=!1),y=m(Object.keys(G)),s=y.next();case 2:if(s.done){Ct.g=4;break}if(w=s.value,N=G[w],typeof N=="string")return et=r,it=w,_(Ct,S(c,w,h[N]),14);if(Y=h[N.stream],N.type==="detection_list"){if(Y){for(var pt=Y.getRectList(),At=Y.getLandmarksList(),Vt=Y.getClassificationsList(),Gt=[],_t=0;_t<pt.size();++_t){var Ce=R(pt.get(_t),W,M);Ce={boundingBox:{xCenter:Ie(Ce,1),yCenter:Ie(Ce,2),height:Ie(Ce,3),width:Ie(Ce,4),rotation:Ie(Ce,5,0),rectId:ue(Ce,6)},landmarks:ze(R(At.get(_t),De,b),fe,1).map(J),V:H(R(Vt.get(_t),Ut,oe))},Gt.push(Ce)}pt=Gt}else pt=[];r[w]=pt,Ct.g=7;break}if(N.type==="proto_list"){if(Y){for(pt=Array(Y.size()),At=0;At<Y.size();At++)pt[At]=Y.get(At);Y.delete()}else pt=[];r[w]=pt,Ct.g=7;break}if(Y===void 0){Ct.g=3;break}if(N.type==="float_list"){r[w]=Y,Ct.g=7;break}if(N.type==="proto"){r[w]=Y,Ct.g=7;break}if(N.type!=="texture")throw Error("Unknown output config type: '"+N.type+"'");return U=c.u[w],U||(U=new O(c.h,c.G),c.u[w]=U),_(Ct,E(U,Y,c.I),13);case 13:j=Ct.h,r[w]=j;case 7:N.transform&&r[w]&&(r[w]=N.transform(r[w])),Ct.g=3;break;case 14:et[it]=Ct.h;case 3:s=y.next(),Ct.g=2;break;case 4:return Ct.return(r)}})}function S(c,h,G){var r;return ft(function(u){return typeof G=="number"||G instanceof Uint8Array||G instanceof c.h.Uint8BlobList?u.return(G):G instanceof c.h.Texture2dDataOut?(r=c.u[h],r||(r=new O(c.h,c.G),c.u[h]=r),u.return(E(r,G,c.I))):u.return(void 0)})}function F(c,h){for(var G=h.name||"$",r=[].concat(Z(h.wants)),u=new c.h.StringList,p=m(h.wants),s=p.next();!s.done;s=p.next())u.push_back(s.value);p=c.h.PacketListener.implement({onResults:function(a){for(var C={},y=0;y<h.wants.length;++y)C[r[y]]=a.get(y);var w=c.listeners[G];w&&(c.D=V(c,C,h.outs).then(function(N){N=w(N);for(var Y=0;Y<h.wants.length;++Y){var U=C[r[Y]];typeof U=="object"&&U.hasOwnProperty&&U.hasOwnProperty("delete")&&U.delete()}N&&(c.D=N)}))}}),c.i.attachMultiListener(u,p),u.delete()}e.onResults=function(c,h){this.listeners[h||"$"]=c},Tt("Solution",Xt),Tt("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"});function T(c){var h=this;c=c||{};var G={url:"face_detection_short.binarypb"},r={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Xt({locateFile:c.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:G,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(u){var p,s,a,C,y,w;return ft(function(N){switch(N.g){case 1:p=u==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"],s=m(p),a=s.next();case 2:if(a.done){N.g=4;break}return C=a.value,y="third_party/mediapipe/modules/face_detection/"+C,_(N,d(h.g,C),5);case 5:w=N.h,h.g.overrideFile(y,w),a=s.next(),N.g=2;break;case 4:return G.url=u==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",r.graphOptionXref.calculatorName=u==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",N.return(!0)}})}},minDetectionConfidence:r}})}e=T.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(c){this.g.onResults(c)},e.initialize=function(){var c=this;return ft(function(h){return _(h,c.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(c){var h=this;return ft(function(G){return _(G,h.g.send(c),0)})},e.setOptions=function(c){this.g.setOptions(c)},Tt("FaceDetection",T),Tt("FACEDETECTION_LIPS",Q),Tt("FACEDETECTION_LEFT_EYE",tt),Tt("FACEDETECTION_LEFT_EYEBROW",D),Tt("FACEDETECTION_RIGHT_EYE",ot),Tt("FACEDETECTION_RIGHT_EYEBROW",mt),Tt("FACEDETECTION_FACE_OVAL",g),Tt("FACEDETECTION_CONTOURS",B),Tt("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Tt("VERSION","0.4.1646425229")}).call(o3);const s3={};(function(){var e;function t(b){var f=0;return function(){return f<b.length?{done:!1,value:b[f++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,f,W){return b==Array.prototype||b==Object.prototype||(b[f]=W.value),b};function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var f=0;f<b.length;++f){var W=b[f];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var o=n(this);function l(b,f){if(f)t:{var W=o;b=b.split(".");for(var M=0;M<b.length-1;M++){var Q=b[M];if(!(Q in W))break t;W=W[Q]}b=b[b.length-1],M=W[b],f=f(M),f!=M&&f!=null&&i(W,b,{configurable:!0,writable:!0,value:f})}}l("Symbol",function(b){function f(tt){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new W(M+(tt||"")+"_"+Q++,tt)}function W(tt,D){this.g=tt,i(this,"description",{configurable:!0,writable:!0,value:D})}if(b)return b;W.prototype.toString=function(){return this.g};var M="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Q=0;return f}),l("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var f="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),W=0;W<f.length;W++){var M=o[f[W]];typeof M=="function"&&typeof M.prototype[b]!="function"&&i(M.prototype,b,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return b});function I(b){return b={next:b},b[Symbol.iterator]=function(){return this},b}function m(b){var f=typeof Symbol!="undefined"&&Symbol.iterator&&b[Symbol.iterator];return f?f.call(b):{next:t(b)}}function Z(b){if(!(b instanceof Array)){b=m(b);for(var f,W=[];!(f=b.next()).done;)W.push(f.value);b=W}return b}var x=typeof Object.create=="function"?Object.create:function(b){function f(){}return f.prototype=b,new f},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var st={a:!0},ut={};try{ut.__proto__=st,K=ut.a;break t}catch{}K=!1}L=K?function(b,f){if(b.__proto__=f,b.__proto__!==f)throw new TypeError(b+" is not extensible");return b}:null}var P=L;function ct(b,f){if(b.prototype=x(f.prototype),b.prototype.constructor=b,P)P(b,f);else for(var W in f)if(W!="prototype")if(Object.defineProperties){var M=Object.getOwnPropertyDescriptor(f,W);M&&Object.defineProperty(b,W,M)}else b[W]=f[W];b.ea=f.prototype}function Rt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Bt(b){if(b.l)throw new TypeError("Generator is already running");b.l=!0}Rt.prototype.o=function(b){this.h=b};function Yt(b,f){b.j={U:f,V:!0},b.g=b.m||b.s}Rt.prototype.return=function(b){this.j={return:b},this.g=this.s};function _(b,f,W){return b.g=W,{value:f}}function qe(b){this.g=new Rt,this.h=b}function ni(b,f){Bt(b.g);var W=b.g.i;return W?we(b,"return"in W?W.return:function(M){return{value:M,done:!0}},f,b.g.return):(b.g.return(f),qt(b))}function we(b,f,W,M){try{var Q=f.call(b.g.i,W);if(!(Q instanceof Object))throw new TypeError("Iterator result "+Q+" is not an object");if(!Q.done)return b.g.l=!1,Q;var tt=Q.value}catch(D){return b.g.i=null,Yt(b.g,D),qt(b)}return b.g.i=null,M.call(b.g,tt),qt(b)}function qt(b){for(;b.g.g;)try{var f=b.h(b.g);if(f)return b.g.l=!1,{value:f.value,done:!1}}catch(W){b.g.h=void 0,Yt(b.g,W)}if(b.g.l=!1,b.g.j){if(f=b.g.j,b.g.j=null,f.V)throw f.U;return{value:f.return,done:!0}}return{value:void 0,done:!0}}function Bn(b){this.next=function(f){return Bt(b.g),b.g.i?f=we(b,b.g.i.next,f,b.g.o):(b.g.o(f),f=qt(b)),f},this.throw=function(f){return Bt(b.g),b.g.i?f=we(b,b.g.i.throw,f,b.g.o):(Yt(b.g,f),f=qt(b)),f},this.return=function(f){return ni(b,f)},this[Symbol.iterator]=function(){return this}}function ge(b,f){return f=new Bn(new qe(f)),P&&b.prototype&&P(f,b.prototype),f}function ft(b,f){b instanceof String&&(b+="");var W=0,M=!1,Q={next:function(){if(!M&&W<b.length){var tt=W++;return{value:f(tt,b[tt]),done:!1}}return M=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}var Yi=typeof Object.assign=="function"?Object.assign:function(b,f){for(var W=1;W<arguments.length;W++){var M=arguments[W];if(M)for(var Q in M)Object.prototype.hasOwnProperty.call(M,Q)&&(b[Q]=M[Q])}return b};l("Object.assign",function(b){return b||Yi}),l("Promise",function(b){function f(D){this.h=0,this.i=void 0,this.g=[],this.o=!1;var ot=this.j();try{D(ot.resolve,ot.reject)}catch(mt){ot.reject(mt)}}function W(){this.g=null}function M(D){return D instanceof f?D:new f(function(ot){ot(D)})}if(b)return b;W.prototype.h=function(D){if(this.g==null){this.g=[];var ot=this;this.i(function(){ot.l()})}this.g.push(D)};var Q=o.setTimeout;W.prototype.i=function(D){Q(D,0)},W.prototype.l=function(){for(;this.g&&this.g.length;){var D=this.g;this.g=[];for(var ot=0;ot<D.length;++ot){var mt=D[ot];D[ot]=null;try{mt()}catch(g){this.j(g)}}}this.g=null},W.prototype.j=function(D){this.i(function(){throw D})},f.prototype.j=function(){function D(g){return function(B){mt||(mt=!0,g.call(ot,B))}}var ot=this,mt=!1;return{resolve:D(this.C),reject:D(this.l)}},f.prototype.C=function(D){if(D===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(D instanceof f)this.F(D);else{t:switch(typeof D){case"object":var ot=D!=null;break t;case"function":ot=!0;break t;default:ot=!1}ot?this.u(D):this.m(D)}},f.prototype.u=function(D){var ot=void 0;try{ot=D.then}catch(mt){this.l(mt);return}typeof ot=="function"?this.G(ot,D):this.m(D)},f.prototype.l=function(D){this.s(2,D)},f.prototype.m=function(D){this.s(1,D)},f.prototype.s=function(D,ot){if(this.h!=0)throw Error("Cannot settle("+D+", "+ot+"): Promise already settled in state"+this.h);this.h=D,this.i=ot,this.h===2&&this.D(),this.A()},f.prototype.D=function(){var D=this;Q(function(){if(D.B()){var ot=o.console;typeof ot!="undefined"&&ot.error(D.i)}},1)},f.prototype.B=function(){if(this.o)return!1;var D=o.CustomEvent,ot=o.Event,mt=o.dispatchEvent;return typeof mt=="undefined"?!0:(typeof D=="function"?D=new D("unhandledrejection",{cancelable:!0}):typeof ot=="function"?D=new ot("unhandledrejection",{cancelable:!0}):(D=o.document.createEvent("CustomEvent"),D.initCustomEvent("unhandledrejection",!1,!0,D)),D.promise=this,D.reason=this.i,mt(D))},f.prototype.A=function(){if(this.g!=null){for(var D=0;D<this.g.length;++D)tt.h(this.g[D]);this.g=null}};var tt=new W;return f.prototype.F=function(D){var ot=this.j();D.J(ot.resolve,ot.reject)},f.prototype.G=function(D,ot){var mt=this.j();try{D.call(ot,mt.resolve,mt.reject)}catch(g){mt.reject(g)}},f.prototype.then=function(D,ot){function mt(H,J){return typeof H=="function"?function(O){try{g(H(O))}catch(E){B(E)}}:J}var g,B,v=new f(function(H,J){g=H,B=J});return this.J(mt(D,g),mt(ot,B)),v},f.prototype.catch=function(D){return this.then(void 0,D)},f.prototype.J=function(D,ot){function mt(){switch(g.h){case 1:D(g.i);break;case 2:ot(g.i);break;default:throw Error("Unexpected state: "+g.h)}}var g=this;this.g==null?tt.h(mt):this.g.push(mt),this.o=!0},f.resolve=M,f.reject=function(D){return new f(function(ot,mt){mt(D)})},f.race=function(D){return new f(function(ot,mt){for(var g=m(D),B=g.next();!B.done;B=g.next())M(B.value).J(ot,mt)})},f.all=function(D){var ot=m(D),mt=ot.next();return mt.done?M([]):new f(function(g,B){function v(O){return function(E){H[O]=E,J--,J==0&&g(H)}}var H=[],J=0;do H.push(void 0),J++,M(mt.value).J(v(H.length-1),B),mt=ot.next();while(!mt.done)})},f}),l("Object.is",function(b){return b||function(f,W){return f===W?f!==0||1/f===1/W:f!==f&&W!==W}}),l("Array.prototype.includes",function(b){return b||function(f,W){var M=this;M instanceof String&&(M=String(M));var Q=M.length;for(W=W||0,0>W&&(W=Math.max(W+Q,0));W<Q;W++){var tt=M[W];if(tt===f||Object.is(tt,f))return!0}return!1}}),l("String.prototype.includes",function(b){return b||function(f,W){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(f,W||0)!==-1}}),l("Array.prototype.keys",function(b){return b||function(){return ft(this,function(f){return f})}});var Jn=this||self;function He(b,f){b=b.split(".");var W=Jn;b[0]in W||typeof W.execScript=="undefined"||W.execScript("var "+b[0]);for(var M;b.length&&(M=b.shift());)b.length||f===void 0?W[M]&&W[M]!==Object.prototype[M]?W=W[M]:W=W[M]={}:W[M]=f}function Tt(b,f){return f=String.fromCharCode.apply(null,f),b==null?f:b+f}var Je,yi=typeof TextDecoder!="undefined",Oi,An=typeof TextEncoder!="undefined";function sn(b){if(An)b=(Oi||(Oi=new TextEncoder)).encode(b);else{var f=void 0;f=f===void 0?!1:f;for(var W=0,M=new Uint8Array(3*b.length),Q=0;Q<b.length;Q++){var tt=b.charCodeAt(Q);if(128>tt)M[W++]=tt;else{if(2048>tt)M[W++]=tt>>6|192;else{if(55296<=tt&&57343>=tt){if(56319>=tt&&Q<b.length){var D=b.charCodeAt(++Q);if(56320<=D&&57343>=D){tt=1024*(tt-55296)+D-56320+65536,M[W++]=tt>>18|240,M[W++]=tt>>12&63|128,M[W++]=tt>>6&63|128,M[W++]=tt&63|128;continue}else Q--}if(f)throw Error("Found an unpaired surrogate");tt=65533}M[W++]=tt>>12|224,M[W++]=tt>>6&63|128}M[W++]=tt&63|128}}b=M.subarray(0,W)}return b}var Xn={},Si=null;function Mi(b,f){f===void 0&&(f=0),oi(),f=Xn[f];for(var W=Array(Math.floor(b.length/3)),M=f[64]||"",Q=0,tt=0;Q<b.length-2;Q+=3){var D=b[Q],ot=b[Q+1],mt=b[Q+2],g=f[D>>2];D=f[(D&3)<<4|ot>>4],ot=f[(ot&15)<<2|mt>>6],mt=f[mt&63],W[tt++]=g+D+ot+mt}switch(g=0,mt=M,b.length-Q){case 2:g=b[Q+1],mt=f[(g&15)<<2]||M;case 1:b=b[Q],W[tt]=f[b>>2]+f[(b&3)<<4|g>>4]+mt+M}return W.join("")}function Fn(b){var f=b.length,W=3*f/4;W%3?W=Math.floor(W):"=.".indexOf(b[f-1])!=-1&&(W="=.".indexOf(b[f-2])!=-1?W-2:W-1);var M=new Uint8Array(W),Q=0;return yn(b,function(tt){M[Q++]=tt}),M.subarray(0,Q)}function yn(b,f){function W(mt){for(;M<b.length;){var g=b.charAt(M++),B=Si[g];if(B!=null)return B;if(!/^[\s\xa0]*$/.test(g))throw Error("Unknown base64 encoding at char: "+g)}return mt}oi();for(var M=0;;){var Q=W(-1),tt=W(0),D=W(64),ot=W(64);if(ot===64&&Q===-1)break;f(Q<<2|tt>>4),D!=64&&(f(tt<<4&240|D>>2),ot!=64&&f(D<<6&192|ot))}}function oi(){if(!Si){Si={};for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),f=["+/=","+/","-_=","-_.","-_"],W=0;5>W;W++){var M=b.concat(f[W].split(""));Xn[W]=M;for(var Q=0;Q<M.length;Q++){var tt=M[Q];Si[tt]===void 0&&(Si[tt]=Q)}}}}var ei=typeof Uint8Array.prototype.slice=="function",rn;function ji(b,f,W){return f===W?rn||(rn=new Uint8Array(0)):ei?b.slice(f,W):new Uint8Array(b.subarray(f,W))}var Ae=0,Me=0;function si(b,f){f=f===void 0?{}:f,f=f.v===void 0?!1:f.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=f,b&&de(this,b)}function de(b,f){f=f.constructor===Uint8Array?f:f.constructor===ArrayBuffer?new Uint8Array(f):f.constructor===Array?new Uint8Array(f):f.constructor===String?Fn(f):f instanceof Uint8Array?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(0),b.h=f,b.l=0,b.j=b.h.length,b.g=b.l}si.prototype.reset=function(){this.g=this.l};function Fe(b){for(var f=128,W=0,M=0,Q=0;4>Q&&128<=f;Q++)f=b.h[b.g++],W|=(f&127)<<7*Q;if(128<=f&&(f=b.h[b.g++],W|=(f&127)<<28,M|=(f&127)>>4),128<=f)for(Q=0;5>Q&&128<=f;Q++)f=b.h[b.g++],M|=(f&127)<<7*Q+3;if(128>f)return b=W>>>0,f=M>>>0,(M=f&2147483648)&&(b=~b+1>>>0,f=~f>>>0,b==0&&(f=f+1>>>0)),b=4294967296*f+(b>>>0),M?-b:b;b.m=!0}si.prototype.i=function(){var b=this.h,f=b[this.g],W=f&127;return 128>f?(this.g+=1,W):(f=b[this.g+1],W|=(f&127)<<7,128>f?(this.g+=2,W):(f=b[this.g+2],W|=(f&127)<<14,128>f?(this.g+=3,W):(f=b[this.g+3],W|=(f&127)<<21,128>f?(this.g+=4,W):(f=b[this.g+4],W|=(f&15)<<28,128>f?(this.g+=5,W>>>0):(this.g+=5,128<=b[this.g++]&&128<=b[this.g++]&&128<=b[this.g++]&&128<=b[this.g++]&&this.g++,W)))))},si.prototype.o=function(){var b=this.h[this.g],f=this.h[this.g+1],W=this.h[this.g+2],M=this.h[this.g+3];return this.g+=4,W=(b<<0|f<<8|W<<16|M<<24)>>>0,b=2*(W>>31)+1,f=W>>>23&255,W&=8388607,f==255?W?NaN:1/0*b:f==0?b*Math.pow(2,-149)*W:b*Math.pow(2,f-150)*(W+Math.pow(2,23))};var Zi=[];function $e(){this.g=new Uint8Array(64),this.h=0}$e.prototype.push=function(b){if(!(this.h+1<this.g.length)){var f=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(f)}this.g[this.h++]=b},$e.prototype.length=function(){return this.h},$e.prototype.end=function(){var b=this.g,f=this.h;return this.h=0,ji(b,0,f)};function ne(b,f){for(;127<f;)b.push(f&127|128),f>>>=7;b.push(f)}function Xe(b){var f={},W=f.N===void 0?!1:f.N;this.o={v:f.v===void 0?!1:f.v},this.N=W,f=this.o,Zi.length?(W=Zi.pop(),f&&(W.v=f.v),b&&de(W,b),b=W):b=new si(b,f),this.g=b,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Xe.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function Ue(b){var f=b.g;if((f=f.g==f.j)||(f=b.j)||(f=b.g,f=f.m||0>f.g||f.g>f.j),f)return!1;b.m=b.g.g,f=b.g.i();var W=f&7;return W!=0&&W!=5&&W!=1&&W!=2&&W!=3&&W!=4?(b.j=!0,!1):(b.i=f,b.l=f>>>3,b.h=W,!0)}function Dt(b){switch(b.h){case 0:if(b.h!=0)Dt(b);else{for(b=b.g;b.h[b.g]&128;)b.g++;b.g++}break;case 1:b.h!=1?Dt(b):(b=b.g,b.g+=8);break;case 2:if(b.h!=2)Dt(b);else{var f=b.g.i();b=b.g,b.g+=f}break;case 5:b.h!=5?Dt(b):(b=b.g,b.g+=4);break;case 3:f=b.l;do{if(!Ue(b)){b.j=!0;break}if(b.h==4){b.l!=f&&(b.j=!0);break}Dt(b)}while(1);break;default:b.j=!0}}function xe(b,f,W){var M=b.g.j,Q=b.g.i(),tt=b.g.g+Q;if(b.g.j=tt,W(f,b),W=tt-b.g.g,W!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+Q+" bytes, instead read "+(Q-W)+" bytes, either the data ended unexpectedly or the message misreported its own length");return b.g.g=tt,b.g.j=M,f}function $t(b){return b.g.o()}function Ge(b){var f=b.g.i();b=b.g;var W=b.g;b.g+=f,b=b.h;var M;if(yi)(M=Je)||(M=Je=new TextDecoder("utf-8",{fatal:!1})),M=M.decode(b.subarray(W,W+f));else{f=W+f;for(var Q=[],tt=null,D,ot,mt;W<f;)D=b[W++],128>D?Q.push(D):224>D?W>=f?Q.push(65533):(ot=b[W++],194>D||(ot&192)!==128?(W--,Q.push(65533)):Q.push((D&31)<<6|ot&63)):240>D?W>=f-1?Q.push(65533):(ot=b[W++],(ot&192)!==128||D===224&&160>ot||D===237&&160<=ot||((M=b[W++])&192)!==128?(W--,Q.push(65533)):Q.push((D&15)<<12|(ot&63)<<6|M&63)):244>=D?W>=f-2?Q.push(65533):(ot=b[W++],(ot&192)!==128||(D<<28)+(ot-144)>>30!==0||((M=b[W++])&192)!==128||((mt=b[W++])&192)!==128?(W--,Q.push(65533)):(D=(D&7)<<18|(ot&63)<<12|(M&63)<<6|mt&63,D-=65536,Q.push((D>>10&1023)+55296,(D&1023)+56320))):Q.push(65533),8192<=Q.length&&(tt=Tt(tt,Q),Q.length=0);M=Tt(tt,Q)}return M}function Te(b,f,W){var M=b.g.i();for(M=b.g.g+M;b.g.g<M;)W.push(f.call(b.g))}function di(b,f){b.h==2?Te(b,si.prototype.o,f):f.push($t(b))}function Se(){this.h=[],this.i=0,this.g=new $e}function te(b,f){f.length!==0&&(b.h.push(f),b.i+=f.length)}function ii(b){var f=b.i+b.g.length();if(f===0)return new Uint8Array(0);f=new Uint8Array(f);for(var W=b.h,M=W.length,Q=0,tt=0;tt<M;tt++){var D=W[tt];D.length!==0&&(f.set(D,Q),Q+=D.length)}return W=b.g,M=W.h,M!==0&&(f.set(W.g.subarray(0,M),Q),W.h=0),b.h=[f],f}function ri(b,f,W){if(W!=null){ne(b.g,8*f+5),b=b.g;var M=W;M=(W=0>M?1:0)?-M:M,M===0?0<1/M?Ae=Me=0:(Me=0,Ae=2147483648):isNaN(M)?(Me=0,Ae=2147483647):34028234663852886e22<M?(Me=0,Ae=(W<<31|2139095040)>>>0):11754943508222875e-54>M?(M=Math.round(M/Math.pow(2,-149)),Me=0,Ae=(W<<31|M)>>>0):(f=Math.floor(Math.log(M)/Math.LN2),M*=Math.pow(2,-f),M=Math.round(8388608*M),16777216<=M&&++f,Me=0,Ae=(W<<31|f+127<<23|M&8388607)>>>0),W=Ae,b.push(W>>>0&255),b.push(W>>>8&255),b.push(W>>>16&255),b.push(W>>>24&255)}}var Ne=typeof Uint8Array=="function";function _i(b,f,W){if(b!=null)return typeof b=="object"?Ne&&b instanceof Uint8Array?W(b):fi(b,f,W):f(b)}function fi(b,f,W){if(Array.isArray(b)){for(var M=Array(b.length),Q=0;Q<b.length;Q++)M[Q]=_i(b[Q],f,W);return Array.isArray(b)&&b.W&&Re(M),M}M={};for(Q in b)M[Q]=_i(b[Q],f,W);return M}function li(b){return typeof b=="number"?isFinite(b)?b:String(b):b}var Gi={W:{value:!0,configurable:!0}};function Re(b){return Array.isArray(b)&&!Object.isFrozen(b)&&Object.defineProperties(b,Gi),b}var ke;function ve(b,f,W){var M=ke;ke=null,b||(b=M),M=this.constructor.ca,b||(b=M?[M]:[]),this.j=M?0:-1,this.m=this.g=null,this.h=b;t:{if(M=this.h.length,b=M-1,M&&(M=this.h[b],!(M===null||typeof M!="object"||Array.isArray(M)||Ne&&M instanceof Uint8Array))){this.l=b-this.j,this.i=M;break t}f!==void 0&&-1<f?(this.l=Math.max(f,b+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(W)for(f=0;f<W.length;f++)b=W[f],b<this.l?(b+=this.j,(M=this.h[b])?Re(M):this.h[b]=ae):(ci(this),(M=this.i[b])?Re(M):this.i[b]=ae)}var ae=Object.freeze(Re([]));function ci(b){var f=b.l+b.j;b.h[f]||(b.i=b.h[f]={})}function le(b,f,W){return f===-1?null:(W===void 0?0:W)||f>=b.l?b.i?b.i[f]:void 0:b.h[f+b.j]}function ee(b,f){var W=W===void 0?!1:W,M=le(b,f,W);return M==null&&(M=ae),M===ae&&(M=Re([]),vt(b,f,M,W)),M}function wi(b){var f=ee(b,3);if(b.m||(b.m={}),!b.m[3]){for(var W=0;W<f.length;W++)f[W]=+f[W];b.m[3]=!0}return f}function ye(b,f,W){return b=le(b,f),b==null?W:b}function Jt(b,f,W){return b=le(b,f),b=b==null?b:+b,b==null?W===void 0?0:W:b}function vt(b,f,W,M){(M===void 0?0:M)||f>=b.l?(ci(b),b.i[f]=W):b.h[f+b.j]=W}function Ie(b,f,W){if(W===-1)return null;if(b.g||(b.g={}),!b.g[W]){var M=le(b,W,!1);M&&(b.g[W]=new f(M))}return b.g[W]}function ze(b,f){b.g||(b.g={});var W=b.g[1];if(!W){var M=ee(b,1);W=[];for(var Q=0;Q<M.length;Q++)W[Q]=new f(M[Q]);b.g[1]=W}return W}function ce(b,f,W){var M=M===void 0?!1:M;b.g||(b.g={});var Q=W&&rt(W);b.g[f]=W,vt(b,f,Q,M)}function ue(b,f,W,M){var Q=ze(b,W);f=f||new W,b=ee(b,1),M!=null?(Q.splice(M,0,f),b.splice(M,0,rt(f))):(Q.push(f),b.push(rt(f)))}ve.prototype.toJSON=function(){var b=rt(this);return fi(b,li,Mi)};function rt(b,f){if(b.g)for(var W in b.g){var M=b.g[W];if(Array.isArray(M))for(var Q=0;Q<M.length;Q++)M[Q]&&rt(M[Q]);else M&&rt(M)}return b.h}ve.prototype.toString=function(){return rt(this).toString()};function at(b,f){if(b=b.o){te(f,f.g.end());for(var W=0;W<b.length;W++)te(f,b[W])}}function ht(b,f){if(f.h==4)return!1;var W=f.m;return Dt(f),f.N||(f=ji(f.g.h,W,f.g.g),(W=b.o)?W.push(f):b.o=[f]),!0}function ie(b){ve.call(this,b,-1,he)}ct(ie,ve),ie.prototype.getRows=function(){return le(this,1)},ie.prototype.getCols=function(){return le(this,2)},ie.prototype.getPackedDataList=function(){return wi(this)},ie.prototype.getLayout=function(){return ye(this,4,0)};function pe(b,f){for(;Ue(f);)switch(f.i){case 8:var W=f.g.i();vt(b,1,W);break;case 16:W=f.g.i(),vt(b,2,W);break;case 29:case 26:di(f,b.getPackedDataList());break;case 32:W=Fe(f.g),vt(b,4,W);break;default:if(!ht(b,f))return b}return b}var he=[3];function Ht(b,f){var W=void 0;return new(W||(W=Promise))(function(M,Q){function tt(mt){try{ot(f.next(mt))}catch(g){Q(g)}}function D(mt){try{ot(f.throw(mt))}catch(g){Q(g)}}function ot(mt){mt.done?M(mt.value):new W(function(g){g(mt.value)}).then(tt,D)}ot((f=f.apply(b,void 0)).next())})}function Ze(b){ve.call(this,b)}ct(Ze,ve);function Ee(b,f){for(;Ue(f);)switch(f.i){case 8:var W=f.g.i();vt(b,1,W);break;case 21:W=$t(f),vt(b,2,W);break;case 26:W=Ge(f),vt(b,3,W);break;case 34:W=Ge(f),vt(b,4,W);break;default:if(!ht(b,f))return b}return b}function ai(b){ve.call(this,b,-1,Ii)}ct(ai,ve),ai.prototype.addClassification=function(b,f){return ue(this,b,Ze,f),this};var Ii=[1];function Fi(b){ve.call(this,b)}ct(Fi,ve);function Li(b,f){for(;Ue(f);)switch(f.i){case 13:var W=$t(f);vt(b,1,W);break;case 21:W=$t(f),vt(b,2,W);break;case 29:W=$t(f),vt(b,3,W);break;case 37:W=$t(f),vt(b,4,W);break;case 45:W=$t(f),vt(b,5,W);break;default:if(!ht(b,f))return b}return b}function Ke(b){ve.call(this,b,-1,Tn)}ct(Ke,ve);function ui(b){t:{var f=new Ke;for(b=new Xe(b);Ue(b);)switch(b.i){case 10:var W=xe(b,new Fi,Li);ue(f,W,Fi,void 0);break;default:if(!ht(f,b))break t}}return f}var Tn=[1];function Ci(b){ve.call(this,b)}ct(Ci,ve);function Qe(b){ve.call(this,b,-1,ln)}ct(Qe,ve),Qe.prototype.getVertexType=function(){return ye(this,1,0)},Qe.prototype.getPrimitiveType=function(){return ye(this,2,0)},Qe.prototype.getVertexBufferList=function(){return wi(this)},Qe.prototype.getIndexBufferList=function(){return ee(this,4)};function zi(b,f){for(;Ue(f);)switch(f.i){case 8:var W=Fe(f.g);vt(b,1,W);break;case 16:W=Fe(f.g),vt(b,2,W);break;case 29:case 26:di(f,b.getVertexBufferList());break;case 32:case 34:W=f;var M=b.getIndexBufferList();W.h==2?Te(W,si.prototype.i,M):M.push(W.g.i());break;default:if(!ht(b,f))return b}return b}var ln=[3,4];function ti(b){ve.call(this,b)}ct(ti,ve),ti.prototype.getMesh=function(){return Ie(this,Qe,1)},ti.prototype.getPoseTransformMatrix=function(){return Ie(this,ie,2)};function Hn(b){t:{var f=new ti;for(b=new Xe(b);Ue(b);)switch(b.i){case 10:var W=xe(b,new Qe,zi);ce(f,1,W);break;case 18:W=xe(b,new ie,pe),ce(f,2,W);break;default:if(!ht(f,b))break t}}return f}function mi(b,f,W){if(W=b.createShader(W===0?b.VERTEX_SHADER:b.FRAGMENT_SHADER),b.shaderSource(W,f),b.compileShader(W),!b.getShaderParameter(W,b.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+b.getShaderInfoLog(W));return W}function Ki(b){return ze(b,Ze).map(function(f){return{index:ye(f,1,0),Y:Jt(f,2),label:le(f,3)!=null?ye(f,3,""):void 0,displayName:le(f,4)!=null?ye(f,4,""):void 0}})}function Cn(b){return{x:Jt(b,1),y:Jt(b,2),z:Jt(b,3),visibility:le(b,4)!=null?Jt(b,4):void 0}}function Yn(b,f){this.h=b,this.g=f,this.l=0}function Vi(b,f,W){return mn(b,f),typeof b.g.canvas.transferToImageBitmap=="function"?Promise.resolve(b.g.canvas.transferToImageBitmap()):W?Promise.resolve(b.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(b.g.canvas):(b.i===void 0&&(b.i=document.createElement("canvas")),new Promise(function(M){b.i.height=b.g.canvas.height,b.i.width=b.g.canvas.width,b.i.getContext("2d",{}).drawImage(b.g.canvas,0,0,b.g.canvas.width,b.g.canvas.height),M(b.i)}))}function mn(b,f){var W=b.g;if(b.m===void 0){var M=mi(W,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Q=mi(W,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),tt=W.createProgram();if(W.attachShader(tt,M),W.attachShader(tt,Q),W.linkProgram(tt),!W.getProgramParameter(tt,W.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+W.getProgramInfoLog(tt));M=b.m=tt,W.useProgram(M),Q=W.getUniformLocation(M,"sampler0"),b.j={I:W.getAttribLocation(M,"aVertex"),H:W.getAttribLocation(M,"aTex"),da:Q},b.s=W.createBuffer(),W.bindBuffer(W.ARRAY_BUFFER,b.s),W.enableVertexAttribArray(b.j.I),W.vertexAttribPointer(b.j.I,2,W.FLOAT,!1,0,0),W.bufferData(W.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),W.STATIC_DRAW),W.bindBuffer(W.ARRAY_BUFFER,null),b.o=W.createBuffer(),W.bindBuffer(W.ARRAY_BUFFER,b.o),W.enableVertexAttribArray(b.j.H),W.vertexAttribPointer(b.j.H,2,W.FLOAT,!1,0,0),W.bufferData(W.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),W.STATIC_DRAW),W.bindBuffer(W.ARRAY_BUFFER,null),W.uniform1i(Q,0)}M=b.j,W.useProgram(b.m),W.canvas.width=f.width,W.canvas.height=f.height,W.viewport(0,0,f.width,f.height),W.activeTexture(W.TEXTURE0),b.h.bindTexture2d(f.glName),W.enableVertexAttribArray(M.I),W.bindBuffer(W.ARRAY_BUFFER,b.s),W.vertexAttribPointer(M.I,2,W.FLOAT,!1,0,0),W.enableVertexAttribArray(M.H),W.bindBuffer(W.ARRAY_BUFFER,b.o),W.vertexAttribPointer(M.H,2,W.FLOAT,!1,0,0),W.bindFramebuffer(W.DRAW_FRAMEBUFFER?W.DRAW_FRAMEBUFFER:W.FRAMEBUFFER,null),W.clearColor(0,0,0,0),W.clear(W.COLOR_BUFFER_BIT),W.colorMask(!0,!0,!0,!0),W.drawArrays(W.TRIANGLE_FAN,0,4),W.disableVertexAttribArray(M.I),W.disableVertexAttribArray(M.H),W.bindBuffer(W.ARRAY_BUFFER,null),b.h.bindTexture2d(0)}function to(b){this.g=b}var eo=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function hn(b,f){return f+b}function Zn(b,f){window[b]=f}function A(b){var f=document.createElement("script");return f.setAttribute("src",b),f.setAttribute("crossorigin","anonymous"),new Promise(function(W){f.addEventListener("load",function(){W()},!1),f.addEventListener("error",function(){W()},!1),document.body.appendChild(f)})}function X(){return Ht(this,function b(){return ge(b,function(f){switch(f.g){case 1:return f.m=2,_(f,WebAssembly.instantiate(eo),4);case 4:f.g=3,f.m=0;break;case 2:return f.m=0,f.j=null,f.return(!1);case 3:return f.return(!0)}})})}function R(b){if(this.g=b,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=b&&b.locateFile||hn,typeof window=="object")var f=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")f=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=f,b.options){f=m(Object.keys(b.options));for(var W=f.next();!W.done;W=f.next()){W=W.value;var M=b.options[W].default;M!==void 0&&(this.j[W]=typeof M=="function"?M():M)}}}e=R.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function k(b,f){return b.g.files===void 0?[]:typeof b.g.files=="function"?b.g.files(f):b.g.files}function $(b){return Ht(b,function f(){var W=this,M,Q,tt,D,ot,mt,g,B,v,H,J;return ge(f,function(O){switch(O.g){case 1:return M=W,W.R?(Q=k(W,W.j),_(O,X(),2)):O.return();case 2:if(tt=O.h,typeof window=="object")return Zn("createMediapipeSolutionsWasm",{locateFile:W.locateFile}),Zn("createMediapipeSolutionsPackedAssets",{locateFile:W.locateFile}),mt=Q.filter(function(E){return E.data!==void 0}),g=Q.filter(function(E){return E.data===void 0}),B=Promise.all(mt.map(function(E){var gt=dt(M,E.url);if(E.path!==void 0){var nt=E.path;gt=gt.then(function(Zt){return M.overrideFile(nt,Zt),Promise.resolve(Zt)})}return gt})),v=Promise.all(g.map(function(E){return E.simd===void 0||E.simd&&tt||!E.simd&&!tt?A(M.locateFile(E.url,M.S)):Promise.resolve()})).then(function(){return Ht(M,function E(){var gt,nt,Zt=this;return ge(E,function(Wt){if(Wt.g==1)return gt=window.createMediapipeSolutionsWasm,nt=window.createMediapipeSolutionsPackedAssets,_(Wt,gt(nt),2);Zt.h=Wt.h,Wt.g=0})})}),H=function(){return Ht(M,function E(){var gt=this;return ge(E,function(nt){return gt.g.graph&&gt.g.graph.url?nt=_(nt,dt(gt,gt.g.graph.url),0):(nt.g=0,nt=void 0),nt})})}(),_(O,Promise.all([v,B,H]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return D=Q.filter(function(E){return E.simd===void 0||E.simd&&tt||!E.simd&&!tt}).map(function(E){return M.locateFile(E.url,M.S)}),importScripts.apply(null,Z(D)),_(O,createMediapipeSolutionsWasm(Module),6);case 6:W.h=O.h,W.l=new OffscreenCanvas(1,1),W.h.canvas=W.l,ot=W.h.GL.createContext(W.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext!="undefined"?2:1}),W.h.GL.makeContextCurrent(ot),O.g=4;break;case 7:if(W.l=document.createElement("canvas"),J=W.l.getContext("webgl2",{}),!J&&(J=W.l.getContext("webgl",{}),!J))return alert("Failed to create WebGL canvas context when passing video frame."),O.return();W.D=J,W.h.canvas=W.l,W.h.createContext(W.l,!0,!0,{});case 4:W.i=new W.h.SolutionWasm,W.R=!1,O.g=0}})})}function It(b){return Ht(b,function f(){var W=this,M,Q,tt,D,ot,mt,g,B;return ge(f,function(v){if(v.g==1){if(W.g.graph&&W.g.graph.url&&W.P===W.g.graph.url)return v.return();if(W.o=!0,!W.g.graph||!W.g.graph.url){v.g=2;return}return W.P=W.g.graph.url,_(v,dt(W,W.g.graph.url),3)}for(v.g!=2&&(M=v.h,W.i.loadGraph(M)),Q=m(Object.keys(W.B)),tt=Q.next();!tt.done;tt=Q.next())D=tt.value,W.i.overrideFile(D,W.B[D]);if(W.B={},W.g.listeners)for(ot=m(W.g.listeners),mt=ot.next();!mt.done;mt=ot.next())g=mt.value,Et(W,g);B=W.j,W.j={},W.setOptions(B),v.g=0})})}e.reset=function(){return Ht(this,function b(){var f=this;return ge(b,function(W){f.i&&(f.i.reset(),f.m={},f.s={}),W.g=0})})},e.setOptions=function(b,f){var W=this;if(f=f||this.g.options){for(var M=[],Q=[],tt={},D=m(Object.keys(b)),ot=D.next();!ot.done;tt={K:tt.K,L:tt.L},ot=D.next()){var mt=ot.value;mt in this.j&&this.j[mt]===b[mt]||(this.j[mt]=b[mt],ot=f[mt],ot!==void 0&&(ot.onChange&&(tt.K=ot.onChange,tt.L=b[mt],M.push(function(g){return function(){return Ht(W,function B(){var v,H=this;return ge(B,function(J){if(J.g==1)return _(J,g.K(g.L),2);v=J.h,v===!0&&(H.o=!0),J.g=0})})}}(tt))),ot.graphOptionXref&&(mt={valueNumber:ot.type===1?b[mt]:0,valueBoolean:ot.type===0?b[mt]:!1,valueString:ot.type===2?b[mt]:""},ot=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),ot.graphOptionXref),mt),Q.push(ot))))}(M.length!==0||Q.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Q),this.u=(this.u===void 0?[]:this.u).concat(M))}};function q(b){return Ht(b,function f(){var W=this,M,Q,tt,D,ot,mt,g;return ge(f,function(B){switch(B.g){case 1:if(!W.o)return B.return();if(!W.u){B.g=2;break}M=m(W.u),Q=M.next();case 3:if(Q.done){B.g=5;break}return tt=Q.value,_(B,tt(),4);case 4:Q=M.next(),B.g=3;break;case 5:W.u=void 0;case 2:if(W.A){for(D=new W.h.GraphOptionChangeRequestList,ot=m(W.A),mt=ot.next();!mt.done;mt=ot.next())g=mt.value,D.push_back(g);W.i.changeOptions(D),D.delete(),W.A=void 0}W.o=!1,B.g=0}})})}e.initialize=function(){return Ht(this,function b(){var f=this;return ge(b,function(W){return W.g==1?_(W,$(f),2):W.g!=3?_(W,It(f),3):_(W,q(f),0)})})};function dt(b,f){return Ht(b,function W(){var M=this,Q,tt;return ge(W,function(D){return f in M.F?D.return(M.F[f]):(Q=M.locateFile(f,""),tt=fetch(Q).then(function(ot){return ot.arrayBuffer()}),M.F[f]=tt,D.return(tt))})})}e.overrideFile=function(b,f){this.i?this.i.overrideFile(b,f):this.B[b]=f},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(b,f){return Ht(this,function W(){var M=this,Q,tt,D,ot,mt,g,B,v,H;return ge(W,function(J){switch(J.g){case 1:return M.g.inputs?(Q=1e3*(f==null?performance.now():f),_(J,M.C,2)):J.return();case 2:return _(J,M.initialize(),3);case 3:for(tt=new M.h.PacketDataList,D=m(Object.keys(b)),ot=D.next();!ot.done;ot=D.next())if(mt=ot.value,g=M.g.inputs[mt]){t:{var O=M,E=b[mt];switch(g.type){case"video":var gt=O.m[g.stream];if(gt||(gt=new Yn(O.h,O.D),O.m[g.stream]=gt),O=gt,O.l===0&&(O.l=O.h.createTexture()),typeof HTMLVideoElement!="undefined"&&E instanceof HTMLVideoElement){var nt=E.videoWidth;gt=E.videoHeight}else typeof HTMLImageElement!="undefined"&&E instanceof HTMLImageElement?(nt=E.naturalWidth,gt=E.naturalHeight):(nt=E.width,gt=E.height);gt={glName:O.l,width:nt,height:gt},nt=O.g,nt.canvas.width=gt.width,nt.canvas.height=gt.height,nt.activeTexture(nt.TEXTURE0),O.h.bindTexture2d(O.l),nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,nt.RGBA,nt.UNSIGNED_BYTE,E),O.h.bindTexture2d(0),O=gt;break t;case"detections":for(gt=O.m[g.stream],gt||(gt=new to(O.h),O.m[g.stream]=gt),O=gt,O.data||(O.data=new O.g.DetectionListData),O.data.reset(E.length),gt=0;gt<E.length;++gt){nt=E[gt];var Zt=O.data,Wt=Zt.setBoundingBox,Qt=gt,wt=nt.T,bt=new Ci;vt(bt,1,wt.Z),vt(bt,2,wt.$),vt(bt,3,wt.height),vt(bt,4,wt.width),vt(bt,5,wt.rotation),vt(bt,6,wt.X);var Xt=wt=new Se;ri(Xt,1,le(bt,1)),ri(Xt,2,le(bt,2)),ri(Xt,3,le(bt,3)),ri(Xt,4,le(bt,4)),ri(Xt,5,le(bt,5));var Ft=le(bt,6);if(Ft!=null&&Ft!=null){ne(Xt.g,48);var Nt=Xt.g,Mt=Ft;Ft=0>Mt,Mt=Math.abs(Mt);var d=Mt>>>0;for(Mt=Math.floor((Mt-d)/4294967296),Mt>>>=0,Ft&&(Mt=~Mt>>>0,d=(~d>>>0)+1,4294967295<d&&(d=0,Mt++,4294967295<Mt&&(Mt=0))),Ae=d,Me=Mt,Ft=Ae,d=Me;0<d||127<Ft;)Nt.push(Ft&127|128),Ft=(Ft>>>7|d<<25)>>>0,d>>>=7;Nt.push(Ft)}if(at(bt,Xt),wt=ii(wt),Wt.call(Zt,Qt,wt),nt.O)for(Zt=0;Zt<nt.O.length;++Zt)bt=nt.O[Zt],Xt=!!bt.visibility,Wt=O.data,Qt=Wt.addNormalizedLandmark,wt=gt,bt=Object.assign(Object.assign({},bt),{visibility:Xt?bt.visibility:0}),Xt=new Fi,vt(Xt,1,bt.x),vt(Xt,2,bt.y),vt(Xt,3,bt.z),bt.visibility&&vt(Xt,4,bt.visibility),Nt=bt=new Se,ri(Nt,1,le(Xt,1)),ri(Nt,2,le(Xt,2)),ri(Nt,3,le(Xt,3)),ri(Nt,4,le(Xt,4)),ri(Nt,5,le(Xt,5)),at(Xt,Nt),bt=ii(bt),Qt.call(Wt,wt,bt);if(nt.M)for(Zt=0;Zt<nt.M.length;++Zt){if(Wt=O.data,Qt=Wt.addClassification,wt=gt,bt=nt.M[Zt],Xt=new Ze,vt(Xt,2,bt.Y),bt.index&&vt(Xt,1,bt.index),bt.label&&vt(Xt,3,bt.label),bt.displayName&&vt(Xt,4,bt.displayName),Nt=bt=new Se,d=le(Xt,1),d!=null&&d!=null)if(ne(Nt.g,8),Ft=Nt.g,0<=d)ne(Ft,d);else{for(Mt=0;9>Mt;Mt++)Ft.push(d&127|128),d>>=7;Ft.push(1)}ri(Nt,2,le(Xt,2)),Ft=le(Xt,3),Ft!=null&&(Ft=sn(Ft),ne(Nt.g,26),ne(Nt.g,Ft.length),te(Nt,Nt.g.end()),te(Nt,Ft)),Ft=le(Xt,4),Ft!=null&&(Ft=sn(Ft),ne(Nt.g,34),ne(Nt.g,Ft.length),te(Nt,Nt.g.end()),te(Nt,Ft)),at(Xt,Nt),bt=ii(bt),Qt.call(Wt,wt,bt)}}O=O.data;break t;default:O={}}}switch(B=O,v=g.stream,g.type){case"video":tt.pushTexture2d(Object.assign(Object.assign({},B),{stream:v,timestamp:Q}));break;case"detections":H=B,H.stream=v,H.timestamp=Q,tt.pushDetectionList(H);break;default:throw Error("Unknown input config type: '"+g.type+"'")}}return M.i.send(tt),_(J,M.C,4);case 4:tt.delete(),J.g=0}})})};function yt(b,f,W){return Ht(b,function M(){var Q,tt,D,ot,mt,g,B=this,v,H,J,O,E,gt,nt,Zt;return ge(M,function(Wt){switch(Wt.g){case 1:if(!W)return Wt.return(f);for(Q={},tt=0,D=m(Object.keys(W)),ot=D.next();!ot.done;ot=D.next())mt=ot.value,g=W[mt],typeof g!="string"&&g.type==="texture"&&f[g.stream]!==void 0&&++tt;1<tt&&(B.G=!1),v=m(Object.keys(W)),ot=v.next();case 2:if(ot.done){Wt.g=4;break}if(H=ot.value,J=W[H],typeof J=="string")return nt=Q,Zt=H,_(Wt,St(B,H,f[J]),14);if(O=f[J.stream],J.type==="detection_list"){if(O){for(var Qt=O.getRectList(),wt=O.getLandmarksList(),bt=O.getClassificationsList(),Xt=[],Ft=0;Ft<Qt.size();++Ft){var Nt=Qt.get(Ft);t:{var Mt=new Ci;for(Nt=new Xe(Nt);Ue(Nt);)switch(Nt.i){case 13:var d=$t(Nt);vt(Mt,1,d);break;case 21:d=$t(Nt),vt(Mt,2,d);break;case 29:d=$t(Nt),vt(Mt,3,d);break;case 37:d=$t(Nt),vt(Mt,4,d);break;case 45:d=$t(Nt),vt(Mt,5,d);break;case 48:d=Fe(Nt.g),vt(Mt,6,d);break;default:if(!ht(Mt,Nt))break t}}Mt={Z:Jt(Mt,1),$:Jt(Mt,2),height:Jt(Mt,3),width:Jt(Mt,4),rotation:Jt(Mt,5,0),X:ye(Mt,6,0)},Nt=ze(ui(wt.get(Ft)),Fi).map(Cn);var V=bt.get(Ft);t:for(d=new ai,V=new Xe(V);Ue(V);)switch(V.i){case 10:d.addClassification(xe(V,new Ze,Ee));break;default:if(!ht(d,V))break t}Mt={T:Mt,O:Nt,M:Ki(d)},Xt.push(Mt)}Qt=Xt}else Qt=[];Q[H]=Qt,Wt.g=7;break}if(J.type==="proto_list"){if(O){for(Qt=Array(O.size()),wt=0;wt<O.size();wt++)Qt[wt]=O.get(wt);O.delete()}else Qt=[];Q[H]=Qt,Wt.g=7;break}if(O===void 0){Wt.g=3;break}if(J.type==="float_list"){Q[H]=O,Wt.g=7;break}if(J.type==="proto"){Q[H]=O,Wt.g=7;break}if(J.type!=="texture")throw Error("Unknown output config type: '"+J.type+"'");return E=B.s[H],E||(E=new Yn(B.h,B.D),B.s[H]=E),_(Wt,Vi(E,O,B.G),13);case 13:gt=Wt.h,Q[H]=gt;case 7:J.transform&&Q[H]&&(Q[H]=J.transform(Q[H])),Wt.g=3;break;case 14:nt[Zt]=Wt.h;case 3:ot=v.next(),Wt.g=2;break;case 4:return Wt.return(Q)}})})}function St(b,f,W){return Ht(b,function M(){var Q=this,tt;return ge(M,function(D){return typeof W=="number"||W instanceof Uint8Array||W instanceof Q.h.Uint8BlobList?D.return(W):W instanceof Q.h.Texture2dDataOut?(tt=Q.s[f],tt||(tt=new Yn(Q.h,Q.D),Q.s[f]=tt),D.return(Vi(tt,W,Q.G))):D.return(void 0)})})}function Et(b,f){for(var W=f.name||"$",M=[].concat(Z(f.wants)),Q=new b.h.StringList,tt=m(f.wants),D=tt.next();!D.done;D=tt.next())Q.push_back(D.value);tt=b.h.PacketListener.implement({onResults:function(ot){for(var mt={},g=0;g<f.wants.length;++g)mt[M[g]]=ot.get(g);var B=b.listeners[W];B&&(b.C=yt(b,mt,f.outs).then(function(v){v=B(v);for(var H=0;H<f.wants.length;++H){var J=mt[M[H]];typeof J=="object"&&J.hasOwnProperty&&J.hasOwnProperty("delete")&&J.delete()}v&&(b.C=v)}))}}),b.i.attachMultiListener(Q,tt),Q.delete()}e.onResults=function(b,f){this.listeners[f||"$"]=b},He("Solution",R),He("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function kt(b){b=Hn(b);var f=b.getMesh();if(!f)return b;var W=new Float32Array(f.getVertexBufferList());f.getVertexBufferList=function(){return W};var M=new Uint32Array(f.getIndexBufferList());return f.getIndexBufferList=function(){return M},b}var re={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(b){return b.map(kt)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(b){return b.map(function(f){return ze(ui(f),Fi).map(Cn)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},zt=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],xt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Ut=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],oe=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],be=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],fe=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Ve=[].concat(Z(zt),Z(xt),Z(Ut),Z(oe),Z(be),Z(fe));function De(b){b=b||{},b=Object.assign(Object.assign({},re),b),this.g=new R(b)}e=De.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(b){this.g.onResults(b)},e.initialize=function(){return Ht(this,function b(){var f=this;return ge(b,function(W){return _(W,f.g.initialize(),0)})})},e.reset=function(){this.g.reset()},e.send=function(b){return Ht(this,function f(){var W=this;return ge(f,function(M){return _(M,W.g.send(b),0)})})},e.setOptions=function(b){this.g.setOptions(b)},He("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),He("FaceMesh",De),He("FACEMESH_LIPS",zt),He("FACEMESH_LEFT_EYE",xt),He("FACEMESH_LEFT_EYEBROW",Ut),He("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),He("FACEMESH_RIGHT_EYE",oe),He("FACEMESH_RIGHT_EYEBROW",be),He("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),He("FACEMESH_FACE_OVAL",fe),He("FACEMESH_CONTOURS",Ve),He("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),He("matrixDataToMatrix",function(b){for(var f=b.getCols(),W=b.getRows(),M=b.getPackedDataList(),Q=[],tt=0;tt<W;tt++)Q.push(Array(f));for(tt=0;tt<W;tt++)for(var D=0;D<f;D++){var ot=b.getLayout()===1?tt*f+D:D*W+tt;Q[tt][D]=M[ot]}return Q}),He("VERSION","0.4.1633559619")}).call(s3);const r3={};(function(){var e;function t(s){var a=0;return function(){return a<s.length?{done:!1,value:s[a++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,a,C){return s==Array.prototype||s==Object.prototype||(s[a]=C.value),s};function n(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var a=0;a<s.length;++a){var C=s[a];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=n(this);function l(s,a){if(a)t:{var C=o;s=s.split(".");for(var y=0;y<s.length-1;y++){var w=s[y];if(!(w in C))break t;C=C[w]}s=s[s.length-1],y=C[s],a=a(y),a!=y&&a!=null&&i(C,s,{configurable:!0,writable:!0,value:a})}}l("Symbol",function(s){function a(N){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new C(y+(N||"")+"_"+w++,N)}function C(N,Y){this.g=N,i(this,"description",{configurable:!0,writable:!0,value:Y})}if(s)return s;C.prototype.toString=function(){return this.g};var y="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",w=0;return a}),l("Symbol.iterator",function(s){if(s)return s;s=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),C=0;C<a.length;C++){var y=o[a[C]];typeof y=="function"&&typeof y.prototype[s]!="function"&&i(y.prototype,s,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return s});function I(s){return s={next:s},s[Symbol.iterator]=function(){return this},s}function m(s){var a=typeof Symbol!="undefined"&&Symbol.iterator&&s[Symbol.iterator];return a?a.call(s):{next:t(s)}}function Z(s){if(!(s instanceof Array)){s=m(s);for(var a,C=[];!(a=s.next()).done;)C.push(a.value);s=C}return s}var x=typeof Object.create=="function"?Object.create:function(s){function a(){}return a.prototype=s,new a},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var st={a:!0},ut={};try{ut.__proto__=st,K=ut.a;break t}catch{}K=!1}L=K?function(s,a){if(s.__proto__=a,s.__proto__!==a)throw new TypeError(s+" is not extensible");return s}:null}var P=L;function ct(s,a){if(s.prototype=x(a.prototype),s.prototype.constructor=s,P)P(s,a);else for(var C in a)if(C!="prototype")if(Object.defineProperties){var y=Object.getOwnPropertyDescriptor(a,C);y&&Object.defineProperty(s,C,y)}else s[C]=a[C];s.ka=a.prototype}function Rt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Bt(s){if(s.l)throw new TypeError("Generator is already running");s.l=!0}Rt.prototype.o=function(s){this.h=s};function Yt(s,a){s.j={V:a,X:!0},s.g=s.m||s.s}Rt.prototype.return=function(s){this.j={return:s},this.g=this.s};function _(s,a,C){return s.g=C,{value:a}}function qe(s){this.g=new Rt,this.h=s}function ni(s,a){Bt(s.g);var C=s.g.i;return C?we(s,"return"in C?C.return:function(y){return{value:y,done:!0}},a,s.g.return):(s.g.return(a),qt(s))}function we(s,a,C,y){try{var w=a.call(s.g.i,C);if(!(w instanceof Object))throw new TypeError("Iterator result "+w+" is not an object");if(!w.done)return s.g.l=!1,w;var N=w.value}catch(Y){return s.g.i=null,Yt(s.g,Y),qt(s)}return s.g.i=null,y.call(s.g,N),qt(s)}function qt(s){for(;s.g.g;)try{var a=s.h(s.g);if(a)return s.g.l=!1,{value:a.value,done:!1}}catch(C){s.g.h=void 0,Yt(s.g,C)}if(s.g.l=!1,s.g.j){if(a=s.g.j,s.g.j=null,a.X)throw a.V;return{value:a.return,done:!0}}return{value:void 0,done:!0}}function Bn(s){this.next=function(a){return Bt(s.g),s.g.i?a=we(s,s.g.i.next,a,s.g.o):(s.g.o(a),a=qt(s)),a},this.throw=function(a){return Bt(s.g),s.g.i?a=we(s,s.g.i.throw,a,s.g.o):(Yt(s.g,a),a=qt(s)),a},this.return=function(a){return ni(s,a)},this[Symbol.iterator]=function(){return this}}function ge(s){function a(y){return s.next(y)}function C(y){return s.throw(y)}return new Promise(function(y,w){function N(Y){Y.done?y(Y.value):Promise.resolve(Y.value).then(a,C).then(N,w)}N(s.next())})}function ft(s){return ge(new Bn(new qe(s)))}l("Promise",function(s){function a(Y){this.h=0,this.i=void 0,this.g=[],this.o=!1;var U=this.j();try{Y(U.resolve,U.reject)}catch(j){U.reject(j)}}function C(){this.g=null}function y(Y){return Y instanceof a?Y:new a(function(U){U(Y)})}if(s)return s;C.prototype.h=function(Y){if(this.g==null){this.g=[];var U=this;this.i(function(){U.l()})}this.g.push(Y)};var w=o.setTimeout;C.prototype.i=function(Y){w(Y,0)},C.prototype.l=function(){for(;this.g&&this.g.length;){var Y=this.g;this.g=[];for(var U=0;U<Y.length;++U){var j=Y[U];Y[U]=null;try{j()}catch(et){this.j(et)}}}this.g=null},C.prototype.j=function(Y){this.i(function(){throw Y})},a.prototype.j=function(){function Y(et){return function(it){j||(j=!0,et.call(U,it))}}var U=this,j=!1;return{resolve:Y(this.D),reject:Y(this.l)}},a.prototype.D=function(Y){if(Y===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Y instanceof a)this.G(Y);else{t:switch(typeof Y){case"object":var U=Y!=null;break t;case"function":U=!0;break t;default:U=!1}U?this.A(Y):this.m(Y)}},a.prototype.A=function(Y){var U=void 0;try{U=Y.then}catch(j){this.l(j);return}typeof U=="function"?this.H(U,Y):this.m(Y)},a.prototype.l=function(Y){this.s(2,Y)},a.prototype.m=function(Y){this.s(1,Y)},a.prototype.s=function(Y,U){if(this.h!=0)throw Error("Cannot settle("+Y+", "+U+"): Promise already settled in state"+this.h);this.h=Y,this.i=U,this.h===2&&this.F(),this.B()},a.prototype.F=function(){var Y=this;w(function(){if(Y.C()){var U=o.console;typeof U!="undefined"&&U.error(Y.i)}},1)},a.prototype.C=function(){if(this.o)return!1;var Y=o.CustomEvent,U=o.Event,j=o.dispatchEvent;return typeof j=="undefined"?!0:(typeof Y=="function"?Y=new Y("unhandledrejection",{cancelable:!0}):typeof U=="function"?Y=new U("unhandledrejection",{cancelable:!0}):(Y=o.document.createEvent("CustomEvent"),Y.initCustomEvent("unhandledrejection",!1,!0,Y)),Y.promise=this,Y.reason=this.i,j(Y))},a.prototype.B=function(){if(this.g!=null){for(var Y=0;Y<this.g.length;++Y)N.h(this.g[Y]);this.g=null}};var N=new C;return a.prototype.G=function(Y){var U=this.j();Y.K(U.resolve,U.reject)},a.prototype.H=function(Y,U){var j=this.j();try{Y.call(U,j.resolve,j.reject)}catch(et){j.reject(et)}},a.prototype.then=function(Y,U){function j(pt,At){return typeof pt=="function"?function(Vt){try{et(pt(Vt))}catch(Gt){it(Gt)}}:At}var et,it,Ct=new a(function(pt,At){et=pt,it=At});return this.K(j(Y,et),j(U,it)),Ct},a.prototype.catch=function(Y){return this.then(void 0,Y)},a.prototype.K=function(Y,U){function j(){switch(et.h){case 1:Y(et.i);break;case 2:U(et.i);break;default:throw Error("Unexpected state: "+et.h)}}var et=this;this.g==null?N.h(j):this.g.push(j),this.o=!0},a.resolve=y,a.reject=function(Y){return new a(function(U,j){j(Y)})},a.race=function(Y){return new a(function(U,j){for(var et=m(Y),it=et.next();!it.done;it=et.next())y(it.value).K(U,j)})},a.all=function(Y){var U=m(Y),j=U.next();return j.done?y([]):new a(function(et,it){function Ct(Vt){return function(Gt){pt[Vt]=Gt,At--,At==0&&et(pt)}}var pt=[],At=0;do pt.push(void 0),At++,y(j.value).K(Ct(pt.length-1),it),j=U.next();while(!j.done)})},a});function Yi(s,a){s instanceof String&&(s+="");var C=0,y=!1,w={next:function(){if(!y&&C<s.length){var N=C++;return{value:a(N,s[N]),done:!1}}return y=!0,{done:!0,value:void 0}}};return w[Symbol.iterator]=function(){return w},w}var Jn=typeof Object.assign=="function"?Object.assign:function(s,a){for(var C=1;C<arguments.length;C++){var y=arguments[C];if(y)for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(s[w]=y[w])}return s};l("Object.assign",function(s){return s||Jn}),l("Object.is",function(s){return s||function(a,C){return a===C?a!==0||1/a===1/C:a!==a&&C!==C}}),l("Array.prototype.includes",function(s){return s||function(a,C){var y=this;y instanceof String&&(y=String(y));var w=y.length;for(C=C||0,0>C&&(C=Math.max(C+w,0));C<w;C++){var N=y[C];if(N===a||Object.is(N,a))return!0}return!1}}),l("String.prototype.includes",function(s){return s||function(a,C){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(a,C||0)!==-1}}),l("Array.prototype.keys",function(s){return s||function(){return Yi(this,function(a){return a})}});var He=this||self;function Tt(s,a){s=s.split(".");var C=He;s[0]in C||typeof C.execScript=="undefined"||C.execScript("var "+s[0]);for(var y;s.length&&(y=s.shift());)s.length||a===void 0?C[y]&&C[y]!==Object.prototype[y]?C=C[y]:C=C[y]={}:C[y]=a}function Je(s){throw s}function yi(s,a){Je(Error("Invalid wire type: "+s+" (at position "+a+")"))}function Oi(){Je(Error("Failed to read varint, encoding is invalid."))}function An(s,a){return a=String.fromCharCode.apply(null,a),s==null?a:s+a}var sn,Xn=typeof TextDecoder!="undefined",Si,Mi=typeof TextEncoder!="undefined";function Fn(s){if(Mi)s=(Si||(Si=new TextEncoder)).encode(s);else{var a=void 0;a=a===void 0?!1:a;for(var C=0,y=new Uint8Array(3*s.length),w=0;w<s.length;w++){var N=s.charCodeAt(w);if(128>N)y[C++]=N;else{if(2048>N)y[C++]=N>>6|192;else{if(55296<=N&&57343>=N){if(56319>=N&&w<s.length){var Y=s.charCodeAt(++w);if(56320<=Y&&57343>=Y){N=1024*(N-55296)+Y-56320+65536,y[C++]=N>>18|240,y[C++]=N>>12&63|128,y[C++]=N>>6&63|128,y[C++]=N&63|128;continue}else w--}if(a)throw Error("Found an unpaired surrogate");N=65533}y[C++]=N>>12|224,y[C++]=N>>6&63|128}y[C++]=N&63|128}}s=y.subarray(0,C)}return s}var yn={},oi=null;function ei(s){var a;a===void 0&&(a=0),Ae(),a=yn[a];for(var C=Array(Math.floor(s.length/3)),y=a[64]||"",w=0,N=0;w<s.length-2;w+=3){var Y=s[w],U=s[w+1],j=s[w+2],et=a[Y>>2];Y=a[(Y&3)<<4|U>>4],U=a[(U&15)<<2|j>>6],j=a[j&63],C[N++]=et+Y+U+j}switch(et=0,j=y,s.length-w){case 2:et=s[w+1],j=a[(et&15)<<2]||y;case 1:s=s[w],C[N]=a[s>>2]+a[(s&3)<<4|et>>4]+j+y}return C.join("")}function rn(s){var a=s.length,C=3*a/4;C%3?C=Math.floor(C):"=.".indexOf(s[a-1])!=-1&&(C="=.".indexOf(s[a-2])!=-1?C-2:C-1);var y=new Uint8Array(C),w=0;return ji(s,function(N){y[w++]=N}),y.subarray(0,w)}function ji(s,a){function C(j){for(;y<s.length;){var et=s.charAt(y++),it=oi[et];if(it!=null)return it;if(!/^[\s\xa0]*$/.test(et))throw Error("Unknown base64 encoding at char: "+et)}return j}Ae();for(var y=0;;){var w=C(-1),N=C(0),Y=C(64),U=C(64);if(U===64&&w===-1)break;a(w<<2|N>>4),Y!=64&&(a(N<<4&240|Y>>2),U!=64&&a(Y<<6&192|U))}}function Ae(){if(!oi){oi={};for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),a=["+/=","+/","-_=","-_.","-_"],C=0;5>C;C++){var y=s.concat(a[C].split(""));yn[C]=y;for(var w=0;w<y.length;w++){var N=y[w];oi[N]===void 0&&(oi[N]=w)}}}}var Me=typeof Uint8Array=="function",si;function de(s){if(this.g=s,s!==null&&s.length===0)throw Error("ByteString should be constructed with non-empty values")}var Fe=typeof Uint8Array.prototype.slice=="function";function Zi(s,a,C){return a===C?si||(si=new Uint8Array(0)):Fe?s.slice(a,C):new Uint8Array(s.subarray(a,C))}var $e=0,ne=0;function Xe(s){if(s.constructor===Uint8Array)return s;if(s.constructor===ArrayBuffer)return new Uint8Array(s);if(s.constructor===Array)return new Uint8Array(s);if(s.constructor===String)return rn(s);if(s.constructor===de){if(s.g==null)var a=si||(si=new Uint8Array(0));else{a=Uint8Array;var C=s.g;C=C==null||Me&&C!=null&&C instanceof Uint8Array?C:typeof C=="string"?rn(C):null,s=s.g=C,a=new a(s)}return a}if(s instanceof Uint8Array)return new Uint8Array(s.buffer,s.byteOffset,s.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Ue(s,a){a=a===void 0?{}:a,a=a.v===void 0?!1:a.v,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.v=a,s&&Dt(this,s)}function Dt(s,a){s.h=Xe(a),s.l=0,s.i=s.h.length,s.g=s.l}Ue.prototype.reset=function(){this.g=this.l};function xe(s){for(var a=128,C=0,y=0,w=0;4>w&&128<=a;w++)a=s.h[s.g++],C|=(a&127)<<7*w;if(128<=a&&(a=s.h[s.g++],C|=(a&127)<<28,y|=(a&127)>>4),128<=a)for(w=0;5>w&&128<=a;w++)a=s.h[s.g++],y|=(a&127)<<7*w+3;if(128>a)return s=C>>>0,a=y>>>0,(y=a&2147483648)&&(s=~s+1>>>0,a=~a>>>0,s==0&&(a=a+1>>>0)),s=4294967296*a+(s>>>0),y?-s:s;s.j=!0,Oi()}function $t(s){s.g>s.i&&(s.j=!0,Je(Error("Tried to read past the end of the data "+s.g+" > "+s.i)))}function Ge(s){var a=s.h,C=a[s.g],y=C&127;return 128>C?(s.g+=1,$t(s),y):(C=a[s.g+1],y|=(C&127)<<7,128>C?(s.g+=2,$t(s),y):(C=a[s.g+2],y|=(C&127)<<14,128>C?(s.g+=3,$t(s),y):(C=a[s.g+3],y|=(C&127)<<21,128>C?(s.g+=4,$t(s),y):(C=a[s.g+4],y|=(C&15)<<28,128>C?(s.g+=5,$t(s),y>>>0):(s.g+=5,128<=a[s.g++]&&128<=a[s.g++]&&128<=a[s.g++]&&128<=a[s.g++]&&128<=a[s.g++]?(s.j=!0,Oi(),y):($t(s),y))))))}function Te(s){var a=s.h[s.g],C=s.h[s.g+1],y=s.h[s.g+2],w=s.h[s.g+3];return s.g+=4,$t(s),(a<<0|C<<8|y<<16|w<<24)>>>0}Ue.prototype.m=function(){var s=Te(this),a=2*(s>>31)+1,C=s>>>23&255;return s&=8388607,C==255?s?NaN:1/0*a:C==0?a*Math.pow(2,-149)*s:a*Math.pow(2,C-150)*(s+Math.pow(2,23))};var di=[];function Se(){this.g=new Uint8Array(64),this.h=0}function te(s,a){if(!(s.h+1<s.g.length)){var C=s.g;s.g=new Uint8Array(Math.ceil(1+2*s.g.length)),s.g.set(C)}s.g[s.h++]=a}Se.prototype.length=function(){return this.h},Se.prototype.end=function(){var s=this.g,a=this.h;return this.h=0,Zi(s,0,a)};function ii(s,a){for(;127<a;)te(s,a&127|128),a>>>=7;te(s,a)}function ri(s){var a={},C=a.O===void 0?!1:a.O;this.m={v:a.v===void 0?!1:a.v},this.O=C,a=this.m,di.length?(C=di.pop(),a&&(C.v=a.v),s&&Dt(C,s),s=C):s=new Ue(s,a),this.g=s,this.l=this.g.g,this.h=this.i=-1,this.j=!1}ri.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function Ne(s){var a=s.g;if((a=a.g==a.i)||(a=s.j)||(a=s.g,a=a.j||0>a.g||a.g>a.i),a)return!1;s.l=s.g.g;var C=Ge(s.g);return a=C>>>3,C&=7,0<=C&&5>=C?(s.i=a,s.h=C,!0):(s.j=!0,yi(C,s.l),!1)}function _i(s){switch(s.h){case 0:if(s.h!=0)_i(s);else t:{s=s.g;for(var a=s.g,C=0;10>C;C++){if((s.h[a]&128)===0){s.g=a+1,$t(s);break t}a++}s.j=!0,Oi()}break;case 1:s=s.g,s.g+=8,$t(s);break;case 2:s.h!=2?_i(s):(a=Ge(s.g),s=s.g,s.g+=a,$t(s));break;case 5:s=s.g,s.g+=4,$t(s);break;case 3:a=s.i;do{if(!Ne(s)){s.j=!0,Je(Error("Unmatched start-group tag: stream EOF"));break}if(s.h==4){s.i!=a&&(s.j=!0,Je(Error("Unmatched end-group tag")));break}_i(s)}while(1);break;default:s.j=!0,yi(s.h,s.l)}}function fi(s,a,C){var y=s.g.i,w=Ge(s.g),N=s.g.g+w;if(s.g.i=N,C(a,s),C=N-s.g.g,C!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(w+" bytes, instead read "+(w-C)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return s.g.g=N,s.g.i=y,a}var li=[];function Gi(){this.h=[],this.i=0,this.g=new Se}function Re(s,a){a.length!==0&&(s.h.push(a),s.i+=a.length)}function ke(s,a,C){ii(s.g,8*a+2),ii(s.g,C.length),Re(s,s.g.end()),Re(s,C)}var ve=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function ae(s){return Object.isFrozen(s)||(ve?s[ve]|=1:s.g!==void 0?s.g|=1:Object.defineProperties(s,{g:{value:1,configurable:!0,writable:!0,enumerable:!1}})),s}function ci(s){return s!==null&&typeof s=="object"&&s.constructor===Object}function le(s){switch(typeof s){case"number":return isFinite(s)?s:String(s);case"object":if(Me&&s!=null&&s instanceof Uint8Array)return ei(s);if(s instanceof de){if(s.g==null)s="";else{var a=s.g;a=a==null||typeof a=="string"?a:Me&&a instanceof Uint8Array?ei(a):null,s=s.g=a}return s}}return s}function ee(s,a){if(s!=null)return Array.isArray(s)||ci(s)?wi(s,a):a(s)}function wi(s,a){if(Array.isArray(s)){for(var C=Array(s.length),y=0;y<s.length;y++)C[y]=ee(s[y],a);if(a=Array.isArray(s)){var w;ve?w=s[ve]:w=s.g,a=(w==null?0:w)&1}return a&&ae(C),C}w={};for(C in s)w[C]=ee(s[C],a);return w}function ye(s){return s=le(s),Array.isArray(s)?wi(s,ye):s}var Jt;function vt(s,a,C){var y=Jt;Jt=null,s||(s=y),y=this.constructor.ha,s||(s=y?[y]:[]),this.i=(y?0:-1)-(this.constructor.fa||0),this.l=this.g=null,this.u=s;t:{if(y=this.u.length,s=y-1,y&&(y=this.u[s],ci(y))){this.j=s-this.i,this.h=y;break t}a!==void 0&&-1<a?(this.j=Math.max(a,s+1-this.i),this.h=null):this.j=Number.MAX_VALUE}if(C)for(a=0;a<C.length;a++)s=C[a],s<this.j?(s+=this.i,(y=this.u[s])?Array.isArray(y)&&ae(y):this.u[s]=Ie):(ze(this),(y=this.h[s])?Array.isArray(y)&&ae(y):this.h[s]=Ie)}var Ie=Object.freeze(ae([]));function ze(s){var a=s.j+s.i;s.u[a]||(s.h=s.u[a]={})}function ce(s,a,C){return a===-1?null:(C===void 0?0:C)||a>=s.j?s.h?s.h[a]:void 0:s.u[a+s.i]}function ue(s,a,C){C=C===void 0?!1:C;var y=ce(s,a,C);return y==null&&(y=Ie),y===Ie&&(y=ae(y.slice()),ht(s,a,y,C)),y}function rt(s,a){var C=ue(s,a);if(s.l||(s.l={}),!s.l[a]){for(var y=0;y<C.length;y++)C[y]=+C[y];s.l[a]=!0}return C}function at(s,a,C){return s=ce(s,a),s=s==null?s:+s,s==null?C===void 0?0:C:s}function ht(s,a,C,y){(y===void 0?0:y)||a>=s.j?(ze(s),s.h[a]=C):s.u[a+s.i]=C}function ie(s,a,C,y){C!==y?ht(s,a,C):ht(s,a,void 0,!1)}function pe(s,a,C){if(C===-1)return null;s.g||(s.g={});var y=s.g[C];if(y)return y;var w=ce(s,C,!1);return w==null?y:(a=new a(w),s.g[C]=a)}function he(s,a,C){s.g||(s.g={});var y=s.g[C];if(!y){var w=ue(s,C,!1);y=[];for(var N=0;N<w.length;N++)y[N]=new a(w[N]);s.g[C]=y}return y}function Ht(s,a,C,y,w){var N=he(s,y,a);C=C||new y,s=ue(s,a),w!=null?(N.splice(w,0,C),s.splice(w,0,C.u)):(N.push(C),s.push(C.u))}vt.prototype.toJSON=function(){return wi(this.u,ye)},vt.prototype.toString=function(){return this.u.toString()};function Ze(s,a){return s=ce(s,a),s==null?0:s}function Ee(s,a){return s=ce(s,a),s==null?"":s}function ai(s,a){if(s=s.m){Re(a,a.g.end());for(var C=0;C<s.length;C++)Re(a,s[C])}}var Ii=Symbol();function Fi(s,a,C){return s[Ii]||(s[Ii]=function(y,w){return a(y,w,C)})}function Li(s){var a=s[Ii];if(!a){var C=s[Ci]||(s[Ci]=s());a=function(y,w){return Qe(y,w,C)},s[Ii]=a}return a}function Ke(s){var a=s.da;if(a)return Li(a);if(a=s.ia){var C=s.Y;return delete s.Y,Fi(s.W.g,a,C)}}function ui(s){var a=Ke(s),C=s.W,y=s.ea;return a?function(w,N){return y(w,N,C,a)}:function(w,N){return y(w,N,C)}}function Tn(s){var a=s[0];switch(s.length){case 2:var C=s[1];return function(At,Vt,Gt){return a(At,Vt,Gt,C)};case 3:var y=s[1],w=Li(s[2]);return function(At,Vt,Gt){return a(At,Vt,Gt,y,w)};case 4:var N=s[1],Y=s[3],U=Li(s[2]);return function(At,Vt,Gt){return a(At,Vt,Gt,N,U,Y)};case 5:var j=s[1],et=Fi(j,s[3],s[4]);return function(At,Vt,Gt){return a(At,Vt,Gt,j,et)};case 6:var it=s[1],Ct=s[5],pt=Fi(it,s[3],s[4]);return function(At,Vt,Gt){return a(At,Vt,Gt,it,pt,Ct)};default:throw Error("Unsupported number of parameters, expected [2-6], got "+s.length)}}var Ci=Symbol();function Qe(s,a,C){for(;Ne(a)&&a.h!=4;){var y=a.i,w=C[y];if(w)Array.isArray(w)&&(w=C[y]=Tn(w));else{var N=C[0];N&&(N=N[y])&&(w=C[y]=ui(N))}w&&w(a,s,y)||(w=a,y=s,N=w.l,_i(w),w.O||(w=Zi(w.g.h,N,w.g.g),(N=y.m)?N.push(w):y.m=[w]))}return s}function zi(s,a){var C=new Gi;if(a(s,C),s=C.i+C.g.length(),s===0)C=new Uint8Array(0);else{s=new Uint8Array(s);for(var y=C.h,w=y.length,N=a=0;N<w;N++){var Y=y[N];Y.length!==0&&(s.set(Y,a),a+=Y.length)}y=C.g,w=y.h,w!==0&&(s.set(y.g.subarray(0,w),a),y.h=0),C.h=[s],C=s}return C}function ln(s,a,C){if(li.length){var y=li.pop();s&&(Dt(y.g,s),y.i=-1,y.h=-1),s=y}else s=new ri(s);try{var w=new a;return Qe(w,s,C[Ci]||(C[Ci]=C()))}finally{a=s.g,a.h=null,a.l=0,a.i=0,a.g=0,a.j=!1,a.v=!1,s.i=-1,s.h=-1,s.j=!1,100>li.length&&li.push(s)}}function ti(s,a,C){if(a=ce(a,C),a!=null){ii(s.g,8*C+5),s=s.g;var y=a;y=(C=0>y?1:0)?-y:y,y===0?0<1/y?$e=ne=0:(ne=0,$e=2147483648):isNaN(y)?(ne=0,$e=2147483647):34028234663852886e22<y?(ne=0,$e=(C<<31|2139095040)>>>0):11754943508222875e-54>y?(y=Math.round(y/Math.pow(2,-149)),ne=0,$e=(C<<31|y)>>>0):(a=Math.floor(Math.log(y)/Math.LN2),y*=Math.pow(2,-a),y=Math.round(8388608*y),16777216<=y&&++a,ne=0,$e=(C<<31|a+127<<23|y&8388607)>>>0),C=$e,te(s,C>>>0&255),te(s,C>>>8&255),te(s,C>>>16&255),te(s,C>>>24&255)}}function Hn(s,a,C){if(s.h!==1)return!1;var y=s.g;s=Te(y);var w=Te(y);y=2*(w>>31)+1;var N=w>>>20&2047;return s=4294967296*(w&1048575)+s,ie(a,C,N==2047?s?NaN:1/0*y:N==0?y*Math.pow(2,-1074)*s:y*Math.pow(2,N-1075)*(s+4503599627370496),0),!0}function mi(s,a,C){return s.h!==5?!1:(ht(a,C,s.g.m()),!0)}function Ki(s,a,C){if(s.h!==5&&s.h!==2)return!1;if(a=ue(a,C),s.h==2){C=Ue.prototype.m;var y=Ge(s.g);for(y=s.g.g+y;s.g.g<y;)a.push(C.call(s.g))}else a.push(s.g.m());return!0}function Cn(s,a,C){return s.h!==5?!1:(s=s.g.m(),ie(a,C,s,0),!0)}function Yn(s,a,C){return s.h!==0?!1:(ht(a,C,xe(s.g)),!0)}function Vi(s,a,C){return s.h!==0?!1:(ht(a,C,Ge(s.g)),!0)}function mn(s,a,C){return s.h!==0?!1:(s=Ge(s.g),ie(a,C,s,0),!0)}function to(s,a,C){return s.h!==0?!1:(s=!!Ge(s.g),ie(a,C,s,!1),!0)}function eo(s,a,C){if(s.h!==2)return!1;var y=Ge(s.g);s=s.g;var w=s.g;s.g+=y,$t(s),s=s.h;var N;if(Xn)(N=sn)||(N=sn=new TextDecoder("utf-8",{fatal:!1})),N=N.decode(s.subarray(w,w+y));else{y=w+y;for(var Y=[],U=null,j,et,it;w<y;)j=s[w++],128>j?Y.push(j):224>j?w>=y?Y.push(65533):(et=s[w++],194>j||(et&192)!==128?(w--,Y.push(65533)):Y.push((j&31)<<6|et&63)):240>j?w>=y-1?Y.push(65533):(et=s[w++],(et&192)!==128||j===224&&160>et||j===237&&160<=et||((N=s[w++])&192)!==128?(w--,Y.push(65533)):Y.push((j&15)<<12|(et&63)<<6|N&63)):244>=j?w>=y-2?Y.push(65533):(et=s[w++],(et&192)!==128||(j<<28)+(et-144)>>30!==0||((N=s[w++])&192)!==128||((it=s[w++])&192)!==128?(w--,Y.push(65533)):(j=(j&7)<<18|(et&63)<<12|(N&63)<<6|it&63,j-=65536,Y.push((j>>10&1023)+55296,(j&1023)+56320))):Y.push(65533),8192<=Y.length&&(U=An(U,Y),Y.length=0);N=An(U,Y)}return ht(a,C,N),!0}function hn(s,a,C,y,w){return s.h!==2?!1:(s=fi(s,new y,w),a.g||(a.g={}),y=s&&s.u,a.g[C]=s,ht(a,C,y,!1),!0)}function Zn(s,a,C,y,w){return s.h!==2?!1:(s=fi(s,new y,w),Ht(a,C,s,y,void 0),!0)}function A(s,a,C){return s.h!==0?!1:(ht(a,C,xe(s.g)),!0)}function X(s){vt.call(this,s)}ct(X,vt);function R(){return{1:Vi,2:mi,3:eo,4:eo}}function k(s,a){var C=ce(s,1);if(C!=null&&C!=null){ii(a.g,8);var y=a.g;if(0<=C)ii(y,C);else{for(var w=0;9>w;w++)te(y,C&127|128),C>>=7;te(y,1)}}ti(a,s,2),y=ce(s,3),y!=null&&ke(a,3,Fn(y)),y=ce(s,4),y!=null&&ke(a,4,Fn(y)),ai(s,a)}function $(s){vt.call(this,s,-1,q)}ct($,vt),$.prototype.addClassification=function(s,a){return Ht(this,1,s,X,a),this};function It(){return{1:[Zn,X,R]}}var q=[1];function dt(s){vt.call(this,s)}ct(dt,vt);function yt(){return{1:mi,2:mi,3:mi,4:mi,5:mi}}function St(s,a){ti(a,s,1),ti(a,s,2),ti(a,s,3),ti(a,s,4),ti(a,s,5),ai(s,a)}function Et(s){vt.call(this,s,-1,re)}ct(Et,vt);function kt(){return{1:[Zn,dt,yt]}}var re=[1];function zt(s){vt.call(this,s)}ct(zt,vt);function xt(){return{1:mi,2:mi,3:mi,4:mi,5:mi,6:Yn}}function Ut(s,a){ti(a,s,1),ti(a,s,2),ti(a,s,3),ti(a,s,4),ti(a,s,5);var C=ce(s,6);if(C!=null&&C!=null){ii(a.g,48);var y=a.g,w=C;C=0>w,w=Math.abs(w);var N=w>>>0;for(w=Math.floor((w-N)/4294967296),w>>>=0,C&&(w=~w>>>0,N=(~N>>>0)+1,4294967295<N&&(N=0,w++,4294967295<w&&(w=0))),$e=N,ne=w,C=$e,N=ne;0<N||127<C;)te(y,C&127|128),C=(C>>>7|N<<25)>>>0,N>>>=7;te(y,C)}ai(s,a)}function oe(s){vt.call(this,s,-1,De)}ct(oe,vt);function be(){return{1:A,2:A,3:Ki,4:[hn,fe,Ve],5:Vi,6:Vi,7:Ki,8:Ki,9:Ki}}function fe(s){vt.call(this,s)}ct(fe,vt);function Ve(){return{1:mi,2:mi,3:mi}}var De=[3,7,8,9];function b(s){vt.call(this,s)}ct(b,vt);function f(){return{1:Cn,2:Cn,3:Cn}}function W(s){vt.call(this,s)}ct(W,vt);function M(){return{1:Cn,2:Cn,3:Cn}}function Q(s){vt.call(this,s)}ct(Q,vt);function tt(){return{1:mn,2:[hn,W,M],3:[hn,b,f],4:to}}function D(s){vt.call(this,s,-1,mt)}ct(D,vt);function ot(){return{1:mn,2:[Zn,Q,tt],3:Cn,4:Ki,5:Ki,6:Ki}}var mt=[2,4,5,6];function g(s){vt.call(this,s,-1,v)}ct(g,vt);function B(){return{1:mn,2:[Zn,D,ot],3:[hn,oe,be],4:Hn,5:Ki,6:Ki}}var v=[2,5,6];function H(s,a,C){if(C=s.createShader(C===0?s.VERTEX_SHADER:s.FRAGMENT_SHADER),s.shaderSource(C,a),s.compileShader(C),!s.getShaderParameter(C,s.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+s.getShaderInfoLog(C));return C}function J(s){return he(s,X,1).map(function(a){return{index:Ze(a,1),$:at(a,2),label:ce(a,3)!=null?Ee(a,3):void 0,displayName:ce(a,4)!=null?Ee(a,4):void 0}})}function O(s){return{x:at(s,1),y:at(s,2),z:at(s,3),visibility:ce(s,4)!=null?at(s,4):void 0}}function E(s,a){this.h=s,this.g=a,this.l=0}function gt(s,a,C){return nt(s,a),typeof s.g.canvas.transferToImageBitmap=="function"?Promise.resolve(s.g.canvas.transferToImageBitmap()):C?Promise.resolve(s.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(s.g.canvas):(s.i===void 0&&(s.i=document.createElement("canvas")),new Promise(function(y){s.i.height=s.g.canvas.height,s.i.width=s.g.canvas.width,s.i.getContext("2d",{}).drawImage(s.g.canvas,0,0,s.g.canvas.width,s.g.canvas.height),y(s.i)}))}function nt(s,a){var C=s.g;if(s.m===void 0){var y=H(C,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),w=H(C,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),N=C.createProgram();if(C.attachShader(N,y),C.attachShader(N,w),C.linkProgram(N),!C.getProgramParameter(N,C.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+C.getProgramInfoLog(N));y=s.m=N,C.useProgram(y),w=C.getUniformLocation(y,"sampler0"),s.j={J:C.getAttribLocation(y,"aVertex"),I:C.getAttribLocation(y,"aTex"),ja:w},s.s=C.createBuffer(),C.bindBuffer(C.ARRAY_BUFFER,s.s),C.enableVertexAttribArray(s.j.J),C.vertexAttribPointer(s.j.J,2,C.FLOAT,!1,0,0),C.bufferData(C.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),C.STATIC_DRAW),C.bindBuffer(C.ARRAY_BUFFER,null),s.o=C.createBuffer(),C.bindBuffer(C.ARRAY_BUFFER,s.o),C.enableVertexAttribArray(s.j.I),C.vertexAttribPointer(s.j.I,2,C.FLOAT,!1,0,0),C.bufferData(C.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),C.STATIC_DRAW),C.bindBuffer(C.ARRAY_BUFFER,null),C.uniform1i(w,0)}y=s.j,C.useProgram(s.m),C.canvas.width=a.width,C.canvas.height=a.height,C.viewport(0,0,a.width,a.height),C.activeTexture(C.TEXTURE0),s.h.bindTexture2d(a.glName),C.enableVertexAttribArray(y.J),C.bindBuffer(C.ARRAY_BUFFER,s.s),C.vertexAttribPointer(y.J,2,C.FLOAT,!1,0,0),C.enableVertexAttribArray(y.I),C.bindBuffer(C.ARRAY_BUFFER,s.o),C.vertexAttribPointer(y.I,2,C.FLOAT,!1,0,0),C.bindFramebuffer(C.DRAW_FRAMEBUFFER?C.DRAW_FRAMEBUFFER:C.FRAMEBUFFER,null),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT),C.colorMask(!0,!0,!0,!0),C.drawArrays(C.TRIANGLE_FAN,0,4),C.disableVertexAttribArray(y.J),C.disableVertexAttribArray(y.I),C.bindBuffer(C.ARRAY_BUFFER,null),s.h.bindTexture2d(0)}function Zt(s){this.g=s}var Wt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Qt(s,a){return a+s}function wt(s,a){window[s]=a}function bt(s){var a=document.createElement("script");return a.setAttribute("src",s),a.setAttribute("crossorigin","anonymous"),new Promise(function(C){a.addEventListener("load",function(){C()},!1),a.addEventListener("error",function(){C()},!1),document.body.appendChild(a)})}function Xt(){return ft(function(s){switch(s.g){case 1:return s.m=2,_(s,WebAssembly.instantiate(Wt),4);case 4:s.g=3,s.m=0;break;case 2:return s.m=0,s.j=null,s.return(!1);case 3:return s.return(!0)}})}function Ft(s){if(this.g=s,this.listeners={},this.j={},this.G={},this.m={},this.s={},this.H=this.o=this.S=!0,this.D=Promise.resolve(),this.R="",this.C={},this.locateFile=s&&s.locateFile||Qt,typeof window=="object")var a=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")a=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.T=a,s.options){a=m(Object.keys(s.options));for(var C=a.next();!C.done;C=a.next()){C=C.value;var y=s.options[C].default;y!==void 0&&(this.j[C]=typeof y=="function"?y():y)}}}e=Ft.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Nt(s){var a,C,y,w,N,Y,U,j,et,it,Ct;return ft(function(pt){switch(pt.g){case 1:return s.S?(a=s.g.files===void 0?[]:typeof s.g.files=="function"?s.g.files(s.j):s.g.files,_(pt,Xt(),2)):pt.return();case 2:if(C=pt.h,typeof window=="object")return wt("createMediapipeSolutionsWasm",{locateFile:s.locateFile}),wt("createMediapipeSolutionsPackedAssets",{locateFile:s.locateFile}),Y=a.filter(function(At){return At.data!==void 0}),U=a.filter(function(At){return At.data===void 0}),j=Promise.all(Y.map(function(At){var Vt=V(s,At.url);if(At.path!==void 0){var Gt=At.path;Vt=Vt.then(function(_t){return s.overrideFile(Gt,_t),Promise.resolve(_t)})}return Vt})),et=Promise.all(U.map(function(At){return At.simd===void 0||At.simd&&C||!At.simd&&!C?bt(s.locateFile(At.url,s.T)):Promise.resolve()})).then(function(){var At,Vt,Gt;return ft(function(_t){if(_t.g==1)return At=window.createMediapipeSolutionsWasm,Vt=window.createMediapipeSolutionsPackedAssets,Gt=s,_(_t,At(Vt),2);Gt.h=_t.h,_t.g=0})}),it=function(){return ft(function(At){return s.g.graph&&s.g.graph.url?At=_(At,V(s,s.g.graph.url),0):(At.g=0,At=void 0),At})}(),_(pt,Promise.all([et,j,it]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return y=a.filter(function(At){return At.simd===void 0||At.simd&&C||!At.simd&&!C}).map(function(At){return s.locateFile(At.url,s.T)}),importScripts.apply(null,Z(y)),w=s,_(pt,createMediapipeSolutionsWasm(Module),6);case 6:w.h=pt.h,s.l=new OffscreenCanvas(1,1),s.h.canvas=s.l,N=s.h.GL.createContext(s.l,{antialias:!1,alpha:!1,ga:typeof WebGL2RenderingContext!="undefined"?2:1}),s.h.GL.makeContextCurrent(N),pt.g=4;break;case 7:if(s.l=document.createElement("canvas"),Ct=s.l.getContext("webgl2",{}),!Ct&&(Ct=s.l.getContext("webgl",{}),!Ct))return alert("Failed to create WebGL canvas context when passing video frame."),pt.return();s.F=Ct,s.h.canvas=s.l,s.h.createContext(s.l,!0,!0,{});case 4:s.i=new s.h.SolutionWasm,s.S=!1,pt.g=0}})}function Mt(s){var a,C,y,w,N,Y,U,j;return ft(function(et){if(et.g==1){if(s.g.graph&&s.g.graph.url&&s.R===s.g.graph.url)return et.return();if(s.o=!0,!s.g.graph||!s.g.graph.url){et.g=2;return}return s.R=s.g.graph.url,_(et,V(s,s.g.graph.url),3)}for(et.g!=2&&(a=et.h,s.i.loadGraph(a)),C=m(Object.keys(s.C)),y=C.next();!y.done;y=C.next())w=y.value,s.i.overrideFile(w,s.C[w]);if(s.C={},s.g.listeners)for(N=m(s.g.listeners),Y=N.next();!Y.done;Y=N.next())U=Y.value,T(s,U);j=s.j,s.j={},s.setOptions(j),et.g=0})}e.reset=function(){var s=this;return ft(function(a){s.i&&(s.i.reset(),s.m={},s.s={}),a.g=0})},e.setOptions=function(s,a){var C=this;if(a=a||this.g.options){for(var y=[],w=[],N={},Y=m(Object.keys(s)),U=Y.next();!U.done;N={L:N.L,M:N.M},U=Y.next()){var j=U.value;j in this.j&&this.j[j]===s[j]||(this.j[j]=s[j],U=a[j],U!==void 0&&(U.onChange&&(N.L=U.onChange,N.M=s[j],y.push(function(et){return function(){var it;return ft(function(Ct){if(Ct.g==1)return _(Ct,et.L(et.M),2);it=Ct.h,it===!0&&(C.o=!0),Ct.g=0})}}(N))),U.graphOptionXref&&(j={valueNumber:U.type===1?s[j]:0,valueBoolean:U.type===0?s[j]:!1,valueString:U.type===2?s[j]:""},U=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),U.graphOptionXref),j),w.push(U))))}(y.length!==0||w.length!==0)&&(this.o=!0,this.B=(this.B===void 0?[]:this.B).concat(w),this.A=(this.A===void 0?[]:this.A).concat(y))}};function d(s){var a,C,y,w,N,Y,U;return ft(function(j){switch(j.g){case 1:if(!s.o)return j.return();if(!s.A){j.g=2;break}a=m(s.A),C=a.next();case 3:if(C.done){j.g=5;break}return y=C.value,_(j,y(),4);case 4:C=a.next(),j.g=3;break;case 5:s.A=void 0;case 2:if(s.B){for(w=new s.h.GraphOptionChangeRequestList,N=m(s.B),Y=N.next();!Y.done;Y=N.next())U=Y.value,w.push_back(U);s.i.changeOptions(w),w.delete(),s.B=void 0}s.o=!1,j.g=0}})}e.initialize=function(){var s=this;return ft(function(a){return a.g==1?_(a,Nt(s),2):a.g!=3?_(a,Mt(s),3):_(a,d(s),0)})};function V(s,a){var C,y;return ft(function(w){return a in s.G?w.return(s.G[a]):(C=s.locateFile(a,""),y=fetch(C).then(function(N){return N.arrayBuffer()}),s.G[a]=y,w.return(y))})}e.overrideFile=function(s,a){this.i?this.i.overrideFile(s,a):this.C[s]=a},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(s,a){var C=this,y,w,N,Y,U,j,et,it,Ct;return ft(function(pt){switch(pt.g){case 1:return C.g.inputs?(y=1e3*(a==null?performance.now():a),_(pt,C.D,2)):pt.return();case 2:return _(pt,C.initialize(),3);case 3:for(w=new C.h.PacketDataList,N=m(Object.keys(s)),Y=N.next();!Y.done;Y=N.next())if(U=Y.value,j=C.g.inputs[U]){t:{var At=s[U];switch(j.type){case"video":var Vt=C.m[j.stream];if(Vt||(Vt=new E(C.h,C.F),C.m[j.stream]=Vt),Vt.l===0&&(Vt.l=Vt.h.createTexture()),typeof HTMLVideoElement!="undefined"&&At instanceof HTMLVideoElement)var Gt=At.videoWidth,_t=At.videoHeight;else typeof HTMLImageElement!="undefined"&&At instanceof HTMLImageElement?(Gt=At.naturalWidth,_t=At.naturalHeight):(Gt=At.width,_t=At.height);_t={glName:Vt.l,width:Gt,height:_t},Gt=Vt.g,Gt.canvas.width=_t.width,Gt.canvas.height=_t.height,Gt.activeTexture(Gt.TEXTURE0),Vt.h.bindTexture2d(Vt.l),Gt.texImage2D(Gt.TEXTURE_2D,0,Gt.RGBA,Gt.RGBA,Gt.UNSIGNED_BYTE,At),Vt.h.bindTexture2d(0),Vt=_t;break t;case"detections":for(Vt=C.m[j.stream],Vt||(Vt=new Zt(C.h),C.m[j.stream]=Vt),Vt.data||(Vt.data=new Vt.g.DetectionListData),Vt.data.reset(At.length),_t=0;_t<At.length;++_t){Gt=At[_t];var Ce=Vt.data,me=Ce.setBoundingBox,je=_t,Pi=Gt.U,_e=new zt;if(ht(_e,1,Pi.aa),ht(_e,2,Pi.ba),ht(_e,3,Pi.height),ht(_e,4,Pi.width),ht(_e,5,Pi.rotation),ht(_e,6,Pi.Z),Pi=zi(_e,Ut),me.call(Ce,je,Pi),Gt.P)for(Ce=0;Ce<Gt.P.length;++Ce){_e=Gt.P[Ce];var Rn=!!_e.visibility;me=Vt.data,je=me.addNormalizedLandmark,Pi=_t,_e=Object.assign(Object.assign({},_e),{visibility:Rn?_e.visibility:0}),Rn=new dt,ht(Rn,1,_e.x),ht(Rn,2,_e.y),ht(Rn,3,_e.z),_e.visibility&&ht(Rn,4,_e.visibility),_e=zi(Rn,St),je.call(me,Pi,_e)}if(Gt.N)for(Ce=0;Ce<Gt.N.length;++Ce)me=Vt.data,je=me.addClassification,Pi=_t,_e=Gt.N[Ce],Rn=new X,ht(Rn,2,_e.$),_e.index&&ht(Rn,1,_e.index),_e.label&&ht(Rn,3,_e.label),_e.displayName&&ht(Rn,4,_e.displayName),_e=zi(Rn,k),je.call(me,Pi,_e)}Vt=Vt.data;break t;default:Vt={}}}switch(et=Vt,it=j.stream,j.type){case"video":w.pushTexture2d(Object.assign(Object.assign({},et),{stream:it,timestamp:y}));break;case"detections":Ct=et,Ct.stream=it,Ct.timestamp=y,w.pushDetectionList(Ct);break;default:throw Error("Unknown input config type: '"+j.type+"'")}}return C.i.send(w),_(pt,C.D,4);case 4:w.delete(),pt.g=0}})};function S(s,a,C){var y,w,N,Y,U,j,et,it,Ct,pt,At,Vt,Gt,_t;return ft(function(Ce){switch(Ce.g){case 1:if(!C)return Ce.return(a);for(y={},w=0,N=m(Object.keys(C)),Y=N.next();!Y.done;Y=N.next())U=Y.value,j=C[U],typeof j!="string"&&j.type==="texture"&&a[j.stream]!==void 0&&++w;1<w&&(s.H=!1),et=m(Object.keys(C)),Y=et.next();case 2:if(Y.done){Ce.g=4;break}if(it=Y.value,Ct=C[it],typeof Ct=="string")return Gt=y,_t=it,_(Ce,F(s,it,a[Ct]),14);if(pt=a[Ct.stream],Ct.type==="detection_list"){if(pt){for(var me=pt.getRectList(),je=pt.getLandmarksList(),Pi=pt.getClassificationsList(),_e=[],Rn=0;Rn<me.size();++Rn){var ps=ln(me.get(Rn),zt,xt);ps={U:{aa:at(ps,1),ba:at(ps,2),height:at(ps,3),width:at(ps,4),rotation:at(ps,5,0),Z:Ze(ps,6)},P:he(ln(je.get(Rn),Et,kt),dt,1).map(O),N:J(ln(Pi.get(Rn),$,It))},_e.push(ps)}me=_e}else me=[];y[it]=me,Ce.g=7;break}if(Ct.type==="proto_list"){if(pt){for(me=Array(pt.size()),je=0;je<pt.size();je++)me[je]=pt.get(je);pt.delete()}else me=[];y[it]=me,Ce.g=7;break}if(pt===void 0){Ce.g=3;break}if(Ct.type==="float_list"){y[it]=pt,Ce.g=7;break}if(Ct.type==="proto"){y[it]=pt,Ce.g=7;break}if(Ct.type!=="texture")throw Error("Unknown output config type: '"+Ct.type+"'");return At=s.s[it],At||(At=new E(s.h,s.F),s.s[it]=At),_(Ce,gt(At,pt,s.H),13);case 13:Vt=Ce.h,y[it]=Vt;case 7:Ct.transform&&y[it]&&(y[it]=Ct.transform(y[it])),Ce.g=3;break;case 14:Gt[_t]=Ce.h;case 3:Y=et.next(),Ce.g=2;break;case 4:return Ce.return(y)}})}function F(s,a,C){var y;return ft(function(w){return typeof C=="number"||C instanceof Uint8Array||C instanceof s.h.Uint8BlobList?w.return(C):C instanceof s.h.Texture2dDataOut?(y=s.s[a],y||(y=new E(s.h,s.F),s.s[a]=y),w.return(gt(y,C,s.H))):w.return(void 0)})}function T(s,a){for(var C=a.name||"$",y=[].concat(Z(a.wants)),w=new s.h.StringList,N=m(a.wants),Y=N.next();!Y.done;Y=N.next())w.push_back(Y.value);N=s.h.PacketListener.implement({onResults:function(U){for(var j={},et=0;et<a.wants.length;++et)j[y[et]]=U.get(et);var it=s.listeners[C];it&&(s.D=S(s,j,a.outs).then(function(Ct){Ct=it(Ct);for(var pt=0;pt<a.wants.length;++pt){var At=j[y[pt]];typeof At=="object"&&At.hasOwnProperty&&At.hasOwnProperty("delete")&&At.delete()}Ct&&(s.D=Ct)}))}}),s.i.attachMultiListener(w,N),w.delete()}e.onResults=function(s,a){this.listeners[a||"$"]=s},Tt("Solution",Ft),Tt("OptionType",{BOOL:0,NUMBER:1,ca:2,0:"BOOL",1:"NUMBER",2:"STRING"});function c(s){var a=Ze(s,1),C=pe(s,b,3);return C={x:at(C,1),y:at(C,2),depth:at(C,3)},s=pe(s,W,2),{id:a,point2d:C,point3d:{x:at(s,1),y:at(s,2),z:at(s,3)}}}function h(s){var a=ln(s,g,B);s=[],a=he(a,D,2);for(var C=0;C<a.length;C++)s.push({id:Ze(a[C],1),keypoints:he(a[C],Q,2).map(c),visibility:at(a[C],3),scale:rt(a[C],6),translation:rt(a[C],5),rotation:rt(a[C],4)});return s}function G(s){switch(s){case"Camera":return"object_detection_3d_camera.tflite";case"Chair":return"object_detection_3d_chair.tflite";case"Cup":return"object_detection_3d_cup.tflite";default:return"object_detection_3d_sneakers.tflite"}}function r(s){switch(s){case"Camera":return"Camera";case"Chair":return"Chair";case"Cup":return"Coffee cup, Mug";default:return"Footwear"}}var u={focalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_x"}},focalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_y"}},principalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_x"}},principalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_y"}},allowedLabels:{type:2,graphOptionXref:{calculatorName:"ConstantSidePacketCalculatorAllowedLabels",calculatorType:"ConstantSidePacketCalculator",fieldName:"string_value"}}};function p(s){var a=this;s=s||{},this.g=new Ft({locateFile:s.locateFile,files:[{url:"objectron_solution_packed_assets_loader.js"},{simd:!1,url:"objectron_solution_wasm_bin.js"},{simd:!0,url:"objectron_solution_simd_wasm_bin.js"}],graph:{url:"objectron.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["lifted_objects","image_transformed"],outs:{image:"image_transformed",objectDetections:{type:"proto",stream:"lifted_objects",transform:h}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,default:!1,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumObjects:{type:1,default:5,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorMaxNumObjects",fieldName:"int_value"}},staticImageMode:{type:0,default:!0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"objectrongpusubgraph__ConstantSidePacketCalculator",fieldName:"bool_value"}},minDetectionConfidence:{type:1,default:.5,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"objectrongpusubgraph__objectdetectionoidv4subgraph__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,default:.99,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"objectrongpusubgraph__boxlandmarksubgraph__ThresholdingCalculator",fieldName:"threshold"}},modelName:{default:"Shoe",onChange:function(C){var y,w,N,Y;return ft(function(U){return U.g==1?(y=C,a.g.setOptions({allowedLabels:r(y)},u),w=G(y),N="object_detection_3d.tflite",_(U,V(a.g,w),2)):(Y=U.h,a.g.overrideFile(N,Y),U.return(!0))})}},focalLength:{default:[1,1],onChange:function(C){var y;return ft(function(w){return y=C,a.h=y,a.g.setOptions({focalX:y[0],focalY:y[1]},u),w.return(!0)})}},principalPoint:{default:[0,0],onChange:function(C){var y;return ft(function(w){return y=C,a.i=y,a.g.setOptions({principalX:y[0],principalY:y[1]},u),w.return(!0)})}},imageSize:{onChange:function(C){var y,w,N,Y;return ft(function(U){if(a.h===void 0||a.i===void 0)return console.error('"focalLength" and "principalPoint" must be set if setting image size'),U.return();y=C,w=[y[0]/2,y[1]/2],N=[a.h[0]/w[0],a.h[1]/w[1]],Y=[a.i[0]/w[0],a.i[1]/w[1]],a.setOptions({focalLength:N,principalPoint:Y}),U.g=0})}}}})}e=p.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(s){this.g.onResults(s)},e.initialize=function(){var s=this;return ft(function(a){return _(a,s.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(s){var a=this;return ft(function(C){return _(C,a.g.send(s),0)})},e.setOptions=function(s){this.g.setOptions(s)},Tt("Objectron",p),Tt("BOX_CONNECTIONS",[[1,2],[2,4],[4,3],[3,1],[5,6],[6,8],[8,7],[7,5],[1,5],[2,6],[3,7],[4,8]]),Tt("BOX_KEYPOINTS",{CENTER:0,BACK_BOTTOM_LEFT:1,FRONT_BOTTOM_LEFT:2,BACK_TOP_LEFT:3,FRONT_TOP_LEFT:4,BACK_BOTTOM_RIGHT:5,FRONT_BOTTOM_RIGHT:6,BACK_TOP_RIGHT:7,FRONT_TOP_RIGHT:8}),Tt("VERSION","0.4.1636596145")}).call(r3);const l3={};(function(){var e;function t(g){var B=0;return function(){return B<g.length?{done:!1,value:g[B++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,B,v){return g==Array.prototype||g==Object.prototype||(g[B]=v.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var B=0;B<g.length;++B){var v=g[B];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var o=n(this);function l(g,B){if(B)t:{var v=o;g=g.split(".");for(var H=0;H<g.length-1;H++){var J=g[H];if(!(J in v))break t;v=v[J]}g=g[g.length-1],H=v[g],B=B(H),B!=H&&B!=null&&i(v,g,{configurable:!0,writable:!0,value:B})}}l("Symbol",function(g){function B(O){if(this instanceof B)throw new TypeError("Symbol is not a constructor");return new v(H+(O||"")+"_"+J++,O)}function v(O,E){this.g=O,i(this,"description",{configurable:!0,writable:!0,value:E})}if(g)return g;v.prototype.toString=function(){return this.g};var H="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",J=0;return B}),l("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var B="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<B.length;v++){var H=o[B[v]];typeof H=="function"&&typeof H.prototype[g]!="function"&&i(H.prototype,g,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return g});function I(g){return g={next:g},g[Symbol.iterator]=function(){return this},g}function m(g){var B=typeof Symbol!="undefined"&&Symbol.iterator&&g[Symbol.iterator];return B?B.call(g):{next:t(g)}}function Z(g){if(!(g instanceof Array)){g=m(g);for(var B,v=[];!(B=g.next()).done;)v.push(B.value);g=v}return g}var x=typeof Object.create=="function"?Object.create:function(g){function B(){}return B.prototype=g,new B},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var st={a:!0},ut={};try{ut.__proto__=st,K=ut.a;break t}catch{}K=!1}L=K?function(g,B){if(g.__proto__=B,g.__proto__!==B)throw new TypeError(g+" is not extensible");return g}:null}var P=L;function ct(g,B){if(g.prototype=x(B.prototype),g.prototype.constructor=g,P)P(g,B);else for(var v in B)if(v!="prototype")if(Object.defineProperties){var H=Object.getOwnPropertyDescriptor(B,v);H&&Object.defineProperty(g,v,H)}else g[v]=B[v];g.ea=B.prototype}function Rt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Bt(g){if(g.l)throw new TypeError("Generator is already running");g.l=!0}Rt.prototype.o=function(g){this.h=g};function Yt(g,B){g.j={U:B,V:!0},g.g=g.m||g.s}Rt.prototype.return=function(g){this.j={return:g},this.g=this.s};function _(g,B,v){return g.g=v,{value:B}}function qe(g){this.g=new Rt,this.h=g}function ni(g,B){Bt(g.g);var v=g.g.i;return v?we(g,"return"in v?v.return:function(H){return{value:H,done:!0}},B,g.g.return):(g.g.return(B),qt(g))}function we(g,B,v,H){try{var J=B.call(g.g.i,v);if(!(J instanceof Object))throw new TypeError("Iterator result "+J+" is not an object");if(!J.done)return g.g.l=!1,J;var O=J.value}catch(E){return g.g.i=null,Yt(g.g,E),qt(g)}return g.g.i=null,H.call(g.g,O),qt(g)}function qt(g){for(;g.g.g;)try{var B=g.h(g.g);if(B)return g.g.l=!1,{value:B.value,done:!1}}catch(v){g.g.h=void 0,Yt(g.g,v)}if(g.g.l=!1,g.g.j){if(B=g.g.j,g.g.j=null,B.V)throw B.U;return{value:B.return,done:!0}}return{value:void 0,done:!0}}function Bn(g){this.next=function(B){return Bt(g.g),g.g.i?B=we(g,g.g.i.next,B,g.g.o):(g.g.o(B),B=qt(g)),B},this.throw=function(B){return Bt(g.g),g.g.i?B=we(g,g.g.i.throw,B,g.g.o):(Yt(g.g,B),B=qt(g)),B},this.return=function(B){return ni(g,B)},this[Symbol.iterator]=function(){return this}}function ge(g){function B(H){return g.next(H)}function v(H){return g.throw(H)}return new Promise(function(H,J){function O(E){E.done?H(E.value):Promise.resolve(E.value).then(B,v).then(O,J)}O(g.next())})}function ft(g){return ge(new Bn(new qe(g)))}l("Promise",function(g){function B(E){this.h=0,this.i=void 0,this.g=[],this.o=!1;var gt=this.j();try{E(gt.resolve,gt.reject)}catch(nt){gt.reject(nt)}}function v(){this.g=null}function H(E){return E instanceof B?E:new B(function(gt){gt(E)})}if(g)return g;v.prototype.h=function(E){if(this.g==null){this.g=[];var gt=this;this.i(function(){gt.l()})}this.g.push(E)};var J=o.setTimeout;v.prototype.i=function(E){J(E,0)},v.prototype.l=function(){for(;this.g&&this.g.length;){var E=this.g;this.g=[];for(var gt=0;gt<E.length;++gt){var nt=E[gt];E[gt]=null;try{nt()}catch(Zt){this.j(Zt)}}}this.g=null},v.prototype.j=function(E){this.i(function(){throw E})},B.prototype.j=function(){function E(Zt){return function(Wt){nt||(nt=!0,Zt.call(gt,Wt))}}var gt=this,nt=!1;return{resolve:E(this.C),reject:E(this.l)}},B.prototype.C=function(E){if(E===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(E instanceof B)this.F(E);else{t:switch(typeof E){case"object":var gt=E!=null;break t;case"function":gt=!0;break t;default:gt=!1}gt?this.v(E):this.m(E)}},B.prototype.v=function(E){var gt=void 0;try{gt=E.then}catch(nt){this.l(nt);return}typeof gt=="function"?this.G(gt,E):this.m(E)},B.prototype.l=function(E){this.s(2,E)},B.prototype.m=function(E){this.s(1,E)},B.prototype.s=function(E,gt){if(this.h!=0)throw Error("Cannot settle("+E+", "+gt+"): Promise already settled in state"+this.h);this.h=E,this.i=gt,this.h===2&&this.D(),this.A()},B.prototype.D=function(){var E=this;J(function(){if(E.B()){var gt=o.console;typeof gt!="undefined"&&gt.error(E.i)}},1)},B.prototype.B=function(){if(this.o)return!1;var E=o.CustomEvent,gt=o.Event,nt=o.dispatchEvent;return typeof nt=="undefined"?!0:(typeof E=="function"?E=new E("unhandledrejection",{cancelable:!0}):typeof gt=="function"?E=new gt("unhandledrejection",{cancelable:!0}):(E=o.document.createEvent("CustomEvent"),E.initCustomEvent("unhandledrejection",!1,!0,E)),E.promise=this,E.reason=this.i,nt(E))},B.prototype.A=function(){if(this.g!=null){for(var E=0;E<this.g.length;++E)O.h(this.g[E]);this.g=null}};var O=new v;return B.prototype.F=function(E){var gt=this.j();E.J(gt.resolve,gt.reject)},B.prototype.G=function(E,gt){var nt=this.j();try{E.call(gt,nt.resolve,nt.reject)}catch(Zt){nt.reject(Zt)}},B.prototype.then=function(E,gt){function nt(wt,bt){return typeof wt=="function"?function(Xt){try{Zt(wt(Xt))}catch(Ft){Wt(Ft)}}:bt}var Zt,Wt,Qt=new B(function(wt,bt){Zt=wt,Wt=bt});return this.J(nt(E,Zt),nt(gt,Wt)),Qt},B.prototype.catch=function(E){return this.then(void 0,E)},B.prototype.J=function(E,gt){function nt(){switch(Zt.h){case 1:E(Zt.i);break;case 2:gt(Zt.i);break;default:throw Error("Unexpected state: "+Zt.h)}}var Zt=this;this.g==null?O.h(nt):this.g.push(nt),this.o=!0},B.resolve=H,B.reject=function(E){return new B(function(gt,nt){nt(E)})},B.race=function(E){return new B(function(gt,nt){for(var Zt=m(E),Wt=Zt.next();!Wt.done;Wt=Zt.next())H(Wt.value).J(gt,nt)})},B.all=function(E){var gt=m(E),nt=gt.next();return nt.done?H([]):new B(function(Zt,Wt){function Qt(Xt){return function(Ft){wt[Xt]=Ft,bt--,bt==0&&Zt(wt)}}var wt=[],bt=0;do wt.push(void 0),bt++,H(nt.value).J(Qt(wt.length-1),Wt),nt=gt.next();while(!nt.done)})},B});function Yi(g,B){g instanceof String&&(g+="");var v=0,H=!1,J={next:function(){if(!H&&v<g.length){var O=v++;return{value:B(O,g[O]),done:!1}}return H=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}var Jn=typeof Object.assign=="function"?Object.assign:function(g,B){for(var v=1;v<arguments.length;v++){var H=arguments[v];if(H)for(var J in H)Object.prototype.hasOwnProperty.call(H,J)&&(g[J]=H[J])}return g};l("Object.assign",function(g){return g||Jn}),l("Object.is",function(g){return g||function(B,v){return B===v?B!==0||1/B===1/v:B!==B&&v!==v}}),l("Array.prototype.includes",function(g){return g||function(B,v){var H=this;H instanceof String&&(H=String(H));var J=H.length;for(v=v||0,0>v&&(v=Math.max(v+J,0));v<J;v++){var O=H[v];if(O===B||Object.is(O,B))return!0}return!1}}),l("String.prototype.includes",function(g){return g||function(B,v){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(B instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(B,v||0)!==-1}}),l("Array.prototype.keys",function(g){return g||function(){return Yi(this,function(B){return B})}});var He=this||self;function Tt(g,B){g=g.split(".");var v=He;g[0]in v||typeof v.execScript=="undefined"||v.execScript("var "+g[0]);for(var H;g.length&&(H=g.shift());)g.length||B===void 0?v[H]&&v[H]!==Object.prototype[H]?v=v[H]:v=v[H]={}:v[H]=B}function Je(g){He.setTimeout(function(){throw g},0)}function yi(g){Je(g)}function Oi(g,B){yi(Error("Invalid wire type: "+g+" (at position "+B+")"))}function An(){yi(Error("Failed to read varint, encoding is invalid."))}function sn(g,B){return B=String.fromCharCode.apply(null,B),g==null?B:g+B}var Xn,Si=typeof TextDecoder!="undefined",Mi,Fn=typeof TextEncoder!="undefined";function yn(g){if(Fn)g=(Mi||(Mi=new TextEncoder)).encode(g);else{var B=void 0;B=B===void 0?!1:B;for(var v=0,H=new Uint8Array(3*g.length),J=0;J<g.length;J++){var O=g.charCodeAt(J);if(128>O)H[v++]=O;else{if(2048>O)H[v++]=O>>6|192;else{if(55296<=O&&57343>=O){if(56319>=O&&J<g.length){var E=g.charCodeAt(++J);if(56320<=E&&57343>=E){O=1024*(O-55296)+E-56320+65536,H[v++]=O>>18|240,H[v++]=O>>12&63|128,H[v++]=O>>6&63|128,H[v++]=O&63|128;continue}else J--}if(B)throw Error("Found an unpaired surrogate");O=65533}H[v++]=O>>12|224,H[v++]=O>>6&63|128}H[v++]=O&63|128}}g=H.subarray(0,v)}return g}var oi={},ei=null;function rn(g){var B;B===void 0&&(B=0),Me(),B=oi[B];for(var v=Array(Math.floor(g.length/3)),H=B[64]||"",J=0,O=0;J<g.length-2;J+=3){var E=g[J],gt=g[J+1],nt=g[J+2],Zt=B[E>>2];E=B[(E&3)<<4|gt>>4],gt=B[(gt&15)<<2|nt>>6],nt=B[nt&63],v[O++]=Zt+E+gt+nt}switch(Zt=0,nt=H,g.length-J){case 2:Zt=g[J+1],nt=B[(Zt&15)<<2]||H;case 1:g=g[J],v[O]=B[g>>2]+B[(g&3)<<4|Zt>>4]+nt+H}return v.join("")}function ji(g){var B=g.length,v=3*B/4;v%3?v=Math.floor(v):"=.".indexOf(g[B-1])!=-1&&(v="=.".indexOf(g[B-2])!=-1?v-2:v-1);var H=new Uint8Array(v),J=0;return Ae(g,function(O){H[J++]=O}),H.subarray(0,J)}function Ae(g,B){function v(nt){for(;H<g.length;){var Zt=g.charAt(H++),Wt=ei[Zt];if(Wt!=null)return Wt;if(!/^[\s\xa0]*$/.test(Zt))throw Error("Unknown base64 encoding at char: "+Zt)}return nt}Me();for(var H=0;;){var J=v(-1),O=v(0),E=v(64),gt=v(64);if(gt===64&&J===-1)break;B(J<<2|O>>4),E!=64&&(B(O<<4&240|E>>2),gt!=64&&B(E<<6&192|gt))}}function Me(){if(!ei){ei={};for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),B=["+/=","+/","-_=","-_.","-_"],v=0;5>v;v++){var H=g.concat(B[v].split(""));oi[v]=H;for(var J=0;J<H.length;J++){var O=H[J];ei[O]===void 0&&(ei[O]=J)}}}}var si=typeof Uint8Array=="function",de;function Fe(g){if(this.g=g,g!==null&&g.length===0)throw Error("ByteString should be constructed with non-empty values")}Fe.prototype.toJSON=function(){if(this.g==null)var g="";else g=this.g,g=this.g=g==null||typeof g=="string"?g:si&&g instanceof Uint8Array?rn(g):null;return g};var Zi=typeof Uint8Array.prototype.slice=="function";function $e(g,B,v){return B===v?de||(de=new Uint8Array(0)):Zi?g.slice(B,v):new Uint8Array(g.subarray(B,v))}var ne=0,Xe=0;function Ue(g){if(g.constructor===Uint8Array)return g;if(g.constructor===ArrayBuffer)return new Uint8Array(g);if(g.constructor===Array)return new Uint8Array(g);if(g.constructor===String)return ji(g);if(g.constructor===Fe){if(g.g==null)var B=de||(de=new Uint8Array(0));else{B=Uint8Array;var v=g.g;v=v==null||si&&v!=null&&v instanceof Uint8Array?v:typeof v=="string"?ji(v):null,g=g.g=v,B=new B(g)}return B}if(g instanceof Uint8Array)return new Uint8Array(g.buffer,g.byteOffset,g.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Dt(g,B){B=B===void 0?{}:B,B=B.u===void 0?!1:B.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=B,g&&xe(this,g)}function xe(g,B){g.h=Ue(B),g.l=0,g.i=g.h.length,g.g=g.l}Dt.prototype.reset=function(){this.g=this.l};function $t(g){g.g>g.i&&(g.j=!0,yi(Error("Tried to read past the end of the data "+g.g+" > "+g.i)))}function Ge(g){var B=g.h,v=B[g.g],H=v&127;return 128>v?(g.g+=1,$t(g),H):(v=B[g.g+1],H|=(v&127)<<7,128>v?(g.g+=2,$t(g),H):(v=B[g.g+2],H|=(v&127)<<14,128>v?(g.g+=3,$t(g),H):(v=B[g.g+3],H|=(v&127)<<21,128>v?(g.g+=4,$t(g),H):(v=B[g.g+4],H|=(v&15)<<28,128>v?(g.g+=5,$t(g),H>>>0):(g.g+=5,128<=B[g.g++]&&128<=B[g.g++]&&128<=B[g.g++]&&128<=B[g.g++]&&128<=B[g.g++]?(g.j=!0,An(),H):($t(g),H))))))}var Te=[];function di(){this.g=new Uint8Array(64),this.h=0}function Se(g,B){if(!(g.h+1<g.g.length)){var v=g.g;g.g=new Uint8Array(Math.ceil(1+2*g.g.length)),g.g.set(v)}g.g[g.h++]=B}di.prototype.length=function(){return this.h},di.prototype.end=function(){var g=this.g,B=this.h;return this.h=0,$e(g,0,B)};function te(g,B){for(;127<B;)Se(g,B&127|128),B>>>=7;Se(g,B)}function ii(g){var B={},v=B.N===void 0?!1:B.N;this.m={u:B.u===void 0?!1:B.u},this.N=v,B=this.m,Te.length?(v=Te.pop(),B&&(v.u=B.u),g&&xe(v,g),g=v):g=new Dt(g,B),this.g=g,this.l=this.g.g,this.h=this.i=-1,this.j=!1}ii.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function ri(g){var B=g.g;if((B=B.g==B.i)||(B=g.j)||(B=g.g,B=B.j||0>B.g||B.g>B.i),B)return!1;g.l=g.g.g;var v=Ge(g.g);return B=v>>>3,v&=7,0<=v&&5>=v?(g.i=B,g.h=v,!0):(g.j=!0,Oi(v,g.l),!1)}function Ne(g){switch(g.h){case 0:if(g.h!=0)Ne(g);else t:{g=g.g;for(var B=g.g,v=0;10>v;v++){if((g.h[B]&128)===0){g.g=B+1,$t(g);break t}B++}g.j=!0,An()}break;case 1:g=g.g,g.g+=8,$t(g);break;case 2:g.h!=2?Ne(g):(B=Ge(g.g),g=g.g,g.g+=B,$t(g));break;case 5:g=g.g,g.g+=4,$t(g);break;case 3:B=g.i;do{if(!ri(g)){g.j=!0,yi(Error("Unmatched start-group tag: stream EOF"));break}if(g.h==4){g.i!=B&&(g.j=!0,yi(Error("Unmatched end-group tag")));break}Ne(g)}while(1);break;default:g.j=!0,Oi(g.h,g.l)}}function _i(g,B,v){g.N||(g=$e(g.g.h,v,g.g.g),(v=B.m)?v.push(g):B.m=[g])}var fi=[];function li(){this.h=[],this.i=0,this.g=new di}function Gi(g,B){B.length!==0&&(g.h.push(B),g.i+=B.length)}function Re(g,B,v){te(g.g,8*B+2),te(g.g,v.length),Gi(g,g.g.end()),Gi(g,v)}var ke=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function ve(g,B){Object.isFrozen(g)||(ke?g[ke]|=B:g.g!==void 0?g.g|=B:Object.defineProperties(g,{g:{value:B,configurable:!0,writable:!0,enumerable:!1}}))}function ae(g){if(!g)return 0;var B;return ke?B=g[ke]:B=g.g,B==null?0:B}function ci(g){return Array.isArray(g)&&ve(g,1),g}function le(g){if(!Array.isArray(g))throw Error("cannot mark non-array as immutable");ve(g,2)}function ee(g){return g!==null&&typeof g=="object"&&g.constructor===Object}function wi(g){switch(typeof g){case"number":return isFinite(g)?g:String(g);case"object":return si&&g!=null&&g instanceof Uint8Array?rn(g):g;default:return g}}function ye(g,B){if(g!=null)return Array.isArray(g)||ee(g)?Jt(g,B):B(g)}function Jt(g,B){if(Array.isArray(g)){for(var v=Array(g.length),H=0;H<g.length;H++)v[H]=ye(g[H],B);return ae(g)&1&&ci(v),v}v={};for(H in g)v[H]=ye(g[H],B);return v}var vt;function Ie(g,B,v){var H=vt;vt=null,g||(g=H),H=this.constructor.ca,g||(g=H?[H]:[]),this.j=(H?0:-1)-(this.constructor.aa||0),this.i=null,this.g=g;t:{if(H=this.g.length,g=H-1,H&&(H=this.g[g],ee(H))){this.l=g-this.j,this.h=H;break t}B!==void 0&&-1<B?(this.l=Math.max(B,g+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(v)for(B=0;B<v.length;B++)g=v[B],g<this.l?(g+=this.j,(H=this.g[g])?ci(H):this.g[g]=ze):(ce(this),(H=this.h[g])?ci(H):this.h[g]=ze)}var ze=Object.freeze(ci([]));function ce(g){var B=g.l+g.j;g.g[B]||(g.h=g.g[B]={})}function ue(g,B,v){return B===-1?null:(v===void 0?0:v)||B>=g.l?g.h?g.h[B]:void 0:g.g[B+g.j]}function rt(g,B,v){v=v===void 0?!0:v;var H=H===void 0?!1:H,J=ue(g,B,H);return J==null&&(J=ze),J===ze?(J=ci([]),ht(g,B,J,H)):v&&Array.isArray(J)&&ae(J)&2&&(J=J.slice(),ht(g,B,J,H)),J}function at(g,B,v){return g=ue(g,B),g=g==null?g:+g,g==null?v===void 0?0:v:g}function ht(g,B,v,H){(H===void 0?0:H)||B>=g.l?(ce(g),g.h[B]=v):g.g[B+g.j]=v}function ie(g,B,v){g.i||(g.i={});var H=g.i[v];if(!H){var J=rt(g,v,!1);H=[];for(var O=Array.isArray(J)?!!(ae(J)&2):!1,E=0;E<J.length;E++)H[E]=new B(J[E]),O&&le(H[E].g);O&&(le(H),Object.freeze(H)),g.i[v]=H}return H}function pe(g,B,v,H,J){var O=ie(g,H,B);v=v||new H,g=rt(g,B),J!=null?(O.splice(J,0,v),g.splice(J,0,he(v))):(O.push(v),g.push(he(v)))}Ie.prototype.toJSON=function(){var g=he(this);return Jt(g,wi)};function he(g){if(g.i)for(var B in g.i){var v=g.i[B];if(Array.isArray(v))for(var H=0;H<v.length;H++)v[H]&&he(v[H]);else v&&he(v)}return g.g}Ie.prototype.toString=function(){return he(this).toString()};function Ht(g,B){return g=ue(g,B),g==null?0:g}function Ze(g,B){return g=ue(g,B),g==null?"":g}function Ee(g,B){if(g=g.m){Gi(B,B.g.end());for(var v=0;v<g.length;v++)Gi(B,g[v])}}function ai(g){var B=g[0];switch(g.length){case 2:var v=g[1];return function(nt,Zt,Wt){return B(nt,Zt,Wt,v)};case 3:var H=g[1],J=g[2];return function(nt,Zt,Wt){return B(nt,Zt,Wt,H,J)};case 4:var O=g[1],E=g[2],gt=g[3];return function(nt,Zt,Wt){return B(nt,Zt,Wt,O,E,gt)};default:throw Error("unsupported number of parameters, expected [2-4], got "+g.length)}}function Ii(g,B,v){for(;ri(B)&&B.h!=4;){var H=B.i,J=v[H];if(J){if(Array.isArray(J)&&(J=v[H]=ai(J)),!J(B,g,H)){H=B,J=g;var O=H.l;Ne(H),_i(H,J,O)}}else H=B,J=g,O=H.l,Ne(H),_i(H,J,O)}return g}function Fi(g,B){var v=new li;if(B(g,v),g=v.i+v.g.length(),g===0)v=new Uint8Array(0);else{g=new Uint8Array(g);for(var H=v.h,J=H.length,O=B=0;O<J;O++){var E=H[O];E.length!==0&&(g.set(E,B),B+=E.length)}H=v.g,J=H.h,J!==0&&(g.set(H.g.subarray(0,J),B),H.h=0),v.h=[g],v=g}return v}function Li(g,B,v){if(fi.length){var H=fi.pop();g&&(xe(H.g,g),H.i=-1,H.h=-1),g=H}else g=new ii(g);try{return v(new B,g)}finally{B=g.g,B.h=null,B.l=0,B.i=0,B.g=0,B.j=!1,B.u=!1,g.i=-1,g.h=-1,g.j=!1,100>fi.length&&fi.push(g)}}function Ke(g,B,v){if(B=ue(B,v),B!=null){te(g.g,8*v+5),g=g.g;var H=B;H=(v=0>H?1:0)?-H:H,H===0?0<1/H?ne=Xe=0:(Xe=0,ne=2147483648):isNaN(H)?(Xe=0,ne=2147483647):34028234663852886e22<H?(Xe=0,ne=(v<<31|2139095040)>>>0):11754943508222875e-54>H?(H=Math.round(H/Math.pow(2,-149)),Xe=0,ne=(v<<31|H)>>>0):(B=Math.floor(Math.log(H)/Math.LN2),H*=Math.pow(2,-B),H=Math.round(8388608*H),16777216<=H&&++B,Xe=0,ne=(v<<31|B+127<<23|H&8388607)>>>0),v=ne,Se(g,v>>>0&255),Se(g,v>>>8&255),Se(g,v>>>16&255),Se(g,v>>>24&255)}}function ui(g,B,v){if(g.h!==5)return!1;g=g.g;var H=g.h[g.g],J=g.h[g.g+1],O=g.h[g.g+2],E=g.h[g.g+3];return g.g+=4,$t(g),J=(H<<0|J<<8|O<<16|E<<24)>>>0,g=2*(J>>31)+1,H=J>>>23&255,J&=8388607,ht(B,v,H==255?J?NaN:1/0*g:H==0?g*Math.pow(2,-149)*J:g*Math.pow(2,H-150)*(J+Math.pow(2,23))),!0}function Tn(g,B,v){if(g.h!==0)return!1;for(var H=g.g,J=128,O=0,E=g=0;4>E&&128<=J;E++)J=H.h[H.g++],O|=(J&127)<<7*E;if(128<=J&&(J=H.h[H.g++],O|=(J&127)<<28,g|=(J&127)>>4),128<=J)for(E=0;5>E&&128<=J;E++)J=H.h[H.g++],g|=(J&127)<<7*E+3;return 128>J?(H=O>>>0,J=g>>>0,(g=J&2147483648)&&(H=~H+1>>>0,J=~J>>>0,H==0&&(J=J+1>>>0)),H=4294967296*J+(H>>>0),g=g?-H:H):(H.j=!0,An(),g=void 0),ht(B,v,g),!0}function Ci(g,B,v){return g.h!==0?!1:(ht(B,v,Ge(g.g)),!0)}function Qe(g,B,v){if(g.h!==2)return!1;var H=Ge(g.g);g=g.g;var J=g.g;g.g+=H,$t(g),g=g.h;var O;if(Si)(O=Xn)||(O=Xn=new TextDecoder("utf-8",{fatal:!1})),O=O.decode(g.subarray(J,J+H));else{H=J+H;for(var E=[],gt=null,nt,Zt,Wt;J<H;)nt=g[J++],128>nt?E.push(nt):224>nt?J>=H?E.push(65533):(Zt=g[J++],194>nt||(Zt&192)!==128?(J--,E.push(65533)):E.push((nt&31)<<6|Zt&63)):240>nt?J>=H-1?E.push(65533):(Zt=g[J++],(Zt&192)!==128||nt===224&&160>Zt||nt===237&&160<=Zt||((O=g[J++])&192)!==128?(J--,E.push(65533)):E.push((nt&15)<<12|(Zt&63)<<6|O&63)):244>=nt?J>=H-2?E.push(65533):(Zt=g[J++],(Zt&192)!==128||(nt<<28)+(Zt-144)>>30!==0||((O=g[J++])&192)!==128||((Wt=g[J++])&192)!==128?(J--,E.push(65533)):(nt=(nt&7)<<18|(Zt&63)<<12|(O&63)<<6|Wt&63,nt-=65536,E.push((nt>>10&1023)+55296,(nt&1023)+56320))):E.push(65533),8192<=E.length&&(gt=sn(gt,E),E.length=0);O=sn(gt,E)}return ht(B,v,O),!0}function zi(g,B,v,H,J){if(g.h!==2)return!1;var O=new H,E=g.g.i,gt=Ge(g.g),nt=g.g.g+gt;if(g.g.i=nt,J(O,g),J=nt-g.g.g,J!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(gt+" bytes, instead read "+(gt-J)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return g.g.g=nt,g.g.i=E,pe(B,v,O,H,void 0),!0}function ln(g){Ie.call(this,g)}var ti;ct(ln,Ie);function Hn(g,B){var v=ue(g,1);if(v!=null&&v!=null){te(B.g,8);var H=B.g;if(0<=v)te(H,v);else{for(var J=0;9>J;J++)Se(H,v&127|128),v>>=7;Se(H,1)}}Ke(B,g,2),H=ue(g,3),H!=null&&Re(B,3,yn(H)),H=ue(g,4),H!=null&&Re(B,4,yn(H)),Ee(g,B)}function mi(g,B){return Ii(g,B,ti||(ti={1:Ci,2:ui,3:Qe,4:Qe}))}function Ki(g){Ie.call(this,g,-1,Vi)}var Cn;ct(Ki,Ie),Ki.prototype.addClassification=function(g,B){return pe(this,1,g,ln,B),this};function Yn(g,B){return Ii(g,B,Cn||(Cn={1:[zi,ln,mi]}))}var Vi=[1];function mn(g){Ie.call(this,g)}var to;ct(mn,Ie);function eo(g,B){Ke(B,g,1),Ke(B,g,2),Ke(B,g,3),Ke(B,g,4),Ke(B,g,5),Ee(g,B)}function hn(g,B){return Ii(g,B,to||(to={1:ui,2:ui,3:ui,4:ui,5:ui}))}function Zn(g){Ie.call(this,g,-1,R)}var A;ct(Zn,Ie);function X(g,B){return Ii(g,B,A||(A={1:[zi,mn,hn]}))}var R=[1];function k(g){Ie.call(this,g)}var $;ct(k,Ie);function It(g,B){Ke(B,g,1),Ke(B,g,2),Ke(B,g,3),Ke(B,g,4),Ke(B,g,5);var v=ue(g,6);if(v!=null&&v!=null){te(B.g,48);var H=B.g,J=v;v=0>J,J=Math.abs(J);var O=J>>>0;for(J=Math.floor((J-O)/4294967296),J>>>=0,v&&(J=~J>>>0,O=(~O>>>0)+1,4294967295<O&&(O=0,J++,4294967295<J&&(J=0))),ne=O,Xe=J,v=ne,O=Xe;0<O||127<v;)Se(H,v&127|128),v=(v>>>7|O<<25)>>>0,O>>>=7;Se(H,v)}Ee(g,B)}function q(g,B){return Ii(g,B,$||($={1:ui,2:ui,3:ui,4:ui,5:ui,6:Tn}))}function dt(g,B,v){if(v=g.createShader(v===0?g.VERTEX_SHADER:g.FRAGMENT_SHADER),g.shaderSource(v,B),g.compileShader(v),!g.getShaderParameter(v,g.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+g.getShaderInfoLog(v));return v}function yt(g){return ie(g,ln,1).map(function(B){return{index:Ht(B,1),X:at(B,2),label:ue(B,3)!=null?Ze(B,3):void 0,displayName:ue(B,4)!=null?Ze(B,4):void 0}})}function St(g){return{x:at(g,1),y:at(g,2),z:at(g,3),visibility:ue(g,4)!=null?at(g,4):void 0}}function Et(g){return ie(Li(g,Zn,X),mn,1).map(St)}function kt(g,B){this.h=g,this.g=B,this.l=0}function re(g,B,v){return zt(g,B),typeof g.g.canvas.transferToImageBitmap=="function"?Promise.resolve(g.g.canvas.transferToImageBitmap()):v?Promise.resolve(g.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(g.g.canvas):(g.i===void 0&&(g.i=document.createElement("canvas")),new Promise(function(H){g.i.height=g.g.canvas.height,g.i.width=g.g.canvas.width,g.i.getContext("2d",{}).drawImage(g.g.canvas,0,0,g.g.canvas.width,g.g.canvas.height),H(g.i)}))}function zt(g,B){var v=g.g;if(g.m===void 0){var H=dt(v,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),J=dt(v,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),O=v.createProgram();if(v.attachShader(O,H),v.attachShader(O,J),v.linkProgram(O),!v.getProgramParameter(O,v.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+v.getProgramInfoLog(O));H=g.m=O,v.useProgram(H),J=v.getUniformLocation(H,"sampler0"),g.j={I:v.getAttribLocation(H,"aVertex"),H:v.getAttribLocation(H,"aTex"),da:J},g.s=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,g.s),v.enableVertexAttribArray(g.j.I),v.vertexAttribPointer(g.j.I,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),g.o=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,g.o),v.enableVertexAttribArray(g.j.H),v.vertexAttribPointer(g.j.H,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),v.uniform1i(J,0)}H=g.j,v.useProgram(g.m),v.canvas.width=B.width,v.canvas.height=B.height,v.viewport(0,0,B.width,B.height),v.activeTexture(v.TEXTURE0),g.h.bindTexture2d(B.glName),v.enableVertexAttribArray(H.I),v.bindBuffer(v.ARRAY_BUFFER,g.s),v.vertexAttribPointer(H.I,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(H.H),v.bindBuffer(v.ARRAY_BUFFER,g.o),v.vertexAttribPointer(H.H,2,v.FLOAT,!1,0,0),v.bindFramebuffer(v.DRAW_FRAMEBUFFER?v.DRAW_FRAMEBUFFER:v.FRAMEBUFFER,null),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.colorMask(!0,!0,!0,!0),v.drawArrays(v.TRIANGLE_FAN,0,4),v.disableVertexAttribArray(H.I),v.disableVertexAttribArray(H.H),v.bindBuffer(v.ARRAY_BUFFER,null),g.h.bindTexture2d(0)}function xt(g){this.g=g}var Ut=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function oe(g,B){return B+g}function be(g,B){window[g]=B}function fe(g){var B=document.createElement("script");return B.setAttribute("src",g),B.setAttribute("crossorigin","anonymous"),new Promise(function(v){B.addEventListener("load",function(){v()},!1),B.addEventListener("error",function(){v()},!1),document.body.appendChild(B)})}function Ve(){return ft(function(g){switch(g.g){case 1:return g.m=2,_(g,WebAssembly.instantiate(Ut),4);case 4:g.g=3,g.m=0;break;case 2:return g.m=0,g.j=null,g.return(!1);case 3:return g.return(!0)}})}function De(g){if(this.g=g,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=g&&g.locateFile||oe,typeof window=="object")var B=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")B=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=B,g.options){B=m(Object.keys(g.options));for(var v=B.next();!v.done;v=B.next()){v=v.value;var H=g.options[v].default;H!==void 0&&(this.j[v]=typeof H=="function"?H():H)}}}e=De.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function b(g){var B,v,H,J,O,E,gt,nt,Zt,Wt,Qt;return ft(function(wt){switch(wt.g){case 1:return g.R?(B=g.g.files===void 0?[]:typeof g.g.files=="function"?g.g.files(g.j):g.g.files,_(wt,Ve(),2)):wt.return();case 2:if(v=wt.h,typeof window=="object")return be("createMediapipeSolutionsWasm",{locateFile:g.locateFile}),be("createMediapipeSolutionsPackedAssets",{locateFile:g.locateFile}),E=B.filter(function(bt){return bt.data!==void 0}),gt=B.filter(function(bt){return bt.data===void 0}),nt=Promise.all(E.map(function(bt){var Xt=M(g,bt.url);if(bt.path!==void 0){var Ft=bt.path;Xt=Xt.then(function(Nt){return g.overrideFile(Ft,Nt),Promise.resolve(Nt)})}return Xt})),Zt=Promise.all(gt.map(function(bt){return bt.simd===void 0||bt.simd&&v||!bt.simd&&!v?fe(g.locateFile(bt.url,g.S)):Promise.resolve()})).then(function(){var bt,Xt,Ft;return ft(function(Nt){if(Nt.g==1)return bt=window.createMediapipeSolutionsWasm,Xt=window.createMediapipeSolutionsPackedAssets,Ft=g,_(Nt,bt(Xt),2);Ft.h=Nt.h,Nt.g=0})}),Wt=function(){return ft(function(bt){return g.g.graph&&g.g.graph.url?bt=_(bt,M(g,g.g.graph.url),0):(bt.g=0,bt=void 0),bt})}(),_(wt,Promise.all([Zt,nt,Wt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return H=B.filter(function(bt){return bt.simd===void 0||bt.simd&&v||!bt.simd&&!v}).map(function(bt){return g.locateFile(bt.url,g.S)}),importScripts.apply(null,Z(H)),J=g,_(wt,createMediapipeSolutionsWasm(Module),6);case 6:J.h=wt.h,g.l=new OffscreenCanvas(1,1),g.h.canvas=g.l,O=g.h.GL.createContext(g.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext!="undefined"?2:1}),g.h.GL.makeContextCurrent(O),wt.g=4;break;case 7:if(g.l=document.createElement("canvas"),Qt=g.l.getContext("webgl2",{}),!Qt&&(Qt=g.l.getContext("webgl",{}),!Qt))return alert("Failed to create WebGL canvas context when passing video frame."),wt.return();g.D=Qt,g.h.canvas=g.l,g.h.createContext(g.l,!0,!0,{});case 4:g.i=new g.h.SolutionWasm,g.R=!1,wt.g=0}})}function f(g){var B,v,H,J,O,E,gt,nt;return ft(function(Zt){if(Zt.g==1){if(g.g.graph&&g.g.graph.url&&g.P===g.g.graph.url)return Zt.return();if(g.o=!0,!g.g.graph||!g.g.graph.url){Zt.g=2;return}return g.P=g.g.graph.url,_(Zt,M(g,g.g.graph.url),3)}for(Zt.g!=2&&(B=Zt.h,g.i.loadGraph(B)),v=m(Object.keys(g.B)),H=v.next();!H.done;H=v.next())J=H.value,g.i.overrideFile(J,g.B[J]);if(g.B={},g.g.listeners)for(O=m(g.g.listeners),E=O.next();!E.done;E=O.next())gt=E.value,D(g,gt);nt=g.j,g.j={},g.setOptions(nt),Zt.g=0})}e.reset=function(){var g=this;return ft(function(B){g.i&&(g.i.reset(),g.m={},g.s={}),B.g=0})},e.setOptions=function(g,B){var v=this;if(B=B||this.g.options){for(var H=[],J=[],O={},E=m(Object.keys(g)),gt=E.next();!gt.done;O={K:O.K,L:O.L},gt=E.next()){var nt=gt.value;nt in this.j&&this.j[nt]===g[nt]||(this.j[nt]=g[nt],gt=B[nt],gt!==void 0&&(gt.onChange&&(O.K=gt.onChange,O.L=g[nt],H.push(function(Zt){return function(){var Wt;return ft(function(Qt){if(Qt.g==1)return _(Qt,Zt.K(Zt.L),2);Wt=Qt.h,Wt===!0&&(v.o=!0),Qt.g=0})}}(O))),gt.graphOptionXref&&(nt={valueNumber:gt.type===1?g[nt]:0,valueBoolean:gt.type===0?g[nt]:!1,valueString:gt.type===2?g[nt]:""},gt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),gt.graphOptionXref),nt),J.push(gt))))}(H.length!==0||J.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(J),this.v=(this.v===void 0?[]:this.v).concat(H))}};function W(g){var B,v,H,J,O,E,gt;return ft(function(nt){switch(nt.g){case 1:if(!g.o)return nt.return();if(!g.v){nt.g=2;break}B=m(g.v),v=B.next();case 3:if(v.done){nt.g=5;break}return H=v.value,_(nt,H(),4);case 4:v=B.next(),nt.g=3;break;case 5:g.v=void 0;case 2:if(g.A){for(J=new g.h.GraphOptionChangeRequestList,O=m(g.A),E=O.next();!E.done;E=O.next())gt=E.value,J.push_back(gt);g.i.changeOptions(J),J.delete(),g.A=void 0}g.o=!1,nt.g=0}})}e.initialize=function(){var g=this;return ft(function(B){return B.g==1?_(B,b(g),2):B.g!=3?_(B,f(g),3):_(B,W(g),0)})};function M(g,B){var v,H;return ft(function(J){return B in g.F?J.return(g.F[B]):(v=g.locateFile(B,""),H=fetch(v).then(function(O){return O.arrayBuffer()}),g.F[B]=H,J.return(H))})}e.overrideFile=function(g,B){this.i?this.i.overrideFile(g,B):this.B[g]=B},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(g,B){var v=this,H,J,O,E,gt,nt,Zt,Wt,Qt;return ft(function(wt){switch(wt.g){case 1:return v.g.inputs?(H=1e3*(B==null?performance.now():B),_(wt,v.C,2)):wt.return();case 2:return _(wt,v.initialize(),3);case 3:for(J=new v.h.PacketDataList,O=m(Object.keys(g)),E=O.next();!E.done;E=O.next())if(gt=E.value,nt=v.g.inputs[gt]){t:{var bt=g[gt];switch(nt.type){case"video":var Xt=v.m[nt.stream];if(Xt||(Xt=new kt(v.h,v.D),v.m[nt.stream]=Xt),Xt.l===0&&(Xt.l=Xt.h.createTexture()),typeof HTMLVideoElement!="undefined"&&bt instanceof HTMLVideoElement)var Ft=bt.videoWidth,Nt=bt.videoHeight;else typeof HTMLImageElement!="undefined"&&bt instanceof HTMLImageElement?(Ft=bt.naturalWidth,Nt=bt.naturalHeight):(Ft=bt.width,Nt=bt.height);Nt={glName:Xt.l,width:Ft,height:Nt},Ft=Xt.g,Ft.canvas.width=Nt.width,Ft.canvas.height=Nt.height,Ft.activeTexture(Ft.TEXTURE0),Xt.h.bindTexture2d(Xt.l),Ft.texImage2D(Ft.TEXTURE_2D,0,Ft.RGBA,Ft.RGBA,Ft.UNSIGNED_BYTE,bt),Xt.h.bindTexture2d(0),Xt=Nt;break t;case"detections":for(Xt=v.m[nt.stream],Xt||(Xt=new xt(v.h),v.m[nt.stream]=Xt),Xt.data||(Xt.data=new Xt.g.DetectionListData),Xt.data.reset(bt.length),Nt=0;Nt<bt.length;++Nt){Ft=bt[Nt];var Mt=Xt.data,d=Mt.setBoundingBox,V=Nt,S=Ft.T,F=new k;if(ht(F,1,S.Y),ht(F,2,S.Z),ht(F,3,S.height),ht(F,4,S.width),ht(F,5,S.rotation),ht(F,6,S.W),S=Fi(F,It),d.call(Mt,V,S),Ft.O)for(Mt=0;Mt<Ft.O.length;++Mt){F=Ft.O[Mt];var T=!!F.visibility;d=Xt.data,V=d.addNormalizedLandmark,S=Nt,F=Object.assign(Object.assign({},F),{visibility:T?F.visibility:0}),T=new mn,ht(T,1,F.x),ht(T,2,F.y),ht(T,3,F.z),F.visibility&&ht(T,4,F.visibility),F=Fi(T,eo),V.call(d,S,F)}if(Ft.M)for(Mt=0;Mt<Ft.M.length;++Mt)d=Xt.data,V=d.addClassification,S=Nt,F=Ft.M[Mt],T=new ln,ht(T,2,F.X),F.index&&ht(T,1,F.index),F.label&&ht(T,3,F.label),F.displayName&&ht(T,4,F.displayName),F=Fi(T,Hn),V.call(d,S,F)}Xt=Xt.data;break t;default:Xt={}}}switch(Zt=Xt,Wt=nt.stream,nt.type){case"video":J.pushTexture2d(Object.assign(Object.assign({},Zt),{stream:Wt,timestamp:H}));break;case"detections":Qt=Zt,Qt.stream=Wt,Qt.timestamp=H,J.pushDetectionList(Qt);break;default:throw Error("Unknown input config type: '"+nt.type+"'")}}return v.i.send(J),_(wt,v.C,4);case 4:J.delete(),wt.g=0}})};function Q(g,B,v){var H,J,O,E,gt,nt,Zt,Wt,Qt,wt,bt,Xt,Ft,Nt;return ft(function(Mt){switch(Mt.g){case 1:if(!v)return Mt.return(B);for(H={},J=0,O=m(Object.keys(v)),E=O.next();!E.done;E=O.next())gt=E.value,nt=v[gt],typeof nt!="string"&&nt.type==="texture"&&B[nt.stream]!==void 0&&++J;1<J&&(g.G=!1),Zt=m(Object.keys(v)),E=Zt.next();case 2:if(E.done){Mt.g=4;break}if(Wt=E.value,Qt=v[Wt],typeof Qt=="string")return Ft=H,Nt=Wt,_(Mt,tt(g,Wt,B[Qt]),14);if(wt=B[Qt.stream],Qt.type==="detection_list"){if(wt){for(var d=wt.getRectList(),V=wt.getLandmarksList(),S=wt.getClassificationsList(),F=[],T=0;T<d.size();++T){var c=Li(d.get(T),k,q);c={T:{Y:at(c,1),Z:at(c,2),height:at(c,3),width:at(c,4),rotation:at(c,5,0),W:Ht(c,6)},O:Et(V.get(T)),M:yt(Li(S.get(T),Ki,Yn))},F.push(c)}d=F}else d=[];H[Wt]=d,Mt.g=7;break}if(Qt.type==="proto_list"){if(wt){for(d=Array(wt.size()),V=0;V<wt.size();V++)d[V]=wt.get(V);wt.delete()}else d=[];H[Wt]=d,Mt.g=7;break}if(wt===void 0){Mt.g=3;break}if(Qt.type==="float_list"){H[Wt]=wt,Mt.g=7;break}if(Qt.type==="proto"){H[Wt]=wt,Mt.g=7;break}if(Qt.type!=="texture")throw Error("Unknown output config type: '"+Qt.type+"'");return bt=g.s[Wt],bt||(bt=new kt(g.h,g.D),g.s[Wt]=bt),_(Mt,re(bt,wt,g.G),13);case 13:Xt=Mt.h,H[Wt]=Xt;case 7:Qt.transform&&H[Wt]&&(H[Wt]=Qt.transform(H[Wt])),Mt.g=3;break;case 14:Ft[Nt]=Mt.h;case 3:E=Zt.next(),Mt.g=2;break;case 4:return Mt.return(H)}})}function tt(g,B,v){var H;return ft(function(J){return typeof v=="number"||v instanceof Uint8Array||v instanceof g.h.Uint8BlobList?J.return(v):v instanceof g.h.Texture2dDataOut?(H=g.s[B],H||(H=new kt(g.h,g.D),g.s[B]=H),J.return(re(H,v,g.G))):J.return(void 0)})}function D(g,B){for(var v=B.name||"$",H=[].concat(Z(B.wants)),J=new g.h.StringList,O=m(B.wants),E=O.next();!E.done;E=O.next())J.push_back(E.value);O=g.h.PacketListener.implement({onResults:function(gt){for(var nt={},Zt=0;Zt<B.wants.length;++Zt)nt[H[Zt]]=gt.get(Zt);var Wt=g.listeners[v];Wt&&(g.C=Q(g,nt,B.outs).then(function(Qt){Qt=Wt(Qt);for(var wt=0;wt<B.wants.length;++wt){var bt=nt[H[wt]];typeof bt=="object"&&bt.hasOwnProperty&&bt.hasOwnProperty("delete")&&bt.delete()}Qt&&(g.C=Qt)}))}}),g.i.attachMultiListener(J,O),J.delete()}e.onResults=function(g,B){this.listeners[B||"$"]=g},Tt("Solution",De),Tt("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"});function ot(g){switch(g===void 0&&(g=0),g){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function mt(g){var B=this;g=g||{},this.g=new De({locateFile:g.locateFile,files:function(v){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:ot(v.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:Et},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:Et},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(v){var H,J,O;return ft(function(E){return E.g==1?(H=ot(v),J="third_party/mediapipe/modules/pose_landmark/"+H,_(E,M(B.g,H),2)):(O=E.h,B.g.overrideFile(J,O),E.return(!0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}e=mt.prototype,e.reset=function(){this.g.reset()},e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(g){this.g.onResults(g)},e.initialize=function(){var g=this;return ft(function(B){return _(B,g.g.initialize(),0)})},e.send=function(g,B){var v=this;return ft(function(H){return _(H,v.g.send(g,B),0)})},e.setOptions=function(g){this.g.setOptions(g)},Tt("Pose",mt),Tt("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Tt("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Tt("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Tt("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Tt("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Tt("VERSION","0.5.1635988162")}).call(l3);const Zs=new WeakMap,ir=new WeakMap,ls=new WeakMap,wg=Symbol("anyProducer"),h0=Promise.resolve(),Fg=Symbol("listenerAdded"),Hg=Symbol("listenerRemoved");let xg=!1,ca=!1;function wr(e){if(typeof e!="string"&&typeof e!="symbol"&&typeof e!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function zc(e){if(typeof e!="function")throw new TypeError("listener must be a function")}function Fr(e,t){const i=ir.get(e);if(!!i.has(t))return i.get(t)}function kl(e,t){const i=typeof t=="string"||typeof t=="symbol"||typeof t=="number"?t:wg,n=ls.get(e);if(!!n.has(i))return n.get(i)}function c3(e,t,i){const n=ls.get(e);if(n.has(t))for(const o of n.get(t))o.enqueue(i);if(n.has(wg)){const o=Promise.all([t,i]);for(const l of n.get(wg))l.enqueue(o)}}function b0(e,t){t=Array.isArray(t)?t:[t];let i=!1,n=()=>{},o=[];const l={enqueue(I){o.push(I),n()},finish(){i=!0,n()}};for(const I of t){let m=kl(e,I);m||(m=new Set,ls.get(e).set(I,m)),m.add(l)}return{async next(){return o?o.length===0?i?(o=void 0,this.next()):(await new Promise(I=>{n=I}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(I){o=void 0;for(const m of t){const Z=kl(e,m);Z&&(Z.delete(l),Z.size===0&&ls.get(e).delete(m))}return n(),arguments.length>0?{done:!0,value:await I}:{done:!0}},[Symbol.asyncIterator](){return this}}}function p0(e){if(e===void 0)return A0;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!A0.includes(t))throw typeof t!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${t} is not Emittery method`);return e}const Qr=e=>e===Fg||e===Hg;function Kc(e,t,i){if(Qr(t))try{xg=!0,e.emit(t,i)}finally{xg=!1}}let Ac=class iI{static mixin(t,i){return i=p0(i),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const I of i)if(n.prototype[I]!==void 0)throw new Error(`The property \`${I}\` already exists on \`target\``);function o(){return Object.defineProperty(this,t,{enumerable:!1,value:new iI}),this[t]}Object.defineProperty(n.prototype,t,{enumerable:!1,get:o});const l=I=>function(...m){return this[t][I](...m)};for(const I of i)Object.defineProperty(n.prototype,I,{enumerable:!1,value:l(I)});return n}}static get isDebugEnabled(){var i,n;if(typeof((i=globalThis.process)==null?void 0:i.env)!="object")return ca;const{env:t}=(n=globalThis.process)!=null?n:{env:{}};return t.DEBUG==="emittery"||t.DEBUG==="*"||ca}static set isDebugEnabled(t){ca=t}constructor(t={}){var i;Zs.set(this,new Set),ir.set(this,new Map),ls.set(this,new Map),ls.get(this).set(wg,new Set),this.debug=(i=t.debug)!=null?i:{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(n,o,l,I)=>{try{I=JSON.stringify(I)}catch{I=`Object with the following keys failed to stringify: ${Object.keys(I).join(",")}`}(typeof l=="symbol"||typeof l=="number")&&(l=l.toString());const m=new Date,Z=`${m.getHours()}:${m.getMinutes()}:${m.getSeconds()}.${m.getMilliseconds()}`;console.log(`[${Z}][emittery:${n}][${o}] Event Name: ${l}
	data: ${I}`)})}logIfDebugEnabled(t,i,n){(iI.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,i,n)}on(t,i){zc(i),t=Array.isArray(t)?t:[t];for(const n of t){wr(n);let o=Fr(this,n);o||(o=new Set,ir.get(this).set(n,o)),o.add(i),this.logIfDebugEnabled("subscribe",n,void 0),Qr(n)||Kc(this,Fg,{eventName:n,listener:i})}return this.off.bind(this,t,i)}off(t,i){zc(i),t=Array.isArray(t)?t:[t];for(const n of t){wr(n);const o=Fr(this,n);o&&(o.delete(i),o.size===0&&ir.get(this).delete(n)),this.logIfDebugEnabled("unsubscribe",n,void 0),Qr(n)||Kc(this,Hg,{eventName:n,listener:i})}}once(t){let i;const n=new Promise(o=>{i=this.on(t,l=>{i(),o(l)})});return n.off=i,n}events(t){t=Array.isArray(t)?t:[t];for(const i of t)wr(i);return b0(this,t)}async emit(t,i){var m;if(wr(t),Qr(t)&&!xg)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",t,i),c3(this,t,i);const n=(m=Fr(this,t))!=null?m:new Set,o=Zs.get(this),l=[...n],I=Qr(t)?[]:[...o];await h0,await Promise.all([...l.map(async Z=>{if(n.has(Z))return Z(i)}),...I.map(async Z=>{if(o.has(Z))return Z(t,i)})])}async emitSerial(t,i){var m;if(wr(t),Qr(t)&&!xg)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",t,i);const n=(m=Fr(this,t))!=null?m:new Set,o=Zs.get(this),l=[...n],I=[...o];await h0;for(const Z of l)n.has(Z)&&await Z(i);for(const Z of I)o.has(Z)&&await Z(t,i)}onAny(t){return zc(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Zs.get(this).add(t),Kc(this,Fg,{listener:t}),this.offAny.bind(this,t)}anyEvent(){return b0(this)}offAny(t){zc(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),Kc(this,Hg,{listener:t}),Zs.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(const i of t)if(this.logIfDebugEnabled("clear",i,void 0),typeof i=="string"||typeof i=="symbol"||typeof i=="number"){const n=Fr(this,i);n&&n.clear();const o=kl(this,i);if(o){for(const l of o)l.finish();o.clear()}}else{Zs.get(this).clear();for(const[n,o]of ir.get(this).entries())o.clear(),ir.get(this).delete(n);for(const[n,o]of ls.get(this).entries()){for(const l of o)l.finish();o.clear(),ls.get(this).delete(n)}}}listenerCount(t){var n,o,l,I,m,Z;t=Array.isArray(t)?t:[t];let i=0;for(const x of t){if(typeof x=="string"){i+=Zs.get(this).size+((o=(n=Fr(this,x))==null?void 0:n.size)!=null?o:0)+((I=(l=kl(this,x))==null?void 0:l.size)!=null?I:0)+((Z=(m=kl(this))==null?void 0:m.size)!=null?Z:0);continue}typeof x!="undefined"&&wr(x),i+=Zs.get(this).size;for(const L of ir.get(this).values())i+=L.size;for(const L of ls.get(this).values())i+=L.size}return i}bindMethods(t,i){if(typeof t!="object"||t===null)throw new TypeError("`target` must be an object");i=p0(i);for(const n of i){if(t[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(t,n,{enumerable:!1,value:this[n].bind(this)})}}};const A0=Object.getOwnPropertyNames(Ac.prototype).filter(e=>e!=="constructor");Object.defineProperty(Ac,"listenerAdded",{value:Fg,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Ac,"listenerRemoved",{value:Hg,writable:!1,enumerable:!0,configurable:!1});function qI(e,t){globalThis.vonage||(globalThis.vonage={}),globalThis.vonage.workerizer||(globalThis.vonage.workerizer={});let i=globalThis.vonage.workerizer;return i[e]||(i[e]=t),i[e]}const el=qI("globals",{});var Io=(e=>(e.INIT="INIT",e.FORWARD="FORWARD",e.TERMINATE="TERMINATE",e.GLOBALS_SYNC="GLOBALS_SYNC",e.EVENT="EVENT",e))(Io||{});function Oh(e){return[ImageBitmap,ReadableStream,WritableStream].some(i=>e instanceof i)}let g3=0;function Ng(e,t,i,n,o){const l=g3++;return e.postMessage({id:l,type:t,functionName:i,args:n},n.filter(m=>Oh(m))),new Promise(m=>{o==null||o.set(l,m)})}function il(e,t){const{id:i,type:n}=e,o=Array.isArray(t)?t:[t];postMessage({id:i,type:n,result:t},o.filter(l=>Oh(l)))}const Yg=qI("workerized",{});function $I(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}async function d3(){if($I())il({type:Io.GLOBALS_SYNC},el);else{const e=[];for(const t in Yg){const{worker:i,resolvers:n}=Yg[t].workerContext;i&&e.push(Ng(i,Io.GLOBALS_SYNC,"",[el],n))}await Promise.all(e)}}function sc(e,t){if(Array.isArray(t))t.splice(0,t.length);else if(typeof t=="object")for(const i in t)delete t[i];for(const i in e)Array.isArray(e[i])?(t[i]=[],sc(e[i],t[i])):typeof e[i]=="object"?(t[i]={},sc(e[i],t[i])):t[i]=e[i]}async function a3(e,t,i,n){const o=new t;if(o.addEventListener("message",async({data:I})=>{var m,Z,x,L,K,st,ut;switch(I.type){case Io.GLOBALS_SYNC:I.id?((Z=i.get((m=I.id)!=null?m:-1))==null||Z(I.result),i.delete((x=I.id)!=null?x:-1)):(sc((L=I.result)!=null?L:{},el),await d3());break;case Io.EVENT:const{result:P}=I,ct=P;if((ct==null?void 0:ct.name)==null)throw"Missing event name";n(ct.name,ct.data);break;default:(st=i.get((K=I.id)!=null?K:-1))==null||st(I.result),i.delete((ut=I.id)!=null?ut:-1)}}),!await Ng(o,Io.INIT,"",[e.workerId,el],i))throw"Failed to instantiate workerized class";return o}const fs=new WeakMap,nr=new WeakMap,cs=new WeakMap,Mg=Symbol("anyProducer"),y0=Promise.resolve(),Lg=Symbol("listenerAdded"),Jg=Symbol("listenerRemoved");let Tg=!1,ga=!1;function Hr(e){if(typeof e!="string"&&typeof e!="symbol"&&typeof e!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function Uc(e){if(typeof e!="function")throw new TypeError("listener must be a function")}function xr(e,t){const i=nr.get(e);if(!!i.has(t))return i.get(t)}function zl(e,t){const i=typeof t=="string"||typeof t=="symbol"||typeof t=="number"?t:Mg,n=cs.get(e);if(!!n.has(i))return n.get(i)}function I3(e,t,i){const n=cs.get(e);if(n.has(t))for(const o of n.get(t))o.enqueue(i);if(n.has(Mg)){const o=Promise.all([t,i]);for(const l of n.get(Mg))l.enqueue(o)}}function Z0(e,t){t=Array.isArray(t)?t:[t];let i=!1,n=()=>{},o=[];const l={enqueue(I){o.push(I),n()},finish(){i=!0,n()}};for(const I of t){let m=zl(e,I);m||(m=new Set,cs.get(e).set(I,m)),m.add(l)}return{async next(){return o?o.length===0?i?(o=void 0,this.next()):(await new Promise(I=>{n=I}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(I){o=void 0;for(const m of t){const Z=zl(e,m);Z&&(Z.delete(l),Z.size===0&&cs.get(e).delete(m))}return n(),arguments.length>0?{done:!0,value:await I}:{done:!0}},[Symbol.asyncIterator](){return this}}}function f0(e){if(e===void 0)return G0;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!G0.includes(t))throw typeof t!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${t} is not Emittery method`);return e}const Dr=e=>e===Lg||e===Jg;function Ec(e,t,i){if(Dr(t))try{Tg=!0,e.emit(t,i)}finally{Tg=!1}}class Ar{static mixin(t,i){return i=f0(i),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const I of i)if(n.prototype[I]!==void 0)throw new Error(`The property \`${I}\` already exists on \`target\``);function o(){return Object.defineProperty(this,t,{enumerable:!1,value:new Ar}),this[t]}Object.defineProperty(n.prototype,t,{enumerable:!1,get:o});const l=I=>function(...m){return this[t][I](...m)};for(const I of i)Object.defineProperty(n.prototype,I,{enumerable:!1,value:l(I)});return n}}static get isDebugEnabled(){var t,i;if(typeof((t=globalThis.process)==null?void 0:t.env)!="object")return ga;const{env:n}=(i=globalThis.process)!=null?i:{env:{}};return n.DEBUG==="emittery"||n.DEBUG==="*"||ga}static set isDebugEnabled(t){ga=t}constructor(t={}){var i;fs.set(this,new Set),nr.set(this,new Map),cs.set(this,new Map),cs.get(this).set(Mg,new Set),this.debug=(i=t.debug)!=null?i:{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(n,o,l,I)=>{try{I=JSON.stringify(I)}catch{I=`Object with the following keys failed to stringify: ${Object.keys(I).join(",")}`}(typeof l=="symbol"||typeof l=="number")&&(l=l.toString());const m=new Date,Z=`${m.getHours()}:${m.getMinutes()}:${m.getSeconds()}.${m.getMilliseconds()}`;console.log(`[${Z}][emittery:${n}][${o}] Event Name: ${l}
	data: ${I}`)})}logIfDebugEnabled(t,i,n){(Ar.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,i,n)}on(t,i){Uc(i),t=Array.isArray(t)?t:[t];for(const n of t){Hr(n);let o=xr(this,n);o||(o=new Set,nr.get(this).set(n,o)),o.add(i),this.logIfDebugEnabled("subscribe",n,void 0),Dr(n)||Ec(this,Lg,{eventName:n,listener:i})}return this.off.bind(this,t,i)}off(t,i){Uc(i),t=Array.isArray(t)?t:[t];for(const n of t){Hr(n);const o=xr(this,n);o&&(o.delete(i),o.size===0&&nr.get(this).delete(n)),this.logIfDebugEnabled("unsubscribe",n,void 0),Dr(n)||Ec(this,Jg,{eventName:n,listener:i})}}once(t){let i;const n=new Promise(o=>{i=this.on(t,l=>{i(),o(l)})});return n.off=i,n}events(t){t=Array.isArray(t)?t:[t];for(const i of t)Hr(i);return Z0(this,t)}async emit(t,i){var n;if(Hr(t),Dr(t)&&!Tg)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",t,i),I3(this,t,i);const o=(n=xr(this,t))!=null?n:new Set,l=fs.get(this),I=[...o],m=Dr(t)?[]:[...l];await y0,await Promise.all([...I.map(async Z=>{if(o.has(Z))return Z(i)}),...m.map(async Z=>{if(l.has(Z))return Z(t,i)})])}async emitSerial(t,i){var n;if(Hr(t),Dr(t)&&!Tg)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",t,i);const o=(n=xr(this,t))!=null?n:new Set,l=fs.get(this),I=[...o],m=[...l];await y0;for(const Z of I)o.has(Z)&&await Z(i);for(const Z of m)l.has(Z)&&await Z(t,i)}onAny(t){return Uc(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),fs.get(this).add(t),Ec(this,Lg,{listener:t}),this.offAny.bind(this,t)}anyEvent(){return Z0(this)}offAny(t){Uc(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),Ec(this,Jg,{listener:t}),fs.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(const i of t)if(this.logIfDebugEnabled("clear",i,void 0),typeof i=="string"||typeof i=="symbol"||typeof i=="number"){const n=xr(this,i);n&&n.clear();const o=zl(this,i);if(o){for(const l of o)l.finish();o.clear()}}else{fs.get(this).clear();for(const[n,o]of nr.get(this).entries())o.clear(),nr.get(this).delete(n);for(const[n,o]of cs.get(this).entries()){for(const l of o)l.finish();o.clear(),cs.get(this).delete(n)}}}listenerCount(t){var i,n,o,l,I,m;t=Array.isArray(t)?t:[t];let Z=0;for(const x of t){if(typeof x=="string"){Z+=fs.get(this).size+((n=(i=xr(this,x))==null?void 0:i.size)!=null?n:0)+((l=(o=zl(this,x))==null?void 0:o.size)!=null?l:0)+((m=(I=zl(this))==null?void 0:I.size)!=null?m:0);continue}typeof x!="undefined"&&Hr(x),Z+=fs.get(this).size;for(const L of nr.get(this).values())Z+=L.size;for(const L of cs.get(this).values())Z+=L.size}return Z}bindMethods(t,i){if(typeof t!="object"||t===null)throw new TypeError("`target` must be an object");i=f0(i);for(const n of i){if(t[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(t,n,{enumerable:!1,value:this[n].bind(this)})}}}const G0=Object.getOwnPropertyNames(Ar.prototype).filter(e=>e!=="constructor");Object.defineProperty(Ar,"listenerAdded",{value:Lg,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Ar,"listenerRemoved",{value:Jg,writable:!1,enumerable:!0,configurable:!1});function u3(e){return e.onAny&&e.emit}function C3(e){return e.prototype.onAny&&e.prototype.emit}let m3=0;async function h3(e,t,i){const o=C3(e)?new Ar:{},l=m3++;return Object.getOwnPropertyNames(e.prototype).forEach(I=>{o[I]=(...m)=>Ng(t,Io.FORWARD,I,m,i)}),o.terminate=async(...I)=>{const m=await Ng(t,Io.TERMINATE,"",I,i);return delete Yg[l],t.terminate(),o.workerContext.worker=void 0,m},o.workerContext={id:l,worker:t,resolvers:i},Yg[l]=o,o}async function b3(e,t){const i=new Map;let n;const o=await a3(e,t,i,(l,I)=>{n!=null&&n.emit&&(n==null||n.emit(l,I))});return n=await h3(e,o,i),n}async function p3(e,t){const{functionName:i,args:n}=e;if(!t.instance)throw"instance not initialized";if(!i)throw"missing function name to call";if(!t.instance[i])throw`undefined function [${i}] in class ${t.instance.constructor.workerId}`;il(e,await t.instance[i](...n!=null?n:[]))}const jh=qI("registeredWorkers",{});function A3(e,t){t.workerId=e,$I()&&(jh[t.workerId]=t)}function y3(e,t){if(!e.args)throw"Missing className while initializing worker";const[i,n]=e.args,o=jh[i];if(o)t.instance=new o(e.args.slice(1));else throw`unknown worker class ${i}`;sc(n,el),u3(t.instance)&&t.instance.onAny((l,I)=>{il({type:Io.EVENT},{name:l,data:I})}),il(e,typeof t.instance!==void 0)}async function Z3(e,t){const{args:i}=e;if(!t.instance)throw"instance not initialized";let n;t.instance.terminate&&(n=await t.instance.terminate(...i!=null?i:[])),il(e,n)}function f3(e){if(!e.args)throw"Missing globals while syncing";sc(e.args[0],el),il(e,{})}function G3(){const e={};onmessage=async t=>{const i=t.data;switch(i.type){case Io.INIT:y3(i,e);break;case Io.FORWARD:p3(i,e);break;case Io.TERMINATE:Z3(i,e);break;case Io.GLOBALS_SYNC:f3(i);break}}}$I()&&G3();class V0{static async createVideoReadable(t){return new Promise((i,n)=>{const o=document.createElement("video");let l=new AbortController,I=new AbortController;o.addEventListener("canplay",()=>{l.abort(),o.muted=!0,o.loop=!0,o.play().then(()=>{try{const m=o.captureStream(),Z=new MediaStreamTrackProcessor(m.getVideoTracks()[0]);i(Z.readable)}catch(m){n(m)}})},{once:!0,signal:I.signal}),o.addEventListener("error",m=>{I.abort(),n("loading error:"+m)},{once:!0,signal:l.signal}),o.crossOrigin="anonymous",o.src=t})}static async createImageCanvas(t){const n=await(await fetch(t)).blob();return await createImageBitmap(n)}}var V3=Object.defineProperty,W3=(e,t,i)=>t in e?V3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,B3=(e,t,i)=>(W3(e,typeof t!="symbol"?t+"":t,i),i);const X3="hlg.tokbox.com/prod/logging/vcp_webrtc",R3="https://",v3=1e4;let Qc;const S3=new Uint8Array(16);function w3(){if(!Qc&&(Qc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qc(S3)}const Ln=[];for(let e=0;e<256;++e)Ln.push((e+256).toString(16).slice(1));function F3(e,t=0){return(Ln[e[t+0]]+Ln[e[t+1]]+Ln[e[t+2]]+Ln[e[t+3]]+"-"+Ln[e[t+4]]+Ln[e[t+5]]+"-"+Ln[e[t+6]]+Ln[e[t+7]]+"-"+Ln[e[t+8]]+Ln[e[t+9]]+"-"+Ln[e[t+10]]+Ln[e[t+11]]+Ln[e[t+12]]+Ln[e[t+13]]+Ln[e[t+14]]+Ln[e[t+15]]).toLowerCase()}const H3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),W0={randomUUID:H3};function x3(e,t,i){if(W0.randomUUID&&!t&&!e)return W0.randomUUID();e=e||{};const n=e.random||(e.rng||w3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){i=i||0;for(let o=0;o<16;++o)t[i+o]=n[o];return t}return F3(n)}function tu(e,t){globalThis.vonage||(globalThis.vonage={}),globalThis.vonage.workerizer||(globalThis.vonage.workerizer={});let i=globalThis.vonage.workerizer;return i[e]||(i[e]=t),i[e]}const Fs=tu("globals",{});var lr=(e=>(e.INIT="INIT",e.FORWARD="FORWARD",e.TERMINATE="TERMINATE",e.GLOBALS_SYNC="GLOBALS_SYNC",e))(lr||{});function _h(e){return[ImageBitmap,ReadableStream,WritableStream].some(t=>e instanceof t)}let N3=0;function Y3(e,t,i,n,o){const l=N3++;return e.postMessage({id:l,type:t,functionName:i,args:n},n.filter(I=>_h(I))),new Promise(I=>{o==null||o.set(l,I)})}function yc(e,t){const{id:i,type:n}=e,o=Array.isArray(t)?t:[t];postMessage({id:i,type:n,result:t},o.filter(l=>_h(l)))}const B0=tu("workerized",{});function Ph(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}async function M3(){if(Ph())yc({type:lr.GLOBALS_SYNC},Fs);else{const e=[];for(const t in B0){const{worker:i,resolvers:n}=B0[t].workerContext;i&&e.push(Y3(i,lr.GLOBALS_SYNC,"",[Fs],n))}await Promise.all(e)}}function kg(e,t){if(Array.isArray(t))t.splice(0,t.length);else if(typeof t=="object")for(const i in t)delete t[i];for(const i in e)Array.isArray(e[i])?(t[i]=[],kg(e[i],t[i])):typeof e[i]=="object"?(t[i]={},kg(e[i],t[i])):t[i]=e[i]}async function L3(e,t){const{functionName:i,args:n}=e;if(!t.instance)throw"instance not initialized";if(!i)throw"missing function name to call";if(!t.instance[i])throw`undefined function [${i}] in class ${t.instance.constructor.workerId}`;yc(e,await t.instance[i](...n!=null?n:[]))}const J3=tu("registeredWorkers",{});function T3(e,t){if(!e.args)throw"Missing className while initializing worker";const[i,n]=e.args,o=J3[i];if(o)t.instance=new o(e.args.slice(1));else throw`unknown worker class ${i}`;kg(n,Fs),yc(e,typeof t.instance!==void 0)}async function k3(e,t){const{args:i}=e;if(!t.instance)throw"instance not initialized";let n;t.instance.terminate&&(n=await t.instance.terminate(...i!=null?i:[])),yc(e,n)}function z3(e){if(!e.args)throw"Missing globals while syncing";kg(e.args[0],Fs),yc(e,{})}function K3(){const e={};onmessage=async t=>{const i=t.data;switch(i.type){case lr.INIT:T3(i,e);break;case lr.FORWARD:L3(i,e);break;case lr.TERMINATE:k3(i,e);break;case lr.GLOBALS_SYNC:z3(i);break}}}Ph()&&K3();function U3(e,t){return Fs[e]||(Fs[e]=t),[()=>Fs[e],async i=>{Fs[e]=i,await M3()}]}function E3(e,t){return U3(e,t)}const[Q3,HX]=E3("metadata");function da(){return Q3()}let D3=class{constructor(t){B3(this,"uuid",x3()),this.config=t}async send(t){var i,n,o;const{appId:l,sourceType:I}=(i=da())!=null?i:{};if(!l||!I)return"metadata missing";const m=new AbortController,Z=setTimeout(()=>m.abort(),v3);return await((o=(n=this.config)==null?void 0:n.fetch)!=null?o:fetch)(this.getUrl(),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(this.buildReport(t)),signal:m.signal}),clearTimeout(Z),"success"}getUrl(){var t;let i=(t=da().proxyUrl)!=null?t:R3;return i+=(i.at(-1)==="/"?"":"/")+X3,i}getHeaders(){return{"Content-Type":"application/json"}}buildReport(t){const i=da();return{guid:this.uuid,...t,applicationId:i.appId,timestamp:Date.now(),proxyUrl:i.proxyUrl,source:i.sourceType}}};const O3="5.2.0-alpha.1";class eu{constructor(){const t=new OffscreenCanvas(0,0),i=t.getContext("2d");if(!i)throw"Fail to retrieve webgl2 context";this.canvas=t,this.context=i}setFlickeringOptions(t){}enablePostProcessing(){}disablePostProcessing(){}async profileWebgl(t){return[]}async render(t,i){return this.canvas}resizeCanvas(t){const{width:i,height:n}=t;this.canvas.width=i,this.canvas.height=n}renderSilhouette(t,i,n="none"){const{width:o,height:l}=t;this.context.save(),this.context.drawImage(i,0,0,i.width,i.height,0,0,o,l),this.context.filter="blur(5px)",this.context.globalCompositeOperation="source-in",this.context.drawImage(i,0,0,i.width,i.height,0,0,o,l),this.context.globalCompositeOperation="source-in",this.context.filter=n,this.context.drawImage(t,0,0,o,l,0,0,this.canvas.width,this.canvas.height),this.context.restore()}}class j3 extends eu{constructor(t){super(),this.radius=t}async render(t,i){return super.resizeCanvas(t),this.renderSilhouette(t,i),this.context.save(),this.context.filter=`blur(${this.radius}px)`,this.context.globalCompositeOperation="destination-over",this.context.drawImage(t,0,0,t.width,t.height),this.context.restore(),super.render(t,i)}}class _3 extends eu{constructor(t){super(),this.radius=t}async render(t,i){return super.resizeCanvas(t),this.renderSilhouette(t,i,`blur(${this.radius}px)`),this.context.save(),this.context.filter="none",this.context.globalCompositeOperation="destination-over",this.context.drawImage(t,0,0,t.width,t.height),this.context.restore(),super.render(t,i)}}class P3 extends eu{setBackgroundImage(t){this.backgroundImage=t}async render(t,i){return super.resizeCanvas(t),this.renderSilhouette(t,i),this.backgroundImage&&(this.context.save(),this.context.filter="none",this.context.globalCompositeOperation="destination-over",this.context.drawImage(this.backgroundImage,0,0,this.backgroundImage.width,this.backgroundImage.height,0,0,t.width,t.height),this.context.restore()),super.render(t,i)}}/* @license twgl.js 5.5.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const iu=5120,rc=5121,nu=5122,ou=5123,su=5124,ru=5125,lu=5126,q3=32819,$3=32820,tf=33635,ef=5131,nf=33640,of=35899,sf=35902,rf=36269,lf=34042,qh={};{const e=qh;e[iu]=Int8Array,e[rc]=Uint8Array,e[nu]=Int16Array,e[ou]=Uint16Array,e[su]=Int32Array,e[ru]=Uint32Array,e[lu]=Float32Array,e[q3]=Uint16Array,e[$3]=Uint16Array,e[tf]=Uint16Array,e[ef]=Uint16Array,e[nf]=Uint32Array,e[of]=Uint32Array,e[sf]=Uint32Array,e[rf]=Uint32Array,e[lf]=Uint32Array}function cu(e){if(e instanceof Int8Array)return iu;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return rc;if(e instanceof Int16Array)return nu;if(e instanceof Uint16Array)return ou;if(e instanceof Int32Array)return su;if(e instanceof Uint32Array)return ru;if(e instanceof Float32Array)return lu;throw new Error("unsupported typed array type")}function $h(e){if(e===Int8Array)return iu;if(e===Uint8Array||e===Uint8ClampedArray)return rc;if(e===Int16Array)return nu;if(e===Uint16Array)return ou;if(e===Int32Array)return su;if(e===Uint32Array)return ru;if(e===Float32Array)return lu;throw new Error("unsupported typed array type")}function tb(e){const t=qh[e];if(!t)throw new Error("unknown gl type");return t}const zg=typeof SharedArrayBuffer!="undefined"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function eb(...e){console.error(...e)}const X0=new Map;function hd(e,t){if(!e||typeof e!="object")return!1;let i=X0.get(t);i||(i=new WeakMap,X0.set(t,i));let n=i.get(e);if(n===void 0){const o=Object.prototype.toString.call(e);n=o.substring(8,o.length-1)===t,i.set(e,n)}return n}function cf(e,t){return typeof WebGLBuffer!="undefined"&&hd(t,"WebGLBuffer")}function gf(e,t){return typeof WebGLRenderbuffer!="undefined"&&hd(t,"WebGLRenderbuffer")}function gu(e,t){return typeof WebGLTexture!="undefined"&&hd(t,"WebGLTexture")}function df(e,t){return typeof WebGLSampler!="undefined"&&hd(t,"WebGLSampler")}const ib=35044,dr=34962,af=34963,If=34660,uf=5120,Cf=5121,mf=5122,hf=5123,bf=5124,pf=5125,nb=5126,ob={attribPrefix:""};function Af(e,t,i,n,o){e.bindBuffer(t,i),e.bufferData(t,n,o||ib)}function sb(e,t,i,n){if(cf(e,t))return t;i=i||dr;const o=e.createBuffer();return Af(e,i,o,t,n),o}function rb(e){return e==="indices"}function yf(e){return e===Int8Array||e===Uint8Array}function Zf(e){return e.length?e:e.data}const ff=/coord|texture/i,Gf=/color|colour/i;function Vf(e,t){let i;if(ff.test(e)?i=2:Gf.test(e)?i=4:i=3,t%i>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${i} but ${t} values is not evenly divisible by ${i}. You should specify it.`);return i}function Wf(e,t,i){return e.numComponents||e.size||Vf(t,i||Zf(e).length)}function lb(e,t){if(zg(e))return e;if(zg(e.data))return e.data;Array.isArray(e)&&(e={data:e});let i=e.type?du(e.type):void 0;return i||(rb(t)?i=Uint16Array:i=Float32Array),new i(e.data)}function Bf(e){return typeof e=="number"?e:e?$h(e):nb}function du(e){return typeof e=="number"?tb(e):e||Float32Array}function Xf(e,t){return{buffer:t.buffer,numValues:2*3*4,type:Bf(t.type),arrayType:du(t.type)}}function Rf(e,t){const i=t.data||t,n=du(t.type),o=i*n.BYTES_PER_ELEMENT,l=e.createBuffer();return e.bindBuffer(dr,l),e.bufferData(dr,o,t.drawType||ib),{buffer:l,numValues:i,type:$h(n),arrayType:n}}function vf(e,t,i){const n=lb(t,i);return{arrayType:n.constructor,buffer:sb(e,n,void 0,t.drawType),type:cu(n),numValues:0}}function Sf(e,t){const i={};return Object.keys(t).forEach(function(n){if(!rb(n)){const o=t[n],l=o.attrib||o.name||o.attribName||ob.attribPrefix+n;if(o.value){if(!Array.isArray(o.value)&&!zg(o.value))throw new Error("array.value is not array or typedarray");i[l]={value:o.value}}else{let I;o.buffer&&o.buffer instanceof WebGLBuffer?I=Xf:typeof o=="number"||typeof o.data=="number"?I=Rf:I=vf;const{buffer:m,type:Z,numValues:x,arrayType:L}=I(e,o,n),K=o.normalize!==void 0?o.normalize:yf(L),st=Wf(o,n,x);i[l]={buffer:m,numComponents:st,type:Z,normalize:K,stride:o.stride||0,offset:o.offset||0,divisor:o.divisor===void 0?void 0:o.divisor,drawType:o.drawType}}}}),e.bindBuffer(dr,null),i}function wf(e,t){return t===uf||t===Cf?1:t===mf||t===hf?2:t===bf||t===pf||t===nb?4:0}const aa=["position","positions","a_position"];function Ff(e,t){let i,n;for(n=0;n<aa.length&&(i=aa[n],!(i in t||(i=ob.attribPrefix+i,i in t)));++n);n===aa.length&&(i=Object.keys(t)[0]);const o=t[i];if(!o.buffer)return 1;e.bindBuffer(dr,o.buffer);const l=e.getBufferParameter(dr,If);e.bindBuffer(dr,null);const I=wf(e,o.type),m=l/I,Z=o.numComponents||o.size,x=m/Z;if(x%1!==0)throw new Error(`numComponents ${Z} not correct for length ${length}`);return x}function Hf(e,t,i){const n=Sf(e,t),o=Object.assign({},i||{});o.attribs=Object.assign({},i?i.attribs:{},n);const l=t.indices;if(l){const I=lb(l,"indices");o.indices=sb(e,I,af),o.numElements=I.length,o.elementType=cu(I)}else o.numElements||(o.numElements=Ff(e,o.attribs));return o}function Zc(e){return!!e.texStorage2D}const cb=function(){const e={},t={};function i(n){const o=n.constructor.name;if(!e[o]){for(const l in n)if(typeof n[l]=="number"){const I=t[n[l]];t[n[l]]=I?`${I} | ${l}`:l}e[o]=!0}}return function(o,l){return i(o),t[l]||(typeof l=="number"?`0x${l.toString(16)}`:l)}}(),Ks={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},lc=zg,gb=function(){let e;return function(){return e=e||(typeof document!="undefined"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),R0=6406,To=6407,tn=6408,v0=6409,S0=6410,Xl=6402,w0=34041,Kg=33071,xf=9728,Nf=9729,Us=3553,Ys=34067,yr=32879,Zr=35866,au=34069,Yf=34070,Mf=34071,Lf=34072,Jf=34073,Tf=34074,nI=10241,oI=10240,Ug=10242,Eg=10243,F0=32882,kf=33082,zf=33083,Kf=33084,Uf=33085,Ef=34892,Qf=34893,Iu=3317,db=3314,ab=32878,Ib=3316,ub=3315,Cb=32877,Df=37443,Of=37441,jf=37440,_f=33321,Pf=36756,qf=33325,$f=33326,tG=33330,eG=33329,iG=33338,nG=33337,oG=33340,sG=33339,rG=33323,lG=36757,cG=33327,gG=33328,dG=33336,aG=33335,IG=33332,uG=33331,CG=33334,mG=33333,hG=32849,bG=35905,pG=36194,AG=36758,yG=35898,ZG=35901,fG=34843,GG=34837,VG=36221,WG=36239,BG=36215,XG=36233,RG=36209,vG=36227,SG=32856,wG=35907,FG=36759,HG=32855,xG=32854,NG=32857,YG=34842,MG=34836,LG=36220,JG=36238,TG=36975,kG=36214,zG=36232,KG=36226,UG=36208,EG=33189,QG=33190,DG=36012,OG=36013,jG=35056,Gs=5120,Ei=5121,Dc=5122,Nr=5123,Oc=5124,qs=5125,kn=5126,H0=32819,x0=32820,N0=33635,vo=5131,Rl=36193,Ia=33640,_G=35899,PG=35902,qG=36269,$G=34042,jc=33319,Yr=33320,_c=6403,Mr=36244,Lr=36248,$s=36249;let ua;function bd(e){if(!ua){const t={};t[R0]={textureFormat:R0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Ei,vo,Rl,kn]},t[v0]={textureFormat:v0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Ei,vo,Rl,kn]},t[S0]={textureFormat:S0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Ei,vo,Rl,kn]},t[To]={textureFormat:To,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Ei,vo,Rl,kn,N0]},t[tn]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Ei,vo,Rl,kn,H0,x0]},t[Xl]={textureFormat:Xl,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[qs,Nr]},t[_f]={textureFormat:_c,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Ei]},t[Pf]={textureFormat:_c,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Gs]},t[qf]={textureFormat:_c,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[kn,vo]},t[$f]={textureFormat:_c,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[kn]},t[tG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Ei]},t[eG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Gs]},t[IG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Nr]},t[uG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Dc]},t[CG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[qs]},t[mG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Oc]},t[rG]={textureFormat:jc,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Ei]},t[lG]={textureFormat:jc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Gs]},t[cG]={textureFormat:jc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[kn,vo]},t[gG]={textureFormat:jc,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[kn]},t[dG]={textureFormat:Yr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ei]},t[aG]={textureFormat:Yr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Gs]},t[iG]={textureFormat:Yr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Nr]},t[nG]={textureFormat:Yr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Dc]},t[oG]={textureFormat:Yr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[qs]},t[sG]={textureFormat:Yr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Oc]},t[hG]={textureFormat:To,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Ei]},t[bG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Ei]},t[pG]={textureFormat:To,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Ei,N0]},t[AG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Gs]},t[yG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[kn,vo,_G]},t[ZG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[kn,vo,PG]},t[fG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[kn,vo]},t[GG]={textureFormat:To,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[kn]},t[VG]={textureFormat:Lr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Ei]},t[WG]={textureFormat:Lr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Gs]},t[BG]={textureFormat:Lr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Nr]},t[XG]={textureFormat:Lr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Dc]},t[RG]={textureFormat:Lr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[qs]},t[vG]={textureFormat:Lr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Oc]},t[SG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ei]},t[wG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ei]},t[FG]={textureFormat:tn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Gs]},t[HG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Ei,x0,Ia]},t[xG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Ei,H0]},t[NG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ia]},t[YG]={textureFormat:tn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[kn,vo]},t[MG]={textureFormat:tn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[kn]},t[LG]={textureFormat:$s,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ei]},t[JG]={textureFormat:$s,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Gs]},t[TG]={textureFormat:$s,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ia]},t[kG]={textureFormat:$s,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Nr]},t[zG]={textureFormat:$s,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Dc]},t[KG]={textureFormat:$s,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Oc]},t[UG]={textureFormat:$s,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[qs]},t[EG]={textureFormat:Xl,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Nr,qs]},t[QG]={textureFormat:Xl,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[qs]},t[DG]={textureFormat:Xl,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kn]},t[jG]={textureFormat:w0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[$G]},t[OG]={textureFormat:w0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[qG]},Object.keys(t).forEach(function(i){const n=t[i];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(o,l){const I=n.type[l];n.bytesPerElementMap[I]=o})}),ua=t}return ua[e]}function tV(e,t){const i=bd(e);if(!i)throw"unknown internal format";const n=i.bytesPerElementMap[t];if(n===void 0)throw"unknown internal format";return n}function fc(e){const t=bd(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function Y0(e){return(e&e-1)===0}function eV(e,t,i,n){if(!Zc(e))return Y0(t)&&Y0(i);const o=bd(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function iV(e){const t=bd(e);if(!t)throw"unknown internal format";return t.textureFilterable}function nV(e,t,i){return lc(t)?cu(t):i||Ei}function Pc(e,t,i,n,o){if(o%1!==0)throw"can't guess dimensions";if(!i&&!n){const l=Math.sqrt(o/(t===Ys?6:1));l%1===0?(i=l,n=l):(i=o,n=1)}else if(n){if(!i&&(i=o/n,i%1))throw"can't guess dimensions"}else if(n=o/i,n%1)throw"can't guess dimensions";return{width:i,height:n}}function nl(e,t){t.colorspaceConversion!==void 0&&e.pixelStorei(Df,t.colorspaceConversion),t.premultiplyAlpha!==void 0&&e.pixelStorei(Of,t.premultiplyAlpha),t.flipY!==void 0&&e.pixelStorei(jf,t.flipY)}function mb(e){e.pixelStorei(Iu,4),Zc(e)&&(e.pixelStorei(db,0),e.pixelStorei(ab,0),e.pixelStorei(Ib,0),e.pixelStorei(ub,0),e.pixelStorei(Cb,0))}function oV(e,t,i,n){n.minMag&&(i.call(e,t,nI,n.minMag),i.call(e,t,oI,n.minMag)),n.min&&i.call(e,t,nI,n.min),n.mag&&i.call(e,t,oI,n.mag),n.wrap&&(i.call(e,t,Ug,n.wrap),i.call(e,t,Eg,n.wrap),(t===yr||df(e,t))&&i.call(e,t,F0,n.wrap)),n.wrapR&&i.call(e,t,F0,n.wrapR),n.wrapS&&i.call(e,t,Ug,n.wrapS),n.wrapT&&i.call(e,t,Eg,n.wrapT),n.minLod!==void 0&&i.call(e,t,kf,n.minLod),n.maxLod!==void 0&&i.call(e,t,zf,n.maxLod),n.baseLevel!==void 0&&i.call(e,t,Kf,n.baseLevel),n.maxLevel!==void 0&&i.call(e,t,Uf,n.maxLevel),n.compareFunc!==void 0&&i.call(e,t,Qf,n.compareFunc),n.compareMode!==void 0&&i.call(e,t,Ef,n.compareMode)}function hb(e,t,i){const n=i.target||Us;e.bindTexture(n,t),oV(e,n,e.texParameteri,i)}function sV(e){return e=e||Ks.textureColor,lc(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function sI(e,t,i,n,o,l){i=i||Ks.textureOptions,l=l||tn;const I=i.target||Us;if(n=n||i.width,o=o||i.height,e.bindTexture(I,t),eV(e,n,o,l))e.generateMipmap(I);else{const m=iV(l)?Nf:xf;e.texParameteri(I,nI,m),e.texParameteri(I,oI,m),e.texParameteri(I,Ug,Kg),e.texParameteri(I,Eg,Kg)}}function cc(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function rI(e,t){return t=t||{},t.cubeFaceOrder||[au,Yf,Mf,Lf,Jf,Tf]}function lI(e,t){const n=rI(e,t).map(function(o,l){return{face:o,ndx:l}});return n.sort(function(o,l){return o.face-l.face}),n}function bb(e,t,i,n){n=n||Ks.textureOptions;const o=n.target||Us,l=n.level||0;let I=i.width,m=i.height;const Z=n.internalFormat||n.format||tn,x=fc(Z),L=n.format||x.format,K=n.type||x.type;if(nl(e,n),e.bindTexture(o,t),o===Ys){const st=i.width,ut=i.height;let P,ct;if(st/6===ut)P=ut,ct=[0,0,1,0,2,0,3,0,4,0,5,0];else if(ut/6===st)P=st,ct=[0,0,0,1,0,2,0,3,0,4,0,5];else if(st/3===ut/2)P=st/3,ct=[0,0,1,0,2,0,0,1,1,1,2,1];else if(st/2===ut/3)P=st/2,ct=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(i.src?i.src:i.nodeName);const Rt=gb();Rt?(Rt.canvas.width=P,Rt.canvas.height=P,I=P,m=P,lI(e,n).forEach(function(Bt){const Yt=ct[Bt.ndx*2+0]*P,_=ct[Bt.ndx*2+1]*P;Rt.drawImage(i,Yt,_,P,P,0,0,P,P),e.texImage2D(Bt.face,l,Z,L,K,Rt.canvas)}),Rt.canvas.width=1,Rt.canvas.height=1):typeof createImageBitmap!="undefined"&&(I=P,m=P,lI(e,n).forEach(function(Bt){const Yt=ct[Bt.ndx*2+0]*P,_=ct[Bt.ndx*2+1]*P;e.texImage2D(Bt.face,l,Z,P,P,0,L,K,null),createImageBitmap(i,Yt,_,P,P,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(qe){nl(e,n),e.bindTexture(o,t),e.texImage2D(Bt.face,l,Z,L,K,qe),cc(n)&&sI(e,t,n,I,m,Z)})}))}else if(o===yr||o===Zr){const st=Math.min(i.width,i.height),ut=Math.max(i.width,i.height),P=ut/st;if(P%1!==0)throw"can not compute 3D dimensions of element";const ct=i.width===ut?1:0,Rt=i.height===ut?1:0;e.pixelStorei(Iu,1),e.pixelStorei(db,i.width),e.pixelStorei(ab,0),e.pixelStorei(Cb,0),e.texImage3D(o,l,Z,st,st,st,0,L,K,null);for(let Bt=0;Bt<P;++Bt){const Yt=Bt*st*ct,_=Bt*st*Rt;e.pixelStorei(Ib,Yt),e.pixelStorei(ub,_),e.texSubImage3D(o,l,0,0,Bt,st,st,1,L,K,i)}mb(e)}else e.texImage2D(o,l,Z,L,K,i);cc(n)&&sI(e,t,n,I,m,Z),hb(e,t,n)}function Gc(){}function rV(e){if(typeof document!="undefined"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function lV(e,t){return t===void 0&&!rV(e)?"anonymous":t}function cV(e,t,i){i=i||Gc;let n;if(t=t!==void 0?t:Ks.crossOrigin,t=lV(e,t),typeof Image!="undefined"){n=new Image,t!==void 0&&(n.crossOrigin=t);const o=function(){n.removeEventListener("error",l),n.removeEventListener("load",I),n=null},l=function(){const Z="couldn't load image: "+e;eb(Z),i(Z,n),o()},I=function(){i(null,n),o()};return n.addEventListener("error",l),n.addEventListener("load",I),n.src=e,n}else if(typeof ImageBitmap!="undefined"){let o,l;const I=function(){i(o,l)},m={};t&&(m.mode="cors"),fetch(e,m).then(function(Z){if(!Z.ok)throw Z;return Z.blob()}).then(function(Z){return createImageBitmap(Z,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(Z){l=Z,setTimeout(I)}).catch(function(Z){o=Z,setTimeout(I)}),n=null}return n}function pb(e){return typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap||typeof ImageData!="undefined"&&e instanceof ImageData||typeof HTMLElement!="undefined"&&e instanceof HTMLElement}function uu(e,t,i){return pb(e)?(setTimeout(function(){i(null,e)}),e):cV(e,t,i)}function Cu(e,t,i){i=i||Ks.textureOptions;const n=i.target||Us;if(e.bindTexture(n,t),i.color===!1)return;const o=sV(i.color);if(n===Ys)for(let l=0;l<6;++l)e.texImage2D(au+l,0,tn,1,1,0,tn,Ei,o);else n===yr||n===Zr?e.texImage3D(n,0,tn,1,1,1,0,tn,Ei,o):e.texImage2D(n,0,tn,1,1,0,tn,Ei,o)}function gV(e,t,i,n){return n=n||Gc,i=i||Ks.textureOptions,Cu(e,t,i),i=Object.assign({},i),uu(i.src,i.crossOrigin,function(l,I){l?n(l,t,I):(bb(e,t,I,i),n(null,t,I))})}function dV(e,t,i,n){n=n||Gc;const o=i.src;if(o.length!==6)throw"there must be 6 urls for a cubemap";const l=i.level||0,I=i.internalFormat||i.format||tn,m=fc(I),Z=i.format||m.format,x=i.type||Ei,L=i.target||Us;if(L!==Ys)throw"target must be TEXTURE_CUBE_MAP";Cu(e,t,i),i=Object.assign({},i);let K=6;const st=[],ut=rI(e,i);let P;function ct(Rt){return function(Bt,Yt){--K,Bt?st.push(Bt):Yt.width!==Yt.height?st.push("cubemap face img is not a square: "+Yt.src):(nl(e,i),e.bindTexture(L,t),K===5?rI().forEach(function(_){e.texImage2D(_,l,I,Z,x,Yt)}):e.texImage2D(Rt,l,I,Z,x,Yt),cc(i)&&e.generateMipmap(L)),K===0&&n(st.length?st:void 0,t,P)}}P=o.map(function(Rt,Bt){return uu(Rt,i.crossOrigin,ct(ut[Bt]))})}function aV(e,t,i,n){n=n||Gc;const o=i.src,l=i.internalFormat||i.format||tn,I=fc(l),m=i.format||I.format,Z=i.type||Ei,x=i.target||Zr;if(x!==yr&&x!==Zr)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Cu(e,t,i),i=Object.assign({},i);let L=o.length;const K=[];let st;const ut=i.level||0;let P=i.width,ct=i.height;const Rt=o.length;let Bt=!0;function Yt(_){return function(qe,ni){if(--L,qe)K.push(qe);else{if(nl(e,i),e.bindTexture(x,t),Bt){Bt=!1,P=i.width||ni.width,ct=i.height||ni.height,e.texImage3D(x,ut,l,P,ct,Rt,0,m,Z,null);for(let we=0;we<Rt;++we)e.texSubImage3D(x,ut,0,0,we,P,ct,1,m,Z,ni)}else{let we=ni,qt;(ni.width!==P||ni.height!==ct)&&(qt=gb(),we=qt.canvas,qt.canvas.width=P,qt.canvas.height=ct,qt.drawImage(ni,0,0,P,ct)),e.texSubImage3D(x,ut,0,0,_,P,ct,1,m,Z,we),qt&&we===qt.canvas&&(qt.canvas.width=0,qt.canvas.height=0)}cc(i)&&e.generateMipmap(x)}L===0&&n(K.length?K:void 0,t,st)}}st=o.map(function(_,qe){return uu(_,i.crossOrigin,Yt(qe))})}function IV(e,t,i,n){n=n||Ks.textureOptions;const o=n.target||Us;e.bindTexture(o,t);let l=n.width,I=n.height,m=n.depth;const Z=n.level||0,x=n.internalFormat||n.format||tn,L=fc(x),K=n.format||L.format,st=n.type||nV(e,i,L.type);if(lc(i))i instanceof Uint8ClampedArray&&(i=new Uint8Array(i.buffer));else{const Rt=tb(st);i=new Rt(i)}const ut=tV(x,st),P=i.byteLength/ut;if(P%1)throw"length wrong size for format: "+cb(e,K);let ct;if(o===yr||o===Zr)if(!l&&!I&&!m){const Rt=Math.cbrt(P);if(Rt%1!==0)throw"can't guess cube size of array of numElements: "+P;l=Rt,I=Rt,m=Rt}else l&&(!I||!m)?(ct=Pc(e,o,I,m,P/l),I=ct.width,m=ct.height):I&&(!l||!m)?(ct=Pc(e,o,l,m,P/I),l=ct.width,m=ct.height):(ct=Pc(e,o,l,I,P/m),l=ct.width,I=ct.height);else ct=Pc(e,o,l,I,P),l=ct.width,I=ct.height;if(mb(e),e.pixelStorei(Iu,n.unpackAlignment||1),nl(e,n),o===Ys){const Rt=ut/i.BYTES_PER_ELEMENT,Bt=P/6*Rt;lI(e,n).forEach(Yt=>{const _=Bt*Yt.ndx,qe=i.subarray(_,_+Bt);e.texImage2D(Yt.face,Z,x,l,I,0,K,st,qe)})}else o===yr||o===Zr?e.texImage3D(o,Z,x,l,I,m,0,K,st,i):e.texImage2D(o,Z,x,l,I,0,K,st,i);return{width:l,height:I,depth:m,type:st}}function uV(e,t,i){const n=i.target||Us;e.bindTexture(n,t);const o=i.level||0,l=i.internalFormat||i.format||tn,I=fc(l),m=i.format||I.format,Z=i.type||I.type;if(nl(e,i),n===Ys)for(let x=0;x<6;++x)e.texImage2D(au+x,o,l,i.width,i.height,0,m,Z,null);else n===yr||n===Zr?e.texImage3D(n,o,l,i.width,i.height,i.depth,0,m,Z,null):e.texImage2D(n,o,l,i.width,i.height,0,m,Z,null)}function Ab(e,t,i){i=i||Gc,t=t||Ks.textureOptions;const n=e.createTexture(),o=t.target||Us;let l=t.width||1,I=t.height||1;const m=t.internalFormat||tn;e.bindTexture(o,n),o===Ys&&(e.texParameteri(o,Ug,Kg),e.texParameteri(o,Eg,Kg));let Z=t.src;if(Z)if(typeof Z=="function"&&(Z=Z(e,t)),typeof Z=="string")gV(e,n,t,i);else if(lc(Z)||Array.isArray(Z)&&(typeof Z[0]=="number"||Array.isArray(Z[0])||lc(Z[0]))){const x=IV(e,n,Z,t);l=x.width,I=x.height}else Array.isArray(Z)&&(typeof Z[0]=="string"||pb(Z[0]))?o===Ys?dV(e,n,t,i):aV(e,n,t,i):(bb(e,n,Z,t),l=Z.width,I=Z.height);else uV(e,n,t);return cc(t)&&sI(e,n,t,l,I,m),hb(e,n,t),n}const mu=eb;function yb(e){return typeof document!="undefined"&&document.getElementById?document.getElementById(e):null}const Qg=33984,pd=34962,CV=34963,mV=35713,hV=35714,bV=35632,pV=35633,AV=35981,Zb=35718,yV=35721,ZV=35971,fV=35382,GV=35396,VV=35398,WV=35392,BV=35395,Ad=5126,fb=35664,Gb=35665,Vb=35666,hu=5124,Wb=35667,Bb=35668,Xb=35669,Rb=35670,vb=35671,Sb=35672,wb=35673,Fb=35674,Hb=35675,xb=35676,XV=35678,RV=35680,vV=35679,SV=35682,wV=35685,FV=35686,HV=35687,xV=35688,NV=35689,YV=35690,MV=36289,LV=36292,JV=36293,bu=5125,Nb=36294,Yb=36295,Mb=36296,TV=36298,kV=36299,zV=36300,KV=36303,UV=36306,EV=36307,QV=36308,DV=36311,yd=3553,Zd=34067,pu=32879,fd=35866,Be={};function Lb(e,t){return Be[t].bindPoint}function OV(e,t){return function(i){e.uniform1f(t,i)}}function jV(e,t){return function(i){e.uniform1fv(t,i)}}function _V(e,t){return function(i){e.uniform2fv(t,i)}}function PV(e,t){return function(i){e.uniform3fv(t,i)}}function qV(e,t){return function(i){e.uniform4fv(t,i)}}function Jb(e,t){return function(i){e.uniform1i(t,i)}}function Tb(e,t){return function(i){e.uniform1iv(t,i)}}function kb(e,t){return function(i){e.uniform2iv(t,i)}}function zb(e,t){return function(i){e.uniform3iv(t,i)}}function Kb(e,t){return function(i){e.uniform4iv(t,i)}}function $V(e,t){return function(i){e.uniform1ui(t,i)}}function tW(e,t){return function(i){e.uniform1uiv(t,i)}}function eW(e,t){return function(i){e.uniform2uiv(t,i)}}function iW(e,t){return function(i){e.uniform3uiv(t,i)}}function nW(e,t){return function(i){e.uniform4uiv(t,i)}}function oW(e,t){return function(i){e.uniformMatrix2fv(t,!1,i)}}function sW(e,t){return function(i){e.uniformMatrix3fv(t,!1,i)}}function rW(e,t){return function(i){e.uniformMatrix4fv(t,!1,i)}}function lW(e,t){return function(i){e.uniformMatrix2x3fv(t,!1,i)}}function cW(e,t){return function(i){e.uniformMatrix3x2fv(t,!1,i)}}function gW(e,t){return function(i){e.uniformMatrix2x4fv(t,!1,i)}}function dW(e,t){return function(i){e.uniformMatrix4x2fv(t,!1,i)}}function aW(e,t){return function(i){e.uniformMatrix3x4fv(t,!1,i)}}function IW(e,t){return function(i){e.uniformMatrix4x3fv(t,!1,i)}}function qn(e,t,i,n){const o=Lb(e,t);return Zc(e)?function(l){let I,m;!l||gu(e,l)?(I=l,m=null):(I=l.texture,m=l.sampler),e.uniform1i(n,i),e.activeTexture(Qg+i),e.bindTexture(o,I),e.bindSampler(i,m)}:function(l){e.uniform1i(n,i),e.activeTexture(Qg+i),e.bindTexture(o,l)}}function $n(e,t,i,n,o){const l=Lb(e,t),I=new Int32Array(o);for(let m=0;m<o;++m)I[m]=i+m;return Zc(e)?function(m){e.uniform1iv(n,I),m.forEach(function(Z,x){e.activeTexture(Qg+I[x]);let L,K;!Z||gu(e,Z)?(L=Z,K=null):(L=Z.texture,K=Z.sampler),e.bindSampler(i,K),e.bindTexture(l,L)})}:function(m){e.uniform1iv(n,I),m.forEach(function(Z,x){e.activeTexture(Qg+I[x]),e.bindTexture(l,Z)})}}Be[Ad]={Type:Float32Array,size:4,setter:OV,arraySetter:jV};Be[fb]={Type:Float32Array,size:8,setter:_V,cols:2};Be[Gb]={Type:Float32Array,size:12,setter:PV,cols:3};Be[Vb]={Type:Float32Array,size:16,setter:qV,cols:4};Be[hu]={Type:Int32Array,size:4,setter:Jb,arraySetter:Tb};Be[Wb]={Type:Int32Array,size:8,setter:kb,cols:2};Be[Bb]={Type:Int32Array,size:12,setter:zb,cols:3};Be[Xb]={Type:Int32Array,size:16,setter:Kb,cols:4};Be[bu]={Type:Uint32Array,size:4,setter:$V,arraySetter:tW};Be[Nb]={Type:Uint32Array,size:8,setter:eW,cols:2};Be[Yb]={Type:Uint32Array,size:12,setter:iW,cols:3};Be[Mb]={Type:Uint32Array,size:16,setter:nW,cols:4};Be[Rb]={Type:Uint32Array,size:4,setter:Jb,arraySetter:Tb};Be[vb]={Type:Uint32Array,size:8,setter:kb,cols:2};Be[Sb]={Type:Uint32Array,size:12,setter:zb,cols:3};Be[wb]={Type:Uint32Array,size:16,setter:Kb,cols:4};Be[Fb]={Type:Float32Array,size:32,setter:oW,rows:2,cols:2};Be[Hb]={Type:Float32Array,size:48,setter:sW,rows:3,cols:3};Be[xb]={Type:Float32Array,size:64,setter:rW,rows:4,cols:4};Be[wV]={Type:Float32Array,size:32,setter:lW,rows:2,cols:3};Be[FV]={Type:Float32Array,size:32,setter:gW,rows:2,cols:4};Be[HV]={Type:Float32Array,size:48,setter:cW,rows:3,cols:2};Be[xV]={Type:Float32Array,size:48,setter:aW,rows:3,cols:4};Be[NV]={Type:Float32Array,size:64,setter:dW,rows:4,cols:2};Be[YV]={Type:Float32Array,size:64,setter:IW,rows:4,cols:3};Be[XV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:yd};Be[RV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Zd};Be[vV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:pu};Be[SV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:yd};Be[MV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:fd};Be[LV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:fd};Be[JV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Zd};Be[TV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:yd};Be[kV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:pu};Be[zV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Zd};Be[KV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:fd};Be[UV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:yd};Be[EV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:pu};Be[QV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Zd};Be[DV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:fd};function Gd(e,t){return function(i){if(i.value)switch(e.disableVertexAttribArray(t),i.value.length){case 4:e.vertexAttrib4fv(t,i.value);break;case 3:e.vertexAttrib3fv(t,i.value);break;case 2:e.vertexAttrib2fv(t,i.value);break;case 1:e.vertexAttrib1fv(t,i.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(pd,i.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,i.numComponents||i.size,i.type||Ad,i.normalize||!1,i.stride||0,i.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,i.divisor||0)}}function Es(e,t){return function(i){if(i.value)if(e.disableVertexAttribArray(t),i.value.length===4)e.vertexAttrib4iv(t,i.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(pd,i.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,i.numComponents||i.size,i.type||hu,i.stride||0,i.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,i.divisor||0)}}function Vd(e,t){return function(i){if(i.value)if(e.disableVertexAttribArray(t),i.value.length===4)e.vertexAttrib4uiv(t,i.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(pd,i.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,i.numComponents||i.size,i.type||bu,i.stride||0,i.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,i.divisor||0)}}function Au(e,t,i){const n=i.size,o=i.count;return function(l){e.bindBuffer(pd,l.buffer);const I=l.size||l.numComponents||n,m=I/o,Z=l.type||Ad,L=Be[Z].size*I,K=l.normalize||!1,st=l.offset||0,ut=L/o;for(let P=0;P<o;++P)e.enableVertexAttribArray(t+P),e.vertexAttribPointer(t+P,m,Z,K,L,st+ut*P),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+P,l.divisor||0)}}const Wn={};Wn[Ad]={size:4,setter:Gd};Wn[fb]={size:8,setter:Gd};Wn[Gb]={size:12,setter:Gd};Wn[Vb]={size:16,setter:Gd};Wn[hu]={size:4,setter:Es};Wn[Wb]={size:8,setter:Es};Wn[Bb]={size:12,setter:Es};Wn[Xb]={size:16,setter:Es};Wn[bu]={size:4,setter:Vd};Wn[Nb]={size:8,setter:Vd};Wn[Yb]={size:12,setter:Vd};Wn[Mb]={size:16,setter:Vd};Wn[Rb]={size:4,setter:Es};Wn[vb]={size:8,setter:Es};Wn[Sb]={size:12,setter:Es};Wn[wb]={size:16,setter:Es};Wn[Fb]={size:4,setter:Au,count:2};Wn[Hb]={size:9,setter:Au,count:3};Wn[xb]={size:16,setter:Au,count:4};const uW=/ERROR:\s*\d+:(\d+)/gi;function CW(e,t="",i=0){const n=[...t.matchAll(uW)],o=new Map(n.map((l,I)=>{const m=parseInt(l[1]),Z=n[I+1],x=Z?Z.index:t.length,L=t.substring(l.index,x);return[m-1,L]}));return e.split(`
`).map((l,I)=>{const m=o.get(I);return`${I+1+i}: ${l}${m?`

^^^ ${m}`:""}`}).join(`
`)}const M0=/^[ \t]*\n/;function Ub(e){let t=0;return M0.test(e)&&(t=1,e=e.replace(M0,"")),{lineOffset:t,shaderSource:e}}function mW(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function hW(e,t,i,n){if(n=n||mu,!e.getShaderParameter(i,mV)){const l=e.getShaderInfoLog(i),{lineOffset:I,shaderSource:m}=Ub(e.getShaderSource(i)),Z=`${CW(m,l,I)}
Error compiling ${cb(e,t)}: ${l}`;return n(Z),Z}return""}function yu(e,t,i){let n,o,l;if(typeof t=="function"&&(i=t,t=void 0),typeof e=="function")i=e,e=void 0;else if(e&&!Array.isArray(e)){const x=e;i=x.errorCallback,e=x.attribLocations,n=x.transformFeedbackVaryings,o=x.transformFeedbackMode,l=x.callback}const I=i||mu,m=[],Z={errorCallback(x,...L){m.push(x),I(x,...L)},transformFeedbackVaryings:n,transformFeedbackMode:o,callback:l,errors:m};{let x={};Array.isArray(e)?e.forEach(function(L,K){x[L]=t?t[K]:K}):x=e||{},Z.attribLocations=x}return Z}const bW=["VERTEX_SHADER","FRAGMENT_SHADER"];function pW(e,t){if(t.indexOf("frag")>=0)return bV;if(t.indexOf("vert")>=0)return pV}function AW(e,t,i){const n=e.getAttachedShaders(t);for(const o of n)i.has(o)&&e.deleteShader(o);e.deleteProgram(t)}const yW=(e=0)=>new Promise(t=>setTimeout(t,e));function ZW(e,t,i){const n=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:l,transformFeedbackMode:I}=yu(i);for(let m=0;m<t.length;++m){let Z=t[m];if(typeof Z=="string"){const x=yb(Z),L=x?x.text:Z;let K=e[bW[m]];x&&x.type&&(K=pW(e,x.type)||K),Z=e.createShader(K),e.shaderSource(Z,Ub(L).shaderSource),e.compileShader(Z),e.attachShader(n,Z)}}Object.entries(o).forEach(([m,Z])=>e.bindAttribLocation(n,Z,m));{let m=l;m&&(m.attribs&&(m=m.attribs),Array.isArray(m)||(m=Object.keys(m)),e.transformFeedbackVaryings(n,m,I||AV))}return e.linkProgram(n),n}function fW(e,t,i,n,o){const l=yu(i,n,o),I=new Set(t),m=ZW(e,t,l);function Z(x,L){const K=VW(x,L,l.errorCallback);return K&&AW(x,L,I),K}if(l.callback){GW(e,m).then(()=>{const x=Z(e,m);l.callback(x,x?void 0:m)});return}return Z(e,m)?void 0:m}async function GW(e,t){const i=e.getExtension("KHR_parallel_shader_compile"),n=i?(l,I)=>l.getProgramParameter(I,i.COMPLETION_STATUS_KHR):()=>!0;let o=0;do await yW(o),o=1e3/60;while(!n(e,t))}function VW(e,t,i){if(i=i||mu,!e.getProgramParameter(t,hV)){const o=e.getProgramInfoLog(t);i(`Error in program linking: ${o}`);const I=e.getAttachedShaders(t).map(m=>hW(e,e.getShaderParameter(m,e.SHADER_TYPE),m,i));return`${o}
${I.filter(m=>m).join(`
`)}`}}function WW(e,t,i,n,o){return fW(e,t,i,n,o)}function Eb(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const BW=/(\.|\[|]|\w+)/g,XW=e=>e>="0"&&e<="9";function RW(e,t,i,n){const o=e.split(BW).filter(m=>m!=="");let l=0,I="";for(;;){const m=o[l++];I+=m;const Z=XW(m[0]),x=Z?parseInt(m):m;if(Z&&(I+=o[l++]),l===o.length){i[x]=t;break}else{const K=o[l++],st=K==="[",ut=i[x]||(st?[]:{});i[x]=ut,i=ut,n[I]=n[I]||function(P){return function(ct){Qb(P,ct)}}(ut),I+=K}}}function vW(e,t){let i=0;function n(m,Z,x){const L=Z.name.endsWith("[0]"),K=Z.type,st=Be[K];if(!st)throw new Error(`unknown type: 0x${K.toString(16)}`);let ut;if(st.bindPoint){const P=i;i+=Z.size,L?ut=st.arraySetter(e,K,P,x,Z.size):ut=st.setter(e,K,P,x,Z.size)}else st.arraySetter&&L?ut=st.arraySetter(e,x):ut=st.setter(e,x);return ut.location=x,ut}const o={},l={},I=e.getProgramParameter(t,Zb);for(let m=0;m<I;++m){const Z=e.getActiveUniform(t,m);if(Eb(Z))continue;let x=Z.name;x.endsWith("[0]")&&(x=x.substr(0,x.length-3));const L=e.getUniformLocation(t,Z.name);if(L){const K=n(t,Z,L);o[x]=K,RW(x,K,l,o)}}return o}function SW(e,t){const i={},n=e.getProgramParameter(t,ZV);for(let o=0;o<n;++o){const l=e.getTransformFeedbackVarying(t,o);i[l.name]={index:o,type:l.type,size:l.size}}return i}function wW(e,t){const i=e.getProgramParameter(t,Zb),n=[],o=[];for(let m=0;m<i;++m){o.push(m),n.push({});const Z=e.getActiveUniform(t,m);n[m].name=Z.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(m){const Z=m[0],x=m[1];e.getActiveUniforms(t,o,e[Z]).forEach(function(L,K){n[K][x]=L})});const l={},I=e.getProgramParameter(t,fV);for(let m=0;m<I;++m){const Z=e.getActiveUniformBlockName(t,m),x={index:e.getUniformBlockIndex(t,Z),usedByVertexShader:e.getActiveUniformBlockParameter(t,m,GV),usedByFragmentShader:e.getActiveUniformBlockParameter(t,m,VV),size:e.getActiveUniformBlockParameter(t,m,WV),uniformIndices:e.getActiveUniformBlockParameter(t,m,BV)};x.used=x.usedByVertexShader||x.usedByFragmentShader,l[Z]=x}return{blockSpecs:l,uniformData:n}}function Qb(e,t){for(const i in t){const n=e[i];typeof n=="function"?n(t[i]):Qb(e[i],t[i])}}function Db(e,...t){const i=e.uniformSetters||e,n=t.length;for(let o=0;o<n;++o){const l=t[o];if(Array.isArray(l)){const I=l.length;for(let m=0;m<I;++m)Db(i,l[m])}else for(const I in l){const m=i[I];m&&m(l[I])}}}function FW(e,t){const i={},n=e.getProgramParameter(t,yV);for(let o=0;o<n;++o){const l=e.getActiveAttrib(t,o);if(Eb(l))continue;const I=e.getAttribLocation(t,l.name),m=Wn[l.type],Z=m.setter(e,I,m);Z.location=I,i[l.name]=Z}return i}function HW(e,t){for(const i in t){const n=e[i];n&&n(t[i])}}function xW(e,t,i){i.vertexArrayObject?e.bindVertexArray(i.vertexArrayObject):(HW(t.attribSetters||t,i.attribs),i.indices&&e.bindBuffer(CV,i.indices))}function L0(e,t){const i=vW(e,t),n=FW(e,t),o={program:t,uniformSetters:i,attribSetters:n};return Zc(e)&&(o.uniformBlockSpec=wW(e,t),o.transformFeedbackInfo=SW(e,t)),o}const NW=/\s|{|}|;/;function YW(e,t,i,n,o){const l=yu(i,n,o),I=[];if(t=t.map(function(x){if(!NW.test(x)){const L=yb(x);if(L)x=L.text;else{const K=`no element with id: ${x}`;l.errorCallback(K),I.push(K)}}return x}),I.length)return mW(l,"");const m=l.callback;m&&(l.callback=(x,L)=>{m(x,x?void 0:L0(e,L))});const Z=WW(e,t,l);return Z?L0(e,Z):null}const MW=4,J0=5123;function LW(e,t,i,n,o,l){i=i===void 0?MW:i;const I=t.indices,m=t.elementType,Z=n===void 0?t.numElements:n;o=o===void 0?0:o,m||I?l!==void 0?e.drawElementsInstanced(i,Z,m===void 0?J0:t.elementType,o,l):e.drawElements(i,Z,m===void 0?J0:t.elementType,o):l!==void 0?e.drawArraysInstanced(i,o,Z,l):e.drawArrays(i,o,Z)}const Ob=36160,qc=36161,JW=3553,TW=5121,kW=6402,zW=6408,KW=33190,UW=36012,EW=35056,QW=36013,DW=32854,OW=32855,jW=36194,jb=33189,_b=6401,Pb=36168,Zu=34041,cI=36064,Wd=36096,qb=36128,fu=33306,gI=33071,dI=9729,_W=[{format:zW,type:TW,min:dI,wrap:gI},{format:Zu}],Fo={};Fo[Zu]=fu;Fo[_b]=qb;Fo[Pb]=qb;Fo[kW]=Wd;Fo[jb]=Wd;Fo[KW]=Wd;Fo[UW]=Wd;Fo[EW]=fu;Fo[QW]=fu;function PW(e,t){return Fo[e]||Fo[t]}const Qs={};Qs[DW]=!0;Qs[OW]=!0;Qs[jW]=!0;Qs[Zu]=!0;Qs[jb]=!0;Qs[_b]=!0;Qs[Pb]=!0;function qW(e){return Qs[e]}const $W=32;function t5(e){return e>=cI&&e<cI+$W}function Dg(e,t,i,n){const o=Ob,l=e.createFramebuffer();e.bindFramebuffer(o,l),i=i||e.drawingBufferWidth,n=n||e.drawingBufferHeight,t=t||_W;const I=[],m={framebuffer:l,attachments:[],width:i,height:n};return t.forEach(function(Z,x){let L=Z.attachment;const K=Z.samples,st=Z.format;let ut=Z.attachmentPoint||PW(st,Z.internalFormat);if(ut||(ut=cI+x),t5(ut)&&I.push(ut),!L)if(K!==void 0||qW(st))L=e.createRenderbuffer(),e.bindRenderbuffer(qc,L),K>1?e.renderbufferStorageMultisample(qc,K,st,i,n):e.renderbufferStorage(qc,st,i,n);else{const P=Object.assign({},Z);P.width=i,P.height=n,P.auto===void 0&&(P.auto=!1,P.min=P.min||P.minMag||dI,P.mag=P.mag||P.minMag||dI,P.wrapS=P.wrapS||P.wrap||gI,P.wrapT=P.wrapT||P.wrap||gI),L=Ab(e,P)}if(gf(e,L))e.framebufferRenderbuffer(o,ut,qc,L);else if(gu(e,L))Z.layer!==void 0?e.framebufferTextureLayer(o,ut,L,Z.level||0,Z.layer):e.framebufferTexture2D(o,ut,Z.target||JW,L,Z.level||0);else throw new Error("unknown attachment type");m.attachments.push(L)}),e.drawBuffers&&e.drawBuffers(I),m}function e5(e,t,i){i=i||Ob,t?(e.bindFramebuffer(i,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(i,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}function Ji(e,t){return()=>t instanceof WebGLTexture?t:Ab(e,{src:t,wrap:e.CLAMP_TO_EDGE})}const _r=2;class Xr{constructor(t){this.id="_";const{context:i,width:n,height:o}=t;this.context=i,this.options=t;const l=this.buildDefines();this.programInfo=YW(this.context,[l+this.getVertexShader(),l+this.getFragmentShader()]),this.bufferInfo=Hf(this.context,this.getBuffers()),this.fbi=Dg(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],n,o),this.output=this.fbi.attachments[0]}resizeOutput(t,i){this.fbi=Dg(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],t,i),this.options.width=t,this.options.height=i,this.output=this.fbi.attachments[0]}getDefines(){return{}}getBuffers(){return{position:{numComponents:2,data:[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1]},texture_coord:{numComponents:2,data:[0,0,0,1,1,0,1,1,0,1,1,0]}}}buildDefines(){let t="";const i=this.getDefines();for(let n in i)t+=`#define ${n} ${i[n].toFixed(1)}
`;return t}run(t){var o,l,I,m,Z,x;(o=this.profiler)==null||o.pushContext(`[${this.id}] PROG : ${this.constructor.name}`),(l=this.profiler)==null||l.pushContext(`[${this.id}] UNIFORMS`);for(const L in t)typeof t[L]=="function"&&((I=this.profiler)==null||I.pushContext(`[${this.id}] UNI : ${L}`),t[L]=t[L](),(m=this.profiler)==null||m.popContext(`[${this.id}] UNI : ${L}`));(Z=this.profiler)==null||Z.popContext(`[${this.id}] UNIFORMS`);const i=Date.now();let n=0;this.lastRun&&(n=(i-this.lastRun)/1e3),this.lastRun=i,this.context.viewport(0,0,this.context.canvas.width,this.context.canvas.height),this.context.useProgram(this.programInfo.program),xW(this.context,this.programInfo,this.bufferInfo),Db(this.programInfo,{delta:n,canvas:[this.context.canvas.width,this.context.canvas.height],...t}),e5(this.context,this.options.disableFramebuffer?null:this.fbi),LW(this.context,this.bufferInfo),(x=this.profiler)==null||x.popContext(`[${this.id}] PROG : ${this.constructor.name}`)}setProfiler(t){this.profiler=t}}const i5=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D background;
uniform sampler2D foreground;
uniform sampler2D threshold;

void main() {
  vec4 backgroundColor = texture2D(background, _texture_coord);
  vec4 foregroundColor = texture2D(foreground, _texture_coord);
  vec4 tresholdColor = texture2D(threshold, _texture_coord);
  gl_FragColor = foregroundColor * tresholdColor.a +
                 backgroundColor * (1. - tresholdColor.a);
}
`,n5=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  _texture_coord.y = 1. - texture_coord.y;
}
`;class Gu extends Xr{getFragmentShader(){return i5}getVertexShader(){return n5}}class Vu{constructor(){this.steps=[]}addStep(t){this.steps.push(t)}async run(){for(const t of this.steps)t.program.run(t.getUniforms())}resizeOutput(t,i){var n,o;(n=this.profiler)==null||n.pushContext(`PIP [${this.constructor.name}]`);for(const l of this.steps)l.preventResize||l.program.resizeOutput(t,i);(o=this.profiler)==null||o.popContext(`PIP [${this.constructor.name}]`)}setProfiler(t){this.profiler=t;for(const i of this.steps)i.program.setProfiler(t)}setId(t){for(const i of this.steps)i.program.id=t}}class Wu extends Vu{constructor(){super(...arguments),this.preciseMaskEnabled=!1}}class $b extends Wu{constructor(t){super(),this.context=t,this.preciseMaskEnabled=!0;const i={context:t,height:t.canvas.height,width:t.canvas.width},n=new Gu({...i,disableFramebuffer:!0});this.addStep({program:n,getUniforms:()=>({background:Ji(t,this.inputBackgroundImage),foreground:Ji(t,this.inputImage),threshold:Ji(t,this.inputMask)})})}setData(t,i){this.inputImage=t,this.inputMask=i}}const o5=`precision mediump float;

varying vec2 _texture_coord;
uniform sampler2D texture;

void main() { gl_FragColor = texture2D(texture, _texture_coord); }
`,s5=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;
uniform bool invert_y;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  if (invert_y) {
    _texture_coord.y = 1. - texture_coord.y;
  }
}
`;class r5 extends Xr{getFragmentShader(){return o5}getVertexShader(){return s5}}class l5 extends Vu{constructor(t,i,n){super(),this.context=t;const o={context:t,height:n,width:i};this.addStep({program:new r5({...o,disableFramebuffer:!0}),getUniforms:()=>({texture:Ji(t,this.inputImage),invert_y:!0})})}setData(t){this.inputImage=t}}async function t2(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}const c5=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,g5=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;var Bu=(e=>(e[e.LINEAR=0]="LINEAR",e[e.GAUSSIAN=1]="GAUSSIAN",e))(Bu||{});class e2 extends Xr{getDefines(){var t;return{RADIUS:(t=this.options.radius)!=null?t:1}}getFragmentShader(){return c5+this.createLoopFunction()}getVertexShader(){return g5}createLoopFunction(){var i;let t=(i=this.options.radius)!=null?i:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${t}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;

            for(int y=-${t}; y<${t+1}; ++y) {
                for(int x=-${t}; x<${t+1}; ++x) {
                    float factor = 1.;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}getFactor(t,i){switch(this.options.type){case 1:return this.getLinearFactor(t,i);case 0:default:return this.getLinearFactor(t,i)}}getLinearFactor(t,i){return 1}getGaussianFactor(t,i){var Z;const n=Math.PI*2,o=Math.max((Z=this.options.radius)!=null?Z:1,1),l=1/(n*o**2),I=-(t**2+i**2),m=l*I;return l*Math.E**m}}class Xu extends Xr{constructor(t){super(t),this.fbi2=Dg(t.context,[{format:t.context.RGBA,type:t.context.UNSIGNED_BYTE,min:t.context.LINEAR,mag:t.context.LINEAR,wrap:t.context.CLAMP_TO_EDGE}],t.width,t.height)}run(t){const i=this.fbi;this.fbi=this.fbi2,this.fbi2=i,this.output=this.fbi.attachments[0],super.run({...t,previous_rendering:this.fbi2.attachments[0]})}resizeOutput(t,i){super.resizeOutput(t,i),this.fbi2=Dg(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],t,i)}}const d5=`precision mediump float;

varying vec2 _texture_coord;

// uniform float treshold;
uniform sampler2D image_now;
uniform sampler2D image_before;
uniform sampler2D mask_now;
uniform sampler2D mask_before;
uniform sampler2D previous_rendering;
uniform vec2 canvas;

uniform float delta;

float current_factor = 0.69;
float previous_factor = 0.74;
float threshold_activation = 0.54;

float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float getThreshold() {
  vec4 color = vec4(0.);
  for (float y = -6.; y < 7.; y += 1.) {
    for (float x = -6.; x < 7.; x += 1.) {
      vec4 image_now_color =
          texture2D(image_now, _texture_coord + vec2(x, y) / canvas);
      vec4 image_before_color =
          texture2D(image_before, _texture_coord + vec2(x, y) / canvas);
      color += abs(image_before_color - image_now_color);
    }
  }
  return (color.x + color.y + color.z) / (3. * 9.);
}

void main() {
  float treshold_input = .4;
  float treshold_previous_rendering = .98;

  vec4 mask_now_color = texture2D(mask_now, _texture_coord);
  vec4 mask_before_color = texture2D(mask_before, _texture_coord);
  vec4 previous_rendering_color = texture2D(previous_rendering, _texture_coord);

  vec3 mask_diff = abs(mask_before_color.xyz - mask_now_color.xyz);
  float flickering = mask_diff.x;
  float threshold = getThreshold();
  if (threshold < threshold_activation) {
    gl_FragColor = vec4(flickering, 0., 0., 1.) * current_factor +
                   previous_rendering_color * previous_factor;
    gl_FragColor *= (1. - threshold);
  }
}
`,a5=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class I5 extends Xu{getFragmentShader(){return d5}getVertexShader(){return a5}}const u5=`#version 300 es
// https://github.com/Volcomix/virtual-background/blob/main/src/pipelines/webgl2/jointBilateralFilterStage.ts

precision highp float;
uniform sampler2D input_frame;
uniform sampler2D segmentation_mask;
uniform sampler2D threshold;
uniform vec2 texel_size;
uniform float step;
uniform float radius;
uniform float offset;
uniform float sigma_texel;
uniform float sigma_color;

in vec2 _texture_coord;
out vec4 outColor;

float gaussian(float x, float sigma) {
  float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);
  return exp((x * x) * coeff);
}

void main() {
  vec2 centerCoord = _texture_coord;
  vec3 centerColor = texture(input_frame, centerCoord).rgb;
  float newVal = 0.0;
  float spaceWeight = 0.0;
  float colorWeight = 0.0;
  float totalWeight = 0.0;
  // Subsample kernel space.
  for (float i = -radius + offset; i <= radius; i += step) {
    for (float j = -radius + offset; j <= radius; j += step) {
      vec2 shift = vec2(j, i) * texel_size;
      vec2 coord = vec2(centerCoord + shift);
      vec3 frameColor = texture(input_frame, coord).rgb;
      float threshold = texture(threshold, coord).a;
      float outVal = texture(segmentation_mask, coord).a;

      spaceWeight = gaussian(distance(centerCoord, coord), sigma_texel);
      colorWeight = gaussian(distance(centerColor, frameColor), sigma_color);
      totalWeight += spaceWeight * colorWeight;
      newVal += spaceWeight * colorWeight * outVal * threshold;
    }
  }
  newVal /= totalWeight;
  outColor = vec4(vec3(0.), newVal);
}`,C5=`#version 300 es
in vec2 position;
in vec2 texture_coord;
out vec2 _texture_coord;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
  _texture_coord = texture_coord;
}`;class m5 extends Xr{getFragmentShader(){return u5}getVertexShader(){return C5}}const h5=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  int count = 0;
  for (float y = -1.; y < 2.; y += 1.) {
    for (float x = -1.; x < 2.; x += 1.) {
      vec2 coord = _texture_coord + vec2(y, x) / canvas;
      vec4 color = texture2D(texture, coord);
      if (color.r > .1) {
        count++;
      }
    }
  }
  if (count > 5) {
    gl_FragColor = texture2D(texture, _texture_coord);
  }
}
`,b5=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class p5 extends Xr{getFragmentShader(){return h5}getVertexShader(){return b5}}const A5=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  vec4 color = texture2D(texture, _texture_coord);
  for (float y = -2.; y < 3.; y += 1.) {
    for (float x = -2.; x < 3.; x += 1.) {
      vec2 coord = _texture_coord;
      coord += vec2(y, x) / canvas;
      color += texture2D(texture, coord) * (1. / 4.);
    }
  }

  gl_FragColor = color;
}
`,y5=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class Z5 extends Xu{getFragmentShader(){return A5}getVertexShader(){return y5}}const f5=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D threshold;
uniform sampler2D inputs;

void main() {
  vec4 inputs_color = texture2D(inputs, _texture_coord);
  vec4 threshold_color = texture2D(threshold, _texture_coord);
  if (threshold_color.r < .1 && inputs_color.r > .5) {
    gl_FragColor = inputs_color;
  }
}
`,G5=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class V5 extends Xu{getFragmentShader(){return f5}getVertexShader(){return G5}}class W5 extends Vu{constructor(t,i,n){super(),this.context=t,this.options={currentThresholdMinimum:0,currentThresholdMaximum:1,previousThresholdMinimum:0,previousThresholdMaximum:1,thresholdMinimum:0,thresholdMaximum:1,thresholdFactor:1};const o={context:t,height:n,width:i},l=new I5(o),I=new e2({...o,radius:1,type:Bu.GAUSSIAN}),m=new V5(o),Z=new Z5(o),x=new p5(o);this.jointBilateral=new m5(o),this.addStep({program:l,getUniforms:()=>({image_now:Ji(t,this.inputImage),image_before:Ji(t,this.previousInputImage),mask_now:Ji(t,this.inputMask),mask_before:Ji(t,this.previousInputMask),current_threshold_minimum:this.options.currentThresholdMinimum,current_threshold_maximum:this.options.currentThresholdMaximum,previous_threshold_minimum:this.options.previousThresholdMinimum,previous_threshold_maximum:this.options.previousThresholdMaximum,threshold_minimum:this.options.thresholdMinimum,threshold_maximum:this.options.thresholdMaximum,threshold_factor:this.options.thresholdFactor})}),this.addStep({program:m,getUniforms:()=>({inputs:Ji(t,this.inputMask),threshold:Ji(t,l.output)})}),this.addStep({program:x,getUniforms:()=>({texture:Ji(t,m.output)})}),this.addStep({program:Z,getUniforms:()=>({texture:Ji(t,x.output)})}),this.addStep({program:I,getUniforms:()=>({texture:Ji(t,Z.output)})}),this.addStep({program:this.jointBilateral,getUniforms:()=>{var _,qe,ni,we,qt,Bn,ge,ft;const K=(qe=(_=this.inputImage)==null?void 0:_.width)!=null?qe:1,st=(we=(ni=this.inputImage)==null?void 0:ni.height)!=null?we:1,ut=(Bn=(qt=this.inputMask)==null?void 0:qt.width)!=null?Bn:1,P=(ft=(ge=this.inputMask)==null?void 0:ge.height)!=null?ft:1,ct=Math.max(K/ut,st/P),Rt=Math.max(1,Math.sqrt(ct)*.66),Bt=1/K,Yt=1/st;return{input_frame:Ji(t,this.inputImage),segmentation_mask:Ji(t,this.inputMask),threshold:Ji(t,I.output),texel_size:[Bt,Yt],step:Rt,radius:ct,offset:Rt>1?Rt*.5:0,sigma_texel:Math.max(Bt,Yt)*ct,sigma_color:.1}}}),this.output=this.jointBilateral.output}setData(t,i){this.previousInputImage=this.inputImage?this.inputImage:t,this.previousInputMask=this.inputMask?this.inputMask:i,this.inputImage=t,this.inputMask=i}setOptions(t){this.options=t}resizeOutput(t,i){super.resizeOutput(t,i),this.output=this.jointBilateral.output}}var i2=(e=>(e.PUSH="PUSH",e.POP="POP",e))(i2||{});class B5{constructor(t){this.queries=[],this.context=t,this.extension=t.getExtension("EXT_disjoint_timer_query_webgl2")}start(){}stop(){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT)}pushContext(t){this.createQuery("PUSH",t)}popContext(t){this.createQuery("POP",t)}createQuery(t,i){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT),this.activeQuery=this.context.createQuery(),this.context.beginQuery(this.extension.TIME_ELAPSED_EXT,this.activeQuery),this.queries.push({name:i,action:t,query:this.activeQuery})}async getResolvedQueries(){const t=(await Promise.all([...this.queries].map(i=>this.resolveQuery(i)))).filter(i=>i);for(let i=1;i<t.length;++i)t[i].timestamp+=t[i-1].duration+t[i-1].timestamp;return t}async resolveQuery(t){if(!await this.awaitQueryAvailable(t)){console.log("Unawaitable query",t);return}if(this.context.getParameter(this.extension.GPU_DISJOINT_EXT)){console.log("Disjointed query",t);return}return{...t,duration:this.context.getQueryParameter(t.query,this.context.QUERY_RESULT),timestamp:0}}async awaitQueryAvailable(t){for(let i=0;i<10;++i){if(this.context.getQueryParameter(t.query,this.context.QUERY_RESULT_AVAILABLE))return t;await t2(200)}}}class Bd{constructor(){this.previousImageWidth=0,this.previousImageHeight=0,this.previousMaskWidth=_r,this.previousMaskHeight=_r,this.postProcessingEnabled=!0;const t=new OffscreenCanvas(0,0),i=t.getContext("webgl2");if(!i)throw"Fail to retrieve webgl2 context";this.canvas=t,this.context=i,this.improveMask=new W5(this.context,_r,_r)}setFlickeringOptions(t){this.improveMask.setOptions(t)}enablePostProcessing(){this.postProcessingEnabled=!0}disablePostProcessing(){this.postProcessingEnabled=!1}async profileWebgl(t){const i=new B5(this.context);return this.profiler=i,i.start(),await t2(t),this.profiler=void 0,i.stop(),i.getResolvedQueries()}async render(t,i){var l,I;if(!this.pipeline)throw"missing pipeline";(this.previousImageHeight!==t.height||this.previousImageWidth!==t.width)&&this.resizeOutput(t.width,t.height),(this.previousMaskHeight!==i.height||this.previousMaskWidth!==i.width)&&(this.improveMask.resizeOutput(i.width,i.height),this.previousMaskWidth=i.width,this.previousMaskHeight=i.height);const n="renderer";(l=this.profiler)==null||l.pushContext(n),this.improveMask.setProfiler(this.profiler),this.pipeline.setProfiler(this.profiler);let o=i;return this.postProcessingEnabled&&(this.improveMask.setData(t,i),this.improveMask.run(),o=this.improveMask.output),this.pipeline.setData(t,o),await this.pipeline.run(),(I=this.profiler)==null||I.popContext(n),this.canvas}resizeOutput(t,i){var n;this.canvas.width=t,this.canvas.height=i,(n=this.pipeline)==null||n.resizeOutput(t,i),this.previousImageWidth=t,this.previousImageHeight=i}}class n2 extends Bd{constructor(){super(),this.pipeline=new $b(this.context);const t=new OffscreenCanvas(0,0),i=t.getContext("webgl2");if(!i)throw"Fail to retrieve webgl context";this.backgroundImageResizerCanvas=t,this.backgroundImageResizerContext=i,this.backgroundImageResizer=new l5(this.backgroundImageResizerContext,0,0)}setBackgroundImage(t){this.backgroundImage=t,this.updateBackgroundImage()}updateBackgroundImage(){const{width:t,height:i}=this.canvas;this.backgroundImageResizer.resizeOutput(t,i),this.backgroundImageResizer.setData(this.backgroundImage),this.backgroundImageResizer.run(),this.pipeline.inputBackgroundImage=this.backgroundImageResizerCanvas}resizeOutput(t,i){super.resizeOutput(t,i),this.backgroundImageResizerCanvas.width=t,this.backgroundImageResizerCanvas.height=i,this.backgroundImageResizer.resizeOutput(t,i),this.updateBackgroundImage()}}class X5 extends n2{setBackgroundVideo(t){this.frameReader=t}async render(t,i){return await this.readNextVideoFrame(),super.render(t,i)}async readNextVideoFrame(){var i;const t=await((i=this.frameReader)==null?void 0:i.read());if(t!=null&&t.value){const n=await createImageBitmap(t.value);this.setBackgroundImage(n),t.value.close()}}}class T0{blurBackground(t){return new j3(t)}blurSilhouette(t){return new _3(t)}imageBackground(){return new P3}videoBackground(){return new X5}}const R5=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;
uniform sampler2D mask;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,v5=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class S5 extends Xr{getDefines(){var t;return{RADIUS:(t=this.options.radius)!=null?t:1}}getFragmentShader(){return R5+this.createLoopFunction()}getVertexShader(){return v5}createLoopFunction(){var i;let t=(i=this.options.radius)!=null?i:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${t}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;
            float maxLength = length(normalizedRadius);

            for(int y=-${t}; y<${t+1}; ++y) {
                for(int x=-${t}; x<${t+1}; ++x) {
                    float factor = (1.- texture2D(mask, _texture_coord + diff).a) * (maxLength - length(diff)) / maxLength;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}}const w5=10,F5=2,H5=8;class x5 extends Wu{constructor(t,i){super(),this.context=t,this.radius=i;const n={context:t,height:t.canvas.height,width:t.canvas.width};this.blur=new S5({...n,radius:i,...this.getBlurTextureSize(t.canvas.width,t.canvas.height)});const o=new Gu({...n,disableFramebuffer:!0});this.addStep({program:this.blur,preventResize:!0,getUniforms:()=>({texture:Ji(t,this.inputImage),mask:Ji(t,this.inputMask)})}),this.addStep({program:o,getUniforms:()=>({background:Ji(t,this.blur.output),foreground:Ji(t,this.inputImage),threshold:Ji(t,this.inputMask)})})}getBlurTextureSize(t,i){const n=this.radius>w5?H5:F5;return{width:Math.max(_r,t/n),height:Math.max(_r,i/n)}}setData(t,i){this.inputImage=t,this.inputMask=i}resizeOutput(t,i){super.resizeOutput(t,i);const n=this.getBlurTextureSize(t,i);this.blur.resizeOutput(n.width,n.height)}}class N5 extends Bd{constructor(t){super(),this.pipeline=new x5(this.context,t),this.disablePostProcessing()}}class Y5 extends Wu{constructor(t,i){super(),this.context=t;const n={context:t,height:t.canvas.height,width:t.canvas.width},o=new e2({...n,radius:i,type:Bu.GAUSSIAN}),l=new Gu({...n,disableFramebuffer:!0});this.addStep({program:o,getUniforms:()=>({texture:Ji(t,this.inputImage)})}),this.addStep({program:l,getUniforms:()=>({background:Ji(t,this.inputImage),foreground:Ji(t,o.output),threshold:Ji(t,this.inputMask)})})}setData(t,i){this.inputImage=t,this.inputMask=i}}class M5 extends Bd{constructor(t){super(),this.pipeline=new Y5(this.context,t),this.disablePostProcessing()}}class L5 extends $b{constructor(){super(...arguments),this.preciseMaskEnabled=!0}set reader(t){this.frameReader=t}async run(){this.frameReader&&(await this.readNextVideoFrame(),await super.run())}async readNextVideoFrame(){var i;const t=await((i=this.frameReader)==null?void 0:i.read());t!=null&&t.value&&(this.inputBackgroundImage=await createImageBitmap(t.value),t.value.close())}}class J5 extends Bd{constructor(){super(),this.pipeline=new L5(this.context)}setBackgroundVideo(t){this.pipeline.reader=t}}class k0{blurBackground(t){return new N5(t)}blurSilhouette(t){return new M5(t)}imageBackground(){return new n2}videoBackground(){return new J5}}class T5{constructor(t){switch(t){case gr.CANVAS:this.factory=new T0;break;case gr.WEBGL:this.factory=new k0;break;default:const i=Dh();this.factory=i.supported?new k0:new T0}}blurBackground(t){return this.getFactory().blurBackground(t)}blurSilhouette(t){return this.getFactory().blurSilhouette(t)}imageBackground(){return this.getFactory().imageBackground()}videoBackground(){return this.getFactory().videoBackground()}getFactory(){if(!this.factory)throw"Factory is not initialized";return this.factory}}class k5{setBackgroundOptions(t){var n,o;const i=new T5((n=t.renderingOptions)==null?void 0:n.type);switch(t.transformerType){case"BackgroundBlur":this.renderer=i.blurBackground(this.getBlurSize(t.radius));break;case"SilhouetteBlur":this.renderer=i.blurSilhouette(this.getBlurSize(t.radius));break;case"VideoBackground":const l=i.videoBackground();this.backgroundVideo&&l.setBackgroundVideo(this.backgroundVideo),this.renderer=l;break;case"VirtualBackground":const I=i.imageBackground();this.backgroundImage&&I.setBackgroundImage(this.backgroundImage),this.renderer=I;break;default:throw`Unknown rendering type [${t.transformerType}]`}((o=t.renderingOptions)==null?void 0:o.type)===gr.WEBGL&&(t.renderingOptions.selfieSegmentationType===oc.PRECISE?this.renderer.enablePostProcessing():t.renderingOptions.selfieSegmentationType===oc.FAST&&this.renderer.disablePostProcessing())}setFlickeringOptions(t){var i;(i=this.renderer)==null||i.setFlickeringOptions(t)}setVideoBGReadable(t){this.backgroundVideo=t.getReader();const i=this.renderer;i!=null&&i.setBackgroundVideo&&i.setBackgroundVideo(this.backgroundVideo)}async setVirtualBGImage(t){const i=this.renderer;i!=null&&i.setBackgroundImage&&i.setBackgroundImage(t),this.backgroundImage=t}async process(t,i){if(this.renderer)return this.renderer.render(t,i)}async resizeForeground(t,i){}getBlurSize(t=ws.Low){switch(t){case ws.Low:return 5;case ws.High:return 12}return t}async profile(t){var i,n;return(n=(i=this.renderer)==null?void 0:i.profileWebgl(t))!=null?n:[]}}var z5=function(){var e=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(t){t=t||{};var i=typeof t!="undefined"?t:{},n,o;i.ready=new Promise(function(rt,at){n=rt,o=at});var l={},I;for(I in i)i.hasOwnProperty(I)&&(l[I]=i[I]);var m="./this.program",Z=function(rt,at){throw at},x=!0,L="";function K(rt){return i.locateFile?i.locateFile(rt,L):L+rt}var st;typeof document!="undefined"&&document.currentScript&&(L=document.currentScript.src),e&&(L=e),L.indexOf("blob:")!==0?L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):L="";var ut=i.print||console.log.bind(console),P=i.printErr||console.warn.bind(console);for(I in l)l.hasOwnProperty(I)&&(i[I]=l[I]);l=null,i.arguments&&i.arguments,i.thisProgram&&(m=i.thisProgram),i.quit&&(Z=i.quit);var ct;i.wasmBinary&&(ct=i.wasmBinary);var Rt=i.noExitRuntime||!0;typeof WebAssembly!="object"&&Ae("no native wasm support detected");var Bt,Yt=!1,_=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function qe(rt,at,ht){for(var ie=at+ht,pe=at;rt[pe]&&!(pe>=ie);)++pe;if(pe-at>16&&rt.subarray&&_)return _.decode(rt.subarray(at,pe));for(var he="";at<pe;){var Ht=rt[at++];if(!(Ht&128)){he+=String.fromCharCode(Ht);continue}var Ze=rt[at++]&63;if((Ht&224)==192){he+=String.fromCharCode((Ht&31)<<6|Ze);continue}var Ee=rt[at++]&63;if((Ht&240)==224?Ht=(Ht&15)<<12|Ze<<6|Ee:Ht=(Ht&7)<<18|Ze<<12|Ee<<6|rt[at++]&63,Ht<65536)he+=String.fromCharCode(Ht);else{var ai=Ht-65536;he+=String.fromCharCode(55296|ai>>10,56320|ai&1023)}}return he}function ni(rt,at){return rt?qe(ft,rt,at):""}function we(rt,at,ht){for(var ie=0;ie<rt.length;++ie)ge[at++>>0]=rt.charCodeAt(ie);ht||(ge[at>>0]=0)}function qt(rt,at){return rt%at>0&&(rt+=at-rt%at),rt}var Bn,ge,ft,Yi;function Jn(rt){Bn=rt,i.HEAP8=ge=new Int8Array(rt),i.HEAP16=new Int16Array(rt),i.HEAP32=Yi=new Int32Array(rt),i.HEAPU8=ft=new Uint8Array(rt),i.HEAPU16=new Uint16Array(rt),i.HEAPU32=new Uint32Array(rt),i.HEAPF32=new Float32Array(rt),i.HEAPF64=new Float64Array(rt)}i.INITIAL_MEMORY;var He,Tt=[],Je=[],yi=[],Oi=0;function An(){return Rt||Oi>0}function sn(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Mi(i.preRun.shift());ne(Tt)}function Xn(){ne(Je)}function Si(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)yn(i.postRun.shift());ne(yi)}function Mi(rt){Tt.unshift(rt)}function Fn(rt){Je.unshift(rt)}function yn(rt){yi.unshift(rt)}var oi=0,ei=null;function rn(rt){oi++,i.monitorRunDependencies&&i.monitorRunDependencies(oi)}function ji(rt){if(oi--,i.monitorRunDependencies&&i.monitorRunDependencies(oi),oi==0&&ei){var at=ei;ei=null,at()}}i.preloadedImages={},i.preloadedAudios={};function Ae(rt){i.onAbort&&i.onAbort(rt),rt="Aborted("+rt+")",P(rt),Yt=!0,rt+=". Build with -s ASSERTIONS=1 for more info.";var at=new WebAssembly.RuntimeError(rt);throw o(at),at}var Me="data:application/octet-stream;base64,";function si(rt){return rt.startsWith(Me)}var de;de="tflite-simd.wasm",si(de)||(de=K(de));function Fe(rt){try{if(rt==de&&ct)return new Uint8Array(ct);if(!st)throw"both async and sync fetching of the wasm failed"}catch(at){Ae(at)}}function Zi(){return!ct&&x&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(rt){if(!rt.ok)throw"failed to load wasm binary file at '"+de+"'";return rt.arrayBuffer()}).catch(function(){return Fe(de)}):Promise.resolve().then(function(){return Fe(de)})}function $e(){var rt={a:ye};function at(Ht,Ze){var Ee=Ht.exports;i.asm=Ee,Bt=i.asm.q,Jn(Bt.buffer),He=i.asm.E,Fn(i.asm.r),ji()}rn();function ht(Ht){at(Ht.instance)}function ie(Ht){return Zi().then(function(Ze){return WebAssembly.instantiate(Ze,rt)}).then(function(Ze){return Ze}).then(Ht,function(Ze){P("failed to asynchronously prepare wasm: "+Ze),Ae(Ze)})}function pe(){return!ct&&typeof WebAssembly.instantiateStreaming=="function"&&!si(de)&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(Ht){var Ze=WebAssembly.instantiateStreaming(Ht,rt);return Ze.then(ht,function(Ee){return P("wasm streaming compile failed: "+Ee),P("falling back to ArrayBuffer instantiation"),ie(ht)})}):ie(ht)}if(i.instantiateWasm)try{var he=i.instantiateWasm(rt,at);return he}catch(Ht){return P("Module.instantiateWasm callback failed with error: "+Ht),!1}return pe().catch(o),{}}function ne(rt){for(;rt.length>0;){var at=rt.shift();if(typeof at=="function"){at(i);continue}var ht=at.func;typeof ht=="number"?at.arg===void 0?He.get(ht)():He.get(ht)(at.arg):ht(at.arg===void 0?null:at.arg)}}function Xe(rt,at,ht,ie){Ae("Assertion failed: "+ni(rt)+", at: "+[at?ni(at):"unknown filename",ht,ie?ni(ie):"unknown function"])}function Ue(rt,at){Ae("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function Dt(rt,at){Ae("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function xe(){Ae("")}var $t;$t=function(){return performance.now()};var Ge=!0;function Te(rt){return Yi[Jt()>>2]=rt,rt}function di(rt,at){var ht;if(rt===0)ht=Date.now();else if((rt===1||rt===4)&&Ge)ht=$t();else return Te(28),-1;return Yi[at>>2]=ht/1e3|0,Yi[at+4>>2]=ht%1e3*1e3*1e3|0,0}function Se(){return 2147483648}function te(rt,at,ht){ft.copyWithin(rt,at,at+ht)}function ii(rt){try{return Bt.grow(rt-Bn.byteLength+65535>>>16),Jn(Bt.buffer),1}catch{}}function ri(rt){var at=ft.length;rt=rt>>>0;var ht=2147483648;if(rt>ht)return!1;for(var ie=1;ie<=4;ie*=2){var pe=at*(1+.2/ie);pe=Math.min(pe,rt+100663296);var he=Math.min(ht,qt(Math.max(rt,pe),65536)),Ht=ii(he);if(Ht)return!0}return!1}function Ne(rt){for(var at=$t();$t()-at<rt;);}var _i={};function fi(){return m||"./this.program"}function li(){if(!li.strings){var rt=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",at={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:rt,_:fi()};for(var ht in _i)_i[ht]===void 0?delete at[ht]:at[ht]=_i[ht];var ie=[];for(var ht in at)ie.push(ht+"="+at[ht]);li.strings=ie}return li.strings}var Gi={mappings:{},buffers:[null,[],[]],printChar:function(rt,at){var ht=Gi.buffers[rt];at===0||at===10?((rt===1?ut:P)(qe(ht,0)),ht.length=0):ht.push(at)},varargs:void 0,get:function(){Gi.varargs+=4;var rt=Yi[Gi.varargs-4>>2];return rt},getStr:function(rt){var at=ni(rt);return at},get64:function(rt,at){return rt}};function Re(rt,at){var ht=0;return li().forEach(function(ie,pe){var he=at+ht;Yi[rt+pe*4>>2]=he,we(ie,he),ht+=ie.length+1}),0}function ke(rt,at){var ht=li();Yi[rt>>2]=ht.length;var ie=0;return ht.forEach(function(pe){ie+=pe.length+1}),Yi[at>>2]=ie,0}function ve(rt){ce(rt)}function ae(rt){return 0}function ci(rt,at,ht,ie,pe){}function le(rt,at,ht,ie){for(var pe=0,he=0;he<ht;he++){for(var Ht=Yi[at+he*8>>2],Ze=Yi[at+(he*8+4)>>2],Ee=0;Ee<Ze;Ee++)Gi.printChar(rt,ft[Ht+Ee]);pe+=Ze}return Yi[ie>>2]=pe,0}function ee(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var rt=new Uint8Array(1);return function(){return crypto.getRandomValues(rt),rt[0]}}else return function(){Ae("randomDevice")}}function wi(rt,at){wi.randomDevice||(wi.randomDevice=ee());for(var ht=0;ht<at;ht++)ge[rt+ht>>0]=wi.randomDevice();return 0}var ye={a:Xe,e:Ue,d:Dt,b:xe,n:di,h:Se,l:te,m:ri,p:Ne,f:Re,g:ke,j:ve,i:ae,k:ci,c:le,o:wi};$e(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.r).apply(null,arguments)},i._getModelBufferMemoryOffset=function(){return(i._getModelBufferMemoryOffset=i.asm.s).apply(null,arguments)},i._getInputMemoryOffset=function(){return(i._getInputMemoryOffset=i.asm.t).apply(null,arguments)},i._getInputHeight=function(){return(i._getInputHeight=i.asm.u).apply(null,arguments)},i._getInputWidth=function(){return(i._getInputWidth=i.asm.v).apply(null,arguments)},i._getInputChannelCount=function(){return(i._getInputChannelCount=i.asm.w).apply(null,arguments)},i._getOutputMemoryOffset=function(){return(i._getOutputMemoryOffset=i.asm.x).apply(null,arguments)},i._getOutputHeight=function(){return(i._getOutputHeight=i.asm.y).apply(null,arguments)},i._getOutputWidth=function(){return(i._getOutputWidth=i.asm.z).apply(null,arguments)},i._getOutputChannelCount=function(){return(i._getOutputChannelCount=i.asm.A).apply(null,arguments)},i._loadModel=function(){return(i._loadModel=i.asm.B).apply(null,arguments)},i._runInference=function(){return(i._runInference=i.asm.C).apply(null,arguments)},i._isGPUEnabled=function(){return(i._isGPUEnabled=i.asm.D).apply(null,arguments)};var Jt=i.___errno_location=function(){return(Jt=i.___errno_location=i.asm.F).apply(null,arguments)},vt;function Ie(rt){this.name="ExitStatus",this.message="Program terminated with exit("+rt+")",this.status=rt}ei=function rt(){vt||ze(),vt||(ei=rt)};function ze(rt){if(oi>0||(sn(),oi>0))return;function at(){vt||(vt=!0,i.calledRun=!0,!Yt&&(Xn(),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Si()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),at()},1)):at()}i.run=ze;function ce(rt,at){ue(rt)}function ue(rt){An()||(i.onExit&&i.onExit(rt),Yt=!0),Z(rt,new Ie(rt))}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return ze(),t.ready}}();class K5{constructor(){this.isSIMDSupported=!1,this.isThreadsSupported=!1,this.inputWidth=0,this.inputHeight=0,this.inputChannelCount=0,this.inputMemoryOffset=0,this.outputWidth=0,this.outputHeight=0,this.outputChannelCount=0,this.outputMemoryOffset=0}}const U5="https://d3opqjmqzxf057.cloudfront.net/vonage-tensorflow-wasm/tflite-simd-wasm/1.1.3/",E5="https://d3opqjmqzxf057.cloudfront.net/ml/selfie_segmentation/4.0.0/";async function Q5(e=U5,t=E5){let i=new K5;var n=new Promise(function(o,l){async function I(){return z5({locateFile:function(x){return e+x}})}async function m(Z){return new Promise(async(x,L)=>{const K=Z;if(typeof K=="undefined")return L("TFLite backend unavailable: wasmSimd");const st="selfie_segmentation_landscape";console.log("Loading tflite model:",st);let ut=t+`${st}.tflite`;console.log("TFLite modelUrl: "+ut);try{const ct=await(await fetch(ut)).arrayBuffer();console.log("Model buffer size:",ct.byteLength);const Rt=K._getModelBufferMemoryOffset();console.log("Model buffer memory offset:",Rt),console.log("Loading model buffer..."),K.HEAPU8.set(new Uint8Array(ct),Rt);const Bt=K._loadModel(ct.byteLength);if(console.log("Load model result:",Bt),Bt!==0){L("Cannot load model");return}i.inputWidth=K._getInputWidth(),i.inputHeight=K._getInputHeight(),i.inputChannelCount=K._getInputChannelCount(),i.inputMemoryOffset=K._getInputMemoryOffset(),console.log("Input memory offset:",i.inputMemoryOffset),console.log("Input height:",i.inputHeight),console.log("Input width:",i.inputWidth),console.log("Input channels:",i.inputChannelCount),i.outputMemoryOffset=K._getOutputMemoryOffset(),i.outputWidth=K._getOutputWidth(),i.outputHeight=K._getOutputHeight(),i.outputChannelCount=K._getOutputChannelCount(),console.log("Output memory offset:",i.outputMemoryOffset),console.log("Output height:",i.outputHeight),console.log("Output width:",i.outputWidth),console.log("Output channels:",i.outputChannelCount),i.selectedTFLite=K}catch(P){L(P);return}x()})}I().then(Z=>{if(Z===null)throw console.error("loadTFLite null"),"loadTFLite null";m(Z).then(x=>{o(i)}).catch(x=>{console.error("loadTFLiteModel error"),l("loadTFLiteModel error")})}).catch(Z=>{console.error("loadTFLite error:",Z),l("loadTFLite error:"+Z)})});return n}var fr=typeof self!="undefined"?self:{};function Og(e,t){t:{for(var i=["CLOSURE_FLAGS"],n=fr,o=0;o<i.length;o++)if((n=n[i[o]])==null){i=null;break t}i=n}return(e=i&&i[e])!=null?e:t}function tr(){throw Error("Invalid UTF8")}function z0(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}let $c,Ca;const D5=typeof TextDecoder!="undefined";let O5;const j5=typeof TextEncoder!="undefined";function o2(e){if(j5)e=(O5||(O5=new TextEncoder)).encode(e);else{let i=0;const n=new Uint8Array(3*e.length);for(let o=0;o<e.length;o++){var t=e.charCodeAt(o);if(t<128)n[i++]=t;else{if(t<2048)n[i++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&o<e.length){const l=e.charCodeAt(++o);if(l>=56320&&l<=57343){t=1024*(t-55296)+l-56320+65536,n[i++]=t>>18|240,n[i++]=t>>12&63|128,n[i++]=t>>6&63|128,n[i++]=63&t|128;continue}o--}t=65533}n[i++]=t>>12|224,n[i++]=t>>6&63|128}n[i++]=63&t|128}}e=i===n.length?n:n.subarray(0,i)}return e}var gc,s2=Og(610401301,!1),_5=Og(645172343,Og(1,!0)),r2=Og(660014094,!1);const K0=fr.navigator;function aI(e){return!!s2&&!!gc&&gc.brands.some(({brand:t})=>t&&t.indexOf(e)!=-1)}function fo(e){var t;return(t=fr.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function Rs(){return!!s2&&!!gc&&gc.brands.length>0}function ma(){return Rs()?aI("Chromium"):(fo("Chrome")||fo("CriOS"))&&!(!Rs()&&fo("Edge"))||fo("Silk")}function Ru(e){return Ru[" "](e),e}gc=K0&&K0.userAgentData||null,Ru[" "]=function(){};var P5=!Rs()&&(fo("Trident")||fo("MSIE"));!fo("Android")||ma(),ma(),fo("Safari")&&(ma()||!Rs()&&fo("Coast")||!Rs()&&fo("Opera")||!Rs()&&fo("Edge")||(Rs()?aI("Microsoft Edge"):fo("Edg/"))||Rs()&&aI("Opera"));var l2={},Nl=null;function q5(e){var t=e.length,i=3*t/4;i%3?i=Math.floor(i):"=.".indexOf(e[t-1])!=-1&&(i="=.".indexOf(e[t-2])!=-1?i-2:i-1);var n=new Uint8Array(i),o=0;return function(l,I){function m(ut){for(;Z<l.length;){var P=l.charAt(Z++),ct=Nl[P];if(ct!=null)return ct;if(!/^[\s\xa0]*$/.test(P))throw Error("Unknown base64 encoding at char: "+P)}return ut}c2();for(var Z=0;;){var x=m(-1),L=m(0),K=m(64),st=m(64);if(st===64&&x===-1)break;I(x<<2|L>>4),K!=64&&(I(L<<4&240|K>>2),st!=64&&I(K<<6&192|st))}}(e,function(l){n[o++]=l}),o!==i?n.subarray(0,o):n}function c2(){if(!Nl){Nl={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],i=0;i<5;i++){var n=e.concat(t[i].split(""));l2[i]=n;for(var o=0;o<n.length;o++){var l=n[o];Nl[l]===void 0&&(Nl[l]=o)}}}}var g2=typeof Uint8Array!="undefined",d2=!P5&&typeof btoa=="function";function U0(e){if(!d2){var t;t===void 0&&(t=0),c2(),t=l2[t];var i=Array(Math.floor(e.length/3)),n=t[64]||"";let Z=0,x=0;for(;Z<e.length-2;Z+=3){var o=e[Z],l=e[Z+1],I=e[Z+2],m=t[o>>2];o=t[(3&o)<<4|l>>4],l=t[(15&l)<<2|I>>6],I=t[63&I],i[x++]=m+o+l+I}switch(m=0,I=n,e.length-Z){case 2:I=t[(15&(m=e[Z+1]))<<2]||n;case 1:e=e[Z],i[x]=t[e>>2]+t[(3&e)<<4|m>>4]+I+n}return i.join("")}for(t="",i=0,n=e.length-10240;i<n;)t+=String.fromCharCode.apply(null,e.subarray(i,i+=10240));return t+=String.fromCharCode.apply(null,i?e.subarray(i):e),btoa(t)}const E0=/[-_.]/g,$5={"-":"+",_:"/",".":"="};function tB(e){return $5[e]||""}function a2(e){if(!d2)return q5(e);E0.test(e)&&(e=e.replace(E0,tB)),e=atob(e);const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}function Vc(e){return g2&&e!=null&&e instanceof Uint8Array}var ol={};let eB;function I2(e){if(e!==ol)throw Error("illegal external caller")}function Gr(){return eB||(eB=new us(null,ol))}function vu(e){I2(ol);var t=e.g;return(t=t==null||Vc(t)?t:typeof t=="string"?a2(t):null)==null?t:e.g=t}var us=class{constructor(e,t){if(I2(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}h(){return new Uint8Array(vu(this)||0)}};function u2(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}let ha;function sl(){const e=Error();u2(e,"incident"),function(t){fr.setTimeout(()=>{throw t},0)}(e)}function II(e){return u2(e=Error(e),"warning"),e}function Su(){return typeof BigInt=="function"}function uo(e){return Array.prototype.slice.call(e)}var bl=typeof Symbol=="function"&&typeof Symbol()=="symbol";function Wc(e){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():e}var Bc=Wc(),Q0=Wc("0di"),ba=Wc("2ex"),vl=Wc("1oa"),D0=Wc("0dg"),wu=bl?(e,t)=>{e[Bc]|=t}:(e,t)=>{e.g!==void 0?e.g|=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}})},jg=bl?(e,t)=>{e[Bc]&=~t}:(e,t)=>{e.g!==void 0&&(e.g&=~t)},un=bl?e=>0|e[Bc]:e=>0|e.g,gi=bl?e=>e[Bc]:e=>e.g,nn=bl?(e,t)=>{e[Bc]=t}:(e,t)=>{e.g!==void 0?e.g=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}})};function pl(e){return wu(e,34),e}function iB(e,t){nn(t,-14591&(0|e))}function uI(e,t){nn(t,-14557&(34|e))}var Fu,Xc={},C2={};function O0(e){return!(!e||typeof e!="object"||e.Ja!==C2)}function Hu(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function xu(e,t,i){if(e!=null){if(typeof e=="string")e=e?new us(e,ol):Gr();else if(e.constructor!==us)if(Vc(e))e=e.length?new us(i?e:new Uint8Array(e),ol):Gr();else{if(!t)throw Error();e=void 0}}return e}function _g(e){return!(!Array.isArray(e)||e.length)&&!!(1&un(e))}const j0=[];function Ds(e){if(2&e)throw Error()}nn(j0,55),Fu=Object.freeze(j0);class Pg{constructor(t,i,n){this.l=0,this.g=t,this.h=i,this.m=n}next(){if(this.l<this.g.length){const t=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,t):t}}return{done:!0,value:void 0}}[Symbol.iterator](){return new Pg(this.g,this.h,this.m)}}let xs,nB;function m2(e,t){(t=xs?t[xs]:void 0)&&(e[xs]=uo(t))}var h2=Object.freeze({}),oB=Object.freeze({});const sB=typeof Uint8Array.prototype.slice=="function";let b2,Xi=0,dn=0;function _0(e){const t=e>>>0;Xi=t,dn=(e-t)/4294967296>>>0}function rl(e){if(e<0){_0(-e);const[t,i]=Lu(Xi,dn);Xi=t>>>0,dn=i>>>0}else _0(e)}function Nu(e){const t=b2||(b2=new DataView(new ArrayBuffer(8)));t.setFloat32(0,+e,!0),dn=0,Xi=t.getUint32(0,!0)}function Yu(e,t){return 4294967296*t+(e>>>0)}function Mu(e,t){const i=2147483648&t;return i&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),e=Yu(e,t),i?-e:e}function qg(e,t){if(e>>>=0,(t>>>=0)<=2097151)var i=""+(4294967296*t+e);else Su()?i=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(i=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),i+=8147497*t,t*=2,e>=1e7&&(i+=e/1e7>>>0,e%=1e7),i>=1e7&&(t+=i/1e7>>>0,i%=1e7),i=t+P0(i)+P0(e));return i}function P0(e){return e=String(e),"0000000".slice(e.length)+e}function Xd(e){if(e.length<16)rl(Number(e));else if(Su())e=BigInt(e),Xi=Number(e&BigInt(4294967295))>>>0,dn=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");dn=Xi=0;const i=e.length;for(let n=t,o=(i-t)%6+t;o<=i;n=o,o+=6){const l=Number(e.slice(n,o));dn*=1e6,Xi=1e6*Xi+l,Xi>=4294967296&&(dn+=Math.trunc(Xi/4294967296),dn>>>=0,Xi>>>=0)}if(t){const[n,o]=Lu(Xi,dn);Xi=n,dn=o}}}function Lu(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function Rd(e){return e.Qa=!0,e}var rB=Rd(e=>typeof e=="number"),q0=Rd(e=>typeof e=="string"),lB=Rd(e=>typeof e=="boolean"),vd=typeof fr.BigInt=="function"&&typeof fr.BigInt(0)=="bigint",CI=Rd(e=>vd?e>=gB&&e<=aB:e[0]==="-"?$0(e,cB):$0(e,dB));const cB=Number.MIN_SAFE_INTEGER.toString(),gB=vd?BigInt(Number.MIN_SAFE_INTEGER):void 0,dB=Number.MAX_SAFE_INTEGER.toString(),aB=vd?BigInt(Number.MAX_SAFE_INTEGER):void 0;function $0(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let i=0;i<e.length;i++){const n=e[i],o=t[i];if(n>o)return!1;if(n<o)return!0}}function Os(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function p2(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const IB=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Sd(e){const t=typeof e;switch(t){case"bigint":return!0;case"number":return Number.isFinite(e)}return t==="string"&&IB.test(e)}function Al(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?0|e:void 0}function uB(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?e>>>0:void 0}function tm(e){return e[0]!=="-"&&(e.length<20||e.length===20&&Number(e.substring(0,6))<184467)}function Ju(e){return e=Math.trunc(e),Number.isSafeInteger(e)||(rl(e),e=Mu(Xi,dn)),e}function Tu(e){var t=Math.trunc(Number(e));if(Number.isSafeInteger(t))return String(t);if((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),!(e[0]==="-"?e.length<20||e.length===20&&Number(e.substring(0,7))>-922337:e.length<19||e.length===19&&Number(e.substring(0,6))<922337))if(Xd(e),e=Xi,2147483648&(t=dn))if(Su())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[i,n]=Lu(e,t);e="-"+qg(i,n)}else e=qg(e,t);return e}function $g(e){return e==null?e:typeof e=="bigint"?(CI(e)?e=Number(e):(e=BigInt.asIntN(64,e),e=CI(e)?Number(e):String(e)),e):Sd(e)?typeof e=="number"?Ju(e):Tu(e):void 0}function CB(e){if(e==null)return e;var t=typeof e;if(t==="bigint")return String(BigInt.asUintN(64,e));if(Sd(e)){if(t==="string")return t=Math.trunc(Number(e)),Number.isSafeInteger(t)&&t>=0?e=String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),tm(e)||(Xd(e),e=qg(Xi,dn))),e;if(t==="number")return(e=Math.trunc(e))>=0&&Number.isSafeInteger(e)?e:function(i){if(i<0){rl(i);const n=qg(Xi,dn);return i=Number(n),Number.isSafeInteger(i)?i:n}return tm(String(i))?i:(rl(i),Yu(Xi,dn))}(e)}}function Rc(e){if(typeof e!="string")throw Error();return e}function yl(e){if(e!=null&&typeof e!="string")throw Error();return e}function ar(e){return e==null||typeof e=="string"?e:void 0}function ku(e,t,i,n){if(e!=null&&typeof e=="object"&&e.Y===Xc)return e;if(!Array.isArray(e))return i?2&n?(e=t[Q0])?t=e:(pl((e=new t).u),t=t[Q0]=e):t=new t:t=void 0,t;let o=i=un(e);return o===0&&(o|=32&n),o|=2&n,o!==i&&nn(e,o),new t(e)}function mB(e,t,i){if(t)t:{if(!Sd(t=e))throw II("int64");switch(typeof t){case"string":t=Tu(t);break t;case"bigint":if(e=t=BigInt.asIntN(64,t),q0(e)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(e))throw Error(String(e))}else if(rB(e)&&!Number.isSafeInteger(e))throw Error(String(e));t=vd?BigInt(t):lB(t)?t?"1":"0":q0(t)?t.trim()||"0":String(t);break t;default:t=Ju(t)}}else t=$g(e);return typeof(i=(e=t)==null?i?0:void 0:e)=="string"&&(t=+i,Number.isSafeInteger(t))?t:i}function A2(e){var t=Qo==null?void 0:Qo.get(e);if(t)return t;if(Math.random()>.01)return e;if(Sl===void 0)if(typeof Proxy!="function")Sl=null;else try{Sl=Proxy.toString().indexOf("[native code]")!==-1?Proxy:null}catch{Sl=null}return(t=Sl)?(function(i,n){(Qo||(Qo=new WeakMap)).set(i,n),(ag||(ag=new WeakMap)).set(n,i)}(e,t=new t(e,{set:(i,n,o)=>(sl(),i[n]=o,!0)})),t):e}let Qo,ag,Sl,td,zu,hB;function ed(e){switch(typeof e){case"boolean":return zu||(zu=[0,void 0,!0]);case"number":return e>0?void 0:e===0?hB||(hB=[0,void 0]):[-e,void 0];case"string":return[0,e];case"object":return e}}function Ir(e,t){return y2(e,t[0],t[1])}function y2(e,t,i){if(e==null&&(e=td),td=void 0,e==null){var n=96;i?(e=[i],n|=512):e=[],t&&(n=-16760833&n|(1023&t)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(2048&(n=un(e)))throw Error("farr");if(64&n)return e;if(n|=64,i&&(n|=512,i!==e[0]))throw Error("mid");t:{const o=(i=e).length;if(o){const l=o-1;if(Hu(i[l])){if((t=l-(+!!(512&(n|=256))-1))>=1024)throw Error("pvtlmt");n=-16760833&n|(1023&t)<<14;break t}}if(t){if((t=Math.max(t,o-(+!!(512&n)-1)))>1024)throw Error("spvt");n=-16760833&n|(1023&t)<<14}}}return nn(e,n),e}const bB={};let pB=function(){try{return Ru(new class extends Map{constructor(){super()}}),!1}catch{return!0}}();class pa{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,i){return this.g.set(t,i),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,i){return this.g.forEach(t,i)}[Symbol.iterator](){return this.entries()}}const AB=pB?(Object.setPrototypeOf(pa.prototype,Map.prototype),Object.defineProperties(pa.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),pa):class extends Map{constructor(){super()}};function em(e){return e}function Aa(e){if(2&e.L)throw Error("Cannot mutate an immutable Map")}var Wo=class extends AB{constructor(e,t,i=em,n=em){super();let o=un(e);o|=64,nn(e,o),this.L=o,this.V=t,this.S=i,this.aa=this.V?yB:n;for(let l=0;l<e.length;l++){const I=e[l],m=i(I[0],!1,!0);let Z=I[1];t?Z===void 0&&(Z=null):Z=n(I[1],!1,!0,void 0,void 0,o),super.set(m,Z)}}oa(e=im){if(this.size!==0)return this.Z(e)}Z(e=im){const t=[],i=super.entries();for(var n;!(n=i.next()).done;)(n=n.value)[0]=e(n[0]),n[1]=e(n[1]),t.push(n);return t}clear(){Aa(this),super.clear()}delete(e){return Aa(this),super.delete(this.S(e,!0,!1))}entries(){var e=this.na();return new Pg(e,ZB,this)}keys(){return this.Ia()}values(){var e=this.na();return new Pg(e,Wo.prototype.get,this)}forEach(e,t){super.forEach((i,n)=>{e.call(t,this.get(n),n,this)})}set(e,t){return Aa(this),(e=this.S(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.aa(t,!0,!0,this.V,!1,this.L))}Oa(e){const t=this.S(e[0],!1,!0);e=e[1],e=this.V?e===void 0?null:e:this.aa(e,!1,!0,void 0,!1,this.L),super.set(t,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);const t=super.get(e);if(t!==void 0){var i=this.V;return i?((i=this.aa(t,!1,!0,i,this.ta,this.L))!==t&&super.set(e,i),i):t}}na(){return Array.from(super.keys())}Ia(){return super.keys()}[Symbol.iterator](){return this.entries()}};function yB(e,t,i,n,o,l){return e=ku(e,n,i,l),o&&(e=Fd(e)),e}function im(e){return e}function ZB(e){return[e,this.get(e)]}let fB;function nm(){return fB||(fB=new Wo(pl([]),void 0,void 0,void 0,bB))}function Ku(e,t,i,n,o){if(e!=null){if(Array.isArray(e))e=_g(e)?void 0:o&&2&un(e)?e:wd(e,t,i,n!==void 0,o);else if(Hu(e)){const l={};for(let I in e)l[I]=Ku(e[I],t,i,n,o);e=l}else e=t(e,n);return e}}function wd(e,t,i,n,o){const l=n||i?un(e):0;n=n?!!(32&l):void 0;const I=uo(e);for(let m=0;m<I.length;m++)I[m]=Ku(I[m],t,i,n,o);return i&&(m2(I,e),i(l,I)),I}function GB(e){return Ku(e,Uu,void 0,void 0,!1)}function Uu(e){return e.Y===Xc?e.toJSON():e instanceof Wo?e.oa(GB):function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return CI(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(_g(t))return}else{if(Vc(t))return U0(t);if(t instanceof us){const i=t.g;return i==null?"":typeof i=="string"?i:t.g=U0(i)}if(t instanceof Wo)return t.oa()}}return t}(e)}function mI(e,t,i=uI){if(e!=null){if(g2&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var n=un(e);return 2&n?e:(t&&(t=n===0||!!(32&n)&&!(64&n||!(16&n))),t?(nn(e,-12293&(34|n)),e):wd(e,mI,4&n?uI:i,!0,!0))}return e.Y===Xc?(i=e.u,e=2&(n=gi(i))?e:Eu(e,i,n,!0)):e instanceof Wo&&!(2&e.L)&&(i=pl(e.Z(mI)),e=new Wo(i,e.V,e.S,e.aa)),e}}function Eu(e,t,i,n){return e=e.constructor,td=t=Z2(t,i,n),t=new e(t),td=void 0,t}function Z2(e,t,i){const n=i||2&t?uI:iB,o=!!(32&t);return e=function(l,I,m){const Z=uo(l);var x=Z.length;const L=256&I?Z[x-1]:void 0;for(x+=L?-1:0,I=512&I?1:0;I<x;I++)Z[I]=m(Z[I]);if(L){I=Z[I]={};for(const K in L)I[K]=m(L[K])}return m2(Z,l),Z}(e,t,l=>mI(l,o,n)),wu(e,32|(i?2:0)),e}function Fd(e){const t=e.u,i=gi(t);return 2&i?Eu(e,t,i,!1):e}function f2(e,t,i,n){return!(4&t)||i!=null&&(!n&&i===0&&(4096&t||8192&t)&&(e.constructor[D0]=1+(0|e.constructor[D0]))<5&&sl(),i!==0&&!(i&t))}function Ms(e,t){return $o(e=e.u,gi(e),t)}function om(e,t,i,n){if(!((t=n+(+!!(512&t)-1))<0||t>=e.length||t>=i))return e[t]}function $o(e,t,i,n){if(i===-1)return null;const o=t>>14&1023||536870912;if(!(i>=o)){var l=e.length;return n&&256&t&&(n=e[l-1][i])!=null?(om(e,t,o,i)&&ba!=null&&((t=(e=ha!=null?ha:ha={})[ba]||0)>=4||(e[ba]=t+1,sl())),n):om(e,t,o,i)}return 256&t?e[e.length-1][i]:void 0}function Hi(e,t,i,n){const o=e.u;let l=gi(o);return Ds(l),Qi(o,l,t,i,n),e}function Qi(e,t,i,n,o){const l=t>>14&1023||536870912;if(i>=l||o&&!_5){let I=t;if(256&t)o=e[e.length-1];else{if(n==null)return I;o=e[l+(+!!(512&t)-1)]={},I|=256}return o[i]=n,i<l&&(e[i+(+!!(512&t)-1)]=void 0),I!==t&&nn(e,I),I}return e[i+(+!!(512&t)-1)]=n,256&t&&i in(e=e[e.length-1])&&delete e[i],t}function Zl(e,t,i,n,o){var l=2&t;let I=$o(e,t,i,o);Array.isArray(I)||(I=Fu);const m=!(2&n);n=!(1&n);const Z=!!(32&t);let x=un(I);return x!==0||!Z||l||m?1&x||(x|=1,nn(I,x)):(x|=33,nn(I,x)),l?(e=!1,2&x||(pl(I),e=!!(4&x)),(n||e)&&Object.freeze(I)):(l=!!(2&x)||!!(2048&x),n&&l?(I=uo(I),n=1,Z&&!m&&(n|=32),nn(I,n),Qi(e,t,i,I,o)):m&&32&x&&!l&&jg(I,32)),I}function Ig(e,t){e=e.u;let i=gi(e);const n=$o(e,i,t),o=Os(n);return o!=null&&o!==n&&Qi(e,i,t,o),o}function G2(e){e=e.u;let t=gi(e);const i=$o(e,t,1),n=xu(i,!0,!!(34&t));return n!=null&&n!==i&&Qi(e,t,1,n),n}function Pr(e,t,i){var n=h2===void 0?2:5;const o=e.u;var l=gi(o);const I=2&l?1:n;n=V2(o,l,t);var m=un(n);if(f2(e,m,void 0,!1)){(4&m||Object.isFrozen(n))&&(n=uo(n),m=Vr(m,l),l=Qi(o,l,t,n));let x=e=0;for(;e<n.length;e++){const L=i(n[e]);L!=null&&(n[x++]=L)}x<e&&(n.length=x),m=-4097&(20|(m=W2(m,l))),nn(n,m&=-8193),2&m&&Object.freeze(n)}let Z;return I===1||I===4&&32&m?gs(m)||(l=m,(m|=2)!==l&&nn(n,m),Object.freeze(n)):(i=I===5&&(!!(32&m)||gs(m)||!!(Qo!=null&&Qo.get(n))),(I===2||i)&&gs(m)&&(n=uo(n),m=ll(m=Vr(m,l),l,!1),nn(n,m),l=Qi(o,l,t,n)),gs(m)||(t=m,(m=ll(m,l,!1))!==t&&nn(n,m)),i&&(Z=A2(n))),Z||n}function V2(e,t,i){return e=$o(e,t,i),Array.isArray(e)?e:Fu}function W2(e,t){return e===0&&(e=Vr(e,t)),1|e}function gs(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function B2(e){e=uo(e);for(let t=0;t<e.length;t++){const i=e[t]=uo(e[t]);Array.isArray(i[1])&&(i[1]=pl(i[1]))}return e}function hI(e,t,i,n){e=e.u;let o=gi(e);Ds(o),Qi(e,o,t,(n==="0"?Number(i)===0:i===n)?void 0:i)}function vc(e,t,i,n){var l;const o=gi(e);Ds(o),e=Zl(e,o,t,2),n=i(n,(l=4&(t=un(e))?4096&t?4096:8192&t?8192:0:void 0)!=null?l:0),e.push(n)}function VB(e){return e}function ya(e,t){var i=cp;return Du(Qu(e=e.u),e,gi(e),i)===t?t:-1}function Qu(e){var i;if(bl)return(i=e[vl])!=null?i:e[vl]=new Map;if(vl in e)return e[vl];const t=new Map;return Object.defineProperty(e,vl,{value:t}),t}function X2(e,t,i,n){const o=Qu(e),l=Du(o,e,t,i);return l!==n&&(l&&(t=Qi(e,t,l)),o.set(i,n)),t}function Du(e,t,i,n){let o=e.get(n);if(o!=null)return o;o=0;for(let l=0;l<n.length;l++){const I=n[l];$o(t,i,I)!=null&&(o!==0&&(i=Qi(t,i,o)),o=I)}return e.set(n,o),o}function Ou(e,t,i,n){let o=gi(e);const l=$o(e,o,i,n);let I;if(l!=null&&l.Y===Xc)return(t=Fd(l))!==l&&Qi(e,o,i,t,n),t.u;if(Array.isArray(l)){const m=un(l);I=2&m?Z2(l,m,!1):l,I=Ir(I,t)}else I=Ir(void 0,t);return I!==l&&Qi(e,o,i,I,n),I}function R2(e,t,i,n){e=e.u;let o=gi(e);const l=$o(e,o,i,n);return(t=ku(l,t,!1,o))!==l&&t!=null&&Qi(e,o,i,t,n),t}function Oe(e,t,i,n=!1){if((t=R2(e,t,i,n))==null)return t;e=e.u;let o=gi(e);if(!(2&o)){const l=Fd(t);l!==t&&Qi(e,o,i,t=l,n)}return t}function v2(e,t,i,n,o,l,I){var m=!!(2&t);o=m?1:o,l=!!l,I&&(I=!m),m=V2(e,t,n);var Z=un(m),x=!!(4&Z);if(!x){var L=m,K=t;const ut=!!(2&(Z=W2(Z,t)));ut&&(K|=2);let P=!ut,ct=!0,Rt=0,Bt=0;for(;Rt<L.length;Rt++){const Yt=ku(L[Rt],i,!1,K);if(Yt instanceof i){if(!ut){const _=!!(2&un(Yt.u));P&&(P=!_),ct&&(ct=_)}L[Bt++]=Yt}}Bt<Rt&&(L.length=Bt),Z|=4,Z=ct?16|Z:-17&Z,nn(L,Z=P?8|Z:-9&Z),ut&&Object.freeze(L)}if(I&&!(8&Z||!m.length&&(o===1||o===4&&32&Z))){for(gs(Z)&&(m=uo(m),Z=Vr(Z,t),t=Qi(e,t,n,m)),i=m,I=Z,L=0;L<i.length;L++)(Z=i[L])!==(K=Fd(Z))&&(i[L]=K);I|=8,I=i.length?-17&I:16|I,nn(i,I),Z=I}let st;return o===1||o===4&&32&Z?gs(Z)||(t=Z,(Z|=!m.length||16&Z&&(!x||32&Z)?2:2048)!==t&&nn(m,Z),Object.freeze(m)):(x=o===5&&(!!(32&Z)||gs(Z)||!!(Qo!=null&&Qo.get(m))),(o===2||x)&&gs(Z)&&(m=uo(m),Z=ll(Z=Vr(Z,t),t,l),nn(m,Z),t=Qi(e,t,n,m)),gs(Z)||(e=Z,(Z=ll(Z,t,l))!==e&&nn(m,Z)),x&&(st=A2(m))),st||m}function hs(e,t,i){e=e.u;const n=gi(e);return v2(e,n,t,i,h2===void 0?2:5,!1,!(2&n))}function se(e,t,i,n,o){return n==null&&(n=void 0),Hi(e,i,n,o)}function Kl(e,t,i,n){n==null&&(n=void 0);t:{e=e.u;let o=gi(e);if(Ds(o),n==null){const l=Qu(e);if(Du(l,e,o,i)!==t)break t;l.set(i,0)}else o=X2(e,o,i,t);Qi(e,o,t,n)}}function Vr(e,t){return-2049&(e=32|(2&t?2|e:-3&e))}function ll(e,t,i){return 32&t&&i||(e&=-33),e}function id(e,t,i,n){e=e.u;const o=gi(e);Ds(o),t=v2(e,o,i,t,2,!0),i=n!=null?n:new i,t.push(i),2&un(i.u)?jg(t,8):jg(t,16)}function Ho(e,t){return e!=null?e:t}function Go(e,t){return Al(Ms(e,t))}function bn(e,t){return Ho(Ig(e,t),0)}function jo(e,t){return Ho(ar(Ms(e,t)),"")}function dc(e,t,i){if(i!=null&&typeof i!="boolean")throw e=typeof i,Error(`Expected boolean but got ${e!="object"?e:i?Array.isArray(i)?"array":e:"null"}: ${i}`);Hi(e,t,i)}function _o(e,t,i){if(i!=null){if(typeof i!="number"||!Number.isFinite(i))throw II("int32");i|=0}Hi(e,t,i)}function jt(e,t,i){if(i!=null&&typeof i!="number")throw Error(`Value of float/double field must be a number, found ${typeof i}: ${i}`);Hi(e,t,i)}function nd(e,t,i){{const m=e.u;let Z=gi(m);if(Ds(Z),i==null)Qi(m,Z,t);else{i=(ag==null?void 0:ag.get(i))||i;var n,o=un(i),l=o,I=!!(2&o)||Object.isFrozen(i);if((n=!I)&&(n=oB===void 0||!1),f2(e,o))for(o=21,I&&(i=uo(i),l=0,o=ll(o=Vr(o,Z),Z,!0)),e=0;e<i.length;e++)i[e]=Rc(i[e]);n&&(i=uo(i),l=0,o=ll(o=Vr(o,Z),Z,!0)),o!==l&&nn(i,o),Qi(m,Z,t,i)}}}function S2(e,t){return Error(`Invalid wire type: ${e} (at position ${t})`)}function ju(){return Error("Failed to read varint, encoding is invalid.")}function w2(e,t){return Error(`Tried to read past the end of the data ${t} > ${e}`)}function _u(e){if(typeof e=="string")return{buffer:a2(e),N:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),N:!1};if(e.constructor===Uint8Array)return{buffer:e,N:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),N:!1};if(e.constructor===us)return{buffer:vu(e)||new Uint8Array(0),N:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),N:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Pu(e,t){let i,n=0,o=0,l=0;const I=e.h;let m=e.g;do i=I[m++],n|=(127&i)<<l,l+=7;while(l<32&&128&i);for(l>32&&(o|=(127&i)>>4),l=3;l<32&&128&i;l+=7)i=I[m++],o|=(127&i)<<l;if(ur(e,m),i<128)return t(n>>>0,o>>>0);throw ju()}function qu(e){let t=0,i=e.g;const n=i+10,o=e.h;for(;i<n;){const l=o[i++];if(t|=l,(128&l)==0)return ur(e,i),!!(127&t)}throw ju()}function Ls(e){const t=e.h;let i=e.g,n=t[i++],o=127&n;if(128&n&&(n=t[i++],o|=(127&n)<<7,128&n&&(n=t[i++],o|=(127&n)<<14,128&n&&(n=t[i++],o|=(127&n)<<21,128&n&&(n=t[i++],o|=n<<28,128&n&&128&t[i++]&&128&t[i++]&&128&t[i++]&&128&t[i++]&&128&t[i++])))))throw ju();return ur(e,i),o}function Js(e){return Ls(e)>>>0}function bI(e){var t=e.h;const i=e.g,n=t[i],o=t[i+1],l=t[i+2];return t=t[i+3],ur(e,e.g+4),(n<<0|o<<8|l<<16|t<<24)>>>0}function pI(e){var t=bI(e);e=2*(t>>31)+1;const i=t>>>23&255;return t&=8388607,i==255?t?NaN:e*(1/0):i==0?e*Math.pow(2,-149)*t:e*Math.pow(2,i-150)*(t+Math.pow(2,23))}function WB(e){return Ls(e)}function Za(e,t,{da:i=!1}={}){e.da=i,t&&(t=_u(t),e.h=t.buffer,e.m=t.N,e.j=0,e.l=e.h.length,e.g=e.j)}function ur(e,t){if(e.g=t,t>e.l)throw w2(e.l,t)}function F2(e,t){if(t<0)throw Error(`Tried to read a negative byte length: ${t}`);const i=e.g,n=i+t;if(n>e.l)throw w2(t,e.l-i);return e.g=n,i}function H2(e,t){if(t==0)return Gr();var i=F2(e,t);return e.da&&e.m?i=e.h.subarray(i,i+t):(e=e.h,i=i===(t=i+t)?new Uint8Array(0):sB?e.slice(i,t):new Uint8Array(e.subarray(i,t))),i.length==0?Gr():new us(i,ol)}Wo.prototype.toJSON=void 0,Wo.prototype.Ja=C2;var sm=[];function x2(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var i=Js(e.g);if(t=i>>>3,!((i&=7)>=0&&i<=5))throw S2(i,e.l);if(t<1)throw Error(`Invalid field number: ${t} (at position ${e.l})`);return e.m=t,e.h=i,!0}function ug(e){switch(e.h){case 0:e.h!=0?ug(e):qu(e.g);break;case 1:ur(e=e.g,e.g+8);break;case 2:if(e.h!=2)ug(e);else{var t=Js(e.g);ur(e=e.g,e.g+t)}break;case 5:ur(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!x2(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=t)throw Error("Unmatched end-group tag");break}ug(e)}break;default:throw S2(e.h,e.l)}}function Sc(e,t,i){const n=e.g.l,o=Js(e.g),l=e.g.g+o;let I=l-n;if(I<=0&&(e.g.l=l,i(t,e,void 0,void 0,void 0),I=l-e.g.g),I)throw Error(`Message parsing ended unexpectedly. Expected to read ${o} bytes, instead read ${o-I} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=l,e.g.l=n,t}function $u(e){var t=Js(e.g),i=F2(e=e.g,t);if(e=e.h,D5){var n,o=e;(n=Ca)||(n=Ca=new TextDecoder("utf-8",{fatal:!0})),t=i+t,o=i===0&&t===o.length?o:o.subarray(i,t);try{var l=n.decode(o)}catch(m){if($c===void 0){try{n.decode(new Uint8Array([128]))}catch{}try{n.decode(new Uint8Array([97])),$c=!0}catch{$c=!1}}throw!$c&&(Ca=void 0),m}}else{t=(l=i)+t,i=[];let m,Z=null;for(;l<t;){var I=e[l++];I<128?i.push(I):I<224?l>=t?tr():(m=e[l++],I<194||(192&m)!=128?(l--,tr()):i.push((31&I)<<6|63&m)):I<240?l>=t-1?tr():(m=e[l++],(192&m)!=128||I===224&&m<160||I===237&&m>=160||(192&(n=e[l++]))!=128?(l--,tr()):i.push((15&I)<<12|(63&m)<<6|63&n)):I<=244?l>=t-2?tr():(m=e[l++],(192&m)!=128||m-144+(I<<28)>>30!=0||(192&(n=e[l++]))!=128||(192&(o=e[l++]))!=128?(l--,tr()):(I=(7&I)<<18|(63&m)<<12|(63&n)<<6|63&o,I-=65536,i.push(55296+(I>>10&1023),56320+(1023&I)))):tr(),i.length>=8192&&(Z=z0(Z,i),i.length=0)}l=z0(Z,i)}return l}function N2(e){const t=Js(e.g);return H2(e.g,t)}function Hd(e,t,i){var n=Js(e.g);for(n=e.g.g+n;e.g.g<n;)i.push(t(e.g))}var tg=[];let od;function Mo(e,t,i){t.g?t.m(e,t.g,t.h,i,!0):t.m(e,t.h,i,!0)}var Ot=class{constructor(e,t){this.u=y2(e,t)}toJSON(){return Y2(this)}l(){var e=u9;return e.g?e.l(this,e.g,e.h,!0):e.l(this,e.h,e.defaultValue,!0)}clone(){const e=this.u;return Eu(this,e,gi(e),!1)}N(){return!!(2&un(this.u))}};function Y2(e){e=od?e.u:wd(e.u,Uu,void 0,void 0,!1);{var t=!od;let x=e.length;if(x){var i=e[x-1],n=Hu(i);n?x--:i=void 0;var o=e;if(n){t:{var l=i,I={};if(n=!1,l)for(var m in l){if(isNaN(+m)){I[m]=l[m];continue}let L=l[m];Array.isArray(L)&&(_g(L)||O0(L)&&L.size===0)&&(L=null),L==null&&(n=!0),L!=null&&(I[m]=L)}if(n){for(let L in I)break t;I=null}else I=l}l=I==null?i!=null:I!==i}for(;x>0&&((m=o[x-1])==null||_g(m)||O0(m)&&m.size===0);x--)var Z=!0;(o!==e||l||Z)&&(t?(Z||l||I)&&(o.length=x):o=Array.prototype.slice.call(o,0,x),I&&o.push(I)),Z=o}else Z=e}return Z}function rm(e){return e?/^\d+$/.test(e)?(Xd(e),new lm(Xi,dn)):null:BB||(BB=new lm(0,0))}Ot.prototype.Y=Xc,Ot.prototype.toString=function(){try{return od=!0,Y2(this).toString()}finally{od=!1}};var lm=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let BB;function cm(e){return e?/^-?\d+$/.test(e)?(Xd(e),new gm(Xi,dn)):null:XB||(XB=new gm(0,0))}var gm=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let XB;function sd(e,t,i){for(;i>0||t>127;)e.g.push(127&t|128),t=(t>>>7|i<<25)>>>0,i>>>=7;e.g.push(t)}function wc(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function xd(e,t){if(t>=0)wc(e,t);else{for(let i=0;i<9;i++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function ac(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function cl(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function Bo(e,t,i){wc(e.g,8*t+i)}function tC(e,t){return Bo(e,t,2),t=e.g.end(),cl(e,t),t.push(e.h),t}function eC(e,t){var i=t.pop();for(i=e.h+e.g.length()-i;i>127;)t.push(127&i|128),i>>>=7,e.h++;t.push(i),e.h++}function Nd(e,t,i){Bo(e,t,2),wc(e.g,i.length),cl(e,e.g.end()),cl(e,i)}function AI(e,t,i,n){i!=null&&(t=tC(e,t),n(i,e),eC(e,t))}class fl{constructor(t,i,n,o){this.g=t,this.h=i,this.l=n,this.pa=o}}function M2(e){return Array.isArray(e)?e[0]instanceof fl?e:[LB,e]:[e,void 0]}function Gl(e,t){if(Array.isArray(t)){var i=un(t);if(4&i)return t;for(var n=0,o=0;n<t.length;n++){const l=e(t[n]);l!=null&&(t[o++]=l)}return o<n&&(t.length=o),nn(t,-12289&(5|i)),2&i&&Object.freeze(t),t}}const dm=Symbol();function iC(e){let t=e[dm];if(!t){const i=J2(e),n=oC(e),o=n.l;t=o?(l,I)=>o(l,I,n):(l,I)=>{var L;for(;x2(I)&&I.h!=4;){var m=I.m;let K=n[m];const st=!K;let ut=!1;if(!K){var Z=n.U;if(Z){var x=Z[m];x&&(ut=(L=Z.O)==null?void 0:L[m],(!r2||ut)&&(Z=RB(x))&&(K=n[m]=Z))}}K&&K(I,l,m)||(m=(Z=I).l,ug(Z),Z.ia?Z=void 0:(x=Z.g.g-m,Z.g.g=m,Z=H2(Z.g,x)),m=l,Z&&(xs||(xs=Symbol()),(x=m[xs])?x.push(Z):m[xs]=[Z])),st&&K&&!ut&&fI++<5&&sl()}i===L2||i===Cg||i.j||(l[nB||(nB=Symbol())]=i)},e[dm]=t}return t}function RB(e){const t=(e=M2(e))[0].g;if(e=e[1]){const i=iC(e),n=oC(e).T;return(o,l,I)=>t(o,l,I,n,i)}return t}class fa{}let L2,Cg;const Ul=Symbol();function vB(e,t,i){const n=i[1];let o;if(n){const l=n[Ul];o=l?l.T:ed(n[0]),e[t]=l!=null?l:n}o&&o===zu?(e.g||(e.g=new Set)).add(t):i[0]&&(e.h||(e.h=new Set)).add(t)}function am(e,t){return[e.l,!t||t[0]>0?void 0:t]}function J2(e){var t=e[Ul];if(t)return t;if(!(t=nC(e,e[Ul]=new fa,am,am,vB)).U&&!t.h&&!t.g){let i=!0;for(let n in t)isNaN(n)||(i=!1);i?(ed(e[0])===zu?Cg?t=Cg:((t=new fa).T=ed(!0),t=Cg=t):t=L2||(L2=new fa),t=e[Ul]=t):t.j=!0}return t}function SB(e,t,i){e[t]=i}function nC(e,t,i,n,o=SB){t.T=ed(e[0]);let l=0;var I=e[++l];I&&I.constructor===Object&&(t.U=I,typeof(I=e[++l])=="function"&&(t.l=I,t.m=e[++l],I=e[++l]));const m={};for(;Array.isArray(I)&&typeof I[0]=="number"&&I[0]>0;){for(var Z=0;Z<I.length;Z++)m[I[Z]]=I;I=e[++l]}for(Z=1;I!==void 0;){let K;typeof I=="number"&&(Z+=I,I=e[++l]);var x=void 0;if(I instanceof fl?K=I:(K=JB,l--),K.pa){I=e[++l],x=e;var L=l;typeof I=="function"&&(I=I(),x[L]=I),x=I}for(L=Z+1,typeof(I=e[++l])=="number"&&I<0&&(L-=I,I=e[++l]);Z<L;Z++){const st=m[Z];o(t,Z,x?n(K,x,st):i(K,st))}}return t}const Im=Symbol();function T2(e){let t=e[Im];if(!t){const i=Yd(e);t=(n,o)=>z2(n,o,i),e[Im]=t}return t}const yI=Symbol();function wB(e){return e.h}function FB(e,t){let i,n;const o=e.h;return(l,I,m)=>o(l,I,m,n||(n=Yd(t).T),i||(i=T2(t)))}function Yd(e){let t=e[yI];return t||(t=nC(e,e[yI]={},wB,FB),k2(e),t)}const ZI=Symbol();function HB(e,t){const i=e.g;return t?(n,o,l)=>i(n,o,l,t):i}function xB(e,t,i){const n=e.g;let o,l;return(I,m,Z)=>n(I,m,Z,l||(l=oC(t).T),o||(o=iC(t)),i)}function oC(e){let t=e[ZI];return t||(J2(e),t=nC(e,e[ZI]={},HB,xB),k2(e),t)}function k2(e){ZI in e&&Ul in e&&yI in e&&(e.length=0)}function um(e,t){var l;var i=e[t];if(i)return i;if(i=e.U){var n=i[t];if(n){var o=(n=M2(n))[0].h;if(n=n[1],i=(l=i.O)==null?void 0:l[t],!r2||i){if(n){const I=T2(n),m=Yd(n).T;i=(i=e.m)?i(m,I):(Z,x,L)=>o(Z,x,L,m,I)}else i=o;return e[t]=i}}}}function z2(e,t,i){var Z,x,L;for(var n=gi(e),o=+!!(512&n)-1,l=e.length,I=512&n?1:0,m=l+(256&n?-1:0);I<m;I++){const K=e[I];if(K==null)continue;const st=I-o,ut=um(i,st);if(!ut)continue;const P=i.U;(P==null?void 0:P[st])&&!((Z=P==null?void 0:P.O)!=null&&Z[st])&&fI++<5&&sl(),ut(t,K,st)}if(256&n){n=e[l-1];for(let K in n)o=+K,!Number.isNaN(o)&&(l=n[K])!=null&&(m=um(i,o))&&(((x=I=i.U)==null?void 0:x[o])&&!((L=I==null?void 0:I.O)!=null&&L[o])&&fI++<5&&sl(),m(t,l,o))}if(e=xs?e[xs]:void 0)for(cl(t,t.g.end()),i=0;i<e.length;i++)cl(t,vu(e[i])||new Uint8Array(0))}function oo(e,t){return new fl(e,t,!1,!1)}function Vl(e,t){return new fl(e,t,!0,!1)}function Md(e,t){return new fl(e,t,!1,!0)}function so(e,t,i){Qi(e,gi(e),t,i)}var NB=Md(function(e,t,i,n,o){return e.h===2&&(e=Sc(e,Ir([void 0,void 0],n),o),Ds(n=gi(t)),(o=$o(t,n,i))instanceof Wo?(2&o.L)!=0?((o=o.Z()).push(e),Qi(t,n,i,o)):o.Oa(e):Array.isArray(o)?(2&un(o)&&Qi(t,n,i,o=B2(o)),o.push(e)):Qi(t,n,i,[e]),!0)},function(e,t,i,n,o){if(t instanceof Wo)t.forEach((l,I)=>{AI(e,i,Ir([I,l],n),o)});else if(Array.isArray(t))for(let l=0;l<t.length;l++){const I=t[l];Array.isArray(I)&&AI(e,i,Ir(I,n),o)}});let fI=0;function K2(e,t,i){t=function(n){if(n==null)return n;const o=typeof n;if(o==="bigint")return String(BigInt.asIntN(64,n));if(Sd(n)){if(o==="string")return Tu(n);if(o==="number")return Ju(n)}}(t),t!=null&&(typeof t=="string"&&cm(t),t!=null&&(Bo(e,i,0),typeof t=="number"?(e=e.g,rl(t),sd(e,Xi,dn)):(i=cm(t),sd(e.g,i.h,i.g))))}function U2(e,t,i){(t=Al(t))!=null&&t!=null&&(Bo(e,i,0),xd(e.g,t))}function E2(e,t,i){(t=p2(t))!=null&&(Bo(e,i,0),e.g.g.push(t?1:0))}function Q2(e,t,i){(t=ar(t))!=null&&Nd(e,i,o2(t))}function Ld(e,t,i,n,o){AI(e,i,t instanceof Ot?t.u:Array.isArray(t)?Ir(t,n):void 0,o)}function D2(e,t,i){(t=t==null||typeof t=="string"||Vc(t)||t instanceof us?t:void 0)!=null&&Nd(e,i,_u(t).buffer)}function O2(e,t,i){return(e.h===5||e.h===2)&&(t=Zl(t,gi(t),i,2,!1),e.h==2?Hd(e,pI,t):t.push(pI(e.g)),!0)}var fn,ss=oo(function(e,t,i){if(e.h!==1)return!1;var n=e.g;e=bI(n);const o=bI(n);n=2*(o>>31)+1;const l=o>>>20&2047;return e=4294967296*(1048575&o)+e,so(t,i,l==2047?e?NaN:n*(1/0):l==0?n*Math.pow(2,-1074)*e:n*Math.pow(2,l-1075)*(e+4503599627370496)),!0},function(e,t,i){(t=Os(t))!=null&&(Bo(e,i,1),e=e.g,(i=b2||(b2=new DataView(new ArrayBuffer(8)))).setFloat64(0,+t,!0),Xi=i.getUint32(0,!0),dn=i.getUint32(4,!0),ac(e,Xi),ac(e,dn))}),Sn=oo(function(e,t,i){return e.h===5&&(so(t,i,pI(e.g)),!0)},function(e,t,i){(t=Os(t))!=null&&(Bo(e,i,5),e=e.g,Nu(t),ac(e,Xi))}),YB=Vl(O2,function(e,t,i){if((t=Gl(Os,t))!=null)for(let I=0;I<t.length;I++){var n=e,o=i,l=t[I];l!=null&&(Bo(n,o,5),n=n.g,Nu(l),ac(n,Xi))}}),sC=Vl(O2,function(e,t,i){if((t=Gl(Os,t))!=null&&t.length){Bo(e,i,2),wc(e.g,4*t.length);for(let n=0;n<t.length;n++)i=e.g,Nu(t[n]),ac(i,Xi)}}),Ts=oo(function(e,t,i){return e.h===0&&(so(t,i,Pu(e.g,Mu)),!0)},K2),Ga=oo(function(e,t,i){return e.h===0&&(so(t,i,(e=Pu(e.g,Mu))===0?void 0:e),!0)},K2),MB=oo(function(e,t,i){return e.h===0&&(so(t,i,Pu(e.g,Yu)),!0)},function(e,t,i){(t=CB(t))!=null&&(typeof t=="string"&&rm(t),t!=null&&(Bo(e,i,0),typeof t=="number"?(e=e.g,rl(t),sd(e,Xi,dn)):(i=rm(t),sd(e.g,i.h,i.g))))}),an=oo(function(e,t,i){return e.h===0&&(so(t,i,Ls(e.g)),!0)},U2),Jd=Vl(function(e,t,i){return(e.h===0||e.h===2)&&(t=Zl(t,gi(t),i,2,!1),e.h==2?Hd(e,Ls,t):t.push(Ls(e.g)),!0)},function(e,t,i){if((t=Gl(Al,t))!=null&&t.length){i=tC(e,i);for(let n=0;n<t.length;n++)xd(e.g,t[n]);eC(e,i)}}),qr=oo(function(e,t,i){return e.h===0&&(so(t,i,(e=Ls(e.g))===0?void 0:e),!0)},U2),en=oo(function(e,t,i){return e.h===0&&(so(t,i,qu(e.g)),!0)},E2),El=oo(function(e,t,i){return e.h===0&&(so(t,i,(e=qu(e.g))===!1?void 0:e),!0)},E2),zn=Vl(function(e,t,i){return e.h===2&&(vc(t,i,VB,e=$u(e)),!0)},function(e,t,i){if((t=Gl(ar,t))!=null)for(let I=0;I<t.length;I++){var n=e,o=i,l=t[I];l!=null&&Nd(n,o,o2(l))}}),vs=oo(function(e,t,i){return e.h===2&&(so(t,i,(e=$u(e))===""?void 0:e),!0)},Q2),hi=oo(function(e,t,i){return e.h===2&&(so(t,i,$u(e)),!0)},Q2),LB=Md(function(e,t,i,n,o){return e.h===2&&(Sc(e,Ou(t,n,i,!0),o),!0)},Ld),JB=Md(function(e,t,i,n,o){return e.h===2&&(Sc(e,Ou(t,n,i),o),!0)},Ld);fn=new fl(function(e,t,i,n,o){if(e.h!==2)return!1;n=Ir(void 0,n);let l=gi(t);Ds(l);let I=Zl(t,l,i,3);return l=gi(t),4&un(I)&&(I=uo(I),nn(I,-2079&(1|un(I))),Qi(t,l,i,I)),I.push(n),Sc(e,n,o),!0},function(e,t,i,n,o){if(Array.isArray(t))for(let l=0;l<t.length;l++)Ld(e,t[l],i,n,o)},!0,!0);var Bi=Md(function(e,t,i,n,o,l){return e.h===2&&(X2(t,gi(t),l,i),Sc(e,t=Ou(t,n,i),o),!0)},Ld),j2=oo(function(e,t,i){return e.h===2&&(so(t,i,N2(e)),!0)},D2),TB=Vl(function(e,t,i){return(e.h===0||e.h===2)&&(t=Zl(t,gi(t),i,2,!1),e.h==2?Hd(e,Js,t):t.push(Js(e.g)),!0)},function(e,t,i){if((t=Gl(uB,t))!=null)for(let I=0;I<t.length;I++){var n=e,o=i,l=t[I];l!=null&&(Bo(n,o,0),wc(n.g,l))}}),Po=oo(function(e,t,i){return e.h===0&&(so(t,i,Ls(e.g)),!0)},function(e,t,i){(t=Al(t))!=null&&(t=parseInt(t,10),Bo(e,i,0),xd(e.g,t))});class kB{constructor(t,i){this.h=t,this.g=i,this.l=Oe,this.m=se,this.defaultValue=void 0}}function Lo(e,t){return new kB(e,t)}function js(e,t){return(i,n)=>{if(tg.length){const l=tg.pop();l.o(n),Za(l.g,i,n),i=l}else i=new class{constructor(l,I){if(sm.length){const m=sm.pop();Za(m,l,I),l=m}else l=new class{constructor(m,Z){this.h=null,this.m=!1,this.g=this.l=this.j=0,Za(this,m,Z)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.da=!1}}(l,I);this.g=l,this.l=this.g.g,this.h=this.m=-1,this.o(I)}o({ia:l=!1}={}){this.ia=l}}(i,n);try{const l=new e,I=l.u;iC(t)(I,i);var o=l}finally{i.g.clear(),i.m=-1,i.h=-1,tg.length<100&&tg.push(i)}return o}}function Td(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const I=this.g;return this.g=[],I}}}};z2(this.u,t,Yd(e)),cl(t,t.g.end());const i=new Uint8Array(t.h),n=t.l,o=n.length;let l=0;for(let I=0;I<o;I++){const m=n[I];i.set(m,l),l+=m.length}return t.l=[i],i}}var Cm=class extends Ot{constructor(e){super(e)}},mm=[0,vs,oo(function(e,t,i){return e.h===2&&(so(t,i,(e=N2(e))===Gr()?void 0:e),!0)},function(e,t,i){if(t!=null){if(t instanceof Ot){const n=t.Ra;return void(n&&(t=n(t),t!=null&&Nd(e,i,_u(t).buffer)))}if(Array.isArray(t))return}D2(e,t,i)})],_2=[0,an,Po,en,-1,Jd,Po,-1],zB=class extends Ot{constructor(){super()}},P2=[0,en,hi,en,Po,-1,Vl(function(e,t,i){return(e.h===0||e.h===2)&&(t=Zl(t,gi(t),i,2,!1),e.h==2?Hd(e,WB,t):t.push(Ls(e.g)),!0)},function(e,t,i){if((t=Gl(Al,t))!=null&&t.length){i=tC(e,i);for(let n=0;n<t.length;n++)xd(e.g,t[n]);eC(e,i)}}),hi,-1,[0,en,-1],Po,en],q2=[0,hi,-2],hm=class extends Ot{constructor(){super()}},$2=[0],tp=[0,an,en,1,en,-3],KB=[0,hi,en,-1,an,[0,[1,2,3,4,5,6],Bi,$2,Bi,P2,Bi,q2,Bi,tp,Bi,_2,Bi,[0,hi,-2]],[0,hi],en,[0,[1,3],[2,4],Bi,[0,Jd],-1,Bi,[0,zn],-1,fn,[0,hi,-1]],hi],Co=class extends Ot{constructor(e){super(e,2)}},Ti={},vn=Ti.O={};Ti[336783863]=KB,vn[336783863]=1;var bm=[0,Ga,-1,El,-3,Ga,Jd,vs,qr,Ga,-1,El,qr,El,-2,vs];function ho(e,t){hI(e,2,yl(t),"")}function xi(e,t){vc(e.u,3,Rc,t)}function Le(e,t){vc(e.u,4,Rc,t)}var On=class extends Ot{constructor(e){super(e,500)}o(e){return se(this,0,7,e)}},Ql=[-1,{O:{}}],pm=[0,hi,1,Ql],Am=[0,hi,zn,Ql];function bo(e,t){id(e,1,On,t)}function ki(e,t){vc(e.u,10,Rc,t)}function Pe(e,t){vc(e.u,15,Rc,t)}var ro=class extends Ot{constructor(e){super(e,500)}o(e){return se(this,0,1001,e)}},ep=[-500,fn,[-500,vs,-1,zn,-3,[-2,Ti,en],fn,mm,qr,-1,pm,Am,fn,[0,vs,El],vs,bm,qr,zn,987,zn],4,fn,[-500,hi,-1,[-1,{O:{}}],998,hi],fn,[-500,hi,zn,-1,[-2,{O:{}},en],997,zn,-1],qr,fn,[-500,hi,zn,Ql,998,zn],zn,qr,pm,Am,fn,[0,vs,-1,Ql],zn,-2,bm,vs,-1,El,979,Ql,fn,mm];ro.prototype.g=Td(ep);var UB=js(ro,ep),EB=class extends Ot{constructor(e){super(e)}},ip=class extends Ot{constructor(e){super(e)}g(){return hs(this,EB,1)}},np=[0,fn,[0,an,Sn,hi,-1]],kd=js(ip,np),QB=class extends Ot{constructor(e){super(e)}},DB=class extends Ot{constructor(e){super(e)}},Va=class extends Ot{constructor(e){super(e)}h(){return Oe(this,QB,2)}g(){return hs(this,DB,5)}},op=js(class extends Ot{constructor(e){super(e)}},[0,zn,Jd,sC,[0,Po,[0,an,-3],[0,Sn,-3],[0,an,-1,[0,fn,[0,an,-2]]],fn,[0,Sn,-1,hi,Sn]],hi,-1,Ts,fn,[0,an,Sn],zn,Ts]),sp=class extends Ot{constructor(e){super(e)}},tl=js(class extends Ot{constructor(e){super(e)}},[0,fn,[0,Sn,-4]]),rp=class extends Ot{constructor(e){super(e)}},Fc=js(class extends Ot{constructor(e){super(e)}},[0,fn,[0,Sn,-4]]),OB=class extends Ot{constructor(e){super(e)}},jB=[0,an,-1,sC,Po],lp=class extends Ot{constructor(){super()}};lp.prototype.g=Td([0,Sn,-4,Ts]);var _B=class extends Ot{constructor(e){super(e)}},PB=js(class extends Ot{constructor(e){super(e)}},[0,fn,[0,1,an,hi,np],Ts]),ym=class extends Ot{constructor(e){super(e)}},qB=class extends Ot{constructor(e){super(e)}qa(){const e=G2(this);return e==null?Gr():e}},$B=class extends Ot{constructor(e){super(e)}},cp=[1,2],t9=js(class extends Ot{constructor(e){super(e)}},[0,fn,[0,cp,Bi,[0,sC],Bi,[0,j2],an,hi],Ts]),rC=class extends Ot{constructor(e){super(e)}},gp=[0,hi,an,Sn,zn,-1],Zm=class extends Ot{constructor(e){super(e)}},e9=[0,en,-1],fm=class extends Ot{constructor(e){super(e)}},mg=[1,2,3,4,5],rd=class extends Ot{constructor(e){super(e)}g(){return G2(this)!=null}h(){return ar(Ms(this,2))!=null}},Di=class extends Ot{constructor(e){super(e)}g(){var e;return(e=p2(Ms(this,2)))!=null?e:!1}},dp=[0,j2,hi,[0,an,Ts,-1],[0,MB,Ts]],pn=[0,dp,en,[0,mg,Bi,tp,Bi,P2,Bi,_2,Bi,$2,Bi,q2],Po],zd=class extends Ot{constructor(e){super(e)}},lC=[0,pn,Sn,-1,an],i9=Lo(502141897,zd);Ti[502141897]=lC,vn[502141897]=1;var ap=[0,dp];Ti[512499200]=ap;var Ip=[0,ap];Ti[515723506]=Ip;var n9=js(class extends Ot{constructor(e){super(e)}},[0,[0,Po,-1,YB,TB],jB]),up=[0,pn];Ti[508981768]=up;var Cp=class extends Ot{constructor(e){super(e)}},mp=class extends Ot{constructor(e){super(e)}},cC=[0,pn,Sn,up,en],hp=[0,pn,lC,cC,Sn,Ip];Ti[508968149]=cC;var o9=Lo(508968150,mp);Ti[508968150]=hp,vn[508968150]=1,vn[508968149]=1;var bp=class extends Ot{constructor(e){super(e)}},s9=Lo(513916220,bp);Ti[513916220]=[0,pn,hp,an],vn[513916220]=1;var Jr=class extends Ot{constructor(e){super(e)}h(){return Oe(this,rC,2)}g(){Hi(this,2)}},pp=[0,pn,gp];Ti[478825465]=pp,vn[478825465]=1;var Ap=[0,pn];Ti[478825422]=Ap;var r9=class extends Ot{constructor(e){super(e)}},yp=class extends Ot{constructor(e){super(e)}},gC=class extends Ot{constructor(e){super(e)}},dC=class extends Ot{constructor(e){super(e)}},Zp=class extends Ot{constructor(e){super(e)}},fp=[0,pn,Ap,pp,-1],Gp=[0,pn,Sn,an],aC=[0,pn,Sn],Vp=[0,pn,Gp,aC,Sn],l9=[0,pn,Vp,fp];Ti[463370452]=fp,Ti[464864288]=Gp,Ti[474472470]=aC;var c9=Lo(462713202,dC);Ti[462713202]=Vp;var g9=Lo(479097054,Zp);Ti[479097054]=l9,vn[479097054]=1,vn[463370452]=1,vn[464864288]=1,vn[462713202]=1,vn[474472470]=1;var d9=class extends Ot{constructor(e){super(e)}},Wp=class extends Ot{constructor(e){super(e)}},Bp=class extends Ot{constructor(e){super(e)}},Xp=class extends Ot{constructor(){super()}},GI=[0,pn,Sn,-1,an],VI=[0,pn,Sn,en];Xp.prototype.g=Td([0,pn,aC,[0,pn],lC,cC,GI,VI]),Ti[514774813]=GI,Ti[518928384]=VI;var Rp=class extends Ot{constructor(e){super(e)}},a9=Lo(456383383,Rp);Ti[456383383]=[0,pn,gp],vn[456383383]=1;var vp=class extends Ot{constructor(e){super(e)}},I9=Lo(476348187,vp);Ti[476348187]=[0,pn,e9],vn[476348187]=1;var Sp=class extends Ot{constructor(e){super(e)}},Gm=class extends Ot{constructor(e){super(e)}},wp=[0,Po,-1],u9=Lo(458105876,class extends Ot{constructor(e){super(e)}g(){var e=this.u;const t=gi(e),i=2&t;return e=function(n,o,l){var I=Gm;const m=2&o;let Z=!1;if(l==null){if(m)return nm();l=[]}else if(l.constructor===Wo){if((2&l.L)==0||m)return l;l=l.Z()}else Array.isArray(l)?Z=!!(2&un(l)):l=[];if(m){if(!l.length)return nm();Z||(Z=!0,pl(l))}else Z&&(Z=!1,l=B2(l));return Z||(64&un(l)?jg(l,32):32&o&&wu(l,32)),Qi(n,o,2,I=new Wo(l,I,mB,void 0),!1),I}(e,t,$o(e,t,2)),!i&&Gm&&(e.ta=!0),e}});Ti[458105876]=[0,wp,NB,[!0,Ts,[0,hi,-1,zn]]],vn[458105876]=1;var IC=class extends Ot{constructor(e){super(e)}},Fp=Lo(458105758,IC);Ti[458105758]=[0,pn,hi,wp],vn[458105758]=1;var Hp=class extends Ot{constructor(e){super(e)}},C9=Lo(443442058,Hp);Ti[443442058]=[0,pn,hi,an,Sn,zn,-1],vn[443442058]=1,vn[514774813]=1;var xp=class extends Ot{constructor(e){super(e)}},m9=Lo(516587230,xp);function WI(e,t){return t=t?t.clone():new rC,e.displayNamesLocale!==void 0?Hi(t,1,yl(e.displayNamesLocale)):e.displayNamesLocale===void 0&&Hi(t,1),e.maxResults!==void 0?_o(t,2,e.maxResults):"maxResults"in e&&Hi(t,2),e.scoreThreshold!==void 0?jt(t,3,e.scoreThreshold):"scoreThreshold"in e&&Hi(t,3),e.categoryAllowlist!==void 0?nd(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&Hi(t,4),e.categoryDenylist!==void 0?nd(t,5,e.categoryDenylist):"categoryDenylist"in e&&Hi(t,5),t}function uC(e,t=-1,i=""){return{categories:e.map(n=>{var o,l,I,m;return{index:(o=Ho(Go(n,1),0))!=null?o:-1,score:(l=bn(n,2))!=null?l:0,categoryName:(I=jo(n,3))!=null?I:"",displayName:(m=jo(n,4))!=null?m:""}}),headIndex:t,headName:i}}function Np(e){var I,m,Z,x,L,K,st,ut,P,ct,Rt,Bt,Yt;var t=Pr(e,3,Os),i=Pr(e,2,Al),n=Pr(e,1,ar),o=Pr(e,9,ar);const l={categories:[],keypoints:[]};for(let _=0;_<t.length;_++)l.categories.push({score:t[_],index:(I=i[_])!=null?I:-1,categoryName:(m=n[_])!=null?m:"",displayName:(Z=o[_])!=null?Z:""});if((t=(x=Oe(e,Va,4))==null?void 0:x.h())&&(l.boundingBox={originX:(L=Go(t,1))!=null?L:0,originY:(K=Go(t,2))!=null?K:0,width:(st=Go(t,3))!=null?st:0,height:(ut=Go(t,4))!=null?ut:0,angle:0}),(P=Oe(e,Va,4))==null?void 0:P.g().length)for(const _ of Oe(e,Va,4).g())l.keypoints.push({x:(ct=Ig(_,1))!=null?ct:0,y:(Rt=Ig(_,2))!=null?Rt:0,score:(Bt=Ig(_,4))!=null?Bt:0,label:(Yt=ar(Ms(_,3)))!=null?Yt:""});return l}function Kd(e){var i,n,o,l;const t=[];for(const I of hs(e,rp,1))t.push({x:(i=bn(I,1))!=null?i:0,y:(n=bn(I,2))!=null?n:0,z:(o=bn(I,3))!=null?o:0,visibility:(l=bn(I,4))!=null?l:0});return t}function Dl(e){var i,n,o,l;const t=[];for(const I of hs(e,sp,1))t.push({x:(i=bn(I,1))!=null?i:0,y:(n=bn(I,2))!=null?n:0,z:(o=bn(I,3))!=null?o:0,visibility:(l=bn(I,4))!=null?l:0});return t}function Vm(e){return Array.from(e,t=>t>127?t-256:t)}function Wm(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let i=0,n=0,o=0;for(let l=0;l<e.length;l++)i+=e[l]*t[l],n+=e[l]*e[l],o+=t[l]*t[l];if(n<=0||o<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return i/Math.sqrt(n*o)}let eg;Ti[516587230]=[0,pn,GI,VI,Sn],vn[516587230]=1,vn[518928384]=1;const h9=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Yp(){if(eg===void 0)try{await WebAssembly.instantiate(h9),eg=!0}catch{eg=!1}return eg}async function wl(e,t=""){const i=await Yp()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${i}.js`,wasmBinaryPath:`${t}/${e}_${i}.wasm`}}var or=class{};function Mp(){var e=navigator;return typeof OffscreenCanvas!="undefined"&&(!function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")}(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function Bm(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise((i,n)=>{t.addEventListener("load",()=>{i()},!1),t.addEventListener("error",o=>{n(o)},!1),document.body.appendChild(t)})}importScripts(e.toString())}function Lp(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function Pt(e,t,i){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),i(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function Xm(e,t,i){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(i?e.i._bindTextureToStream(i):e.i._bindTextureToCanvas(),!(i=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1);const[n,o]=Lp(t);return!e.l||n===e.i.canvas.width&&o===e.i.canvas.height||(e.i.canvas.width=n,e.i.canvas.height=o),[n,o]}function Rm(e,t,i){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const n=new Uint32Array(t.length);for(let o=0;o<t.length;o++)n[o]=e.i.stringToNewUTF8(t[o]);t=e.i._malloc(4*n.length),e.i.HEAPU32.set(n,t>>2),i(t);for(const o of n)e.i._free(o);e.i._free(t)}function ko(e,t,i){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=i}function Vs(e,t,i){let n=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(o,l,I)=>{l?(i(n,I),n=[]):n.push(o)}}or.forVisionTasks=function(e){return wl("vision",e)},or.forTextTasks=function(e){return wl("text",e)},or.forGenAiExperimentalTasks=function(e){return wl("genai_experimental",e)},or.forGenAiTasks=function(e){return wl("genai",e)},or.forAudioTasks=function(e){return wl("audio",e)},or.isSimdSupported=function(){return Yp()};async function b9(e,t,i,n){return e=await(async(o,l,I,m,Z)=>{if(l&&await Bm(l),!self.ModuleFactory||I&&(await Bm(I),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&Z&&((l=self.Module).locateFile=Z.locateFile,Z.mainScriptUrlOrBlob&&(l.mainScriptUrlOrBlob=Z.mainScriptUrlOrBlob)),Z=await self.ModuleFactory(self.Module||Z),self.ModuleFactory=self.Module=void 0,new o(Z,m)})(e,i.wasmLoaderPath,i.assetLoaderPath,t,{locateFile:o=>o.endsWith(".wasm")?i.wasmBinaryPath.toString():i.assetBinaryPath&&o.endsWith(".data")?i.assetBinaryPath.toString():o}),await e.o(n),e}function Wa(e,t){const i=Oe(e.baseOptions,rd,1)||new rd;typeof t=="string"?(Hi(i,2,yl(t)),Hi(i,1)):t instanceof Uint8Array&&(Hi(i,1,xu(t,!1,!1)),Hi(i,2)),se(e.baseOptions,0,1,i)}function vm(e){try{const t=e.G.length;if(t===1)throw Error(e.G[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.G.map(i=>i.message).join(", "))}finally{e.G=[]}}function Kt(e,t){e.B=Math.max(e.B,t)}function Ud(e,t){e.A=new On,ho(e.A,"PassThroughCalculator"),xi(e.A,"free_memory"),Le(e.A,"free_memory_unused_out"),ki(t,"free_memory"),bo(t,e.A)}function gl(e,t){xi(e.A,t),Le(e.A,t+"_unused_out")}function Ed(e){e.g.addBoolToStream(!0,"free_memory",e.B)}var hg=class{constructor(e){this.g=e,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){var i,n,o,l,I,m;if(t){const Z=e.baseOptions||{};if(((i=e.baseOptions)==null?void 0:i.modelAssetBuffer)&&((n=e.baseOptions)==null?void 0:n.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(((o=Oe(this.baseOptions,rd,1))==null?void 0:o.g())||((l=Oe(this.baseOptions,rd,1))==null?void 0:l.h())||((I=e.baseOptions)==null?void 0:I.modelAssetBuffer)||((m=e.baseOptions)==null?void 0:m.modelAssetPath)))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(x,L){let K=Oe(x.baseOptions,fm,3);if(!K){var st=K=new fm,ut=new hm;Kl(st,4,mg,ut)}"delegate"in L&&(L.delegate==="GPU"?(L=K,st=new zB,Kl(L,2,mg,st)):(L=K,st=new hm,Kl(L,4,mg,st))),se(x.baseOptions,0,3,K)}(this,Z),Z.modelAssetPath)return fetch(Z.modelAssetPath.toString()).then(x=>{if(x.ok)return x.arrayBuffer();throw Error(`Failed to fetch model: ${Z.modelAssetPath} (${x.status})`)}).then(x=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(x),!0,!1,!1),Wa(this,"/model.dat"),this.m(),this.I()});if(Z.modelAssetBuffer instanceof Uint8Array)Wa(this,Z.modelAssetBuffer);else if(Z.modelAssetBuffer)return async function(x){const L=[];for(var K=0;;){const{done:st,value:ut}=await x.read();if(st)break;L.push(ut),K+=ut.length}if(L.length===0)return new Uint8Array(0);if(L.length===1)return L[0];x=new Uint8Array(K),K=0;for(const st of L)x.set(st,K),K+=st.length;return x}(Z.modelAssetBuffer).then(x=>{Wa(this,x),this.m(),this.I()})}return this.m(),this.I(),Promise.resolve()}I(){}fa(){let e;if(this.g.fa(t=>{e=UB(t)}),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener((i,n)=>{this.G.push(Error(n))}),this.g.Ma(),this.g.setGraph(e,t),this.A=void 0,vm(this)}finishProcessing(){this.g.finishProcessing(),vm(this)}close(){this.A=void 0,this.g.closeGraph()}};function Cs(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}hg.prototype.close=hg.prototype.close,function(e,t){e=e.split(".");var i,n=fr;for((e[0]in n)||n.execScript===void 0||n.execScript("var "+e[0]);e.length&&(i=e.shift());)e.length||t===void 0?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=t}("TaskRunner",hg);class p9{constructor(t,i,n,o){this.g=t,this.h=i,this.m=n,this.l=o}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function Sm(e,t,i){const n=e.g;if(i=Cs(n.createShader(i),"Failed to create WebGL shader"),n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${n.getShaderInfoLog(i)}`);return n.attachShader(e.h,i),i}function wm(e,t){const i=e.g,n=Cs(i.createVertexArray(),"Failed to create vertex array");i.bindVertexArray(n);const o=Cs(i.createBuffer(),"Failed to create buffer");i.bindBuffer(i.ARRAY_BUFFER,o),i.enableVertexAttribArray(e.P),i.vertexAttribPointer(e.P,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),i.STATIC_DRAW);const l=Cs(i.createBuffer(),"Failed to create buffer");return i.bindBuffer(i.ARRAY_BUFFER,l),i.enableVertexAttribArray(e.I),i.vertexAttribPointer(e.I,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindVertexArray(null),new p9(i,n,o,l)}function CC(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function mC(e,t,i,n){return CC(e,t),e.h||(e.m(),e.C()),i?(e.s||(e.s=wm(e,!0)),i=e.s):(e.v||(e.v=wm(e,!1)),i=e.v),t.useProgram(e.h),i.bind(),e.l(),e=n(),i.g.bindVertexArray(null),e}function Qd(e,t,i){return CC(e,t),e=Cs(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i!=null?i:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i!=null?i:t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function Dd(e,t,i){CC(e,t),e.A||(e.A=Cs(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0)}function hC(e){var t;(t=e.g)==null||t.bindFramebuffer(e.g.FRAMEBUFFER,null)}var bC=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=Cs(e.createProgram(),"Failed to create WebGL program"),this.ca=Sm(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.ba=Sm(this,this.G(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.P=e.getAttribLocation(this.h,"aVertex"),this.I=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.ca),e.deleteShader(this.ba)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};function ds(e,t){switch(t){case 0:return e.g.find(i=>i instanceof Uint8Array);case 1:return e.g.find(i=>i instanceof Float32Array);case 2:return e.g.find(i=>typeof WebGLTexture!="undefined"&&i instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function BI(e){var t=ds(e,1);if(!t){if(t=ds(e,0))t=new Float32Array(t).map(n=>n/255);else{t=new Float32Array(e.width*e.height);const n=dl(e);var i=pC(e);if(Dd(i,n,Jp(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in self.document){i=new Float32Array(e.width*e.height*4),n.readPixels(0,0,e.width,e.height,n.RGBA,n.FLOAT,i);for(let o=0,l=0;o<t.length;++o,l+=4)t[o]=i[l]}else n.readPixels(0,0,e.width,e.height,n.RED,n.FLOAT,t)}e.g.push(t)}return t}function Jp(e){let t=ds(e,2);if(!t){const i=dl(e);t=kp(e);const n=BI(e),o=Tp(e);i.texImage2D(i.TEXTURE_2D,0,o,e.width,e.height,0,i.RED,i.FLOAT,n),XI(e)}return t}function dl(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=Cs(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Tp(e){if(e=dl(e),!ig)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))ig=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");ig=e.R16F}return ig}function pC(e){return e.l||(e.l=new bC),e.l}function kp(e){const t=dl(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let i=ds(e,2);return i||(i=Qd(pC(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(i),e.j=!0),t.bindTexture(t.TEXTURE_2D,i),i}function XI(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var ig,xn=class{constructor(e,t,i,n,o,l,I){this.g=e,this.m=t,this.j=i,this.canvas=n,this.l=o,this.width=l,this.height=I,this.j&&--Fm===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Ha(){return!!ds(this,0)}la(){return!!ds(this,1)}R(){return!!ds(this,2)}ka(){return(t=ds(e=this,0))||(t=BI(e),t=new Uint8Array(t.map(i=>255*i)),e.g.push(t)),t;var e,t}ja(){return BI(this)}M(){return Jp(this)}clone(){const e=[];for(const t of this.g){let i;if(t instanceof Uint8Array)i=new Uint8Array(t);else if(t instanceof Float32Array)i=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const n=dl(this),o=pC(this);n.activeTexture(n.TEXTURE1),i=Qd(o,n,this.m?n.LINEAR:n.NEAREST),n.bindTexture(n.TEXTURE_2D,i);const l=Tp(this);n.texImage2D(n.TEXTURE_2D,0,l,this.width,this.height,0,n.RED,n.FLOAT,null),n.bindTexture(n.TEXTURE_2D,null),Dd(o,n,i),mC(o,n,!1,()=>{kp(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),XI(this)}),hC(o),XI(this)}}e.push(i)}return new xn(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&dl(this).deleteTexture(ds(this,2)),Fm=-1}};xn.prototype.close=xn.prototype.close,xn.prototype.clone=xn.prototype.clone,xn.prototype.getAsWebGLTexture=xn.prototype.M,xn.prototype.getAsFloat32Array=xn.prototype.ja,xn.prototype.getAsUint8Array=xn.prototype.ka,xn.prototype.hasWebGLTexture=xn.prototype.R,xn.prototype.hasFloat32Array=xn.prototype.la,xn.prototype.hasUint8Array=xn.prototype.Ha;var Fm=250;function Eo(e,t){switch(t){case 0:return e.g.find(i=>i instanceof ImageData);case 1:return e.g.find(i=>typeof ImageBitmap!="undefined"&&i instanceof ImageBitmap);case 2:return e.g.find(i=>typeof WebGLTexture!="undefined"&&i instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function zp(e){var t=Eo(e,0);if(!t){t=al(e);const i=Od(e),n=new Uint8Array(e.width*e.height*4);Dd(i,t,bg(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,n),hC(i),t=new ImageData(new Uint8ClampedArray(n.buffer),e.width,e.height),e.g.push(t)}return t}function bg(e){let t=Eo(e,2);if(!t){const i=al(e);t=pg(e);const n=Eo(e,1)||zp(e);i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),Yl(e)}return t}function al(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return e.h||(e.h=Cs(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Od(e){return e.l||(e.l=new bC),e.l}function pg(e){const t=al(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let i=Eo(e,2);return i||(i=Qd(Od(e),t),e.g.push(i),e.m=!0),t.bindTexture(t.TEXTURE_2D,i),i}function Yl(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function Hm(e){const t=al(e);return mC(Od(e),t,!0,()=>function(i,n){const o=i.canvas;if(o.width===i.width&&o.height===i.height)return n();const l=o.width,I=o.height;return o.width=i.width,o.height=i.height,i=n(),o.width=l,o.height=I,i}(e,()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))}var Nn=class{constructor(e,t,i,n,o,l,I){this.g=e,this.j=t,this.m=i,this.canvas=n,this.l=o,this.width=l,this.height=I,(this.j||this.m)&&--xm===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ga(){return!!Eo(this,0)}ma(){return!!Eo(this,1)}R(){return!!Eo(this,2)}Ea(){return zp(this)}Da(){var e=Eo(this,1);return e||(bg(this),pg(this),e=Hm(this),Yl(this),this.g.push(e),this.j=!0),e}M(){return bg(this)}clone(){const e=[];for(const t of this.g){let i;if(t instanceof ImageData)i=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){const n=al(this),o=Od(this);n.activeTexture(n.TEXTURE1),i=Qd(o,n),n.bindTexture(n.TEXTURE_2D,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindTexture(n.TEXTURE_2D,null),Dd(o,n,i),mC(o,n,!1,()=>{pg(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),Yl(this)}),hC(o),Yl(this)}else{if(!(t instanceof ImageBitmap))throw Error(`Type is not supported: ${t}`);bg(this),pg(this),i=Hm(this),Yl(this)}e.push(i)}return new Nn(e,this.ma(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Eo(this,1).close(),this.m&&al(this).deleteTexture(Eo(this,2)),xm=-1}};Nn.prototype.close=Nn.prototype.close,Nn.prototype.clone=Nn.prototype.clone,Nn.prototype.getAsWebGLTexture=Nn.prototype.M,Nn.prototype.getAsImageBitmap=Nn.prototype.Da,Nn.prototype.getAsImageData=Nn.prototype.Ea,Nn.prototype.hasWebGLTexture=Nn.prototype.R,Nn.prototype.hasImageBitmap=Nn.prototype.ma,Nn.prototype.hasImageData=Nn.prototype.Ga;var xm=250;function Jo(...e){return e.map(([t,i])=>({start:t,end:i}))}const A9=function(e){return class extends e{Ma(){this.i._registerModelResourcesGraphService()}}}((Nm=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:Mp()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const i=e.length,n=this.i._malloc(i);this.i.HEAPU8.set(e,n),t?this.i._changeBinaryGraph(i,n):this.i._changeTextGraph(i,n),this.i._free(n)}configureAudio(e,t,i,n,o){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),Pt(this,n||"input_audio",l=>{Pt(this,o=o||"audio_header",I=>{this.i._configureAudio(l,I,e,t,i)})})}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}fa(e){ko(this,"__graph_config__",t=>{e(t)}),Pt(this,"__graph_config__",t=>{this.i._getGraphConfig(t,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,i){this.addAudioToStreamWithShape(e,0,0,t,i)}addAudioToStreamWithShape(e,t,i,n,o){const l=4*e.length;this.h!==l&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(l),this.h=l),this.i.HEAPF32.set(e,this.g/4),Pt(this,n,I=>{this.i._addAudioToInputStream(this.g,t,i,I,o)})}addGpuBufferToStream(e,t,i){Pt(this,t,n=>{const[o,l]=Xm(this,e,n);this.i._addBoundTextureToStream(n,o,l,i)})}addBoolToStream(e,t,i){Pt(this,t,n=>{this.i._addBoolToInputStream(e,n,i)})}addDoubleToStream(e,t,i){Pt(this,t,n=>{this.i._addDoubleToInputStream(e,n,i)})}addFloatToStream(e,t,i){Pt(this,t,n=>{this.i._addFloatToInputStream(e,n,i)})}addIntToStream(e,t,i){Pt(this,t,n=>{this.i._addIntToInputStream(e,n,i)})}addUintToStream(e,t,i){Pt(this,t,n=>{this.i._addUintToInputStream(e,n,i)})}addStringToStream(e,t,i){Pt(this,t,n=>{Pt(this,e,o=>{this.i._addStringToInputStream(o,n,i)})})}addStringRecordToStream(e,t,i){Pt(this,t,n=>{Rm(this,Object.keys(e),o=>{Rm(this,Object.values(e),l=>{this.i._addFlatHashMapToInputStream(o,l,Object.keys(e).length,n,i)})})})}addProtoToStream(e,t,i,n){Pt(this,i,o=>{Pt(this,t,l=>{const I=this.i._malloc(e.length);this.i.HEAPU8.set(e,I),this.i._addProtoToInputStream(I,e.length,l,o,n),this.i._free(I)})})}addEmptyPacketToStream(e,t){Pt(this,e,i=>{this.i._addEmptyPacketToInputStream(i,t)})}addBoolVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateBoolVector(e.length);if(!o)throw Error("Unable to allocate new bool vector on heap.");for(const l of e)this.i._addBoolVectorEntry(o,l);this.i._addBoolVectorToInputStream(o,n,i)})}addDoubleVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateDoubleVector(e.length);if(!o)throw Error("Unable to allocate new double vector on heap.");for(const l of e)this.i._addDoubleVectorEntry(o,l);this.i._addDoubleVectorToInputStream(o,n,i)})}addFloatVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateFloatVector(e.length);if(!o)throw Error("Unable to allocate new float vector on heap.");for(const l of e)this.i._addFloatVectorEntry(o,l);this.i._addFloatVectorToInputStream(o,n,i)})}addIntVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateIntVector(e.length);if(!o)throw Error("Unable to allocate new int vector on heap.");for(const l of e)this.i._addIntVectorEntry(o,l);this.i._addIntVectorToInputStream(o,n,i)})}addUintVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateUintVector(e.length);if(!o)throw Error("Unable to allocate new unsigned int vector on heap.");for(const l of e)this.i._addUintVectorEntry(o,l);this.i._addUintVectorToInputStream(o,n,i)})}addStringVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateStringVector(e.length);if(!o)throw Error("Unable to allocate new string vector on heap.");for(const l of e)Pt(this,l,I=>{this.i._addStringVectorEntry(o,I)});this.i._addStringVectorToInputStream(o,n,i)})}addBoolToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addBoolToInputSidePacket(e,i)})}addDoubleToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addDoubleToInputSidePacket(e,i)})}addFloatToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addFloatToInputSidePacket(e,i)})}addIntToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addIntToInputSidePacket(e,i)})}addUintToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addUintToInputSidePacket(e,i)})}addStringToInputSidePacket(e,t){Pt(this,t,i=>{Pt(this,e,n=>{this.i._addStringToInputSidePacket(n,i)})})}addProtoToInputSidePacket(e,t,i){Pt(this,i,n=>{Pt(this,t,o=>{const l=this.i._malloc(e.length);this.i.HEAPU8.set(e,l),this.i._addProtoToInputSidePacket(l,e.length,o,n),this.i._free(l)})})}addBoolVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateBoolVector(e.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const o of e)this.i._addBoolVectorEntry(n,o);this.i._addBoolVectorToInputSidePacket(n,i)})}addDoubleVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateDoubleVector(e.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const o of e)this.i._addDoubleVectorEntry(n,o);this.i._addDoubleVectorToInputSidePacket(n,i)})}addFloatVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateFloatVector(e.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const o of e)this.i._addFloatVectorEntry(n,o);this.i._addFloatVectorToInputSidePacket(n,i)})}addIntVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateIntVector(e.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const o of e)this.i._addIntVectorEntry(n,o);this.i._addIntVectorToInputSidePacket(n,i)})}addUintVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateUintVector(e.length);if(!n)throw Error("Unable to allocate new unsigned int vector on heap.");for(const o of e)this.i._addUintVectorEntry(n,o);this.i._addUintVectorToInputSidePacket(n,i)})}addStringVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateStringVector(e.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const o of e)Pt(this,o,l=>{this.i._addStringVectorEntry(n,l)});this.i._addStringVectorToInputSidePacket(n,i)})}attachBoolListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachBoolListener(i)})}attachBoolVectorListener(e,t){Vs(this,e,t),Pt(this,e,i=>{this.i._attachBoolVectorListener(i)})}attachIntListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachIntListener(i)})}attachIntVectorListener(e,t){Vs(this,e,t),Pt(this,e,i=>{this.i._attachIntVectorListener(i)})}attachUintListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachUintListener(i)})}attachUintVectorListener(e,t){Vs(this,e,t),Pt(this,e,i=>{this.i._attachUintVectorListener(i)})}attachDoubleListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachDoubleListener(i)})}attachDoubleVectorListener(e,t){Vs(this,e,t),Pt(this,e,i=>{this.i._attachDoubleVectorListener(i)})}attachFloatListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachFloatListener(i)})}attachFloatVectorListener(e,t){Vs(this,e,t),Pt(this,e,i=>{this.i._attachFloatVectorListener(i)})}attachStringListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachStringListener(i)})}attachStringVectorListener(e,t){Vs(this,e,t),Pt(this,e,i=>{this.i._attachStringVectorListener(i)})}attachProtoListener(e,t,i){ko(this,e,t),Pt(this,e,n=>{this.i._attachProtoListener(n,i||!1)})}attachProtoVectorListener(e,t,i){Vs(this,e,t),Pt(this,e,n=>{this.i._attachProtoVectorListener(n,i||!1)})}attachAudioListener(e,t,i){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),ko(this,e,(n,o)=>{n=new Float32Array(n.buffer,n.byteOffset,n.length/4),t(n,o)}),Pt(this,e,n=>{this.i._attachAudioListener(n,i||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends Nm{get ha(){return this.i}sa(e,t,i){Pt(this,t,n=>{const[o,l]=Xm(this,e,n);this.ha._addBoundTextureAsImageToStream(n,o,l,i)})}X(e,t){ko(this,e,t),Pt(this,e,i=>{this.ha._attachImageListener(i)})}ea(e,t){Vs(this,e,t),Pt(this,e,i=>{this.ha._attachImageVectorListener(i)})}}));var Nm,Xo=class extends A9{};async function Ye(e,t,i){var n;return async function(o,l,I,m){return b9(o,l,I,m)}(e,(n=i.canvas)!=null?n:Mp()?void 0:document.createElement("canvas"),t,i)}function Kp(e,t,i,n){if(e.W){const l=new lp;if(i!=null&&i.regionOfInterest){if(!e.ra)throw Error("This task doesn't support region-of-interest.");var o=i.regionOfInterest;if(o.left>=o.right||o.top>=o.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(o.left<0||o.top<0||o.right>1||o.bottom>1)throw Error("Expected RectF values to be in [0,1].");jt(l,1,(o.left+o.right)/2),jt(l,2,(o.top+o.bottom)/2),jt(l,4,o.right-o.left),jt(l,3,o.bottom-o.top)}else jt(l,1,.5),jt(l,2,.5),jt(l,4,1),jt(l,3,1);if(i!=null&&i.rotationDegrees){if((i==null?void 0:i.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90\xB0.");if(jt(l,5,-Math.PI*i.rotationDegrees/180),(i==null?void 0:i.rotationDegrees)%180!=0){const[I,m]=Lp(t);i=bn(l,3)*m/I,o=bn(l,4)*I/m,jt(l,4,i),jt(l,3,o)}}e.g.addProtoToStream(l.g(),"mediapipe.NormalizedRect",e.W,n)}e.g.sa(t,e.ca,n!=null?n:performance.now()),e.finishProcessing()}function Ro(e,t,i){var n;if((n=e.baseOptions)!=null&&n.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");Kp(e,t,i,e.B+1)}function ts(e,t,i,n){var o;if(!((o=e.baseOptions)!=null&&o.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");Kp(e,t,i,n)}function Il(e,t,i,n){var o=t.data;const l=t.width,I=l*(t=t.height);if((o instanceof Uint8Array||o instanceof Float32Array)&&o.length!==I)throw Error("Unsupported channel count: "+o.length/I);return e=new xn([o],i,!1,e.g.i.canvas,e.P,l,t),n?e.clone():e}var io=class extends hg{constructor(e,t,i,n){super(e),this.g=e,this.ca=t,this.W=i,this.ra=n,this.P=new bC}l(e,t=!0){if("runningMode"in e&&dc(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.P.close(),super.close()}};io.prototype.close=io.prototype.close;var po=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},se(e=this.h=new zd,0,1,t=new Di),jt(this.h,2,.5),jt(this.h,3,.3)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i;return"minDetectionConfidence"in e&&jt(this.h,2,(t=e.minDetectionConfidence)!=null?t:.5),"minSuppressionThreshold"in e&&jt(this.h,3,(i=e.minSuppressionThreshold)!=null?i:.3),this.l(e)}D(e,t){return this.j={detections:[]},Ro(this,e,t),this.j}F(e,t,i){return this.j={detections:[]},ts(this,e,i,t),this.j}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect_in"),Pe(e,"detections");const t=new Co;Mo(t,i9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect_in"),Le(i,"DETECTIONS:detections"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("detections",(n,o)=>{for(const l of n)n=op(l),this.j.detections.push(Np(n));Kt(this,o)}),this.g.attachEmptyPacketListener("detections",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};po.prototype.detectForVideo=po.prototype.F,po.prototype.detect=po.prototype.D,po.prototype.setOptions=po.prototype.o,po.createFromModelPath=async function(e,t){return Ye(po,e,{baseOptions:{modelAssetPath:t}})},po.createFromModelBuffer=function(e,t){return Ye(po,e,{baseOptions:{modelAssetBuffer:t}})},po.createFromOptions=function(e,t){return Ye(po,e,t)};var AC=Jo([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),yC=Jo([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),ZC=Jo([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),Up=Jo([474,475],[475,476],[476,477],[477,474]),fC=Jo([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),GC=Jo([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),Ep=Jo([469,470],[470,471],[471,472],[472,469]),VC=Jo([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),Qp=[...AC,...yC,...ZC,...fC,...GC,...VC],Dp=Jo([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function Ym(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var cn=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,se(e=this.h=new mp,0,1,t=new Di),this.v=new Cp,se(this.h,0,3,this.v),this.s=new zd,se(this.h,0,2,this.s),_o(this.s,4,1),jt(this.s,2,.5),jt(this.v,2,.5),jt(this.h,4,.5)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i,n,o;return"numFaces"in e&&_o(this.s,4,(t=e.numFaces)!=null?t:1),"minFaceDetectionConfidence"in e&&jt(this.s,2,(i=e.minFaceDetectionConfidence)!=null?i:.5),"minTrackingConfidence"in e&&jt(this.h,4,(n=e.minTrackingConfidence)!=null?n:.5),"minFacePresenceConfidence"in e&&jt(this.v,2,(o=e.minFacePresenceConfidence)!=null?o:.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,t){return Ym(this),Ro(this,e,t),this.j}F(e,t,i){return Ym(this),ts(this,e,i,t),this.j}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"face_landmarks");const t=new Co;Mo(t,o9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"NORM_LANDMARKS:face_landmarks"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("face_landmarks",(n,o)=>{for(const l of n)n=Fc(l),this.j.faceLandmarks.push(Kd(n));Kt(this,o)}),this.g.attachEmptyPacketListener("face_landmarks",n=>{Kt(this,n)}),this.outputFaceBlendshapes&&(Pe(e,"blendshapes"),Le(i,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(n,o)=>{var l;if(this.outputFaceBlendshapes)for(const I of n)n=kd(I),this.j.faceBlendshapes.push(uC((l=n.g())!=null?l:[]));Kt(this,o)}),this.g.attachEmptyPacketListener("blendshapes",n=>{Kt(this,n)})),this.outputFacialTransformationMatrixes&&(Pe(e,"face_geometry"),Le(i,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(n,o)=>{var l,I,m;if(this.outputFacialTransformationMatrixes)for(const Z of n)(n=Oe(n9(Z),OB,2))&&this.j.facialTransformationMatrixes.push({rows:(l=Ho(Go(n,1),0))!=null?l:0,columns:(I=Ho(Go(n,2),0))!=null?I:0,data:(m=Pr(n,3,Os).slice())!=null?m:[]});Kt(this,o)}),this.g.attachEmptyPacketListener("face_geometry",n=>{Kt(this,n)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};cn.prototype.detectForVideo=cn.prototype.F,cn.prototype.detect=cn.prototype.D,cn.prototype.setOptions=cn.prototype.o,cn.createFromModelPath=function(e,t){return Ye(cn,e,{baseOptions:{modelAssetPath:t}})},cn.createFromModelBuffer=function(e,t){return Ye(cn,e,{baseOptions:{modelAssetBuffer:t}})},cn.createFromOptions=function(e,t){return Ye(cn,e,t)},cn.FACE_LANDMARKS_LIPS=AC,cn.FACE_LANDMARKS_LEFT_EYE=yC,cn.FACE_LANDMARKS_LEFT_EYEBROW=ZC,cn.FACE_LANDMARKS_LEFT_IRIS=Up,cn.FACE_LANDMARKS_RIGHT_EYE=fC,cn.FACE_LANDMARKS_RIGHT_EYEBROW=GC,cn.FACE_LANDMARKS_RIGHT_IRIS=Ep,cn.FACE_LANDMARKS_FACE_OVAL=VC,cn.FACE_LANDMARKS_CONTOURS=Qp,cn.FACE_LANDMARKS_TESSELATION=Dp;var zo=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!0),se(e=this.j=new bp,0,1,t=new Di)}get baseOptions(){return Oe(this.j,Di,1)}set baseOptions(e){se(this.j,0,1,e)}o(e){return super.l(e)}Pa(e,t,i){const n=typeof t!="function"?t:{};if(this.h=typeof t=="function"?t:i,Ro(this,e,n!=null?n:{}),!this.h)return this.s}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"stylized_image");const t=new Co;Mo(t,s9,this.j);const i=new On;ho(i,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"STYLIZED_IMAGE:stylized_image"),i.o(t),bo(e,i),this.g.X("stylized_image",(n,o)=>{var l=!this.h,I=n.data,m=n.width;const Z=m*(n=n.height);if(I instanceof Uint8Array)if(I.length===3*Z){const x=new Uint8ClampedArray(4*Z);for(let L=0;L<Z;++L)x[4*L]=I[3*L],x[4*L+1]=I[3*L+1],x[4*L+2]=I[3*L+2],x[4*L+3]=255;I=new ImageData(x,m,n)}else{if(I.length!==4*Z)throw Error("Unsupported channel count: "+I.length/Z);I=new ImageData(new Uint8ClampedArray(I.buffer,I.byteOffset,I.length),m,n)}else if(!(I instanceof WebGLTexture))throw Error(`Unsupported format: ${I.constructor.name}`);m=new Nn([I],!1,!1,this.g.i.canvas,this.P,m,n),this.s=l=l?m.clone():m,this.h&&this.h(l),Kt(this,o)}),this.g.attachEmptyPacketListener("stylized_image",n=>{this.s=null,this.h&&this.h(null),Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};zo.prototype.stylize=zo.prototype.Pa,zo.prototype.setOptions=zo.prototype.o,zo.createFromModelPath=function(e,t){return Ye(zo,e,{baseOptions:{modelAssetPath:t}})},zo.createFromModelBuffer=function(e,t){return Ye(zo,e,{baseOptions:{modelAssetBuffer:t}})},zo.createFromOptions=function(e,t){return Ye(zo,e,t)};var WC=Jo([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function Mm(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function Lm(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function Jm(e,t=!0){var o,l,I;const i=[];for(const m of e){var n=kd(m);e=[];for(const Z of n.g())n=t&&Go(Z,1)!=null?Ho(Go(Z,1),0):-1,e.push({score:(o=bn(Z,2))!=null?o:0,index:n,categoryName:(l=jo(Z,3))!=null?l:"",displayName:(I=jo(Z,4))!=null?I:""});i.push(e)}return i}var lo=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],se(e=this.j=new Zp,0,1,t=new Di),this.s=new dC,se(this.j,0,2,this.s),this.C=new gC,se(this.s,0,3,this.C),this.v=new yp,se(this.s,0,2,this.v),this.h=new r9,se(this.j,0,3,this.h),jt(this.v,2,.5),jt(this.s,4,.5),jt(this.C,2,.5)}get baseOptions(){return Oe(this.j,Di,1)}set baseOptions(e){se(this.j,0,1,e)}o(e){var o,l,I,m,Z,x,L,K;if(_o(this.v,3,(o=e.numHands)!=null?o:1),"minHandDetectionConfidence"in e&&jt(this.v,2,(l=e.minHandDetectionConfidence)!=null?l:.5),"minTrackingConfidence"in e&&jt(this.s,4,(I=e.minTrackingConfidence)!=null?I:.5),"minHandPresenceConfidence"in e&&jt(this.C,2,(m=e.minHandPresenceConfidence)!=null?m:.5),e.cannedGesturesClassifierOptions){var t=new Jr,i=t,n=WI(e.cannedGesturesClassifierOptions,(Z=Oe(this.h,Jr,3))==null?void 0:Z.h());se(i,0,2,n),se(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&((x=Oe(this.h,Jr,3))==null||x.g());return e.customGesturesClassifierOptions?(se(i=t=new Jr,0,2,n=WI(e.customGesturesClassifierOptions,(L=Oe(this.h,Jr,4))==null?void 0:L.h())),se(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&((K=Oe(this.h,Jr,4))==null||K.g()),this.l(e)}Ka(e,t){return Mm(this),Ro(this,e,t),Lm(this)}La(e,t,i){return Mm(this),ts(this,e,i,t),Lm(this)}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"hand_gestures"),Pe(e,"hand_landmarks"),Pe(e,"world_hand_landmarks"),Pe(e,"handedness");const t=new Co;Mo(t,g9,this.j);const i=new On;ho(i,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"HAND_GESTURES:hand_gestures"),Le(i,"LANDMARKS:hand_landmarks"),Le(i,"WORLD_LANDMARKS:world_hand_landmarks"),Le(i,"HANDEDNESS:handedness"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("hand_landmarks",(n,o)=>{var l,I,m,Z;for(const x of n){n=Fc(x);const L=[];for(const K of hs(n,rp,1))L.push({x:(l=bn(K,1))!=null?l:0,y:(I=bn(K,2))!=null?I:0,z:(m=bn(K,3))!=null?m:0,visibility:(Z=bn(K,4))!=null?Z:0});this.landmarks.push(L)}Kt(this,o)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,o)=>{var l,I,m,Z;for(const x of n){n=tl(x);const L=[];for(const K of hs(n,sp,1))L.push({x:(l=bn(K,1))!=null?l:0,y:(I=bn(K,2))!=null?I:0,z:(m=bn(K,3))!=null?m:0,visibility:(Z=bn(K,4))!=null?Z:0});this.worldLandmarks.push(L)}Kt(this,o)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("hand_gestures",(n,o)=>{this.gestures.push(...Jm(n,!1)),Kt(this,o)}),this.g.attachEmptyPacketListener("hand_gestures",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("handedness",(n,o)=>{this.handedness.push(...Jm(n)),Kt(this,o)}),this.g.attachEmptyPacketListener("handedness",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function Tm(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}lo.prototype.recognizeForVideo=lo.prototype.La,lo.prototype.recognize=lo.prototype.Ka,lo.prototype.setOptions=lo.prototype.o,lo.createFromModelPath=function(e,t){return Ye(lo,e,{baseOptions:{modelAssetPath:t}})},lo.createFromModelBuffer=function(e,t){return Ye(lo,e,{baseOptions:{modelAssetBuffer:t}})},lo.createFromOptions=function(e,t){return Ye(lo,e,t)},lo.HAND_CONNECTIONS=WC;var co=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],se(e=this.h=new dC,0,1,t=new Di),this.s=new gC,se(this.h,0,3,this.s),this.j=new yp,se(this.h,0,2,this.j),_o(this.j,3,1),jt(this.j,2,.5),jt(this.s,2,.5),jt(this.h,4,.5)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i,n,o;return"numHands"in e&&_o(this.j,3,(t=e.numHands)!=null?t:1),"minHandDetectionConfidence"in e&&jt(this.j,2,(i=e.minHandDetectionConfidence)!=null?i:.5),"minTrackingConfidence"in e&&jt(this.h,4,(n=e.minTrackingConfidence)!=null?n:.5),"minHandPresenceConfidence"in e&&jt(this.s,2,(o=e.minHandPresenceConfidence)!=null?o:.5),this.l(e)}D(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Ro(this,e,t),Tm(this)}F(e,t,i){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],ts(this,e,i,t),Tm(this)}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"hand_landmarks"),Pe(e,"world_hand_landmarks"),Pe(e,"handedness");const t=new Co;Mo(t,c9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"LANDMARKS:hand_landmarks"),Le(i,"WORLD_LANDMARKS:world_hand_landmarks"),Le(i,"HANDEDNESS:handedness"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("hand_landmarks",(n,o)=>{for(const l of n)n=Fc(l),this.landmarks.push(Kd(n));Kt(this,o)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,o)=>{for(const l of n)n=tl(l),this.worldLandmarks.push(Dl(n));Kt(this,o)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("handedness",(n,o)=>{var Z,x,L,K;var l=this.handedness,I=l.push;const m=[];for(const st of n){n=kd(st);const ut=[];for(const P of n.g())ut.push({score:(Z=bn(P,2))!=null?Z:0,index:(x=Ho(Go(P,1),0))!=null?x:-1,categoryName:(L=jo(P,3))!=null?L:"",displayName:(K=jo(P,4))!=null?K:""});m.push(ut)}I.call(l,...m),Kt(this,o)}),this.g.attachEmptyPacketListener("handedness",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};co.prototype.detectForVideo=co.prototype.F,co.prototype.detect=co.prototype.D,co.prototype.setOptions=co.prototype.o,co.createFromModelPath=function(e,t){return Ye(co,e,{baseOptions:{modelAssetPath:t}})},co.createFromModelBuffer=function(e,t){return Ye(co,e,{baseOptions:{modelAssetBuffer:t}})},co.createFromOptions=function(e,t){return Ye(co,e,t)},co.HAND_CONNECTIONS=WC;var Op=Jo([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function km(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function zm(e){try{if(!e.C)return e.h;e.C(e.h)}finally{Ed(e)}}function ng(e,t){e=Fc(e),t.push(Kd(e))}var Ui=class extends io{constructor(e,t){super(new Xo(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,se(e=this.j=new Xp,0,1,t=new Di),this.J=new gC,se(this.j,0,2,this.J),this.ba=new d9,se(this.j,0,3,this.ba),this.s=new zd,se(this.j,0,4,this.s),this.H=new Cp,se(this.j,0,5,this.H),this.v=new Wp,se(this.j,0,6,this.v),this.K=new Bp,se(this.j,0,7,this.K),jt(this.s,2,.5),jt(this.s,3,.3),jt(this.H,2,.5),jt(this.v,2,.5),jt(this.v,3,.3),jt(this.K,2,.5),jt(this.J,2,.5)}get baseOptions(){return Oe(this.j,Di,1)}set baseOptions(e){se(this.j,0,1,e)}o(e){var t,i,n,o,l,I,m;return"minFaceDetectionConfidence"in e&&jt(this.s,2,(t=e.minFaceDetectionConfidence)!=null?t:.5),"minFaceSuppressionThreshold"in e&&jt(this.s,3,(i=e.minFaceSuppressionThreshold)!=null?i:.3),"minFacePresenceConfidence"in e&&jt(this.H,2,(n=e.minFacePresenceConfidence)!=null?n:.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&jt(this.v,2,(o=e.minPoseDetectionConfidence)!=null?o:.5),"minPoseSuppressionThreshold"in e&&jt(this.v,3,(l=e.minPoseSuppressionThreshold)!=null?l:.3),"minPosePresenceConfidence"in e&&jt(this.K,2,(I=e.minPosePresenceConfidence)!=null?I:.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&jt(this.J,2,(m=e.minHandLandmarksConfidence)!=null?m:.5),this.l(e)}D(e,t,i){const n=typeof t!="function"?t:{};return this.C=typeof t=="function"?t:i,km(this),Ro(this,e,n),zm(this)}F(e,t,i,n){const o=typeof i!="function"?i:{};return this.C=typeof i=="function"?i:n,km(this),ts(this,e,o,t),zm(this)}m(){var e=new ro;ki(e,"input_frames_image"),Pe(e,"pose_landmarks"),Pe(e,"pose_world_landmarks"),Pe(e,"face_landmarks"),Pe(e,"left_hand_landmarks"),Pe(e,"left_hand_world_landmarks"),Pe(e,"right_hand_landmarks"),Pe(e,"right_hand_world_landmarks");const t=new Co,i=new Cm;hI(i,1,yl("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(o,l){if(l!=null)if(Array.isArray(l))Hi(o,2,wd(l,Uu,void 0,void 0,!1));else{if(!(typeof l=="string"||l instanceof us||Vc(l)))throw Error("invalid value in Any.value field: "+l+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");hI(o,2,xu(l,!1,!1),Gr())}}(i,this.j.g());const n=new On;ho(n,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),id(n,8,Cm,i),xi(n,"IMAGE:input_frames_image"),Le(n,"POSE_LANDMARKS:pose_landmarks"),Le(n,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),Le(n,"FACE_LANDMARKS:face_landmarks"),Le(n,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),Le(n,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),Le(n,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),Le(n,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),n.o(t),bo(e,n),Ud(this,e),this.g.attachProtoListener("pose_landmarks",(o,l)=>{ng(o,this.h.poseLandmarks),Kt(this,l)}),this.g.attachEmptyPacketListener("pose_landmarks",o=>{Kt(this,o)}),this.g.attachProtoListener("pose_world_landmarks",(o,l)=>{var I=this.h.poseWorldLandmarks;o=tl(o),I.push(Dl(o)),Kt(this,l)}),this.g.attachEmptyPacketListener("pose_world_landmarks",o=>{Kt(this,o)}),this.outputPoseSegmentationMasks&&(Le(n,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),gl(this,"pose_segmentation_mask"),this.g.X("pose_segmentation_mask",(o,l)=>{this.h.poseSegmentationMasks=[Il(this,o,!0,!this.C)],Kt(this,l)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",o=>{this.h.poseSegmentationMasks=[],Kt(this,o)})),this.g.attachProtoListener("face_landmarks",(o,l)=>{ng(o,this.h.faceLandmarks),Kt(this,l)}),this.g.attachEmptyPacketListener("face_landmarks",o=>{Kt(this,o)}),this.outputFaceBlendshapes&&(Pe(e,"extra_blendshapes"),Le(n,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(o,l)=>{var m;var I=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(o=kd(o),I.push(uC((m=o.g())!=null?m:[]))),Kt(this,l)}),this.g.attachEmptyPacketListener("extra_blendshapes",o=>{Kt(this,o)})),this.g.attachProtoListener("left_hand_landmarks",(o,l)=>{ng(o,this.h.leftHandLandmarks),Kt(this,l)}),this.g.attachEmptyPacketListener("left_hand_landmarks",o=>{Kt(this,o)}),this.g.attachProtoListener("left_hand_world_landmarks",(o,l)=>{var I=this.h.leftHandWorldLandmarks;o=tl(o),I.push(Dl(o)),Kt(this,l)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",o=>{Kt(this,o)}),this.g.attachProtoListener("right_hand_landmarks",(o,l)=>{ng(o,this.h.rightHandLandmarks),Kt(this,l)}),this.g.attachEmptyPacketListener("right_hand_landmarks",o=>{Kt(this,o)}),this.g.attachProtoListener("right_hand_world_landmarks",(o,l)=>{var I=this.h.rightHandWorldLandmarks;o=tl(o),I.push(Dl(o)),Kt(this,l)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",o=>{Kt(this,o)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ui.prototype.detectForVideo=Ui.prototype.F,Ui.prototype.detect=Ui.prototype.D,Ui.prototype.setOptions=Ui.prototype.o,Ui.createFromModelPath=function(e,t){return Ye(Ui,e,{baseOptions:{modelAssetPath:t}})},Ui.createFromModelBuffer=function(e,t){return Ye(Ui,e,{baseOptions:{modelAssetBuffer:t}})},Ui.createFromOptions=function(e,t){return Ye(Ui,e,t)},Ui.HAND_CONNECTIONS=WC,Ui.POSE_CONNECTIONS=Op,Ui.FACE_LANDMARKS_LIPS=AC,Ui.FACE_LANDMARKS_LEFT_EYE=yC,Ui.FACE_LANDMARKS_LEFT_EYEBROW=ZC,Ui.FACE_LANDMARKS_LEFT_IRIS=Up,Ui.FACE_LANDMARKS_RIGHT_EYE=fC,Ui.FACE_LANDMARKS_RIGHT_EYEBROW=GC,Ui.FACE_LANDMARKS_RIGHT_IRIS=Ep,Ui.FACE_LANDMARKS_FACE_OVAL=VC,Ui.FACE_LANDMARKS_CONTOURS=Qp,Ui.FACE_LANDMARKS_TESSELATION=Dp;var Ao=class extends io{constructor(e,t){super(new Xo(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},se(e=this.h=new Rp,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return se(this.h,0,2,WI(e,Oe(this.h,rC,2))),this.l(e)}ua(e,t){return this.j={classifications:[]},Ro(this,e,t),this.j}va(e,t,i){return this.j={classifications:[]},ts(this,e,i,t),this.j}m(){var e=new ro;ki(e,"input_image"),ki(e,"norm_rect"),Pe(e,"classifications");const t=new Co;Mo(t,a9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),xi(i,"IMAGE:input_image"),xi(i,"NORM_RECT:norm_rect"),Le(i,"CLASSIFICATIONS:classifications"),i.o(t),bo(e,i),this.g.attachProtoListener("classifications",(n,o)=>{this.j=function(l){const I={classifications:hs(l,_B,1).map(m=>{var Z,x;return uC((x=(Z=Oe(m,ip,4))==null?void 0:Z.g())!=null?x:[],Ho(Go(m,2),0),jo(m,3))})};return $g(Ms(l,2))!=null&&(I.timestampMs=Ho($g(Ms(l,2)),0)),I}(PB(n)),Kt(this,o)}),this.g.attachEmptyPacketListener("classifications",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ao.prototype.classifyForVideo=Ao.prototype.va,Ao.prototype.classify=Ao.prototype.ua,Ao.prototype.setOptions=Ao.prototype.o,Ao.createFromModelPath=function(e,t){return Ye(Ao,e,{baseOptions:{modelAssetPath:t}})},Ao.createFromModelBuffer=function(e,t){return Ye(Ao,e,{baseOptions:{modelAssetBuffer:t}})},Ao.createFromOptions=function(e,t){return Ye(Ao,e,t)};var go=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!0),this.h=new vp,this.embeddings={embeddings:[]},se(e=this.h,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t=this.h,i=Oe(this.h,Zm,2);return i=i?i.clone():new Zm,e.l2Normalize!==void 0?dc(i,1,e.l2Normalize):"l2Normalize"in e&&Hi(i,1),e.quantize!==void 0?dc(i,2,e.quantize):"quantize"in e&&Hi(i,2),se(t,0,2,i),this.l(e)}Ba(e,t){return Ro(this,e,t),this.embeddings}Ca(e,t,i){return ts(this,e,i,t),this.embeddings}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"embeddings_out");const t=new Co;Mo(t,I9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"EMBEDDINGS:embeddings_out"),i.o(t),bo(e,i),this.g.attachProtoListener("embeddings_out",(n,o)=>{n=t9(n),this.embeddings=function(l){return{embeddings:hs(l,$B,1).map(I=>{var Z,x,L,K,st;const m={headIndex:(Z=Ho(Go(I,3),0))!=null?Z:-1,headName:(x=jo(I,4))!=null?x:""};if(R2(I,ym,ya(I,1))!==void 0)I=Pr(I=Oe(I,ym,ya(I,1)),1,Os),m.floatEmbedding=I.slice();else{const ut=new Uint8Array(0);m.quantizedEmbedding=(st=(K=(L=Oe(I,qB,ya(I,2)))==null?void 0:L.qa())==null?void 0:K.h())!=null?st:ut}return m}),timestampMs:Ho($g(Ms(l,2)),0)}}(n),Kt(this,o)}),this.g.attachEmptyPacketListener("embeddings_out",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};go.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=Wm(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=Wm(Vm(e.quantizedEmbedding),Vm(t.quantizedEmbedding))}return e},go.prototype.embedForVideo=go.prototype.Ca,go.prototype.embed=go.prototype.Ba,go.prototype.setOptions=go.prototype.o,go.createFromModelPath=function(e,t){return Ye(go,e,{baseOptions:{modelAssetPath:t}})},go.createFromModelBuffer=function(e,t){return Ye(go,e,{baseOptions:{modelAssetBuffer:t}})},go.createFromOptions=function(e,t){return Ye(go,e,t)};var RI=class{constructor(e,t,i){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=i}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach(i=>{i.close()}),(t=this.categoryMask)==null||t.close()}};function Km(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function Um(e){try{const t=new RI(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{Ed(e)}}RI.prototype.close=RI.prototype.close;var En=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new IC,this.v=new Sp,se(this.h,0,3,this.v),se(e=this.h,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i;return e.displayNamesLocale!==void 0?Hi(this.h,2,yl(e.displayNamesLocale)):"displayNamesLocale"in e&&Hi(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=(t=e.outputCategoryMask)!=null?t:!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=(i=e.outputConfidenceMasks)!=null?i:!0),super.l(e)}I(){(function(e){var i,n,o;const t=hs(e.fa(),On,1).filter(l=>jo(l,1).includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(e.s=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&((o=(n=(i=Oe(t[0],Co,7))==null?void 0:i.l())==null?void 0:n.g())!=null?o:new Map).forEach((l,I)=>{e.s[Number(I)]=jo(l,1)})})(this)}ga(e,t,i){const n=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:i,Km(this),Ro(this,e,n),Um(this)}Na(e,t,i,n){const o=typeof i!="function"?i:{};return this.j=typeof i=="function"?i:n,Km(this),ts(this,e,o,t),Um(this)}Fa(){return this.s}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect");const t=new Co;Mo(t,Fp,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),i.o(t),bo(e,i),Ud(this,e),this.outputConfidenceMasks&&(Pe(e,"confidence_masks"),Le(i,"CONFIDENCE_MASKS:confidence_masks"),gl(this,"confidence_masks"),this.g.ea("confidence_masks",(n,o)=>{this.confidenceMasks=n.map(l=>Il(this,l,!0,!this.j)),Kt(this,o)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],Kt(this,n)})),this.outputCategoryMask&&(Pe(e,"category_mask"),Le(i,"CATEGORY_MASK:category_mask"),gl(this,"category_mask"),this.g.X("category_mask",(n,o)=>{this.categoryMask=Il(this,n,!1,!this.j),Kt(this,o)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,Kt(this,n)})),Pe(e,"quality_scores"),Le(i,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,o)=>{this.qualityScores=n,Kt(this,o)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};En.prototype.getLabels=En.prototype.Fa,En.prototype.segmentForVideo=En.prototype.Na,En.prototype.segment=En.prototype.ga,En.prototype.setOptions=En.prototype.o,En.createFromModelPath=function(e,t){return Ye(En,e,{baseOptions:{modelAssetPath:t}})},En.createFromModelBuffer=function(e,t){return Ye(En,e,{baseOptions:{modelAssetBuffer:t}})},En.createFromOptions=function(e,t){return Ye(En,e,t)};var vI=class{constructor(e,t,i){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=i}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach(i=>{i.close()}),(t=this.categoryMask)==null||t.close()}};vI.prototype.close=vI.prototype.close;var y9=class extends Ot{constructor(e){super(e)}},Tr=[0,an,-2],ld=[0,ss,-3,en,ss,-1],Em=[0,ld],Qm=[0,ld,an,-1],Ba=class extends Ot{constructor(e){super(e)}},Dm=[0,ss,-1,en],Z9=class extends Ot{constructor(){super()}},Om=class extends Ot{constructor(e){super(e)}},SI=[1,2,3,4,5,6,7,8,9,10,14,15],jp=class extends Ot{constructor(){super()}};jp.prototype.g=Td([0,fn,[0,SI,Bi,ld,Bi,[0,ld,Tr],Bi,Em,Bi,[0,Em,Tr],Bi,Dm,Bi,[0,ss,-3,en,Po],Bi,[0,ss,-3,en],Bi,[0,hi,ss,-2,en,an,en,-1,2,ss,Tr],Bi,Qm,Bi,[0,Qm,Tr],ss,Tr,hi,Bi,[0,ss,-3,en,Tr,-1],Bi,[0,fn,Dm]],hi,[0,hi,an,-1,en]]);var Ko=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new IC,this.s=new Sp,se(this.h,0,3,this.s),se(e=this.h,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i;return"outputCategoryMask"in e&&(this.outputCategoryMask=(t=e.outputCategoryMask)!=null?t:!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=(i=e.outputConfidenceMasks)!=null?i:!0),super.l(e)}ga(e,t,i,n){const o=typeof i!="function"?i:{};this.j=typeof i=="function"?i:n,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,i=this.B+1,n=new jp;const l=new Om;var I=new y9;if(_o(I,1,255),se(l,0,12,I),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var m=new Ba;dc(m,3,!0),jt(m,1,t.keypoint.x),jt(m,2,t.keypoint.y),Kl(l,5,SI,m)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(m of(I=new Z9,t.scribble))dc(t=new Ba,3,!0),jt(t,1,m.x),jt(t,2,m.y),id(I,1,Ba,t);Kl(l,15,SI,I)}id(n,1,Om,l),this.g.addProtoToStream(n.g(),"drishti.RenderData","roi_in",i),Ro(this,e,o);t:{try{const x=new vI(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var Z=x;break t}this.j(x)}finally{Ed(this)}Z=void 0}return Z}m(){var e=new ro;ki(e,"image_in"),ki(e,"roi_in"),ki(e,"norm_rect_in");const t=new Co;Mo(t,Fp,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),xi(i,"IMAGE:image_in"),xi(i,"ROI:roi_in"),xi(i,"NORM_RECT:norm_rect_in"),i.o(t),bo(e,i),Ud(this,e),this.outputConfidenceMasks&&(Pe(e,"confidence_masks"),Le(i,"CONFIDENCE_MASKS:confidence_masks"),gl(this,"confidence_masks"),this.g.ea("confidence_masks",(n,o)=>{this.confidenceMasks=n.map(l=>Il(this,l,!0,!this.j)),Kt(this,o)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],Kt(this,n)})),this.outputCategoryMask&&(Pe(e,"category_mask"),Le(i,"CATEGORY_MASK:category_mask"),gl(this,"category_mask"),this.g.X("category_mask",(n,o)=>{this.categoryMask=Il(this,n,!1,!this.j),Kt(this,o)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,Kt(this,n)})),Pe(e,"quality_scores"),Le(i,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,o)=>{this.qualityScores=n,Kt(this,o)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ko.prototype.segment=Ko.prototype.ga,Ko.prototype.setOptions=Ko.prototype.o,Ko.createFromModelPath=function(e,t){return Ye(Ko,e,{baseOptions:{modelAssetPath:t}})},Ko.createFromModelBuffer=function(e,t){return Ye(Ko,e,{baseOptions:{modelAssetBuffer:t}})},Ko.createFromOptions=function(e,t){return Ye(Ko,e,t)};var yo=class extends io{constructor(e,t){super(new Xo(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},se(e=this.h=new Hp,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Hi(this.h,2,yl(e.displayNamesLocale)):"displayNamesLocale"in e&&Hi(this.h,2),e.maxResults!==void 0?_o(this.h,3,e.maxResults):"maxResults"in e&&Hi(this.h,3),e.scoreThreshold!==void 0?jt(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&Hi(this.h,4),e.categoryAllowlist!==void 0?nd(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&Hi(this.h,5),e.categoryDenylist!==void 0?nd(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&Hi(this.h,6),this.l(e)}D(e,t){return this.j={detections:[]},Ro(this,e,t),this.j}F(e,t,i){return this.j={detections:[]},ts(this,e,i,t),this.j}m(){var e=new ro;ki(e,"input_frame_gpu"),ki(e,"norm_rect"),Pe(e,"detections");const t=new Co;Mo(t,C9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.ObjectDetectorGraph"),xi(i,"IMAGE:input_frame_gpu"),xi(i,"NORM_RECT:norm_rect"),Le(i,"DETECTIONS:detections"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("detections",(n,o)=>{for(const l of n)n=op(l),this.j.detections.push(Np(n));Kt(this,o)}),this.g.attachEmptyPacketListener("detections",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};yo.prototype.detectForVideo=yo.prototype.F,yo.prototype.detect=yo.prototype.D,yo.prototype.setOptions=yo.prototype.o,yo.createFromModelPath=async function(e,t){return Ye(yo,e,{baseOptions:{modelAssetPath:t}})},yo.createFromModelBuffer=function(e,t){return Ye(yo,e,{baseOptions:{modelAssetBuffer:t}})},yo.createFromOptions=function(e,t){return Ye(yo,e,t)};var wI=class{constructor(e,t,i){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=i}close(){var e;(e=this.segmentationMasks)==null||e.forEach(t=>{t.close()})}};function jm(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function _m(e){try{const t=new wI(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{Ed(e)}}wI.prototype.close=wI.prototype.close;var ao=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,se(e=this.h=new xp,0,1,t=new Di),this.v=new Bp,se(this.h,0,3,this.v),this.j=new Wp,se(this.h,0,2,this.j),_o(this.j,4,1),jt(this.j,2,.5),jt(this.v,2,.5),jt(this.h,4,.5)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i,n,o,l;return"numPoses"in e&&_o(this.j,4,(t=e.numPoses)!=null?t:1),"minPoseDetectionConfidence"in e&&jt(this.j,2,(i=e.minPoseDetectionConfidence)!=null?i:.5),"minTrackingConfidence"in e&&jt(this.h,4,(n=e.minTrackingConfidence)!=null?n:.5),"minPosePresenceConfidence"in e&&jt(this.v,2,(o=e.minPosePresenceConfidence)!=null?o:.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=(l=e.outputSegmentationMasks)!=null?l:!1),this.l(e)}D(e,t,i){const n=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:i,jm(this),Ro(this,e,n),_m(this)}F(e,t,i,n){const o=typeof i!="function"?i:{};return this.s=typeof i=="function"?i:n,jm(this),ts(this,e,o,t),_m(this)}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"normalized_landmarks"),Pe(e,"world_landmarks"),Pe(e,"segmentation_masks");const t=new Co;Mo(t,m9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"NORM_LANDMARKS:normalized_landmarks"),Le(i,"WORLD_LANDMARKS:world_landmarks"),i.o(t),bo(e,i),Ud(this,e),this.g.attachProtoVectorListener("normalized_landmarks",(n,o)=>{this.landmarks=[];for(const l of n)n=Fc(l),this.landmarks.push(Kd(n));Kt(this,o)}),this.g.attachEmptyPacketListener("normalized_landmarks",n=>{this.landmarks=[],Kt(this,n)}),this.g.attachProtoVectorListener("world_landmarks",(n,o)=>{this.worldLandmarks=[];for(const l of n)n=tl(l),this.worldLandmarks.push(Dl(n));Kt(this,o)}),this.g.attachEmptyPacketListener("world_landmarks",n=>{this.worldLandmarks=[],Kt(this,n)}),this.outputSegmentationMasks&&(Le(i,"SEGMENTATION_MASK:segmentation_masks"),gl(this,"segmentation_masks"),this.g.ea("segmentation_masks",(n,o)=>{this.segmentationMasks=n.map(l=>Il(this,l,!0,!this.s)),Kt(this,o)}),this.g.attachEmptyPacketListener("segmentation_masks",n=>{this.segmentationMasks=[],Kt(this,n)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ao.prototype.detectForVideo=ao.prototype.F,ao.prototype.detect=ao.prototype.D,ao.prototype.setOptions=ao.prototype.o,ao.createFromModelPath=function(e,t){return Ye(ao,e,{baseOptions:{modelAssetPath:t}})},ao.createFromModelBuffer=function(e,t){return Ye(ao,e,{baseOptions:{modelAssetBuffer:t}})},ao.createFromOptions=function(e,t){return Ye(ao,e,t)},ao.POSE_CONNECTIONS=Op;const f9=.3;class G9{constructor(){this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.pixelCount=0,this.inputOffset=0,this.outputOffset=0}async init(t,i){await this.initWasm(t,i),this.infos&&(this.canvas.width=this.infos.inputWidth,this.canvas.height=this.infos.inputHeight,this.pixelCount=this.infos.inputWidth*this.infos.inputHeight,this.mask=new ImageData(this.infos.inputWidth,this.infos.inputHeight),this.inputOffset=this.infos.inputMemoryOffset/4,this.outputOffset=this.infos.outputMemoryOffset/4)}async initWasm(t,i){this.infos=await Q5(t,i)}async process(t,i){if(!this.mask||!this.infos)return;const n=this.infos.inputWidth,o=this.infos.inputHeight;this.context.drawImage(t,0,0,t.width,t.height,0,0,n,o);const l=this.context.getImageData(0,0,n,o),I=this.infos.selectedTFLite.HEAPF32;for(let m=0;m<this.pixelCount;m++){const Z=this.inputOffset+m*3;I[Z]=l.data[m*4]/255,I[Z+1]=l.data[m*4+1]/255,I[Z+2]=l.data[m*4+2]/255}this.infos.selectedTFLite._runInference();for(let m=0;m<this.pixelCount;m++){const Z=this.infos.selectedTFLite.HEAPF32[this.outputOffset+m];this.mask.data[m*4]=this.mask.data[m*4+3]=255*Z}return createImageBitmap(this.mask)}isGpuSupported(){var t,i,n;return(n=(i=(t=this.infos)==null?void 0:t.selectedTFLite)==null?void 0:i._isGPUEnabled())!=null?n:!1}}class V9{constructor(){this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=0,this.height=0}async init(t,i){globalThis.document={};const n="VIDEO";(async()=>{const l=await or.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15/wasm");this.imageSegmenter=await En.createFromOptions(l,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/image_segmenter/selfie_segmenter_landscape/float16/latest/selfie_segmenter_landscape.tflite",delegate:"GPU"},runningMode:n,outputCategoryMask:!0,outputConfidenceMasks:!0})})()}async process(t,i){var Z;if(!this.imageSegmenter){console.warn("ImageSegmenter instance not available");return}(this.width!==t.width||this.height!==t.height)&&(this.canvas.width=this.width=t.width,this.canvas.height=this.height=t.height,this.mask&&(this.mask=new ImageData(this.width,this.height))),this.mask||(this.mask=new ImageData(this.width,this.height)),this.context.drawImage(t,0,0,t.width,t.height);const o=(Z=(await new Promise(x=>{var L;(L=this.imageSegmenter)==null||L.segmentForVideo(this.context.getImageData(0,0,t.width,t.height),i.timestamp,K=>x(K))})).confidenceMasks)==null?void 0:Z[0],l=o==null?void 0:o.getAsFloat32Array();if(!l)return;if(!this.previousConfidenceMask){this.previousConfidenceMask=l.slice();return}const I=l.map((x,L)=>{var st;const K=(st=this.previousConfidenceMask)==null?void 0:st[L];return K!==void 0?this.blend(K,x):x}),m=[255,0,0];for(let x=0;x<(I==null?void 0:I.length);x++)I[x]>f9?(this.mask.data[x*4]=m[0],this.mask.data[x*4+1]=m[1],this.mask.data[x*4+2]=m[2],this.mask.data[x*4+3]=255):this.mask.data[x*4]=this.mask.data[x*4+1]=this.mask.data[x*4+2]=this.mask.data[x*4+3]=0;return this.previousConfidenceMask=l.slice(),createImageBitmap(this.mask)}isGpuSupported(){return!0}blend(t,i){const o=-.748699,l=-57.8051,I=291.309,m=-624.717,Z=i-.5,x=Z*Z,L=1-Math.min(1,x*(5.68842+x*(o+x*(l+x*(I+x*m)))));return i+(t-i)*(L*.9)}}class W9{constructor(){this.reporter=new D3,this.isEnabled=!0}async init(t,i){var n;i.vonageSelfieSegmentationEngine!==void 0&&i.vonageSelfieSegmentationEngine===!1?this.selfieSegmentation=new V9:this.selfieSegmentation=new G9,await((n=this.selfieSegmentation)==null?void 0:n.init(i.wasmAssetUriPath,i.tfliteAssetUriPath)),this.backgroundFilter=new k5,this.report({variation:"Create"})}async transform(t,i){var m,Z,x;if(!this.isEnabled)return i.enqueue(t);let n;const o=(m=t.timestamp)!=null?m:0,l=await createImageBitmap(t),I=await((Z=this.selfieSegmentation)==null?void 0:Z.process(l,t));I&&(n=await((x=this.backgroundFilter)==null?void 0:x.process(l,I))),n?(t.close(),i.enqueue(new VideoFrame(n,{timestamp:o,alpha:"discard"}))):i.enqueue(t)}async setBackgroundOptions(t){var i;this.backgroundOptions=t,await((i=this.backgroundFilter)==null?void 0:i.setBackgroundOptions(t)),this.report({variation:"Update"})}async setVideoBGReadable(t){var i;await((i=this.backgroundFilter)==null?void 0:i.setVideoBGReadable(t))}async setVirtualBGImage(t){var i;await((i=this.backgroundFilter)==null?void 0:i.setVirtualBGImage(t))}setFlickeringOptions(t){var i;(i=this.backgroundFilter)==null||i.setFlickeringOptions(t),this.report({variation:"Update"})}async profile(t){var i,n;return(n=(i=this.backgroundFilter)==null?void 0:i.profile(t))!=null?n:[]}getTransformerType(){var t,i;return(i=(t=this.backgroundOptions)==null?void 0:t.transformerType)!=null?i:"Undefined"}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}report(t){var i;this.reporter.send({version:O3,action:"MlTransformers",transformerType:(i=this.backgroundOptions)==null?void 0:i.transformerType,config:JSON.stringify(this.backgroundOptions),...t})}}const _p=class{constructor(){this.backgroundTransformer=new W9,this.mediaProcessor=new OZ,this.rate=30,this.eventsQueue=[],this.frameTransformLatencyMs=[]}async init(t,i){this.frameTransformLatencyMs=[],await this.backgroundTransformer.init(t,i),await this.mediaProcessor.setTransformers([this.backgroundTransformer]),this.mediaProcessor.setTrackExpectedRate(this.rate),this.mediaProcessor.onAny((n,o)=>{this.resolveOnMediaProcessor?(this.resolveOnMediaProcessor({name:n,data:o}),this.resolveOnMediaProcessor=void 0):this.eventsQueue.push({name:n,data:o})})}enable(){this.backgroundTransformer.enable()}disable(){this.backgroundTransformer.disable()}async onMediaProcessorEvent(){return await new Promise(t=>{this.eventsQueue.length>0?t(this.eventsQueue.shift()):this.resolveOnMediaProcessor=t})}async setTrackExpectedRate(t){this.rate=t,this.mediaProcessor.setTrackExpectedRate(t)}async transform(t,i){let n=performance.now();this.mediaProcessor.transform(t,i),this.frameTransformLatencyMs.push(performance.now()-n)}async setBackgroundOptions(t){var i;await((i=this.backgroundTransformer)==null?void 0:i.setBackgroundOptions(t))}setVideoBGReadable(t){this.backgroundTransformer.setVideoBGReadable(t)}async setVirtualBGImage(t){await this.backgroundTransformer.setVirtualBGImage(t)}async terminate(){await this.mediaProcessor.destroy();const i=this.frameTransformLatencyMs.reduce((n,o)=>n+o,0)/this.frameTransformLatencyMs.length||0;console.log(`Transform latency average is: ${i} ms`)}setFlickeringOptions(t){this.backgroundTransformer.setFlickeringOptions(t)}setVonageMetadata(t){zZ(t)}async profile(t){return JSON.stringify(await this.backgroundTransformer.profile(t))}};A3("ProcessorWorker",_p);let B9=_p;const Pp="KGZ1bmN0aW9uICgpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGNyZWF0ZUdsb2JhbFRoaXNWYXJpYWJsZShuYW1lLCBkZWZhdWx0VmFsdWUpIHsKICAgIGlmICghZ2xvYmFsVGhpcy52b25hZ2UpIHsKICAgICAgZ2xvYmFsVGhpcy52b25hZ2UgPSB7fTsKICAgIH0KICAgIGlmICghZ2xvYmFsVGhpcy52b25hZ2Uud29ya2VyaXplcikgewogICAgICBnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyID0ge307CiAgICB9CiAgICBsZXQgZ2xvYmFsczIgPSBnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyOwogICAgaWYgKCFnbG9iYWxzMltuYW1lXSkgewogICAgICBnbG9iYWxzMltuYW1lXSA9IGRlZmF1bHRWYWx1ZTsKICAgIH0KICAgIHJldHVybiBnbG9iYWxzMltuYW1lXTsKICB9CiAgY29uc3QgZ2xvYmFscyA9IGNyZWF0ZUdsb2JhbFRoaXNWYXJpYWJsZSgKICAgICJnbG9iYWxzIiwKICAgIHt9CiAgKTsKICB2YXIgQ29tbWFuZFR5cGUgPSAvKiBAX19QVVJFX18gKi8gKChDb21tYW5kVHlwZTIpID0+IHsKICAgIENvbW1hbmRUeXBlMlsiSU5JVCJdID0gIklOSVQiOwogICAgQ29tbWFuZFR5cGUyWyJGT1JXQVJEIl0gPSAiRk9SV0FSRCI7CiAgICBDb21tYW5kVHlwZTJbIlRFUk1JTkFURSJdID0gIlRFUk1JTkFURSI7CiAgICBDb21tYW5kVHlwZTJbIkdMT0JBTFNfU1lOQyJdID0gIkdMT0JBTFNfU1lOQyI7CiAgICBDb21tYW5kVHlwZTJbIkVWRU5UIl0gPSAiRVZFTlQiOwogICAgcmV0dXJuIENvbW1hbmRUeXBlMjsKICB9KShDb21tYW5kVHlwZSB8fCB7fSk7CiAgZnVuY3Rpb24gaXNUcmFuc2ZlcmFibGUoYXJnKSB7CiAgICBjb25zdCB0cmFuc2ZlcmFibGVUeXBlcyA9IFtJbWFnZUJpdG1hcCwgUmVhZGFibGVTdHJlYW0sIFdyaXRhYmxlU3RyZWFtXTsKICAgIHJldHVybiB0cmFuc2ZlcmFibGVUeXBlcy5zb21lKCh0eXBlKSA9PiBhcmcgaW5zdGFuY2VvZiB0eXBlKTsKICB9CiAgZnVuY3Rpb24gcG9zdENvbW1hbmQoY29tbWFuZCwgcmVzdWx0KSB7CiAgICBjb25zdCB7IGlkLCB0eXBlIH0gPSBjb21tYW5kOwogICAgY29uc3QgcmVzdWx0QXNBcnJheSA9IEFycmF5LmlzQXJyYXkocmVzdWx0KSA/IHJlc3VsdCA6IFtyZXN1bHRdOwogICAgcG9zdE1lc3NhZ2UoCiAgICAgIHsKICAgICAgICBpZCwKICAgICAgICB0eXBlLAogICAgICAgIHJlc3VsdAogICAgICB9LAogICAgICByZXN1bHRBc0FycmF5LmZpbHRlcigocmVzdWx0MikgPT4gaXNUcmFuc2ZlcmFibGUocmVzdWx0MikpCiAgICApOwogIH0KICBjcmVhdGVHbG9iYWxUaGlzVmFyaWFibGUoIndvcmtlcml6ZWQiLCB7fSk7CiAgZnVuY3Rpb24gaXNXb3JrZXIoKSB7CiAgICByZXR1cm4gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7CiAgfQogIGZ1bmN0aW9uIGNvcHkoZnJvbSwgdG8pIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHRvKSkgewogICAgICB0by5zcGxpY2UoMCwgdG8ubGVuZ3RoKTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIHRvID09PSAib2JqZWN0IikgewogICAgICBmb3IgKGNvbnN0IGkgaW4gdG8pIHsKICAgICAgICBkZWxldGUgdG9baV07CiAgICAgIH0KICAgIH0KICAgIGZvciAoY29uc3QgaSBpbiBmcm9tKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGZyb21baV0pKSB7CiAgICAgICAgdG9baV0gPSBbXTsKICAgICAgICBjb3B5KGZyb21baV0sIHRvW2ldKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZnJvbVtpXSA9PT0gIm9iamVjdCIpIHsKICAgICAgICB0b1tpXSA9IHt9OwogICAgICAgIGNvcHkoZnJvbVtpXSwgdG9baV0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRvW2ldID0gZnJvbVtpXTsKICAgICAgfQogICAgfQogIH0KICBjb25zdCBhbnlNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTsKICBjb25zdCBldmVudHNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTsKICBjb25zdCBwcm9kdWNlcnNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTsKICBjb25zdCBhbnlQcm9kdWNlciA9IFN5bWJvbCgiYW55UHJvZHVjZXIiKTsKICBjb25zdCByZXNvbHZlZFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTsKICBjb25zdCBsaXN0ZW5lckFkZGVkID0gU3ltYm9sKCJsaXN0ZW5lckFkZGVkIik7CiAgY29uc3QgbGlzdGVuZXJSZW1vdmVkID0gU3ltYm9sKCJsaXN0ZW5lclJlbW92ZWQiKTsKICBsZXQgY2FuRW1pdE1ldGFFdmVudHMgPSBmYWxzZTsKICBsZXQgaXNHbG9iYWxEZWJ1Z0VuYWJsZWQgPSBmYWxzZTsKICBmdW5jdGlvbiBhc3NlcnRFdmVudE5hbWUoZXZlbnROYW1lKSB7CiAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSAhPT0gInN0cmluZyIgJiYgdHlwZW9mIGV2ZW50TmFtZSAhPT0gInN5bWJvbCIgJiYgdHlwZW9mIGV2ZW50TmFtZSAhPT0gIm51bWJlciIpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYGV2ZW50TmFtZWAgbXVzdCBiZSBhIHN0cmluZywgc3ltYm9sLCBvciBudW1iZXIiKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gYXNzZXJ0TGlzdGVuZXIobGlzdGVuZXIpIHsKICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICJmdW5jdGlvbiIpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGdldExpc3RlbmVycyhpbnN0YW5jZSwgZXZlbnROYW1lKSB7CiAgICBjb25zdCBldmVudHMgPSBldmVudHNNYXAuZ2V0KGluc3RhbmNlKTsKICAgIGlmICghZXZlbnRzLmhhcyhldmVudE5hbWUpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiBldmVudHMuZ2V0KGV2ZW50TmFtZSk7CiAgfQogIGZ1bmN0aW9uIGdldEV2ZW50UHJvZHVjZXJzKGluc3RhbmNlLCBldmVudE5hbWUpIHsKICAgIGNvbnN0IGtleSA9IHR5cGVvZiBldmVudE5hbWUgPT09ICJzdHJpbmciIHx8IHR5cGVvZiBldmVudE5hbWUgPT09ICJzeW1ib2wiIHx8IHR5cGVvZiBldmVudE5hbWUgPT09ICJudW1iZXIiID8gZXZlbnROYW1lIDogYW55UHJvZHVjZXI7CiAgICBjb25zdCBwcm9kdWNlcnMgPSBwcm9kdWNlcnNNYXAuZ2V0KGluc3RhbmNlKTsKICAgIGlmICghcHJvZHVjZXJzLmhhcyhrZXkpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiBwcm9kdWNlcnMuZ2V0KGtleSk7CiAgfQogIGZ1bmN0aW9uIGVucXVldWVQcm9kdWNlcnMoaW5zdGFuY2UsIGV2ZW50TmFtZSwgZXZlbnREYXRhKSB7CiAgICBjb25zdCBwcm9kdWNlcnMgPSBwcm9kdWNlcnNNYXAuZ2V0KGluc3RhbmNlKTsKICAgIGlmIChwcm9kdWNlcnMuaGFzKGV2ZW50TmFtZSkpIHsKICAgICAgZm9yIChjb25zdCBwcm9kdWNlciBvZiBwcm9kdWNlcnMuZ2V0KGV2ZW50TmFtZSkpIHsKICAgICAgICBwcm9kdWNlci5lbnF1ZXVlKGV2ZW50RGF0YSk7CiAgICAgIH0KICAgIH0KICAgIGlmIChwcm9kdWNlcnMuaGFzKGFueVByb2R1Y2VyKSkgewogICAgICBjb25zdCBpdGVtID0gUHJvbWlzZS5hbGwoW2V2ZW50TmFtZSwgZXZlbnREYXRhXSk7CiAgICAgIGZvciAoY29uc3QgcHJvZHVjZXIgb2YgcHJvZHVjZXJzLmdldChhbnlQcm9kdWNlcikpIHsKICAgICAgICBwcm9kdWNlci5lbnF1ZXVlKGl0ZW0pOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGl0ZXJhdG9yKGluc3RhbmNlLCBldmVudE5hbWVzKSB7CiAgICBldmVudE5hbWVzID0gQXJyYXkuaXNBcnJheShldmVudE5hbWVzKSA/IGV2ZW50TmFtZXMgOiBbZXZlbnROYW1lc107CiAgICBsZXQgaXNGaW5pc2hlZCA9IGZhbHNlOwogICAgbGV0IGZsdXNoID0gKCkgPT4gewogICAgfTsKICAgIGxldCBxdWV1ZSA9IFtdOwogICAgY29uc3QgcHJvZHVjZXIgPSB7CiAgICAgIGVucXVldWUoaXRlbSkgewogICAgICAgIHF1ZXVlLnB1c2goaXRlbSk7CiAgICAgICAgZmx1c2goKTsKICAgICAgfSwKICAgICAgZmluaXNoKCkgewogICAgICAgIGlzRmluaXNoZWQgPSB0cnVlOwogICAgICAgIGZsdXNoKCk7CiAgICAgIH0KICAgIH07CiAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CiAgICAgIGxldCBzZXQgPSBnZXRFdmVudFByb2R1Y2VycyhpbnN0YW5jZSwgZXZlbnROYW1lKTsKICAgICAgaWYgKCFzZXQpIHsKICAgICAgICBzZXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgIGNvbnN0IHByb2R1Y2VycyA9IHByb2R1Y2Vyc01hcC5nZXQoaW5zdGFuY2UpOwogICAgICAgIHByb2R1Y2Vycy5zZXQoZXZlbnROYW1lLCBzZXQpOwogICAgICB9CiAgICAgIHNldC5hZGQocHJvZHVjZXIpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgYXN5bmMgbmV4dCgpIHsKICAgICAgICBpZiAoIXF1ZXVlKSB7CiAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlIH07CiAgICAgICAgfQogICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGlmIChpc0ZpbmlzaGVkKSB7CiAgICAgICAgICAgIHF1ZXVlID0gdm9pZCAwOwogICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0KCk7CiAgICAgICAgICB9CiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICBmbHVzaCA9IHJlc29sdmU7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiB0aGlzLm5leHQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRvbmU6IGZhbHNlLAogICAgICAgICAgdmFsdWU6IGF3YWl0IHF1ZXVlLnNoaWZ0KCkKICAgICAgICB9OwogICAgICB9LAogICAgICBhc3luYyByZXR1cm4odmFsdWUpIHsKICAgICAgICBxdWV1ZSA9IHZvaWQgMDsKICAgICAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CiAgICAgICAgICBjb25zdCBzZXQgPSBnZXRFdmVudFByb2R1Y2VycyhpbnN0YW5jZSwgZXZlbnROYW1lKTsKICAgICAgICAgIGlmIChzZXQpIHsKICAgICAgICAgICAgc2V0LmRlbGV0ZShwcm9kdWNlcik7CiAgICAgICAgICAgIGlmIChzZXQuc2l6ZSA9PT0gMCkgewogICAgICAgICAgICAgIGNvbnN0IHByb2R1Y2VycyA9IHByb2R1Y2Vyc01hcC5nZXQoaW5zdGFuY2UpOwogICAgICAgICAgICAgIHByb2R1Y2Vycy5kZWxldGUoZXZlbnROYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmbHVzaCgpOwogICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/IHsgZG9uZTogdHJ1ZSwgdmFsdWU6IGF3YWl0IHZhbHVlIH0gOiB7IGRvbmU6IHRydWUgfTsKICAgICAgfSwKICAgICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gZGVmYXVsdE1ldGhvZE5hbWVzT3JBc3NlcnQobWV0aG9kTmFtZXMpIHsKICAgIGlmIChtZXRob2ROYW1lcyA9PT0gdm9pZCAwKSB7CiAgICAgIHJldHVybiBhbGxFbWl0dGVyeU1ldGhvZHM7CiAgICB9CiAgICBpZiAoIUFycmF5LmlzQXJyYXkobWV0aG9kTmFtZXMpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImBtZXRob2ROYW1lc2AgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzIik7CiAgICB9CiAgICBmb3IgKGNvbnN0IG1ldGhvZE5hbWUgb2YgbWV0aG9kTmFtZXMpIHsKICAgICAgaWYgKCFhbGxFbWl0dGVyeU1ldGhvZHMuaW5jbHVkZXMobWV0aG9kTmFtZSkpIHsKICAgICAgICBpZiAodHlwZW9mIG1ldGhvZE5hbWUgIT09ICJzdHJpbmciKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIGVsZW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpOwogICAgICAgIH0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bWV0aG9kTmFtZX0gaXMgbm90IEVtaXR0ZXJ5IG1ldGhvZGApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbWV0aG9kTmFtZXM7CiAgfQogIGNvbnN0IGlzTWV0YUV2ZW50ID0gKGV2ZW50TmFtZSkgPT4gZXZlbnROYW1lID09PSBsaXN0ZW5lckFkZGVkIHx8IGV2ZW50TmFtZSA9PT0gbGlzdGVuZXJSZW1vdmVkOwogIGZ1bmN0aW9uIGVtaXRNZXRhRXZlbnQoZW1pdHRlciwgZXZlbnROYW1lLCBldmVudERhdGEpIHsKICAgIGlmIChpc01ldGFFdmVudChldmVudE5hbWUpKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY2FuRW1pdE1ldGFFdmVudHMgPSB0cnVlOwogICAgICAgIGVtaXR0ZXIuZW1pdChldmVudE5hbWUsIGV2ZW50RGF0YSk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgY2FuRW1pdE1ldGFFdmVudHMgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KICBjbGFzcyBFbWl0dGVyeSB7CiAgICBzdGF0aWMgbWl4aW4oZW1pdHRlcnlQcm9wZXJ0eU5hbWUsIG1ldGhvZE5hbWVzKSB7CiAgICAgIG1ldGhvZE5hbWVzID0gZGVmYXVsdE1ldGhvZE5hbWVzT3JBc3NlcnQobWV0aG9kTmFtZXMpOwogICAgICByZXR1cm4gKHRhcmdldCkgPT4gewogICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgdGFyZ2V0YCBtdXN0IGJlIGZ1bmN0aW9uIik7CiAgICAgICAgfQogICAgICAgIGZvciAoY29uc3QgbWV0aG9kTmFtZSBvZiBtZXRob2ROYW1lcykgewogICAgICAgICAgaWYgKHRhcmdldC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gIT09IHZvaWQgMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7bWV0aG9kTmFtZX1cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGdldEVtaXR0ZXJ5UHJvcGVydHkoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgZW1pdHRlcnlQcm9wZXJ0eU5hbWUsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlOiBuZXcgRW1pdHRlcnkoKQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gdGhpc1tlbWl0dGVyeVByb3BlcnR5TmFtZV07CiAgICAgICAgfQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQucHJvdG90eXBlLCBlbWl0dGVyeVByb3BlcnR5TmFtZSwgewogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICBnZXQ6IGdldEVtaXR0ZXJ5UHJvcGVydHkKICAgICAgICB9KTsKICAgICAgICBjb25zdCBlbWl0dGVyeU1ldGhvZENhbGxlciA9IChtZXRob2ROYW1lKSA9PiBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICAgICAgICByZXR1cm4gdGhpc1tlbWl0dGVyeVByb3BlcnR5TmFtZV1bbWV0aG9kTmFtZV0oLi4uYXJncyk7CiAgICAgICAgfTsKICAgICAgICBmb3IgKGNvbnN0IG1ldGhvZE5hbWUgb2YgbWV0aG9kTmFtZXMpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQucHJvdG90eXBlLCBtZXRob2ROYW1lLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZTogZW1pdHRlcnlNZXRob2RDYWxsZXIobWV0aG9kTmFtZSkKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgICB9OwogICAgfQogICAgc3RhdGljIGdldCBpc0RlYnVnRW5hYmxlZCgpIHsKICAgICAgdmFyIF9hLCBfYjsKICAgICAgaWYgKHR5cGVvZiAoKF9hID0gZ2xvYmFsVGhpcy5wcm9jZXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuZW52KSAhPT0gIm9iamVjdCIpIHsKICAgICAgICByZXR1cm4gaXNHbG9iYWxEZWJ1Z0VuYWJsZWQ7CiAgICAgIH0KICAgICAgY29uc3QgeyBlbnYgfSA9IChfYiA9IGdsb2JhbFRoaXMucHJvY2VzcykgIT0gbnVsbCA/IF9iIDogeyBlbnY6IHt9IH07CiAgICAgIHJldHVybiBlbnYuREVCVUcgPT09ICJlbWl0dGVyeSIgfHwgZW52LkRFQlVHID09PSAiKiIgfHwgaXNHbG9iYWxEZWJ1Z0VuYWJsZWQ7CiAgICB9CiAgICBzdGF0aWMgc2V0IGlzRGVidWdFbmFibGVkKG5ld1ZhbHVlKSB7CiAgICAgIGlzR2xvYmFsRGVidWdFbmFibGVkID0gbmV3VmFsdWU7CiAgICB9CiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgdmFyIF9hOwogICAgICBhbnlNYXAuc2V0KHRoaXMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpOwogICAgICBldmVudHNNYXAuc2V0KHRoaXMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpOwogICAgICBwcm9kdWNlcnNNYXAuc2V0KHRoaXMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpOwogICAgICBwcm9kdWNlcnNNYXAuZ2V0KHRoaXMpLnNldChhbnlQcm9kdWNlciwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7CiAgICAgIHRoaXMuZGVidWcgPSAoX2EgPSBvcHRpb25zLmRlYnVnKSAhPSBudWxsID8gX2EgOiB7fTsKICAgICAgaWYgKHRoaXMuZGVidWcuZW5hYmxlZCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGhpcy5kZWJ1Zy5lbmFibGVkID0gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmRlYnVnLmxvZ2dlcikgewogICAgICAgIHRoaXMuZGVidWcubG9nZ2VyID0gKHR5cGUsIGRlYnVnTmFtZSwgZXZlbnROYW1lLCBldmVudERhdGEpID0+IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGV2ZW50RGF0YSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50RGF0YSk7CiAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgZXZlbnREYXRhID0gYE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcga2V5cyBmYWlsZWQgdG8gc3RyaW5naWZ5OiAke09iamVjdC5rZXlzKGV2ZW50RGF0YSkuam9pbigiLCIpfWA7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSA9PT0gInN5bWJvbCIgfHwgdHlwZW9mIGV2ZW50TmFtZSA9PT0gIm51bWJlciIpIHsKICAgICAgICAgICAgZXZlbnROYW1lID0gZXZlbnROYW1lLnRvU3RyaW5nKCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICBjb25zdCBsb2dUaW1lID0gYCR7Y3VycmVudFRpbWUuZ2V0SG91cnMoKX06JHtjdXJyZW50VGltZS5nZXRNaW51dGVzKCl9OiR7Y3VycmVudFRpbWUuZ2V0U2Vjb25kcygpfS4ke2N1cnJlbnRUaW1lLmdldE1pbGxpc2Vjb25kcygpfWA7CiAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7bG9nVGltZX1dW2VtaXR0ZXJ5OiR7dHlwZX1dWyR7ZGVidWdOYW1lfV0gRXZlbnQgTmFtZTogJHtldmVudE5hbWV9CglkYXRhOiAke2V2ZW50RGF0YX1gKTsKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgICBsb2dJZkRlYnVnRW5hYmxlZCh0eXBlLCBldmVudE5hbWUsIGV2ZW50RGF0YSkgewogICAgICBpZiAoRW1pdHRlcnkuaXNEZWJ1Z0VuYWJsZWQgfHwgdGhpcy5kZWJ1Zy5lbmFibGVkKSB7CiAgICAgICAgdGhpcy5kZWJ1Zy5sb2dnZXIodHlwZSwgdGhpcy5kZWJ1Zy5uYW1lLCBldmVudE5hbWUsIGV2ZW50RGF0YSk7CiAgICAgIH0KICAgIH0KICAgIG9uKGV2ZW50TmFtZXMsIGxpc3RlbmVyKSB7CiAgICAgIGFzc2VydExpc3RlbmVyKGxpc3RlbmVyKTsKICAgICAgZXZlbnROYW1lcyA9IEFycmF5LmlzQXJyYXkoZXZlbnROYW1lcykgPyBldmVudE5hbWVzIDogW2V2ZW50TmFtZXNdOwogICAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CiAgICAgICAgYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7CiAgICAgICAgbGV0IHNldCA9IGdldExpc3RlbmVycyh0aGlzLCBldmVudE5hbWUpOwogICAgICAgIGlmICghc2V0KSB7CiAgICAgICAgICBzZXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgICAgY29uc3QgZXZlbnRzID0gZXZlbnRzTWFwLmdldCh0aGlzKTsKICAgICAgICAgIGV2ZW50cy5zZXQoZXZlbnROYW1lLCBzZXQpOwogICAgICAgIH0KICAgICAgICBzZXQuYWRkKGxpc3RlbmVyKTsKICAgICAgICB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJzdWJzY3JpYmUiLCBldmVudE5hbWUsIHZvaWQgMCk7CiAgICAgICAgaWYgKCFpc01ldGFFdmVudChldmVudE5hbWUpKSB7CiAgICAgICAgICBlbWl0TWV0YUV2ZW50KHRoaXMsIGxpc3RlbmVyQWRkZWQsIHsgZXZlbnROYW1lLCBsaXN0ZW5lciB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMub2ZmLmJpbmQodGhpcywgZXZlbnROYW1lcywgbGlzdGVuZXIpOwogICAgfQogICAgb2ZmKGV2ZW50TmFtZXMsIGxpc3RlbmVyKSB7CiAgICAgIGFzc2VydExpc3RlbmVyKGxpc3RlbmVyKTsKICAgICAgZXZlbnROYW1lcyA9IEFycmF5LmlzQXJyYXkoZXZlbnROYW1lcykgPyBldmVudE5hbWVzIDogW2V2ZW50TmFtZXNdOwogICAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CiAgICAgICAgYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7CiAgICAgICAgY29uc3Qgc2V0ID0gZ2V0TGlzdGVuZXJzKHRoaXMsIGV2ZW50TmFtZSk7CiAgICAgICAgaWYgKHNldCkgewogICAgICAgICAgc2V0LmRlbGV0ZShsaXN0ZW5lcik7CiAgICAgICAgICBpZiAoc2V0LnNpemUgPT09IDApIHsKICAgICAgICAgICAgY29uc3QgZXZlbnRzID0gZXZlbnRzTWFwLmdldCh0aGlzKTsKICAgICAgICAgICAgZXZlbnRzLmRlbGV0ZShldmVudE5hbWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZSIsIGV2ZW50TmFtZSwgdm9pZCAwKTsKICAgICAgICBpZiAoIWlzTWV0YUV2ZW50KGV2ZW50TmFtZSkpIHsKICAgICAgICAgIGVtaXRNZXRhRXZlbnQodGhpcywgbGlzdGVuZXJSZW1vdmVkLCB7IGV2ZW50TmFtZSwgbGlzdGVuZXIgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBvbmNlKGV2ZW50TmFtZXMpIHsKICAgICAgbGV0IG9mZl87CiAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIG9mZl8gPSB0aGlzLm9uKGV2ZW50TmFtZXMsIChkYXRhKSA9PiB7CiAgICAgICAgICBvZmZfKCk7CiAgICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcHJvbWlzZS5vZmYgPSBvZmZfOwogICAgICByZXR1cm4gcHJvbWlzZTsKICAgIH0KICAgIGV2ZW50cyhldmVudE5hbWVzKSB7CiAgICAgIGV2ZW50TmFtZXMgPSBBcnJheS5pc0FycmF5KGV2ZW50TmFtZXMpID8gZXZlbnROYW1lcyA6IFtldmVudE5hbWVzXTsKICAgICAgZm9yIChjb25zdCBldmVudE5hbWUgb2YgZXZlbnROYW1lcykgewogICAgICAgIGFzc2VydEV2ZW50TmFtZShldmVudE5hbWUpOwogICAgICB9CiAgICAgIHJldHVybiBpdGVyYXRvcih0aGlzLCBldmVudE5hbWVzKTsKICAgIH0KICAgIGFzeW5jIGVtaXQoZXZlbnROYW1lLCBldmVudERhdGEpIHsKICAgICAgdmFyIF9hOwogICAgICBhc3NlcnRFdmVudE5hbWUoZXZlbnROYW1lKTsKICAgICAgaWYgKGlzTWV0YUV2ZW50KGV2ZW50TmFtZSkgJiYgIWNhbkVtaXRNZXRhRXZlbnRzKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYGV2ZW50TmFtZWAgY2Fubm90IGJlIG1ldGEgZXZlbnQgYGxpc3RlbmVyQWRkZWRgIG9yIGBsaXN0ZW5lclJlbW92ZWRgIik7CiAgICAgIH0KICAgICAgdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgiZW1pdCIsIGV2ZW50TmFtZSwgZXZlbnREYXRhKTsKICAgICAgZW5xdWV1ZVByb2R1Y2Vycyh0aGlzLCBldmVudE5hbWUsIGV2ZW50RGF0YSk7CiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IChfYSA9IGdldExpc3RlbmVycyh0aGlzLCBldmVudE5hbWUpKSAhPSBudWxsID8gX2EgOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICBjb25zdCBhbnlMaXN0ZW5lcnMgPSBhbnlNYXAuZ2V0KHRoaXMpOwogICAgICBjb25zdCBzdGF0aWNMaXN0ZW5lcnMgPSBbLi4ubGlzdGVuZXJzXTsKICAgICAgY29uc3Qgc3RhdGljQW55TGlzdGVuZXJzID0gaXNNZXRhRXZlbnQoZXZlbnROYW1lKSA/IFtdIDogWy4uLmFueUxpc3RlbmVyc107CiAgICAgIGF3YWl0IHJlc29sdmVkUHJvbWlzZTsKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoWwogICAgICAgIC4uLnN0YXRpY0xpc3RlbmVycy5tYXAoYXN5bmMgKGxpc3RlbmVyKSA9PiB7CiAgICAgICAgICBpZiAobGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikpIHsKICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKGV2ZW50RGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgLi4uc3RhdGljQW55TGlzdGVuZXJzLm1hcChhc3luYyAobGlzdGVuZXIpID0+IHsKICAgICAgICAgIGlmIChhbnlMaXN0ZW5lcnMuaGFzKGxpc3RlbmVyKSkgewogICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoZXZlbnROYW1lLCBldmVudERhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIF0pOwogICAgfQogICAgYXN5bmMgZW1pdFNlcmlhbChldmVudE5hbWUsIGV2ZW50RGF0YSkgewogICAgICB2YXIgX2E7CiAgICAgIGFzc2VydEV2ZW50TmFtZShldmVudE5hbWUpOwogICAgICBpZiAoaXNNZXRhRXZlbnQoZXZlbnROYW1lKSAmJiAhY2FuRW1pdE1ldGFFdmVudHMpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgZXZlbnROYW1lYCBjYW5ub3QgYmUgbWV0YSBldmVudCBgbGlzdGVuZXJBZGRlZGAgb3IgYGxpc3RlbmVyUmVtb3ZlZGAiKTsKICAgICAgfQogICAgICB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJlbWl0U2VyaWFsIiwgZXZlbnROYW1lLCBldmVudERhdGEpOwogICAgICBjb25zdCBsaXN0ZW5lcnMgPSAoX2EgPSBnZXRMaXN0ZW5lcnModGhpcywgZXZlbnROYW1lKSkgIT0gbnVsbCA/IF9hIDogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgY29uc3QgYW55TGlzdGVuZXJzID0gYW55TWFwLmdldCh0aGlzKTsKICAgICAgY29uc3Qgc3RhdGljTGlzdGVuZXJzID0gWy4uLmxpc3RlbmVyc107CiAgICAgIGNvbnN0IHN0YXRpY0FueUxpc3RlbmVycyA9IFsuLi5hbnlMaXN0ZW5lcnNdOwogICAgICBhd2FpdCByZXNvbHZlZFByb21pc2U7CiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2Ygc3RhdGljTGlzdGVuZXJzKSB7CiAgICAgICAgaWYgKGxpc3RlbmVycy5oYXMobGlzdGVuZXIpKSB7CiAgICAgICAgICBhd2FpdCBsaXN0ZW5lcihldmVudERhdGEpOwogICAgICAgIH0KICAgICAgfQogICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHN0YXRpY0FueUxpc3RlbmVycykgewogICAgICAgIGlmIChhbnlMaXN0ZW5lcnMuaGFzKGxpc3RlbmVyKSkgewogICAgICAgICAgYXdhaXQgbGlzdGVuZXIoZXZlbnROYW1lLCBldmVudERhdGEpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgb25BbnkobGlzdGVuZXIpIHsKICAgICAgYXNzZXJ0TGlzdGVuZXIobGlzdGVuZXIpOwogICAgICB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJzdWJzY3JpYmVBbnkiLCB2b2lkIDAsIHZvaWQgMCk7CiAgICAgIGFueU1hcC5nZXQodGhpcykuYWRkKGxpc3RlbmVyKTsKICAgICAgZW1pdE1ldGFFdmVudCh0aGlzLCBsaXN0ZW5lckFkZGVkLCB7IGxpc3RlbmVyIH0pOwogICAgICByZXR1cm4gdGhpcy5vZmZBbnkuYmluZCh0aGlzLCBsaXN0ZW5lcik7CiAgICB9CiAgICBhbnlFdmVudCgpIHsKICAgICAgcmV0dXJuIGl0ZXJhdG9yKHRoaXMpOwogICAgfQogICAgb2ZmQW55KGxpc3RlbmVyKSB7CiAgICAgIGFzc2VydExpc3RlbmVyKGxpc3RlbmVyKTsKICAgICAgdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgidW5zdWJzY3JpYmVBbnkiLCB2b2lkIDAsIHZvaWQgMCk7CiAgICAgIGVtaXRNZXRhRXZlbnQodGhpcywgbGlzdGVuZXJSZW1vdmVkLCB7IGxpc3RlbmVyIH0pOwogICAgICBhbnlNYXAuZ2V0KHRoaXMpLmRlbGV0ZShsaXN0ZW5lcik7CiAgICB9CiAgICBjbGVhckxpc3RlbmVycyhldmVudE5hbWVzKSB7CiAgICAgIGV2ZW50TmFtZXMgPSBBcnJheS5pc0FycmF5KGV2ZW50TmFtZXMpID8gZXZlbnROYW1lcyA6IFtldmVudE5hbWVzXTsKICAgICAgZm9yIChjb25zdCBldmVudE5hbWUgb2YgZXZlbnROYW1lcykgewogICAgICAgIHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImNsZWFyIiwgZXZlbnROYW1lLCB2b2lkIDApOwogICAgICAgIGlmICh0eXBlb2YgZXZlbnROYW1lID09PSAic3RyaW5nIiB8fCB0eXBlb2YgZXZlbnROYW1lID09PSAic3ltYm9sIiB8fCB0eXBlb2YgZXZlbnROYW1lID09PSAibnVtYmVyIikgewogICAgICAgICAgY29uc3Qgc2V0ID0gZ2V0TGlzdGVuZXJzKHRoaXMsIGV2ZW50TmFtZSk7CiAgICAgICAgICBpZiAoc2V0KSB7CiAgICAgICAgICAgIHNldC5jbGVhcigpOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgcHJvZHVjZXJzID0gZ2V0RXZlbnRQcm9kdWNlcnModGhpcywgZXZlbnROYW1lKTsKICAgICAgICAgIGlmIChwcm9kdWNlcnMpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBwcm9kdWNlciBvZiBwcm9kdWNlcnMpIHsKICAgICAgICAgICAgICBwcm9kdWNlci5maW5pc2goKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBwcm9kdWNlcnMuY2xlYXIoKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgYW55TWFwLmdldCh0aGlzKS5jbGVhcigpOwogICAgICAgICAgZm9yIChjb25zdCBbZXZlbnROYW1lMiwgbGlzdGVuZXJzXSBvZiBldmVudHNNYXAuZ2V0KHRoaXMpLmVudHJpZXMoKSkgewogICAgICAgICAgICBsaXN0ZW5lcnMuY2xlYXIoKTsKICAgICAgICAgICAgZXZlbnRzTWFwLmdldCh0aGlzKS5kZWxldGUoZXZlbnROYW1lMik7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGNvbnN0IFtldmVudE5hbWUyLCBwcm9kdWNlcnNdIG9mIHByb2R1Y2Vyc01hcC5nZXQodGhpcykuZW50cmllcygpKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvZHVjZXIgb2YgcHJvZHVjZXJzKSB7CiAgICAgICAgICAgICAgcHJvZHVjZXIuZmluaXNoKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcHJvZHVjZXJzLmNsZWFyKCk7CiAgICAgICAgICAgIHByb2R1Y2Vyc01hcC5nZXQodGhpcykuZGVsZXRlKGV2ZW50TmFtZTIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbGlzdGVuZXJDb3VudChldmVudE5hbWVzKSB7CiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mOwogICAgICBldmVudE5hbWVzID0gQXJyYXkuaXNBcnJheShldmVudE5hbWVzKSA/IGV2ZW50TmFtZXMgOiBbZXZlbnROYW1lc107CiAgICAgIGxldCBjb3VudCA9IDA7CiAgICAgIGZvciAoY29uc3QgZXZlbnROYW1lIG9mIGV2ZW50TmFtZXMpIHsKICAgICAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIGNvdW50ICs9IGFueU1hcC5nZXQodGhpcykuc2l6ZSArICgoX2IgPSAoX2EgPSBnZXRMaXN0ZW5lcnModGhpcywgZXZlbnROYW1lKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNpemUpICE9IG51bGwgPyBfYiA6IDApICsgKChfZCA9IChfYyA9IGdldEV2ZW50UHJvZHVjZXJzKHRoaXMsIGV2ZW50TmFtZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYy5zaXplKSAhPSBudWxsID8gX2QgOiAwKSArICgoX2YgPSAoX2UgPSBnZXRFdmVudFByb2R1Y2Vycyh0aGlzKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnNpemUpICE9IG51bGwgPyBfZiA6IDApOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGlmICh0eXBlb2YgZXZlbnROYW1lICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7CiAgICAgICAgfQogICAgICAgIGNvdW50ICs9IGFueU1hcC5nZXQodGhpcykuc2l6ZTsKICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGV2ZW50c01hcC5nZXQodGhpcykudmFsdWVzKCkpIHsKICAgICAgICAgIGNvdW50ICs9IHZhbHVlLnNpemU7CiAgICAgICAgfQogICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgcHJvZHVjZXJzTWFwLmdldCh0aGlzKS52YWx1ZXMoKSkgewogICAgICAgICAgY291bnQgKz0gdmFsdWUuc2l6ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGNvdW50OwogICAgfQogICAgYmluZE1ldGhvZHModGFyZ2V0LCBtZXRob2ROYW1lcykgewogICAgICBpZiAodHlwZW9mIHRhcmdldCAhPT0gIm9iamVjdCIgfHwgdGFyZ2V0ID09PSBudWxsKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYHRhcmdldGAgbXVzdCBiZSBhbiBvYmplY3QiKTsKICAgICAgfQogICAgICBtZXRob2ROYW1lcyA9IGRlZmF1bHRNZXRob2ROYW1lc09yQXNzZXJ0KG1ldGhvZE5hbWVzKTsKICAgICAgZm9yIChjb25zdCBtZXRob2ROYW1lIG9mIG1ldGhvZE5hbWVzKSB7CiAgICAgICAgaWYgKHRhcmdldFttZXRob2ROYW1lXSAhPT0gdm9pZCAwKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7bWV0aG9kTmFtZX1cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7CiAgICAgICAgfQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIG1ldGhvZE5hbWUsIHsKICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgdmFsdWU6IHRoaXNbbWV0aG9kTmFtZV0uYmluZCh0aGlzKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQogIGNvbnN0IGFsbEVtaXR0ZXJ5TWV0aG9kcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKEVtaXR0ZXJ5LnByb3RvdHlwZSkuZmlsdGVyKCh2KSA9PiB2ICE9PSAiY29uc3RydWN0b3IiKTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRW1pdHRlcnksICJsaXN0ZW5lckFkZGVkIiwgewogICAgdmFsdWU6IGxpc3RlbmVyQWRkZWQsCiAgICB3cml0YWJsZTogZmFsc2UsCiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiBmYWxzZQogIH0pOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbWl0dGVyeSwgImxpc3RlbmVyUmVtb3ZlZCIsIHsKICAgIHZhbHVlOiBsaXN0ZW5lclJlbW92ZWQsCiAgICB3cml0YWJsZTogZmFsc2UsCiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiBmYWxzZQogIH0pOwogIGZ1bmN0aW9uIGlzSW5zdGFuY2VPZkVtaXR0ZXJ5KGluc3RhbmNlKSB7CiAgICByZXR1cm4gaW5zdGFuY2Uub25BbnkgJiYgaW5zdGFuY2UuZW1pdDsKICB9CiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ29tbWFuZEZvcndhcmQoY29tbWFuZCwgY29udGV4dCkgewogICAgY29uc3QgeyBmdW5jdGlvbk5hbWUsIGFyZ3MgfSA9IGNvbW1hbmQ7CiAgICBpZiAoIWNvbnRleHQuaW5zdGFuY2UpIHsKICAgICAgdGhyb3cgImluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7CiAgICB9CiAgICBpZiAoIWZ1bmN0aW9uTmFtZSkgewogICAgICB0aHJvdyAibWlzc2luZyBmdW5jdGlvbiBuYW1lIHRvIGNhbGwiOwogICAgfQogICAgaWYgKCFjb250ZXh0Lmluc3RhbmNlW2Z1bmN0aW9uTmFtZV0pIHsKICAgICAgdGhyb3cgYHVuZGVmaW5lZCBmdW5jdGlvbiBbJHtmdW5jdGlvbk5hbWV9XSBpbiBjbGFzcyAke2NvbnRleHQuaW5zdGFuY2UuY29uc3RydWN0b3Iud29ya2VySWR9YDsKICAgIH0KICAgIHBvc3RDb21tYW5kKGNvbW1hbmQsIGF3YWl0IGNvbnRleHQuaW5zdGFuY2VbZnVuY3Rpb25OYW1lXSguLi5hcmdzICE9IG51bGwgPyBhcmdzIDogW10pKTsKICB9CiAgY29uc3QgcmVnaXN0ZXJlZFdvcmtlcnMgPSBjcmVhdGVHbG9iYWxUaGlzVmFyaWFibGUoInJlZ2lzdGVyZWRXb3JrZXJzIiwge30pOwogIGZ1bmN0aW9uIHJlZ2lzdGVyV29ya2VyKGlkLCByZWdpc3RyYWJsZSkgewogICAgcmVnaXN0cmFibGUud29ya2VySWQgPSBpZDsKICAgIGlmIChpc1dvcmtlcigpKSB7CiAgICAgIHJlZ2lzdGVyZWRXb3JrZXJzW3JlZ2lzdHJhYmxlLndvcmtlcklkXSA9IHJlZ2lzdHJhYmxlOwogICAgfQogIH0KICBmdW5jdGlvbiBoYW5kbGVDb21tYW5kSW5pdChjb21tYW5kLCBjb250ZXh0KSB7CiAgICBpZiAoIWNvbW1hbmQuYXJncykgewogICAgICB0aHJvdyAiTWlzc2luZyBjbGFzc05hbWUgd2hpbGUgaW5pdGlhbGl6aW5nIHdvcmtlciI7CiAgICB9CiAgICBjb25zdCBbY2xhc3NOYW1lLCBnbG9iYWxzVmFsdWVzXSA9IGNvbW1hbmQuYXJnczsKICAgIGNvbnN0IGNvbnN0cnVjdG9yID0gcmVnaXN0ZXJlZFdvcmtlcnNbY2xhc3NOYW1lXTsKICAgIGlmIChjb25zdHJ1Y3RvcikgewogICAgICBjb250ZXh0Lmluc3RhbmNlID0gbmV3IGNvbnN0cnVjdG9yKGNvbW1hbmQuYXJncy5zbGljZSgxKSk7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBgdW5rbm93biB3b3JrZXIgY2xhc3MgJHtjbGFzc05hbWV9YDsKICAgIH0KICAgIGNvcHkoZ2xvYmFsc1ZhbHVlcywgZ2xvYmFscyk7CiAgICBpZiAoaXNJbnN0YW5jZU9mRW1pdHRlcnkoY29udGV4dC5pbnN0YW5jZSkpIHsKICAgICAgY29udGV4dC5pbnN0YW5jZS5vbkFueSgobmFtZSwgZGF0YSkgPT4gewogICAgICAgIHBvc3RDb21tYW5kKAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiBDb21tYW5kVHlwZS5FVkVOVAogICAgICAgICAgfSwKICAgICAgICAgIHsgbmFtZSwgZGF0YSB9CiAgICAgICAgKTsKICAgICAgfSk7CiAgICB9CiAgICBwb3N0Q29tbWFuZChjb21tYW5kLCB0eXBlb2YgY29udGV4dC5pbnN0YW5jZSAhPT0gdm9pZCAwKTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ29tbWFuZFRlcm1pbmF0ZShjb21tYW5kLCBjb250ZXh0KSB7CiAgICBjb25zdCB7IGFyZ3MgfSA9IGNvbW1hbmQ7CiAgICBpZiAoIWNvbnRleHQuaW5zdGFuY2UpIHsKICAgICAgdGhyb3cgImluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7CiAgICB9CiAgICBsZXQgcmVzdWx0OwogICAgaWYgKGNvbnRleHQuaW5zdGFuY2UudGVybWluYXRlKSB7CiAgICAgIHJlc3VsdCA9IGF3YWl0IGNvbnRleHQuaW5zdGFuY2UudGVybWluYXRlKC4uLmFyZ3MgIT0gbnVsbCA/IGFyZ3MgOiBbXSk7CiAgICB9CiAgICBwb3N0Q29tbWFuZChjb21tYW5kLCByZXN1bHQpOwogIH0KICBmdW5jdGlvbiBoYW5kbGVDb21tYW5kR2xvYmFsc1N5bmMoY29tbWFuZCkgewogICAgaWYgKCFjb21tYW5kLmFyZ3MpIHsKICAgICAgdGhyb3cgIk1pc3NpbmcgZ2xvYmFscyB3aGlsZSBzeW5jaW5nIjsKICAgIH0KICAgIGNvcHkoY29tbWFuZC5hcmdzWzBdLCBnbG9iYWxzKTsKICAgIHBvc3RDb21tYW5kKGNvbW1hbmQsIHt9KTsKICB9CiAgZnVuY3Rpb24gaW5pdFdvcmtlcigpIHsKICAgIGNvbnN0IGNvbnRleHQgPSB7fTsKICAgIG9ubWVzc2FnZSA9IGFzeW5jIChldmVudCkgPT4gewogICAgICBjb25zdCBjb21tYW5kID0gZXZlbnQuZGF0YTsKICAgICAgc3dpdGNoIChjb21tYW5kLnR5cGUpIHsKICAgICAgICBjYXNlIENvbW1hbmRUeXBlLklOSVQ6CiAgICAgICAgICBoYW5kbGVDb21tYW5kSW5pdChjb21tYW5kLCBjb250ZXh0KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgQ29tbWFuZFR5cGUuRk9SV0FSRDoKICAgICAgICAgIGhhbmRsZUNvbW1hbmRGb3J3YXJkKGNvbW1hbmQsIGNvbnRleHQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBDb21tYW5kVHlwZS5URVJNSU5BVEU6CiAgICAgICAgICBoYW5kbGVDb21tYW5kVGVybWluYXRlKGNvbW1hbmQsIGNvbnRleHQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBDb21tYW5kVHlwZS5HTE9CQUxTX1NZTkM6CiAgICAgICAgICBoYW5kbGVDb21tYW5kR2xvYmFsc1N5bmMoY29tbWFuZCk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKICB9CiAgaWYgKGlzV29ya2VyKCkpIHsKICAgIGluaXRXb3JrZXIoKTsKICB9CgogIGxldCBsJDEgPSBjbGFzcyBsIHsKICB9OwogIGwkMS51cGRhdGVzID0gewogICAgdHJhbnNmb3JtZXJfbmV3OiAiTmV3IHRyYW5zZm9ybWVyIiwKICAgIHRyYW5zZm9ybWVyX251bGw6ICJOdWxsIHRyYW5zZm9ybWVyIgogIH07CiAgbCQxLmVycm9ycyA9IHsKICAgIHRyYW5zZm9ybWVyX25vbmU6ICJObyB0cmFuc2Zvcm1lcnMgcHJvdmlkZWQiLAogICAgdHJhbnNmb3JtZXJfc3RhcnQ6ICJDYW5ub3Qgc3RhcnQgdHJhbnNmb3JtZXIiLAogICAgdHJhbnNmb3JtZXJfdHJhbnNmb3JtOiAiQ2Fubm90IHRyYW5zZm9ybSBmcmFtZSIsCiAgICB0cmFuc2Zvcm1lcl9mbHVzaDogIkNhbm5vdCBmbHVzaCB0cmFuc2Zvcm1lciIsCiAgICByZWFkYWJsZV9udWxsOiAiUmVhZGFibGUgaXMgbnVsbCIsCiAgICB3cml0YWJsZV9udWxsOiAiV3JpdGFibGUgaXMgbnVsbCIKICB9OwogIGZ1bmN0aW9uIGokMih0KSB7CiAgICByZXR1cm4gdCAmJiB0Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsICJkZWZhdWx0IikgPyB0LmRlZmF1bHQgOiB0OwogIH0KICBjb25zdCBmJDIgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSwgVCQyID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIGckMiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBDJDIgPSBTeW1ib2woImFueVByb2R1Y2VyIiksIFUkMiA9IFByb21pc2UucmVzb2x2ZSgpLCBTJDEgPSBTeW1ib2woImxpc3RlbmVyQWRkZWQiKSwgUiQyID0gU3ltYm9sKCJsaXN0ZW5lclJlbW92ZWQiKTsKICBsZXQgQSQyID0gITE7CiAgZnVuY3Rpb24gcCQyKHQpIHsKICAgIGlmICh0eXBlb2YgdCAhPSAic3RyaW5nIiAmJiB0eXBlb2YgdCAhPSAic3ltYm9sIikKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiZXZlbnROYW1lIG11c3QgYmUgYSBzdHJpbmcgb3IgYSBzeW1ib2wiKTsKICB9CiAgZnVuY3Rpb24gYiQxKHQpIHsKICAgIGlmICh0eXBlb2YgdCAhPSAiZnVuY3Rpb24iKQogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24iKTsKICB9CiAgZnVuY3Rpb24gbSQyKHQsIGUpIHsKICAgIGNvbnN0IHIgPSBUJDIuZ2V0KHQpOwogICAgcmV0dXJuIHIuaGFzKGUpIHx8IHIuc2V0KGUsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpLCByLmdldChlKTsKICB9CiAgZnVuY3Rpb24gXyQyKHQsIGUpIHsKICAgIGNvbnN0IHIgPSB0eXBlb2YgZSA9PSAic3RyaW5nIiB8fCB0eXBlb2YgZSA9PSAic3ltYm9sIiA/IGUgOiBDJDIsIHMgPSBnJDIuZ2V0KHQpOwogICAgcmV0dXJuIHMuaGFzKHIpIHx8IHMuc2V0KHIsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpLCBzLmdldChyKTsKICB9CiAgZnVuY3Rpb24gQiQyKHQsIGUsIHIpIHsKICAgIGNvbnN0IHMgPSBnJDIuZ2V0KHQpOwogICAgaWYgKHMuaGFzKGUpKQogICAgICBmb3IgKGNvbnN0IGkgb2Ygcy5nZXQoZSkpCiAgICAgICAgaS5lbnF1ZXVlKHIpOwogICAgaWYgKHMuaGFzKEMkMikpIHsKICAgICAgY29uc3QgaSA9IFByb21pc2UuYWxsKFtlLCByXSk7CiAgICAgIGZvciAoY29uc3QgbiBvZiBzLmdldChDJDIpKQogICAgICAgIG4uZW5xdWV1ZShpKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gRCQyKHQsIGUpIHsKICAgIGUgPSBBcnJheS5pc0FycmF5KGUpID8gZSA6IFtlXTsKICAgIGxldCByID0gITEsIHMgPSAoKSA9PiB7CiAgICB9LCBpID0gW107CiAgICBjb25zdCBuID0gewogICAgICBlbnF1ZXVlKG8pIHsKICAgICAgICBpLnB1c2gobyksIHMoKTsKICAgICAgfSwKICAgICAgZmluaXNoKCkgewogICAgICAgIHIgPSAhMCwgcygpOwogICAgICB9CiAgICB9OwogICAgZm9yIChjb25zdCBvIG9mIGUpCiAgICAgIF8kMih0LCBvKS5hZGQobik7CiAgICByZXR1cm4gewogICAgICBhc3luYyBuZXh0KCkgewogICAgICAgIHJldHVybiBpID8gaS5sZW5ndGggPT09IDAgPyByID8gKGkgPSB2b2lkIDAsIHRoaXMubmV4dCgpKSA6IChhd2FpdCBuZXcgUHJvbWlzZSgobykgPT4gewogICAgICAgICAgcyA9IG87CiAgICAgICAgfSksIHRoaXMubmV4dCgpKSA6IHsKICAgICAgICAgIGRvbmU6ICExLAogICAgICAgICAgdmFsdWU6IGF3YWl0IGkuc2hpZnQoKQogICAgICAgIH0gOiB7IGRvbmU6ICEwIH07CiAgICAgIH0sCiAgICAgIGFzeW5jIHJldHVybihvKSB7CiAgICAgICAgaSA9IHZvaWQgMDsKICAgICAgICBmb3IgKGNvbnN0IGEgb2YgZSkKICAgICAgICAgIF8kMih0LCBhKS5kZWxldGUobik7CiAgICAgICAgcmV0dXJuIHMoKSwgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyB7IGRvbmU6ICEwLCB2YWx1ZTogYXdhaXQgbyB9IDogeyBkb25lOiAhMCB9OwogICAgICB9LAogICAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICB9OwogIH0KICBmdW5jdGlvbiAkJDIodCkgewogICAgaWYgKHQgPT09IHZvaWQgMCkKICAgICAgcmV0dXJuIEckMjsKICAgIGlmICghQXJyYXkuaXNBcnJheSh0KSkKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYG1ldGhvZE5hbWVzYCBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MiKTsKICAgIGZvciAoY29uc3QgZSBvZiB0KQogICAgICBpZiAoIUckMi5pbmNsdWRlcyhlKSkKICAgICAgICB0aHJvdyB0eXBlb2YgZSAhPSAic3RyaW5nIiA/IG5ldyBUeXBlRXJyb3IoImBtZXRob2ROYW1lc2AgZWxlbWVudCBtdXN0IGJlIGEgc3RyaW5nIikgOiBuZXcgRXJyb3IoYCR7ZX0gaXMgbm90IEVtaXR0ZXJ5IG1ldGhvZGApOwogICAgcmV0dXJuIHQ7CiAgfQogIGNvbnN0IE0kMiA9ICh0KSA9PiB0ID09PSBTJDEgfHwgdCA9PT0gUiQyOwogIGxldCBkJDIgPSBjbGFzcyBkIHsKICAgIHN0YXRpYyBtaXhpbihlLCByKSB7CiAgICAgIHJldHVybiByID0gJCQyKHIpLCAocykgPT4gewogICAgICAgIGlmICh0eXBlb2YgcyAhPSAiZnVuY3Rpb24iKQogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYHRhcmdldGAgbXVzdCBiZSBmdW5jdGlvbiIpOwogICAgICAgIGZvciAoY29uc3QgbyBvZiByKQogICAgICAgICAgaWYgKHMucHJvdG90eXBlW29dICE9PSB2b2lkIDApCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHByb3BlcnR5IFxgJHtvfVxgIGFscmVhZHkgZXhpc3RzIG9uIFxgdGFyZ2V0XGBgKTsKICAgICAgICBmdW5jdGlvbiBpKCkgewogICAgICAgICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBlLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICExLAogICAgICAgICAgICB2YWx1ZTogbmV3IGQoKQogICAgICAgICAgfSksIHRoaXNbZV07CiAgICAgICAgfQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSwgZSwgewogICAgICAgICAgZW51bWVyYWJsZTogITEsCiAgICAgICAgICBnZXQ6IGkKICAgICAgICB9KTsKICAgICAgICBjb25zdCBuID0gKG8pID0+IGZ1bmN0aW9uKC4uLmEpIHsKICAgICAgICAgIHJldHVybiB0aGlzW2VdW29dKC4uLmEpOwogICAgICAgIH07CiAgICAgICAgZm9yIChjb25zdCBvIG9mIHIpCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIG8sIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITEsCiAgICAgICAgICAgIHZhbHVlOiBuKG8pCiAgICAgICAgICB9KTsKICAgICAgICByZXR1cm4gczsKICAgICAgfTsKICAgIH0KICAgIHN0YXRpYyBnZXQgaXNEZWJ1Z0VuYWJsZWQoKSB7CiAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPSAib2JqZWN0IikKICAgICAgICByZXR1cm4gQSQyOwogICAgICBjb25zdCB7IGVudjogZSB9ID0gcHJvY2VzcyB8fCB7IGVudjoge30gfTsKICAgICAgcmV0dXJuIGUuREVCVUcgPT09ICJlbWl0dGVyeSIgfHwgZS5ERUJVRyA9PT0gIioiIHx8IEEkMjsKICAgIH0KICAgIHN0YXRpYyBzZXQgaXNEZWJ1Z0VuYWJsZWQoZSkgewogICAgICBBJDIgPSBlOwogICAgfQogICAgY29uc3RydWN0b3IoZSA9IHt9KSB7CiAgICAgIGYkMi5zZXQodGhpcywgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSksIFQkMi5zZXQodGhpcywgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSksIGckMi5zZXQodGhpcywgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSksIHRoaXMuZGVidWcgPSBlLmRlYnVnIHx8IHt9LCB0aGlzLmRlYnVnLmVuYWJsZWQgPT09IHZvaWQgMCAmJiAodGhpcy5kZWJ1Zy5lbmFibGVkID0gITEpLCB0aGlzLmRlYnVnLmxvZ2dlciB8fCAodGhpcy5kZWJ1Zy5sb2dnZXIgPSAociwgcywgaSwgbikgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBuID0gSlNPTi5zdHJpbmdpZnkobik7CiAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICBuID0gYE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcga2V5cyBmYWlsZWQgdG8gc3RyaW5naWZ5OiAke09iamVjdC5rZXlzKG4pLmpvaW4oIiwiKX1gOwogICAgICAgIH0KICAgICAgICB0eXBlb2YgaSA9PSAic3ltYm9sIiAmJiAoaSA9IGkudG9TdHJpbmcoKSk7CiAgICAgICAgY29uc3QgbyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLCBhID0gYCR7by5nZXRIb3VycygpfToke28uZ2V0TWludXRlcygpfToke28uZ2V0U2Vjb25kcygpfS4ke28uZ2V0TWlsbGlzZWNvbmRzKCl9YDsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7YX1dW2VtaXR0ZXJ5OiR7cn1dWyR7c31dIEV2ZW50IE5hbWU6ICR7aX0KCWRhdGE6ICR7bn1gKTsKICAgICAgfSk7CiAgICB9CiAgICBsb2dJZkRlYnVnRW5hYmxlZChlLCByLCBzKSB7CiAgICAgIChkLmlzRGVidWdFbmFibGVkIHx8IHRoaXMuZGVidWcuZW5hYmxlZCkgJiYgdGhpcy5kZWJ1Zy5sb2dnZXIoZSwgdGhpcy5kZWJ1Zy5uYW1lLCByLCBzKTsKICAgIH0KICAgIG9uKGUsIHIpIHsKICAgICAgYiQxKHIpLCBlID0gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV07CiAgICAgIGZvciAoY29uc3QgcyBvZiBlKQogICAgICAgIHAkMihzKSwgbSQyKHRoaXMsIHMpLmFkZChyKSwgdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlIiwgcywgdm9pZCAwKSwgTSQyKHMpIHx8IHRoaXMuZW1pdChTJDEsIHsgZXZlbnROYW1lOiBzLCBsaXN0ZW5lcjogciB9KTsKICAgICAgcmV0dXJuIHRoaXMub2ZmLmJpbmQodGhpcywgZSwgcik7CiAgICB9CiAgICBvZmYoZSwgcikgewogICAgICBiJDEociksIGUgPSBBcnJheS5pc0FycmF5KGUpID8gZSA6IFtlXTsKICAgICAgZm9yIChjb25zdCBzIG9mIGUpCiAgICAgICAgcCQyKHMpLCBtJDIodGhpcywgcykuZGVsZXRlKHIpLCB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZSIsIHMsIHZvaWQgMCksIE0kMihzKSB8fCB0aGlzLmVtaXQoUiQyLCB7IGV2ZW50TmFtZTogcywgbGlzdGVuZXI6IHIgfSk7CiAgICB9CiAgICBvbmNlKGUpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyKSA9PiB7CiAgICAgICAgY29uc3QgcyA9IHRoaXMub24oZSwgKGkpID0+IHsKICAgICAgICAgIHMoKSwgcihpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICBldmVudHMoZSkgewogICAgICBlID0gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV07CiAgICAgIGZvciAoY29uc3QgciBvZiBlKQogICAgICAgIHAkMihyKTsKICAgICAgcmV0dXJuIEQkMih0aGlzLCBlKTsKICAgIH0KICAgIGFzeW5jIGVtaXQoZSwgcikgewogICAgICBwJDIoZSksIHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImVtaXQiLCBlLCByKSwgQiQyKHRoaXMsIGUsIHIpOwogICAgICBjb25zdCBzID0gbSQyKHRoaXMsIGUpLCBpID0gZiQyLmdldCh0aGlzKSwgbiA9IFsuLi5zXSwgbyA9IE0kMihlKSA/IFtdIDogWy4uLmldOwogICAgICBhd2FpdCBVJDIsIGF3YWl0IFByb21pc2UuYWxsKFsKICAgICAgICAuLi5uLm1hcChhc3luYyAoYSkgPT4gewogICAgICAgICAgaWYgKHMuaGFzKGEpKQogICAgICAgICAgICByZXR1cm4gYShyKTsKICAgICAgICB9KSwKICAgICAgICAuLi5vLm1hcChhc3luYyAoYSkgPT4gewogICAgICAgICAgaWYgKGkuaGFzKGEpKQogICAgICAgICAgICByZXR1cm4gYShlLCByKTsKICAgICAgICB9KQogICAgICBdKTsKICAgIH0KICAgIGFzeW5jIGVtaXRTZXJpYWwoZSwgcikgewogICAgICBwJDIoZSksIHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImVtaXRTZXJpYWwiLCBlLCByKTsKICAgICAgY29uc3QgcyA9IG0kMih0aGlzLCBlKSwgaSA9IGYkMi5nZXQodGhpcyksIG4gPSBbLi4uc10sIG8gPSBbLi4uaV07CiAgICAgIGF3YWl0IFUkMjsKICAgICAgZm9yIChjb25zdCBhIG9mIG4pCiAgICAgICAgcy5oYXMoYSkgJiYgYXdhaXQgYShyKTsKICAgICAgZm9yIChjb25zdCBhIG9mIG8pCiAgICAgICAgaS5oYXMoYSkgJiYgYXdhaXQgYShlLCByKTsKICAgIH0KICAgIG9uQW55KGUpIHsKICAgICAgcmV0dXJuIGIkMShlKSwgdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlQW55Iiwgdm9pZCAwLCB2b2lkIDApLCBmJDIuZ2V0KHRoaXMpLmFkZChlKSwgdGhpcy5lbWl0KFMkMSwgeyBsaXN0ZW5lcjogZSB9KSwgdGhpcy5vZmZBbnkuYmluZCh0aGlzLCBlKTsKICAgIH0KICAgIGFueUV2ZW50KCkgewogICAgICByZXR1cm4gRCQyKHRoaXMpOwogICAgfQogICAgb2ZmQW55KGUpIHsKICAgICAgYiQxKGUpLCB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZUFueSIsIHZvaWQgMCwgdm9pZCAwKSwgdGhpcy5lbWl0KFIkMiwgeyBsaXN0ZW5lcjogZSB9KSwgZiQyLmdldCh0aGlzKS5kZWxldGUoZSk7CiAgICB9CiAgICBjbGVhckxpc3RlbmVycyhlKSB7CiAgICAgIGUgPSBBcnJheS5pc0FycmF5KGUpID8gZSA6IFtlXTsKICAgICAgZm9yIChjb25zdCByIG9mIGUpCiAgICAgICAgaWYgKHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImNsZWFyIiwgciwgdm9pZCAwKSwgdHlwZW9mIHIgPT0gInN0cmluZyIgfHwgdHlwZW9mIHIgPT0gInN5bWJvbCIpIHsKICAgICAgICAgIG0kMih0aGlzLCByKS5jbGVhcigpOwogICAgICAgICAgY29uc3QgcyA9IF8kMih0aGlzLCByKTsKICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBzKQogICAgICAgICAgICBpLmZpbmlzaCgpOwogICAgICAgICAgcy5jbGVhcigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmJDIuZ2V0KHRoaXMpLmNsZWFyKCk7CiAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgVCQyLmdldCh0aGlzKS52YWx1ZXMoKSkKICAgICAgICAgICAgcy5jbGVhcigpOwogICAgICAgICAgZm9yIChjb25zdCBzIG9mIGckMi5nZXQodGhpcykudmFsdWVzKCkpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHMpCiAgICAgICAgICAgICAgaS5maW5pc2goKTsKICAgICAgICAgICAgcy5jbGVhcigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGxpc3RlbmVyQ291bnQoZSkgewogICAgICBlID0gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV07CiAgICAgIGxldCByID0gMDsKICAgICAgZm9yIChjb25zdCBzIG9mIGUpIHsKICAgICAgICBpZiAodHlwZW9mIHMgPT0gInN0cmluZyIpIHsKICAgICAgICAgIHIgKz0gZiQyLmdldCh0aGlzKS5zaXplICsgbSQyKHRoaXMsIHMpLnNpemUgKyBfJDIodGhpcywgcykuc2l6ZSArIF8kMih0aGlzKS5zaXplOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIHR5cGVvZiBzIDwgInUiICYmIHAkMihzKSwgciArPSBmJDIuZ2V0KHRoaXMpLnNpemU7CiAgICAgICAgZm9yIChjb25zdCBpIG9mIFQkMi5nZXQodGhpcykudmFsdWVzKCkpCiAgICAgICAgICByICs9IGkuc2l6ZTsKICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZyQyLmdldCh0aGlzKS52YWx1ZXMoKSkKICAgICAgICAgIHIgKz0gaS5zaXplOwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfQogICAgYmluZE1ldGhvZHMoZSwgcikgewogICAgICBpZiAodHlwZW9mIGUgIT0gIm9iamVjdCIgfHwgZSA9PT0gbnVsbCkKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgdGFyZ2V0YCBtdXN0IGJlIGFuIG9iamVjdCIpOwogICAgICByID0gJCQyKHIpOwogICAgICBmb3IgKGNvbnN0IHMgb2YgcikgewogICAgICAgIGlmIChlW3NdICE9PSB2b2lkIDApCiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7c31cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHMsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICExLAogICAgICAgICAgdmFsdWU6IHRoaXNbc10uYmluZCh0aGlzKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfTsKICBjb25zdCBHJDIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkJDIucHJvdG90eXBlKS5maWx0ZXIoKHQpID0+IHQgIT09ICJjb25zdHJ1Y3RvciIpOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkJDIsICJsaXN0ZW5lckFkZGVkIiwgewogICAgdmFsdWU6IFMkMSwKICAgIHdyaXRhYmxlOiAhMSwKICAgIGVudW1lcmFibGU6ICEwLAogICAgY29uZmlndXJhYmxlOiAhMQogIH0pOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkJDIsICJsaXN0ZW5lclJlbW92ZWQiLCB7CiAgICB2YWx1ZTogUiQyLAogICAgd3JpdGFibGU6ICExLAogICAgZW51bWVyYWJsZTogITAsCiAgICBjb25maWd1cmFibGU6ICExCiAgfSk7CiAgdmFyIFkkMiA9IGQkMjsKICBjb25zdCB2JDIgPSAvKiBAX19QVVJFX18gKi8gaiQyKFkkMik7CiAgZnVuY3Rpb24gcSQyKHQpIHsKICAgIHJldHVybiB0eXBlb2YgdCA9PSAib2JqZWN0IiAmJiB0ICE9PSBudWxsICYmICJtZXNzYWdlIiBpbiB0ICYmIHR5cGVvZiB0Lm1lc3NhZ2UgPT0gInN0cmluZyI7CiAgfQogIGZ1bmN0aW9uIEokMSh0KSB7CiAgICBpZiAocSQyKHQpKQogICAgICByZXR1cm4gdDsKICAgIHRyeSB7CiAgICAgIHJldHVybiBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkodCkpOwogICAgfSBjYXRjaCB7CiAgICAgIHJldHVybiBuZXcgRXJyb3IoU3RyaW5nKHQpKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gSSQyKHQpIHsKICAgIHJldHVybiBKJDEodCkubWVzc2FnZTsKICB9CiAgdmFyIEskMSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSwgWCQxID0gKHQsIGUsIHIpID0+IGUgaW4gdCA/IEskMSh0LCBlLCB7IGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAsIHZhbHVlOiByIH0pIDogdFtlXSA9IHIsIFokMSA9ICh0LCBlLCByKSA9PiAoWCQxKHQsIHR5cGVvZiBlICE9ICJzeW1ib2wiID8gZSArICIiIDogZSwgciksIHIpOwogIGNvbnN0IGVlJDEgPSAiaGxnLnRva2JveC5jb20vcHJvZC9sb2dnaW5nL3ZjcF93ZWJydGMiLCByZSQxID0gImh0dHBzOi8vIiwgdGUkMSA9IDFlNDsKICBsZXQgdyQyOwogIGNvbnN0IHNlJDEgPSBuZXcgVWludDhBcnJheSgxNik7CiAgZnVuY3Rpb24gaWUkMSgpIHsKICAgIGlmICghdyQyICYmICh3JDIgPSB0eXBlb2YgY3J5cHRvIDwgInUiICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byksICF3JDIpKQogICAgICB0aHJvdyBuZXcgRXJyb3IoImNyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkIik7CiAgICByZXR1cm4gdyQyKHNlJDEpOwogIH0KICBjb25zdCBjJDEgPSBbXTsKICBmb3IgKGxldCB0ID0gMDsgdCA8IDI1NjsgKyt0KQogICAgYyQxLnB1c2goKHQgKyAyNTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7CiAgZnVuY3Rpb24gbmUkMSh0LCBlID0gMCkgewogICAgcmV0dXJuIChjJDFbdFtlICsgMF1dICsgYyQxW3RbZSArIDFdXSArIGMkMVt0W2UgKyAyXV0gKyBjJDFbdFtlICsgM11dICsgIi0iICsgYyQxW3RbZSArIDRdXSArIGMkMVt0W2UgKyA1XV0gKyAiLSIgKyBjJDFbdFtlICsgNl1dICsgYyQxW3RbZSArIDddXSArICItIiArIGMkMVt0W2UgKyA4XV0gKyBjJDFbdFtlICsgOV1dICsgIi0iICsgYyQxW3RbZSArIDEwXV0gKyBjJDFbdFtlICsgMTFdXSArIGMkMVt0W2UgKyAxMl1dICsgYyQxW3RbZSArIDEzXV0gKyBjJDFbdFtlICsgMTRdXSArIGMkMVt0W2UgKyAxNV1dKS50b0xvd2VyQ2FzZSgpOwogIH0KICBjb25zdCBvZSQxID0gdHlwZW9mIGNyeXB0byA8ICJ1IiAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byksIEgkMSA9IHsKICAgIHJhbmRvbVVVSUQ6IG9lJDEKICB9OwogIGZ1bmN0aW9uIGFlJDEodCwgZSwgcikgewogICAgaWYgKEgkMS5yYW5kb21VVUlEICYmICFlICYmICF0KQogICAgICByZXR1cm4gSCQxLnJhbmRvbVVVSUQoKTsKICAgIHQgPSB0IHx8IHt9OwogICAgY29uc3QgcyA9IHQucmFuZG9tIHx8ICh0LnJuZyB8fCBpZSQxKSgpOwogICAgaWYgKHNbNl0gPSBzWzZdICYgMTUgfCA2NCwgc1s4XSA9IHNbOF0gJiA2MyB8IDEyOCwgZSkgewogICAgICByID0gciB8fCAwOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpCiAgICAgICAgZVtyICsgaV0gPSBzW2ldOwogICAgICByZXR1cm4gZTsKICAgIH0KICAgIHJldHVybiBuZSQxKHMpOwogIH0KICBmdW5jdGlvbiBGJDIodCwgZSkgewogICAgZ2xvYmFsVGhpcy52b25hZ2UgfHwgKGdsb2JhbFRoaXMudm9uYWdlID0ge30pLCBnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyIHx8IChnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyID0ge30pOwogICAgbGV0IHIgPSBnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyOwogICAgcmV0dXJuIHJbdF0gfHwgKHJbdF0gPSBlKSwgclt0XTsKICB9CiAgY29uc3QgaCQxID0gRiQyKAogICAgImdsb2JhbHMiLAogICAge30KICApOwogIHZhciB1JDIgPSAvKiBAX19QVVJFX18gKi8gKCh0KSA9PiAodC5JTklUID0gIklOSVQiLCB0LkZPUldBUkQgPSAiRk9SV0FSRCIsIHQuVEVSTUlOQVRFID0gIlRFUk1JTkFURSIsIHQuR0xPQkFMU19TWU5DID0gIkdMT0JBTFNfU1lOQyIsIHQpKSh1JDIgfHwge30pOwogIGZ1bmN0aW9uIHokMih0KSB7CiAgICByZXR1cm4gW0ltYWdlQml0bWFwLCBSZWFkYWJsZVN0cmVhbSwgV3JpdGFibGVTdHJlYW1dLnNvbWUoKHIpID0+IHQgaW5zdGFuY2VvZiByKTsKICB9CiAgbGV0IGNlJDEgPSAwOwogIGZ1bmN0aW9uIGxlJDEodCwgZSwgciwgcywgaSkgewogICAgY29uc3QgbiA9IGNlJDErKzsKICAgIHJldHVybiB0LnBvc3RNZXNzYWdlKAogICAgICB7CiAgICAgICAgaWQ6IG4sCiAgICAgICAgdHlwZTogZSwKICAgICAgICBmdW5jdGlvbk5hbWU6IHIsCiAgICAgICAgYXJnczogcwogICAgICB9LAogICAgICBzLmZpbHRlcigoYSkgPT4geiQyKGEpKQogICAgKSwgbmV3IFByb21pc2UoKGEpID0+IHsKICAgICAgaSA9PSBudWxsIHx8IGkuc2V0KG4sIGEpOwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIHkkMih0LCBlKSB7CiAgICBjb25zdCB7IGlkOiByLCB0eXBlOiBzIH0gPSB0LCBpID0gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV07CiAgICBwb3N0TWVzc2FnZSgKICAgICAgewogICAgICAgIGlkOiByLAogICAgICAgIHR5cGU6IHMsCiAgICAgICAgcmVzdWx0OiBlCiAgICAgIH0sCiAgICAgIGkuZmlsdGVyKChuKSA9PiB6JDIobikpCiAgICApOwogIH0KICBjb25zdCBRJDEgPSBGJDIoIndvcmtlcml6ZWQiLCB7fSk7CiAgZnVuY3Rpb24gViQyKCkgewogICAgcmV0dXJuIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSA8ICJ1IiAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7CiAgfQogIGFzeW5jIGZ1bmN0aW9uIGZlJDEoKSB7CiAgICBpZiAoViQyKCkpCiAgICAgIHkkMih7IHR5cGU6IHUkMi5HTE9CQUxTX1NZTkMgfSwgaCQxKTsKICAgIGVsc2UgewogICAgICBjb25zdCB0ID0gW107CiAgICAgIGZvciAoY29uc3QgZSBpbiBRJDEpIHsKICAgICAgICBjb25zdCB7IHdvcmtlcjogciwgcmVzb2x2ZXJzOiBzIH0gPSBRJDFbZV0ud29ya2VyQ29udGV4dDsKICAgICAgICByICYmIHQucHVzaCgKICAgICAgICAgIGxlJDEoCiAgICAgICAgICAgIHIsCiAgICAgICAgICAgIHUkMi5HTE9CQUxTX1NZTkMsCiAgICAgICAgICAgICIiLAogICAgICAgICAgICBbaCQxXSwKICAgICAgICAgICAgcwogICAgICAgICAgKQogICAgICAgICk7CiAgICAgIH0KICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodCk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIFAkMih0LCBlKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkKICAgICAgZS5zcGxpY2UoMCwgZS5sZW5ndGgpOwogICAgZWxzZSBpZiAodHlwZW9mIGUgPT0gIm9iamVjdCIpCiAgICAgIGZvciAoY29uc3QgciBpbiBlKQogICAgICAgIGRlbGV0ZSBlW3JdOwogICAgZm9yIChjb25zdCByIGluIHQpCiAgICAgIEFycmF5LmlzQXJyYXkodFtyXSkgPyAoZVtyXSA9IFtdLCBQJDIodFtyXSwgZVtyXSkpIDogdHlwZW9mIHRbcl0gPT0gIm9iamVjdCIgPyAoZVtyXSA9IHt9LCBQJDIodFtyXSwgZVtyXSkpIDogZVtyXSA9IHRbcl07CiAgfQogIGFzeW5jIGZ1bmN0aW9uIGhlJDEodCwgZSkgewogICAgY29uc3QgeyBmdW5jdGlvbk5hbWU6IHIsIGFyZ3M6IHMgfSA9IHQ7CiAgICBpZiAoIWUuaW5zdGFuY2UpCiAgICAgIHRocm93ICJpbnN0YW5jZSBub3QgaW5pdGlhbGl6ZWQiOwogICAgaWYgKCFyKQogICAgICB0aHJvdyAibWlzc2luZyBmdW5jdGlvbiBuYW1lIHRvIGNhbGwiOwogICAgaWYgKCFlLmluc3RhbmNlW3JdKQogICAgICB0aHJvdyBgdW5kZWZpbmVkIGZ1bmN0aW9uIFske3J9XSBpbiBjbGFzcyAke2UuaW5zdGFuY2UuY29uc3RydWN0b3Iud29ya2VySWR9YDsKICAgIHkkMih0LCBhd2FpdCBlLmluc3RhbmNlW3JdKC4uLnMgPz8gW10pKTsKICB9CiAgY29uc3QgdWUkMSA9IEYkMigicmVnaXN0ZXJlZFdvcmtlcnMiLCB7fSk7CiAgZnVuY3Rpb24gZGUkMSh0LCBlKSB7CiAgICBpZiAoIXQuYXJncykKICAgICAgdGhyb3cgIk1pc3NpbmcgY2xhc3NOYW1lIHdoaWxlIGluaXRpYWxpemluZyB3b3JrZXIiOwogICAgY29uc3QgW3IsIHNdID0gdC5hcmdzLCBpID0gdWUkMVtyXTsKICAgIGlmIChpKQogICAgICBlLmluc3RhbmNlID0gbmV3IGkodC5hcmdzLnNsaWNlKDEpKTsKICAgIGVsc2UKICAgICAgdGhyb3cgYHVua25vd24gd29ya2VyIGNsYXNzICR7cn1gOwogICAgUCQyKHMsIGgkMSksIHkkMih0LCB0eXBlb2YgZS5pbnN0YW5jZSAhPT0gdm9pZCAwKTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gcGUkMSh0LCBlKSB7CiAgICBjb25zdCB7IGFyZ3M6IHIgfSA9IHQ7CiAgICBpZiAoIWUuaW5zdGFuY2UpCiAgICAgIHRocm93ICJpbnN0YW5jZSBub3QgaW5pdGlhbGl6ZWQiOwogICAgbGV0IHM7CiAgICBlLmluc3RhbmNlLnRlcm1pbmF0ZSAmJiAocyA9IGF3YWl0IGUuaW5zdGFuY2UudGVybWluYXRlKC4uLnIgPz8gW10pKSwgeSQyKHQsIHMpOwogIH0KICBmdW5jdGlvbiBtZSQxKHQpIHsKICAgIGlmICghdC5hcmdzKQogICAgICB0aHJvdyAiTWlzc2luZyBnbG9iYWxzIHdoaWxlIHN5bmNpbmciOwogICAgUCQyKHQuYXJnc1swXSwgaCQxKSwgeSQyKHQsIHt9KTsKICB9CiAgZnVuY3Rpb24gZ2UkMSgpIHsKICAgIGNvbnN0IHQgPSB7fTsKICAgIG9ubWVzc2FnZSA9IGFzeW5jIChlKSA9PiB7CiAgICAgIGNvbnN0IHIgPSBlLmRhdGE7CiAgICAgIHN3aXRjaCAoci50eXBlKSB7CiAgICAgICAgY2FzZSB1JDIuSU5JVDoKICAgICAgICAgIGRlJDEociwgdCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIHUkMi5GT1JXQVJEOgogICAgICAgICAgaGUkMShyLCB0KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgdSQyLlRFUk1JTkFURToKICAgICAgICAgIHBlJDEociwgdCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIHUkMi5HTE9CQUxTX1NZTkM6CiAgICAgICAgICBtZSQxKHIpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH07CiAgfQogIFYkMigpICYmIGdlJDEoKTsKICBmdW5jdGlvbiBfZSQxKHQsIGUpIHsKICAgIHJldHVybiBoJDFbdF0gfHwgKGgkMVt0XSA9IGUpLCBbCiAgICAgICgpID0+IGgkMVt0XSwKICAgICAgYXN5bmMgKHIpID0+IHsKICAgICAgICBoJDFbdF0gPSByLCBhd2FpdCBmZSQxKCk7CiAgICAgIH0KICAgIF07CiAgfQogIGZ1bmN0aW9uIHllJDEodCwgZSkgewogICAgcmV0dXJuIF9lJDEodCwgZSk7CiAgfQogIGNvbnN0IFtiZSQxLCB3ZSQxXSA9IHllJDEoIm1ldGFkYXRhIik7CiAgZnVuY3Rpb24geGUkMSh0KSB7CiAgICB3ZSQxKHQpOwogIH0KICBmdW5jdGlvbiB4JDIoKSB7CiAgICByZXR1cm4gYmUkMSgpOwogIH0KICBsZXQgTCQyID0gY2xhc3MgTCB7CiAgICBjb25zdHJ1Y3RvcihlLCByKSB7CiAgICAgIFokMSh0aGlzLCAidXVpZCIpLCB0aGlzLmNvbmZpZyA9IGUsIHRoaXMudXVpZCA9IHIgPz8gYWUkMSgpOwogICAgfQogICAgYXN5bmMgc2VuZChlKSB7CiAgICAgIHZhciByLCBzLCBpOwogICAgICBjb25zdCB7IGFwcElkOiBuLCBzb3VyY2VUeXBlOiBvIH0gPSAociA9IHgkMigpKSAhPSBudWxsID8gciA6IHt9OwogICAgICBpZiAoIW4gfHwgIW8pCiAgICAgICAgcmV0dXJuICJtZXRhZGF0YSBtaXNzaW5nIjsKICAgICAgY29uc3QgYSA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKSwgayA9IHNldFRpbWVvdXQoKCkgPT4gYS5hYm9ydCgpLCB0ZSQxKTsKICAgICAgcmV0dXJuIGF3YWl0ICgoaSA9IChzID0gdGhpcy5jb25maWcpID09IG51bGwgPyB2b2lkIDAgOiBzLmZldGNoKSAhPSBudWxsID8gaSA6IGZldGNoKSh0aGlzLmdldFVybCgpLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCksCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5idWlsZFJlcG9ydChlKSksCiAgICAgICAgc2lnbmFsOiBhLnNpZ25hbAogICAgICB9KSwgY2xlYXJUaW1lb3V0KGspLCAic3VjY2VzcyI7CiAgICB9CiAgICBnZXRVcmwoKSB7CiAgICAgIHZhciBlOwogICAgICBsZXQgciA9IChlID0geCQyKCkucHJveHlVcmwpICE9IG51bGwgPyBlIDogcmUkMTsKICAgICAgcmV0dXJuIHIgKz0gKHIuYXQoLTEpID09PSAiLyIgPyAiIiA6ICIvIikgKyBlZSQxLCByOwogICAgfQogICAgZ2V0SGVhZGVycygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgIH07CiAgICB9CiAgICBidWlsZFJlcG9ydChlKSB7CiAgICAgIGNvbnN0IHIgPSB4JDIoKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBndWlkOiB0aGlzLnV1aWQsCiAgICAgICAgLi4uZSwKICAgICAgICBhcHBsaWNhdGlvbklkOiByLmFwcElkLAogICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgICBwcm94eVVybDogci5wcm94eVVybCwKICAgICAgICBzb3VyY2U6IHIuc291cmNlVHlwZQogICAgICB9OwogICAgfQogIH07CiAgY29uc3QgRSQyID0gIjIuMC40IjsKICBsZXQgVGUkMSA9IGNsYXNzIFRlIHsKICAgIGNvbnN0cnVjdG9yKGUsIHIpIHsKICAgICAgdGhpcy5jb25maWcgPSBlLCB0aGlzLmZyYW1lVHJhbnNmb3JtZWRDb3VudCA9IDAsIHRoaXMuZnJhbWVGcm9tU291cmNlQ291bnQgPSAwLCB0aGlzLnN0YXJ0QXQgPSAwLCB0aGlzLnJlcG9ydGVyID0gbmV3IEwkMihlLCByKTsKICAgIH0KICAgIGFzeW5jIG9uRnJhbWVGcm9tU291cmNlKCkgewogICAgICB0aGlzLmZyYW1lRnJvbVNvdXJjZUNvdW50Kys7CiAgICB9CiAgICBnZXQgZnBzKCkgewogICAgICBjb25zdCB7IHN0YXJ0QXQ6IGUsIGZyYW1lRnJvbVNvdXJjZUNvdW50OiByIH0gPSB0aGlzLCBpID0gKERhdGUubm93KCkgLSBlKSAvIDFlMzsKICAgICAgcmV0dXJuIHIgLyBpOwogICAgfQogICAgYXN5bmMgb25GcmFtZVRyYW5zZm9ybWVkKGUgPSB7fSwgciA9ICExKSB7CiAgICAgIHRoaXMuc3RhcnRBdCA9PT0gMCAmJiAodGhpcy5zdGFydEF0ID0gRGF0ZS5ub3coKSksIHRoaXMuZnJhbWVUcmFuc2Zvcm1lZENvdW50Kys7CiAgICAgIGNvbnN0IHsgc3RhcnRBdDogcywgZnJhbWVUcmFuc2Zvcm1lZENvdW50OiBpLCBmcmFtZUZyb21Tb3VyY2VDb3VudDogbiB9ID0gdGhpcywgbyA9IERhdGUubm93KCksIGEgPSAobyAtIHMpIC8gMWUzLCBrID0gaSAvIGEsIFcgPSBuIC8gYTsKICAgICAgcmV0dXJuIHIgfHwgdGhpcy5mcmFtZVRyYW5zZm9ybWVkQ291bnQgPj0gdGhpcy5jb25maWcubG9nZ2luZ0ludGVydmFsRnJhbWVDb3VudCA/ICh0aGlzLmZyYW1lRnJvbVNvdXJjZUNvdW50ID0gMCwgdGhpcy5mcmFtZVRyYW5zZm9ybWVkQ291bnQgPSAwLCB0aGlzLnN0YXJ0QXQgPSBvLCB0aGlzLnJlcG9ydGVyLmNvbmZpZyA9IHRoaXMuY29uZmlnLCB0aGlzLnJlcG9ydGVyLnNlbmQoewogICAgICAgIC4uLnRoaXMuY29uZmlnLnJlcG9ydCwKICAgICAgICB2YXJpYXRpb246ICJRb1MiLAogICAgICAgIGZwczogVywKICAgICAgICB0cmFuc2Zvcm1lZEZwczogaywKICAgICAgICBmcmFtZXNUcmFuc2Zvcm1lZDogaSwKICAgICAgICAuLi5lCiAgICAgIH0pKSA6ICJzdWNjZXNzIjsKICAgIH0KICB9OwogIHZhciBPJDIgPSAvKiBAX19QVVJFX18gKi8gKCh0KSA9PiAodC5waXBlbGluZV9lbmRlZCA9ICJwaXBlbGluZV9lbmRlZCIsIHQucGlwZWxpbmVfZW5kZWRfd2l0aF9lcnJvciA9ICJwaXBlbGluZV9lbmRlZF93aXRoX2Vycm9yIiwgdC5waXBlbGluZV9zdGFydGVkID0gInBpcGVsaW5lX3N0YXJ0ZWQiLCB0LnBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciA9ICJwaXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3IiLCB0LnBpcGVsaW5lX3Jlc3RhcnRlZCA9ICJwaXBlbGluZV9yZXN0YXJ0ZWQiLCB0LnBpcGVsaW5lX3Jlc3RhcnRlZF93aXRoX2Vycm9yID0gInBpcGVsaW5lX3Jlc3RhcnRlZF93aXRoX2Vycm9yIiwgdCkpKE8kMiB8fCB7fSk7CiAgY29uc3QgUmUkMSA9IDUwMCwgUGUkMSA9IDAuODsKICBsZXQga2UkMSA9IGNsYXNzIGtlIGV4dGVuZHMgdiQyIHsKICAgIGNvbnN0cnVjdG9yKGUsIHIpIHsKICAgICAgc3VwZXIoKSwgdGhpcy5yZXBvcnRlcl8gPSBuZXcgTCQyKCksIHRoaXMucmVwb3J0ZXJRb3NfID0gbmV3IFRlJDEoewogICAgICAgIGxvZ2dpbmdJbnRlcnZhbEZyYW1lQ291bnQ6IFJlJDEsCiAgICAgICAgcmVwb3J0OiB7CiAgICAgICAgICB2ZXJzaW9uOiBFJDIKICAgICAgICB9CiAgICAgIH0pLCB0aGlzLmluZGV4XyA9IHIsIHRoaXMudHJhbnNmb3JtZXJfID0gZSwgdGhpcy5zaG91bGRTdG9wXyA9ICExLCB0aGlzLmlzRmxhc2hlZF8gPSAhMSwgdGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfID0gMCwgdGhpcy52aWRlb0hlaWdodF8gPSAwLCB0aGlzLnZpZGVvV2lkdGhfID0gMCwgdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8gPSAtMSwgdGhpcy50cmFuc2Zvcm1lclR5cGVfID0gIkN1c3RvbSIsICJnZXRUcmFuc2Zvcm1lclR5cGUiIGluIGUgJiYgKHRoaXMudHJhbnNmb3JtZXJUeXBlXyA9IGUuZ2V0VHJhbnNmb3JtZXJUeXBlKCkpLCB0aGlzLnJlcG9ydCh7CiAgICAgICAgdmFyaWF0aW9uOiAiQ3JlYXRlIgogICAgICB9KTsKICAgIH0KICAgIHNldFRyYWNrRXhwZWN0ZWRSYXRlKGUpIHsKICAgICAgdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8gPSBlOwogICAgfQogICAgYXN5bmMgc3RhcnQoZSkgewogICAgICBpZiAodGhpcy5jb250cm9sbGVyXyA9IGUsIHRoaXMudHJhbnNmb3JtZXJfICYmIHR5cGVvZiB0aGlzLnRyYW5zZm9ybWVyXy5zdGFydCA9PSAiZnVuY3Rpb24iKQogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCB0aGlzLnRyYW5zZm9ybWVyXy5zdGFydChlKTsKICAgICAgICB9IGNhdGNoIChyKSB7CiAgICAgICAgICB0aGlzLnJlcG9ydCh7CiAgICAgICAgICAgIG1lc3NhZ2U6IGwkMS5lcnJvcnMudHJhbnNmb3JtZXJfc3RhcnQsCiAgICAgICAgICAgIHZhcmlhdGlvbjogIkVycm9yIiwKICAgICAgICAgICAgZXJyb3I6IEkkMihyKQogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zdCBzID0gewogICAgICAgICAgICBldmVudE1ldGFEYXRhOiB7IHRyYW5zZm9ybWVySW5kZXg6IHRoaXMuaW5kZXhfIH0sCiAgICAgICAgICAgIGVycm9yOiByLAogICAgICAgICAgICBmdW5jdGlvbjogInN0YXJ0IgogICAgICAgICAgICAvKiBzdGFydCAqLwogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuZW1pdCgiZXJyb3IiLCBzKTsKICAgICAgICB9CiAgICB9CiAgICBhc3luYyB0cmFuc2Zvcm0oZSwgcikgewogICAgICB2YXIgcywgaTsKICAgICAgaWYgKHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXyA9PT0gMCAmJiAodGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfID0gRGF0ZS5ub3coKSksIGUgaW5zdGFuY2VvZiBWaWRlb0ZyYW1lICYmICh0aGlzLnZpZGVvSGVpZ2h0XyA9IChlID09IG51bGwgPyB2b2lkIDAgOiBlLmRpc3BsYXlIZWlnaHQpID8/IDAsIHRoaXMudmlkZW9XaWR0aF8gPSAoZSA9PSBudWxsID8gdm9pZCAwIDogZS5kaXNwbGF5V2lkdGgpID8/IDApLCB0aGlzLnJlcG9ydGVyUW9zXy5vbkZyYW1lRnJvbVNvdXJjZSgpLCB0aGlzLnRyYW5zZm9ybWVyXykKICAgICAgICBpZiAodGhpcy5zaG91bGRTdG9wXykKICAgICAgICAgIGNvbnNvbGUud2FybigiW1BpcGVsaW5lXSBmbHVzaCBmcm9tIHRyYW5zZm9ybSIpLCBlLmNsb3NlKCksIHRoaXMuZmx1c2gociksIHIudGVybWluYXRlKCk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBhd2FpdCAoKGkgPSAocyA9IHRoaXMudHJhbnNmb3JtZXJfKS50cmFuc2Zvcm0pID09IG51bGwgPyB2b2lkIDAgOiBpLmNhbGwocywgZSwgcikpLCB0aGlzLnJlcG9ydFFvcygpOwogICAgICAgICAgfSBjYXRjaCAobikgewogICAgICAgICAgICB0aGlzLnJlcG9ydCh7CiAgICAgICAgICAgICAgbWVzc2FnZTogbCQxLmVycm9ycy50cmFuc2Zvcm1lcl90cmFuc2Zvcm0sCiAgICAgICAgICAgICAgdmFyaWF0aW9uOiAiRXJyb3IiLAogICAgICAgICAgICAgIGVycm9yOiBJJDIobikKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IG8gPSB7CiAgICAgICAgICAgICAgZXZlbnRNZXRhRGF0YTogeyB0cmFuc2Zvcm1lckluZGV4OiB0aGlzLmluZGV4XyB9LAogICAgICAgICAgICAgIGVycm9yOiBuLAogICAgICAgICAgICAgIGZ1bmN0aW9uOiAidHJhbnNmb3JtIgogICAgICAgICAgICAgIC8qIHRyYW5zZm9ybSAqLwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmVtaXQoImVycm9yIiwgbyk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy50cmFja0V4cGVjdGVkUmF0ZV8gIT0gLTEgJiYgdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8gKiBQZSQxID4gdGhpcy5yZXBvcnRlclFvc18uZnBzKSB7CiAgICAgICAgICAgIGNvbnN0IG4gPSB7CiAgICAgICAgICAgICAgZXZlbnRNZXRhRGF0YTogewogICAgICAgICAgICAgICAgdHJhbnNmb3JtZXJJbmRleDogdGhpcy5pbmRleF8KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAiZnBzX2Ryb3AiLAogICAgICAgICAgICAgIGRyb3BJbmZvOiB7CiAgICAgICAgICAgICAgICByZXF1ZXN0ZWQ6IHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfLAogICAgICAgICAgICAgICAgY3VycmVudDogdGhpcy5yZXBvcnRlclFvc18uZnBzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmVtaXQoIndhcm4iLCBuKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBhc3luYyBmbHVzaChlKSB7CiAgICAgIGlmICh0aGlzLnRyYW5zZm9ybWVyXyAmJiB0eXBlb2YgdGhpcy50cmFuc2Zvcm1lcl8uZmx1c2ggPT0gImZ1bmN0aW9uIiAmJiAhdGhpcy5pc0ZsYXNoZWRfKSB7CiAgICAgICAgdGhpcy5pc0ZsYXNoZWRfID0gITA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGF3YWl0IHRoaXMudHJhbnNmb3JtZXJfLmZsdXNoKGUpOwogICAgICAgIH0gY2F0Y2ggKHIpIHsKICAgICAgICAgIHRoaXMucmVwb3J0KHsKICAgICAgICAgICAgbWVzc2FnZTogbCQxLmVycm9ycy50cmFuc2Zvcm1lcl9mbHVzaCwKICAgICAgICAgICAgdmFyaWF0aW9uOiAiRXJyb3IiLAogICAgICAgICAgICBlcnJvcjogSSQyKHIpCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnN0IHMgPSB7CiAgICAgICAgICAgIGV2ZW50TWV0YURhdGE6IHsgdHJhbnNmb3JtZXJJbmRleDogdGhpcy5pbmRleF8gfSwKICAgICAgICAgICAgZXJyb3I6IHIsCiAgICAgICAgICAgIGZ1bmN0aW9uOiAiZmx1c2giCiAgICAgICAgICAgIC8qIGZsdXNoICovCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5lbWl0KCJlcnJvciIsIHMpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnJlcG9ydFFvcyghMCksIHRoaXMucmVwb3J0KHsKICAgICAgICB2YXJpYXRpb246ICJEZWxldGUiCiAgICAgIH0pOwogICAgfQogICAgc3RvcCgpIHsKICAgICAgY29uc29sZS5sb2coIltQaXBlbGluZV0gU3RvcCBzdHJlYW0uIiksIHRoaXMuY29udHJvbGxlcl8gJiYgKHRoaXMuZmx1c2godGhpcy5jb250cm9sbGVyXyksIHRoaXMuY29udHJvbGxlcl8udGVybWluYXRlKCkpLCB0aGlzLnNob3VsZFN0b3BfID0gITA7CiAgICB9CiAgICByZXBvcnQoZSkgewogICAgICB0aGlzLnJlcG9ydGVyXy5zZW5kKHsKICAgICAgICB2ZXJzaW9uOiBFJDIsCiAgICAgICAgYWN0aW9uOiAiTWVkaWFUcmFuc2Zvcm1lciIsCiAgICAgICAgdHJhbnNmb3JtZXJUeXBlOiB0aGlzLnRyYW5zZm9ybWVyVHlwZV8sCiAgICAgICAgLi4uZQogICAgICB9KTsKICAgIH0KICAgIHJlcG9ydFFvcyhlID0gITEpIHsKICAgICAgdGhpcy5yZXBvcnRlclFvc18uY29uZmlnID0gewogICAgICAgIC4uLnRoaXMucmVwb3J0ZXJRb3NfLmNvbmZpZwogICAgICB9LCB0aGlzLnJlcG9ydGVyUW9zXy5vbkZyYW1lVHJhbnNmb3JtZWQoCiAgICAgICAgewogICAgICAgICAgdmVyc2lvbjogRSQyLAogICAgICAgICAgYWN0aW9uOiAiTWVkaWFUcmFuc2Zvcm1lciIsCiAgICAgICAgICB0cmFuc2Zvcm1lclR5cGU6IHRoaXMudHJhbnNmb3JtZXJUeXBlXywKICAgICAgICAgIHZpZGVvV2lkdGg6IHRoaXMudmlkZW9XaWR0aF8sCiAgICAgICAgICB2aWRlb0hlaWdodDogdGhpcy52aWRlb0hlaWdodF8KICAgICAgICB9LAogICAgICAgIGUKICAgICAgKTsKICAgIH0KICB9OwogIGxldCBBZSQxID0gY2xhc3MgQWUgZXh0ZW5kcyB2JDIgewogICAgY29uc3RydWN0b3IoZSkgewogICAgICBzdXBlcigpLCB0aGlzLnRyYW5zZm9ybWVyc18gPSBbXSwgdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8gPSAtMTsKICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKSB7CiAgICAgICAgbGV0IHMgPSBuZXcga2UkMShlW3JdLCByKTsKICAgICAgICBzLm9uKCJlcnJvciIsIChpKSA9PiB7CiAgICAgICAgICB0aGlzLmVtaXQoImVycm9yIiwgaSk7CiAgICAgICAgfSksIHMub24oIndhcm4iLCAoaSkgPT4gewogICAgICAgICAgdGhpcy5lbWl0KCJ3YXJuIiwgaSk7CiAgICAgICAgfSksIHRoaXMudHJhbnNmb3JtZXJzXy5wdXNoKHMpOwogICAgICB9CiAgICB9CiAgICBzZXRUcmFja0V4cGVjdGVkUmF0ZShlKSB7CiAgICAgIHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfID0gZTsKICAgICAgZm9yIChsZXQgciBvZiB0aGlzLnRyYW5zZm9ybWVyc18pCiAgICAgICAgci5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyk7CiAgICB9CiAgICBhc3luYyBzdGFydChlLCByKSB7CiAgICAgIGlmICghdGhpcy50cmFuc2Zvcm1lcnNfIHx8IHRoaXMudHJhbnNmb3JtZXJzXy5sZW5ndGggPT09IDApIHsKICAgICAgICBjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBObyB0cmFuc2Zvcm1lcnMuIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHMgPSBlOwogICAgICAgIGZvciAobGV0IGkgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKQogICAgICAgICAgZSA9IGUucGlwZVRocm91Z2goCiAgICAgICAgICAgIG5ldyBUcmFuc2Zvcm1TdHJlYW0oaSkKICAgICAgICAgICk7CiAgICAgICAgZS5waXBlVG8ocikudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBTZXR1cC4iKSwgYXdhaXQgci5hYm9ydCgpLCBhd2FpdCBzLmNhbmNlbCgpLCB0aGlzLmVtaXQoCiAgICAgICAgICAgICJwaXBlbGluZUluZm8iLAogICAgICAgICAgICAicGlwZWxpbmVfZW5kZWQiCiAgICAgICAgICAgIC8qIHBpcGVsaW5lX2VuZGVkICovCiAgICAgICAgICApOwogICAgICAgIH0pLmNhdGNoKGFzeW5jIChpKSA9PiB7CiAgICAgICAgICBlLmNhbmNlbCgpLnRoZW4oKCkgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgICAiW1BpcGVsaW5lXSBTaHV0dGluZyBkb3duIHN0cmVhbXMgYWZ0ZXIgYWJvcnQuIgogICAgICAgICAgICApOwogICAgICAgICAgfSkuY2F0Y2goKG4pID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiW1BpcGVsaW5lXSBFcnJvciBmcm9tIHN0cmVhbSB0cmFuc2Zvcm06IiwKICAgICAgICAgICAgICBuCiAgICAgICAgICAgICk7CiAgICAgICAgICB9KSwgYXdhaXQgci5hYm9ydChpKSwgYXdhaXQgcy5jYW5jZWwoaSksIHRoaXMuZW1pdCgKICAgICAgICAgICAgInBpcGVsaW5lSW5mbyIsCiAgICAgICAgICAgICJwaXBlbGluZV9lbmRlZF93aXRoX2Vycm9yIgogICAgICAgICAgICAvKiBwaXBlbGluZV9lbmRlZF93aXRoX2Vycm9yICovCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIHsKICAgICAgICB0aGlzLmVtaXQoCiAgICAgICAgICAicGlwZWxpbmVJbmZvIiwKICAgICAgICAgICJwaXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3IiCiAgICAgICAgICAvKiBwaXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3IgKi8KICAgICAgICApLCB0aGlzLmRlc3Ryb3koKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5lbWl0KAogICAgICAgICJwaXBlbGluZUluZm8iLAogICAgICAgICJwaXBlbGluZV9zdGFydGVkIgogICAgICAgIC8qIHBpcGVsaW5lX3N0YXJ0ZWQgKi8KICAgICAgKSwgY29uc29sZS5sb2coIltQaXBlbGluZV0gUGlwZWxpbmUgc3RhcnRlZC4iKTsKICAgIH0KICAgIGFzeW5jIGRlc3Ryb3koKSB7CiAgICAgIGNvbnNvbGUubG9nKCJbUGlwZWxpbmVdIERlc3Ryb3lpbmcgUGlwZWxpbmUuIik7CiAgICAgIGZvciAobGV0IGUgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKQogICAgICAgIGUuc3RvcCgpOwogICAgfQogIH07CiAgbGV0IENlJDEgPSBjbGFzcyBDZSBleHRlbmRzIHYkMiB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKSwgdGhpcy5yZXBvcnRlcl8gPSBuZXcgTCQyKCksIHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfID0gLTEsIHRoaXMucmVwb3J0KHsKICAgICAgICB2YXJpYXRpb246ICJDcmVhdGUiCiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBleHBlY3RlZCByYXRlIG9mIHRoZSB0cmFjayBwZXIgc2Vjb25kLgogICAgICogVGhlIG1lZGlhIHByb2Nlc3NvciB3aWxsIHVzZSB0aGlzIG51bWJlciBmb3IgY2FsY3VsYXRpbmcgZHJvcHMgaW4gdGhlIHJhdGUuCiAgICAgKiBUaGlzIGNvdWxkIGhhcHBlbiB3aGVuIHRoZSB0cmFuc2Zvcm1hdGlvbiB3aWxsIHRha2UgbW9yZSB0aW1lIHRoYW4gZXhwZWN0ZWQuCiAgICAgKiBUaGlzIHdpbGwgbm90IGNhdXNlIGFuIGVycm9yLCBqdXN0IHdhcm5pbmcgdG8gdGhlIGNsaWVudC4KICAgICAqIE1vc3RseToKICAgICAqIFZpZGVvOiAzMCBmcmFtZXMgcGVyIHNlY29uZAogICAgICogQXVkaW86IDUwIGF1ZGlvIGRhdGEgcGVyIHNlY29uZCBmb3IgT1BVUwogICAgICogSW4gY2FzZSBvZiBpbmNyZWFzZWQgZnJhbWUgZHJvcHBpbmcgcmF0ZSBhIHdhcm5pbmcgd2lsbCBiZSBlbWl0dGVkIGFjY29yZGluZyB0byBpbmZvIFtoZXJlXSgvZG9jcy9pbnRybyNlcnJvcnMtYW5kLXdhcm5pbmdzLWxpc3RlbmVyKS4KICAgICAqICoqKlRoaXMgaXMgYW4gb3B0aW9uYWwgbWV0aG9kLioqKgogICAgICogQHBhcmFtIHRyYWNrRXhwZWN0ZWRSYXRlIC0gbnVtYmVyIGhvbGRzIHRoZSBwcmVkaWN0ZWQgdHJhY2sgcmF0ZS4KICAgICAqLwogICAgc2V0VHJhY2tFeHBlY3RlZFJhdGUoZSkgewogICAgICB0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyA9IGUsIHRoaXMucGlwZWxpbmVfICYmIHRoaXMucGlwZWxpbmVfLnNldFRyYWNrRXhwZWN0ZWRSYXRlKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfKTsKICAgIH0KICAgIC8qKgogICAgICogU3RhcnRzIHJ1bm5pbmcgdGhlIHRyYW5mb3JtYXRpb24gbG9naWMgcGVyZm9ybWVkIGJ5IHRoZSBtZWRpYSBwcm9jZXNzb3IgaW5zdGFuY2UuCiAgICAgKiBXaGVuIHJ1bm5pbmcgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBvbiBhIFdlYiB3b3JrZXIgdGhyZWFkIHRoZSBjYWxsIGZvciB0aGlzIGZ1bmN0aW9uIHNob3VsZCBiZSBtYWRlIGJ5IHRoZSB1c2VyLiBTZWUgZXhhbXBsZSBbaGVyZV0oL2RvY3MvaW50cm8jd2Vid29ya2VyLWNvZGUpLgogICAgICogV2hlbiBydW5uaW5nIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3Mgb24gdGhlIGFwcGxpY2F0aW9uIG1haW4gdGhyZWFkIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZCBnaXZlbiBpdCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgYE1lZGlhUHJvY2Vzc29yQ29ubmVjdG9yYCBpbnN0YW5jZS4KICAgICAqCiAgICAgKiBAcGFyYW0gcmVhZGFibGUgUmVhZGFibGUgc3RyZWFtIGFzc29jaWF0ZWQgdG8gdGhlIG1lZGlhIHNvdXJjZSBiZWluZyBwcm9jZXNzZWQuCiAgICAgKiBAcGFyYW0gd3JpdGFibGUgV3JpdGFibGUgc3RyZWFtIGFzc29jaWF0ZWQgdG8gdGhlIHJlc3VsdGluZyBtZWRpYSBvbmNlIHByb2Nlc3NlZC4KICAgICAqCiAgICAgKiBAcmV0dXJucwogICAgICovCiAgICB0cmFuc2Zvcm0oZSwgcikgewogICAgICByZXR1cm4gdGhpcy5yZWFkYWJsZV8gPSBlLCB0aGlzLndyaXRhYmxlXyA9IHIsIHRoaXMudHJhbnNmb3JtSW50ZXJuYWwoKTsKICAgIH0KICAgIC8qKgogICAgICogQHByaXZhdGUKICAgICAqLwogICAgdHJhbnNmb3JtSW50ZXJuYWwoKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAoZSwgcikgPT4gewogICAgICAgIGlmICghdGhpcy50cmFuc2Zvcm1lcnNfIHx8IHRoaXMudHJhbnNmb3JtZXJzXy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMucmVwb3J0KHsKICAgICAgICAgICAgbWVzc2FnZTogbCQxLmVycm9ycy50cmFuc2Zvcm1lcl9ub25lLAogICAgICAgICAgICB2YXJpYXRpb246ICJFcnJvciIKICAgICAgICAgIH0pLCByKCJbTWVkaWFQcm9jZXNzb3JdIE5lZWQgdG8gc2V0IHRyYW5zZm9ybWVycy4iKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLnJlYWRhYmxlXykgewogICAgICAgICAgdGhpcy5yZXBvcnQoewogICAgICAgICAgICB2YXJpYXRpb246ICJFcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGwkMS5lcnJvcnMucmVhZGFibGVfbnVsbAogICAgICAgICAgfSksIHIoIltNZWRpYVByb2Nlc3Nvcl0gUmVhZGFibGUgaXMgbnVsbC4iKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLndyaXRhYmxlXykgewogICAgICAgICAgdGhpcy5yZXBvcnQoewogICAgICAgICAgICB2YXJpYXRpb246ICJFcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGwkMS5lcnJvcnMud3JpdGFibGVfbnVsbAogICAgICAgICAgfSksIHIoIltNZWRpYVByb2Nlc3Nvcl0gV3JpdGFibGUgaXMgbnVsbC4iKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IHMgPSAhMTsKICAgICAgICB0aGlzLnBpcGVsaW5lXyAmJiAocyA9ICEwLCB0aGlzLnBpcGVsaW5lXy5jbGVhckxpc3RlbmVycygpLCB0aGlzLnBpcGVsaW5lXy5kZXN0cm95KCkpLCB0aGlzLnBpcGVsaW5lXyA9IG5ldyBBZSQxKHRoaXMudHJhbnNmb3JtZXJzXyksIHRoaXMucGlwZWxpbmVfLm9uKCJ3YXJuIiwgKGkpID0+IHsKICAgICAgICAgIHRoaXMuZW1pdCgid2FybiIsIGkpOwogICAgICAgIH0pLCB0aGlzLnBpcGVsaW5lXy5vbigiZXJyb3IiLCAoaSkgPT4gewogICAgICAgICAgdGhpcy5lbWl0KCJlcnJvciIsIGkpOwogICAgICAgIH0pLCB0aGlzLnBpcGVsaW5lXy5vbigicGlwZWxpbmVJbmZvIiwgKGkpID0+IHsKICAgICAgICAgIHMgJiYgKGkgPT09ICJwaXBlbGluZV9zdGFydGVkIiA/IGkgPSBPJDIucGlwZWxpbmVfcmVzdGFydGVkIDogaSA9PT0gInBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciIgJiYgKGkgPSBPJDIucGlwZWxpbmVfcmVzdGFydGVkX3dpdGhfZXJyb3IpKSwgdGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLCBpKTsKICAgICAgICB9KSwgdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8gIT0gLTEgJiYgdGhpcy5waXBlbGluZV8uc2V0VHJhY2tFeHBlY3RlZFJhdGUodGhpcy50cmFja0V4cGVjdGVkUmF0ZV8pLCB0aGlzLnBpcGVsaW5lXy5zdGFydCh0aGlzLnJlYWRhYmxlXywgdGhpcy53cml0YWJsZV8pLnRoZW4oKCkgPT4gewogICAgICAgICAgZSgpOwogICAgICAgIH0pLmNhdGNoKChpKSA9PiB7CiAgICAgICAgICByKGkpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyBhbiBhcnJheSBvZiB0cmFuc2Zyb21lciBpbnN0YW5jZXMgdGhhdCB3aWxsIGJlIGhvbGQgYW5kIHJhbiBieSB0aGUgbWVkaWEgcHJvY2Vzc29yIGluc3RhbmNlLgogICAgICogU2VlIGV4YW1wbGUgW2hlcmVdKC9kb2NzL2ludHJvI21haW4tY29kZSkKICAgICAqCiAgICAgKiBAcGFyYW0gdHJhbnNmb3JtZXJzIEFuIGFycmF5IG9mIHRyYW5zZm9ybWVyIGluc3RhbmNlcy4KICAgICAqCiAgICAgKiBAcmV0dXJucwogICAgICovCiAgICBzZXRUcmFuc2Zvcm1lcnMoZSkgewogICAgICByZXR1cm4gdGhpcy5yZXBvcnQoewogICAgICAgIHZhcmlhdGlvbjogIlVwZGF0ZSIsCiAgICAgICAgbWVzc2FnZTogbCQxLnVwZGF0ZXMudHJhbnNmb3JtZXJfbmV3CiAgICAgIH0pLCB0aGlzLnRyYW5zZm9ybWVyc18gPSBlLCB0aGlzLnJlYWRhYmxlXyAmJiB0aGlzLndyaXRhYmxlXyA/IHRoaXMudHJhbnNmb3JtSW50ZXJuYWwoKSA6IFByb21pc2UucmVzb2x2ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBTdG9wcyBydW5uaW5nIHRoZSB0cmFuZm9ybWF0aW9uIGxvZ2ljIHBlcmZvcm1lZCBieSB0aGUgbWVkaWEgcHJvY2Vzc29yIGluc3RhbmNlLgogICAgICogQHJldHVybnMKICAgICAqLwogICAgZGVzdHJveSgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChlKSA9PiB7CiAgICAgICAgdGhpcy5waXBlbGluZV8gJiYgdGhpcy5waXBlbGluZV8uZGVzdHJveSgpLCB0aGlzLnJlcG9ydCh7IHZhcmlhdGlvbjogIkRlbGV0ZSIgfSksIGUoKTsKICAgICAgfSk7CiAgICB9CiAgICByZXBvcnQoZSkgewogICAgICB0aGlzLnJlcG9ydGVyXy5zZW5kKHsKICAgICAgICB2ZXJzaW9uOiBFJDIsCiAgICAgICAgYWN0aW9uOiAiTWVkaWFQcm9jZXNzb3IiLAogICAgICAgIC4uLmUKICAgICAgfSk7CiAgICB9CiAgfTsKCiAgdmFyIFQkMSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTsKICB2YXIgQSQxID0gKGUsIG4sIHQpID0+IG4gaW4gZSA/IFQkMShlLCBuLCB7IGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAsIHZhbHVlOiB0IH0pIDogZVtuXSA9IHQ7CiAgdmFyIGYkMSA9IChlLCBuLCB0KSA9PiAoQSQxKGUsIHR5cGVvZiBuICE9ICJzeW1ib2wiID8gbiArICIiIDogbiwgdCksIHQpOwogIGNvbnN0IFUkMSA9ICJobGcudG9rYm94LmNvbS9wcm9kL2xvZ2dpbmcvdmNwX3dlYnJ0YyIsIHYkMSA9ICJodHRwczovLyIsIE4kMSA9IDFlNDsKICBsZXQgZCQxOwogIGNvbnN0IEMkMSA9IG5ldyBVaW50OEFycmF5KDE2KTsKICBmdW5jdGlvbiBPJDEoKSB7CiAgICBpZiAoIWQkMSAmJiAoZCQxID0gdHlwZW9mIGNyeXB0byA8ICJ1IiAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pLCAhZCQxKSkKICAgICAgdGhyb3cgbmV3IEVycm9yKCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCIpOwogICAgcmV0dXJuIGQkMShDJDEpOwogIH0KICBjb25zdCBvJDEgPSBbXTsKICBmb3IgKGxldCBlID0gMDsgZSA8IDI1NjsgKytlKQogICAgbyQxLnB1c2goKGUgKyAyNTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7CiAgZnVuY3Rpb24gTSQxKGUsIG4gPSAwKSB7CiAgICByZXR1cm4gKG8kMVtlW24gKyAwXV0gKyBvJDFbZVtuICsgMV1dICsgbyQxW2VbbiArIDJdXSArIG8kMVtlW24gKyAzXV0gKyAiLSIgKyBvJDFbZVtuICsgNF1dICsgbyQxW2VbbiArIDVdXSArICItIiArIG8kMVtlW24gKyA2XV0gKyBvJDFbZVtuICsgN11dICsgIi0iICsgbyQxW2VbbiArIDhdXSArIG8kMVtlW24gKyA5XV0gKyAiLSIgKyBvJDFbZVtuICsgMTBdXSArIG8kMVtlW24gKyAxMV1dICsgbyQxW2VbbiArIDEyXV0gKyBvJDFbZVtuICsgMTNdXSArIG8kMVtlW24gKyAxNF1dICsgbyQxW2VbbiArIDE1XV0pLnRvTG93ZXJDYXNlKCk7CiAgfQogIGNvbnN0IEUkMSA9IHR5cGVvZiBjcnlwdG8gPCAidSIgJiYgY3J5cHRvLnJhbmRvbVVVSUQgJiYgY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pLCB3JDEgPSB7CiAgICByYW5kb21VVUlEOiBFJDEKICB9OwogIGZ1bmN0aW9uIEwkMShlLCBuLCB0KSB7CiAgICBpZiAodyQxLnJhbmRvbVVVSUQgJiYgIW4gJiYgIWUpCiAgICAgIHJldHVybiB3JDEucmFuZG9tVVVJRCgpOwogICAgZSA9IGUgfHwge307CiAgICBjb25zdCBpID0gZS5yYW5kb20gfHwgKGUucm5nIHx8IE8kMSkoKTsKICAgIGlmIChpWzZdID0gaVs2XSAmIDE1IHwgNjQsIGlbOF0gPSBpWzhdICYgNjMgfCAxMjgsIG4pIHsKICAgICAgdCA9IHQgfHwgMDsKICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCAxNjsgKytyKQogICAgICAgIG5bdCArIHJdID0gaVtyXTsKICAgICAgcmV0dXJuIG47CiAgICB9CiAgICByZXR1cm4gTSQxKGkpOwogIH0KICBmdW5jdGlvbiB5JDEoZSwgbikgewogICAgZ2xvYmFsVGhpcy52b25hZ2UgfHwgKGdsb2JhbFRoaXMudm9uYWdlID0ge30pLCBnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyIHx8IChnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyID0ge30pOwogICAgbGV0IHQgPSBnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyOwogICAgcmV0dXJuIHRbZV0gfHwgKHRbZV0gPSBuKSwgdFtlXTsKICB9CiAgY29uc3QgYSQxID0geSQxKAogICAgImdsb2JhbHMiLAogICAge30KICApOwogIHZhciBzJDEgPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5JTklUID0gIklOSVQiLCBlLkZPUldBUkQgPSAiRk9SV0FSRCIsIGUuVEVSTUlOQVRFID0gIlRFUk1JTkFURSIsIGUuR0xPQkFMU19TWU5DID0gIkdMT0JBTFNfU1lOQyIsIGUpKShzJDEgfHwge30pOwogIGZ1bmN0aW9uIEkkMShlKSB7CiAgICByZXR1cm4gW0ltYWdlQml0bWFwLCBSZWFkYWJsZVN0cmVhbSwgV3JpdGFibGVTdHJlYW1dLnNvbWUoKHQpID0+IGUgaW5zdGFuY2VvZiB0KTsKICB9CiAgbGV0IEckMSA9IDA7CiAgZnVuY3Rpb24gViQxKGUsIG4sIHQsIGksIHIpIHsKICAgIGNvbnN0IGMgPSBHJDErKzsKICAgIHJldHVybiBlLnBvc3RNZXNzYWdlKAogICAgICB7CiAgICAgICAgaWQ6IGMsCiAgICAgICAgdHlwZTogbiwKICAgICAgICBmdW5jdGlvbk5hbWU6IHQsCiAgICAgICAgYXJnczogaQogICAgICB9LAogICAgICBpLmZpbHRlcigobCkgPT4gSSQxKGwpKQogICAgKSwgbmV3IFByb21pc2UoKGwpID0+IHsKICAgICAgciA9PSBudWxsIHx8IHIuc2V0KGMsIGwpOwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIHUkMShlLCBuKSB7CiAgICBjb25zdCB7IGlkOiB0LCB0eXBlOiBpIH0gPSBlLCByID0gQXJyYXkuaXNBcnJheShuKSA/IG4gOiBbbl07CiAgICBwb3N0TWVzc2FnZSgKICAgICAgewogICAgICAgIGlkOiB0LAogICAgICAgIHR5cGU6IGksCiAgICAgICAgcmVzdWx0OiBuCiAgICAgIH0sCiAgICAgIHIuZmlsdGVyKChjKSA9PiBJJDEoYykpCiAgICApOwogIH0KICBjb25zdCBtJDEgPSB5JDEoIndvcmtlcml6ZWQiLCB7fSk7CiAgZnVuY3Rpb24gUiQxKCkgewogICAgcmV0dXJuIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSA8ICJ1IiAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7CiAgfQogIGFzeW5jIGZ1bmN0aW9uIFckMSgpIHsKICAgIGlmIChSJDEoKSkKICAgICAgdSQxKHsgdHlwZTogcyQxLkdMT0JBTFNfU1lOQyB9LCBhJDEpOwogICAgZWxzZSB7CiAgICAgIGNvbnN0IGUgPSBbXTsKICAgICAgZm9yIChjb25zdCBuIGluIG0kMSkgewogICAgICAgIGNvbnN0IHsgd29ya2VyOiB0LCByZXNvbHZlcnM6IGkgfSA9IG0kMVtuXS53b3JrZXJDb250ZXh0OwogICAgICAgIHQgJiYgZS5wdXNoKAogICAgICAgICAgViQxKAogICAgICAgICAgICB0LAogICAgICAgICAgICBzJDEuR0xPQkFMU19TWU5DLAogICAgICAgICAgICAiIiwKICAgICAgICAgICAgW2EkMV0sCiAgICAgICAgICAgIGkKICAgICAgICAgICkKICAgICAgICApOwogICAgICB9CiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGUpOwogICAgfQogIH0KICBmdW5jdGlvbiBnJDEoZSwgbikgewogICAgaWYgKEFycmF5LmlzQXJyYXkobikpCiAgICAgIG4uc3BsaWNlKDAsIG4ubGVuZ3RoKTsKICAgIGVsc2UgaWYgKHR5cGVvZiBuID09ICJvYmplY3QiKQogICAgICBmb3IgKGNvbnN0IHQgaW4gbikKICAgICAgICBkZWxldGUgblt0XTsKICAgIGZvciAoY29uc3QgdCBpbiBlKQogICAgICBBcnJheS5pc0FycmF5KGVbdF0pID8gKG5bdF0gPSBbXSwgZyQxKGVbdF0sIG5bdF0pKSA6IHR5cGVvZiBlW3RdID09ICJvYmplY3QiID8gKG5bdF0gPSB7fSwgZyQxKGVbdF0sIG5bdF0pKSA6IG5bdF0gPSBlW3RdOwogIH0KICBhc3luYyBmdW5jdGlvbiBEJDEoZSwgbikgewogICAgY29uc3QgeyBmdW5jdGlvbk5hbWU6IHQsIGFyZ3M6IGkgfSA9IGU7CiAgICBpZiAoIW4uaW5zdGFuY2UpCiAgICAgIHRocm93ICJpbnN0YW5jZSBub3QgaW5pdGlhbGl6ZWQiOwogICAgaWYgKCF0KQogICAgICB0aHJvdyAibWlzc2luZyBmdW5jdGlvbiBuYW1lIHRvIGNhbGwiOwogICAgaWYgKCFuLmluc3RhbmNlW3RdKQogICAgICB0aHJvdyBgdW5kZWZpbmVkIGZ1bmN0aW9uIFske3R9XSBpbiBjbGFzcyAke24uaW5zdGFuY2UuY29uc3RydWN0b3Iud29ya2VySWR9YDsKICAgIHUkMShlLCBhd2FpdCBuLmluc3RhbmNlW3RdKC4uLmkgIT0gbnVsbCA/IGkgOiBbXSkpOwogIH0KICBjb25zdCBfJDEgPSB5JDEoInJlZ2lzdGVyZWRXb3JrZXJzIiwge30pOwogIGZ1bmN0aW9uIHgkMShlLCBuKSB7CiAgICBpZiAoIWUuYXJncykKICAgICAgdGhyb3cgIk1pc3NpbmcgY2xhc3NOYW1lIHdoaWxlIGluaXRpYWxpemluZyB3b3JrZXIiOwogICAgY29uc3QgW3QsIGldID0gZS5hcmdzLCByID0gXyQxW3RdOwogICAgaWYgKHIpCiAgICAgIG4uaW5zdGFuY2UgPSBuZXcgcihlLmFyZ3Muc2xpY2UoMSkpOwogICAgZWxzZQogICAgICB0aHJvdyBgdW5rbm93biB3b3JrZXIgY2xhc3MgJHt0fWA7CiAgICBnJDEoaSwgYSQxKSwgdSQxKGUsIHR5cGVvZiBuLmluc3RhbmNlICE9PSB2b2lkIDApOwogIH0KICBhc3luYyBmdW5jdGlvbiB6JDEoZSwgbikgewogICAgY29uc3QgeyBhcmdzOiB0IH0gPSBlOwogICAgaWYgKCFuLmluc3RhbmNlKQogICAgICB0aHJvdyAiaW5zdGFuY2Ugbm90IGluaXRpYWxpemVkIjsKICAgIGxldCBpOwogICAgbi5pbnN0YW5jZS50ZXJtaW5hdGUgJiYgKGkgPSBhd2FpdCBuLmluc3RhbmNlLnRlcm1pbmF0ZSguLi50ICE9IG51bGwgPyB0IDogW10pKSwgdSQxKGUsIGkpOwogIH0KICBmdW5jdGlvbiBCJDEoZSkgewogICAgaWYgKCFlLmFyZ3MpCiAgICAgIHRocm93ICJNaXNzaW5nIGdsb2JhbHMgd2hpbGUgc3luY2luZyI7CiAgICBnJDEoZS5hcmdzWzBdLCBhJDEpLCB1JDEoZSwge30pOwogIH0KICBmdW5jdGlvbiBZJDEoKSB7CiAgICBjb25zdCBlID0ge307CiAgICBvbm1lc3NhZ2UgPSBhc3luYyAobikgPT4gewogICAgICBjb25zdCB0ID0gbi5kYXRhOwogICAgICBzd2l0Y2ggKHQudHlwZSkgewogICAgICAgIGNhc2UgcyQxLklOSVQ6CiAgICAgICAgICB4JDEodCwgZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIHMkMS5GT1JXQVJEOgogICAgICAgICAgRCQxKHQsIGUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBzJDEuVEVSTUlOQVRFOgogICAgICAgICAgeiQxKHQsIGUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBzJDEuR0xPQkFMU19TWU5DOgogICAgICAgICAgQiQxKHQpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH07CiAgfQogIFIkMSgpICYmIFkkMSgpOwogIGZ1bmN0aW9uIGokMShlLCBuKSB7CiAgICByZXR1cm4gYSQxW2VdIHx8IChhJDFbZV0gPSBuKSwgWwogICAgICAoKSA9PiBhJDFbZV0sCiAgICAgIGFzeW5jICh0KSA9PiB7CiAgICAgICAgYSQxW2VdID0gdCwgYXdhaXQgVyQxKCk7CiAgICAgIH0KICAgIF07CiAgfQogIGZ1bmN0aW9uIEYkMShlLCBuKSB7CiAgICByZXR1cm4gaiQxKGUsIG4pOwogIH0KICBjb25zdCBbUCQxLCAkJDFdID0gRiQxKCJtZXRhZGF0YSIpOwogIGZ1bmN0aW9uIHAkMSgpIHsKICAgIHJldHVybiBQJDEoKTsKICB9CiAgbGV0IHEkMSA9IGNsYXNzIHEgewogICAgY29uc3RydWN0b3IobikgewogICAgICBmJDEodGhpcywgInV1aWQiLCBMJDEoKSk7CiAgICAgIHRoaXMuY29uZmlnID0gbjsKICAgIH0KICAgIGFzeW5jIHNlbmQobikgewogICAgICB2YXIgbCwgaCwgYjsKICAgICAgY29uc3QgeyBhcHBJZDogdCwgc291cmNlVHlwZTogaSB9ID0gKGwgPSBwJDEoKSkgIT0gbnVsbCA/IGwgOiB7fTsKICAgICAgaWYgKCF0IHx8ICFpKQogICAgICAgIHJldHVybiAibWV0YWRhdGEgbWlzc2luZyI7CiAgICAgIGNvbnN0IHIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCksIGMgPSBzZXRUaW1lb3V0KCgpID0+IHIuYWJvcnQoKSwgTiQxKTsKICAgICAgcmV0dXJuIGF3YWl0ICgoYiA9IChoID0gdGhpcy5jb25maWcpID09IG51bGwgPyB2b2lkIDAgOiBoLmZldGNoKSAhPSBudWxsID8gYiA6IGZldGNoKSh0aGlzLmdldFVybCgpLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCksCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5idWlsZFJlcG9ydChuKSksCiAgICAgICAgc2lnbmFsOiByLnNpZ25hbAogICAgICB9KSwgY2xlYXJUaW1lb3V0KGMpLCAic3VjY2VzcyI7CiAgICB9CiAgICBnZXRVcmwoKSB7CiAgICAgIHZhciB0OwogICAgICBsZXQgbiA9ICh0ID0gcCQxKCkucHJveHlVcmwpICE9IG51bGwgPyB0IDogdiQxOwogICAgICByZXR1cm4gbiArPSAobi5hdCgtMSkgPT09ICIvIiA/ICIiIDogIi8iKSArIFUkMSwgbjsKICAgIH0KICAgIGdldEhlYWRlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICB9OwogICAgfQogICAgYnVpbGRSZXBvcnQobikgewogICAgICBjb25zdCB0ID0gcCQxKCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZ3VpZDogdGhpcy51dWlkLAogICAgICAgIC4uLm4sCiAgICAgICAgYXBwbGljYXRpb25JZDogdC5hcHBJZCwKICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksCiAgICAgICAgcHJveHlVcmw6IHQucHJveHlVcmwsCiAgICAgICAgc291cmNlOiB0LnNvdXJjZVR5cGUKICAgICAgfTsKICAgIH0KICB9OwoKICBjb25zdCB2ZXJzaW9uID0gIjUuMi4wLWFscGhhLjEiOwoKICB2YXIgQmx1clJhZGl1cyA9IC8qIEBfX1BVUkVfXyAqLyAoKEJsdXJSYWRpdXMyKSA9PiB7CiAgICBCbHVyUmFkaXVzMlsiTG93Il0gPSAiTG93IjsKICAgIEJsdXJSYWRpdXMyWyJIaWdoIl0gPSAiSGlnaCI7CiAgICByZXR1cm4gQmx1clJhZGl1czI7CiAgfSkoQmx1clJhZGl1cyB8fCB7fSk7CiAgdmFyIFdlYmdsU2VsZmllU2VnbWVudGF0aW9uVHlwZSA9IC8qIEBfX1BVUkVfXyAqLyAoKFdlYmdsU2VsZmllU2VnbWVudGF0aW9uVHlwZTIpID0+IHsKICAgIFdlYmdsU2VsZmllU2VnbWVudGF0aW9uVHlwZTJbIkZBU1QiXSA9ICJGQVNUIjsKICAgIFdlYmdsU2VsZmllU2VnbWVudGF0aW9uVHlwZTJbIlBSRUNJU0UiXSA9ICJQUkVDSVNFIjsKICAgIHJldHVybiBXZWJnbFNlbGZpZVNlZ21lbnRhdGlvblR5cGUyOwogIH0pKFdlYmdsU2VsZmllU2VnbWVudGF0aW9uVHlwZSB8fCB7fSk7CiAgdmFyIFJlbmRlcmluZ1R5cGUgPSAvKiBAX19QVVJFX18gKi8gKChSZW5kZXJpbmdUeXBlMikgPT4gewogICAgUmVuZGVyaW5nVHlwZTJbIkNBTlZBUyJdID0gIkNBTlZBUyI7CiAgICBSZW5kZXJpbmdUeXBlMlsiV0VCR0wiXSA9ICJXRUJHTCI7CiAgICByZXR1cm4gUmVuZGVyaW5nVHlwZTI7CiAgfSkoUmVuZGVyaW5nVHlwZSB8fCB7fSk7CgogIGZ1bmN0aW9uIGdldFBlcmZvcm1hbmNlU3VwcG9ydCgpIHsKICAgIGNvbnN0IG9mZnNjcmVlbkNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoMCwgMCk7CiAgICBjb25zdCBjb250ZXh0ID0gb2Zmc2NyZWVuQ2FudmFzLmdldENvbnRleHQoIndlYmdsMiIsIHsKICAgICAgZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDogdHJ1ZQogICAgfSk7CiAgICBpZiAoIWNvbnRleHQpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdXBwb3J0ZWQ6IGZhbHNlLAogICAgICAgIG1lc3NhZ2U6ICJZb3VyIGhhcmR3YXJlIGRvZXMgbm90IHBlcmZvcm0gZ29vZCBlbm91Z2ggdG8gcnVuIHRoZSBsaWJyYXJ5IGVmZmljaWVudGx5IgogICAgICB9OwogICAgfQogICAgcmV0dXJuIHsgc3VwcG9ydGVkOiB0cnVlIH07CiAgfQoKICBjbGFzcyBDYW52YXMyZFJlbmRlcmVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBjb25zdCBjYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKDAsIDApOwogICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIGlmICghY29udGV4dCkgewogICAgICAgIHRocm93ICJGYWlsIHRvIHJldHJpZXZlIHdlYmdsMiBjb250ZXh0IjsKICAgICAgfQogICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhczsKICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsKICAgIH0KICAgIHNldEZsaWNrZXJpbmdPcHRpb25zKG9wdGlvbnMpIHsKICAgIH0KICAgIGVuYWJsZVBvc3RQcm9jZXNzaW5nKCkgewogICAgfQogICAgZGlzYWJsZVBvc3RQcm9jZXNzaW5nKCkgewogICAgfQogICAgYXN5bmMgcHJvZmlsZVdlYmdsKGR1cmF0aW9uKSB7CiAgICAgIHJldHVybiBbXTsKICAgIH0KICAgIGFzeW5jIHJlbmRlcihpbWFnZSwgbWFzaykgewogICAgICByZXR1cm4gdGhpcy5jYW52YXM7CiAgICB9CiAgICByZXNpemVDYW52YXMoaW1hZ2UpIHsKICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBpbWFnZTsKICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB3aWR0aDsKICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgfQogICAgcmVuZGVyU2lsaG91ZXR0ZShpbWFnZSwgbWFzaywgZmlsdGVyID0gIm5vbmUiKSB7CiAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gaW1hZ2U7CiAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7CiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoCiAgICAgICAgbWFzaywKICAgICAgICAwLAogICAgICAgIDAsCiAgICAgICAgbWFzay53aWR0aCwKICAgICAgICBtYXNrLmhlaWdodCwKICAgICAgICAwLAogICAgICAgIDAsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMuY29udGV4dC5maWx0ZXIgPSAiYmx1cig1cHgpIjsKICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJzb3VyY2UtaW4iOwogICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKAogICAgICAgIG1hc2ssCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIG1hc2sud2lkdGgsCiAgICAgICAgbWFzay5oZWlnaHQsCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodAogICAgICApOwogICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gInNvdXJjZS1pbiI7CiAgICAgIHRoaXMuY29udGV4dC5maWx0ZXIgPSBmaWx0ZXI7CiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoCiAgICAgICAgaW1hZ2UsCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICAwLAogICAgICAgIDAsCiAgICAgICAgdGhpcy5jYW52YXMud2lkdGgsCiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7CiAgICB9CiAgfQoKICBjbGFzcyBDYW52YXMyZEJhY2tncm91bmRSZW5kZXJlciBleHRlbmRzIENhbnZhczJkUmVuZGVyZXIgewogICAgY29uc3RydWN0b3IocmFkaXVzKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzOwogICAgfQogICAgYXN5bmMgcmVuZGVyKGltYWdlLCBtYXNrKSB7CiAgICAgIHN1cGVyLnJlc2l6ZUNhbnZhcyhpbWFnZSk7CiAgICAgIHRoaXMucmVuZGVyU2lsaG91ZXR0ZShpbWFnZSwgbWFzayk7CiAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7CiAgICAgIHRoaXMuY29udGV4dC5maWx0ZXIgPSBgYmx1cigke3RoaXMucmFkaXVzfXB4KWA7CiAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAiZGVzdGluYXRpb24tb3ZlciI7CiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpOwogICAgICB0aGlzLmNvbnRleHQucmVzdG9yZSgpOwogICAgICByZXR1cm4gc3VwZXIucmVuZGVyKGltYWdlLCBtYXNrKTsKICAgIH0KICB9CgogIGNsYXNzIENhbnZhczJkQmx1clNpbGhvdWV0dGVSZW5kZXJlciBleHRlbmRzIENhbnZhczJkUmVuZGVyZXIgewogICAgY29uc3RydWN0b3IocmFkaXVzKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzOwogICAgfQogICAgYXN5bmMgcmVuZGVyKGltYWdlLCBtYXNrKSB7CiAgICAgIHN1cGVyLnJlc2l6ZUNhbnZhcyhpbWFnZSk7CiAgICAgIHRoaXMucmVuZGVyU2lsaG91ZXR0ZShpbWFnZSwgbWFzaywgYGJsdXIoJHt0aGlzLnJhZGl1c31weClgKTsKICAgICAgdGhpcy5jb250ZXh0LnNhdmUoKTsKICAgICAgdGhpcy5jb250ZXh0LmZpbHRlciA9ICJub25lIjsKICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJkZXN0aW5hdGlvbi1vdmVyIjsKICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCk7CiAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7CiAgICAgIHJldHVybiBzdXBlci5yZW5kZXIoaW1hZ2UsIG1hc2spOwogICAgfQogIH0KCiAgY2xhc3MgQ2FudmFzMmRJbWFnZUJhY2tncm91bmRSZW5kZXJlciBleHRlbmRzIENhbnZhczJkUmVuZGVyZXIgewogICAgc2V0QmFja2dyb3VuZEltYWdlKGltYWdlKSB7CiAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlID0gaW1hZ2U7CiAgICB9CiAgICBhc3luYyByZW5kZXIoaW1hZ2UsIG1hc2spIHsKICAgICAgc3VwZXIucmVzaXplQ2FudmFzKGltYWdlKTsKICAgICAgdGhpcy5yZW5kZXJTaWxob3VldHRlKGltYWdlLCBtYXNrKTsKICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZEltYWdlKSB7CiAgICAgICAgdGhpcy5jb250ZXh0LnNhdmUoKTsKICAgICAgICB0aGlzLmNvbnRleHQuZmlsdGVyID0gYG5vbmVgOwogICAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAiZGVzdGluYXRpb24tb3ZlciI7CiAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSgKICAgICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlLAogICAgICAgICAgMCwKICAgICAgICAgIDAsCiAgICAgICAgICB0aGlzLmJhY2tncm91bmRJbWFnZS53aWR0aCwKICAgICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlLmhlaWdodCwKICAgICAgICAgIDAsCiAgICAgICAgICAwLAogICAgICAgICAgaW1hZ2Uud2lkdGgsCiAgICAgICAgICBpbWFnZS5oZWlnaHQKICAgICAgICApOwogICAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN1cGVyLnJlbmRlcihpbWFnZSwgbWFzayk7CiAgICB9CiAgfQoKICAvKiBAbGljZW5zZSB0d2dsLmpzIDUuNS4xIENvcHlyaWdodCAoYykgMjAxNSwgR3JlZ2cgVGF2YXJlcyBBbGwgUmlnaHRzIFJlc2VydmVkLgogIEF2YWlsYWJsZSB2aWEgdGhlIE1JVCBsaWNlbnNlLgogIHNlZTogaHR0cDovL2dpdGh1Yi5jb20vZ3JlZ2dtYW4vdHdnbC5qcyBmb3IgZGV0YWlscyAqLwogIC8qCiAgICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlcwogICAqCiAgICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAogICAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KICAgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKICAgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKICAgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAqCiAgICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICAgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgKgogICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCiAgICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwogICAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKICAgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAgICovCgoKICAvKgogICAqIENvcHlyaWdodCAyMDE5IEdyZWdnIFRhdmFyZXMKICAgKgogICAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCiAgICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwKICAgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCiAgICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsCiAgICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlCiAgICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKICAgKgogICAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCiAgICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCiAgICoKICAgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgogICAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAogICAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTAogICAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiAgICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcKICAgKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSCiAgICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgogICAqLwoKICAvKiBEYXRhVHlwZSAqLwogIGNvbnN0IEJZVEUkMiAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAwOwogIGNvbnN0IFVOU0lHTkVEX0JZVEUkMyAgICAgICAgICAgICAgICAgID0gMHgxNDAxOwogIGNvbnN0IFNIT1JUJDIgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAyOwogIGNvbnN0IFVOU0lHTkVEX1NIT1JUJDMgICAgICAgICAgICAgICAgID0gMHgxNDAzOwogIGNvbnN0IElOVCQzICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA0OwogIGNvbnN0IFVOU0lHTkVEX0lOVCQzICAgICAgICAgICAgICAgICAgID0gMHgxNDA1OwogIGNvbnN0IEZMT0FUJDMgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA2OwogIGNvbnN0IFVOU0lHTkVEX1NIT1JUXzRfNF80XzQkMSAgICAgICA9IDB4ODAzMzsKICBjb25zdCBVTlNJR05FRF9TSE9SVF81XzVfNV8xJDEgICAgICAgPSAweDgwMzQ7CiAgY29uc3QgVU5TSUdORURfU0hPUlRfNV82XzUkMSAgICAgICAgID0gMHg4MzYzOwogIGNvbnN0IEhBTEZfRkxPQVQkMSAgICAgICAgICAgICAgICAgICA9IDB4MTQwQjsKICBjb25zdCBVTlNJR05FRF9JTlRfMl8xMF8xMF8xMF9SRVYkMSAgPSAweDgzNjg7CiAgY29uc3QgVU5TSUdORURfSU5UXzEwRl8xMUZfMTFGX1JFViQxID0gMHg4QzNCOwogIGNvbnN0IFVOU0lHTkVEX0lOVF81XzlfOV85X1JFViQxICAgICA9IDB4OEMzRTsKICBjb25zdCBGTE9BVF8zMl9VTlNJR05FRF9JTlRfMjRfOF9SRVYkMSA9IDB4OERBRDsKICBjb25zdCBVTlNJR05FRF9JTlRfMjRfOCQxICAgICAgICAgICAgPSAweDg0RkE7CgogIGNvbnN0IGdsVHlwZVRvVHlwZWRBcnJheSA9IHt9OwogIHsKICAgIGNvbnN0IHR0ID0gZ2xUeXBlVG9UeXBlZEFycmF5OwogICAgdHRbQllURSQyXSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gSW50OEFycmF5OwogICAgdHRbVU5TSUdORURfQllURSQzXSAgICAgICAgICAgICAgICAgID0gVWludDhBcnJheTsKICAgIHR0W1NIT1JUJDJdICAgICAgICAgICAgICAgICAgICAgICAgICA9IEludDE2QXJyYXk7CiAgICB0dFtVTlNJR05FRF9TSE9SVCQzXSAgICAgICAgICAgICAgICAgPSBVaW50MTZBcnJheTsKICAgIHR0W0lOVCQzXSAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEludDMyQXJyYXk7CiAgICB0dFtVTlNJR05FRF9JTlQkM10gICAgICAgICAgICAgICAgICAgPSBVaW50MzJBcnJheTsKICAgIHR0W0ZMT0FUJDNdICAgICAgICAgICAgICAgICAgICAgICAgICA9IEZsb2F0MzJBcnJheTsKICAgIHR0W1VOU0lHTkVEX1NIT1JUXzRfNF80XzQkMV0gICAgICAgICA9IFVpbnQxNkFycmF5OwogICAgdHRbVU5TSUdORURfU0hPUlRfNV81XzVfMSQxXSAgICAgICAgID0gVWludDE2QXJyYXk7CiAgICB0dFtVTlNJR05FRF9TSE9SVF81XzZfNSQxXSAgICAgICAgICAgPSBVaW50MTZBcnJheTsKICAgIHR0W0hBTEZfRkxPQVQkMV0gICAgICAgICAgICAgICAgICAgICA9IFVpbnQxNkFycmF5OwogICAgdHRbVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWJDFdICAgID0gVWludDMyQXJyYXk7CiAgICB0dFtVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWJDFdICAgPSBVaW50MzJBcnJheTsKICAgIHR0W1VOU0lHTkVEX0lOVF81XzlfOV85X1JFViQxXSAgICAgICA9IFVpbnQzMkFycmF5OwogICAgdHRbRkxPQVRfMzJfVU5TSUdORURfSU5UXzI0XzhfUkVWJDFdID0gVWludDMyQXJyYXk7CiAgICB0dFtVTlNJR05FRF9JTlRfMjRfOCQxXSAgICAgICAgICAgICAgPSBVaW50MzJBcnJheTsKICB9CgogIC8qKgogICAqIEdldCB0aGUgR0wgdHlwZSBmb3IgYSB0eXBlZEFycmF5CiAgICogQHBhcmFtIHtBcnJheUJ1ZmZlclZpZXd9IHR5cGVkQXJyYXkgYSB0eXBlZEFycmF5CiAgICogQHJldHVybiB7bnVtYmVyfSB0aGUgR0wgdHlwZSBmb3IgYXJyYXkuIEZvciBleGFtcGxlIHBhc3MgaW4gYW4gYEludDhBcnJheWAgYW5kIGBnbC5CWVRFYCB3aWxsCiAgICogICBiZSByZXR1cm5lZC4gUGFzcyBpbiBhIGBVaW50MzJBcnJheWAgYW5kIGBnbC5VTlNJR05FRF9JTlRgIHdpbGwgYmUgcmV0dXJuZWQKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdHlwZWRBcnJheQogICAqLwogIGZ1bmN0aW9uIGdldEdMVHlwZUZvclR5cGVkQXJyYXkodHlwZWRBcnJheSkgewogICAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBJbnQ4QXJyYXkpICAgICAgICAgeyByZXR1cm4gQllURSQyOyB9ICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpICAgICAgICB7IHJldHVybiBVTlNJR05FRF9CWVRFJDM7IH0gIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGlmICh0eXBlZEFycmF5IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkpIHsgcmV0dXJuIFVOU0lHTkVEX0JZVEUkMzsgfSAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBJbnQxNkFycmF5KSAgICAgICAgeyByZXR1cm4gU0hPUlQkMjsgfSAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheSBpbnN0YW5jZW9mIFVpbnQxNkFycmF5KSAgICAgICB7IHJldHVybiBVTlNJR05FRF9TSE9SVCQzOyB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGlmICh0eXBlZEFycmF5IGluc3RhbmNlb2YgSW50MzJBcnJheSkgICAgICAgIHsgcmV0dXJuIElOVCQzOyB9ICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBVaW50MzJBcnJheSkgICAgICAgeyByZXR1cm4gVU5TSUdORURfSU5UJDM7IH0gICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkgICAgICB7IHJldHVybiBGTE9BVCQzOyB9ICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgdHlwZWQgYXJyYXkgdHlwZScpOwogIH0KCiAgLyoqCiAgICogR2V0IHRoZSBHTCB0eXBlIGZvciBhIHR5cGVkQXJyYXkgdHlwZQogICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJWaWV3fSB0eXBlZEFycmF5VHlwZSBhIHR5cGVkQXJyYXkgY29uc3RydWN0b3IKICAgKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBHTCB0eXBlIGZvciB0eXBlLiBGb3IgZXhhbXBsZSBwYXNzIGluIGBJbnQ4QXJyYXlgIGFuZCBgZ2wuQllURWAgd2lsbAogICAqICAgYmUgcmV0dXJuZWQuIFBhc3MgaW4gYFVpbnQzMkFycmF5YCBhbmQgYGdsLlVOU0lHTkVEX0lOVGAgd2lsbCBiZSByZXR1cm5lZAogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90eXBlZEFycmF5CiAgICovCiAgZnVuY3Rpb24gZ2V0R0xUeXBlRm9yVHlwZWRBcnJheVR5cGUodHlwZWRBcnJheVR5cGUpIHsKICAgIGlmICh0eXBlZEFycmF5VHlwZSA9PT0gSW50OEFycmF5KSAgICAgICAgIHsgcmV0dXJuIEJZVEUkMjsgfSAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBVaW50OEFycmF5KSAgICAgICAgeyByZXR1cm4gVU5TSUdORURfQllURSQzOyB9ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheVR5cGUgPT09IFVpbnQ4Q2xhbXBlZEFycmF5KSB7IHJldHVybiBVTlNJR05FRF9CWVRFJDM7IH0gIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGlmICh0eXBlZEFycmF5VHlwZSA9PT0gSW50MTZBcnJheSkgICAgICAgIHsgcmV0dXJuIFNIT1JUJDI7IH0gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBVaW50MTZBcnJheSkgICAgICAgeyByZXR1cm4gVU5TSUdORURfU0hPUlQkMzsgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheVR5cGUgPT09IEludDMyQXJyYXkpICAgICAgICB7IHJldHVybiBJTlQkMzsgfSAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGlmICh0eXBlZEFycmF5VHlwZSA9PT0gVWludDMyQXJyYXkpICAgICAgIHsgcmV0dXJuIFVOU0lHTkVEX0lOVCQzOyB9ICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBGbG9hdDMyQXJyYXkpICAgICAgeyByZXR1cm4gRkxPQVQkMzsgfSAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIHR5cGVkIGFycmF5IHR5cGUnKTsKICB9CgogIC8qKgogICAqIEdldCB0aGUgdHlwZWQgYXJyYXkgY29uc3RydWN0b3IgZm9yIGEgZ2l2ZW4gR0wgdHlwZQogICAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlIHRoZSBHTCB0eXBlLiAoZWc6IGBnbC5VTlNJR05FRF9JTlRgKQogICAqIEByZXR1cm4ge2Z1bmN0aW9ufSB0aGUgY29uc3RydWN0b3IgZm9yIGEgdGhlIGNvcnJlc3BvbmRpbmcgdHlwZWQgYXJyYXkuIChlZy4gYFVpbnQzMkFycmF5YCkuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3R5cGVkQXJyYXkKICAgKi8KICBmdW5jdGlvbiBnZXRUeXBlZEFycmF5VHlwZUZvckdMVHlwZSh0eXBlKSB7CiAgICBjb25zdCBDVE9SID0gZ2xUeXBlVG9UeXBlZEFycmF5W3R5cGVdOwogICAgaWYgKCFDVE9SKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBnbCB0eXBlJyk7CiAgICB9CiAgICByZXR1cm4gQ1RPUjsKICB9CgogIGNvbnN0IGlzQXJyYXlCdWZmZXIkMSA9IHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcKICAgID8gZnVuY3Rpb24gaXNBcnJheUJ1ZmZlck9yU2hhcmVkQXJyYXlCdWZmZXIoYSkgewogICAgICByZXR1cm4gYSAmJiBhLmJ1ZmZlciAmJiAoYS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBhLmJ1ZmZlciBpbnN0YW5jZW9mIFNoYXJlZEFycmF5QnVmZmVyKTsKICAgIH0KICAgIDogZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcihhKSB7CiAgICAgIHJldHVybiBhICYmIGEuYnVmZmVyICYmIGEuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7CiAgICB9OwoKICBmdW5jdGlvbiBlcnJvciQxKC4uLmFyZ3MpIHsKICAgIGNvbnNvbGUuZXJyb3IoLi4uYXJncyk7CiAgfQoKICBjb25zdCBpc1R5cGVXZWFrTWFwcyA9IG5ldyBNYXAoKTsKCiAgZnVuY3Rpb24gaXNUeXBlKG9iamVjdCwgdHlwZSkgewogICAgaWYgKCFvYmplY3QgfHwgdHlwZW9mIG9iamVjdCAhPT0gJ29iamVjdCcpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgbGV0IHdlYWtNYXAgPSBpc1R5cGVXZWFrTWFwcy5nZXQodHlwZSk7CiAgICBpZiAoIXdlYWtNYXApIHsKICAgICAgd2Vha01hcCA9IG5ldyBXZWFrTWFwKCk7CiAgICAgIGlzVHlwZVdlYWtNYXBzLnNldCh0eXBlLCB3ZWFrTWFwKTsKICAgIH0KICAgIGxldCBpc09mVHlwZSA9IHdlYWtNYXAuZ2V0KG9iamVjdCk7CiAgICBpZiAoaXNPZlR5cGUgPT09IHVuZGVmaW5lZCkgewogICAgICBjb25zdCBzID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCk7CiAgICAgIGlzT2ZUeXBlID0gcy5zdWJzdHJpbmcoOCwgcy5sZW5ndGggLSAxKSA9PT0gdHlwZTsKICAgICAgd2Vha01hcC5zZXQob2JqZWN0LCBpc09mVHlwZSk7CiAgICB9CiAgICByZXR1cm4gaXNPZlR5cGU7CiAgfQoKICBmdW5jdGlvbiBpc0J1ZmZlcihnbCwgdCkgewogICAgcmV0dXJuIHR5cGVvZiBXZWJHTEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNUeXBlKHQsICdXZWJHTEJ1ZmZlcicpOwogIH0KCiAgZnVuY3Rpb24gaXNSZW5kZXJidWZmZXIoZ2wsIHQpIHsKICAgIHJldHVybiB0eXBlb2YgV2ViR0xSZW5kZXJidWZmZXIgIT09ICd1bmRlZmluZWQnICYmIGlzVHlwZSh0LCAnV2ViR0xSZW5kZXJidWZmZXInKTsKICB9CgogIGZ1bmN0aW9uIGlzVGV4dHVyZShnbCwgdCkgewogICAgcmV0dXJuIHR5cGVvZiBXZWJHTFRleHR1cmUgIT09ICd1bmRlZmluZWQnICYmIGlzVHlwZSh0LCAnV2ViR0xUZXh0dXJlJyk7CiAgfQoKICBmdW5jdGlvbiBpc1NhbXBsZXIoZ2wsIHQpIHsKICAgIHJldHVybiB0eXBlb2YgV2ViR0xTYW1wbGVyICE9PSAndW5kZWZpbmVkJyAmJiBpc1R5cGUodCwgJ1dlYkdMU2FtcGxlcicpOwogIH0KCiAgLyoKICAgKiBDb3B5cmlnaHQgMjAxOSBHcmVnZyBUYXZhcmVzCiAgICoKICAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQogICAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCiAgICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgogICAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAogICAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQogICAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CiAgICoKICAgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogICAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgogICAqCiAgICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICAgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKICAgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKICAgKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgogICAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCiAgICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUgogICAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KICAgKi8KCiAgY29uc3QgU1RBVElDX0RSQVcgICAgICAgICAgICAgICAgICA9IDB4ODhlNDsKICBjb25zdCBBUlJBWV9CVUZGRVIkMSAgICAgICAgICAgICAgICAgPSAweDg4OTI7CiAgY29uc3QgRUxFTUVOVF9BUlJBWV9CVUZGRVIkMiAgICAgICAgID0gMHg4ODkzOwogIGNvbnN0IEJVRkZFUl9TSVpFICAgICAgICAgICAgICAgICAgPSAweDg3NjQ7CgogIGNvbnN0IEJZVEUkMSAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwMDsKICBjb25zdCBVTlNJR05FRF9CWVRFJDIgICAgICAgICAgICAgICAgPSAweDE0MDE7CiAgY29uc3QgU0hPUlQkMSAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAyOwogIGNvbnN0IFVOU0lHTkVEX1NIT1JUJDIgICAgICAgICAgICAgICA9IDB4MTQwMzsKICBjb25zdCBJTlQkMiAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDQ7CiAgY29uc3QgVU5TSUdORURfSU5UJDIgICAgICAgICAgICAgICAgID0gMHgxNDA1OwogIGNvbnN0IEZMT0FUJDIgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwNjsKICBjb25zdCBkZWZhdWx0cyQyID0gewogICAgYXR0cmliUHJlZml4OiAiIiwKICB9OwoKICBmdW5jdGlvbiBzZXRCdWZmZXJGcm9tVHlwZWRBcnJheShnbCwgdHlwZSwgYnVmZmVyLCBhcnJheSwgZHJhd1R5cGUpIHsKICAgIGdsLmJpbmRCdWZmZXIodHlwZSwgYnVmZmVyKTsKICAgIGdsLmJ1ZmZlckRhdGEodHlwZSwgYXJyYXksIGRyYXdUeXBlIHx8IFNUQVRJQ19EUkFXKTsKICB9CgogIC8qKgogICAqIEdpdmVuIHR5cGVkIGFycmF5IGNyZWF0ZXMgYSBXZWJHTEJ1ZmZlciBhbmQgY29waWVzIHRoZSB0eXBlZCBhcnJheQogICAqIGludG8gaXQuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfFNoYXJlZEFycmF5QnVmZmVyfEFycmF5QnVmZmVyVmlld3xXZWJHTEJ1ZmZlcn0gdHlwZWRBcnJheSB0aGUgdHlwZWQgYXJyYXkuIE5vdGU6IElmIGEgV2ViR0xCdWZmZXIgaXMgcGFzc2VkIGluIGl0IHdpbGwganVzdCBiZSByZXR1cm5lZC4gTm8gYWN0aW9uIHdpbGwgYmUgdGFrZW4KICAgKiBAcGFyYW0ge251bWJlcn0gW3R5cGVdIHRoZSBHTCBiaW5kIHR5cGUgZm9yIHRoZSBidWZmZXIuIERlZmF1bHQgPSBgZ2wuQVJSQVlfQlVGRkVSYC4KICAgKiBAcGFyYW0ge251bWJlcn0gW2RyYXdUeXBlXSB0aGUgR0wgZHJhdyB0eXBlIGZvciB0aGUgYnVmZmVyLiBEZWZhdWx0ID0gJ2dsLlNUQVRJQ19EUkFXYC4KICAgKiBAcmV0dXJuIHtXZWJHTEJ1ZmZlcn0gdGhlIGNyZWF0ZWQgV2ViR0xCdWZmZXIKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvYXR0cmlidXRlcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlckZyb21UeXBlZEFycmF5KGdsLCB0eXBlZEFycmF5LCB0eXBlLCBkcmF3VHlwZSkgewogICAgaWYgKGlzQnVmZmVyKGdsLCB0eXBlZEFycmF5KSkgewogICAgICByZXR1cm4gdHlwZWRBcnJheTsKICAgIH0KICAgIHR5cGUgPSB0eXBlIHx8IEFSUkFZX0JVRkZFUiQxOwogICAgY29uc3QgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7CiAgICBzZXRCdWZmZXJGcm9tVHlwZWRBcnJheShnbCwgdHlwZSwgYnVmZmVyLCB0eXBlZEFycmF5LCBkcmF3VHlwZSk7CiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgZnVuY3Rpb24gaXNJbmRpY2VzKG5hbWUpIHsKICAgIHJldHVybiBuYW1lID09PSAiaW5kaWNlcyI7CiAgfQoKICAvLyBUaGlzIGlzIHJlYWxseSBqdXN0IGEgZ3Vlc3MuIFRob3VnaCBJIGNhbid0IHJlYWxseSBpbWFnaW5lIHVzaW5nCiAgLy8gYW55dGhpbmcgZWxzZT8gTWF5YmUgZm9yIHNvbWUgY29tcHJlc3Npb24/CiAgZnVuY3Rpb24gZ2V0Tm9ybWFsaXphdGlvbkZvclR5cGVkQXJyYXlUeXBlKHR5cGVkQXJyYXlUeXBlKSB7CiAgICBpZiAodHlwZWRBcnJheVR5cGUgPT09IEludDhBcnJheSkgICAgeyByZXR1cm4gdHJ1ZTsgfSAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBVaW50OEFycmF5KSAgIHsgcmV0dXJuIHRydWU7IH0gIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGdldEFycmF5JDEoYXJyYXkpIHsKICAgIHJldHVybiBhcnJheS5sZW5ndGggPyBhcnJheSA6IGFycmF5LmRhdGE7CiAgfQoKICBjb25zdCB0ZXhjb29yZFJFID0gL2Nvb3JkfHRleHR1cmUvaTsKICBjb25zdCBjb2xvclJFID0gL2NvbG9yfGNvbG91ci9pOwoKICBmdW5jdGlvbiBndWVzc051bUNvbXBvbmVudHNGcm9tTmFtZShuYW1lLCBsZW5ndGgpIHsKICAgIGxldCBudW1Db21wb25lbnRzOwogICAgaWYgKHRleGNvb3JkUkUudGVzdChuYW1lKSkgewogICAgICBudW1Db21wb25lbnRzID0gMjsKICAgIH0gZWxzZSBpZiAoY29sb3JSRS50ZXN0KG5hbWUpKSB7CiAgICAgIG51bUNvbXBvbmVudHMgPSA0OwogICAgfSBlbHNlIHsKICAgICAgbnVtQ29tcG9uZW50cyA9IDM7ICAvLyBwb3NpdGlvbiwgbm9ybWFscywgaW5kaWNlcyAuLi4KICAgIH0KCiAgICBpZiAobGVuZ3RoICUgbnVtQ29tcG9uZW50cyA+IDApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGd1ZXNzIG51bUNvbXBvbmVudHMgZm9yIGF0dHJpYnV0ZSAnJHtuYW1lfScuIFRyaWVkICR7bnVtQ29tcG9uZW50c30gYnV0ICR7bGVuZ3RofSB2YWx1ZXMgaXMgbm90IGV2ZW5seSBkaXZpc2libGUgYnkgJHtudW1Db21wb25lbnRzfS4gWW91IHNob3VsZCBzcGVjaWZ5IGl0LmApOwogICAgfQoKICAgIHJldHVybiBudW1Db21wb25lbnRzOwogIH0KCiAgZnVuY3Rpb24gZ2V0TnVtQ29tcG9uZW50cyQxKGFycmF5LCBhcnJheU5hbWUsIG51bVZhbHVlcykgewogICAgcmV0dXJuIGFycmF5Lm51bUNvbXBvbmVudHMgfHwgYXJyYXkuc2l6ZSB8fCBndWVzc051bUNvbXBvbmVudHNGcm9tTmFtZShhcnJheU5hbWUsIG51bVZhbHVlcyB8fCBnZXRBcnJheSQxKGFycmF5KS5sZW5ndGgpOwogIH0KCiAgZnVuY3Rpb24gbWFrZVR5cGVkQXJyYXkoYXJyYXksIG5hbWUpIHsKICAgIGlmIChpc0FycmF5QnVmZmVyJDEoYXJyYXkpKSB7CiAgICAgIHJldHVybiBhcnJheTsKICAgIH0KCiAgICBpZiAoaXNBcnJheUJ1ZmZlciQxKGFycmF5LmRhdGEpKSB7CiAgICAgIHJldHVybiBhcnJheS5kYXRhOwogICAgfQoKICAgIGlmIChBcnJheS5pc0FycmF5KGFycmF5KSkgewogICAgICBhcnJheSA9IHsKICAgICAgICBkYXRhOiBhcnJheSwKICAgICAgfTsKICAgIH0KCiAgICBsZXQgVHlwZSA9IGFycmF5LnR5cGUgPyB0eXBlZEFycmF5VHlwZUZyb21HTFR5cGVPclR5cGVkQXJyYXlDdG9yKGFycmF5LnR5cGUpIDogdW5kZWZpbmVkOwogICAgaWYgKCFUeXBlKSB7CiAgICAgIGlmIChpc0luZGljZXMobmFtZSkpIHsKICAgICAgICBUeXBlID0gVWludDE2QXJyYXk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgVHlwZSA9IEZsb2F0MzJBcnJheTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBUeXBlKGFycmF5LmRhdGEpOwogIH0KCiAgZnVuY3Rpb24gZ2xUeXBlRnJvbUdMVHlwZU9yVHlwZWRBcnJheVR5cGUoZ2xUeXBlT3JUeXBlZEFycmF5Q3RvcikgewogICAgcmV0dXJuIHR5cGVvZiBnbFR5cGVPclR5cGVkQXJyYXlDdG9yID09PSAnbnVtYmVyJwogICAgICAgID8gZ2xUeXBlT3JUeXBlZEFycmF5Q3RvcgogICAgICAgIDogZ2xUeXBlT3JUeXBlZEFycmF5Q3RvciA/IGdldEdMVHlwZUZvclR5cGVkQXJyYXlUeXBlKGdsVHlwZU9yVHlwZWRBcnJheUN0b3IpIDogRkxPQVQkMjsKICB9CgogIGZ1bmN0aW9uIHR5cGVkQXJyYXlUeXBlRnJvbUdMVHlwZU9yVHlwZWRBcnJheUN0b3IoZ2xUeXBlT3JUeXBlZEFycmF5Q3RvcikgewogICAgcmV0dXJuIHR5cGVvZiBnbFR5cGVPclR5cGVkQXJyYXlDdG9yID09PSAnbnVtYmVyJwogICAgICAgID8gZ2V0VHlwZWRBcnJheVR5cGVGb3JHTFR5cGUoZ2xUeXBlT3JUeXBlZEFycmF5Q3RvcikKICAgICAgICA6IGdsVHlwZU9yVHlwZWRBcnJheUN0b3IgfHwgRmxvYXQzMkFycmF5OwogIH0KCiAgZnVuY3Rpb24gYXR0cmliQnVmZmVyRnJvbUJ1ZmZlcihnbCwgYXJyYXkvKiwgYXJyYXlOYW1lICovKSB7CiAgICByZXR1cm4gewogICAgICBidWZmZXI6IGFycmF5LmJ1ZmZlciwKICAgICAgbnVtVmFsdWVzOiAyICogMyAqIDQsICAvLyBzYWZlbHkgZGl2aWRlZCBieSAyLCAzLCA0CiAgICAgIHR5cGU6IGdsVHlwZUZyb21HTFR5cGVPclR5cGVkQXJyYXlUeXBlKGFycmF5LnR5cGUpLAogICAgICBhcnJheVR5cGU6IHR5cGVkQXJyYXlUeXBlRnJvbUdMVHlwZU9yVHlwZWRBcnJheUN0b3IoYXJyYXkudHlwZSksCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gYXR0cmliQnVmZmVyRnJvbVNpemUoZ2wsIGFycmF5LyosIGFycmF5TmFtZSovKSB7CiAgICBjb25zdCBudW1WYWx1ZXMgPSBhcnJheS5kYXRhIHx8IGFycmF5OwogICAgY29uc3QgYXJyYXlUeXBlID0gdHlwZWRBcnJheVR5cGVGcm9tR0xUeXBlT3JUeXBlZEFycmF5Q3RvcihhcnJheS50eXBlKTsKICAgIGNvbnN0IG51bUJ5dGVzID0gbnVtVmFsdWVzICogYXJyYXlUeXBlLkJZVEVTX1BFUl9FTEVNRU5UOwogICAgY29uc3QgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7CiAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiQxLCBidWZmZXIpOwogICAgZ2wuYnVmZmVyRGF0YShBUlJBWV9CVUZGRVIkMSwgbnVtQnl0ZXMsIGFycmF5LmRyYXdUeXBlIHx8IFNUQVRJQ19EUkFXKTsKICAgIHJldHVybiB7CiAgICAgIGJ1ZmZlciwKICAgICAgbnVtVmFsdWVzLAogICAgICB0eXBlOiBnZXRHTFR5cGVGb3JUeXBlZEFycmF5VHlwZShhcnJheVR5cGUpLAogICAgICBhcnJheVR5cGUsCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gYXR0cmliQnVmZmVyRnJvbUFycmF5TGlrZShnbCwgYXJyYXksIGFycmF5TmFtZSkgewogICAgY29uc3QgdHlwZWRBcnJheSA9IG1ha2VUeXBlZEFycmF5KGFycmF5LCBhcnJheU5hbWUpOwogICAgcmV0dXJuIHsKICAgICAgYXJyYXlUeXBlOiB0eXBlZEFycmF5LmNvbnN0cnVjdG9yLAogICAgICBidWZmZXI6IGNyZWF0ZUJ1ZmZlckZyb21UeXBlZEFycmF5KGdsLCB0eXBlZEFycmF5LCB1bmRlZmluZWQsIGFycmF5LmRyYXdUeXBlKSwKICAgICAgdHlwZTogZ2V0R0xUeXBlRm9yVHlwZWRBcnJheSh0eXBlZEFycmF5KSwKICAgICAgbnVtVmFsdWVzOiAwLAogICAgfTsKICB9CgogIC8qKgogICAqIFRoZSBpbmZvIGZvciBhbiBhdHRyaWJ1dGUuIFRoaXMgaXMgZWZmZWN0aXZlbHkganVzdCB0aGUgYXJndW1lbnRzIHRvIGBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyYCBwbHVzIHRoZSBXZWJHTEJ1ZmZlcgogICAqIGZvciB0aGUgYXR0cmlidXRlLgogICAqCiAgICogQHR5cGVkZWYge09iamVjdH0gQXR0cmliSW5mbwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyW118QXJyYXlCdWZmZXJWaWV3fSBbdmFsdWVdIGEgY29uc3RhbnQgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGUuIE5vdGU6IGlmIHRoaXMgaXMgc2V0IHRoZSBhdHRyaWJ1dGUgd2lsbCBiZQogICAqICAgIGRpc2FibGVkIGFuZCBzZXQgdG8gdGhpcyBjb25zdGFudCB2YWx1ZSBhbmQgYWxsIG90aGVyIHZhbHVlcyB3aWxsIGJlIGlnbm9yZWQuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtudW1Db21wb25lbnRzXSB0aGUgbnVtYmVyIG9mIGNvbXBvbmVudHMgZm9yIHRoaXMgYXR0cmlidXRlLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc2l6ZV0gc3lub255bSBmb3IgYG51bUNvbXBvbmVudHNgLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHlwZV0gdGhlIHR5cGUgb2YgdGhlIGF0dHJpYnV0ZSAoZWcuIGBnbC5GTE9BVGAsIGBnbC5VTlNJR05FRF9CWVRFYCwgZXRjLi4uKSBEZWZhdWx0ID0gYGdsLkZMT0FUYAogICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW25vcm1hbGl6ZV0gd2hldGhlciBvciBub3QgdG8gbm9ybWFsaXplIHRoZSBkYXRhLiBEZWZhdWx0ID0gZmFsc2UKICAgKiBAcHJvcGVydHkge251bWJlcn0gW29mZnNldF0gb2Zmc2V0IGludG8gYnVmZmVyIGluIGJ5dGVzLiBEZWZhdWx0ID0gMAogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc3RyaWRlXSB0aGUgc3RyaWRlIGluIGJ5dGVzIHBlciBlbGVtZW50LiBEZWZhdWx0ID0gMAogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGl2aXNvcl0gdGhlIGRpdmlzb3IgaW4gaW5zdGFuY2VzLiBEZWZhdWx0ID0gMC4KICAgKiAgICBSZXF1aXJlcyBXZWJHTDIgb3IgdGhlIEFOR0xFX2luc3RhbmNlZF9hcnJheXMgZXh0ZW5zaW9uLgogICAqICAgIGFuZCwgaWYgeW91J3JlIHVzaW5nIFdlYkdMMSB5b3UgbXVzdCBoYXZlIGNhbGxlZCB7QGxpbmsgbW9kdWxlOnR3Z2wuYWRkRXh0ZW5zaW9uc1RvQ29udGV4dH0KICAgKiBAcHJvcGVydHkge1dlYkdMQnVmZmVyfSBidWZmZXIgdGhlIGJ1ZmZlciB0aGF0IGNvbnRhaW5zIHRoZSBkYXRhIGZvciB0aGlzIGF0dHJpYnV0ZQogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHJhd1R5cGVdIHRoZSBkcmF3IHR5cGUgcGFzc2VkIHRvIGdsLmJ1ZmZlckRhdGEuIERlZmF1bHQgPSBnbC5TVEFUSUNfRFJBVwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBAdHlwZWRlZiB7KEludDhBcnJheUNvbnN0cnVjdG9yfFVpbnQ4QXJyYXlDb25zdHJ1Y3RvcnxJbnQxNkFycmF5Q29uc3RydWN0b3J8VWludDE2QXJyYXlDb25zdHJ1Y3RvcnxJbnQzMkFycmF5Q29uc3RydWN0b3J8VWludDMyQXJyYXlDb25zdHJ1Y3RvcnxGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcil9IFR5cGVkQXJyYXlDb25zdHJ1Y3RvcgogICAqLwoKICAvKioKICAgKiBVc2UgdGhpcyB0eXBlIG9mIGFycmF5IHNwZWMgd2hlbiBUV0dMIGNhbid0IGd1ZXNzIHRoZSB0eXBlIG9yIG51bWJlciBvZiBjb21wb25lbnRzIG9mIGFuIGFycmF5CiAgICogQHR5cGVkZWYge09iamVjdH0gRnVsbEFycmF5U3BlYwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyW118QXJyYXlCdWZmZXJWaWV3fSBbdmFsdWVdIGEgY29uc3RhbnQgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGUuIE5vdGU6IGlmIHRoaXMgaXMgc2V0IHRoZSBhdHRyaWJ1dGUgd2lsbCBiZQogICAqICAgIGRpc2FibGVkIGFuZCBzZXQgdG8gdGhpcyBjb25zdGFudCB2YWx1ZSBhbmQgYWxsIG90aGVyIHZhbHVlcyB3aWxsIGJlIGlnbm9yZWQuCiAgICogQHByb3BlcnR5IHsobnVtYmVyfG51bWJlcltdfEFycmF5QnVmZmVyVmlldyl9IFtkYXRhXSBUaGUgZGF0YSBvZiB0aGUgYXJyYXkuIEEgbnVtYmVyIGFsb25lIGJlY29tZXMgdGhlIG51bWJlciBvZiBlbGVtZW50cyBvZiB0eXBlLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbnVtQ29tcG9uZW50c10gbnVtYmVyIG9mIGNvbXBvbmVudHMgZm9yIGB2ZXJ0ZXhBdHRyaWJQb2ludGVyYC4gRGVmYXVsdCBpcyBiYXNlZCBvbiB0aGUgbmFtZSBvZiB0aGUgYXJyYXkuCiAgICogICAgSWYgYGNvb3JkYCBpcyBpbiB0aGUgbmFtZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gMmAuCiAgICogICAgSWYgYGNvbG9yYCBpcyBpbiB0aGUgbmFtZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gNGAuCiAgICogICAgb3RoZXJ3aXNlIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAzYAogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfFR5cGVkQXJyYXlDb25zdHJ1Y3Rvcn0gW3R5cGVdIHR5cGUuIFRoaXMgaXMgdXNlZCBpZiBgZGF0YWAgaXMgYSBKYXZhU2NyaXB0IGFycmF5LCBvciBgYnVmZmVyYCBpcyBwYXNzZWQgaW4sIG9yIGBkYXRhYCBpcyBhIG51bWJlci4KICAgKiAgIEl0IGNhbiBlaXRoZXIgYmUgdGhlIGNvbnN0cnVjdG9yIGZvciBhIHR5cGVkYXJyYXkuIChlZy4gYFVpbnQ4QXJyYXlgKSBPUiBhIFdlYkdMIHR5cGUsIChlZyBgZ2wuVU5TSUdORURfQllURWApLgogICAqICAgRm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgY29sb3JzIGluIGEgYFVpbnQ4QXJyYXlgIHlvdSBtaWdodCBoYXZlIGEgYEZ1bGxBcnJheVNwZWNgIGxpa2UgYHsgdHlwZTogZ2wuVU5TSUdORURfQllURSwgZGF0YTogWzI1NSwwLDI1NSwyNTUsIC4uLl0sIH1gLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc2l6ZV0gc3lub255bSBmb3IgYG51bUNvbXBvbmVudHNgLgogICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW25vcm1hbGl6ZV0gbm9ybWFsaXplIGZvciBgdmVydGV4QXR0cmliUG9pbnRlcmAuIERlZmF1bHQgaXMgdHJ1ZSBpZiB0eXBlIGlzIGBJbnQ4QXJyYXlgIG9yIGBVaW50OEFycmF5YCBvdGhlcndpc2UgZmFsc2UuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtzdHJpZGVdIHN0cmlkZSBmb3IgYHZlcnRleEF0dHJpYlBvaW50ZXJgLiBEZWZhdWx0ID0gMAogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0XSBvZmZzZXQgZm9yIGB2ZXJ0ZXhBdHRyaWJQb2ludGVyYC4gRGVmYXVsdCA9IDAKICAgKiBAcHJvcGVydHkge251bWJlcn0gW2Rpdmlzb3JdIGRpdmlzb3IgZm9yIGB2ZXJ0ZXhBdHRyaWJEaXZpc29yYC4gRGVmYXVsdCA9IDAuCiAgICogICAgIFJlcXVpcmVzIFdlYkdMMiBvciB0aGUgQU5HTEVfaW5zdGFuY2VkX2FycmF5cyBleHRlbnNpb24uCiAgICogICAgIGFuZCwgaWYgeW91IHVzaW5nIFdlYkdMMSB5b3UgbXVzdCBoYXZlIGNhbGxlZCB7QGxpbmsgbW9kdWxlOnR3Z2wuYWRkRXh0ZW5zaW9uc1RvQ29udGV4dH0KICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2F0dHJpYl0gbmFtZSBvZiBhdHRyaWJ1dGUgdGhpcyBhcnJheSBtYXBzIHRvLiBEZWZhdWx0cyB0byBzYW1lIG5hbWUgYXMgYXJyYXkgcHJlZml4ZWQgYnkgdGhlIGRlZmF1bHQgYXR0cmliUHJlZml4LgogICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbmFtZV0gc3lub255bSBmb3IgYGF0dHJpYmAuCiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthdHRyaWJOYW1lXSBzeW5vbnltIGZvciBgYXR0cmliYC4KICAgKiBAcHJvcGVydHkge1dlYkdMQnVmZmVyfSBbYnVmZmVyXSBCdWZmZXIgdG8gdXNlIGZvciB0aGlzIGF0dHJpYnV0ZS4gVGhpcyBsZXRzIHlvdSB1c2UgeW91ciBvd24gYnVmZmVyCiAgICogICAgYnV0IHlvdSB3aWxsIG5lZWQgdG8gc3VwcGx5IGBudW1Db21wb25lbnRzYCBhbmQgYHR5cGVgLiBZb3UgY2FuIGVmZmVjdGl2ZWx5IHBhc3MgYW4gYEF0dHJpYkluZm9gCiAgICogICAgdG8gcHJvdmlkZSB0aGlzLiBFeGFtcGxlOgogICAqCiAgICogICAgICAgICBjb25zdCBidWZmZXJJbmZvMSA9IHR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXMoZ2wsIHsKICAgKiAgICAgICAgICAgcG9zaXRpb246IFsxLCAyLCAzLCAuLi4gXSwKICAgKiAgICAgICAgIH0pOwogICAqICAgICAgICAgY29uc3QgYnVmZmVySW5mbzIgPSB0d2dsLmNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzKGdsLCB7CiAgICogICAgICAgICAgIHBvc2l0aW9uOiBidWZmZXJJbmZvMS5hdHRyaWJzLnBvc2l0aW9uLCAgLy8gdXNlIHRoZSBzYW1lIGJ1ZmZlciBmcm9tIGJ1ZmZlckluZm8xCiAgICogICAgICAgICB9KTsKICAgKgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHJhd1R5cGVdIHRoZSBkcmF3IHR5cGUgcGFzc2VkIHRvIGdsLmJ1ZmZlckRhdGEuIERlZmF1bHQgPSBnbC5TVEFUSUNfRFJBVwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBBbiBpbmRpdmlkdWFsIGFycmF5IGluIHtAbGluayBtb2R1bGU6dHdnbC5BcnJheXN9CiAgICoKICAgKiBXaGVuIHBhc3NlZCB0byB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXN9IGlmIGFuIEFycmF5U3BlYyBpcyBgbnVtYmVyW11gIG9yIGBBcnJheUJ1ZmZlclZpZXdgCiAgICogdGhlIHR5cGVzIHdpbGwgYmUgZ3Vlc3NlZCBiYXNlZCBvbiB0aGUgbmFtZS4gYGluZGljZXNgIHdpbGwgYmUgYFVpbnQxNkFycmF5YCwgZXZlcnl0aGluZyBlbHNlIHdpbGwKICAgKiBiZSBgRmxvYXQzMkFycmF5YC4gSWYgYW4gQXJyYXlTcGVjIGlzIGEgbnVtYmVyIGl0J3MgdGhlIG51bWJlciBvZiBmbG9hdHMgZm9yIGFuIGVtcHR5ICh6ZXJvZWQpIGJ1ZmZlci4KICAgKgogICAqIEB0eXBlZGVmIHsobnVtYmVyfG51bWJlcltdfEFycmF5QnVmZmVyVmlld3xtb2R1bGU6dHdnbC5GdWxsQXJyYXlTcGVjKX0gQXJyYXlTcGVjCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIFRoaXMgaXMgYSBKYXZhU2NyaXB0IG9iamVjdCBvZiBhcnJheXMgYnkgbmFtZS4gVGhlIG5hbWVzIHNob3VsZCBtYXRjaCB5b3VyIHNoYWRlcidzIGF0dHJpYnV0ZXMuIElmIHlvdXIKICAgKiBhdHRyaWJ1dGVzIGhhdmUgYSBjb21tb24gcHJlZml4IHlvdSBjYW4gc3BlY2lmeSBpdCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6dHdnbC5zZXRBdHRyaWJ1dGVQcmVmaXh9LgogICAqCiAgICogICAgIEJhcmUgSmF2YVNjcmlwdCBBcnJheXMKICAgKgogICAqICAgICAgICAgdmFyIGFycmF5cyA9IHsKICAgKiAgICAgICAgICAgIHBvc2l0aW9uOiBbLTEsIDEsIDBdLAogICAqICAgICAgICAgICAgbm9ybWFsOiBbMCwgMSwgMF0sCiAgICogICAgICAgICAgICAuLi4KICAgKiAgICAgICAgIH0KICAgKgogICAqICAgICBCYXJlIFR5cGVkQXJyYXlzCiAgICoKICAgKiAgICAgICAgIHZhciBhcnJheXMgPSB7CiAgICogICAgICAgICAgICBwb3NpdGlvbjogbmV3IEZsb2F0MzJBcnJheShbLTEsIDEsIDBdKSwKICAgKiAgICAgICAgICAgIGNvbG9yOiBuZXcgVWludDhBcnJheShbMjU1LCAxMjgsIDY0LCAyNTVdKSwKICAgKiAgICAgICAgICAgIC4uLgogICAqICAgICAgICAgfQogICAqCiAgICogKiAgIFdpbGwgZ3Vlc3MgYXQgYG51bUNvbXBvbmVudHNgIGlmIG5vdCBzcGVjaWZpZWQgYmFzZWQgb24gbmFtZS4KICAgKgogICAqICAgICBJZiBgY29vcmRgIGlzIGluIHRoZSBuYW1lIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAyYAogICAqCiAgICogICAgIElmIGBjb2xvcmAgaXMgaW4gdGhlIG5hbWUgYXNzdW1lcyBgbnVtQ29tcG9uZW50cyA9IDRgCiAgICoKICAgKiAgICAgb3RoZXJ3aXNlIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAzYAogICAqCiAgICogT2JqZWN0cyB3aXRoIHZhcmlvdXMgZmllbGRzLiBTZWUge0BsaW5rIG1vZHVsZTp0d2dsLkZ1bGxBcnJheVNwZWN9LgogICAqCiAgICogICAgIHZhciBhcnJheXMgPSB7CiAgICogICAgICAgcG9zaXRpb246IHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMCwgMCwgMTAsIDEwLCAwXSwgfSwKICAgKiAgICAgICB0ZXhjb29yZDogeyBudW1Db21wb25lbnRzOiAyLCBkYXRhOiBbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0sICAgICAgICAgICAgICAgICB9LAogICAqICAgICAgIG5vcm1hbDogICB7IG51bUNvbXBvbmVudHM6IDMsIGRhdGE6IFswLCAwLCAxLCAwLCAwLCAxLCAwLCAwLCAxLCAwLCAwLCAxXSwgICAgIH0sCiAgICogICAgICAgaW5kaWNlczogIHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDEsIDIsIDEsIDIsIDNdLCAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgKiAgICAgfTsKICAgKgogICAqIEB0eXBlZGVmIHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuQXJyYXlTcGVjPn0gQXJyYXlzCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgoKICAvKioKICAgKiBDcmVhdGVzIGEgc2V0IG9mIGF0dHJpYnV0ZSBkYXRhIGFuZCBXZWJHTEJ1ZmZlcnMgZnJvbSBzZXQgb2YgYXJyYXlzCiAgICoKICAgKiBHaXZlbgogICAqCiAgICogICAgICB2YXIgYXJyYXlzID0gewogICAqICAgICAgICBwb3NpdGlvbjogeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdLCB9LAogICAqICAgICAgICB0ZXhjb29yZDogeyBudW1Db21wb25lbnRzOiAyLCBkYXRhOiBbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0sICAgICAgICAgICAgICAgICB9LAogICAqICAgICAgICBub3JtYWw6ICAgeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMV0sICAgICB9LAogICAqICAgICAgICBjb2xvcjogICAgeyBudW1Db21wb25lbnRzOiA0LCBkYXRhOiBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDAsIDAsIDI1NSwgMCwgMCwgMjU1LCAyNTVdLCB0eXBlOiBVaW50OEFycmF5LCB9LAogICAqICAgICAgICBpbmRpY2VzOiAgeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMSwgMiwgMSwgMiwgM10sICAgICAgICAgICAgICAgICAgICAgICB9LAogICAqICAgICAgfTsKICAgKgogICAqIHJldHVybnMgc29tZXRoaW5nIGxpa2UKICAgKgogICAqICAgICAgdmFyIGF0dHJpYnMgPSB7CiAgICogICAgICAgIHBvc2l0aW9uOiB7IG51bUNvbXBvbmVudHM6IDMsIHR5cGU6IGdsLkZMT0FULCAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIH0sCiAgICogICAgICAgIHRleGNvb3JkOiB7IG51bUNvbXBvbmVudHM6IDIsIHR5cGU6IGdsLkZMT0FULCAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIH0sCiAgICogICAgICAgIG5vcm1hbDogICB7IG51bUNvbXBvbmVudHM6IDMsIHR5cGU6IGdsLkZMT0FULCAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIH0sCiAgICogICAgICAgIGNvbG9yOiAgICB7IG51bUNvbXBvbmVudHM6IDQsIHR5cGU6IGdsLlVOU0lHTkVEX0JZVEUsIG5vcm1hbGl6ZTogdHJ1ZSwgIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIH0sCiAgICogICAgICB9OwogICAqCiAgICogbm90ZXM6CiAgICoKICAgKiAqICAgQXJyYXlzIGNhbiB0YWtlIHZhcmlvdXMgZm9ybXMKICAgKgogICAqICAgICBCYXJlIEphdmFTY3JpcHQgQXJyYXlzCiAgICoKICAgKiAgICAgICAgIHZhciBhcnJheXMgPSB7CiAgICogICAgICAgICAgICBwb3NpdGlvbjogWy0xLCAxLCAwXSwKICAgKiAgICAgICAgICAgIG5vcm1hbDogWzAsIDEsIDBdLAogICAqICAgICAgICAgICAgLi4uCiAgICogICAgICAgICB9CiAgICoKICAgKiAgICAgQmFyZSBUeXBlZEFycmF5cwogICAqCiAgICogICAgICAgICB2YXIgYXJyYXlzID0gewogICAqICAgICAgICAgICAgcG9zaXRpb246IG5ldyBGbG9hdDMyQXJyYXkoWy0xLCAxLCAwXSksCiAgICogICAgICAgICAgICBjb2xvcjogbmV3IFVpbnQ4QXJyYXkoWzI1NSwgMTI4LCA2NCwgMjU1XSksCiAgICogICAgICAgICAgICAuLi4KICAgKiAgICAgICAgIH0KICAgKgogICAqICogICBXaWxsIGd1ZXNzIGF0IGBudW1Db21wb25lbnRzYCBpZiBub3Qgc3BlY2lmaWVkIGJhc2VkIG9uIG5hbWUuCiAgICoKICAgKiAgICAgSWYgYGNvb3JkYCBpcyBpbiB0aGUgbmFtZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gMmAKICAgKgogICAqICAgICBJZiBgY29sb3JgIGlzIGluIHRoZSBuYW1lIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSA0YAogICAqCiAgICogICAgIG90aGVyd2lzZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gM2AKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgd2ViZ2wgcmVuZGVyaW5nIGNvbnRleHQuCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5BcnJheXN9IGFycmF5cyBUaGUgYXJyYXlzCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSBbc3JjQnVmZmVySW5mb10gYSBCdWZmZXJJbmZvIHRvIGNvcHkgZnJvbQogICAqICAgVGhpcyBsZXRzIHlvdSBzaGFyZSBidWZmZXJzLiBBbnkgYXJyYXlzIHlvdSBzdXBwbHkgd2lsbCBvdmVycmlkZQogICAqICAgdGhlIGJ1ZmZlcnMgZnJvbSBzcmNCdWZmZXJJbmZvLgogICAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBtb2R1bGU6dHdnbC5BdHRyaWJJbmZvPn0gdGhlIGF0dHJpYnMKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvYXR0cmlidXRlcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnNGcm9tQXJyYXlzKGdsLCBhcnJheXMpIHsKICAgIGNvbnN0IGF0dHJpYnMgPSB7fTsKICAgIE9iamVjdC5rZXlzKGFycmF5cykuZm9yRWFjaChmdW5jdGlvbihhcnJheU5hbWUpIHsKICAgICAgaWYgKCFpc0luZGljZXMoYXJyYXlOYW1lKSkgewogICAgICAgIGNvbnN0IGFycmF5ID0gYXJyYXlzW2FycmF5TmFtZV07CiAgICAgICAgY29uc3QgYXR0cmliTmFtZSA9IGFycmF5LmF0dHJpYiB8fCBhcnJheS5uYW1lIHx8IGFycmF5LmF0dHJpYk5hbWUgfHwgKGRlZmF1bHRzJDIuYXR0cmliUHJlZml4ICsgYXJyYXlOYW1lKTsKICAgICAgICBpZiAoYXJyYXkudmFsdWUpIHsKICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheS52YWx1ZSkgJiYgIWlzQXJyYXlCdWZmZXIkMShhcnJheS52YWx1ZSkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhcnJheS52YWx1ZSBpcyBub3QgYXJyYXkgb3IgdHlwZWRhcnJheScpOwogICAgICAgICAgfQogICAgICAgICAgYXR0cmlic1thdHRyaWJOYW1lXSA9IHsKICAgICAgICAgICAgdmFsdWU6IGFycmF5LnZhbHVlLAogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IGZuOwogICAgICAgICAgaWYgKGFycmF5LmJ1ZmZlciAmJiBhcnJheS5idWZmZXIgaW5zdGFuY2VvZiBXZWJHTEJ1ZmZlcikgewogICAgICAgICAgICBmbiA9IGF0dHJpYkJ1ZmZlckZyb21CdWZmZXI7CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcnJheSA9PT0gIm51bWJlciIgfHwgdHlwZW9mIGFycmF5LmRhdGEgPT09ICJudW1iZXIiKSB7CiAgICAgICAgICAgIGZuID0gYXR0cmliQnVmZmVyRnJvbVNpemU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmbiA9IGF0dHJpYkJ1ZmZlckZyb21BcnJheUxpa2U7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB7YnVmZmVyLCB0eXBlLCBudW1WYWx1ZXMsIGFycmF5VHlwZX0gPSBmbihnbCwgYXJyYXksIGFycmF5TmFtZSk7CiAgICAgICAgICBjb25zdCBub3JtYWxpemF0aW9uID0gYXJyYXkubm9ybWFsaXplICE9PSB1bmRlZmluZWQgPyBhcnJheS5ub3JtYWxpemUgOiBnZXROb3JtYWxpemF0aW9uRm9yVHlwZWRBcnJheVR5cGUoYXJyYXlUeXBlKTsKICAgICAgICAgIGNvbnN0IG51bUNvbXBvbmVudHMgPSBnZXROdW1Db21wb25lbnRzJDEoYXJyYXksIGFycmF5TmFtZSwgbnVtVmFsdWVzKTsKICAgICAgICAgIGF0dHJpYnNbYXR0cmliTmFtZV0gPSB7CiAgICAgICAgICAgIGJ1ZmZlcjogICAgICAgIGJ1ZmZlciwKICAgICAgICAgICAgbnVtQ29tcG9uZW50czogbnVtQ29tcG9uZW50cywKICAgICAgICAgICAgdHlwZTogICAgICAgICAgdHlwZSwKICAgICAgICAgICAgbm9ybWFsaXplOiAgICAgbm9ybWFsaXphdGlvbiwKICAgICAgICAgICAgc3RyaWRlOiAgICAgICAgYXJyYXkuc3RyaWRlIHx8IDAsCiAgICAgICAgICAgIG9mZnNldDogICAgICAgIGFycmF5Lm9mZnNldCB8fCAwLAogICAgICAgICAgICBkaXZpc29yOiAgICAgICBhcnJheS5kaXZpc29yID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBhcnJheS5kaXZpc29yLAogICAgICAgICAgICBkcmF3VHlwZTogICAgICBhcnJheS5kcmF3VHlwZSwKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGdsLmJpbmRCdWZmZXIoQVJSQVlfQlVGRkVSJDEsIG51bGwpOwogICAgcmV0dXJuIGF0dHJpYnM7CiAgfQoKICBmdW5jdGlvbiBnZXRCeXRlc1BlclZhbHVlRm9yR0xUeXBlKGdsLCB0eXBlKSB7CiAgICBpZiAodHlwZSA9PT0gQllURSQxKSAgICAgICAgICAgcmV0dXJuIDE7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gVU5TSUdORURfQllURSQyKSAgcmV0dXJuIDE7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gU0hPUlQkMSkgICAgICAgICAgcmV0dXJuIDI7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gVU5TSUdORURfU0hPUlQkMikgcmV0dXJuIDI7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gSU5UJDIpICAgICAgICAgICAgcmV0dXJuIDQ7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gVU5TSUdORURfSU5UJDIpICAgcmV0dXJuIDQ7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gRkxPQVQkMikgICAgICAgICAgcmV0dXJuIDQ7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICByZXR1cm4gMDsKICB9CgogIC8vIFRyaWVzIHRvIGdldCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gYSBzZXQgb2YgYXJyYXlzLgogIGNvbnN0IHBvc2l0aW9uS2V5cyA9IFsncG9zaXRpb24nLCAncG9zaXRpb25zJywgJ2FfcG9zaXRpb24nXTsKCiAgZnVuY3Rpb24gZ2V0TnVtRWxlbWVudHNGcm9tQXR0cmlidXRlcyhnbCwgYXR0cmlicykgewogICAgbGV0IGtleTsKICAgIGxldCBpaTsKICAgIGZvciAoaWkgPSAwOyBpaSA8IHBvc2l0aW9uS2V5cy5sZW5ndGg7ICsraWkpIHsKICAgICAga2V5ID0gcG9zaXRpb25LZXlzW2lpXTsKICAgICAgaWYgKGtleSBpbiBhdHRyaWJzKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAga2V5ID0gZGVmYXVsdHMkMi5hdHRyaWJQcmVmaXggKyBrZXk7CiAgICAgIGlmIChrZXkgaW4gYXR0cmlicykgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAoaWkgPT09IHBvc2l0aW9uS2V5cy5sZW5ndGgpIHsKICAgICAga2V5ID0gT2JqZWN0LmtleXMoYXR0cmlicylbMF07CiAgICB9CiAgICBjb25zdCBhdHRyaWIgPSBhdHRyaWJzW2tleV07CiAgICBpZiAoIWF0dHJpYi5idWZmZXIpIHsKICAgICAgcmV0dXJuIDE7IC8vIFRoZXJlJ3Mgbm8gYnVmZmVyCiAgICB9CiAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiQxLCBhdHRyaWIuYnVmZmVyKTsKICAgIGNvbnN0IG51bUJ5dGVzID0gZ2wuZ2V0QnVmZmVyUGFyYW1ldGVyKEFSUkFZX0JVRkZFUiQxLCBCVUZGRVJfU0laRSk7CiAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiQxLCBudWxsKTsKCiAgICBjb25zdCBieXRlc1BlclZhbHVlID0gZ2V0Qnl0ZXNQZXJWYWx1ZUZvckdMVHlwZShnbCwgYXR0cmliLnR5cGUpOwogICAgY29uc3QgdG90YWxFbGVtZW50cyA9IG51bUJ5dGVzIC8gYnl0ZXNQZXJWYWx1ZTsKICAgIGNvbnN0IG51bUNvbXBvbmVudHMgPSBhdHRyaWIubnVtQ29tcG9uZW50cyB8fCBhdHRyaWIuc2l6ZTsKICAgIC8vIFRPRE86IGNoZWNrIHN0cmlkZQogICAgY29uc3QgbnVtRWxlbWVudHMgPSB0b3RhbEVsZW1lbnRzIC8gbnVtQ29tcG9uZW50czsKICAgIGlmIChudW1FbGVtZW50cyAlIDEgIT09IDApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBudW1Db21wb25lbnRzICR7bnVtQ29tcG9uZW50c30gbm90IGNvcnJlY3QgZm9yIGxlbmd0aCAke2xlbmd0aH1gKTsKICAgIH0KICAgIHJldHVybiBudW1FbGVtZW50czsKICB9CgogIC8qKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IEJ1ZmZlckluZm8KICAgKiBAcHJvcGVydHkge251bWJlcn0gbnVtRWxlbWVudHMgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBwYXNzIHRvIGBnbC5kcmF3QXJyYXlzYCBvciBgZ2wuZHJhd0VsZW1lbnRzYC4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2VsZW1lbnRUeXBlXSBUaGUgdHlwZSBvZiBpbmRpY2VzIGBVTlNJR05FRF9CWVRFYCwgYFVOU0lHTkVEX1NIT1JUYCBldGMuLgogICAqIEBwcm9wZXJ0eSB7V2ViR0xCdWZmZXJ9IFtpbmRpY2VzXSBUaGUgaW5kaWNlcyBgRUxFTUVOVF9BUlJBWV9CVUZGRVJgIGlmIGFueSBpbmRpY2VzIGV4aXN0LgogICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsIG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+fSBbYXR0cmlic10gVGhlIGF0dHJpYnMgYXBwcm9wcmlhdGUgdG8gY2FsbCBgc2V0QXR0cmlidXRlc2AKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogQ3JlYXRlcyBhIEJ1ZmZlckluZm8gZnJvbSBhbiBvYmplY3Qgb2YgYXJyYXlzLgogICAqCiAgICogVGhpcyBjYW4gYmUgcGFzc2VkIHRvIHtAbGluayBtb2R1bGU6dHdnbC5zZXRCdWZmZXJzQW5kQXR0cmlidXRlc30gYW5kIHRvCiAgICoge0BsaW5rIG1vZHVsZTp0d2dsOmRyYXdCdWZmZXJJbmZvfS4KICAgKgogICAqIEdpdmVuIGFuIG9iamVjdCBsaWtlCiAgICoKICAgKiAgICAgdmFyIGFycmF5cyA9IHsKICAgKiAgICAgICBwb3NpdGlvbjogeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdLCB9LAogICAqICAgICAgIHRleGNvb3JkOiB7IG51bUNvbXBvbmVudHM6IDIsIGRhdGE6IFswLCAwLCAwLCAxLCAxLCAwLCAxLCAxXSwgICAgICAgICAgICAgICAgIH0sCiAgICogICAgICAgbm9ybWFsOiAgIHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDFdLCAgICAgfSwKICAgKiAgICAgICBpbmRpY2VzOiAgeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMSwgMiwgMSwgMiwgM10sICAgICAgICAgICAgICAgICAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogIENyZWF0ZXMgYW4gQnVmZmVySW5mbyBsaWtlIHRoaXMKICAgKgogICAqICAgICBidWZmZXJJbmZvID0gewogICAqICAgICAgIG51bUVsZW1lbnRzOiA0LCAgICAgICAgLy8gb3Igd2hhdGV2ZXIgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpcwogICAqICAgICAgIGluZGljZXM6IFdlYkdMQnVmZmVyLCAgLy8gdGhpcyBwcm9wZXJ0eSB3aWxsIG5vdCBleGlzdCBpZiB0aGVyZSBhcmUgbm8gaW5kaWNlcwogICAqICAgICAgIGF0dHJpYnM6IHsKICAgKiAgICAgICAgIHBvc2l0aW9uOiB7IGJ1ZmZlcjogV2ViR0xCdWZmZXIsIG51bUNvbXBvbmVudHM6IDMsIH0sCiAgICogICAgICAgICBub3JtYWw6ICAgeyBidWZmZXI6IFdlYkdMQnVmZmVyLCBudW1Db21wb25lbnRzOiAzLCB9LAogICAqICAgICAgICAgdGV4Y29vcmQ6IHsgYnVmZmVyOiBXZWJHTEJ1ZmZlciwgbnVtQ29tcG9uZW50czogMiwgfSwKICAgKiAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogIFRoZSBwcm9wZXJ0aWVzIG9mIGFycmF5cyBjYW4gYmUgSmF2YVNjcmlwdCBhcnJheXMgaW4gd2hpY2ggY2FzZSB0aGUgbnVtYmVyIG9mIGNvbXBvbmVudHMKICAgKiAgd2lsbCBiZSBndWVzc2VkLgogICAqCiAgICogICAgIHZhciBhcnJheXMgPSB7CiAgICogICAgICAgIHBvc2l0aW9uOiBbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdLAogICAqICAgICAgICB0ZXhjb29yZDogWzAsIDAsIDAsIDEsIDEsIDAsIDEsIDFdLAogICAqICAgICAgICBub3JtYWw6ICAgWzAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDFdLAogICAqICAgICAgICBpbmRpY2VzOiAgWzAsIDEsIDIsIDEsIDIsIDNdLAogICAqICAgICB9OwogICAqCiAgICogIFRoZXkgY2FuIGFsc28gYmUgVHlwZWRBcnJheXMKICAgKgogICAqICAgICB2YXIgYXJyYXlzID0gewogICAqICAgICAgICBwb3NpdGlvbjogbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdKSwKICAgKiAgICAgICAgdGV4Y29vcmQ6IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDAsIDEsIDEsIDAsIDEsIDFdKSwKICAgKiAgICAgICAgbm9ybWFsOiAgIG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDFdKSwKICAgKiAgICAgICAgaW5kaWNlczogIG5ldyBVaW50MTZBcnJheShbMCwgMSwgMiwgMSwgMiwgM10pLAogICAqICAgICB9OwogICAqCiAgICogIE9yIEF1Z21lbnRlZFR5cGVkQXJyYXlzCiAgICoKICAgKiAgICAgdmFyIHBvc2l0aW9ucyA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgNCk7CiAgICogICAgIHZhciB0ZXhjb29yZHMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDIsIDQpOwogICAqICAgICB2YXIgbm9ybWFscyAgID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgzLCA0KTsKICAgKiAgICAgdmFyIGluZGljZXMgICA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgMiwgVWludDE2QXJyYXkpOwogICAqCiAgICogICAgIHBvc2l0aW9ucy5wdXNoKFswLCAwLCAwLCAxMCwgMCwgMCwgMCwgMTAsIDAsIDEwLCAxMCwgMF0pOwogICAqICAgICB0ZXhjb29yZHMucHVzaChbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0pOwogICAqICAgICBub3JtYWxzLnB1c2goWzAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDFdKTsKICAgKiAgICAgaW5kaWNlcy5wdXNoKFswLCAxLCAyLCAxLCAyLCAzXSk7CiAgICoKICAgKiAgICAgdmFyIGFycmF5cyA9IHsKICAgKiAgICAgICAgcG9zaXRpb246IHBvc2l0aW9ucywKICAgKiAgICAgICAgdGV4Y29vcmQ6IHRleGNvb3JkcywKICAgKiAgICAgICAgbm9ybWFsOiAgIG5vcm1hbHMsCiAgICogICAgICAgIGluZGljZXM6ICBpbmRpY2VzLAogICAqICAgICB9OwogICAqCiAgICogRm9yIHRoZSBsYXN0IGV4YW1wbGUgaXQgaXMgZXF1aXZhbGVudCB0bwogICAqCiAgICogICAgIHZhciBidWZmZXJJbmZvID0gewogICAqICAgICAgIGF0dHJpYnM6IHsKICAgKiAgICAgICAgIHBvc2l0aW9uOiB7IG51bUNvbXBvbmVudHM6IDMsIGJ1ZmZlcjogZ2wuY3JlYXRlQnVmZmVyKCksIH0sCiAgICogICAgICAgICB0ZXhjb29yZDogeyBudW1Db21wb25lbnRzOiAyLCBidWZmZXI6IGdsLmNyZWF0ZUJ1ZmZlcigpLCB9LAogICAqICAgICAgICAgbm9ybWFsOiB7IG51bUNvbXBvbmVudHM6IDMsIGJ1ZmZlcjogZ2wuY3JlYXRlQnVmZmVyKCksIH0sCiAgICogICAgICAgfSwKICAgKiAgICAgICBpbmRpY2VzOiBnbC5jcmVhdGVCdWZmZXIoKSwKICAgKiAgICAgICBudW1FbGVtZW50czogNiwKICAgKiAgICAgfTsKICAgKgogICAqICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVySW5mby5hdHRyaWJzLnBvc2l0aW9uLmJ1ZmZlcik7CiAgICogICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBhcnJheXMucG9zaXRpb24sIGdsLlNUQVRJQ19EUkFXKTsKICAgKiAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlckluZm8uYXR0cmlicy50ZXhjb29yZC5idWZmZXIpOwogICAqICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgYXJyYXlzLnRleGNvb3JkLCBnbC5TVEFUSUNfRFJBVyk7CiAgICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXJJbmZvLmF0dHJpYnMubm9ybWFsLmJ1ZmZlcik7CiAgICogICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBhcnJheXMubm9ybWFsLCBnbC5TVEFUSUNfRFJBVyk7CiAgICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGJ1ZmZlckluZm8uaW5kaWNlcyk7CiAgICogICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGFycmF5cy5pbmRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7CiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLkFycmF5c30gYXJyYXlzIFlvdXIgZGF0YQogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuQnVmZmVySW5mb30gW3NyY0J1ZmZlckluZm9dIEFuIGV4aXN0aW5nCiAgICogICAgICAgIGJ1ZmZlciBpbmZvIHRvIHN0YXJ0IGZyb20uIFdlYkdMQnVmZmVycyBldGMgc3BlY2lmaWVkCiAgICogICAgICAgIGluIHRoZSBzcmNCdWZmZXJJbmZvIHdpbGwgYmUgdXNlZCBpbiBhIG5ldyBCdWZmZXJJbmZvCiAgICogICAgICAgIHdpdGggYW55IGFycmF5cyBzcGVjaWZpZWQgb3ZlcnJpZGluZyB0aGUgb25lcyBpbgogICAqICAgICAgICBzcmNCdWZmZXJJbmZvLgogICAqIEByZXR1cm4ge21vZHVsZTp0d2dsLkJ1ZmZlckluZm99IEEgQnVmZmVySW5mbwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9hdHRyaWJ1dGVzCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXMoZ2wsIGFycmF5cywgc3JjQnVmZmVySW5mbykgewogICAgY29uc3QgbmV3QXR0cmlicyA9IGNyZWF0ZUF0dHJpYnNGcm9tQXJyYXlzKGdsLCBhcnJheXMpOwogICAgY29uc3QgYnVmZmVySW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIHNyY0J1ZmZlckluZm8gPyBzcmNCdWZmZXJJbmZvIDoge30pOwogICAgYnVmZmVySW5mby5hdHRyaWJzID0gT2JqZWN0LmFzc2lnbih7fSwgc3JjQnVmZmVySW5mbyA/IHNyY0J1ZmZlckluZm8uYXR0cmlicyA6IHt9LCBuZXdBdHRyaWJzKTsKICAgIGNvbnN0IGluZGljZXMgPSBhcnJheXMuaW5kaWNlczsKICAgIGlmIChpbmRpY2VzKSB7CiAgICAgIGNvbnN0IG5ld0luZGljZXMgPSBtYWtlVHlwZWRBcnJheShpbmRpY2VzLCAiaW5kaWNlcyIpOwogICAgICBidWZmZXJJbmZvLmluZGljZXMgPSBjcmVhdGVCdWZmZXJGcm9tVHlwZWRBcnJheShnbCwgbmV3SW5kaWNlcywgRUxFTUVOVF9BUlJBWV9CVUZGRVIkMik7CiAgICAgIGJ1ZmZlckluZm8ubnVtRWxlbWVudHMgPSBuZXdJbmRpY2VzLmxlbmd0aDsKICAgICAgYnVmZmVySW5mby5lbGVtZW50VHlwZSA9IGdldEdMVHlwZUZvclR5cGVkQXJyYXkobmV3SW5kaWNlcyk7CiAgICB9IGVsc2UgaWYgKCFidWZmZXJJbmZvLm51bUVsZW1lbnRzKSB7CiAgICAgIGJ1ZmZlckluZm8ubnVtRWxlbWVudHMgPSBnZXROdW1FbGVtZW50c0Zyb21BdHRyaWJ1dGVzKGdsLCBidWZmZXJJbmZvLmF0dHJpYnMpOwogICAgfQoKICAgIHJldHVybiBidWZmZXJJbmZvOwogIH0KCiAgLyoKICAgKiBDb3B5cmlnaHQgMjAxOSBHcmVnZyBUYXZhcmVzCiAgICoKICAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQogICAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCiAgICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgogICAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAogICAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQogICAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CiAgICoKICAgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogICAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgogICAqCiAgICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICAgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKICAgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKICAgKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgogICAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCiAgICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUgogICAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KICAgKi8KCiAgLyoqCiAgICogR2V0cyB0aGUgZ2wgdmVyc2lvbiBhcyBhIG51bWJlcgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEByZXR1cm4ge251bWJlcn0gdmVyc2lvbiBvZiBnbAogICAqIEBwcml2YXRlCiAgICovCiAgLy9mdW5jdGlvbiBnZXRWZXJzaW9uQXNOdW1iZXIoZ2wpIHsKICAvLyAgcmV0dXJuIHBhcnNlRmxvYXQoZ2wuZ2V0UGFyYW1ldGVyKGdsLlZFUlNJT04pLnN1YnN0cig2KSk7CiAgLy99CgogIC8qKgogICAqIENoZWNrIGlmIGNvbnRleHQgaXMgV2ViR0wgMi4wCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHJldHVybiB7Ym9vbH0gdHJ1ZSBpZiBpdCdzIFdlYkdMIDIuMAogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwogIGZ1bmN0aW9uIGlzV2ViR0wyKGdsKSB7CiAgICAvLyBUaGlzIGlzIHRoZSBjb3JyZWN0IGNoZWNrIGJ1dCBpdCdzIHNsb3cKICAgIC8vICByZXR1cm4gZ2wuZ2V0UGFyYW1ldGVyKGdsLlZFUlNJT04pLmluZGV4T2YoIldlYkdMIDIuMCIpID09PSAwOwogICAgLy8gVGhpcyBtaWdodCBhbHNvIGJlIHRoZSBjb3JyZWN0IGNoZWNrIGJ1dCBJJ20gYXNzdW1pbmcgaXQncyBzbG93LWlzaAogICAgLy8gcmV0dXJuIGdsIGluc3RhbmNlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dDsKICAgIHJldHVybiAhIWdsLnRleFN0b3JhZ2UyRDsKICB9CgogIC8qKgogICAqIEdldHMgYSBzdHJpbmcgZm9yIFdlYkdMIGVudW0KICAgKgogICAqIE5vdGU6IFNldmVyYWwgZW51bXMgYXJlIHRoZSBzYW1lLiBXaXRob3V0IG1vcmUKICAgKiBjb250ZXh0ICh3aGljaCBmdW5jdGlvbikgaXQncyBpbXBvc3NpYmxlIHRvIGFsd2F5cwogICAqIGdpdmUgdGhlIGNvcnJlY3QgZW51bS4gQXMgaXQgaXMsIGZvciBtYXRjaGluZyB2YWx1ZXMKICAgKiBpdCBnaXZlcyBhbGwgZW51bXMuIENoZWNraW5nIHRoZSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0CiAgICogdGhhdCBtZWFucwogICAqCiAgICogICAgICAwICAgICA9IFpFUk8gfCBQT0lOVCB8IE5PTkUgfCBOT19FUlJPUgogICAqICAgICAgMSAgICAgPSBPTkUgfCBMSU5FUyB8IFNZTkNfRkxVU0hfQ09NTUFORFNfQklUCiAgICogICAgICAzMjc3NyA9IEJMRU5EX0VRVUFUSU9OX1JHQiB8IEJMRU5EX0VRVUFUSU9OX1JHQgogICAqICAgICAgMzY2NjIgPSBDT1BZX1JFQURfQlVGRkVSIHwgQ09QWV9SRUFEX0JVRkZFUl9CSU5ESU5HCiAgICogICAgICAzNjY2MyA9IENPUFlfV1JJVEVfQlVGRkVSIHwgQ09QWV9XUklURV9CVUZGRVJfQklORElORwogICAqICAgICAgMzYwMDYgPSBGUkFNRUJVRkZFUl9CSU5ESU5HIHwgRFJBV19GUkFNRUJVRkZFUl9CSU5ESU5HCiAgICoKICAgKiBJdCdzIGFsc28gbm90IHVzZWZ1bCBmb3IgYml0cyByZWFsbHkgdW5sZXNzIHlvdSBwYXNzIGluIGluZGl2aWR1YWwgYml0cy4KICAgKiBJbiBvdGhlciB3b3JkcwogICAqCiAgICogICAgIGNvbnN0IGJpdHMgPSBnbC5DT0xPUl9CVUZGRVJfQklUIHwgZ2wuREVQVEhfQlVGRkVSX0JJVDsKICAgKiAgICAgdHdnbC5nbEVudW1Ub1N0cmluZyhnbCwgYml0cyk7ICAvLyBub3QgZ29pbmcgdG8gd29yawogICAqCiAgICogTm90ZSB0aGF0IHNvbWUgZW51bXMgb25seSBleGlzdCBvbiBleHRlbnNpb25zLiBJZiB5b3UKICAgKiB3YW50IHRoZW0gdG8gc2hvdyB1cCB5b3UgbmVlZCB0byBwYXNzIHRoZSBleHRlbnNpb24gYXQgbGVhc3QKICAgKiBvbmNlLiBGb3IgZXhhbXBsZQogICAqCiAgICogICAgIGNvbnN0IGV4dCA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnKTsKICAgKiAgICAgaWYgKGV4dCkgewogICAqICAgICAgICB0d2dsLmdsRW51bVRvU3RyaW5nKGV4dCwgMCk7ICAvLyBqdXN0IHByaW1lIHRoZSBmdW5jdGlvbgogICAqCiAgICogICAgICAgIC4ubGF0ZXIuLgogICAqCiAgICogICAgICAgIGNvbnN0IGludGVybmFsRm9ybWF0ID0gZXh0LkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7CiAgICogICAgICAgIGNvbnNvbGUubG9nKHR3Z2wuZ2xFbnVtVG9TdHJpbmcoZ2wsIGludGVybmFsRm9ybWF0KSk7CiAgICoKICAgKiBOb3RpY2UgSSBkaWRuJ3QgaGF2ZSB0byBwYXNzIHRoZSBleHRlbnNpb24gdGhlIHNlY29uZCB0aW1lLiBUaGlzIG1lYW5zCiAgICogeW91IGNhbiBoYXZlIHBsYWNlIHRoYXQgZ2VuZXJpY2FsbHkgZ2V0cyBhbiBlbnVtIGZvciB0ZXh0dXJlIGZvcm1hdHMgZm9yIGV4YW1wbGUuCiAgICogYW5kIGFzIGxvbmcgYXMgeW91IHByaW1lZCB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgZXh0ZW5zaW9ucwogICAqCiAgICogSWYgeW91J3JlIHVzaW5nIGB0d2dsLmFkZEV4dGVuc2lvbnNUb0NvbnRleHRgIHRvIGVuYWJsZSB5b3VyIGV4dGVuc2lvbnMKICAgKiB0aGVuIHR3Z2wgd2lsbCBhdXRvbWF0aWNhbGx5IGdldCB0aGUgZXh0ZW5zaW9uJ3MgZW51bXMuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHQgb3IgYW55IGV4dGVuc2lvbiBvYmplY3QKICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgdGhlIHZhbHVlIG9mIHRoZSBlbnVtIHlvdSB3YW50IHRvIGxvb2sgdXAuCiAgICogQHJldHVybiB7c3RyaW5nfSBlbnVtIHN0cmluZyBvciBoZXggdmFsdWUKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKiBAZnVuY3Rpb24gZ2xFbnVtVG9TdHJpbmcKICAgKi8KICBjb25zdCBnbEVudW1Ub1N0cmluZyA9IChmdW5jdGlvbigpIHsKICAgIGNvbnN0IGhhdmVFbnVtc0ZvclR5cGUgPSB7fTsKICAgIGNvbnN0IGVudW1zID0ge307CgogICAgZnVuY3Rpb24gYWRkRW51bXMoZ2wpIHsKICAgICAgY29uc3QgdHlwZSA9IGdsLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgIGlmICghaGF2ZUVudW1zRm9yVHlwZVt0eXBlXSkgewogICAgICAgIGZvciAoY29uc3Qga2V5IGluIGdsKSB7CiAgICAgICAgICBpZiAodHlwZW9mIGdsW2tleV0gPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZW51bXNbZ2xba2V5XV07CiAgICAgICAgICAgIGVudW1zW2dsW2tleV1dID0gZXhpc3RpbmcgPyBgJHtleGlzdGluZ30gfCAke2tleX1gIDoga2V5OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBoYXZlRW51bXNGb3JUeXBlW3R5cGVdID0gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiBnbEVudW1Ub1N0cmluZyhnbCwgdmFsdWUpIHsKICAgICAgYWRkRW51bXMoZ2wpOwogICAgICByZXR1cm4gZW51bXNbdmFsdWVdIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInID8gYDB4JHt2YWx1ZS50b1N0cmluZygxNil9YCA6IHZhbHVlKTsKICAgIH07CiAgfSgpKTsKCiAgLyoKICAgKiBDb3B5cmlnaHQgMjAxOSBHcmVnZyBUYXZhcmVzCiAgICoKICAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQogICAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCiAgICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgogICAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAogICAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQogICAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CiAgICoKICAgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogICAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgogICAqCiAgICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICAgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKICAgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKICAgKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgogICAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCiAgICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUgogICAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KICAgKi8KICBjb25zdCBkZWZhdWx0cyQxID0gewogICAgdGV4dHVyZUNvbG9yOiBuZXcgVWludDhBcnJheShbMTI4LCAxOTIsIDI1NSwgMjU1XSksCiAgICB0ZXh0dXJlT3B0aW9uczoge30sCiAgICBjcm9zc09yaWdpbjogdW5kZWZpbmVkLAogIH07CiAgY29uc3QgaXNBcnJheUJ1ZmZlciA9IGlzQXJyYXlCdWZmZXIkMTsKCiAgLy8gU2hvdWxkIHdlIG1ha2UgdGhpcyBvbiBkZW1hbmQ/CiAgY29uc3QgZ2V0U2hhcmVkMkRDb250ZXh0ID0gZnVuY3Rpb24oKSB7CiAgICBsZXQgc19jdHg7CiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0U2hhcmVkMkRDb250ZXh0KCkgewogICAgICBzX2N0eCA9IHNfY3R4IHx8CiAgICAgICAgICAoKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCkKICAgICAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpCiAgICAgICAgICAgIDogbnVsbCk7CiAgICAgIHJldHVybiBzX2N0eDsKICAgIH07CiAgfSgpOwoKICAvLyBOT1RFOiBDaHJvbWUgc3VwcG9ydHMgMkQgY2FudmFzIGluIGEgV29ya2VyIChiZWhpbmQgZmxhZyBhcyBvZiB2NjQgYnV0CiAgLy8gICAgICAgbm90IG9ubHkgZG9lcyBGaXJlZm94IE5PVCBzdXBwb3J0IGl0IGJ1dCBGaXJlZm94IGZyZWV6ZXMgaW1tZWRpYXRlbHkKICAvLyAgICAgICBpZiB5b3UgdHJ5IHRvIGNyZWF0ZSBvbmUgaW5zdGVhZCBvZiBqdXN0IHJldHVybmluZyBudWxsIGFuZCBjb250aW51aW5nLgogIC8vICA6IChnbG9iYWwuT2Zmc2NyZWVuQ2FudmFzICYmIChuZXcgZ2xvYmFsLk9mZnNjcmVlbkNhbnZhcygxLCAxKSkuZ2V0Q29udGV4dCgiMmQiKSk7ICAvLyBPZmZzY3JlZW5DYW52YXMgbWF5IG5vdCBzdXBwb3J0IDJkCgogIC8vIE5PVEU6IFdlIGNhbiBtYXliZSByZW1vdmUgc29tZSBvZiB0aGUgbmVlZCBmb3IgdGhlIDJkIGNhbnZhcy4gSW4gV2ViR0wyCiAgLy8gd2UgY2FuIHVzZSB0aGUgdmFyaW91cyB1bnBhY2sgc2V0dGluZ3MuIE90aGVyd2lzZSB3ZSBjb3VsZCB0cnkgdXNpbmcKICAvLyB0aGUgYWJpbGl0eSBvZiBhbiBJbWFnZUJpdG1hcCB0byBiZSBjdXQuIFVuZm9ydHVuYXRlbHkgY3V0dGluZyBhbiBJbWFnZUJpdG1hcAogIC8vIGlzIGFzeW5jIGFuZCB0aGUgY3VycmVudCBUV0dMIGNvZGUgZXhwZWN0cyBhIG5vbi1Bc3luYyByZXN1bHQgdGhvdWdoIHRoYXQKICAvLyBtaWdodCBub3QgYmUgYSBwcm9ibGVtLiBJbWFnZUJpdG1hcCB0aG91Z2ggaXMgbm90IGF2YWlsYWJsZSBpbiBFZGdlIG9yIFNhZmFyaQogIC8vIGFzIG9mIDIwMTgtMDEtMDIKCiAgLyogUGl4ZWxGb3JtYXQgKi8KICBjb25zdCBBTFBIQSAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE5MDY7CiAgY29uc3QgUkdCICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxOTA3OwogIGNvbnN0IFJHQkEkMSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxOTA4OwogIGNvbnN0IExVTUlOQU5DRSAgICAgICAgICAgICAgICAgICAgICA9IDB4MTkwOTsKICBjb25zdCBMVU1JTkFOQ0VfQUxQSEEgICAgICAgICAgICAgICAgPSAweDE5MEE7CiAgY29uc3QgREVQVEhfQ09NUE9ORU5UJDEgICAgICAgICAgICAgICAgPSAweDE5MDI7CiAgY29uc3QgREVQVEhfU1RFTkNJTCQxICAgICAgICAgICAgICAgICAgPSAweDg0Rjk7CgogIC8qIFRleHR1cmVXcmFwTW9kZSAqLwogIC8vIGNvbnN0IFJFUEVBVCAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MjkwMTsKICAvLyBjb25zdCBNSVJST1JFRF9SRVBFQVQgICAgICAgICAgICAgICAgPSAweDgzNzA7CiAgY29uc3QgQ0xBTVBfVE9fRURHRSQxICAgICAgICAgICAgICAgICAgPSAweDgxMmY7CgogIC8qIFRleHR1cmVNYWdGaWx0ZXIgKi8KICBjb25zdCBORUFSRVNUICAgICAgICAgICAgICAgICAgICAgICAgPSAweDI2MDA7CiAgY29uc3QgTElORUFSJDEgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDI2MDE7CgogIC8qIFRleHR1cmVNaW5GaWx0ZXIgKi8KICAvLyBjb25zdCBORUFSRVNUX01JUE1BUF9ORUFSRVNUICAgICAgICAgPSAweDI3MDA7CiAgLy8gY29uc3QgTElORUFSX01JUE1BUF9ORUFSRVNUICAgICAgICAgID0gMHgyNzAxOwogIC8vIGNvbnN0IE5FQVJFU1RfTUlQTUFQX0xJTkVBUiAgICAgICAgICA9IDB4MjcwMjsKICAvLyBjb25zdCBMSU5FQVJfTUlQTUFQX0xJTkVBUiAgICAgICAgICAgPSAweDI3MDM7CgogIC8qIFRleHR1cmUgVGFyZ2V0ICovCiAgY29uc3QgVEVYVFVSRV8yRCQyICAgICAgICAgICAgICAgICAgICAgPSAweDBkZTE7CiAgY29uc3QgVEVYVFVSRV9DVUJFX01BUCQxICAgICAgICAgICAgICAgPSAweDg1MTM7CiAgY29uc3QgVEVYVFVSRV8zRCQxICAgICAgICAgICAgICAgICAgICAgPSAweDgwNmY7CiAgY29uc3QgVEVYVFVSRV8yRF9BUlJBWSQxICAgICAgICAgICAgICAgPSAweDhjMWE7CgogIC8qIEN1YmVtYXAgVGFyZ2V0cyAqLwogIGNvbnN0IFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCAgICA9IDB4ODUxNTsKICBjb25zdCBURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1ggICAgPSAweDg1MTY7CiAgY29uc3QgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9ZICAgID0gMHg4NTE3OwogIGNvbnN0IFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWSAgICA9IDB4ODUxODsKICBjb25zdCBURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ogICAgPSAweDg1MTk7CiAgY29uc3QgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9aICAgID0gMHg4NTFhOwoKICAvKiBUZXh0dXJlIFBhcmFtZXRlcnMgKi8KICBjb25zdCBURVhUVVJFX01JTl9GSUxURVIgICAgICAgICAgICAgPSAweDI4MDE7CiAgY29uc3QgVEVYVFVSRV9NQUdfRklMVEVSICAgICAgICAgICAgID0gMHgyODAwOwogIGNvbnN0IFRFWFRVUkVfV1JBUF9TICAgICAgICAgICAgICAgICA9IDB4MjgwMjsKICBjb25zdCBURVhUVVJFX1dSQVBfVCAgICAgICAgICAgICAgICAgPSAweDI4MDM7CiAgY29uc3QgVEVYVFVSRV9XUkFQX1IgICAgICAgICAgICAgICAgID0gMHg4MDcyOwogIGNvbnN0IFRFWFRVUkVfTUlOX0xPRCAgICAgICAgICAgICAgICA9IDB4ODEzYTsKICBjb25zdCBURVhUVVJFX01BWF9MT0QgICAgICAgICAgICAgICAgPSAweDgxM2I7CiAgY29uc3QgVEVYVFVSRV9CQVNFX0xFVkVMICAgICAgICAgICAgID0gMHg4MTNjOwogIGNvbnN0IFRFWFRVUkVfTUFYX0xFVkVMICAgICAgICAgICAgICA9IDB4ODEzZDsKICBjb25zdCBURVhUVVJFX0NPTVBBUkVfTU9ERSAgICAgICAgICAgPSAweDg4NEM7CiAgY29uc3QgVEVYVFVSRV9DT01QQVJFX0ZVTkMgICAgICAgICAgID0gMHg4ODREOwoKICAvKiBQaXhlbCBzdG9yZSAqLwogIGNvbnN0IFVOUEFDS19BTElHTk1FTlQgICAgICAgICAgICAgICAgICAgPSAweDBjZjU7CiAgY29uc3QgVU5QQUNLX1JPV19MRU5HVEggICAgICAgICAgICAgICAgICA9IDB4MGNmMjsKICBjb25zdCBVTlBBQ0tfSU1BR0VfSEVJR0hUICAgICAgICAgICAgICAgID0gMHg4MDZlOwogIGNvbnN0IFVOUEFDS19TS0lQX1BJWEVMUyAgICAgICAgICAgICAgICAgPSAweDBjZjQ7CiAgY29uc3QgVU5QQUNLX1NLSVBfUk9XUyAgICAgICAgICAgICAgICAgICA9IDB4MGNmMzsKICBjb25zdCBVTlBBQ0tfU0tJUF9JTUFHRVMgICAgICAgICAgICAgICAgID0gMHg4MDZkOwogIGNvbnN0IFVOUEFDS19DT0xPUlNQQUNFX0NPTlZFUlNJT05fV0VCR0wgPSAweDkyNDM7CiAgY29uc3QgVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMICAgICA9IDB4OTI0MTsKICBjb25zdCBVTlBBQ0tfRkxJUF9ZX1dFQkdMICAgICAgICAgICAgICAgID0gMHg5MjQwOwoKICBjb25zdCBSOCAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjI5OwogIGNvbnN0IFI4X1NOT1JNICAgICAgICAgICAgICAgICAgICAgPSAweDhGOTQ7CiAgY29uc3QgUjE2RiAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIyRDsKICBjb25zdCBSMzJGICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjJFOwogIGNvbnN0IFI4VUkgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzI7CiAgY29uc3QgUjhJICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzMTsKICBjb25zdCBSRzE2VUkgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjNBOwogIGNvbnN0IFJHMTZJICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzk7CiAgY29uc3QgUkczMlVJICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzQzsKICBjb25zdCBSRzMySSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjNCOwogIGNvbnN0IFJHOCAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMkI7CiAgY29uc3QgUkc4X1NOT1JNICAgICAgICAgICAgICAgICAgICA9IDB4OEY5NTsKICBjb25zdCBSRzE2RiAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjJGOwogIGNvbnN0IFJHMzJGICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzA7CiAgY29uc3QgUkc4VUkgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzODsKICBjb25zdCBSRzhJICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjM3OwogIGNvbnN0IFIxNlVJICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzQ7CiAgY29uc3QgUjE2SSAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzMzsKICBjb25zdCBSMzJVSSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjM2OwogIGNvbnN0IFIzMkkgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzU7CiAgY29uc3QgUkdCOCAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODA1MTsKICBjb25zdCBTUkdCOCAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4QzQxOwogIGNvbnN0IFJHQjU2NSQxICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ2MjsKICBjb25zdCBSR0I4X1NOT1JNICAgICAgICAgICAgICAgICAgID0gMHg4Rjk2OwogIGNvbnN0IFIxMUZfRzExRl9CMTBGICAgICAgICAgICAgICAgPSAweDhDM0E7CiAgY29uc3QgUkdCOV9FNSAgICAgICAgICAgICAgICAgICAgICA9IDB4OEMzRDsKICBjb25zdCBSR0IxNkYgICAgICAgICAgICAgICAgICAgICAgID0gMHg4ODFCOwogIGNvbnN0IFJHQjMyRiAgICAgICAgICAgICAgICAgICAgICAgPSAweDg4MTU7CiAgY29uc3QgUkdCOFVJICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ3RDsKICBjb25zdCBSR0I4SSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDhGOwogIGNvbnN0IFJHQjE2VUkgICAgICAgICAgICAgICAgICAgICAgPSAweDhENzc7CiAgY29uc3QgUkdCMTZJICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ4OTsKICBjb25zdCBSR0IzMlVJICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDcxOwogIGNvbnN0IFJHQjMySSAgICAgICAgICAgICAgICAgICAgICAgPSAweDhEODM7CiAgY29uc3QgUkdCQTggICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODA1ODsKICBjb25zdCBTUkdCOF9BTFBIQTggICAgICAgICAgICAgICAgID0gMHg4QzQzOwogIGNvbnN0IFJHQkE4X1NOT1JNICAgICAgICAgICAgICAgICAgPSAweDhGOTc7CiAgY29uc3QgUkdCNV9BMSQxICAgICAgICAgICAgICAgICAgICAgID0gMHg4MDU3OwogIGNvbnN0IFJHQkE0JDEgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODA1NjsKICBjb25zdCBSR0IxMF9BMiAgICAgICAgICAgICAgICAgICAgID0gMHg4MDU5OwogIGNvbnN0IFJHQkExNkYgICAgICAgICAgICAgICAgICAgICAgPSAweDg4MUE7CiAgY29uc3QgUkdCQTMyRiAgICAgICAgICAgICAgICAgICAgICA9IDB4ODgxNDsKICBjb25zdCBSR0JBOFVJICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDdDOwogIGNvbnN0IFJHQkE4SSAgICAgICAgICAgICAgICAgICAgICAgPSAweDhEOEU7CiAgY29uc3QgUkdCMTBfQTJVSSAgICAgICAgICAgICAgICAgICA9IDB4OTA2RjsKICBjb25zdCBSR0JBMTZVSSAgICAgICAgICAgICAgICAgICAgID0gMHg4RDc2OwogIGNvbnN0IFJHQkExNkkgICAgICAgICAgICAgICAgICAgICAgPSAweDhEODg7CiAgY29uc3QgUkdCQTMySSAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ4MjsKICBjb25zdCBSR0JBMzJVSSAgICAgICAgICAgICAgICAgICAgID0gMHg4RDcwOwoKICBjb25zdCBERVBUSF9DT01QT05FTlQxNiQxICAgICAgICAgICAgPSAweDgxQTU7CiAgY29uc3QgREVQVEhfQ09NUE9ORU5UMjQkMSAgICAgICAgICAgID0gMHg4MUE2OwogIGNvbnN0IERFUFRIX0NPTVBPTkVOVDMyRiQxICAgICAgICAgICA9IDB4OENBQzsKICBjb25zdCBERVBUSDMyRl9TVEVOQ0lMOCQxICAgICAgICAgICAgPSAweDhDQUQ7CiAgY29uc3QgREVQVEgyNF9TVEVOQ0lMOCQxICAgICAgICAgICAgID0gMHg4OEYwOwoKICAvKiBEYXRhVHlwZSAqLwogIGNvbnN0IEJZVEUgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDA7CiAgY29uc3QgVU5TSUdORURfQllURSQxICAgICAgICAgICAgICAgID0gMHgxNDAxOwogIGNvbnN0IFNIT1JUICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDI7CiAgY29uc3QgVU5TSUdORURfU0hPUlQkMSAgICAgICAgICAgICAgID0gMHgxNDAzOwogIGNvbnN0IElOVCQxICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwNDsKICBjb25zdCBVTlNJR05FRF9JTlQkMSAgICAgICAgICAgICAgICAgPSAweDE0MDU7CiAgY29uc3QgRkxPQVQkMSAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA2OwogIGNvbnN0IFVOU0lHTkVEX1NIT1JUXzRfNF80XzQgICAgICAgPSAweDgwMzM7CiAgY29uc3QgVU5TSUdORURfU0hPUlRfNV81XzVfMSAgICAgICA9IDB4ODAzNDsKICBjb25zdCBVTlNJR05FRF9TSE9SVF81XzZfNSAgICAgICAgID0gMHg4MzYzOwogIGNvbnN0IEhBTEZfRkxPQVQgICAgICAgICAgICAgICAgICAgPSAweDE0MEI7CiAgY29uc3QgSEFMRl9GTE9BVF9PRVMgICAgICAgICAgICAgICA9IDB4OEQ2MTsgIC8vIFRoYW5rcyBLaHJvbm9zIGZvciBtYWtpbmcgdGhpcyBkaWZmZXJlbnQgPjooCiAgY29uc3QgVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWICA9IDB4ODM2ODsKICBjb25zdCBVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWID0gMHg4QzNCOwogIGNvbnN0IFVOU0lHTkVEX0lOVF81XzlfOV85X1JFViAgICAgPSAweDhDM0U7CiAgY29uc3QgRkxPQVRfMzJfVU5TSUdORURfSU5UXzI0XzhfUkVWID0gMHg4REFEOwogIGNvbnN0IFVOU0lHTkVEX0lOVF8yNF84ICAgICAgICAgICAgPSAweDg0RkE7CgogIGNvbnN0IFJHICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMjc7CiAgY29uc3QgUkdfSU5URUdFUiAgICAgICAgICAgICAgICAgICA9IDB4ODIyODsKICBjb25zdCBSRUQgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxOTAzOwogIGNvbnN0IFJFRF9JTlRFR0VSICAgICAgICAgICAgICAgICAgPSAweDhEOTQ7CiAgY29uc3QgUkdCX0lOVEVHRVIgICAgICAgICAgICAgICAgICA9IDB4OEQ5ODsKICBjb25zdCBSR0JBX0lOVEVHRVIgICAgICAgICAgICAgICAgID0gMHg4RDk5OwoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0dXJlRm9ybWF0RGV0YWlscwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0ZXh0dXJlRm9ybWF0IGZvcm1hdCB0byBwYXNzIHRleEltYWdlMkQgYW5kIHNpbWlsYXIgZnVuY3Rpb25zLgogICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gY29sb3JSZW5kZXJhYmxlIHRydWUgaWYgeW91IGNhbiByZW5kZXIgdG8gdGhpcyBmb3JtYXQgb2YgdGV4dHVyZS4KICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IHRleHR1cmVGaWx0ZXJhYmxlIHRydWUgaWYgeW91IGNhbiBmaWx0ZXIgdGhlIHRleHR1cmUsIGZhbHNlIGlmIHlvdSBjYW4gb255IHVzZSBgTkVBUkVTVGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJbXX0gdHlwZSBBcnJheSBvZiBwb3NzaWJsZSB0eXBlcyB5b3UgY2FuIHBhc3MgdG8gdGV4SW1hZ2UyRCBhbmQgc2ltaWxhciBmdW5jdGlvbgogICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxudW1iZXIsbnVtYmVyPn0gYnl0ZXNQZXJFbGVtZW50TWFwIEEgbWFwIG9mIHR5cGVzIHRvIGJ5dGVzIHBlciBlbGVtZW50CiAgICogQHByaXZhdGUKICAgKi8KCiAgbGV0IHNfdGV4dHVyZUludGVybmFsRm9ybWF0SW5mbzsKICBmdW5jdGlvbiBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KSB7CiAgICBpZiAoIXNfdGV4dHVyZUludGVybmFsRm9ybWF0SW5mbykgewogICAgICAvLyBOT1RFOiB0aGVzZSBwcm9wZXJ0aWVzIG5lZWQgdW5pcXVlIG5hbWVzIHNvIHdlIGNhbiBsZXQgVWdsaWZ5IG1hbmdsZSB0aGUgbmFtZS4KICAgICAgY29uc3QgdCA9IHt9OwogICAgICAvLyB1bnNpemVkIGZvcm1hdHMKICAgICAgdFtBTFBIQV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBBTFBIQSwgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMSwgMiwgMiwgNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxLCBIQUxGX0ZMT0FULCBIQUxGX0ZMT0FUX09FUywgRkxPQVQkMV0sIH07CiAgICAgIHRbTFVNSU5BTkNFXSAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogTFVNSU5BTkNFLCAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzEsIDIsIDIsIDRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMSwgSEFMRl9GTE9BVCwgSEFMRl9GTE9BVF9PRVMsIEZMT0FUJDFdLCB9OwogICAgICB0W0xVTUlOQU5DRV9BTFBIQV0gICAgPSB7IHRleHR1cmVGb3JtYXQ6IExVTUlOQU5DRV9BTFBIQSwgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFsyLCA0LCA0LCA4XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDEsIEhBTEZfRkxPQVQsIEhBTEZfRkxPQVRfT0VTLCBGTE9BVCQxXSwgfTsKICAgICAgdFtSR0JdICAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0IsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMywgNiwgNiwgMTIsIDJdLCAgICB0eXBlOiBbVU5TSUdORURfQllURSQxLCBIQUxGX0ZMT0FULCBIQUxGX0ZMT0FUX09FUywgRkxPQVQkMSwgVU5TSUdORURfU0hPUlRfNV82XzVdLCB9OwogICAgICB0W1JHQkEkMV0gICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQSQxLCAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbNCwgOCwgOCwgMTYsIDIsIDJdLCB0eXBlOiBbVU5TSUdORURfQllURSQxLCBIQUxGX0ZMT0FULCBIQUxGX0ZMT0FUX09FUywgRkxPQVQkMSwgVU5TSUdORURfU0hPUlRfNF80XzRfNCwgVU5TSUdORURfU0hPUlRfNV81XzVfMV0sIH07CiAgICAgIHRbREVQVEhfQ09NUE9ORU5UJDFdICAgID0geyB0ZXh0dXJlRm9ybWF0OiBERVBUSF9DT01QT05FTlQkMSwgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsyLCA0XSwgICAgICAgICAgICAgIHR5cGU6IFtVTlNJR05FRF9JTlQkMSwgVU5TSUdORURfU0hPUlQkMV0sIH07CgogICAgICAvLyBzaXplZCBmb3JtYXRzCiAgICAgIHRbUjhdICAgICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVELCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzFdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMV0sIH07CiAgICAgIHRbUjhfU05PUk1dICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVELCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzFdLCAgICAgICAgdHlwZTogW0JZVEVdLCB9OwogICAgICB0W1IxNkZdICAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJFRCwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFs0LCAyXSwgICAgIHR5cGU6IFtGTE9BVCQxLCBIQUxGX0ZMT0FUXSwgfTsKICAgICAgdFtSMzJGXSAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRUQsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbRkxPQVQkMV0sIH07CiAgICAgIHRbUjhVSV0gICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVEX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzFdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMV0sIH07CiAgICAgIHRbUjhJXSAgICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVEX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzFdLCAgICAgICAgdHlwZTogW0JZVEVdLCB9OwogICAgICB0W1IxNlVJXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJFRF9JTlRFR0VSLCAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsyXSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9TSE9SVCQxXSwgfTsKICAgICAgdFtSMTZJXSAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRURfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbU0hPUlRdLCB9OwogICAgICB0W1IzMlVJXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJFRF9JTlRFR0VSLCAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9JTlQkMV0sIH07CiAgICAgIHRbUjMySV0gICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVEX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW0lOVCQxXSwgfTsKICAgICAgdFtSRzhdICAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRywgICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSRzhfU05PUk1dICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRywgICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbQllURV0sIH07CiAgICAgIHRbUkcxNkZdICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkcsICAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzgsIDRdLCAgICAgdHlwZTogW0ZMT0FUJDEsIEhBTEZfRkxPQVRdLCB9OwogICAgICB0W1JHMzJGXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHLCAgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs4XSwgICAgICAgIHR5cGU6IFtGTE9BVCQxXSwgfTsKICAgICAgdFtSRzhVSV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR19JTlRFR0VSLCAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSRzhJXSAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR19JTlRFR0VSLCAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbQllURV0sIH07CiAgICAgIHRbUkcxNlVJXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdfSU5URUdFUiwgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX1NIT1JUJDFdLCB9OwogICAgICB0W1JHMTZJXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHX0lOVEVHRVIsICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtTSE9SVF0sIH07CiAgICAgIHRbUkczMlVJXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdfSU5URUdFUiwgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzhdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0lOVCQxXSwgfTsKICAgICAgdFtSRzMySV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR19JTlRFR0VSLCAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbOF0sICAgICAgICB0eXBlOiBbSU5UJDFdLCB9OwogICAgICB0W1JHQjhdICAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFszXSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDFdLCB9OwogICAgICB0W1NSR0I4XSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFszXSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDFdLCB9OwogICAgICB0W1JHQjU2NSQxXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCLCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzMsIDJdLCAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMSwgVU5TSUdORURfU0hPUlRfNV82XzVdLCB9OwogICAgICB0W1JHQjhfU05PUk1dICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFszXSwgICAgICAgIHR5cGU6IFtCWVRFXSwgfTsKICAgICAgdFtSMTFGX0cxMUZfQjEwRl0gICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0IsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMTIsIDYsIDRdLCB0eXBlOiBbRkxPQVQkMSwgSEFMRl9GTE9BVCwgVU5TSUdORURfSU5UXzEwRl8xMUZfMTFGX1JFVl0sIH07CiAgICAgIHRbUkdCOV9FNV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCLCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzEyLCA2LCA0XSwgdHlwZTogW0ZMT0FUJDEsIEhBTEZfRkxPQVQsIFVOU0lHTkVEX0lOVF81XzlfOV85X1JFVl0sIH07CiAgICAgIHRbUkdCMTZGXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCLCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzEyLCA2XSwgICAgdHlwZTogW0ZMT0FUJDEsIEhBTEZfRkxPQVRdLCB9OwogICAgICB0W1JHQjMyRl0gICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsxMl0sICAgICAgIHR5cGU6IFtGTE9BVCQxXSwgfTsKICAgICAgdFtSR0I4VUldICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbM10sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSR0I4SV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbM10sICAgICAgICB0eXBlOiBbQllURV0sIH07CiAgICAgIHRbUkdCMTZVSV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzZdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX1NIT1JUJDFdLCB9OwogICAgICB0W1JHQjE2SV0gICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQl9JTlRFR0VSLCAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs2XSwgICAgICAgIHR5cGU6IFtTSE9SVF0sIH07CiAgICAgIHRbUkdCMzJVSV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzEyXSwgICAgICAgdHlwZTogW1VOU0lHTkVEX0lOVCQxXSwgfTsKICAgICAgdFtSR0IzMkldICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMTJdLCAgICAgICB0eXBlOiBbSU5UJDFdLCB9OwogICAgICB0W1JHQkE4XSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEkMSwgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMV0sIH07CiAgICAgIHRbU1JHQjhfQUxQSEE4XSAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQSQxLCAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSR0JBOF9TTk9STV0gICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBJDEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtCWVRFXSwgfTsKICAgICAgdFtSR0I1X0ExJDFdICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEkMSwgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzQsIDIsIDRdLCAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMSwgVU5TSUdORURfU0hPUlRfNV81XzVfMSwgVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWXSwgfTsKICAgICAgdFtSR0JBNCQxXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEkMSwgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzQsIDJdLCAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMSwgVU5TSUdORURfU0hPUlRfNF80XzRfNF0sIH07CiAgICAgIHRbUkdCMTBfQTJdICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQSQxLCAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWXSwgfTsKICAgICAgdFtSR0JBMTZGXSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBJDEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFsxNiwgOF0sICAgIHR5cGU6IFtGTE9BVCQxLCBIQUxGX0ZMT0FUXSwgfTsKICAgICAgdFtSR0JBMzJGXSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBJDEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsxNl0sICAgICAgIHR5cGU6IFtGTE9BVCQxXSwgfTsKICAgICAgdFtSR0JBOFVJXSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBX0lOVEVHRVIsICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSR0JBOEldICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBX0lOVEVHRVIsICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbQllURV0sIH07CiAgICAgIHRbUkdCMTBfQTJVSV0gICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0lOVF8yXzEwXzEwXzEwX1JFVl0sIH07CiAgICAgIHRbUkdCQTE2VUldICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzhdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX1NIT1JUJDFdLCB9OwogICAgICB0W1JHQkExNkldICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkFfSU5URUdFUiwgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs4XSwgICAgICAgIHR5cGU6IFtTSE9SVF0sIH07CiAgICAgIHRbUkdCQTMySV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzE2XSwgICAgICAgdHlwZTogW0lOVCQxXSwgfTsKICAgICAgdFtSR0JBMzJVSV0gICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBX0lOVEVHRVIsICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMTZdLCAgICAgICB0eXBlOiBbVU5TSUdORURfSU5UJDFdLCB9OwogICAgICAvLyBTaXplZCBJbnRlcm5hbAogICAgICB0W0RFUFRIX0NPTVBPTkVOVDE2JDFdICA9IHsgdGV4dHVyZUZvcm1hdDogREVQVEhfQ09NUE9ORU5UJDEsIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMiwgNF0sICAgICB0eXBlOiBbVU5TSUdORURfU0hPUlQkMSwgVU5TSUdORURfSU5UJDFdLCB9OwogICAgICB0W0RFUFRIX0NPTVBPTkVOVDI0JDFdICA9IHsgdGV4dHVyZUZvcm1hdDogREVQVEhfQ09NUE9ORU5UJDEsIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfSU5UJDFdLCB9OwogICAgICB0W0RFUFRIX0NPTVBPTkVOVDMyRiQxXSA9IHsgdGV4dHVyZUZvcm1hdDogREVQVEhfQ09NUE9ORU5UJDEsIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbRkxPQVQkMV0sIH07CiAgICAgIHRbREVQVEgyNF9TVEVOQ0lMOCQxXSAgID0geyB0ZXh0dXJlRm9ybWF0OiBERVBUSF9TVEVOQ0lMJDEsICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9JTlRfMjRfOF0sIH07CiAgICAgIHRbREVQVEgzMkZfU1RFTkNJTDgkMV0gID0geyB0ZXh0dXJlRm9ybWF0OiBERVBUSF9TVEVOQ0lMJDEsICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtGTE9BVF8zMl9VTlNJR05FRF9JTlRfMjRfOF9SRVZdLCB9OwoKICAgICAgT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihpbnRlcm5hbEZvcm1hdCkgewogICAgICAgIGNvbnN0IGluZm8gPSB0W2ludGVybmFsRm9ybWF0XTsKICAgICAgICBpbmZvLmJ5dGVzUGVyRWxlbWVudE1hcCA9IHt9OwogICAgICAgIGluZm8uYnl0ZXNQZXJFbGVtZW50LmZvckVhY2goZnVuY3Rpb24oYnl0ZXNQZXJFbGVtZW50LCBuZHgpIHsKICAgICAgICAgIGNvbnN0IHR5cGUgPSBpbmZvLnR5cGVbbmR4XTsKICAgICAgICAgIGluZm8uYnl0ZXNQZXJFbGVtZW50TWFwW3R5cGVdID0gYnl0ZXNQZXJFbGVtZW50OwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgc190ZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvID0gdDsKICAgIH0KICAgIHJldHVybiBzX3RleHR1cmVJbnRlcm5hbEZvcm1hdEluZm9baW50ZXJuYWxGb3JtYXRdOwogIH0KCiAgLyoqCiAgICogR2V0cyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHBlciBlbGVtZW50IGZvciBhIGdpdmVuIGludGVybmFsRm9ybWF0IC8gdHlwZQogICAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcm5hbEZvcm1hdCBUaGUgaW50ZXJuYWxGb3JtYXQgcGFyYW1ldGVyIGZyb20gdGV4SW1hZ2UyRCBldGMuLgogICAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlIFRoZSB0eXBlIHBhcmFtZXRlciBmb3IgdGV4SW1hZ2UyRCBldGMuLgogICAqIEByZXR1cm4ge251bWJlcn0gdGhlIG51bWJlciBvZiBieXRlcyBwZXIgZWxlbWVudCBmb3IgdGhlIGdpdmVuIGludGVybmFsRm9ybWF0LCB0eXBlIGNvbWJvCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzCiAgICovCiAgZnVuY3Rpb24gZ2V0Qnl0ZXNQZXJFbGVtZW50Rm9ySW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXQsIHR5cGUpIHsKICAgIGNvbnN0IGluZm8gPSBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KTsKICAgIGlmICghaW5mbykgewogICAgICB0aHJvdyAidW5rbm93biBpbnRlcm5hbCBmb3JtYXQiOwogICAgfQogICAgY29uc3QgYnl0ZXNQZXJFbGVtZW50ID0gaW5mby5ieXRlc1BlckVsZW1lbnRNYXBbdHlwZV07CiAgICBpZiAoYnl0ZXNQZXJFbGVtZW50ID09PSB1bmRlZmluZWQpIHsKICAgICAgdGhyb3cgInVua25vd24gaW50ZXJuYWwgZm9ybWF0IjsKICAgIH0KICAgIHJldHVybiBieXRlc1BlckVsZW1lbnQ7CiAgfQoKICAvKioKICAgKiBJbmZvIHJlbGF0ZWQgdG8gYSBzcGVjaWZpYyB0ZXh0dXJlIGludGVybmFsRm9ybWF0IGFzIHJldHVybmVkCiAgICogZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wvdGV4dHVyZXMuZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0fS4KICAgKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHR1cmVGb3JtYXRJbmZvCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGZvcm1hdCBGb3JtYXQgdG8gcGFzcyB0byB0ZXhJbWFnZTJEIGFuZCByZWxhdGVkIGZ1bmN0aW9ucwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0eXBlIFR5cGUgdG8gcGFzcyB0byB0ZXhJbWFnZTJEIGFuZCByZWxhdGVkIGZ1bmN0aW9ucwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwoKICAvKioKICAgKiBHZXRzIHRoZSBmb3JtYXQgYW5kIHR5cGUgZm9yIGEgZ2l2ZW4gaW50ZXJuYWxGb3JtYXQKICAgKgogICAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcm5hbEZvcm1hdCBUaGUgaW50ZXJuYWwgZm9ybWF0CiAgICogQHJldHVybiB7bW9kdWxlOnR3Z2wvdGV4dHVyZXMuVGV4dHVyZUZvcm1hdEluZm99IHRoZSBjb3JyZXNwb25kaW5nIGZvcm1hdCBhbmQgdHlwZSwKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXMKICAgKi8KICBmdW5jdGlvbiBnZXRGb3JtYXRBbmRUeXBlRm9ySW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXQpIHsKICAgIGNvbnN0IGluZm8gPSBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KTsKICAgIGlmICghaW5mbykgewogICAgICB0aHJvdyAidW5rbm93biBpbnRlcm5hbCBmb3JtYXQiOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgZm9ybWF0OiBpbmZvLnRleHR1cmVGb3JtYXQsCiAgICAgIHR5cGU6IGluZm8udHlwZVswXSwKICAgIH07CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgdmFsdWUgaXMgcG93ZXIgb2YgMgogICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBudW1iZXIgdG8gY2hlY2suCiAgICogQHJldHVybiB0cnVlIGlmIHZhbHVlIGlzIHBvd2VyIG9mIDIKICAgKiBAcHJpdmF0ZQogICAqLwogIGZ1bmN0aW9uIGlzUG93ZXJPZjIodmFsdWUpIHsKICAgIHJldHVybiAodmFsdWUgJiAodmFsdWUgLSAxKSkgPT09IDA7CiAgfQoKICAvKioKICAgKiBHZXRzIHdoZXRoZXIgb3Igbm90IHdlIGNhbiBnZW5lcmF0ZSBtaXBzIGZvciB0aGUgZ2l2ZW4KICAgKiBpbnRlcm5hbCBmb3JtYXQuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBUaGUgd2lkdGggcGFyYW1ldGVyIGZyb20gdGV4SW1hZ2UyRCBldGMuLgogICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgVGhlIGhlaWdodCBwYXJhbWV0ZXIgZnJvbSB0ZXhJbWFnZTJEIGV0Yy4uCiAgICogQHBhcmFtIHtudW1iZXJ9IGludGVybmFsRm9ybWF0IFRoZSBpbnRlcm5hbEZvcm1hdCBwYXJhbWV0ZXIgZnJvbSB0ZXhJbWFnZTJEIGV0Yy4uCiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB3ZSBjYW4gZ2VuZXJhdGUgbWlwcwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIGNhbkdlbmVyYXRlTWlwbWFwKGdsLCB3aWR0aCwgaGVpZ2h0LCBpbnRlcm5hbEZvcm1hdCkgewogICAgaWYgKCFpc1dlYkdMMihnbCkpIHsKICAgICAgcmV0dXJuIGlzUG93ZXJPZjIod2lkdGgpICYmIGlzUG93ZXJPZjIoaGVpZ2h0KTsKICAgIH0KICAgIGNvbnN0IGluZm8gPSBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KTsKICAgIGlmICghaW5mbykgewogICAgICB0aHJvdyAidW5rbm93biBpbnRlcm5hbCBmb3JtYXQiOwogICAgfQogICAgcmV0dXJuIGluZm8uY29sb3JSZW5kZXJhYmxlICYmIGluZm8udGV4dHVyZUZpbHRlcmFibGU7CiAgfQoKICAvKioKICAgKiBHZXRzIHdoZXRoZXIgb3Igbm90IHdlIGNhbiBnZW5lcmF0ZSBtaXBzIGZvciB0aGUgZ2l2ZW4gZm9ybWF0CiAgICogQHBhcmFtIHtudW1iZXJ9IGludGVybmFsRm9ybWF0IFRoZSBpbnRlcm5hbEZvcm1hdCBwYXJhbWV0ZXIgZnJvbSB0ZXhJbWFnZTJEIGV0Yy4uCiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB3ZSBjYW4gZ2VuZXJhdGUgbWlwcwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIGNhbkZpbHRlcihpbnRlcm5hbEZvcm1hdCkgewogICAgY29uc3QgaW5mbyA9IGdldFRleHR1cmVJbnRlcm5hbEZvcm1hdEluZm8oaW50ZXJuYWxGb3JtYXQpOwogICAgaWYgKCFpbmZvKSB7CiAgICAgIHRocm93ICJ1bmtub3duIGludGVybmFsIGZvcm1hdCI7CiAgICB9CiAgICByZXR1cm4gaW5mby50ZXh0dXJlRmlsdGVyYWJsZTsKICB9CgogIC8qKgogICAqIEdldHMgdGhlIHRleHR1cmUgdHlwZSBmb3IgYSBnaXZlbiBhcnJheSB0eXBlLgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHJldHVybiB7bnVtYmVyfSB0aGUgZ2wgdGV4dHVyZSB0eXBlCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBnZXRUZXh0dXJlVHlwZUZvckFycmF5VHlwZShnbCwgc3JjLCBkZWZhdWx0VHlwZSkgewogICAgaWYgKGlzQXJyYXlCdWZmZXIoc3JjKSkgewogICAgICByZXR1cm4gZ2V0R0xUeXBlRm9yVHlwZWRBcnJheShzcmMpOwogICAgfQogICAgcmV0dXJuIGRlZmF1bHRUeXBlIHx8IFVOU0lHTkVEX0JZVEUkMTsKICB9CgogIGZ1bmN0aW9uIGd1ZXNzRGltZW5zaW9ucyhnbCwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0LCBudW1FbGVtZW50cykgewogICAgaWYgKG51bUVsZW1lbnRzICUgMSAhPT0gMCkgewogICAgICB0aHJvdyAiY2FuJ3QgZ3Vlc3MgZGltZW5zaW9ucyI7CiAgICB9CiAgICBpZiAoIXdpZHRoICYmICFoZWlnaHQpIHsKICAgICAgY29uc3Qgc2l6ZSA9IE1hdGguc3FydChudW1FbGVtZW50cyAvICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSA/IDYgOiAxKSk7CiAgICAgIGlmIChzaXplICUgMSA9PT0gMCkgewogICAgICAgIHdpZHRoID0gc2l6ZTsKICAgICAgICBoZWlnaHQgPSBzaXplOwogICAgICB9IGVsc2UgewogICAgICAgIHdpZHRoID0gbnVtRWxlbWVudHM7CiAgICAgICAgaGVpZ2h0ID0gMTsKICAgICAgfQogICAgfSBlbHNlIGlmICghaGVpZ2h0KSB7CiAgICAgIGhlaWdodCA9IG51bUVsZW1lbnRzIC8gd2lkdGg7CiAgICAgIGlmIChoZWlnaHQgJSAxKSB7CiAgICAgICAgdGhyb3cgImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMiOwogICAgICB9CiAgICB9IGVsc2UgaWYgKCF3aWR0aCkgewogICAgICB3aWR0aCA9IG51bUVsZW1lbnRzIC8gaGVpZ2h0OwogICAgICBpZiAod2lkdGggJSAxKSB7CiAgICAgICAgdGhyb3cgImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMiOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gewogICAgICB3aWR0aDogd2lkdGgsCiAgICAgIGhlaWdodDogaGVpZ2h0LAogICAgfTsKICB9CgogIC8qKgogICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIHNvdXJjZSBmb3IgYSB0ZXh0dXJlLgogICAqIEBjYWxsYmFjayBUZXh0dXJlRnVuYwogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgdGhlIHRleHR1cmUgb3B0aW9ucwogICAqIEByZXR1cm4geyp9IFJldHVybnMgYW55IG9mIHRoZSB0aGluZ3MgZG9jdW1lbnRlZCBmb3IgYHNyY2AgZm9yIHtAbGluayBtb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30uCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIFRleHR1cmUgb3B0aW9ucyBwYXNzZWQgdG8gbW9zdCB0ZXh0dXJlIGZ1bmN0aW9ucy4gRWFjaCBmdW5jdGlvbiB3aWxsIHVzZSB3aGF0ZXZlciBvcHRpb25zCiAgICogYXJlIGFwcHJvcHJpYXRlIGZvciBpdHMgbmVlZHMuIFRoaXMgbGV0cyB5b3UgcGFzcyB0aGUgc2FtZSBvcHRpb25zIHRvIGFsbCBmdW5jdGlvbnMuCiAgICoKICAgKiBOb3RlOiBBIGBUZXhJbWFnZVNvdXJjZWAgaXMgZGVmaW5lZCBpbiB0aGUgV2ViR0wgc3BlYyBhcyBhIGBIVE1MSW1hZ2VFbGVtZW50YCwgYEhUTUxWaWRlb0VsZW1lbnRgLAogICAqIGBIVE1MQ2FudmFzRWxlbWVudGAsIGBJbWFnZUJpdG1hcGAsIG9yIGBJbWFnZURhdGFgLgogICAqCiAgICogQHR5cGVkZWYge09iamVjdH0gVGV4dHVyZU9wdGlvbnMKICAgKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldF0gdGhlIHR5cGUgb2YgdGV4dHVyZSBgZ2wuVEVYVFVSRV8yRGAgb3IgYGdsLlRFWFRVUkVfQ1VCRV9NQVBgLiBEZWZhdWx0cyB0byBgZ2wuVEVYVFVSRV8yRGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtsZXZlbF0gdGhlIG1pcCBsZXZlbCB0byBhZmZlY3QuIERlZmF1bHRzIHRvIDAuIE5vdGUsIGlmIHNldCBhdXRvIHdpbGwgYmUgY29uc2lkZXJlZCBmYWxzZSB1bmxlc3MgZXhwbGljaXRseSBzZXQgdG8gdHJ1ZS4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW3dpZHRoXSB0aGUgd2lkdGggb2YgdGhlIHRleHR1cmUuIE9ubHkgdXNlZCBpZiBzcmMgaXMgYW4gYXJyYXkgb3IgdHlwZWQgYXJyYXkgb3IgbnVsbC4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2hlaWdodF0gdGhlIGhlaWdodCBvZiBhIHRleHR1cmUuIE9ubHkgdXNlZCBpZiBzcmMgaXMgYW4gYXJyYXkgb3IgdHlwZWQgYXJyYXkgb3IgbnVsbC4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2RlcHRoXSB0aGUgZGVwdGggb2YgYSB0ZXh0dXJlLiBPbmx5IHVzZWQgaWYgc3JjIGlzIGFuIGFycmF5IG9yIHR5cGUgYXJyYXkgb3IgbnVsbCBhbmQgdGFyZ2V0IGlzIGBURVhUVVJFXzNEYCAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5dIHRoZSBtaW4gZmlsdGVyIHNldHRpbmcgKGVnLiBgZ2wuTElORUFSYCkuIERlZmF1bHRzIHRvIGBnbC5ORUFSRVNUX01JUE1BUF9MSU5FQVJgCiAgICogICAgIG9yIGlmIHRleHR1cmUgaXMgbm90IGEgcG93ZXIgb2YgMiBvbiBib3RoIGRpbWVuc2lvbnMgdGhlbiBkZWZhdWx0cyB0byBgZ2wuTElORUFSYC4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW21hZ10gdGhlIG1hZyBmaWx0ZXIgc2V0dGluZyAoZWcuIGBnbC5MSU5FQVJgKS4gRGVmYXVsdHMgdG8gYGdsLkxJTkVBUmAKICAgKiBAcHJvcGVydHkge251bWJlcn0gW21pbk1hZ10gYm90aCB0aGUgbWluIGFuZCBtYWcgZmlsdGVyIHNldHRpbmdzLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaW50ZXJuYWxGb3JtYXRdIGludGVybmFsIGZvcm1hdCBmb3IgdGV4dHVyZS4gRGVmYXVsdHMgdG8gYGdsLlJHQkFgCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtmb3JtYXRdIGZvcm1hdCBmb3IgdGV4dHVyZS4gRGVmYXVsdHMgdG8gYGdsLlJHQkFgLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHlwZV0gdHlwZSBmb3IgdGV4dHVyZS4gRGVmYXVsdHMgdG8gYGdsLlVOU0lHTkVEX0JZVEVgIHVubGVzcyBgc3JjYCBpcyBBcnJheUJ1ZmZlclZpZXcuIElmIGBzcmNgCiAgICogICAgIGlzIEFycmF5QnVmZmVyVmlldyBkZWZhdWx0cyB0byB0eXBlIHRoYXQgbWF0Y2hlcyBBcnJheUJ1ZmZlclZpZXcgdHlwZS4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW3dyYXBdIFRleHR1cmUgd3JhcHBpbmcgZm9yIGJvdGggUyBhbmQgVCAoYW5kIFIgaWYgVEVYVFVSRV8zRCBvciBXZWJHTFNhbXBsZXIpLiBEZWZhdWx0cyB0byBgZ2wuUkVQRUFUYCBmb3IgMkQgdW5sZXNzIHNyYyBpcyBXZWJHTDEgYW5kIHNyYyBub3QgbnBvdCBhbmQgYGdsLkNMQU1QX1RPX0VER0VgIGZvciBjdWJlCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt3cmFwU10gVGV4dHVyZSB3cmFwcGluZyBmb3IgUy4gRGVmYXVsdHMgdG8gYGdsLlJFUEVBVGAgYW5kIGBnbC5DTEFNUF9UT19FREdFYCBmb3IgY3ViZS4gSWYgc2V0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgd3JhcGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt3cmFwVF0gVGV4dHVyZSB3cmFwcGluZyBmb3IgVC4gRGVmYXVsdHMgdG8gYGdsLlJFUEVBVGAgYW5kIGBnbC5DTEFNUF9UT19FREdFYCBmb3IgY3ViZS4gSWYgc2V0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgd3JhcGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt3cmFwUl0gVGV4dHVyZSB3cmFwcGluZyBmb3IgUi4gRGVmYXVsdHMgdG8gYGdsLlJFUEVBVGAgYW5kIGBnbC5DTEFNUF9UT19FREdFYCBmb3IgY3ViZS4gSWYgc2V0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgd3JhcGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5Mb2RdIFRFWFRVUkVfTUlOX0xPRCBzZXR0aW5nCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhMb2RdIFRFWFRVUkVfTUFYX0xPRCBzZXR0aW5nCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtiYXNlTGV2ZWxdIFRFWFRVUkVfQkFTRV9MRVZFTCBzZXR0aW5nCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhMZXZlbF0gVEVYVFVSRV9NQVhfTEVWRUwgc2V0dGluZwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY29tcGFyZUZ1bmNdIFRFWFRVUkVfQ09NUEFSRV9GVU5DIHNldHRpbmcKICAgKiBAcHJvcGVydHkge251bWJlcn0gW2NvbXBhcmVNb2RlXSBURVhUVVJFX0NPTVBBUkVfTU9ERSBzZXR0aW5nCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt1bnBhY2tBbGlnbm1lbnRdIFRoZSBgZ2wuVU5QQUNLX0FMSUdOTUVOVGAgdXNlZCB3aGVuIHVwbG9hZGluZyBhbiBhcnJheS4gRGVmYXVsdHMgdG8gMS4KICAgKiBAcHJvcGVydHkge251bWJlcltdfEFycmF5QnVmZmVyVmlld30gW2NvbG9yXSBDb2xvciB0byBpbml0aWFsaXplIHRoaXMgdGV4dHVyZSB3aXRoIGlmIGxvYWRpbmcgYW4gaW1hZ2UgYXN5bmNocm9ub3VzbHkuCiAgICogICAgIFRoZSBkZWZhdWx0IHVzZSBhIGJsdWUgMXgxIHBpeGVsIHRleHR1cmUuIFlvdSBjYW4gc2V0IGFub3RoZXIgZGVmYXVsdCBieSBjYWxsaW5nIGB0d2dsLnNldERlZmF1bHRzYAogICAqICAgICBvciB5b3UgY2FuIHNldCBhbiBpbmRpdmlkdWFsIHRleHR1cmUncyBpbml0aWFsIGNvbG9yIGJ5IHNldHRpbmcgdGhpcyBwcm9wZXJ0eS4gRXhhbXBsZTogYFsxLCAuNSwgLjUsIDFdYCA9IHBpbmsKICAgKiBAcHJvcGVydHkge251bWJlcn0gW3ByZW11bHRpcGx5QWxwaGFdIFdoZXRoZXIgb3Igbm90IHRvIHByZW11bHRpcGx5IGFscGhhLiBEZWZhdWx0cyB0byB3aGF0ZXZlciB0aGUgY3VycmVudCBzZXR0aW5nIGlzLgogICAqICAgICBUaGlzIGxldHMgeW91IHNldCBpdCBvbmNlIGJlZm9yZSBjYWxsaW5nIGB0d2dsLmNyZWF0ZVRleHR1cmVgIG9yIGB0d2dsLmNyZWF0ZVRleHR1cmVzYCBhbmQgb25seSBvdmVycmlkZQogICAqICAgICB0aGUgY3VycmVudCBzZXR0aW5nIGZvciBzcGVjaWZpYyB0ZXh0dXJlcy4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2ZsaXBZXSBXaGV0aGVyIG9yIG5vdCB0byBmbGlwIHRoZSB0ZXh0dXJlIHZlcnRpY2FsbHkgb24gdXBsb2FkLiBEZWZhdWx0cyB0byB3aGF0ZXZlciB0aGUgY3VycmVudCBzZXR0aW5nIGlzLgogICAqICAgICBUaGlzIGxldHMgeW91IHNldCBpdCBvbmNlIGJlZm9yZSBjYWxsaW5nIGB0d2dsLmNyZWF0ZVRleHR1cmVgIG9yIGB0d2dsLmNyZWF0ZVRleHR1cmVzYCBhbmQgb25seSBvdmVycmlkZQogICAqICAgICB0aGUgY3VycmVudCBzZXR0aW5nIGZvciBzcGVjaWZpYyB0ZXh0dXJlcy4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2NvbG9yc3BhY2VDb252ZXJzaW9uXSBXaGV0aGVyIG9yIG5vdCB0byBsZXQgdGhlIGJyb3dzZXIgZG8gY29sb3JzcGFjZSBjb252ZXJzaW9uIG9mIHRoZSB0ZXh0dXJlIG9uIHVwbG9hZC4gRGVmYXVsdHMgdG8gd2hhdGV2ZXIgdGhlIGN1cnJlbnQgc2V0dGluZyBpcy4KICAgKiAgICAgVGhpcyBsZXRzIHlvdSBzZXQgaXQgb25jZSBiZWZvcmUgY2FsbGluZyBgdHdnbC5jcmVhdGVUZXh0dXJlYCBvciBgdHdnbC5jcmVhdGVUZXh0dXJlc2AgYW5kIG9ubHkgb3ZlcnJpZGUKICAgKiAgICAgdGhlIGN1cnJlbnQgc2V0dGluZyBmb3Igc3BlY2lmaWMgdGV4dHVyZXMuCiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYXV0b10gSWYgYHVuZGVmaW5lZGAgb3IgYHRydWVgLCBpbiBXZWJHTDEsIHRleHR1cmUgZmlsdGVyaW5nIGlzIHNldCBhdXRvbWF0aWNhbGx5IGZvciBub24tcG93ZXIgb2YgMiBpbWFnZXMgYW5kCiAgICogICAgbWlwcyBhcmUgZ2VuZXJhdGVkIGZvciBwb3dlciBvZiAyIGltYWdlcy4gSW4gV2ViR0wyIG1pcHMgYXJlIGdlbmVyYXRlZCBpZiB0aGV5IGNhbiBiZS4gTm90ZTogaWYgYGxldmVsYCBpcyBzZXQgYWJvdmUKICAgKiAgICB0aGVuIHRoZW4gYGF1dG9gIGlzIGFzc3VtZWQgdG8gYmUgYGZhbHNlYCB1bmxlc3MgZXhwbGljaXR5IHNldCB0byBgdHJ1ZWAuCiAgICogQHByb3BlcnR5IHtudW1iZXJbXX0gW2N1YmVGYWNlT3JkZXJdIFRoZSBvcmRlciB0aGF0IGN1YmUgZmFjZXMgYXJlIHB1bGxlZCBvdXQgb2YgYW4gaW1nIG9yIHNldCBvZiBpbWFnZXMuIFRoZSBkZWZhdWx0IGlzCiAgICoKICAgKiAgICAgW2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWCwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWSwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWSwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWiwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWl0KICAgKgogICAqIEBwcm9wZXJ0eSB7KG51bWJlcltdfEFycmF5QnVmZmVyVmlld3xUZXhJbWFnZVNvdXJjZXxUZXhJbWFnZVNvdXJjZVtdfHN0cmluZ3xzdHJpbmdbXXxtb2R1bGU6dHdnbC5UZXh0dXJlRnVuYyl9IFtzcmNdIHNvdXJjZSBmb3IgdGV4dHVyZQogICAqCiAgICogICAgSWYgYHN0cmluZ2AgdGhlbiBpdCdzIGFzc3VtZWQgdG8gYmUgYSBVUkwgdG8gYW4gaW1hZ2UuIFRoZSBpbWFnZSB3aWxsIGJlIGRvd25sb2FkZWQgYXN5bmMuIEEgdXNhYmxlCiAgICogICAgMXgxIHBpeGVsIHRleHR1cmUgd2lsbCBiZSByZXR1cm5lZCBpbW1lZGlhdGVseS4gVGhlIHRleHR1cmUgd2lsbCBiZSB1cGRhdGVkIG9uY2UgdGhlIGltYWdlIGhhcyBkb3dubG9hZGVkLgogICAqICAgIElmIGB0YXJnZXRgIGlzIGBnbC5URVhUVVJFX0NVQkVfTUFQYCB3aWxsIGF0dGVtcHQgdG8gZGl2aWRlIGltYWdlIGludG8gNiBzcXVhcmUgcGllY2VzLiAxeDYsIDZ4MSwgM3gyLCAyeDMuCiAgICogICAgVGhlIHBpZWNlcyB3aWxsIGJlIHVwbG9hZGVkIGluIGBjdWJlRmFjZU9yZGVyYAogICAqCiAgICogICAgSWYgYHN0cmluZ1tdYCBvciBgVGV4SW1hZ2VTb3VyY2VbXWAgYW5kIHRhcmdldCBpcyBgZ2wuVEVYVFVSRV9DVUJFX01BUGAgdGhlbiBpdCBtdXN0IGhhdmUgNiBlbnRyaWVzLCBvbmUgZm9yIGVhY2ggZmFjZSBvZiBhIGN1YmUgbWFwLgogICAqCiAgICogICAgSWYgYHN0cmluZ1tdYCBvciBgVGV4SW1hZ2VTb3VyY2VbXWAgYW5kIHRhcmdldCBpcyBgZ2wuVEVYVFVSRV8yRF9BUlJBWWAgdGhlbiBlYWNoIGVudHJ5IGlzIGEgc2xpY2Ugb2YgdGhlIGEgMmQgYXJyYXkgdGV4dHVyZQogICAqICAgIGFuZCB3aWxsIGJlIHNjYWxlZCB0byB0aGUgc3BlY2lmaWVkIHdpZHRoIGFuZCBoZWlnaHQgT1IgdG8gdGhlIHNpemUgb2YgdGhlIGZpcnN0IGltYWdlIHRoYXQgbG9hZHMuCiAgICoKICAgKiAgICBJZiBgVGV4SW1hZ2VTb3VyY2VgIHRoZW4gaXQgd2lsIGJlIHVzZWQgaW1tZWRpYXRlbHkgdG8gY3JlYXRlIHRoZSBjb250ZW50cyBvZiB0aGUgdGV4dHVyZS4gRXhhbXBsZXMgYEhUTUxJbWFnZUVsZW1lbnRgLAogICAqICAgIGBIVE1MQ2FudmFzRWxlbWVudGAsIGBIVE1MVmlkZW9FbGVtZW50YC4KICAgKgogICAqICAgIElmIGBudW1iZXJbXWAgb3IgYEFycmF5QnVmZmVyVmlld2AgaXQncyBhc3N1bWVkIHRvIGJlIGRhdGEgZm9yIGEgdGV4dHVyZS4gSWYgYHdpZHRoYCBvciBgaGVpZ2h0YCBpcwogICAqICAgIG5vdCBzcGVjaWZpZWQgaXQgaXMgZ3Vlc3NlZCBhcyBmb2xsb3dzLiBGaXJzdCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGlzIGNvbXB1dGVkIGJ5IGBzcmMubGVuZ3RoIC8gbnVtQ29tcG9uZW50c2AKICAgKiAgICB3aGVyZSBgbnVtQ29tcG9uZW50c2AgaXMgZGVyaXZlZCBmcm9tIGBmb3JtYXRgLiBJZiBgdGFyZ2V0YCBpcyBgZ2wuVEVYVFVSRV9DVUJFX01BUGAgdGhlbiBgbnVtRWxlbWVudHNgIGlzIGRpdmlkZWQKICAgKiAgICBieSA2LiBUaGVuCiAgICoKICAgKiAgICAqICAgSWYgbmVpdGhlciBgd2lkdGhgIG5vciBgaGVpZ2h0YCBhcmUgc3BlY2lmaWVkIGFuZCBgc3FydChudW1FbGVtZW50cylgIGlzIGFuIGludGVnZXIgdGhlbiB3aWR0aCBhbmQgaGVpZ2h0CiAgICogICAgICAgIGFyZSBzZXQgdG8gYHNxcnQobnVtRWxlbWVudHMpYC4gT3RoZXJ3aXNlIGB3aWR0aCA9IG51bUVsZW1lbnRzYCBhbmQgYGhlaWdodCA9IDFgLgogICAqCiAgICogICAgKiAgIElmIG9ubHkgb25lIG9mIGB3aWR0aGAgb3IgYGhlaWdodGAgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIG90aGVyIGVxdWFscyBgbnVtRWxlbWVudHMgLyBzcGVjaWZpZWREaW1lbnNpb25gLgogICAqCiAgICogSWYgYG51bWJlcltdYCB3aWxsIGJlIGNvbnZlcnRlZCB0byBgdHlwZWAuCiAgICoKICAgKiBJZiBgc3JjYCBpcyBhIGZ1bmN0aW9uIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggYSBgV2ViR0xSZW5kZXJpbmdDb250ZXh0YCBhbmQgdGhlc2Ugb3B0aW9ucy4KICAgKiBXaGF0ZXZlciBpdCByZXR1cm5zIGlzIHN1YmplY3QgdG8gdGhlc2UgcnVsZXMuIFNvIGl0IGNhbiByZXR1cm4gYSBzdHJpbmcgdXJsLCBhbiBgSFRNTEVsZW1lbnRgCiAgICogYW4gYXJyYXkgZXRjLi4uCiAgICoKICAgKiBJZiBgc3JjYCBpcyB1bmRlZmluZWQgdGhlbiBhbiBlbXB0eSB0ZXh0dXJlIHdpbGwgYmUgY3JlYXRlZCBvZiBzaXplIGB3aWR0aGAgYnkgYGhlaWdodGAuCiAgICoKICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2Nyb3NzT3JpZ2luXSBXaGF0IHRvIHNldCB0aGUgY3Jvc3NPcmlnaW4gcHJvcGVydHkgb2YgaW1hZ2VzIHdoZW4gdGhleSBhcmUgZG93bmxvYWRlZC4KICAgKiAgICBkZWZhdWx0OiB1bmRlZmluZWQuIEFsc28gc2VlIHtAbGluayBtb2R1bGU6dHdnbC5zZXREZWZhdWx0c30uCiAgICoKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogU2V0cyBhbnkgcGFja2luZyBzdGF0ZSB0aGF0IHdpbGwgYmUgc2V0IGJhc2VkIG9uIHRoZSBvcHRpb25zLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC4KICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gc2V0UGFja1N0YXRlKGdsLCBvcHRpb25zKSB7CiAgICBpZiAob3B0aW9ucy5jb2xvcnNwYWNlQ29udmVyc2lvbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19DT0xPUlNQQUNFX0NPTlZFUlNJT05fV0VCR0wsIG9wdGlvbnMuY29sb3JzcGFjZUNvbnZlcnNpb24pOwogICAgfQogICAgaWYgKG9wdGlvbnMucHJlbXVsdGlwbHlBbHBoYSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgb3B0aW9ucy5wcmVtdWx0aXBseUFscGhhKTsKICAgIH0KICAgIGlmIChvcHRpb25zLmZsaXBZICE9PSB1bmRlZmluZWQpIHsKICAgICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX0ZMSVBfWV9XRUJHTCwgb3B0aW9ucy5mbGlwWSk7CiAgICB9CiAgfQoKICAvKioKICAgKiBTZXQgc2tpcCBzdGF0ZSB0byBkZWZhdWx0cwogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBzZXRTa2lwU3RhdGVUb0RlZmF1bHQoZ2wpIHsKICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19BTElHTk1FTlQsIDQpOwogICAgaWYgKGlzV2ViR0wyKGdsKSkgewogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfUk9XX0xFTkdUSCwgMCk7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19JTUFHRV9IRUlHSFQsIDApOwogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfU0tJUF9QSVhFTFMsIDApOwogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfU0tJUF9ST1dTLCAwKTsKICAgICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX1NLSVBfSU1BR0VTLCAwKTsKICAgIH0KICB9CgogIC8qKgogICAqIFNldHMgdGhlIHBhcmFtZXRlcnMgb2YgYSB0ZXh0dXJlIG9yIHNhbXBsZXIKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bnVtYmVyfFdlYkdMU2FtcGxlcn0gdGFyZ2V0IHRleHR1cmUgdGFyZ2V0IG9yIHNhbXBsZXIKICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IHBhcmFtZXRlcmlGbiB0ZXhQYXJhbWV0ZXJpIG9yIHNhbXBsZXJQYXJhbWV0ZXJpIGZuCiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC4KICAgKiAgIFRoaXMgaXMgb2Z0ZW4gdGhlIHNhbWUgb3B0aW9ucyB5b3UgcGFzc2VkIGluIHdoZW4geW91IGNyZWF0ZWQgdGhlIHRleHR1cmUuCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBzZXRUZXh0dXJlU2FtcGxlclBhcmFtZXRlcnMoZ2wsIHRhcmdldCwgcGFyYW1ldGVyaUZuLCBvcHRpb25zKSB7CiAgICBpZiAob3B0aW9ucy5taW5NYWcpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9NSU5fRklMVEVSLCBvcHRpb25zLm1pbk1hZyk7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUFHX0ZJTFRFUiwgb3B0aW9ucy5taW5NYWcpOwogICAgfQogICAgaWYgKG9wdGlvbnMubWluKSB7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUlOX0ZJTFRFUiwgb3B0aW9ucy5taW4pOwogICAgfQogICAgaWYgKG9wdGlvbnMubWFnKSB7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUFHX0ZJTFRFUiwgb3B0aW9ucy5tYWcpOwogICAgfQogICAgaWYgKG9wdGlvbnMud3JhcCkgewogICAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX1dSQVBfUywgb3B0aW9ucy53cmFwKTsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1QsIG9wdGlvbnMud3JhcCk7CiAgICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QkMSB8fCBpc1NhbXBsZXIoZ2wsIHRhcmdldCkpIHsKICAgICAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX1dSQVBfUiwgb3B0aW9ucy53cmFwKTsKICAgICAgfQogICAgfQogICAgaWYgKG9wdGlvbnMud3JhcFIpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1IsIG9wdGlvbnMud3JhcFIpOwogICAgfQogICAgaWYgKG9wdGlvbnMud3JhcFMpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1MsIG9wdGlvbnMud3JhcFMpOwogICAgfQogICAgaWYgKG9wdGlvbnMud3JhcFQpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1QsIG9wdGlvbnMud3JhcFQpOwogICAgfQogICAgaWYgKG9wdGlvbnMubWluTG9kICE9PSB1bmRlZmluZWQpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9NSU5fTE9ELCBvcHRpb25zLm1pbkxvZCk7CiAgICB9CiAgICBpZiAob3B0aW9ucy5tYXhMb2QgIT09IHVuZGVmaW5lZCkgewogICAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX01BWF9MT0QsIG9wdGlvbnMubWF4TG9kKTsKICAgIH0KICAgIGlmIChvcHRpb25zLmJhc2VMZXZlbCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfQkFTRV9MRVZFTCwgb3B0aW9ucy5iYXNlTGV2ZWwpOwogICAgfQogICAgaWYgKG9wdGlvbnMubWF4TGV2ZWwgIT09IHVuZGVmaW5lZCkgewogICAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX01BWF9MRVZFTCwgb3B0aW9ucy5tYXhMZXZlbCk7CiAgICB9CiAgICBpZiAob3B0aW9ucy5jb21wYXJlRnVuYyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfQ09NUEFSRV9GVU5DLCBvcHRpb25zLmNvbXBhcmVGdW5jKTsKICAgIH0KICAgIGlmIChvcHRpb25zLmNvbXBhcmVNb2RlICE9PSB1bmRlZmluZWQpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9DT01QQVJFX01PREUsIG9wdGlvbnMuY29tcGFyZU1vZGUpOwogICAgfQogIH0KCiAgLyoqCiAgICogU2V0cyB0aGUgdGV4dHVyZSBwYXJhbWV0ZXJzIG9mIGEgdGV4dHVyZS4KICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIFdlYkdMVGV4dHVyZSB0byBzZXQgcGFyYW1ldGVycyBmb3IKICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBvcHRpb25zIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuCiAgICogICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIG9wdGlvbnMgeW91IHBhc3NlZCBpbiB3aGVuIHlvdSBjcmVhdGVkIHRoZSB0ZXh0dXJlLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIHNldFRleHR1cmVQYXJhbWV0ZXJzKGdsLCB0ZXgsIG9wdGlvbnMpIHsKICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQkMjsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIHNldFRleHR1cmVTYW1wbGVyUGFyYW1ldGVycyhnbCwgdGFyZ2V0LCBnbC50ZXhQYXJhbWV0ZXJpLCBvcHRpb25zKTsKICB9CgogIC8qKgogICAqIE1ha2VzIGEgMXgxIHBpeGVsCiAgICogSWYgbm8gY29sb3IgaXMgcGFzc2VkIGluIHVzZXMgdGhlIGRlZmF1bHQgY29sb3Igd2hpY2ggY2FuIGJlIHNldCBieSBjYWxsaW5nIGBzZXREZWZhdWx0VGV4dHVyZUNvbG9yYC4KICAgKiBAcGFyYW0geyhudW1iZXJbXXxBcnJheUJ1ZmZlclZpZXcpfSBbY29sb3JdIFRoZSBjb2xvciB1c2luZyAwLTEgdmFsdWVzCiAgICogQHJldHVybiB7VWludDhBcnJheX0gVW5pdDhBcnJheSB3aXRoIGNvbG9yLgogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gbWFrZTFQaXhlbChjb2xvcikgewogICAgY29sb3IgPSBjb2xvciB8fCBkZWZhdWx0cyQxLnRleHR1cmVDb2xvcjsKICAgIGlmIChpc0FycmF5QnVmZmVyKGNvbG9yKSkgewogICAgICByZXR1cm4gY29sb3I7CiAgICB9CiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW2NvbG9yWzBdICogMjU1LCBjb2xvclsxXSAqIDI1NSwgY29sb3JbMl0gKiAyNTUsIGNvbG9yWzNdICogMjU1XSk7CiAgfQoKICAvKioKICAgKiBTZXRzIGZpbHRlcmluZyBvciBnZW5lcmF0ZXMgbWlwcyBmb3IgdGV4dHVyZSBiYXNlZCBvbiB3aWR0aCBvciBoZWlnaHQKICAgKiBJZiB3aWR0aCBvciBoZWlnaHQgaXMgbm90IHBhc3NlZCBpbiB1c2VzIGBvcHRpb25zLndpZHRoYCBhbmQvL29yIGBvcHRpb25zLmhlaWdodGAKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqICAgVGhpcyBpcyBvZnRlbiB0aGUgc2FtZSBvcHRpb25zIHlvdSBwYXNzZWQgaW4gd2hlbiB5b3UgY3JlYXRlZCB0aGUgdGV4dHVyZS4KICAgKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoXSB3aWR0aCBvZiB0ZXh0dXJlCiAgICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHRdIGhlaWdodCBvZiB0ZXh0dXJlCiAgICogQHBhcmFtIHtudW1iZXJ9IFtpbnRlcm5hbEZvcm1hdF0gVGhlIGludGVybmFsRm9ybWF0IHBhcmFtZXRlciBmcm9tIHRleEltYWdlMkQgZXRjLi4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXMKICAgKi8KICBmdW5jdGlvbiBzZXRUZXh0dXJlRmlsdGVyaW5nRm9yU2l6ZShnbCwgdGV4LCBvcHRpb25zLCB3aWR0aCwgaGVpZ2h0LCBpbnRlcm5hbEZvcm1hdCkgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9uczsKICAgIGludGVybmFsRm9ybWF0ID0gaW50ZXJuYWxGb3JtYXQgfHwgUkdCQSQxOwogICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgVEVYVFVSRV8yRCQyOwogICAgd2lkdGggPSB3aWR0aCB8fCBvcHRpb25zLndpZHRoOwogICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IG9wdGlvbnMuaGVpZ2h0OwogICAgZ2wuYmluZFRleHR1cmUodGFyZ2V0LCB0ZXgpOwogICAgaWYgKGNhbkdlbmVyYXRlTWlwbWFwKGdsLCB3aWR0aCwgaGVpZ2h0LCBpbnRlcm5hbEZvcm1hdCkpIHsKICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAodGFyZ2V0KTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGZpbHRlcmluZyA9IGNhbkZpbHRlcihpbnRlcm5hbEZvcm1hdCkgPyBMSU5FQVIkMSA6IE5FQVJFU1Q7CiAgICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX01JTl9GSUxURVIsIGZpbHRlcmluZyk7CiAgICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX01BR19GSUxURVIsIGZpbHRlcmluZyk7CiAgICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX1dSQVBfUywgQ0xBTVBfVE9fRURHRSQxKTsKICAgICAgZ2wudGV4UGFyYW1ldGVyaSh0YXJnZXQsIFRFWFRVUkVfV1JBUF9ULCBDTEFNUF9UT19FREdFJDEpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpIHsKICAgIHJldHVybiBvcHRpb25zLmF1dG8gPT09IHRydWUgfHwgKG9wdGlvbnMuYXV0byA9PT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubGV2ZWwgPT09IHVuZGVmaW5lZCk7CiAgfQoKICAvKioKICAgKiBHZXRzIGFuIGFycmF5IG9mIGN1YmVtYXAgZmFjZSBlbnVtcwogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gb3B0aW9ucyBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqICAgVGhpcyBpcyBvZnRlbiB0aGUgc2FtZSBvcHRpb25zIHlvdSBwYXNzZWQgaW4gd2hlbiB5b3UgY3JlYXRlZCB0aGUgdGV4dHVyZS4KICAgKiBAcmV0dXJuIHtudW1iZXJbXX0gY3ViZW1hcCBmYWNlIGVudW1zCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBnZXRDdWJlRmFjZU9yZGVyKGdsLCBvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgIHJldHVybiBvcHRpb25zLmN1YmVGYWNlT3JkZXIgfHwgWwogICAgICAgIFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCwKICAgICAgICBURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1gsCiAgICAgICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9ZLAogICAgICAgIFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWSwKICAgICAgICBURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1osCiAgICAgICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9aLAogICAgICBdOwogIH0KCiAgLyoqCiAgICogQHR5cGVkZWYge09iamVjdH0gRmFjZUluZm8KICAgKiBAcHJvcGVydHkge251bWJlcn0gZmFjZSBnbCBlbnVtIGZvciB0ZXhJbWFnZTJECiAgICogQHByb3BlcnR5IHtudW1iZXJ9IG5keCBmYWNlIGluZGV4ICgwIC0gNSkgaW50byBzb3VyY2UgZGF0YQogICAqIEBpZ25vcmUKICAgKi8KCiAgLyoqCiAgICogR2V0cyBhbiBhcnJheSBvZiBGYWNlSW5mb3MKICAgKiBUaGVyZSdzIGEgYnVnIGluIHNvbWUgTlZpZGlhIGRyaXZlcnMgdGhhdCB3aWxsIGNyYXNoIHRoZSBkcml2ZXIgaWYKICAgKiBgZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YYCBpcyBub3QgdXBsb2FkZWQgZmlyc3QuIFNvLCB3ZSB0YWtlCiAgICogdGhlIHVzZXIncyBkZXNpcmVkIG9yZGVyIGZyb20gaGlzIGZhY2VzIHRvIFdlYkdMIGFuZCBtYWtlIHN1cmUgd2UKICAgKiBkbyB0aGUgZmFjZXMgaW4gV2ViR0wgb3JkZXIKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gb3B0aW9ucyBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqIEByZXR1cm4ge0ZhY2VJbmZvW119IGN1YmVtYXAgZmFjZSBpbmZvcy4gQXJndWFibHkgdGhlIGBmYWNlYCBwcm9wZXJ0eSBvZiBlYWNoIGVsZW1lbnQgaXMgcmVkdW5kYW50IGJ1dAogICAqICAgIGl0J3MgbmVlZGVkIGludGVybmFsbHkgdG8gc29ydCB0aGUgYXJyYXkgb2YgYG5keGAgcHJvcGVydGllcyBieSBgZmFjZWAuCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBnZXRDdWJlRmFjZXNXaXRoTmR4KGdsLCBvcHRpb25zKSB7CiAgICBjb25zdCBmYWNlcyA9IGdldEN1YmVGYWNlT3JkZXIoZ2wsIG9wdGlvbnMpOwogICAgLy8gd29yayBhcm91bmQgYnVnIGluIE5WaWRpYSBkcml2ZXJzLiBXZSBoYXZlIHRvIHVwbG9hZCB0aGUgZmlyc3QgZmFjZSBmaXJzdCBlbHNlIHRoZSBkcml2ZXIgY3Jhc2hlcyA6KAogICAgY29uc3QgZmFjZXNXaXRoTmR4ID0gZmFjZXMubWFwKGZ1bmN0aW9uKGZhY2UsIG5keCkgewogICAgICByZXR1cm4geyBmYWNlOiBmYWNlLCBuZHg6IG5keCB9OwogICAgfSk7CiAgICBmYWNlc1dpdGhOZHguc29ydChmdW5jdGlvbihhLCBiKSB7CiAgICAgIHJldHVybiBhLmZhY2UgLSBiLmZhY2U7CiAgICB9KTsKICAgIHJldHVybiBmYWNlc1dpdGhOZHg7CiAgfQoKICAvKioKICAgKiBTZXQgYSB0ZXh0dXJlIGZyb20gdGhlIGNvbnRlbnRzIG9mIGFuIGVsZW1lbnQuIFdpbGwgYWxzbyBzZXQKICAgKiB0ZXh0dXJlIGZpbHRlcmluZyBvciBnZW5lcmF0ZSBtaXBzIGJhc2VkIG9uIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBlbGVtZW50CiAgICogdW5sZXNzIGBvcHRpb25zLmF1dG8gPT09IGZhbHNlYC4gSWYgYHRhcmdldCA9PT0gZ2wuVEVYVFVSRV9DVUJFX01BUGAgd2lsbAogICAqIGF0dGVtcHQgdG8gc2xpY2UgaW1hZ2UgaW50byAxeDYsIDJ4MywgM3gyLCBvciA2eDEgaW1hZ2VzLCBvbmUgZm9yIGVhY2ggZmFjZS4KICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIFdlYkdMVGV4dHVyZSB0byBzZXQgcGFyYW1ldGVycyBmb3IKICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IGEgY2FudmFzLCBpbWcsIG9yIHZpZGVvIGVsZW1lbnQuCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gW29wdGlvbnNdIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuCiAgICogICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIG9wdGlvbnMgeW91IHBhc3NlZCBpbiB3aGVuIHlvdSBjcmVhdGVkIHRoZSB0ZXh0dXJlLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqIEBraW5kIGZ1bmN0aW9uCiAgICovCiAgZnVuY3Rpb24gc2V0VGV4dHVyZUZyb21FbGVtZW50KGdsLCB0ZXgsIGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzJDEudGV4dHVyZU9wdGlvbnM7CiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEJDI7CiAgICBjb25zdCBsZXZlbCA9IG9wdGlvbnMubGV2ZWwgfHwgMDsKICAgIGxldCB3aWR0aCA9IGVsZW1lbnQud2lkdGg7CiAgICBsZXQgaGVpZ2h0ID0gZWxlbWVudC5oZWlnaHQ7CiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IG9wdGlvbnMuaW50ZXJuYWxGb3JtYXQgfHwgb3B0aW9ucy5mb3JtYXQgfHwgUkdCQSQxOwogICAgY29uc3QgZm9ybWF0VHlwZSA9IGdldEZvcm1hdEFuZFR5cGVGb3JJbnRlcm5hbEZvcm1hdChpbnRlcm5hbEZvcm1hdCk7CiAgICBjb25zdCBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBmb3JtYXRUeXBlLmZvcm1hdDsKICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGUgfHwgZm9ybWF0VHlwZS50eXBlOwogICAgc2V0UGFja1N0YXRlKGdsLCBvcHRpb25zKTsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSkgewogICAgICAvLyBndWVzcyB0aGUgcGFydHMKICAgICAgY29uc3QgaW1nV2lkdGggID0gZWxlbWVudC53aWR0aDsKICAgICAgY29uc3QgaW1nSGVpZ2h0ID0gZWxlbWVudC5oZWlnaHQ7CiAgICAgIGxldCBzaXplOwogICAgICBsZXQgc2xpY2VzOwogICAgICBpZiAoaW1nV2lkdGggLyA2ID09PSBpbWdIZWlnaHQpIHsKICAgICAgICAvLyBJdCdzIDZ4MQogICAgICAgIHNpemUgPSBpbWdIZWlnaHQ7CiAgICAgICAgc2xpY2VzID0gWzAsIDAsIDEsIDAsIDIsIDAsIDMsIDAsIDQsIDAsIDUsIDBdOwogICAgICB9IGVsc2UgaWYgKGltZ0hlaWdodCAvIDYgPT09IGltZ1dpZHRoKSB7CiAgICAgICAgLy8gSXQncyAxeDYKICAgICAgICBzaXplID0gaW1nV2lkdGg7CiAgICAgICAgc2xpY2VzID0gWzAsIDAsIDAsIDEsIDAsIDIsIDAsIDMsIDAsIDQsIDAsIDVdOwogICAgICB9IGVsc2UgaWYgKGltZ1dpZHRoIC8gMyA9PT0gaW1nSGVpZ2h0IC8gMikgewogICAgICAgIC8vIEl0J3MgM3gyCiAgICAgICAgc2l6ZSA9IGltZ1dpZHRoIC8gMzsKICAgICAgICBzbGljZXMgPSBbMCwgMCwgMSwgMCwgMiwgMCwgMCwgMSwgMSwgMSwgMiwgMV07CiAgICAgIH0gZWxzZSBpZiAoaW1nV2lkdGggLyAyID09PSBpbWdIZWlnaHQgLyAzKSB7CiAgICAgICAgLy8gSXQncyAyeDMKICAgICAgICBzaXplID0gaW1nV2lkdGggLyAyOwogICAgICAgIHNsaWNlcyA9IFswLCAwLCAxLCAwLCAwLCAxLCAxLCAxLCAwLCAyLCAxLCAyXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyAiY2FuJ3QgZmlndXJlIG91dCBjdWJlIG1hcCBmcm9tIGVsZW1lbnQ6ICIgKyAoZWxlbWVudC5zcmMgPyBlbGVtZW50LnNyYyA6IGVsZW1lbnQubm9kZU5hbWUpOwogICAgICB9CiAgICAgIGNvbnN0IGN0eCA9IGdldFNoYXJlZDJEQ29udGV4dCgpOwogICAgICBpZiAoY3R4KSB7CiAgICAgICAgY3R4LmNhbnZhcy53aWR0aCA9IHNpemU7CiAgICAgICAgY3R4LmNhbnZhcy5oZWlnaHQgPSBzaXplOwogICAgICAgIHdpZHRoID0gc2l6ZTsKICAgICAgICBoZWlnaHQgPSBzaXplOwogICAgICAgIGdldEN1YmVGYWNlc1dpdGhOZHgoZ2wsIG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oZikgewogICAgICAgICAgY29uc3QgeE9mZnNldCA9IHNsaWNlc1tmLm5keCAqIDIgKyAwXSAqIHNpemU7CiAgICAgICAgICBjb25zdCB5T2Zmc2V0ID0gc2xpY2VzW2YubmR4ICogMiArIDFdICogc2l6ZTsKICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZWxlbWVudCwgeE9mZnNldCwgeU9mZnNldCwgc2l6ZSwgc2l6ZSwgMCwgMCwgc2l6ZSwgc2l6ZSk7CiAgICAgICAgICBnbC50ZXhJbWFnZTJEKGYuZmFjZSwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIGN0eC5jYW52YXMpOwogICAgICAgIH0pOwogICAgICAgIC8vIEZyZWUgdXAgdGhlIGNhbnZhcyBtZW1vcnkKICAgICAgICBjdHguY2FudmFzLndpZHRoID0gMTsKICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IDE7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNyZWF0ZUltYWdlQml0bWFwICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIC8vIE5PVEU6IEl0IHNlZW1zIGxpa2Ugd2Ugc2hvdWxkIHByZWZlciBJbWFnZUJpdG1hcCBiZWNhdXNlIHVubGlrZSBjYW52YXMgaXQncwogICAgICAgIC8vIG5vdGUgbG9zc3k/IChhbHBoYSBpcyBub3QgcHJlbXVsdGlwbGllZD8gYWx0aG91Z2ggSSdtIG5vdCBzdXJlIHdoYXQKICAgICAgICB3aWR0aCA9IHNpemU7CiAgICAgICAgaGVpZ2h0ID0gc2l6ZTsKICAgICAgICBnZXRDdWJlRmFjZXNXaXRoTmR4KGdsLCBvcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGYpIHsKICAgICAgICAgIGNvbnN0IHhPZmZzZXQgPSBzbGljZXNbZi5uZHggKiAyICsgMF0gKiBzaXplOwogICAgICAgICAgY29uc3QgeU9mZnNldCA9IHNsaWNlc1tmLm5keCAqIDIgKyAxXSAqIHNpemU7CiAgICAgICAgICAvLyBXZSBjYW4ndCBlYXNpbHkgdXNlIGEgZGVmYXVsdCB0ZXh0dXJlIGNvbG9yIGhlcmUgYXMgaXQgd291bGQgaGF2ZSB0byBtYXRjaAogICAgICAgICAgLy8gdGhlIHR5cGUgYWNyb3NzIGFsbCBmYWNlcyB3aGVyZSBhcyB3aXRoIGEgMkQgb25lIHRoZXJlJ3Mgb25seSBvbmUgZmFjZQogICAgICAgICAgLy8gc28gd2UncmUgcmVwbGFjaW5nIGV2ZXJ5dGhpbmcgYWxsIGF0IG9uY2UuIEl0IGFsc28gaGFzIHRvIGJlIHRoZSBjb3JyZWN0IHNpemUuCiAgICAgICAgICAvLyBPbiB0aGUgb3RoZXIgaGFuZCB3ZSBuZWVkIGFsbCBmYWNlcyB0byBiZSB0aGUgc2FtZSBzaXplIHNvIGFzIG9uZSBmYWNlIGxvYWRzCiAgICAgICAgICAvLyB0aGUgcmVzdCBtYXRjaCBlbHNlIHRoZSB0ZXh0dXJlIHdpbGwgYmUgdW4tcmVuZGVyYWJsZS4KICAgICAgICAgIGdsLnRleEltYWdlMkQoZi5mYWNlLCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIHNpemUsIHNpemUsIDAsIGZvcm1hdCwgdHlwZSwgbnVsbCk7CiAgICAgICAgICBjcmVhdGVJbWFnZUJpdG1hcChlbGVtZW50LCB4T2Zmc2V0LCB5T2Zmc2V0LCBzaXplLCBzaXplLCB7CiAgICAgICAgICAgIHByZW11bHRpcGx5QWxwaGE6ICdub25lJywKICAgICAgICAgICAgY29sb3JTcGFjZUNvbnZlcnNpb246ICdub25lJywKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihmdW5jdGlvbihpbWFnZUJpdG1hcCkgewogICAgICAgICAgICBzZXRQYWNrU3RhdGUoZ2wsIG9wdGlvbnMpOwogICAgICAgICAgICBnbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleCk7CiAgICAgICAgICAgIGdsLnRleEltYWdlMkQoZi5mYWNlLCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIGZvcm1hdCwgdHlwZSwgaW1hZ2VCaXRtYXApOwogICAgICAgICAgICBpZiAoc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpKSB7CiAgICAgICAgICAgICAgc2V0VGV4dHVyZUZpbHRlcmluZ0ZvclNpemUoZ2wsIHRleCwgb3B0aW9ucywgd2lkdGgsIGhlaWdodCwgaW50ZXJuYWxGb3JtYXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QkMSB8fCB0YXJnZXQgPT09IFRFWFRVUkVfMkRfQVJSQVkkMSkgewogICAgICBjb25zdCBzbWFsbGVzdCA9IE1hdGgubWluKGVsZW1lbnQud2lkdGgsIGVsZW1lbnQuaGVpZ2h0KTsKICAgICAgY29uc3QgbGFyZ2VzdCA9IE1hdGgubWF4KGVsZW1lbnQud2lkdGgsIGVsZW1lbnQuaGVpZ2h0KTsKICAgICAgY29uc3QgZGVwdGggPSBsYXJnZXN0IC8gc21hbGxlc3Q7CiAgICAgIGlmIChkZXB0aCAlIDEgIT09IDApIHsKICAgICAgICB0aHJvdyAiY2FuIG5vdCBjb21wdXRlIDNEIGRpbWVuc2lvbnMgb2YgZWxlbWVudCI7CiAgICAgIH0KICAgICAgY29uc3QgeE11bHQgPSBlbGVtZW50LndpZHRoICA9PT0gbGFyZ2VzdCA/IDEgOiAwOwogICAgICBjb25zdCB5TXVsdCA9IGVsZW1lbnQuaGVpZ2h0ID09PSBsYXJnZXN0ID8gMSA6IDA7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19BTElHTk1FTlQsIDEpOwogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfUk9XX0xFTkdUSCwgZWxlbWVudC53aWR0aCk7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19JTUFHRV9IRUlHSFQsIDApOwogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfU0tJUF9JTUFHRVMsIDApOwogICAgICBnbC50ZXhJbWFnZTNEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBzbWFsbGVzdCwgc21hbGxlc3QsIHNtYWxsZXN0LCAwLCBmb3JtYXQsIHR5cGUsIG51bGwpOwogICAgICBmb3IgKGxldCBkID0gMDsgZCA8IGRlcHRoOyArK2QpIHsKICAgICAgICBjb25zdCBzcmNYID0gZCAqIHNtYWxsZXN0ICogeE11bHQ7CiAgICAgICAgY29uc3Qgc3JjWSA9IGQgKiBzbWFsbGVzdCAqIHlNdWx0OwogICAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19TS0lQX1BJWEVMUywgc3JjWCk7CiAgICAgICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX1NLSVBfUk9XUywgc3JjWSk7CiAgICAgICAgZ2wudGV4U3ViSW1hZ2UzRCh0YXJnZXQsIGxldmVsLCAwLCAwLCBkLCBzbWFsbGVzdCwgc21hbGxlc3QsIDEsIGZvcm1hdCwgdHlwZSwgZWxlbWVudCk7CiAgICAgIH0KICAgICAgc2V0U2tpcFN0YXRlVG9EZWZhdWx0KGdsKTsKICAgIH0gZWxzZSB7CiAgICAgIGdsLnRleEltYWdlMkQodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIGZvcm1hdCwgdHlwZSwgZWxlbWVudCk7CiAgICB9CiAgICBpZiAoc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpKSB7CiAgICAgIHNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKGdsLCB0ZXgsIG9wdGlvbnMsIHdpZHRoLCBoZWlnaHQsIGludGVybmFsRm9ybWF0KTsKICAgIH0KICAgIHNldFRleHR1cmVQYXJhbWV0ZXJzKGdsLCB0ZXgsIG9wdGlvbnMpOwogIH0KCiAgZnVuY3Rpb24gbm9vcCgpIHsKICB9CgogIC8qKgogICAqIENoZWNrcyB3aGV0aGVyIHRoZSB1cmwncyBvcmlnaW4gaXMgdGhlIHNhbWUgc28gdGhhdCB3ZSBjYW4gc2V0IHRoZSBgY3Jvc3NPcmlnaW5gCiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCB1cmwgdG8gaW1hZ2UKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgd2luZG93J3Mgb3JpZ2luIGlzIHRoZSBzYW1lIGFzIGltYWdlJ3MgdXJsCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiB1cmxJc1NhbWVPcmlnaW4odXJsKSB7CiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykgewogICAgICAvLyBmb3IgSUUgcmVhbGx5CiAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgcmV0dXJuIGEuaG9zdG5hbWUgPT09IGxvY2F0aW9uLmhvc3RuYW1lICYmCiAgICAgICAgICAgICBhLnBvcnQgICAgID09PSBsb2NhdGlvbi5wb3J0ICYmCiAgICAgICAgICAgICBhLnByb3RvY29sID09PSBsb2NhdGlvbi5wcm90b2NvbDsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGxvY2FsT3JpZ2luID0gKG5ldyBVUkwobG9jYXRpb24uaHJlZikpLm9yaWdpbjsKICAgICAgY29uc3QgdXJsT3JpZ2luID0gKG5ldyBVUkwodXJsLCBsb2NhdGlvbi5ocmVmKSkub3JpZ2luOwogICAgICByZXR1cm4gdXJsT3JpZ2luID09PSBsb2NhbE9yaWdpbjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHNldFRvQW5vbnltb3VzSWZVbmRlZmluZWRBbmRVUkxJc05vdFNhbWVPcmlnaW4odXJsLCBjcm9zc09yaWdpbikgewogICAgcmV0dXJuIGNyb3NzT3JpZ2luID09PSB1bmRlZmluZWQgJiYgIXVybElzU2FtZU9yaWdpbih1cmwpCiAgICAgICA/ICdhbm9ueW1vdXMnCiAgICAgICA6IGNyb3NzT3JpZ2luOwogIH0KCiAgLyoqCiAgICogTG9hZHMgYW4gaW1hZ2UKICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIHVybCB0byBpbWFnZQogICAqIEBwYXJhbSB7c3RyaW5nfSBjcm9zc09yaWdpbgogICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyLCBpbWcpfSBbY2FsbGJhY2tdIGEgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCBhbiBlcnJvciBhbmQgdGhlIGltYWdlLiBUaGUgZXJyb3Igd2lsbCBiZSBub24tbnVsbAogICAqICAgICBpZiB0aGVyZSB3YXMgYW4gZXJyb3IKICAgKiBAcmV0dXJuIHtIVE1MSW1hZ2VFbGVtZW50fSB0aGUgaW1hZ2UgYmVpbmcgbG9hZGVkLgogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gbG9hZEltYWdlKHVybCwgY3Jvc3NPcmlnaW4sIGNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7CiAgICBsZXQgaW1nOwogICAgY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkID8gY3Jvc3NPcmlnaW4gOiBkZWZhdWx0cyQxLmNyb3NzT3JpZ2luOwogICAgY3Jvc3NPcmlnaW4gPSBzZXRUb0Fub255bW91c0lmVW5kZWZpbmVkQW5kVVJMSXNOb3RTYW1lT3JpZ2luKHVybCwgY3Jvc3NPcmlnaW4pOwogICAgaWYgKHR5cGVvZiBJbWFnZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgIGlmIChjcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW47CiAgICAgIH0KCiAgICAgIGNvbnN0IGNsZWFyRXZlbnRIYW5kbGVycyA9IGZ1bmN0aW9uIGNsZWFyRXZlbnRIYW5kbGVycygpIHsKICAgICAgICBpbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICBpbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uTG9hZCk7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgaW1nID0gbnVsbDsKICAgICAgfTsKCiAgICAgIGNvbnN0IG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKCkgewogICAgICAgIGNvbnN0IG1zZyA9ICJjb3VsZG4ndCBsb2FkIGltYWdlOiAiICsgdXJsOwogICAgICAgIGVycm9yJDEobXNnKTsKICAgICAgICBjYWxsYmFjayhtc2csIGltZyk7CiAgICAgICAgY2xlYXJFdmVudEhhbmRsZXJzKCk7CiAgICAgIH07CgogICAgICBjb25zdCBvbkxvYWQgPSBmdW5jdGlvbiBvbkxvYWQoKSB7CiAgICAgICAgY2FsbGJhY2sobnVsbCwgaW1nKTsKICAgICAgICBjbGVhckV2ZW50SGFuZGxlcnMoKTsKICAgICAgfTsKCiAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIG9uRXJyb3IpOwogICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uTG9hZCk7CiAgICAgIGltZy5zcmMgPSB1cmw7CiAgICAgIHJldHVybiBpbWc7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBJbWFnZUJpdG1hcCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgbGV0IGVycjsKICAgICAgbGV0IGJtOwogICAgICBjb25zdCBjYiA9IGZ1bmN0aW9uIGNiKCkgewogICAgICAgIGNhbGxiYWNrKGVyciwgYm0pOwogICAgICB9OwoKICAgICAgY29uc3Qgb3B0aW9ucyA9IHt9OwogICAgICBpZiAoY3Jvc3NPcmlnaW4pIHsKICAgICAgICBvcHRpb25zLm1vZGUgPSAnY29ycyc7IC8vIFRPRE86IG5vdCBzdXJlIGhvdyB0byB0cmFuc2xhdGUgaW1hZ2UuY3Jvc3NPcmlnaW4KICAgICAgfQogICAgICBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgICB0aHJvdyByZXNwb25zZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJsb2IoKTsKICAgICAgfSkudGhlbihmdW5jdGlvbihibG9iKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKGJsb2IsIHsKICAgICAgICAgIHByZW11bHRpcGx5QWxwaGE6ICdub25lJywKICAgICAgICAgIGNvbG9yU3BhY2VDb252ZXJzaW9uOiAnbm9uZScsCiAgICAgICAgfSk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oYml0bWFwKSB7CiAgICAgICAgLy8gbm90IHN1cmUgaWYgdGhpcyB3b3Jrcy4gV2UgZG9uJ3Qgd2FudAogICAgICAgIC8vIHRvIGNhdGNoIHRoZSB1c2VyJ3MgZXJyb3IuIFNvLCBjYWxsCiAgICAgICAgLy8gdGhlIGNhbGxiYWNrIGluIGEgdGltZW91dCBzbyB3ZSdyZQogICAgICAgIC8vIG5vdCBpbiB0aGlzIHNjb3BlIGluc2lkZSB0aGUgcHJvbWlzZS4KICAgICAgICBibSA9IGJpdG1hcDsKICAgICAgICBzZXRUaW1lb3V0KGNiKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZSkgewogICAgICAgIGVyciA9IGU7CiAgICAgICAgc2V0VGltZW91dChjYik7CiAgICAgIH0pOwogICAgICBpbWcgPSBudWxsOwogICAgfQogICAgcmV0dXJuIGltZzsKICB9CgogIC8qKgogICAqIGNoZWNrIGlmIG9iamVjdCBpcyBhIFRleEltYWdlU291cmNlCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIE9iamVjdCB0byB0ZXN0CiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBvYmplY3QgaXMgYSBUZXhJbWFnZVNvdXJjZQogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gaXNUZXhJbWFnZVNvdXJjZShvYmopIHsKICAgIHJldHVybiAodHlwZW9mIEltYWdlQml0bWFwICE9PSAndW5kZWZpbmVkJyAmJiBvYmogaW5zdGFuY2VvZiBJbWFnZUJpdG1hcCkgfHwKICAgICAgICAgICAodHlwZW9mIEltYWdlRGF0YSAhPT0gJ3VuZGVmaW5lZCcgICYmIG9iaiBpbnN0YW5jZW9mIEltYWdlRGF0YSkgfHwKICAgICAgICAgICAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAgJiYgb2JqIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpOwogIH0KCiAgLyoqCiAgICogaWYgb2JqIGlzIGFuIFRleEltYWdlU291cmNlIHRoZW4ganVzdAogICAqIHVzZXMgaXQgb3RoZXJ3aXNlIGlmIG9iaiBpcyBhIHN0cmluZwogICAqIHRoZW4gbG9hZCBpdCBmaXJzdC4KICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfFRleEltYWdlU291cmNlfSBvYmoKICAgKiBAcGFyYW0ge3N0cmluZ30gY3Jvc3NPcmlnaW4KICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGVyciwgaW1nKX0gW2NhbGxiYWNrXSBhIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgYW4gZXJyb3IgYW5kIHRoZSBpbWFnZS4gVGhlIGVycm9yIHdpbGwgYmUgbm9uLW51bGwKICAgKiAgICAgaWYgdGhlcmUgd2FzIGFuIGVycm9yCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBsb2FkQW5kVXNlSW1hZ2Uob2JqLCBjcm9zc09yaWdpbiwgY2FsbGJhY2spIHsKICAgIGlmIChpc1RleEltYWdlU291cmNlKG9iaikpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBjYWxsYmFjayhudWxsLCBvYmopOwogICAgICB9KTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KCiAgICByZXR1cm4gbG9hZEltYWdlKG9iaiwgY3Jvc3NPcmlnaW4sIGNhbGxiYWNrKTsKICB9CgogIC8qKgogICAqIFNldHMgYSB0ZXh0dXJlIHRvIGEgMXgxIHBpeGVsIGNvbG9yLiBJZiBgb3B0aW9ucy5jb2xvciA9PT0gZmFsc2VgIGlzIG5vdGhpbmcgaGFwcGVucy4gSWYgaXQncyBub3Qgc2V0CiAgICogdGhlIGRlZmF1bHQgdGV4dHVyZSBjb2xvciBpcyB1c2VkIHdoaWNoIGNhbiBiZSBzZXQgYnkgY2FsbGluZyBgc2V0RGVmYXVsdFRleHR1cmVDb2xvcmAuCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSBXZWJHTFRleHR1cmUgdG8gc2V0IHBhcmFtZXRlcnMgZm9yCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gW29wdGlvbnNdIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuCiAgICogICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIG9wdGlvbnMgeW91IHBhc3NlZCBpbiB3aGVuIHlvdSBjcmVhdGVkIHRoZSB0ZXh0dXJlLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gc2V0VGV4dHVyZVRvMVBpeGVsQ29sb3IoZ2wsIHRleCwgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9uczsKICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQkMjsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIGlmIChvcHRpb25zLmNvbG9yID09PSBmYWxzZSkgewogICAgICByZXR1cm47CiAgICB9CiAgICAvLyBBc3N1bWUgaXQncyBhIFVSTAogICAgLy8gUHV0IDF4MSBwaXhlbHMgaW4gdGV4dHVyZS4gVGhhdCBtYWtlcyBpdCByZW5kZXJhYmxlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgZmlsdGVyaW5nLgogICAgY29uc3QgY29sb3IgPSBtYWtlMVBpeGVsKG9wdGlvbnMuY29sb3IpOwogICAgaWYgKHRhcmdldCA9PT0gVEVYVFVSRV9DVUJFX01BUCQxKSB7CiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCA2OyArK2lpKSB7CiAgICAgICAgZ2wudGV4SW1hZ2UyRChURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpaSwgMCwgUkdCQSQxLCAxLCAxLCAwLCBSR0JBJDEsIFVOU0lHTkVEX0JZVEUkMSwgY29sb3IpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gVEVYVFVSRV8zRCQxIHx8IHRhcmdldCA9PT0gVEVYVFVSRV8yRF9BUlJBWSQxKSB7CiAgICAgIGdsLnRleEltYWdlM0QodGFyZ2V0LCAwLCBSR0JBJDEsIDEsIDEsIDEsIDAsIFJHQkEkMSwgVU5TSUdORURfQllURSQxLCBjb2xvcik7CiAgICB9IGVsc2UgewogICAgICBnbC50ZXhJbWFnZTJEKHRhcmdldCwgMCwgUkdCQSQxLCAxLCAxLCAwLCBSR0JBJDEsIFVOU0lHTkVEX0JZVEUkMSwgY29sb3IpOwogICAgfQogIH0KCiAgLyoqCiAgICogVGhlIHNyYyBpbWFnZShzKSB1c2VkIHRvIGNyZWF0ZSBhIHRleHR1cmUuCiAgICoKICAgKiBXaGVuIHlvdSBjYWxsIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVUZXh0dXJlfSBvciB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlVGV4dHVyZXN9CiAgICogeW91IGNhbiBwYXNzIGluIHVybHMgZm9yIGltYWdlcyB0byBsb2FkIGludG8gdGhlIHRleHR1cmVzLiBJZiBpdCdzIGEgc2luZ2xlIHVybAogICAqIHRoZW4gdGhpcyB3aWxsIGJlIGEgc2luZ2xlIEhUTUxJbWFnZUVsZW1lbnQuIElmIGl0J3MgYW4gYXJyYXkgb2YgdXJscyB1c2VkIGZvciBhIGN1YmVtYXAKICAgKiB0aGlzIHdpbGwgYmUgYSBjb3JyZXNwb25kaW5nIGFycmF5IG9mIGltYWdlcyBmb3IgdGhlIGN1YmVtYXAuCiAgICoKICAgKiBAdHlwZWRlZiB7SFRNTEltYWdlRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50W119IFRleHR1cmVTcmMKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogQSBjYWxsYmFjayBmb3Igd2hlbiBhbiBpbWFnZSBmaW5pc2hlZCBkb3dubG9hZGluZyBhbmQgYmVlbiB1cGxvYWRlZCBpbnRvIGEgdGV4dHVyZQogICAqIEBjYWxsYmFjayBUZXh0dXJlUmVhZHlDYWxsYmFjawogICAqIEBwYXJhbSB7Kn0gZXJyIElmIHRydXRoeSB0aGVyZSB3YXMgYW4gZXJyb3IuCiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleHR1cmUgdGhlIHRleHR1cmUuCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlU3JjfSBzb3VyY2UgaW1hZ2UocykgdXNlZCB0byBhcyB0aGUgc3JjIGZvciB0aGUgdGV4dHVyZQogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBBIGNhbGxiYWNrIGZvciB3aGVuIGFsbCBpbWFnZXMgaGF2ZSBmaW5pc2hlZCBkb3dubG9hZGluZyBhbmQgYmVlbiB1cGxvYWRlZCBpbnRvIHRoZWlyIHJlc3BlY3RpdmUgdGV4dHVyZXMKICAgKiBAY2FsbGJhY2sgVGV4dHVyZXNSZWFkeUNhbGxiYWNrCiAgICogQHBhcmFtIHsqfSBlcnIgSWYgdHJ1dGh5IHRoZXJlIHdhcyBhbiBlcnJvci4KICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCBXZWJHTFRleHR1cmU+fSB0ZXh0dXJlcyB0aGUgY3JlYXRlZCB0ZXh0dXJlcyBieSBuYW1lLiBTYW1lIGFzIHJldHVybmVkIGJ5IHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVUZXh0dXJlc30uCiAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuVGV4dHVyZVNyYz59IHNvdXJjZXMgdGhlIGltYWdlKHMpIHVzZWQgZm9yIHRoZSB0ZXh0dXJlIGJ5IG5hbWUuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIEEgY2FsbGJhY2sgZm9yIHdoZW4gYW4gaW1hZ2UgZmluaXNoZWQgZG93bmxvYWRpbmcgYW5kIGJlZW4gdXBsb2FkZWQgaW50byBhIHRleHR1cmUKICAgKiBAY2FsbGJhY2sgQ3ViZW1hcFJlYWR5Q2FsbGJhY2sKICAgKiBAcGFyYW0geyp9IGVyciBJZiB0cnV0aHkgdGhlcmUgd2FzIGFuIGVycm9yLgogICAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIHRleHR1cmUuCiAgICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50W119IGltZ3MgdGhlIGltYWdlcyBmb3IgZWFjaCBmYWNlLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBBIGNhbGxiYWNrIGZvciB3aGVuIGFuIGltYWdlIGZpbmlzaGVkIGRvd25sb2FkaW5nIGFuZCBiZWVuIHVwbG9hZGVkIGludG8gYSB0ZXh0dXJlCiAgICogQGNhbGxiYWNrIFRocmVlRFJlYWR5Q2FsbGJhY2sKICAgKiBAcGFyYW0geyp9IGVyciBJZiB0cnV0aHkgdGhlcmUgd2FzIGFuIGVycm9yLgogICAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIHRleHR1cmUuCiAgICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50W119IGltZ3MgdGhlIGltYWdlcyBmb3IgZWFjaCBzbGljZS4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogTG9hZHMgYSB0ZXh0dXJlIGZyb20gYW4gaW1hZ2UgZnJvbSBhIFVybCBhcyBzcGVjaWZpZWQgaW4gYG9wdGlvbnMuc3JjYAogICAqIElmIGBvcHRpb25zLmNvbG9yICE9PSBmYWxzZWAgd2lsbCBzZXQgdGhlIHRleHR1cmUgdG8gYSAxeDEgcGl4ZWwgY29sb3Igc28gdGhhdCB0aGUgdGV4dHVyZSBpcwogICAqIGltbWVkaWF0ZWx5IHVzZWFibGUuIEl0IHdpbGwgYmUgdXBkYXRlZCB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgaW1hZ2Ugb25jZSB0aGUgaW1hZ2UgaGFzIGZpbmlzaGVkCiAgICogZG93bmxvYWRpbmcuIEZpbHRlcmluZyBvcHRpb25zIHdpbGwgYmUgc2V0IGFzIGFwcHJvcHJpYXRlIGZvciBpbWFnZSB1bmxlc3MgYG9wdGlvbnMuYXV0byA9PT0gZmFsc2VgLgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZVJlYWR5Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgaW1hZ2UgaGFzIGZpbmlzaGVkIGxvYWRpbmcuIGVyciB3aWxsCiAgICogICAgYmUgbm9uIG51bGwgaWYgdGhlcmUgd2FzIGFuIGVycm9yLgogICAqIEByZXR1cm4ge0hUTUxJbWFnZUVsZW1lbnR9IHRoZSBpbWFnZSBiZWluZyBkb3dubG9hZGVkLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIGxvYWRUZXh0dXJlRnJvbVVybChnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjaykgewogICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBub29wOwogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9uczsKICAgIHNldFRleHR1cmVUbzFQaXhlbENvbG9yKGdsLCB0ZXgsIG9wdGlvbnMpOwogICAgLy8gQmVjYXVzZSBpdCdzIGFzeW5jIHdlIG5lZWQgdG8gY29weSB0aGUgb3B0aW9ucy4KICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTsKICAgIGNvbnN0IGltZyA9IGxvYWRBbmRVc2VJbWFnZShvcHRpb25zLnNyYywgb3B0aW9ucy5jcm9zc09yaWdpbiwgZnVuY3Rpb24oZXJyLCBpbWcpIHsKICAgICAgaWYgKGVycikgewogICAgICAgIGNhbGxiYWNrKGVyciwgdGV4LCBpbWcpOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFRleHR1cmVGcm9tRWxlbWVudChnbCwgdGV4LCBpbWcsIG9wdGlvbnMpOwogICAgICAgIGNhbGxiYWNrKG51bGwsIHRleCwgaW1nKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gaW1nOwogIH0KCiAgLyoqCiAgICogTG9hZHMgYSBjdWJlbWFwIGZyb20gNiB1cmxzIG9yIFRleEltYWdlU291cmNlcyBhcyBzcGVjaWZpZWQgaW4gYG9wdGlvbnMuc3JjYC4gV2lsbCBzZXQgdGhlIGN1YmVtYXAgdG8gYSAxeDEgcGl4ZWwgY29sb3IKICAgKiBzbyB0aGF0IGl0IGlzIHVzYWJsZSBpbW1lZGlhdGVseSB1bmxlc3MgYG9wdGlvbi5jb2xvciA9PT0gZmFsc2VgLgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC4KICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLkN1YmVtYXBSZWFkeUNhbGxiYWNrfSBbY2FsbGJhY2tdIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYWxsIHRoZSBpbWFnZXMgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLiBlcnIgd2lsbAogICAqICAgIGJlIG5vbiBudWxsIGlmIHRoZXJlIHdhcyBhbiBlcnJvci4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXMKICAgKiBAcHJpdmF0ZQogICAqLwogIGZ1bmN0aW9uIGxvYWRDdWJlbWFwRnJvbVVybHMoZ2wsIHRleCwgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9vcDsKICAgIGNvbnN0IHVybHMgPSBvcHRpb25zLnNyYzsKICAgIGlmICh1cmxzLmxlbmd0aCAhPT0gNikgewogICAgICB0aHJvdyAidGhlcmUgbXVzdCBiZSA2IHVybHMgZm9yIGEgY3ViZW1hcCI7CiAgICB9CiAgICBjb25zdCBsZXZlbCA9IG9wdGlvbnMubGV2ZWwgfHwgMDsKICAgIGNvbnN0IGludGVybmFsRm9ybWF0ID0gb3B0aW9ucy5pbnRlcm5hbEZvcm1hdCB8fCBvcHRpb25zLmZvcm1hdCB8fCBSR0JBJDE7CiAgICBjb25zdCBmb3JtYXRUeXBlID0gZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0KGludGVybmFsRm9ybWF0KTsKICAgIGNvbnN0IGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8IGZvcm1hdFR5cGUuZm9ybWF0OwogICAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZSB8fCBVTlNJR05FRF9CWVRFJDE7CiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEJDI7CiAgICBpZiAodGFyZ2V0ICE9PSBURVhUVVJFX0NVQkVfTUFQJDEpIHsKICAgICAgdGhyb3cgInRhcmdldCBtdXN0IGJlIFRFWFRVUkVfQ1VCRV9NQVAiOwogICAgfQogICAgc2V0VGV4dHVyZVRvMVBpeGVsQ29sb3IoZ2wsIHRleCwgb3B0aW9ucyk7CiAgICAvLyBCZWNhdXNlIGl0J3MgYXN5bmMgd2UgbmVlZCB0byBjb3B5IHRoZSBvcHRpb25zLgogICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpOwogICAgbGV0IG51bVRvTG9hZCA9IDY7CiAgICBjb25zdCBlcnJvcnMgPSBbXTsKICAgIGNvbnN0IGZhY2VzID0gZ2V0Q3ViZUZhY2VPcmRlcihnbCwgb3B0aW9ucyk7CiAgICBsZXQgaW1nczsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICBmdW5jdGlvbiB1cGxvYWRJbWcoZmFjZVRhcmdldCkgewogICAgICByZXR1cm4gZnVuY3Rpb24oZXJyLCBpbWcpIHsKICAgICAgICAtLW51bVRvTG9hZDsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICBlcnJvcnMucHVzaChlcnIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoaW1nLndpZHRoICE9PSBpbWcuaGVpZ2h0KSB7CiAgICAgICAgICAgIGVycm9ycy5wdXNoKCJjdWJlbWFwIGZhY2UgaW1nIGlzIG5vdCBhIHNxdWFyZTogIiArIGltZy5zcmMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0UGFja1N0YXRlKGdsLCBvcHRpb25zKTsKICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUodGFyZ2V0LCB0ZXgpOwoKICAgICAgICAgICAgLy8gU28gYXNzdW1pbmcgdGhpcyBpcyB0aGUgZmlyc3QgaW1hZ2Ugd2Ugbm93IGhhdmUgb25lIGZhY2UgdGhhdCdzIGltZyBzaXplZAogICAgICAgICAgICAvLyBhbmQgNSBmYWNlcyB0aGF0IGFyZSAxeDEgcGl4ZWwgc28gc2l6ZSB0aGUgb3RoZXIgZmFjZXMKICAgICAgICAgICAgaWYgKG51bVRvTG9hZCA9PT0gNSkgewogICAgICAgICAgICAgIC8vIHVzZSB0aGUgZGVmYXVsdCBvcmRlcgogICAgICAgICAgICAgIGdldEN1YmVGYWNlT3JkZXIoKS5mb3JFYWNoKGZ1bmN0aW9uKG90aGVyVGFyZ2V0KSB7CiAgICAgICAgICAgICAgICAvLyBTaG91bGQgd2UgcmUtdXNlIHRoZSBzYW1lIGZhY2Ugb3IgYSBjb2xvcj8KICAgICAgICAgICAgICAgIGdsLnRleEltYWdlMkQob3RoZXJUYXJnZXQsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgZm9ybWF0LCB0eXBlLCBpbWcpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGdsLnRleEltYWdlMkQoZmFjZVRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIGltZyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzaG91bGRBdXRvbWF0aWNhbGx5U2V0VGV4dHVyZUZpbHRlcmluZ0ZvclNpemUob3B0aW9ucykpIHsKICAgICAgICAgICAgICBnbC5nZW5lcmF0ZU1pcG1hcCh0YXJnZXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobnVtVG9Mb2FkID09PSAwKSB7CiAgICAgICAgICBjYWxsYmFjayhlcnJvcnMubGVuZ3RoID8gZXJyb3JzIDogdW5kZWZpbmVkLCB0ZXgsIGltZ3MpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KCiAgICBpbWdzID0gdXJscy5tYXAoZnVuY3Rpb24odXJsLCBuZHgpIHsKICAgICAgcmV0dXJuIGxvYWRBbmRVc2VJbWFnZSh1cmwsIG9wdGlvbnMuY3Jvc3NPcmlnaW4sIHVwbG9hZEltZyhmYWNlc1tuZHhdKSk7CiAgICB9KTsKICB9CgogIC8qKgogICAqIExvYWRzIGEgMmQgYXJyYXkgb3IgM2QgdGV4dHVyZSBmcm9tIHVybHMgT1IgVGV4SW1hZ2VTb3VyY2VzIGFzIHNwZWNpZmllZCBpbiBgb3B0aW9ucy5zcmNgLgogICAqIFdpbGwgc2V0IHRoZSB0ZXh0dXJlIHRvIGEgMXgxIHBpeGVsIGNvbG9yCiAgICogc28gdGhhdCBpdCBpcyB1c2FibGUgaW1tZWRpYXRlbHkgdW5sZXNzIGBvcHRpb24uY29sb3IgPT09IGZhbHNlYC4KICAgKgogICAqIElmIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IGlzIG5vdCBzcGVjaWZpZWQgdGhlIHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIGZpcnN0CiAgICogaW1hZ2UgbG9hZGVkIHdpbGwgYmUgdXNlZC4gTm90ZSB0aGF0IHNpbmNlIGltYWdlcyBhcmUgbG9hZGVkIGFzeW5jCiAgICogd2hpY2ggaW1hZ2UgZG93bmxvYWRzIGZpcnN0IGlzIHVua25vd24uCiAgICoKICAgKiBJZiBhbiBpbWFnZSBpcyBub3QgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgd2lkdGggYW5kIGhlaWdodCBpdCB3aWxsIGJlIHNjYWxlZAogICAqIHRvIHRoYXQgd2lkdGggYW5kIGhlaWdodC4KICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC4KICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRocmVlRFJlYWR5Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhbGwgdGhlIGltYWdlcyBoYXZlIGZpbmlzaGVkIGxvYWRpbmcuIGVyciB3aWxsCiAgICogICAgYmUgbm9uIG51bGwgaWYgdGhlcmUgd2FzIGFuIGVycm9yLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gbG9hZFNsaWNlc0Zyb21VcmxzKGdsLCB0ZXgsIG9wdGlvbnMsIGNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7CiAgICBjb25zdCB1cmxzID0gb3B0aW9ucy5zcmM7CiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IG9wdGlvbnMuaW50ZXJuYWxGb3JtYXQgfHwgb3B0aW9ucy5mb3JtYXQgfHwgUkdCQSQxOwogICAgY29uc3QgZm9ybWF0VHlwZSA9IGdldEZvcm1hdEFuZFR5cGVGb3JJbnRlcm5hbEZvcm1hdChpbnRlcm5hbEZvcm1hdCk7CiAgICBjb25zdCBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBmb3JtYXRUeXBlLmZvcm1hdDsKICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGUgfHwgVU5TSUdORURfQllURSQxOwogICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgVEVYVFVSRV8yRF9BUlJBWSQxOwogICAgaWYgKHRhcmdldCAhPT0gVEVYVFVSRV8zRCQxICYmIHRhcmdldCAhPT0gVEVYVFVSRV8yRF9BUlJBWSQxKSB7CiAgICAgIHRocm93ICJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFXzNEIG9yIFRFWFRVUkVfMkRfQVJSQVkiOwogICAgfQogICAgc2V0VGV4dHVyZVRvMVBpeGVsQ29sb3IoZ2wsIHRleCwgb3B0aW9ucyk7CiAgICAvLyBCZWNhdXNlIGl0J3MgYXN5bmMgd2UgbmVlZCB0byBjb3B5IHRoZSBvcHRpb25zLgogICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpOwogICAgbGV0IG51bVRvTG9hZCA9IHVybHMubGVuZ3RoOwogICAgY29uc3QgZXJyb3JzID0gW107CiAgICBsZXQgaW1nczsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGNvbnN0IGxldmVsID0gb3B0aW9ucy5sZXZlbCB8fCAwOwogICAgbGV0IHdpZHRoID0gb3B0aW9ucy53aWR0aDsKICAgIGxldCBoZWlnaHQgPSBvcHRpb25zLmhlaWdodDsKICAgIGNvbnN0IGRlcHRoID0gdXJscy5sZW5ndGg7CiAgICBsZXQgZmlyc3RJbWFnZSA9IHRydWU7CgogICAgZnVuY3Rpb24gdXBsb2FkSW1nKHNsaWNlKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbihlcnIsIGltZykgewogICAgICAgIC0tbnVtVG9Mb2FkOwogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGVycm9ycy5wdXNoKGVycik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldFBhY2tTdGF0ZShnbCwgb3B0aW9ucyk7CiAgICAgICAgICBnbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleCk7CgogICAgICAgICAgaWYgKGZpcnN0SW1hZ2UpIHsKICAgICAgICAgICAgZmlyc3RJbWFnZSA9IGZhbHNlOwogICAgICAgICAgICB3aWR0aCA9IG9wdGlvbnMud2lkdGggfHwgaW1nLndpZHRoOwogICAgICAgICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCBpbWcuaGVpZ2h0OwogICAgICAgICAgICBnbC50ZXhJbWFnZTNEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCBkZXB0aCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKTsKCiAgICAgICAgICAgIC8vIHB1dCBpdCBpbiBldmVyeSBzbGljZSBvdGhlcndpc2Ugc29tZSBzbGljZXMgd2lsbCBiZSAwLDAsMCwwCiAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgZGVwdGg7ICsrcykgewogICAgICAgICAgICAgIGdsLnRleFN1YkltYWdlM0QodGFyZ2V0LCBsZXZlbCwgMCwgMCwgcywgd2lkdGgsIGhlaWdodCwgMSwgZm9ybWF0LCB0eXBlLCBpbWcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgc3JjID0gaW1nOwogICAgICAgICAgICBsZXQgY3R4OwogICAgICAgICAgICBpZiAoaW1nLndpZHRoICE9PSB3aWR0aCB8fCBpbWcuaGVpZ2h0ICE9PSBoZWlnaHQpIHsKICAgICAgICAgICAgICAvLyBTaXplIHRoZSBpbWFnZSB0byBmaXgKICAgICAgICAgICAgICBjdHggPSBnZXRTaGFyZWQyRENvbnRleHQoKTsKICAgICAgICAgICAgICBzcmMgPSBjdHguY2FudmFzOwogICAgICAgICAgICAgIGN0eC5jYW52YXMud2lkdGggPSB3aWR0aDsKICAgICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IGhlaWdodDsKICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGdsLnRleFN1YkltYWdlM0QodGFyZ2V0LCBsZXZlbCwgMCwgMCwgc2xpY2UsIHdpZHRoLCBoZWlnaHQsIDEsIGZvcm1hdCwgdHlwZSwgc3JjKTsKCiAgICAgICAgICAgIC8vIGZyZWUgdGhlIGNhbnZhcyBtZW1vcnkKICAgICAgICAgICAgaWYgKGN0eCAmJiBzcmMgPT09IGN0eC5jYW52YXMpIHsKICAgICAgICAgICAgICBjdHguY2FudmFzLndpZHRoID0gMDsKICAgICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpKSB7CiAgICAgICAgICAgIGdsLmdlbmVyYXRlTWlwbWFwKHRhcmdldCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobnVtVG9Mb2FkID09PSAwKSB7CiAgICAgICAgICBjYWxsYmFjayhlcnJvcnMubGVuZ3RoID8gZXJyb3JzIDogdW5kZWZpbmVkLCB0ZXgsIGltZ3MpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KCiAgICBpbWdzID0gdXJscy5tYXAoZnVuY3Rpb24odXJsLCBuZHgpIHsKICAgICAgcmV0dXJuIGxvYWRBbmRVc2VJbWFnZSh1cmwsIG9wdGlvbnMuY3Jvc3NPcmlnaW4sIHVwbG9hZEltZyhuZHgpKTsKICAgIH0pOwogIH0KCiAgLyoqCiAgICogU2V0cyBhIHRleHR1cmUgZnJvbSBhbiBhcnJheSBvciB0eXBlZCBhcnJheS4gSWYgdGhlIHdpZHRoIG9yIGhlaWdodCBpcyBub3QgcHJvdmlkZWQgd2lsbCBhdHRlbXB0IHRvCiAgICogZ3Vlc3MgdGhlIHNpemUuIFNlZSB7QGxpbmsgbW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9LgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7KG51bWJlcltdfEFycmF5QnVmZmVyVmlldyl9IHNyYyBBbiBhcnJheSBvciB0eXBlZCBhcnJ5IHdpdGggdGV4dHVyZSBkYXRhLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqICAgVGhpcyBpcyBvZnRlbiB0aGUgc2FtZSBvcHRpb25zIHlvdSBwYXNzZWQgaW4gd2hlbiB5b3UgY3JlYXRlZCB0aGUgdGV4dHVyZS4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXMKICAgKi8KICBmdW5jdGlvbiBzZXRUZXh0dXJlRnJvbUFycmF5KGdsLCB0ZXgsIHNyYywgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9uczsKICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQkMjsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIGxldCB3aWR0aCA9IG9wdGlvbnMud2lkdGg7CiAgICBsZXQgaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7CiAgICBsZXQgZGVwdGggPSBvcHRpb25zLmRlcHRoOwogICAgY29uc3QgbGV2ZWwgPSBvcHRpb25zLmxldmVsIHx8IDA7CiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IG9wdGlvbnMuaW50ZXJuYWxGb3JtYXQgfHwgb3B0aW9ucy5mb3JtYXQgfHwgUkdCQSQxOwogICAgY29uc3QgZm9ybWF0VHlwZSA9IGdldEZvcm1hdEFuZFR5cGVGb3JJbnRlcm5hbEZvcm1hdChpbnRlcm5hbEZvcm1hdCk7CiAgICBjb25zdCBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBmb3JtYXRUeXBlLmZvcm1hdDsKICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGUgfHwgZ2V0VGV4dHVyZVR5cGVGb3JBcnJheVR5cGUoZ2wsIHNyYywgZm9ybWF0VHlwZS50eXBlKTsKICAgIGlmICghaXNBcnJheUJ1ZmZlcihzcmMpKSB7CiAgICAgIGNvbnN0IFR5cGUgPSBnZXRUeXBlZEFycmF5VHlwZUZvckdMVHlwZSh0eXBlKTsKICAgICAgc3JjID0gbmV3IFR5cGUoc3JjKTsKICAgIH0gZWxzZSBpZiAoc3JjIGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkpIHsKICAgICAgc3JjID0gbmV3IFVpbnQ4QXJyYXkoc3JjLmJ1ZmZlcik7CiAgICB9CgogICAgY29uc3QgYnl0ZXNQZXJFbGVtZW50ID0gZ2V0Qnl0ZXNQZXJFbGVtZW50Rm9ySW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXQsIHR5cGUpOwogICAgY29uc3QgbnVtRWxlbWVudHMgPSBzcmMuYnl0ZUxlbmd0aCAvIGJ5dGVzUGVyRWxlbWVudDsgIC8vIFRPRE86IGNoZWNrIFVOUEFDS19BTElHTk1FTlQ/CiAgICBpZiAobnVtRWxlbWVudHMgJSAxKSB7CiAgICAgIHRocm93ICJsZW5ndGggd3Jvbmcgc2l6ZSBmb3IgZm9ybWF0OiAiICsgZ2xFbnVtVG9TdHJpbmcoZ2wsIGZvcm1hdCk7CiAgICB9CiAgICBsZXQgZGltZW5zaW9uczsKICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QkMSB8fCB0YXJnZXQgPT09IFRFWFRVUkVfMkRfQVJSQVkkMSkgewogICAgICBpZiAoIXdpZHRoICYmICFoZWlnaHQgJiYgIWRlcHRoKSB7CiAgICAgICAgY29uc3Qgc2l6ZSA9IE1hdGguY2JydChudW1FbGVtZW50cyk7CiAgICAgICAgaWYgKHNpemUgJSAxICE9PSAwKSB7CiAgICAgICAgICB0aHJvdyAiY2FuJ3QgZ3Vlc3MgY3ViZSBzaXplIG9mIGFycmF5IG9mIG51bUVsZW1lbnRzOiAiICsgbnVtRWxlbWVudHM7CiAgICAgICAgfQogICAgICAgIHdpZHRoID0gc2l6ZTsKICAgICAgICBoZWlnaHQgPSBzaXplOwogICAgICAgIGRlcHRoID0gc2l6ZTsKICAgICAgfSBlbHNlIGlmICh3aWR0aCAmJiAoIWhlaWdodCB8fCAhZGVwdGgpKSB7CiAgICAgICAgZGltZW5zaW9ucyA9IGd1ZXNzRGltZW5zaW9ucyhnbCwgdGFyZ2V0LCBoZWlnaHQsIGRlcHRoLCBudW1FbGVtZW50cyAvIHdpZHRoKTsKICAgICAgICBoZWlnaHQgPSBkaW1lbnNpb25zLndpZHRoOwogICAgICAgIGRlcHRoID0gZGltZW5zaW9ucy5oZWlnaHQ7CiAgICAgIH0gZWxzZSBpZiAoaGVpZ2h0ICYmICghd2lkdGggfHwgIWRlcHRoKSkgewogICAgICAgIGRpbWVuc2lvbnMgPSBndWVzc0RpbWVuc2lvbnMoZ2wsIHRhcmdldCwgd2lkdGgsIGRlcHRoLCBudW1FbGVtZW50cyAvIGhlaWdodCk7CiAgICAgICAgd2lkdGggPSBkaW1lbnNpb25zLndpZHRoOwogICAgICAgIGRlcHRoID0gZGltZW5zaW9ucy5oZWlnaHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGltZW5zaW9ucyA9IGd1ZXNzRGltZW5zaW9ucyhnbCwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0LCBudW1FbGVtZW50cyAvIGRlcHRoKTsKICAgICAgICB3aWR0aCA9IGRpbWVuc2lvbnMud2lkdGg7CiAgICAgICAgaGVpZ2h0ID0gZGltZW5zaW9ucy5oZWlnaHQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGRpbWVuc2lvbnMgPSBndWVzc0RpbWVuc2lvbnMoZ2wsIHRhcmdldCwgd2lkdGgsIGhlaWdodCwgbnVtRWxlbWVudHMpOwogICAgICB3aWR0aCA9IGRpbWVuc2lvbnMud2lkdGg7CiAgICAgIGhlaWdodCA9IGRpbWVuc2lvbnMuaGVpZ2h0OwogICAgfQogICAgc2V0U2tpcFN0YXRlVG9EZWZhdWx0KGdsKTsKICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19BTElHTk1FTlQsIG9wdGlvbnMudW5wYWNrQWxpZ25tZW50IHx8IDEpOwogICAgc2V0UGFja1N0YXRlKGdsLCBvcHRpb25zKTsKICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSkgewogICAgICBjb25zdCBlbGVtZW50c1BlckVsZW1lbnQgPSBieXRlc1BlckVsZW1lbnQgLyBzcmMuQllURVNfUEVSX0VMRU1FTlQ7CiAgICAgIGNvbnN0IGZhY2VTaXplID0gbnVtRWxlbWVudHMgLyA2ICogZWxlbWVudHNQZXJFbGVtZW50OwoKICAgICAgZ2V0Q3ViZUZhY2VzV2l0aE5keChnbCwgb3B0aW9ucykuZm9yRWFjaChmID0+IHsKICAgICAgICBjb25zdCBvZmZzZXQgPSBmYWNlU2l6ZSAqIGYubmR4OwogICAgICAgIGNvbnN0IGRhdGEgPSBzcmMuc3ViYXJyYXkob2Zmc2V0LCBvZmZzZXQgKyBmYWNlU2l6ZSk7CiAgICAgICAgZ2wudGV4SW1hZ2UyRChmLmZhY2UsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCBkYXRhKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gVEVYVFVSRV8zRCQxIHx8IHRhcmdldCA9PT0gVEVYVFVSRV8yRF9BUlJBWSQxKSB7CiAgICAgIGdsLnRleEltYWdlM0QodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIHdpZHRoLCBoZWlnaHQsIGRlcHRoLCAwLCBmb3JtYXQsIHR5cGUsIHNyYyk7CiAgICB9IGVsc2UgewogICAgICBnbC50ZXhJbWFnZTJEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIHNyYyk7CiAgICB9CiAgICByZXR1cm4gewogICAgICB3aWR0aDogd2lkdGgsCiAgICAgIGhlaWdodDogaGVpZ2h0LAogICAgICBkZXB0aDogZGVwdGgsCiAgICAgIHR5cGU6IHR5cGUsCiAgICB9OwogIH0KCiAgLyoqCiAgICogU2V0cyBhIHRleHR1cmUgd2l0aCBubyBjb250ZW50cyBvZiBhIGNlcnRhaW4gc2l6ZS4gSW4gb3RoZXIgd29yZHMgY2FsbHMgYGdsLnRleEltYWdlMkRgIHdpdGggYG51bGxgLgogICAqIFlvdSBtdXN0IHNldCBgb3B0aW9ucy53aWR0aGAgYW5kIGBvcHRpb25zLmhlaWdodGAuCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSBXZWJHTFRleHR1cmUgdG8gc2V0IHBhcmFtZXRlcnMgZm9yCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gb3B0aW9ucyBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIHNldEVtcHR5VGV4dHVyZShnbCwgdGV4LCBvcHRpb25zKSB7CiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEJDI7CiAgICBnbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleCk7CiAgICBjb25zdCBsZXZlbCA9IG9wdGlvbnMubGV2ZWwgfHwgMDsKICAgIGNvbnN0IGludGVybmFsRm9ybWF0ID0gb3B0aW9ucy5pbnRlcm5hbEZvcm1hdCB8fCBvcHRpb25zLmZvcm1hdCB8fCBSR0JBJDE7CiAgICBjb25zdCBmb3JtYXRUeXBlID0gZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0KGludGVybmFsRm9ybWF0KTsKICAgIGNvbnN0IGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8IGZvcm1hdFR5cGUuZm9ybWF0OwogICAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZSB8fCBmb3JtYXRUeXBlLnR5cGU7CiAgICBzZXRQYWNrU3RhdGUoZ2wsIG9wdGlvbnMpOwogICAgaWYgKHRhcmdldCA9PT0gVEVYVFVSRV9DVUJFX01BUCQxKSB7CiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCA2OyArK2lpKSB7CiAgICAgICAgZ2wudGV4SW1hZ2UyRChURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpaSwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QkMSB8fCB0YXJnZXQgPT09IFRFWFRVUkVfMkRfQVJSQVkkMSkgewogICAgICBnbC50ZXhJbWFnZTNEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCwgb3B0aW9ucy5kZXB0aCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKTsKICAgIH0gZWxzZSB7CiAgICAgIGdsLnRleEltYWdlMkQodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIG9wdGlvbnMud2lkdGgsIG9wdGlvbnMuaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIG51bGwpOwogICAgfQogIH0KCiAgLyoqCiAgICogQ3JlYXRlcyBhIHRleHR1cmUgYmFzZWQgb24gdGhlIG9wdGlvbnMgcGFzc2VkIGluLgogICAqCiAgICogTm90ZTogbWF5IHJlc2V0IFVOUEFDS19BTElHTk1FTlQsIFVOUEFDS19ST1dfTEVOR1RILCBVTlBBQ0tfSU1BR0VfSEVJR0hULCBVTlBBQ0tfU0tJUF9JTUFHRVMKICAgKiBVTlBBQ0tfU0tJUF9QSVhFTFMsIGFuZCBVTlBBQ0tfU0tJUF9ST1dTCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZVJlYWR5Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhbiBpbWFnZSBoYXMgYmVlbiBkb3dubG9hZGVkIGFuZCB1cGxvYWRlZCB0byB0aGUgdGV4dHVyZS4KICAgKiBAcmV0dXJuIHtXZWJHTFRleHR1cmV9IHRoZSBjcmVhdGVkIHRleHR1cmUuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlVGV4dHVyZShnbCwgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9vcDsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzJDEudGV4dHVyZU9wdGlvbnM7CiAgICBjb25zdCB0ZXggPSBnbC5jcmVhdGVUZXh0dXJlKCk7CiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEJDI7CiAgICBsZXQgd2lkdGggID0gb3B0aW9ucy53aWR0aCAgfHwgMTsKICAgIGxldCBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCAxOwogICAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBvcHRpb25zLmludGVybmFsRm9ybWF0IHx8IFJHQkEkMTsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSkgewogICAgICAvLyB0aGlzIHNob3VsZCBoYXZlIGJlZW4gdGhlIGRlZmF1bHQgZm9yIGN1YmVtYXBzIDooCiAgICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX1dSQVBfUywgQ0xBTVBfVE9fRURHRSQxKTsKICAgICAgZ2wudGV4UGFyYW1ldGVyaSh0YXJnZXQsIFRFWFRVUkVfV1JBUF9ULCBDTEFNUF9UT19FREdFJDEpOwogICAgfQogICAgbGV0IHNyYyA9IG9wdGlvbnMuc3JjOwogICAgaWYgKHNyYykgewogICAgICBpZiAodHlwZW9mIHNyYyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIHNyYyA9IHNyYyhnbCwgb3B0aW9ucyk7CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiAoc3JjKSA9PT0gInN0cmluZyIpIHsKICAgICAgICBsb2FkVGV4dHVyZUZyb21VcmwoZ2wsIHRleCwgb3B0aW9ucywgY2FsbGJhY2spOwogICAgICB9IGVsc2UgaWYgKGlzQXJyYXlCdWZmZXIoc3JjKSB8fAogICAgICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KHNyYykgJiYgKAogICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHNyY1swXSA9PT0gJ251bWJlcicgfHwKICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoc3JjWzBdKSB8fAogICAgICAgICAgICAgICAgICAgICAgaXNBcnJheUJ1ZmZlcihzcmNbMF0pKQogICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkgewogICAgICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBzZXRUZXh0dXJlRnJvbUFycmF5KGdsLCB0ZXgsIHNyYywgb3B0aW9ucyk7CiAgICAgICAgd2lkdGggID0gZGltZW5zaW9ucy53aWR0aDsKICAgICAgICBoZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodDsKICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNyYykgJiYgKHR5cGVvZiAoc3JjWzBdKSA9PT0gJ3N0cmluZycgfHwgaXNUZXhJbWFnZVNvdXJjZShzcmNbMF0pKSkgewogICAgICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSkgewogICAgICAgICAgbG9hZEN1YmVtYXBGcm9tVXJscyhnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjayk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxvYWRTbGljZXNGcm9tVXJscyhnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjayk7CiAgICAgICAgfQogICAgICB9IGVsc2UgeyAvLyBpZiAoaXNUZXhJbWFnZVNvdXJjZShzcmMpKQogICAgICAgIHNldFRleHR1cmVGcm9tRWxlbWVudChnbCwgdGV4LCBzcmMsIG9wdGlvbnMpOwogICAgICAgIHdpZHRoICA9IHNyYy53aWR0aDsKICAgICAgICBoZWlnaHQgPSBzcmMuaGVpZ2h0OwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzZXRFbXB0eVRleHR1cmUoZ2wsIHRleCwgb3B0aW9ucyk7CiAgICB9CiAgICBpZiAoc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpKSB7CiAgICAgIHNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKGdsLCB0ZXgsIG9wdGlvbnMsIHdpZHRoLCBoZWlnaHQsIGludGVybmFsRm9ybWF0KTsKICAgIH0KICAgIHNldFRleHR1cmVQYXJhbWV0ZXJzKGdsLCB0ZXgsIG9wdGlvbnMpOwogICAgcmV0dXJuIHRleDsKICB9CgogIC8qCiAgICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlcwogICAqCiAgICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAogICAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KICAgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKICAgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKICAgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAqCiAgICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICAgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgKgogICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCiAgICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwogICAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKICAgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAgICovCgogIC8qKgogICAqIExvdyBsZXZlbCBzaGFkZXIgcHJvZ3JhbSByZWxhdGVkIGZ1bmN0aW9ucwogICAqCiAgICogWW91IHNob3VsZCBnZW5lcmFsbHkgbm90IG5lZWQgdG8gdXNlIHRoZXNlIGZ1bmN0aW9ucy4gVGhleSBhcmUgcHJvdmlkZWQKICAgKiBmb3IgdGhvc2UgY2FzZXMgd2hlcmUgeW91J3JlIGRvaW5nIHNvbWV0aGluZyBvdXQgb2YgdGhlIG9yZGluYXJ5CiAgICogYW5kIHlvdSBuZWVkIGxvd2VyIGxldmVsIGFjY2Vzcy4KICAgKgogICAqIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHRoZXkgYXJlIGF2YWlsYWJsZSBhdCBib3RoIGB0d2dsLnByb2dyYW1zYCBhbmQgYHR3Z2xgCiAgICogaXRzZWxmCiAgICoKICAgKiBTZWUge0BsaW5rIG1vZHVsZTp0d2dsfSBmb3IgY29yZSBmdW5jdGlvbnMKICAgKgogICAqIEBtb2R1bGUgdHdnbC9wcm9ncmFtcwogICAqLwoKICBjb25zdCBlcnJvciA9IGVycm9yJDE7CiAgZnVuY3Rpb24gZ2V0RWxlbWVudEJ5SWQoaWQpIHsKICAgIHJldHVybiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCkKICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKQogICAgICAgIDogbnVsbDsKICB9CgogIGNvbnN0IFRFWFRVUkUwICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODRjMDsKCiAgY29uc3QgQVJSQVlfQlVGRkVSICAgICAgICAgICAgICAgICAgID0gMHg4ODkyOwogIGNvbnN0IEVMRU1FTlRfQVJSQVlfQlVGRkVSJDEgICAgICAgICAgID0gMHg4ODkzOwoKICBjb25zdCBDT01QSUxFX1NUQVRVUyAgICAgICAgICAgICAgICAgPSAweDhiODE7CiAgY29uc3QgTElOS19TVEFUVVMgICAgICAgICAgICAgICAgICAgID0gMHg4YjgyOwogIGNvbnN0IEZSQUdNRU5UX1NIQURFUiAgICAgICAgICAgICAgICA9IDB4OGIzMDsKICBjb25zdCBWRVJURVhfU0hBREVSICAgICAgICAgICAgICAgICAgPSAweDhiMzE7CiAgY29uc3QgU0VQQVJBVEVfQVRUUklCUyAgICAgICAgICAgICAgID0gMHg4YzhkOwoKICBjb25zdCBBQ1RJVkVfVU5JRk9STVMgICAgICAgICAgICAgICAgPSAweDhiODY7CiAgY29uc3QgQUNUSVZFX0FUVFJJQlVURVMgICAgICAgICAgICAgID0gMHg4Yjg5OwogIGNvbnN0IFRSQU5TRk9STV9GRUVEQkFDS19WQVJZSU5HUyAgICA9IDB4OGM4MzsKICBjb25zdCBBQ1RJVkVfVU5JRk9STV9CTE9DS1MgICAgICAgICAgPSAweDhhMzY7CiAgY29uc3QgVU5JRk9STV9CTE9DS19SRUZFUkVOQ0VEX0JZX1ZFUlRFWF9TSEFERVIgICA9IDB4OGE0NDsKICBjb25zdCBVTklGT1JNX0JMT0NLX1JFRkVSRU5DRURfQllfRlJBR01FTlRfU0hBREVSID0gMHg4YTQ2OwogIGNvbnN0IFVOSUZPUk1fQkxPQ0tfREFUQV9TSVpFICAgICAgICAgICAgICAgICAgICAgPSAweDhhNDA7CiAgY29uc3QgVU5JRk9STV9CTE9DS19BQ1RJVkVfVU5JRk9STV9JTkRJQ0VTICAgICAgICA9IDB4OGE0MzsKCiAgY29uc3QgRkxPQVQgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDY7CiAgY29uc3QgRkxPQVRfVkVDMiAgICAgICAgICAgICAgICAgICAgPSAweDhCNTA7CiAgY29uc3QgRkxPQVRfVkVDMyAgICAgICAgICAgICAgICAgICAgPSAweDhCNTE7CiAgY29uc3QgRkxPQVRfVkVDNCAgICAgICAgICAgICAgICAgICAgPSAweDhCNTI7CiAgY29uc3QgSU5UICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDQ7CiAgY29uc3QgSU5UX1ZFQzIgICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTM7CiAgY29uc3QgSU5UX1ZFQzMgICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTQ7CiAgY29uc3QgSU5UX1ZFQzQgICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTU7CiAgY29uc3QgQk9PTCAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTY7CiAgY29uc3QgQk9PTF9WRUMyICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTc7CiAgY29uc3QgQk9PTF9WRUMzICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTg7CiAgY29uc3QgQk9PTF9WRUM0ICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTk7CiAgY29uc3QgRkxPQVRfTUFUMiAgICAgICAgICAgICAgICAgICAgPSAweDhCNUE7CiAgY29uc3QgRkxPQVRfTUFUMyAgICAgICAgICAgICAgICAgICAgPSAweDhCNUI7CiAgY29uc3QgRkxPQVRfTUFUNCAgICAgICAgICAgICAgICAgICAgPSAweDhCNUM7CiAgY29uc3QgU0FNUExFUl8yRCAgICAgICAgICAgICAgICAgICAgPSAweDhCNUU7CiAgY29uc3QgU0FNUExFUl9DVUJFICAgICAgICAgICAgICAgICAgPSAweDhCNjA7CiAgY29uc3QgU0FNUExFUl8zRCAgICAgICAgICAgICAgICAgICAgPSAweDhCNUY7CiAgY29uc3QgU0FNUExFUl8yRF9TSEFET1cgICAgICAgICAgICAgPSAweDhCNjI7CiAgY29uc3QgRkxPQVRfTUFUMngzICAgICAgICAgICAgICAgICAgPSAweDhCNjU7CiAgY29uc3QgRkxPQVRfTUFUMng0ICAgICAgICAgICAgICAgICAgPSAweDhCNjY7CiAgY29uc3QgRkxPQVRfTUFUM3gyICAgICAgICAgICAgICAgICAgPSAweDhCNjc7CiAgY29uc3QgRkxPQVRfTUFUM3g0ICAgICAgICAgICAgICAgICAgPSAweDhCNjg7CiAgY29uc3QgRkxPQVRfTUFUNHgyICAgICAgICAgICAgICAgICAgPSAweDhCNjk7CiAgY29uc3QgRkxPQVRfTUFUNHgzICAgICAgICAgICAgICAgICAgPSAweDhCNkE7CiAgY29uc3QgU0FNUExFUl8yRF9BUlJBWSAgICAgICAgICAgICAgPSAweDhEQzE7CiAgY29uc3QgU0FNUExFUl8yRF9BUlJBWV9TSEFET1cgICAgICAgPSAweDhEQzQ7CiAgY29uc3QgU0FNUExFUl9DVUJFX1NIQURPVyAgICAgICAgICAgPSAweDhEQzU7CiAgY29uc3QgVU5TSUdORURfSU5UICAgICAgICAgICAgICAgICAgPSAweDE0MDU7CiAgY29uc3QgVU5TSUdORURfSU5UX1ZFQzIgICAgICAgICAgICAgPSAweDhEQzY7CiAgY29uc3QgVU5TSUdORURfSU5UX1ZFQzMgICAgICAgICAgICAgPSAweDhEQzc7CiAgY29uc3QgVU5TSUdORURfSU5UX1ZFQzQgICAgICAgICAgICAgPSAweDhEQzg7CiAgY29uc3QgSU5UX1NBTVBMRVJfMkQgICAgICAgICAgICAgICAgPSAweDhEQ0E7CiAgY29uc3QgSU5UX1NBTVBMRVJfM0QgICAgICAgICAgICAgICAgPSAweDhEQ0I7CiAgY29uc3QgSU5UX1NBTVBMRVJfQ1VCRSAgICAgICAgICAgICAgPSAweDhEQ0M7CiAgY29uc3QgSU5UX1NBTVBMRVJfMkRfQVJSQVkgICAgICAgICAgPSAweDhEQ0Y7CiAgY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfMkQgICAgICAgPSAweDhERDI7CiAgY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfM0QgICAgICAgPSAweDhERDM7CiAgY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfQ1VCRSAgICAgPSAweDhERDQ7CiAgY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfMkRfQVJSQVkgPSAweDhERDc7CgogIGNvbnN0IFRFWFRVUkVfMkQkMSAgICAgICAgICAgICAgICAgICAgPSAweDBERTE7CiAgY29uc3QgVEVYVFVSRV9DVUJFX01BUCAgICAgICAgICAgICAgPSAweDg1MTM7CiAgY29uc3QgVEVYVFVSRV8zRCAgICAgICAgICAgICAgICAgICAgPSAweDgwNkY7CiAgY29uc3QgVEVYVFVSRV8yRF9BUlJBWSAgICAgICAgICAgICAgPSAweDhDMUE7CgogIGNvbnN0IHR5cGVNYXAgPSB7fTsKCiAgLyoqCiAgICogUmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBiaW5kIHBvaW50IGZvciBhIGdpdmVuIHNhbXBsZXIgdHlwZQogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gZ2V0QmluZFBvaW50Rm9yU2FtcGxlclR5cGUoZ2wsIHR5cGUpIHsKICAgIHJldHVybiB0eXBlTWFwW3R5cGVdLmJpbmRQb2ludDsKICB9CgogIC8vIFRoaXMga2luZCBvZiBzdWNrcyEgSWYgeW91IGNvdWxkIGNvbXBvc2UgZnVuY3Rpb25zIGFzIGluIGB2YXIgZm4gPSBnbFtuYW1lXTtgCiAgLy8gdGhpcyBjb2RlIGNvdWxkIGJlIGEgbG90IHNtYWxsZXIgYnV0IHRoYXQgaXMgc2FkbHkgcmVhbGx5IHNsb3cgKFRfVCkKCiAgZnVuY3Rpb24gZmxvYXRTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtMWYobG9jYXRpb24sIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGZsb2F0QXJyYXlTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtMWZ2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdFZlYzJTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtMmZ2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdFZlYzNTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtM2Z2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdFZlYzRTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtNGZ2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBpbnRTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtMWkobG9jYXRpb24sIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGludEFycmF5U2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gaW50VmVjMlNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0yaXYobG9jYXRpb24sIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGludFZlYzNTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtM2l2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBpbnRWZWM0U2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybTRpdihsb2NhdGlvbiwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gdWludFNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0xdWkobG9jYXRpb24sIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIHVpbnRBcnJheVNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0xdWl2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB1aW50VmVjMlNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0ydWl2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB1aW50VmVjM1NldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0zdWl2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB1aW50VmVjNFNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm00dWl2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdE1hdDJTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtTWF0cml4MmZ2KGxvY2F0aW9uLCBmYWxzZSwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gZmxvYXRNYXQzU2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybU1hdHJpeDNmdihsb2NhdGlvbiwgZmFsc2UsIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGZsb2F0TWF0NFNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb24sIGZhbHNlLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdE1hdDIzU2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybU1hdHJpeDJ4M2Z2KGxvY2F0aW9uLCBmYWxzZSwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gZmxvYXRNYXQzMlNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm1NYXRyaXgzeDJmdihsb2NhdGlvbiwgZmFsc2UsIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGZsb2F0TWF0MjRTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtTWF0cml4Mng0ZnYobG9jYXRpb24sIGZhbHNlLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdE1hdDQyU2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybU1hdHJpeDR4MmZ2KGxvY2F0aW9uLCBmYWxzZSwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gZmxvYXRNYXQzNFNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm1NYXRyaXgzeDRmdihsb2NhdGlvbiwgZmFsc2UsIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGZsb2F0TWF0NDNTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtTWF0cml4NHgzZnYobG9jYXRpb24sIGZhbHNlLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBzYW1wbGVyU2V0dGVyKGdsLCB0eXBlLCB1bml0LCBsb2NhdGlvbikgewogICAgY29uc3QgYmluZFBvaW50ID0gZ2V0QmluZFBvaW50Rm9yU2FtcGxlclR5cGUoZ2wsIHR5cGUpOwogICAgcmV0dXJuIGlzV2ViR0wyKGdsKSA/IGZ1bmN0aW9uKHRleHR1cmVPclBhaXIpIHsKICAgICAgbGV0IHRleHR1cmU7CiAgICAgIGxldCBzYW1wbGVyOwogICAgICBpZiAoIXRleHR1cmVPclBhaXIgfHwgaXNUZXh0dXJlKGdsLCB0ZXh0dXJlT3JQYWlyKSkgewogICAgICAgIHRleHR1cmUgPSB0ZXh0dXJlT3JQYWlyOwogICAgICAgIHNhbXBsZXIgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRleHR1cmUgPSB0ZXh0dXJlT3JQYWlyLnRleHR1cmU7CiAgICAgICAgc2FtcGxlciA9IHRleHR1cmVPclBhaXIuc2FtcGxlcjsKICAgICAgfQogICAgICBnbC51bmlmb3JtMWkobG9jYXRpb24sIHVuaXQpOwogICAgICBnbC5hY3RpdmVUZXh0dXJlKFRFWFRVUkUwICsgdW5pdCk7CiAgICAgIGdsLmJpbmRUZXh0dXJlKGJpbmRQb2ludCwgdGV4dHVyZSk7CiAgICAgIGdsLmJpbmRTYW1wbGVyKHVuaXQsIHNhbXBsZXIpOwogICAgfSA6IGZ1bmN0aW9uKHRleHR1cmUpIHsKICAgICAgZ2wudW5pZm9ybTFpKGxvY2F0aW9uLCB1bml0KTsKICAgICAgZ2wuYWN0aXZlVGV4dHVyZShURVhUVVJFMCArIHVuaXQpOwogICAgICBnbC5iaW5kVGV4dHVyZShiaW5kUG9pbnQsIHRleHR1cmUpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIHNhbXBsZXJBcnJheVNldHRlcihnbCwgdHlwZSwgdW5pdCwgbG9jYXRpb24sIHNpemUpIHsKICAgIGNvbnN0IGJpbmRQb2ludCA9IGdldEJpbmRQb2ludEZvclNhbXBsZXJUeXBlKGdsLCB0eXBlKTsKICAgIGNvbnN0IHVuaXRzID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgc2l6ZTsgKytpaSkgewogICAgICB1bml0c1tpaV0gPSB1bml0ICsgaWk7CiAgICB9CgogICAgcmV0dXJuIGlzV2ViR0wyKGdsKSA/IGZ1bmN0aW9uKHRleHR1cmVzKSB7CiAgICAgIGdsLnVuaWZvcm0xaXYobG9jYXRpb24sIHVuaXRzKTsKICAgICAgdGV4dHVyZXMuZm9yRWFjaChmdW5jdGlvbih0ZXh0dXJlT3JQYWlyLCBpbmRleCkgewogICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoVEVYVFVSRTAgKyB1bml0c1tpbmRleF0pOwogICAgICAgIGxldCB0ZXh0dXJlOwogICAgICAgIGxldCBzYW1wbGVyOwogICAgICAgIGlmICghdGV4dHVyZU9yUGFpciB8fCBpc1RleHR1cmUoZ2wsIHRleHR1cmVPclBhaXIpKSB7CiAgICAgICAgICB0ZXh0dXJlID0gdGV4dHVyZU9yUGFpcjsKICAgICAgICAgIHNhbXBsZXIgPSBudWxsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZXh0dXJlID0gdGV4dHVyZU9yUGFpci50ZXh0dXJlOwogICAgICAgICAgc2FtcGxlciA9IHRleHR1cmVPclBhaXIuc2FtcGxlcjsKICAgICAgICB9CiAgICAgICAgZ2wuYmluZFNhbXBsZXIodW5pdCwgc2FtcGxlcik7CiAgICAgICAgZ2wuYmluZFRleHR1cmUoYmluZFBvaW50LCB0ZXh0dXJlKTsKICAgICAgfSk7CiAgICB9IDogZnVuY3Rpb24odGV4dHVyZXMpIHsKICAgICAgZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdW5pdHMpOwogICAgICB0ZXh0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHRleHR1cmUsIGluZGV4KSB7CiAgICAgICAgZ2wuYWN0aXZlVGV4dHVyZShURVhUVVJFMCArIHVuaXRzW2luZGV4XSk7CiAgICAgICAgZ2wuYmluZFRleHR1cmUoYmluZFBvaW50LCB0ZXh0dXJlKTsKICAgICAgfSk7CiAgICB9OwogIH0KCiAgdHlwZU1hcFtGTE9BVF0gICAgICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogIDQsIHNldHRlcjogZmxvYXRTZXR0ZXIsICAgICAgYXJyYXlTZXR0ZXI6IGZsb2F0QXJyYXlTZXR0ZXIsIH07CiAgdHlwZU1hcFtGTE9BVF9WRUMyXSAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogIDgsIHNldHRlcjogZmxvYXRWZWMyU2V0dGVyLCAgY29sczogMiwgfTsKICB0eXBlTWFwW0ZMT0FUX1ZFQzNdICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiAxMiwgc2V0dGVyOiBmbG9hdFZlYzNTZXR0ZXIsICBjb2xzOiAzLCB9OwogIHR5cGVNYXBbRkxPQVRfVkVDNF0gICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDE2LCBzZXR0ZXI6IGZsb2F0VmVjNFNldHRlciwgIGNvbHM6IDQsIH07CiAgdHlwZU1hcFtJTlRdICAgICAgICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEludDMyQXJyYXksICAgc2l6ZTogIDQsIHNldHRlcjogaW50U2V0dGVyLCAgICAgICAgYXJyYXlTZXR0ZXI6IGludEFycmF5U2V0dGVyLCB9OwogIHR5cGVNYXBbSU5UX1ZFQzJdICAgICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBJbnQzMkFycmF5LCAgIHNpemU6ICA4LCBzZXR0ZXI6IGludFZlYzJTZXR0ZXIsICAgIGNvbHM6IDIsIH07CiAgdHlwZU1hcFtJTlRfVkVDM10gICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEludDMyQXJyYXksICAgc2l6ZTogMTIsIHNldHRlcjogaW50VmVjM1NldHRlciwgICAgY29sczogMywgfTsKICB0eXBlTWFwW0lOVF9WRUM0XSAgICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogSW50MzJBcnJheSwgICBzaXplOiAxNiwgc2V0dGVyOiBpbnRWZWM0U2V0dGVyLCAgICBjb2xzOiA0LCB9OwogIHR5cGVNYXBbVU5TSUdORURfSU5UXSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBVaW50MzJBcnJheSwgIHNpemU6ICA0LCBzZXR0ZXI6IHVpbnRTZXR0ZXIsICAgICAgIGFycmF5U2V0dGVyOiB1aW50QXJyYXlTZXR0ZXIsIH07CiAgdHlwZU1hcFtVTlNJR05FRF9JTlRfVkVDMl0gICAgICAgICAgICAgPSB7IFR5cGU6IFVpbnQzMkFycmF5LCAgc2l6ZTogIDgsIHNldHRlcjogdWludFZlYzJTZXR0ZXIsICAgY29sczogMiwgfTsKICB0eXBlTWFwW1VOU0lHTkVEX0lOVF9WRUMzXSAgICAgICAgICAgICA9IHsgVHlwZTogVWludDMyQXJyYXksICBzaXplOiAxMiwgc2V0dGVyOiB1aW50VmVjM1NldHRlciwgICBjb2xzOiAzLCB9OwogIHR5cGVNYXBbVU5TSUdORURfSU5UX1ZFQzRdICAgICAgICAgICAgID0geyBUeXBlOiBVaW50MzJBcnJheSwgIHNpemU6IDE2LCBzZXR0ZXI6IHVpbnRWZWM0U2V0dGVyLCAgIGNvbHM6IDQsIH07CiAgdHlwZU1hcFtCT09MXSAgICAgICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IFVpbnQzMkFycmF5LCAgc2l6ZTogIDQsIHNldHRlcjogaW50U2V0dGVyLCAgICAgICAgYXJyYXlTZXR0ZXI6IGludEFycmF5U2V0dGVyLCB9OwogIHR5cGVNYXBbQk9PTF9WRUMyXSAgICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBVaW50MzJBcnJheSwgIHNpemU6ICA4LCBzZXR0ZXI6IGludFZlYzJTZXR0ZXIsICAgIGNvbHM6IDIsIH07CiAgdHlwZU1hcFtCT09MX1ZFQzNdICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IFVpbnQzMkFycmF5LCAgc2l6ZTogMTIsIHNldHRlcjogaW50VmVjM1NldHRlciwgICAgY29sczogMywgfTsKICB0eXBlTWFwW0JPT0xfVkVDNF0gICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogVWludDMyQXJyYXksICBzaXplOiAxNiwgc2V0dGVyOiBpbnRWZWM0U2V0dGVyLCAgICBjb2xzOiA0LCB9OwogIHR5cGVNYXBbRkxPQVRfTUFUMl0gICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDMyLCBzZXR0ZXI6IGZsb2F0TWF0MlNldHRlciwgIHJvd3M6IDIsIGNvbHM6IDIsIH07CiAgdHlwZU1hcFtGTE9BVF9NQVQzXSAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogNDgsIHNldHRlcjogZmxvYXRNYXQzU2V0dGVyLCAgcm93czogMywgY29sczogMywgfTsKICB0eXBlTWFwW0ZMT0FUX01BVDRdICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiA2NCwgc2V0dGVyOiBmbG9hdE1hdDRTZXR0ZXIsICByb3dzOiA0LCBjb2xzOiA0LCB9OwogIHR5cGVNYXBbRkxPQVRfTUFUMngzXSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDMyLCBzZXR0ZXI6IGZsb2F0TWF0MjNTZXR0ZXIsIHJvd3M6IDIsIGNvbHM6IDMsIH07CiAgdHlwZU1hcFtGTE9BVF9NQVQyeDRdICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogMzIsIHNldHRlcjogZmxvYXRNYXQyNFNldHRlciwgcm93czogMiwgY29sczogNCwgfTsKICB0eXBlTWFwW0ZMT0FUX01BVDN4Ml0gICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiA0OCwgc2V0dGVyOiBmbG9hdE1hdDMyU2V0dGVyLCByb3dzOiAzLCBjb2xzOiAyLCB9OwogIHR5cGVNYXBbRkxPQVRfTUFUM3g0XSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDQ4LCBzZXR0ZXI6IGZsb2F0TWF0MzRTZXR0ZXIsIHJvd3M6IDMsIGNvbHM6IDQsIH07CiAgdHlwZU1hcFtGTE9BVF9NQVQ0eDJdICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogNjQsIHNldHRlcjogZmxvYXRNYXQ0MlNldHRlciwgcm93czogNCwgY29sczogMiwgfTsKICB0eXBlTWFwW0ZMT0FUX01BVDR4M10gICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiA2NCwgc2V0dGVyOiBmbG9hdE1hdDQzU2V0dGVyLCByb3dzOiA0LCBjb2xzOiAzLCB9OwogIHR5cGVNYXBbU0FNUExFUl8yRF0gICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV8yRCQxLCAgICAgICB9OwogIHR5cGVNYXBbU0FNUExFUl9DVUJFXSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV9DVUJFX01BUCwgfTsKICB0eXBlTWFwW1NBTVBMRVJfM0RdICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfM0QsICAgICAgIH07CiAgdHlwZU1hcFtTQU1QTEVSXzJEX1NIQURPV10gICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEJDEsICAgICAgIH07CiAgdHlwZU1hcFtTQU1QTEVSXzJEX0FSUkFZXSAgICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEX0FSUkFZLCB9OwogIHR5cGVNYXBbU0FNUExFUl8yRF9BUlJBWV9TSEFET1ddICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV8yRF9BUlJBWSwgfTsKICB0eXBlTWFwW1NBTVBMRVJfQ1VCRV9TSEFET1ddICAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfQ1VCRV9NQVAsIH07CiAgdHlwZU1hcFtJTlRfU0FNUExFUl8yRF0gICAgICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEJDEsICAgICAgIH07CiAgdHlwZU1hcFtJTlRfU0FNUExFUl8zRF0gICAgICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzNELCAgICAgICB9OwogIHR5cGVNYXBbSU5UX1NBTVBMRVJfQ1VCRV0gICAgICAgICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV9DVUJFX01BUCwgfTsKICB0eXBlTWFwW0lOVF9TQU1QTEVSXzJEX0FSUkFZXSAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfMkRfQVJSQVksIH07CiAgdHlwZU1hcFtVTlNJR05FRF9JTlRfU0FNUExFUl8yRF0gICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEJDEsICAgICAgIH07CiAgdHlwZU1hcFtVTlNJR05FRF9JTlRfU0FNUExFUl8zRF0gICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzNELCAgICAgICB9OwogIHR5cGVNYXBbVU5TSUdORURfSU5UX1NBTVBMRVJfQ1VCRV0gICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV9DVUJFX01BUCwgfTsKICB0eXBlTWFwW1VOU0lHTkVEX0lOVF9TQU1QTEVSXzJEX0FSUkFZXSA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfMkRfQVJSQVksIH07CgogIGZ1bmN0aW9uIGZsb2F0QXR0cmliU2V0dGVyKGdsLCBpbmRleCkgewogICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHsKICAgICAgaWYgKGIudmFsdWUpIHsKICAgICAgICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoaW5kZXgpOwogICAgICAgIHN3aXRjaCAoYi52YWx1ZS5sZW5ndGgpIHsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliNGZ2KGluZGV4LCBiLnZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYjNmdihpbmRleCwgYi52YWx1ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWIyZnYoaW5kZXgsIGIudmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliMWZ2KGluZGV4LCBiLnZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RoZSBsZW5ndGggb2YgYSBmbG9hdCBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNCEnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZ2wuYmluZEJ1ZmZlcihBUlJBWV9CVUZGRVIsIGIuYnVmZmVyKTsKICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShpbmRleCk7CiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcigKICAgICAgICAgICAgaW5kZXgsIGIubnVtQ29tcG9uZW50cyB8fCBiLnNpemUsIGIudHlwZSB8fCBGTE9BVCwgYi5ub3JtYWxpemUgfHwgZmFsc2UsIGIuc3RyaWRlIHx8IDAsIGIub2Zmc2V0IHx8IDApOwogICAgICAgIGlmIChnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKSB7CiAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKGluZGV4LCBiLmRpdmlzb3IgfHwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gaW50QXR0cmliU2V0dGVyKGdsLCBpbmRleCkgewogICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHsKICAgICAgaWYgKGIudmFsdWUpIHsKICAgICAgICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoaW5kZXgpOwogICAgICAgIGlmIChiLnZhbHVlLmxlbmd0aCA9PT0gNCkgewogICAgICAgICAgZ2wudmVydGV4QXR0cmliNGl2KGluZGV4LCBiLnZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgbGVuZ3RoIG9mIGFuIGludGVnZXIgY29uc3RhbnQgdmFsdWUgbXVzdCBiZSA0IScpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiwgYi5idWZmZXIpOwogICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTsKICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJJUG9pbnRlcigKICAgICAgICAgICAgaW5kZXgsIGIubnVtQ29tcG9uZW50cyB8fCBiLnNpemUsIGIudHlwZSB8fCBJTlQsIGIuc3RyaWRlIHx8IDAsIGIub2Zmc2V0IHx8IDApOwogICAgICAgIGlmIChnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKSB7CiAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKGluZGV4LCBiLmRpdmlzb3IgfHwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gdWludEF0dHJpYlNldHRlcihnbCwgaW5kZXgpIHsKICAgIHJldHVybiBmdW5jdGlvbihiKSB7CiAgICAgIGlmIChiLnZhbHVlKSB7CiAgICAgICAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTsKICAgICAgICBpZiAoYi52YWx1ZS5sZW5ndGggPT09IDQpIHsKICAgICAgICAgIGdsLnZlcnRleEF0dHJpYjR1aXYoaW5kZXgsIGIudmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBsZW5ndGggb2YgYW4gdW5zaWduZWQgaW50ZWdlciBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIDQhJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGdsLmJpbmRCdWZmZXIoQVJSQVlfQlVGRkVSLCBiLmJ1ZmZlcik7CiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoaW5kZXgpOwogICAgICAgIGdsLnZlcnRleEF0dHJpYklQb2ludGVyKAogICAgICAgICAgICBpbmRleCwgYi5udW1Db21wb25lbnRzIHx8IGIuc2l6ZSwgYi50eXBlIHx8IFVOU0lHTkVEX0lOVCwgYi5zdHJpZGUgfHwgMCwgYi5vZmZzZXQgfHwgMCk7CiAgICAgICAgaWYgKGdsLnZlcnRleEF0dHJpYkRpdmlzb3IpIHsKICAgICAgICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IoaW5kZXgsIGIuZGl2aXNvciB8fCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfQoKICBmdW5jdGlvbiBtYXRBdHRyaWJTZXR0ZXIoZ2wsIGluZGV4LCB0eXBlSW5mbykgewogICAgY29uc3QgZGVmYXVsdFNpemUgPSB0eXBlSW5mby5zaXplOwogICAgY29uc3QgY291bnQgPSB0eXBlSW5mby5jb3VudDsKCiAgICByZXR1cm4gZnVuY3Rpb24oYikgewogICAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiwgYi5idWZmZXIpOwogICAgICBjb25zdCBudW1Db21wb25lbnRzID0gYi5zaXplIHx8IGIubnVtQ29tcG9uZW50cyB8fCBkZWZhdWx0U2l6ZTsKICAgICAgY29uc3Qgc2l6ZSA9IG51bUNvbXBvbmVudHMgLyBjb3VudDsKICAgICAgY29uc3QgdHlwZSA9IGIudHlwZSB8fCBGTE9BVDsKICAgICAgY29uc3QgdHlwZUluZm8gPSB0eXBlTWFwW3R5cGVdOwogICAgICBjb25zdCBzdHJpZGUgPSB0eXBlSW5mby5zaXplICogbnVtQ29tcG9uZW50czsKICAgICAgY29uc3Qgbm9ybWFsaXplID0gYi5ub3JtYWxpemUgfHwgZmFsc2U7CiAgICAgIGNvbnN0IG9mZnNldCA9IGIub2Zmc2V0IHx8IDA7CiAgICAgIGNvbnN0IHJvd09mZnNldCA9IHN0cmlkZSAvIGNvdW50OwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHsKICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShpbmRleCArIGkpOwogICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoCiAgICAgICAgICAgIGluZGV4ICsgaSwgc2l6ZSwgdHlwZSwgbm9ybWFsaXplLCBzdHJpZGUsIG9mZnNldCArIHJvd09mZnNldCAqIGkpOwogICAgICAgIGlmIChnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKSB7CiAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKGluZGV4ICsgaSwgYi5kaXZpc29yIHx8IDApOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9CgoKCiAgY29uc3QgYXR0clR5cGVNYXAgPSB7fTsKICBhdHRyVHlwZU1hcFtGTE9BVF0gICAgICAgICAgICAgPSB7IHNpemU6ICA0LCBzZXR0ZXI6IGZsb2F0QXR0cmliU2V0dGVyLCB9OwogIGF0dHJUeXBlTWFwW0ZMT0FUX1ZFQzJdICAgICAgICA9IHsgc2l6ZTogIDgsIHNldHRlcjogZmxvYXRBdHRyaWJTZXR0ZXIsIH07CiAgYXR0clR5cGVNYXBbRkxPQVRfVkVDM10gICAgICAgID0geyBzaXplOiAxMiwgc2V0dGVyOiBmbG9hdEF0dHJpYlNldHRlciwgfTsKICBhdHRyVHlwZU1hcFtGTE9BVF9WRUM0XSAgICAgICAgPSB7IHNpemU6IDE2LCBzZXR0ZXI6IGZsb2F0QXR0cmliU2V0dGVyLCB9OwogIGF0dHJUeXBlTWFwW0lOVF0gICAgICAgICAgICAgICA9IHsgc2l6ZTogIDQsIHNldHRlcjogaW50QXR0cmliU2V0dGVyLCAgIH07CiAgYXR0clR5cGVNYXBbSU5UX1ZFQzJdICAgICAgICAgID0geyBzaXplOiAgOCwgc2V0dGVyOiBpbnRBdHRyaWJTZXR0ZXIsICAgfTsKICBhdHRyVHlwZU1hcFtJTlRfVkVDM10gICAgICAgICAgPSB7IHNpemU6IDEyLCBzZXR0ZXI6IGludEF0dHJpYlNldHRlciwgICB9OwogIGF0dHJUeXBlTWFwW0lOVF9WRUM0XSAgICAgICAgICA9IHsgc2l6ZTogMTYsIHNldHRlcjogaW50QXR0cmliU2V0dGVyLCAgIH07CiAgYXR0clR5cGVNYXBbVU5TSUdORURfSU5UXSAgICAgID0geyBzaXplOiAgNCwgc2V0dGVyOiB1aW50QXR0cmliU2V0dGVyLCAgfTsKICBhdHRyVHlwZU1hcFtVTlNJR05FRF9JTlRfVkVDMl0gPSB7IHNpemU6ICA4LCBzZXR0ZXI6IHVpbnRBdHRyaWJTZXR0ZXIsICB9OwogIGF0dHJUeXBlTWFwW1VOU0lHTkVEX0lOVF9WRUMzXSA9IHsgc2l6ZTogMTIsIHNldHRlcjogdWludEF0dHJpYlNldHRlciwgIH07CiAgYXR0clR5cGVNYXBbVU5TSUdORURfSU5UX1ZFQzRdID0geyBzaXplOiAxNiwgc2V0dGVyOiB1aW50QXR0cmliU2V0dGVyLCAgfTsKICBhdHRyVHlwZU1hcFtCT09MXSAgICAgICAgICAgICAgPSB7IHNpemU6ICA0LCBzZXR0ZXI6IGludEF0dHJpYlNldHRlciwgICB9OwogIGF0dHJUeXBlTWFwW0JPT0xfVkVDMl0gICAgICAgICA9IHsgc2l6ZTogIDgsIHNldHRlcjogaW50QXR0cmliU2V0dGVyLCAgIH07CiAgYXR0clR5cGVNYXBbQk9PTF9WRUMzXSAgICAgICAgID0geyBzaXplOiAxMiwgc2V0dGVyOiBpbnRBdHRyaWJTZXR0ZXIsICAgfTsKICBhdHRyVHlwZU1hcFtCT09MX1ZFQzRdICAgICAgICAgPSB7IHNpemU6IDE2LCBzZXR0ZXI6IGludEF0dHJpYlNldHRlciwgICB9OwogIGF0dHJUeXBlTWFwW0ZMT0FUX01BVDJdICAgICAgICA9IHsgc2l6ZTogIDQsIHNldHRlcjogbWF0QXR0cmliU2V0dGVyLCAgIGNvdW50OiAyLCB9OwogIGF0dHJUeXBlTWFwW0ZMT0FUX01BVDNdICAgICAgICA9IHsgc2l6ZTogIDksIHNldHRlcjogbWF0QXR0cmliU2V0dGVyLCAgIGNvdW50OiAzLCB9OwogIGF0dHJUeXBlTWFwW0ZMT0FUX01BVDRdICAgICAgICA9IHsgc2l6ZTogMTYsIHNldHRlcjogbWF0QXR0cmliU2V0dGVyLCAgIGNvdW50OiA0LCB9OwoKICBjb25zdCBlcnJvclJFID0gL0VSUk9SOlxzKlxkKzooXGQrKS9naTsKICBmdW5jdGlvbiBhZGRMaW5lTnVtYmVyc1dpdGhFcnJvcihzcmMsIGxvZyA9ICcnLCBsaW5lT2Zmc2V0ID0gMCkgewogICAgLy8gTm90ZTogRXJyb3IgbWVzc2FnZSBmb3JtYXRzIGFyZSBub3QgZGVmaW5lZCBieSBhbnkgc3BlYyBzbyB0aGlzIG1heSBvciBtYXkgbm90IHdvcmsuCiAgICBjb25zdCBtYXRjaGVzID0gWy4uLmxvZy5tYXRjaEFsbChlcnJvclJFKV07CiAgICBjb25zdCBsaW5lTm9Ub0Vycm9yTWFwID0gbmV3IE1hcChtYXRjaGVzLm1hcCgobSwgbmR4KSA9PiB7CiAgICAgIGNvbnN0IGxpbmVObyA9IHBhcnNlSW50KG1bMV0pOwogICAgICBjb25zdCBuZXh0ID0gbWF0Y2hlc1tuZHggKyAxXTsKICAgICAgY29uc3QgZW5kID0gbmV4dCA/IG5leHQuaW5kZXggOiBsb2cubGVuZ3RoOwogICAgICBjb25zdCBtc2cgPSBsb2cuc3Vic3RyaW5nKG0uaW5kZXgsIGVuZCk7CiAgICAgIHJldHVybiBbbGluZU5vIC0gMSwgbXNnXTsKICAgIH0pKTsKICAgIHJldHVybiBzcmMuc3BsaXQoJ1xuJykubWFwKChsaW5lLCBsaW5lTm8pID0+IHsKICAgICAgY29uc3QgZXJyID0gbGluZU5vVG9FcnJvck1hcC5nZXQobGluZU5vKTsKICAgICAgcmV0dXJuIGAke2xpbmVObyArIDEgKyBsaW5lT2Zmc2V0fTogJHtsaW5lfSR7ZXJyID8gYFxuXG5eXl4gJHtlcnJ9YCA6ICcnfWA7CiAgICB9KS5qb2luKCdcbicpOwogIH0KCiAgLyoqCiAgICogRXJyb3IgQ2FsbGJhY2sKICAgKiBAY2FsbGJhY2sgRXJyb3JDYWxsYmFjawogICAqIEBwYXJhbSB7c3RyaW5nfSBtc2cgZXJyb3IgbWVzc2FnZS4KICAgKiBAcGFyYW0ge251bWJlcn0gW2xpbmVPZmZzZXRdIGFtb3VudCB0byBhZGQgdG8gbGluZSBudW1iZXIKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogUHJvZ3JhbSBDYWxsYmFjawogICAqIEBjYWxsYmFjayBQcm9ncmFtQ2FsbGJhY2sKICAgKiBAcGFyYW0ge3N0cmluZ30gW2Vycl0gZXJyb3IgbWVzc2FnZSwgZmFsc3kgaWYgbm8gZXJyb3IKICAgKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbXxtb2R1bGU6dHdnbC5Qcm9ncmFtSW5mb30gW3Jlc3VsdF0gdGhlIHByb2dyYW0gb3IgcHJvZ3JhbUluZm8KICAgKi8KCiAgY29uc3Qgc3BhY2VSRSA9IC9eWyBcdF0qXG4vOwoKICAvKioKICAgKiBSZW1vdmUgdGhlIGZpcnN0IGVuZCBvZiBsaW5lIGJlY2F1c2UgV2ViR0wgMi4wIHJlcXVpcmVzCiAgICogI3ZlcnNpb24gMzAwIGVzCiAgICogYXMgdGhlIGZpcnN0IGxpbmUuIE5vIHdoaXRlc3BhY2UgYWxsb3dlZCBiZWZvcmUgdGhhdCBsaW5lCiAgICogc28KICAgKgogICAqIDxzY3JpcHQ+CiAgICogI3ZlcnNpb24gMzAwIGVzCiAgICogPC9zY3JpcHQ+CiAgICoKICAgKiBIYXMgb25lIGxpbmUgYmVmb3JlIGl0IHdoaWNoIGlzIGludmFsaWQgYWNjb3JkaW5nIHRvIEdMU0wgRVMgMy4wMAogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IHNoYWRlclNvdXJjZSBUaGUgc291cmNlIG9mIHRoZSBzaGFkZXIKICAgKiBAcmV0dXJucyB7e3NoYWRlclNvdXJjZTogc3RyaW5nLCBsaW5lT2Zmc2V0OiBudW1iZXJ9fQogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gcHJlcFNoYWRlclNvdXJjZShzaGFkZXJTb3VyY2UpIHsKICAgIGxldCBsaW5lT2Zmc2V0ID0gMDsKICAgIGlmIChzcGFjZVJFLnRlc3Qoc2hhZGVyU291cmNlKSkgewogICAgICBsaW5lT2Zmc2V0ID0gMTsKICAgICAgc2hhZGVyU291cmNlID0gc2hhZGVyU291cmNlLnJlcGxhY2Uoc3BhY2VSRSwgJycpOwogICAgfQogICAgcmV0dXJuIHtsaW5lT2Zmc2V0LCBzaGFkZXJTb3VyY2V9OwogIH0KCiAgLyoqCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5Qcm9ncmFtT3B0aW9uc30gcHJvZ09wdGlvbnMKICAgKiBAcGFyYW0ge3N0cmluZ30gbXNnCiAgICogQHJldHVybiBudWxsCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiByZXBvcnRFcnJvcihwcm9nT3B0aW9ucywgbXNnKSB7CiAgICBwcm9nT3B0aW9ucy5lcnJvckNhbGxiYWNrKG1zZyk7CiAgICBpZiAocHJvZ09wdGlvbnMuY2FsbGJhY2spIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgcHJvZ09wdGlvbnMuY2FsbGJhY2soYCR7bXNnfVxuJHtwcm9nT3B0aW9ucy5lcnJvcnMuam9pbignXG4nKX1gKTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8qKgogICAqIENoZWNrIFNoYWRlciBzdGF0dXMKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCB0byB1c2UuCiAgICogQHBhcmFtIHtudW1iZXJ9IHNoYWRlclR5cGUgVGhlIHNoYWRlciB0eXBlCiAgICogQHBhcmFtIHtXZWJHTFNoYWRlcn0gc2hhZGVyIFRoZSBzaGFkZXIKICAgKiBAcGFyYW0ge0Vycm9yQ2FsbGJhY2t9IFtlcnJGbl0gZnVuY3Rpb24gdG8gcmVjZWl2ZSBlcnJvciBtZXNzYWdlLgogICAqIEByZXR1cm4ge3N0cmluZ30gZXJyb3JzIG9yIGVtcHR5IHN0cmluZwogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gY2hlY2tTaGFkZXJTdGF0dXMoZ2wsIHNoYWRlclR5cGUsIHNoYWRlciwgZXJyRm4pIHsKICAgIGVyckZuID0gZXJyRm4gfHwgZXJyb3I7CiAgICAvLyBDaGVjayB0aGUgY29tcGlsZSBzdGF0dXMKICAgIGNvbnN0IGNvbXBpbGVkID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgQ09NUElMRV9TVEFUVVMpOwogICAgaWYgKCFjb21waWxlZCkgewogICAgICAvLyBTb21ldGhpbmcgd2VudCB3cm9uZyBkdXJpbmcgY29tcGlsYXRpb247IGdldCB0aGUgZXJyb3IKICAgICAgY29uc3QgbGFzdEVycm9yID0gZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpOwogICAgICBjb25zdCB7bGluZU9mZnNldCwgc2hhZGVyU291cmNlfSA9IHByZXBTaGFkZXJTb3VyY2UoZ2wuZ2V0U2hhZGVyU291cmNlKHNoYWRlcikpOwogICAgICBjb25zdCBlcnJvciA9IGAke2FkZExpbmVOdW1iZXJzV2l0aEVycm9yKHNoYWRlclNvdXJjZSwgbGFzdEVycm9yLCBsaW5lT2Zmc2V0KX1cbkVycm9yIGNvbXBpbGluZyAke2dsRW51bVRvU3RyaW5nKGdsLCBzaGFkZXJUeXBlKX06ICR7bGFzdEVycm9yfWA7CiAgICAgIGVyckZuKGVycm9yKTsKICAgICAgcmV0dXJuIGVycm9yOwogICAgfQogICAgcmV0dXJuICcnOwogIH0KCiAgLyoqCiAgICogQHR5cGVkZWYge09iamVjdH0gRnVsbFByb2dyYW1TcGVjCiAgICogQHByb3BlcnR5IHtzdHJpbmdbXX0gc2hhZGVycyB0aGUgc2hhZGVyIHNvdXJjZSBvciBlbGVtZW50IGlkcy4KICAgKiBAcHJvcGVydHkge2Z1bmN0aW9uKHN0cmluZyl9IFtlcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzCiAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZyxudW1iZXI+fHN0cmluZ1tdfSBbYXR0cmliTG9jYXRpb25zXSBhIGF0dHJpYnV0ZSBuYW1lIHRvIGxvY2F0aW9uIG1hcCwgb3IgYXJyYXkgb2YgYXR0cmlidXRlIG5hbWVzIHdoZXJlIGluZGV4ID0gbG9jYXRpb24uCiAgICogQHByb3BlcnR5IHsobW9kdWxlOnR3Z2wuQnVmZmVySW5mb3xPYmplY3QuPHN0cmluZyxtb2R1bGU6dHdnbC5BdHRyaWJJbmZvPnxzdHJpbmdbXSl9IFt0cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzXSBJZiBwYXNzZWQKICAgKiAgIGEgQnVmZmVySW5mbyB3aWxsIHVzZSB0aGUgYXR0cmlicyBuYW1lcyBpbnNpZGUuIElmIHBhc3NlZCBhbiBvYmplY3Qgb2YgQXR0cmliSW5mb3Mgd2lsbCB1c2UgdGhlIG5hbWVzIGZyb20gdGhhdCBvYmplY3QuIE90aGVyd2lzZQogICAqICAgeW91IGNhbiBwYXNzIGFuIGFycmF5IG9mIG5hbWVzLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNmb3JtRmVlZGJhY2tNb2RlXSB0aGUgbW9kZSB0byBwYXNzIGBnbC50cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzYC4gRGVmYXVsdHMgdG8gYFNFUEFSQVRFX0FUVFJJQlNgLgogICAqIEBwcm9wZXJ0eSB7UHJvZ3JhbUNhbGxiYWNrfSBbY2FsbGJhY2tdIGNhbGxiYWNrIGZvciBhc3luYyBwcm9ncmFtIGNvbXBpbGF0aW9uLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBAdHlwZWRlZiB7c3RyaW5nW118bW9kdWxlOnR3Z2wuRnVsbFByb2dyYW1TcGVjfSBQcm9ncmFtU3BlYwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBQcm9ncmFtT3B0aW9ucwogICAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oc3RyaW5nKX0gW2Vycm9yQ2FsbGJhY2tdIGNhbGxiYWNrIGZvciBlcnJvcnMKICAgKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLG51bWJlcj58c3RyaW5nW119IFthdHRyaWJMb2NhdGlvbnNdIGEgYXR0cmlidXRlIG5hbWUgdG8gbG9jYXRpb24gbWFwLCBvciBhcnJheSBvZiBhdHRyaWJ1dGUgbmFtZXMgd2hlcmUgaW5kZXggPSBsb2NhdGlvbi4KICAgKiBAcHJvcGVydHkgeyhtb2R1bGU6dHdnbC5CdWZmZXJJbmZvfE9iamVjdC48c3RyaW5nLG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+fHN0cmluZ1tdKX0gW3RyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3NdIElmIHBhc3NlZAogICAqICAgYSBCdWZmZXJJbmZvIHdpbGwgdXNlIHRoZSBhdHRyaWJzIG5hbWVzIGluc2lkZS4gSWYgcGFzc2VkIGFuIG9iamVjdCBvZiBBdHRyaWJJbmZvcyB3aWxsIHVzZSB0aGUgbmFtZXMgZnJvbSB0aGF0IG9iamVjdC4gT3RoZXJ3aXNlCiAgICogICB5b3UgY2FuIHBhc3MgYW4gYXJyYXkgb2YgbmFtZXMuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2Zvcm1GZWVkYmFja01vZGVdIHRoZSBtb2RlIHRvIHBhc3MgYGdsLnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3NgLiBEZWZhdWx0cyB0byBgU0VQQVJBVEVfQVRUUklCU2AuCiAgICogQHByb3BlcnR5IHtQcm9ncmFtQ2FsbGJhY2t9IFtjYWxsYmFja10gY2FsbGJhY2sgZm9yIGFzeW5jIHByb2dyYW0gY29tcGlsYXRpb24uCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIEdldHMgdGhlIHByb2dyYW0gb3B0aW9ucyBiYXNlZCBvbiBhbGwgdGhlc2Ugb3B0aW9uYWwgYXJndW1lbnRzCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5Qcm9ncmFtT3B0aW9uc3xzdHJpbmdbXX0gW29wdF9hdHRyaWJzXSBPcHRpb25zIGZvciB0aGUgcHJvZ3JhbSBvciBhbiBhcnJheSBvZiBhdHRyaWJzIG5hbWVzLiBMb2NhdGlvbnMgd2lsbCBiZSBhc3NpZ25lZCBieSBpbmRleCBpZiBub3QgcGFzc2VkIGluCiAgICogQHBhcmFtIHtudW1iZXJbXX0gW29wdF9sb2NhdGlvbnNdIFRoZSBsb2NhdGlvbnMgZm9yIHRoZS4gQSBwYXJhbGxlbCBhcnJheSB0byBvcHRfYXR0cmlicyBsZXR0aW5nIHlvdSBhc3NpZ24gbG9jYXRpb25zLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9lcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzLiBCeSBkZWZhdWx0IGl0IGp1c3QgcHJpbnRzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlCiAgICogICAgICAgIG9uIGVycm9yLiBJZiB5b3Ugd2FudCBzb21ldGhpbmcgZWxzZSBwYXNzIGFuIGNhbGxiYWNrLiBJdCdzIHBhc3NlZCBhbiBlcnJvciBtZXNzYWdlLgogICAqIEByZXR1cm4ge21vZHVsZTp0d2dsLlByb2dyYW1PcHRpb25zfSBhbiBpbnN0YW5jZSBvZiBQcm9ncmFtT3B0aW9ucyBiYXNlZCBvbiB0aGUgYXJndW1lbnRzIHBhc3NlZCBpbgogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gZ2V0UHJvZ3JhbU9wdGlvbnMob3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKSB7CiAgICBsZXQgdHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5nczsKICAgIGxldCB0cmFuc2Zvcm1GZWVkYmFja01vZGU7CiAgICBsZXQgY2FsbGJhY2s7CiAgICBpZiAodHlwZW9mIG9wdF9sb2NhdGlvbnMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgb3B0X2Vycm9yQ2FsbGJhY2sgPSBvcHRfbG9jYXRpb25zOwogICAgICBvcHRfbG9jYXRpb25zID0gdW5kZWZpbmVkOwogICAgfQogICAgaWYgKHR5cGVvZiBvcHRfYXR0cmlicyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBvcHRfZXJyb3JDYWxsYmFjayA9IG9wdF9hdHRyaWJzOwogICAgICBvcHRfYXR0cmlicyA9IHVuZGVmaW5lZDsKICAgIH0gZWxzZSBpZiAob3B0X2F0dHJpYnMgJiYgIUFycmF5LmlzQXJyYXkob3B0X2F0dHJpYnMpKSB7CiAgICAgIGNvbnN0IG9wdCA9IG9wdF9hdHRyaWJzOwogICAgICBvcHRfZXJyb3JDYWxsYmFjayA9IG9wdC5lcnJvckNhbGxiYWNrOwogICAgICBvcHRfYXR0cmlicyA9IG9wdC5hdHRyaWJMb2NhdGlvbnM7CiAgICAgIHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3MgPSBvcHQudHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5nczsKICAgICAgdHJhbnNmb3JtRmVlZGJhY2tNb2RlID0gb3B0LnRyYW5zZm9ybUZlZWRiYWNrTW9kZTsKICAgICAgY2FsbGJhY2sgPSBvcHQuY2FsbGJhY2s7CiAgICB9CgogICAgY29uc3QgZXJyb3JDYWxsYmFjayA9IG9wdF9lcnJvckNhbGxiYWNrIHx8IGVycm9yOwogICAgY29uc3QgZXJyb3JzID0gW107CiAgICBjb25zdCBvcHRpb25zID0gewogICAgICBlcnJvckNhbGxiYWNrKG1zZywgLi4uYXJncykgewogICAgICAgIGVycm9ycy5wdXNoKG1zZyk7CiAgICAgICAgZXJyb3JDYWxsYmFjayhtc2csIC4uLmFyZ3MpOwogICAgICB9LAogICAgICB0cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzLAogICAgICB0cmFuc2Zvcm1GZWVkYmFja01vZGUsCiAgICAgIGNhbGxiYWNrLAogICAgICBlcnJvcnMsCiAgICB9OwoKICAgIHsKICAgICAgbGV0IGF0dHJpYkxvY2F0aW9ucyA9IHt9OwogICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRfYXR0cmlicykpIHsKICAgICAgICBvcHRfYXR0cmlicy5mb3JFYWNoKGZ1bmN0aW9uKGF0dHJpYiwgIG5keCkgewogICAgICAgICAgYXR0cmliTG9jYXRpb25zW2F0dHJpYl0gPSBvcHRfbG9jYXRpb25zID8gb3B0X2xvY2F0aW9uc1tuZHhdIDogbmR4OwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGF0dHJpYkxvY2F0aW9ucyA9IG9wdF9hdHRyaWJzIHx8IHt9OwogICAgICB9CiAgICAgIG9wdGlvbnMuYXR0cmliTG9jYXRpb25zID0gYXR0cmliTG9jYXRpb25zOwogICAgfQoKICAgIHJldHVybiBvcHRpb25zOwogIH0KCiAgY29uc3QgZGVmYXVsdFNoYWRlclR5cGUgPSBbCiAgICAiVkVSVEVYX1NIQURFUiIsCiAgICAiRlJBR01FTlRfU0hBREVSIiwKICBdOwoKICBmdW5jdGlvbiBnZXRTaGFkZXJUeXBlRnJvbVNjcmlwdFR5cGUoZ2wsIHNjcmlwdFR5cGUpIHsKICAgIGlmIChzY3JpcHRUeXBlLmluZGV4T2YoImZyYWciKSA+PSAwKSB7CiAgICAgIHJldHVybiBGUkFHTUVOVF9TSEFERVI7CiAgICB9IGVsc2UgaWYgKHNjcmlwdFR5cGUuaW5kZXhPZigidmVydCIpID49IDApIHsKICAgICAgcmV0dXJuIFZFUlRFWF9TSEFERVI7CiAgICB9CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgZnVuY3Rpb24gZGVsZXRlUHJvZ3JhbUFuZFNoYWRlcnMoZ2wsIHByb2dyYW0sIG5vdFRoZXNlKSB7CiAgICBjb25zdCBzaGFkZXJzID0gZ2wuZ2V0QXR0YWNoZWRTaGFkZXJzKHByb2dyYW0pOwogICAgZm9yIChjb25zdCBzaGFkZXIgb2Ygc2hhZGVycykgewogICAgICBpZiAobm90VGhlc2UuaGFzKHNoYWRlcikpIHsKICAgICAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTsKICAgICAgfQogICAgfQogICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTsKICB9CgogIGNvbnN0IHdhaXQkMSA9IChtcyA9IDApID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpOwoKICBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtTm9DaGVjayhnbCwgc2hhZGVycywgcHJvZ3JhbU9wdGlvbnMpIHsKICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7CiAgICBjb25zdCB7CiAgICAgIGF0dHJpYkxvY2F0aW9ucywKICAgICAgdHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncywKICAgICAgdHJhbnNmb3JtRmVlZGJhY2tNb2RlLAogICAgfSA9IGdldFByb2dyYW1PcHRpb25zKHByb2dyYW1PcHRpb25zKTsKCiAgICBmb3IgKGxldCBuZHggPSAwOyBuZHggPCBzaGFkZXJzLmxlbmd0aDsgKytuZHgpIHsKICAgICAgbGV0IHNoYWRlciA9IHNoYWRlcnNbbmR4XTsKICAgICAgaWYgKHR5cGVvZiBzaGFkZXIgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgY29uc3QgZWxlbSA9IGdldEVsZW1lbnRCeUlkKHNoYWRlcik7CiAgICAgICAgY29uc3Qgc3JjID0gZWxlbSA/IGVsZW0udGV4dCA6IHNoYWRlcjsKICAgICAgICBsZXQgdHlwZSA9IGdsW2RlZmF1bHRTaGFkZXJUeXBlW25keF1dOwogICAgICAgIGlmIChlbGVtICYmIGVsZW0udHlwZSkgewogICAgICAgICAgdHlwZSA9IGdldFNoYWRlclR5cGVGcm9tU2NyaXB0VHlwZShnbCwgZWxlbS50eXBlKSB8fCB0eXBlOwogICAgICAgIH0KICAgICAgICBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7CiAgICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgcHJlcFNoYWRlclNvdXJjZShzcmMpLnNoYWRlclNvdXJjZSk7CiAgICAgICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpOwogICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBzaGFkZXIpOwogICAgICB9CiAgICB9CgogICAgT2JqZWN0LmVudHJpZXMoYXR0cmliTG9jYXRpb25zKS5mb3JFYWNoKChbYXR0cmliLCBsb2NdKSA9PiBnbC5iaW5kQXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgbG9jLCBhdHRyaWIpKTsKCiAgICB7CiAgICAgIGxldCB2YXJ5aW5ncyA9IHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3M7CiAgICAgIGlmICh2YXJ5aW5ncykgewogICAgICAgIGlmICh2YXJ5aW5ncy5hdHRyaWJzKSB7CiAgICAgICAgICB2YXJ5aW5ncyA9IHZhcnlpbmdzLmF0dHJpYnM7CiAgICAgICAgfQogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YXJ5aW5ncykpIHsKICAgICAgICAgIHZhcnlpbmdzID0gT2JqZWN0LmtleXModmFyeWluZ3MpOwogICAgICAgIH0KICAgICAgICBnbC50cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzKHByb2dyYW0sIHZhcnlpbmdzLCB0cmFuc2Zvcm1GZWVkYmFja01vZGUgfHwgU0VQQVJBVEVfQVRUUklCUyk7CiAgICAgIH0KICAgIH0KCiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTsKICAgIHJldHVybiBwcm9ncmFtOwogIH0KCiAgLyoqCiAgICogQ3JlYXRlcyBhIHByb2dyYW0sIGF0dGFjaGVzIChhbmQvb3IgY29tcGlsZXMpIHNoYWRlcnMsIGJpbmRzIGF0dHJpYiBsb2NhdGlvbnMsIGxpbmtzIHRoZQogICAqIHByb2dyYW0uCiAgICoKICAgKiBOT1RFOiBUaGVyZSBhcmUgNCBzaWduYXR1cmVzIGZvciB0aGlzIGZ1bmN0aW9uCiAgICoKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtKGdsLCBbdnMsIGZzXSwgb3B0aW9ucyk7CiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbShnbCwgW3ZzLCBmc10sIG9wdF9lcnJGdW5jKTsKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtKGdsLCBbdnMsIGZzXSwgb3B0X2F0dHJpYnMsIG9wdF9lcnJGdW5jKTsKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtKGdsLCBbdnMsIGZzXSwgb3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJGdW5jKTsKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0IHRvIHVzZS4KICAgKiBAcGFyYW0ge1dlYkdMU2hhZGVyW118c3RyaW5nW119IHNoYWRlcnMgVGhlIHNoYWRlcnMgdG8gYXR0YWNoLCBvciBlbGVtZW50IGlkcyBmb3IgdGhlaXIgc291cmNlLCBvciBzdHJpbmdzIHRoYXQgY29udGFpbiB0aGVpciBzb3VyY2UKICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLlByb2dyYW1PcHRpb25zfHN0cmluZ1tdfG1vZHVsZTp0d2dsLkVycm9yQ2FsbGJhY2t9IFtvcHRfYXR0cmlic10gT3B0aW9ucyBmb3IgdGhlIHByb2dyYW0gb3IgYW4gYXJyYXkgb2YgYXR0cmlicyBuYW1lcyBvciBhbiBlcnJvciBjYWxsYmFjay4gTG9jYXRpb25zIHdpbGwgYmUgYXNzaWduZWQgYnkgaW5kZXggaWYgbm90IHBhc3NlZCBpbgogICAqIEBwYXJhbSB7bnVtYmVyW119IFtvcHRfbG9jYXRpb25zfG1vZHVsZTp0d2dsLkVycm9yQ2FsbGJhY2tdIFRoZSBsb2NhdGlvbnMgZm9yIHRoZS4gQSBwYXJhbGxlbCBhcnJheSB0byBvcHRfYXR0cmlicyBsZXR0aW5nIHlvdSBhc3NpZ24gbG9jYXRpb25zIG9yIGFuIGVycm9yIGNhbGxiYWNrLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9lcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzLiBCeSBkZWZhdWx0IGl0IGp1c3QgcHJpbnRzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlCiAgICogICAgICAgIG9uIGVycm9yLiBJZiB5b3Ugd2FudCBzb21ldGhpbmcgZWxzZSBwYXNzIGFuIGNhbGxiYWNrLiBJdCdzIHBhc3NlZCBhbiBlcnJvciBtZXNzYWdlLgogICAqIEByZXR1cm4ge1dlYkdMUHJvZ3JhbT99IHRoZSBjcmVhdGVkIHByb2dyYW0gb3IgbnVsbCBpZiBlcnJvciBvZiBhIGNhbGxiYWNrIHdhcyBwcm92aWRlZC4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXMKICAgKi8KICBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtKAogICAgICBnbCwgc2hhZGVycywgb3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKSB7CiAgICAvLyBUaGlzIGNvZGUgaXMgcmVhbGx5IGNvbnZvbHV0ZWQsIGJlY2F1c2UgaXQgbWF5IG9yIG1heSBub3QgYmUgYXN5bmMKICAgIC8vIE1heWJlIGl0IHdvdWxkIGJlIGJldHRlciB0byBoYXZlIGEgc2VwYXJhdGUgZnVuY3Rpb24KICAgIGNvbnN0IHByb2dPcHRpb25zID0gZ2V0UHJvZ3JhbU9wdGlvbnMob3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKTsKICAgIGNvbnN0IHNoYWRlclNldCA9IG5ldyBTZXQoc2hhZGVycyk7CiAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbU5vQ2hlY2soZ2wsIHNoYWRlcnMsIHByb2dPcHRpb25zKTsKCiAgICBmdW5jdGlvbiBoYXNFcnJvcnMoZ2wsIHByb2dyYW0pIHsKICAgICAgY29uc3QgZXJyb3JzID0gZ2V0UHJvZ3JhbUVycm9ycyhnbCwgcHJvZ3JhbSwgcHJvZ09wdGlvbnMuZXJyb3JDYWxsYmFjayk7CiAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICBkZWxldGVQcm9ncmFtQW5kU2hhZGVycyhnbCwgcHJvZ3JhbSwgc2hhZGVyU2V0KTsKICAgICAgfQogICAgICByZXR1cm4gZXJyb3JzOwogICAgfQoKICAgIGlmIChwcm9nT3B0aW9ucy5jYWxsYmFjaykgewogICAgICB3YWl0Rm9yUHJvZ3JhbUxpbmtDb21wbGV0aW9uQXN5bmMoZ2wsIHByb2dyYW0pLnRoZW4oKCkgPT4gewogICAgICAgIGNvbnN0IGVycm9ycyA9IGhhc0Vycm9ycyhnbCwgcHJvZ3JhbSk7CiAgICAgICAgcHJvZ09wdGlvbnMuY2FsbGJhY2soZXJyb3JzLCBlcnJvcnMgPyB1bmRlZmluZWQgOiBwcm9ncmFtKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIGhhc0Vycm9ycyhnbCwgcHJvZ3JhbSkgPyB1bmRlZmluZWQgOiBwcm9ncmFtOwogIH0KCiAgYXN5bmMgZnVuY3Rpb24gd2FpdEZvclByb2dyYW1MaW5rQ29tcGxldGlvbkFzeW5jKGdsLCBwcm9ncmFtKSB7CiAgICBjb25zdCBleHQgPSBnbC5nZXRFeHRlbnNpb24oJ0tIUl9wYXJhbGxlbF9zaGFkZXJfY29tcGlsZScpOwogICAgY29uc3QgY2hlY2tGbiA9IGV4dAogICAgICAgID8gKGdsLCBwcm9ncmFtKSA9PiBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGV4dC5DT01QTEVUSU9OX1NUQVRVU19LSFIpCiAgICAgICAgOiAoKSA9PiB0cnVlOwoKICAgIGxldCB3YWl0VGltZSA9IDA7CiAgICBkbyB7CiAgICAgIGF3YWl0IHdhaXQkMSh3YWl0VGltZSk7ICAvLyBtdXN0IHdhaXQgYXQgbGVhc3Qgb25jZQogICAgICB3YWl0VGltZSA9IDEwMDAgLyA2MDsKICAgIH0gd2hpbGUgKCFjaGVja0ZuKGdsLCBwcm9ncmFtKSk7CiAgfQoKICAvKioKICAgKiBDaGVjayBhIHByb2dyYW0ncyBsaW5rIHN0YXR1cwogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0IHRvIHVzZS4KICAgKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbX0gcHJvZ3JhbSBQcm9ncmFtIHRvIGNoZWNrCiAgICogQHBhcmFtIHtFcnJvckNhbGxiYWNrfSBbZXJyRm5dIGZ1bmMgZm9yIGVycm9ycwogICAqIEByZXR1cm4ge3N0cmluZz99IGVycm9ycyBpZiBwcm9ncmFtIGlzIGZhaWxlZCwgZWxzZSB1bmRlZmluZWQKICAgKiBAcHJpdmF0ZQogICAqLwogIGZ1bmN0aW9uIGdldFByb2dyYW1FcnJvcnMoZ2wsIHByb2dyYW0sIGVyckZuKSB7CiAgICBlcnJGbiA9IGVyckZuIHx8IGVycm9yOwogICAgLy8gQ2hlY2sgdGhlIGxpbmsgc3RhdHVzCiAgICBjb25zdCBsaW5rZWQgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIExJTktfU1RBVFVTKTsKICAgIGlmICghbGlua2VkKSB7CiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggdGhlIGxpbmsKICAgICAgY29uc3QgbGFzdEVycm9yID0gZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSk7CiAgICAgIGVyckZuKGBFcnJvciBpbiBwcm9ncmFtIGxpbmtpbmc6ICR7bGFzdEVycm9yfWApOwogICAgICAvLyBwcmludCBhbnkgZXJyb3JzIGZyb20gdGhlc2Ugc2hhZGVycwogICAgICBjb25zdCBzaGFkZXJzID0gZ2wuZ2V0QXR0YWNoZWRTaGFkZXJzKHByb2dyYW0pOwogICAgICBjb25zdCBlcnJvcnMgPSBzaGFkZXJzLm1hcChzaGFkZXIgPT4gY2hlY2tTaGFkZXJTdGF0dXMoZ2wsIGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLlNIQURFUl9UWVBFKSwgc2hhZGVyLCBlcnJGbikpOwogICAgICByZXR1cm4gYCR7bGFzdEVycm9yfVxuJHtlcnJvcnMuZmlsdGVyKF8gPT4gXykuam9pbignXG4nKX1gOwogICAgfQogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CgogIC8qKgogICAqIENyZWF0ZXMgYSBwcm9ncmFtIGZyb20gMiBzb3VyY2VzLgogICAqCiAgICogTk9URTogVGhlcmUgYXJlIDQgc2lnbmF0dXJlcyBmb3IgdGhpcyBmdW5jdGlvbgogICAqCiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21Tb3VyY2UoZ2wsIFt2cywgZnNdLCBvcHRfb3B0aW9ucyk7CiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21Tb3VyY2UoZ2wsIFt2cywgZnNdLCBvcHRfZXJyRnVuYyk7CiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21Tb3VyY2UoZ2wsIFt2cywgZnNdLCBvcHRfYXR0cmlicywgb3B0X2VyckZ1bmMpOwogICAqICAgICB0d2dsLmNyZWF0ZVByb2dyYW1Gcm9tU291cmNlKGdsLCBbdnMsIGZzXSwgb3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJGdW5jKTsKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogICAgICAgIHRvIHVzZS4KICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzaGFkZXJTb3VyY2VzIEFycmF5IG9mIHNvdXJjZXMgZm9yIHRoZQogICAqICAgICAgICBzaGFkZXJzLiBUaGUgZmlyc3QgaXMgYXNzdW1lZCB0byBiZSB0aGUgdmVydGV4IHNoYWRlciwKICAgKiAgICAgICAgdGhlIHNlY29uZCB0aGUgZnJhZ21lbnQgc2hhZGVyLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuUHJvZ3JhbU9wdGlvbnN8c3RyaW5nW118bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9hdHRyaWJzXSBPcHRpb25zIGZvciB0aGUgcHJvZ3JhbSBvciBhbiBhcnJheSBvZiBhdHRyaWJzIG5hbWVzIG9yIGFuIGVycm9yIGNhbGxiYWNrLiBMb2NhdGlvbnMgd2lsbCBiZSBhc3NpZ25lZCBieSBpbmRleCBpZiBub3QgcGFzc2VkIGluCiAgICogQHBhcmFtIHtudW1iZXJbXX0gW29wdF9sb2NhdGlvbnN8bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja10gVGhlIGxvY2F0aW9ucyBmb3IgdGhlLiBBIHBhcmFsbGVsIGFycmF5IHRvIG9wdF9hdHRyaWJzIGxldHRpbmcgeW91IGFzc2lnbiBsb2NhdGlvbnMgb3IgYW4gZXJyb3IgY2FsbGJhY2suCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrfSBbb3B0X2Vycm9yQ2FsbGJhY2tdIGNhbGxiYWNrIGZvciBlcnJvcnMuIEJ5IGRlZmF1bHQgaXQganVzdCBwcmludHMgYW4gZXJyb3IgdG8gdGhlIGNvbnNvbGUKICAgKiAgICAgICAgb24gZXJyb3IuIElmIHlvdSB3YW50IHNvbWV0aGluZyBlbHNlIHBhc3MgYW4gY2FsbGJhY2suIEl0J3MgcGFzc2VkIGFuIGVycm9yIG1lc3NhZ2UuCiAgICogQHJldHVybiB7V2ViR0xQcm9ncmFtP30gdGhlIGNyZWF0ZWQgcHJvZ3JhbSBvciBudWxsIGlmIGVycm9yIG9yIGEgY2FsbGJhY2sgd2FzIHByb3ZpZGVkLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZVByb2dyYW1Gcm9tU291cmNlcygKICAgICAgZ2wsIHNoYWRlclNvdXJjZXMsIG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyb3JDYWxsYmFjaykgewogICAgcmV0dXJuIGNyZWF0ZVByb2dyYW0oZ2wsIHNoYWRlclNvdXJjZXMsIG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyb3JDYWxsYmFjayk7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgYXR0cmlidXRlL3VuaWZvcm0gaXMgYSByZXNlcnZlZC9idWlsdCBpbgogICAqCiAgICogSXQgbWFrZXMgbm8gc2Vuc2UgdG8gbWUgd2h5IEdMIHJldHVybnMgdGhlc2UgYmVjYXVzZSBpdCdzCiAgICogaWxsZWdhbCB0byBjYWxsIGBnbC5nZXRVbmlmb3JtTG9jYXRpb25gIGFuZCBgZ2wuZ2V0QXR0cmliTG9jYXRpb25gCiAgICogd2l0aCBuYW1lcyB0aGF0IHN0YXJ0IHdpdGggYGdsX2AgKGFuZCBgd2ViZ2xfYCBpbiBXZWJHTCkKICAgKgogICAqIEkgY2FuIG9ubHkgYXNzdW1lIHRoZXkgYXJlIHRoZXJlIGJlY2F1c2UgdGhleSBtaWdodCBjb3VudAogICAqIHdoZW4gY29tcHV0aW5nIHRoZSBudW1iZXIgb2YgdW5pZm9ybXMvYXR0cmlidXRlcyB1c2VkIHdoZW4geW91IHdhbnQgdG8KICAgKiBrbm93IGlmIHlvdSBhcmUgbmVhciB0aGUgbGltaXQuIFRoYXQgZG9lc24ndCByZWFsbHkgbWFrZSBzZW5zZQogICAqIHRvIG1lIGJ1dCB0aGUgZmFjdCB0aGF0IHRoZXNlIGdldCByZXR1cm5lZCBhcmUgaW4gdGhlIHNwZWMuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMQWN0aXZlSW5mb30gaW5mbyBBcyByZXR1cm5lZCBmcm9tIGBnbC5nZXRBY3RpdmVVbmlmb3JtYCBvcgogICAqICAgIGBnbC5nZXRBY3RpdmVBdHRyaWJgLgogICAqIEByZXR1cm4ge2Jvb2x9IHRydWUgaWYgaXQncyByZXNlcnZlZAogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gaXNCdWlsdEluKGluZm8pIHsKICAgIGNvbnN0IG5hbWUgPSBpbmZvLm5hbWU7CiAgICByZXR1cm4gbmFtZS5zdGFydHNXaXRoKCJnbF8iKSB8fCBuYW1lLnN0YXJ0c1dpdGgoIndlYmdsXyIpOwogIH0KCiAgY29uc3QgdG9rZW5SRSA9IC8oXC58XFt8XXxcdyspL2c7CiAgY29uc3QgaXNEaWdpdCA9IHMgPT4gcyA+PSAnMCcgJiYgcyA8PSAnOSc7CiAgZnVuY3Rpb24gYWRkU2V0dGVyVG9Vbmlmb3JtVHJlZShmdWxsUGF0aCwgc2V0dGVyLCBub2RlLCB1bmlmb3JtU2V0dGVycykgewogICAgY29uc3QgdG9rZW5zID0gZnVsbFBhdGguc3BsaXQodG9rZW5SRSkuZmlsdGVyKHMgPT4gcyAhPT0gJycpOwogICAgbGV0IHRva2VuTmR4ID0gMDsKICAgIGxldCBwYXRoID0gJyc7CgogICAgZm9yICg7OykgewogICAgICBjb25zdCB0b2tlbiA9IHRva2Vuc1t0b2tlbk5keCsrXTsgIC8vIGhhcyB0byBiZSBuYW1lIG9yIG51bWJlcgogICAgICBwYXRoICs9IHRva2VuOwogICAgICBjb25zdCBpc0FycmF5SW5kZXggPSBpc0RpZ2l0KHRva2VuWzBdKTsKICAgICAgY29uc3QgYWNjZXNzb3IgPSBpc0FycmF5SW5kZXgKICAgICAgICAgID8gcGFyc2VJbnQodG9rZW4pCiAgICAgICAgICA6IHRva2VuOwogICAgICBpZiAoaXNBcnJheUluZGV4KSB7CiAgICAgICAgcGF0aCArPSB0b2tlbnNbdG9rZW5OZHgrK107ICAvLyBza2lwICddJwogICAgICB9CiAgICAgIGNvbnN0IGlzTGFzdFRva2VuID0gdG9rZW5OZHggPT09IHRva2Vucy5sZW5ndGg7CiAgICAgIGlmIChpc0xhc3RUb2tlbikgewogICAgICAgIG5vZGVbYWNjZXNzb3JdID0gc2V0dGVyOwogICAgICAgIGJyZWFrOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zW3Rva2VuTmR4KytdOyAgLy8gaGFzIHRvIGJlIC4gb3IgWwogICAgICAgIGNvbnN0IGlzQXJyYXkgPSB0b2tlbiA9PT0gJ1snOwogICAgICAgIGNvbnN0IGNoaWxkID0gbm9kZVthY2Nlc3Nvcl0gfHwgKGlzQXJyYXkgPyBbXSA6IHt9KTsKICAgICAgICBub2RlW2FjY2Vzc29yXSA9IGNoaWxkOwogICAgICAgIG5vZGUgPSBjaGlsZDsKICAgICAgICB1bmlmb3JtU2V0dGVyc1twYXRoXSA9IHVuaWZvcm1TZXR0ZXJzW3BhdGhdIHx8IGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICBzZXRVbmlmb3JtVHJlZShub2RlLCB2YWx1ZSk7CiAgICAgICAgICB9OwogICAgICAgIH0oY2hpbGQpOwogICAgICAgIHBhdGggKz0gdG9rZW47CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIENyZWF0ZXMgc2V0dGVyIGZ1bmN0aW9ucyBmb3IgYWxsIHVuaWZvcm1zIG9mIGEgc2hhZGVyCiAgICogcHJvZ3JhbS4KICAgKgogICAqIEBzZWUge0BsaW5rIG1vZHVsZTp0d2dsLnNldFVuaWZvcm1zfQogICAqCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQgdG8gdXNlLgogICAqIEBwYXJhbSB7V2ViR0xQcm9ncmFtfSBwcm9ncmFtIHRoZSBwcm9ncmFtIHRvIGNyZWF0ZSBzZXR0ZXJzIGZvci4KICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPn0gYW4gb2JqZWN0IHdpdGggYSBzZXR0ZXIgYnkgbmFtZSBmb3IgZWFjaCB1bmlmb3JtCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlVW5pZm9ybVNldHRlcnMoZ2wsIHByb2dyYW0pIHsKICAgIGxldCB0ZXh0dXJlVW5pdCA9IDA7CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgc2V0dGVyIGZvciBhIHVuaWZvcm0gb2YgdGhlIGdpdmVuIHByb2dyYW0gd2l0aCBpdCdzCiAgICAgKiBsb2NhdGlvbiBlbWJlZGRlZCBpbiB0aGUgc2V0dGVyLgogICAgICogQHBhcmFtIHtXZWJHTFByb2dyYW19IHByb2dyYW0KICAgICAqIEBwYXJhbSB7V2ViR0xVbmlmb3JtSW5mb30gdW5pZm9ybUluZm8KICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbn0gdGhlIGNyZWF0ZWQgc2V0dGVyLgogICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVVbmlmb3JtU2V0dGVyKHByb2dyYW0sIHVuaWZvcm1JbmZvLCBsb2NhdGlvbikgewogICAgICBjb25zdCBpc0FycmF5ID0gdW5pZm9ybUluZm8ubmFtZS5lbmRzV2l0aCgiWzBdIik7CiAgICAgIGNvbnN0IHR5cGUgPSB1bmlmb3JtSW5mby50eXBlOwogICAgICBjb25zdCB0eXBlSW5mbyA9IHR5cGVNYXBbdHlwZV07CiAgICAgIGlmICghdHlwZUluZm8pIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gdHlwZTogMHgke3R5cGUudG9TdHJpbmcoMTYpfWApOyAvLyB3ZSBzaG91bGQgbmV2ZXIgZ2V0IGhlcmUuCiAgICAgIH0KICAgICAgbGV0IHNldHRlcjsKICAgICAgaWYgKHR5cGVJbmZvLmJpbmRQb2ludCkgewogICAgICAgIC8vIGl0J3MgYSBzYW1wbGVyCiAgICAgICAgY29uc3QgdW5pdCA9IHRleHR1cmVVbml0OwogICAgICAgIHRleHR1cmVVbml0ICs9IHVuaWZvcm1JbmZvLnNpemU7CiAgICAgICAgaWYgKGlzQXJyYXkpIHsKICAgICAgICAgIHNldHRlciA9IHR5cGVJbmZvLmFycmF5U2V0dGVyKGdsLCB0eXBlLCB1bml0LCBsb2NhdGlvbiwgdW5pZm9ybUluZm8uc2l6ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldHRlciA9IHR5cGVJbmZvLnNldHRlcihnbCwgdHlwZSwgdW5pdCwgbG9jYXRpb24sIHVuaWZvcm1JbmZvLnNpemUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodHlwZUluZm8uYXJyYXlTZXR0ZXIgJiYgaXNBcnJheSkgewogICAgICAgICAgc2V0dGVyID0gdHlwZUluZm8uYXJyYXlTZXR0ZXIoZ2wsIGxvY2F0aW9uKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2V0dGVyID0gdHlwZUluZm8uc2V0dGVyKGdsLCBsb2NhdGlvbik7CiAgICAgICAgfQogICAgICB9CiAgICAgIHNldHRlci5sb2NhdGlvbiA9IGxvY2F0aW9uOwogICAgICByZXR1cm4gc2V0dGVyOwogICAgfQoKICAgIGNvbnN0IHVuaWZvcm1TZXR0ZXJzID0ge307CiAgICBjb25zdCB1bmlmb3JtVHJlZSA9IHt9OwogICAgY29uc3QgbnVtVW5pZm9ybXMgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIEFDVElWRV9VTklGT1JNUyk7CgogICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVVuaWZvcm1zOyArK2lpKSB7CiAgICAgIGNvbnN0IHVuaWZvcm1JbmZvID0gZ2wuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLCBpaSk7CiAgICAgIGlmIChpc0J1aWx0SW4odW5pZm9ybUluZm8pKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB1bmlmb3JtSW5mby5uYW1lOwogICAgICAvLyByZW1vdmUgdGhlIGFycmF5IHN1ZmZpeC4KICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoIlswXSIpKSB7CiAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gMyk7CiAgICAgIH0KICAgICAgY29uc3QgbG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybUluZm8ubmFtZSk7CiAgICAgIC8vIHRoZSB1bmlmb3JtIHdpbGwgaGF2ZSBubyBsb2NhdGlvbiBpZiBpdCdzIGluIGEgdW5pZm9ybSBibG9jawogICAgICBpZiAobG9jYXRpb24pIHsKICAgICAgICBjb25zdCBzZXR0ZXIgPSBjcmVhdGVVbmlmb3JtU2V0dGVyKHByb2dyYW0sIHVuaWZvcm1JbmZvLCBsb2NhdGlvbik7CiAgICAgICAgdW5pZm9ybVNldHRlcnNbbmFtZV0gPSBzZXR0ZXI7CiAgICAgICAgYWRkU2V0dGVyVG9Vbmlmb3JtVHJlZShuYW1lLCBzZXR0ZXIsIHVuaWZvcm1UcmVlLCB1bmlmb3JtU2V0dGVycyk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdW5pZm9ybVNldHRlcnM7CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBUcmFuc2Zvcm1GZWVkYmFja0luZm8KICAgKiBAcHJvcGVydHkge251bWJlcn0gaW5kZXggaW5kZXggb2YgdHJhbnNmb3JtIGZlZWRiYWNrCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHR5cGUgR0wgdHlwZQogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzaXplIDEgLSA0CiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIENyZWF0ZSBUcmFuc2Zvcm1GZWVkYmFja0luZm8gZm9yIHBhc3NpbmcgdG8gYmluZFRyYW5zZm9ybUZlZWRiYWNrSW5mby4KICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCB0byB1c2UuCiAgICogQHBhcmFtIHtXZWJHTFByb2dyYW19IHByb2dyYW0gYW4gZXhpc3RpbmcgV2ViR0xQcm9ncmFtLgogICAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsIG1vZHVsZTp0d2dsLlRyYW5zZm9ybUZlZWRiYWNrSW5mbz59CiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlVHJhbnNmb3JtRmVlZGJhY2tJbmZvKGdsLCBwcm9ncmFtKSB7CiAgICBjb25zdCBpbmZvID0ge307CiAgICBjb25zdCBudW1WYXJ5aW5ncyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgVFJBTlNGT1JNX0ZFRURCQUNLX1ZBUllJTkdTKTsKICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1WYXJ5aW5nczsgKytpaSkgewogICAgICBjb25zdCB2YXJ5aW5nID0gZ2wuZ2V0VHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5nKHByb2dyYW0sIGlpKTsKICAgICAgaW5mb1t2YXJ5aW5nLm5hbWVdID0gewogICAgICAgIGluZGV4OiBpaSwKICAgICAgICB0eXBlOiB2YXJ5aW5nLnR5cGUsCiAgICAgICAgc2l6ZTogdmFyeWluZy5zaXplLAogICAgICB9OwogICAgfQogICAgcmV0dXJuIGluZm87CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBVbmlmb3JtRGF0YQogICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSB1bmlmb3JtCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHR5cGUgVGhlIFdlYkdMIHR5cGUgZW51bSBmb3IgdGhpcyB1bmlmb3JtCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHNpemUgVGhlIG51bWJlciBvZiBlbGVtZW50cyBmb3IgdGhpcyB1bmlmb3JtCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGJsb2NrTmR4IFRoZSBibG9jayBpbmRleCB0aGlzIHVuaWZvcm0gYXBwZWFycyBpbgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBvZmZzZXQgVGhlIGJ5dGUgb2Zmc2V0IGluIHRoZSBibG9jayBmb3IgdGhpcyB1bmlmb3JtJ3MgdmFsdWUKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogVGhlIHNwZWNpZmljYXRpb24gZm9yIG9uZSBVbmlmb3JtQmxvY2tPYmplY3QKICAgKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IEJsb2NrU3BlYwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGJsb2NrLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzaXplIFRoZSBzaXplIGluIGJ5dGVzIG5lZWRlZCBmb3IgdGhlIGJsb2NrCiAgICogQHByb3BlcnR5IHtudW1iZXJbXX0gdW5pZm9ybUluZGljZXMgVGhlIGluZGljZXMgb2YgdGhlIHVuaWZvcm1zIHVzZWQgYnkgdGhlIGJsb2NrLiBUaGVzZSBpbmRpY2VzCiAgICogICAgY29ycmVzcG9uZCB0byBlbnRyaWVzIGluIGEgVW5pZm9ybURhdGEgYXJyYXkgaW4gdGhlIHtAbGluayBtb2R1bGU6dHdnbC5Vbmlmb3JtQmxvY2tTcGVjfS4KICAgKiBAcHJvcGVydHkge2Jvb2x9IHVzZWRCeVZlcnRleFNoYWRlciBTZWxmIGV4cGxhbmF0b3J5CiAgICogQHByb3BlcnR5IHtib29sfSB1c2VkQnlGcmFnbWVudFNoYWRlciBTZWxmIGV4cGxhbmF0b3J5CiAgICogQHByb3BlcnR5IHtib29sfSB1c2VkIFNlbGYgZXhwbGFuYXRvcnkKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogQSBgVW5pZm9ybUJsb2NrU3BlY2AgcmVwcmVzZW50cyB0aGUgZGF0YSBuZWVkZWQgdG8gY3JlYXRlIGFuZCBiaW5kCiAgICogVW5pZm9ybUJsb2NrT2JqZWN0cyBmb3IgYSBnaXZlbiBwcm9ncmFtCiAgICoKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBVbmlmb3JtQmxvY2tTcGVjCiAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuQmxvY2tTcGVjPn0gYmxvY2tTcGVjcyBUaGUgQmxvY2tTcGVjIGZvciBlYWNoIGJsb2NrIGJ5IGJsb2NrIG5hbWUKICAgKiBAcHJvcGVydHkge1VuaWZvcm1EYXRhW119IHVuaWZvcm1EYXRhIEFuIGFycmF5IG9mIGRhdGEgZm9yIGVhY2ggdW5pZm9ybSBieSB1bmlmb3JtIGluZGV4LgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBDcmVhdGVzIGEgVW5pZm9ybUJsb2NrU3BlYyBmb3IgdGhlIGdpdmVuIHByb2dyYW0uCiAgICoKICAgKiBBIFVuaWZvcm1CbG9ja1NwZWMgcmVwcmVzZW50cyB0aGUgZGF0YSBuZWVkZWQgdG8gY3JlYXRlIGFuZCBiaW5kCiAgICogVW5pZm9ybUJsb2NrT2JqZWN0cwogICAqCiAgICogQHBhcmFtIHtXZWJHTDJSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMMiBSZW5kZXJpbmcgQ29udGV4dAogICAqIEBwYXJhbSB7V2ViR0xQcm9ncmFtfSBwcm9ncmFtIEEgV2ViR0xQcm9ncmFtIGZvciBhIHN1Y2Nlc3NmdWxseSBsaW5rZWQgcHJvZ3JhbQogICAqIEByZXR1cm4ge21vZHVsZTp0d2dsLlVuaWZvcm1CbG9ja1NwZWN9IFRoZSBjcmVhdGVkIFVuaWZvcm1CbG9ja1NwZWMKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXMKICAgKi8KICBmdW5jdGlvbiBjcmVhdGVVbmlmb3JtQmxvY2tTcGVjRnJvbVByb2dyYW0oZ2wsIHByb2dyYW0pIHsKICAgIGNvbnN0IG51bVVuaWZvcm1zID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBBQ1RJVkVfVU5JRk9STVMpOwogICAgY29uc3QgdW5pZm9ybURhdGEgPSBbXTsKICAgIGNvbnN0IHVuaWZvcm1JbmRpY2VzID0gW107CgogICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVVuaWZvcm1zOyArK2lpKSB7CiAgICAgIHVuaWZvcm1JbmRpY2VzLnB1c2goaWkpOwogICAgICB1bmlmb3JtRGF0YS5wdXNoKHt9KTsKICAgICAgY29uc3QgdW5pZm9ybUluZm8gPSBnbC5nZXRBY3RpdmVVbmlmb3JtKHByb2dyYW0sIGlpKTsKICAgICAgdW5pZm9ybURhdGFbaWldLm5hbWUgPSB1bmlmb3JtSW5mby5uYW1lOwogICAgfQoKICAgIFsKICAgICAgWyAiVU5JRk9STV9UWVBFIiwgInR5cGUiIF0sCiAgICAgIFsgIlVOSUZPUk1fU0laRSIsICJzaXplIiBdLCAgLy8gbnVtIGVsZW1lbnRzCiAgICAgIFsgIlVOSUZPUk1fQkxPQ0tfSU5ERVgiLCAiYmxvY2tOZHgiIF0sCiAgICAgIFsgIlVOSUZPUk1fT0ZGU0VUIiwgIm9mZnNldCIsIF0sCiAgICBdLmZvckVhY2goZnVuY3Rpb24ocGFpcikgewogICAgICBjb25zdCBwbmFtZSA9IHBhaXJbMF07CiAgICAgIGNvbnN0IGtleSA9IHBhaXJbMV07CiAgICAgIGdsLmdldEFjdGl2ZVVuaWZvcm1zKHByb2dyYW0sIHVuaWZvcm1JbmRpY2VzLCBnbFtwbmFtZV0pLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5keCkgewogICAgICAgIHVuaWZvcm1EYXRhW25keF1ba2V5XSA9IHZhbHVlOwogICAgICB9KTsKICAgIH0pOwoKICAgIGNvbnN0IGJsb2NrU3BlY3MgPSB7fTsKCiAgICBjb25zdCBudW1Vbmlmb3JtQmxvY2tzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBBQ1RJVkVfVU5JRk9STV9CTE9DS1MpOwogICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVVuaWZvcm1CbG9ja3M7ICsraWkpIHsKICAgICAgY29uc3QgbmFtZSA9IGdsLmdldEFjdGl2ZVVuaWZvcm1CbG9ja05hbWUocHJvZ3JhbSwgaWkpOwogICAgICBjb25zdCBibG9ja1NwZWMgPSB7CiAgICAgICAgaW5kZXg6IGdsLmdldFVuaWZvcm1CbG9ja0luZGV4KHByb2dyYW0sIG5hbWUpLAogICAgICAgIHVzZWRCeVZlcnRleFNoYWRlcjogZ2wuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKHByb2dyYW0sIGlpLCBVTklGT1JNX0JMT0NLX1JFRkVSRU5DRURfQllfVkVSVEVYX1NIQURFUiksCiAgICAgICAgdXNlZEJ5RnJhZ21lbnRTaGFkZXI6IGdsLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihwcm9ncmFtLCBpaSwgVU5JRk9STV9CTE9DS19SRUZFUkVOQ0VEX0JZX0ZSQUdNRU5UX1NIQURFUiksCiAgICAgICAgc2l6ZTogZ2wuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKHByb2dyYW0sIGlpLCBVTklGT1JNX0JMT0NLX0RBVEFfU0laRSksCiAgICAgICAgdW5pZm9ybUluZGljZXM6IGdsLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihwcm9ncmFtLCBpaSwgVU5JRk9STV9CTE9DS19BQ1RJVkVfVU5JRk9STV9JTkRJQ0VTKSwKICAgICAgfTsKICAgICAgYmxvY2tTcGVjLnVzZWQgPSBibG9ja1NwZWMudXNlZEJ5VmVydGV4U2hhZGVyIHx8IGJsb2NrU3BlYy51c2VkQnlGcmFnbWVudFNoYWRlcjsKICAgICAgYmxvY2tTcGVjc1tuYW1lXSA9IGJsb2NrU3BlYzsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBibG9ja1NwZWNzOiBibG9ja1NwZWNzLAogICAgICB1bmlmb3JtRGF0YTogdW5pZm9ybURhdGEsCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gc2V0VW5pZm9ybVRyZWUodHJlZSwgdmFsdWVzKSB7CiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdmFsdWVzKSB7CiAgICAgIGNvbnN0IHByb3AgPSB0cmVlW25hbWVdOwogICAgICBpZiAodHlwZW9mIHByb3AgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBwcm9wKHZhbHVlc1tuYW1lXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VW5pZm9ybVRyZWUodHJlZVtuYW1lXSwgdmFsdWVzW25hbWVdKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogU2V0IHVuaWZvcm1zIGFuZCBiaW5kcyByZWxhdGVkIHRleHR1cmVzLgogICAqCiAgICogZXhhbXBsZToKICAgKgogICAqICAgICBjb25zdCBwcm9ncmFtSW5mbyA9IGNyZWF0ZVByb2dyYW1JbmZvKAogICAqICAgICAgICAgZ2wsIFsic29tZS12cyIsICJzb21lLWZzIl0pOwogICAqCiAgICogICAgIGNvbnN0IHRleDEgPSBnbC5jcmVhdGVUZXh0dXJlKCk7CiAgICogICAgIGNvbnN0IHRleDIgPSBnbC5jcmVhdGVUZXh0dXJlKCk7CiAgICoKICAgKiAgICAgLi4uIGFzc3VtZSB3ZSBzZXR1cCB0aGUgdGV4dHVyZXMgd2l0aCBkYXRhIC4uLgogICAqCiAgICogICAgIGNvbnN0IHVuaWZvcm1zID0gewogICAqICAgICAgIHVfc29tZVNhbXBsZXI6IHRleDEsCiAgICogICAgICAgdV9zb21lT3RoZXJTYW1wbGVyOiB0ZXgyLAogICAqICAgICAgIHVfc29tZUNvbG9yOiBbMSwwLDAsMV0sCiAgICogICAgICAgdV9zb21lUG9zaXRpb246IFswLDEsMV0sCiAgICogICAgICAgdV9zb21lTWF0cml4OiBbCiAgICogICAgICAgICAxLDAsMCwwLAogICAqICAgICAgICAgMCwxLDAsMCwKICAgKiAgICAgICAgIDAsMCwxLDAsCiAgICogICAgICAgICAwLDAsMCwwLAogICAqICAgICAgIF0sCiAgICogICAgIH07CiAgICoKICAgKiAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtSW5mby5wcm9ncmFtKTsKICAgKgogICAqIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJpbmQgdGhlIHRleHR1cmVzIEFORCBzZXQgdGhlCiAgICogdW5pZm9ybXMuCiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgdW5pZm9ybXMpOwogICAqCiAgICogRm9yIHRoZSBleGFtcGxlIGFib3ZlIGl0IGlzIGVxdWl2YWxlbnQgdG8KICAgKgogICAqICAgICBsZXQgdGV4VW5pdCA9IDA7CiAgICogICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyB0ZXhVbml0KTsKICAgKiAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4MSk7CiAgICogICAgIGdsLnVuaWZvcm0xaSh1X3NvbWVTYW1wbGVyTG9jYXRpb24sIHRleFVuaXQrKyk7CiAgICogICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyB0ZXhVbml0KTsKICAgKiAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4Mik7CiAgICogICAgIGdsLnVuaWZvcm0xaSh1X3NvbWVTYW1wbGVyTG9jYXRpb24sIHRleFVuaXQrKyk7CiAgICogICAgIGdsLnVuaWZvcm00ZnYodV9zb21lQ29sb3JMb2NhdGlvbiwgWzEsIDAsIDAsIDFdKTsKICAgKiAgICAgZ2wudW5pZm9ybTNmdih1X3NvbWVQb3NpdGlvbkxvY2F0aW9uLCBbMCwgMSwgMV0pOwogICAqICAgICBnbC51bmlmb3JtTWF0cml4NGZ2KHVfc29tZU1hdHJpeCwgZmFsc2UsIFsKICAgKiAgICAgICAgIDEsMCwwLDAsCiAgICogICAgICAgICAwLDEsMCwwLAogICAqICAgICAgICAgMCwwLDEsMCwKICAgKiAgICAgICAgIDAsMCwwLDAsCiAgICogICAgICAgXSk7CiAgICoKICAgKiBOb3RlIGl0IGlzIHBlcmZlY3RseSByZWFzb25hYmxlIHRvIGNhbGwgYHNldFVuaWZvcm1zYCBtdWx0aXBsZSB0aW1lcy4gRm9yIGV4YW1wbGUKICAgKgogICAqICAgICBjb25zdCB1bmlmb3JtcyA9IHsKICAgKiAgICAgICB1X3NvbWVTYW1wbGVyOiB0ZXgxLAogICAqICAgICAgIHVfc29tZU90aGVyU2FtcGxlcjogdGV4MiwKICAgKiAgICAgfTsKICAgKgogICAqICAgICBjb25zdCBtb3JlVW5pZm9ybXMgewogICAqICAgICAgIHVfc29tZUNvbG9yOiBbMSwwLDAsMV0sCiAgICogICAgICAgdV9zb21lUG9zaXRpb246IFswLDEsMV0sCiAgICogICAgICAgdV9zb21lTWF0cml4OiBbCiAgICogICAgICAgICAxLDAsMCwwLAogICAqICAgICAgICAgMCwxLDAsMCwKICAgKiAgICAgICAgIDAsMCwxLDAsCiAgICogICAgICAgICAwLDAsMCwwLAogICAqICAgICAgIF0sCiAgICogICAgIH07CiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgdW5pZm9ybXMpOwogICAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCBtb3JlVW5pZm9ybXMpOwogICAqCiAgICogWW91IGNhbiBhbHNvIGFkZCBXZWJHTFNhbXBsZXJzIHRvIHVuaWZvcm0gc2FtcGxlcnMgYXMgaW4KICAgKgogICAqICAgICBjb25zdCB1bmlmb3JtcyA9IHsKICAgKiAgICAgICB1X3NvbWVTYW1wbGVyOiB7CiAgICogICAgICAgICB0ZXh0dXJlOiBzb21lV2ViR0xUZXh0dXJlLAogICAqICAgICAgICAgc2FtcGxlcjogc29tZVdlYkdMU2FtcGxlciwKICAgKiAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogSW4gd2hpY2ggY2FzZSBib3RoIHRoZSBzYW1wbGVyIGFuZCB0ZXh0dXJlIHdpbGwgYmUgYm91bmQgdG8gdGhlCiAgICogc2FtZSB1bml0LgogICAqCiAgICogQHBhcmFtIHsobW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm98T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPil9IHNldHRlcnMgYSBgUHJvZ3JhbUluZm9gIGFzIHJldHVybmVkIGZyb20gYGNyZWF0ZVByb2dyYW1JbmZvYCBvciB0aGUgc2V0dGVycyByZXR1cm5lZCBmcm9tCiAgICogICAgICAgIGBjcmVhdGVVbmlmb3JtU2V0dGVyc2AuCiAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgPz59IHZhbHVlcyBhbiBvYmplY3Qgd2l0aCB2YWx1ZXMgZm9yIHRoZQogICAqICAgICAgICB1bmlmb3Jtcy4KICAgKiAgIFlvdSBjYW4gcGFzcyBtdWx0aXBsZSBvYmplY3RzIGJ5IHB1dHRpbmcgdGhlbSBpbiBhbiBhcnJheSBvciBieSBjYWxsaW5nIHdpdGggbW9yZSBhcmd1bWVudHMuRm9yIGV4YW1wbGUKICAgKgogICAqICAgICBjb25zdCBzaGFyZWRVbmlmb3JtcyA9IHsKICAgKiAgICAgICB1X2ZvZ05lYXI6IDEwLAogICAqICAgICAgIHVfcHJvamVjdGlvbjogLi4uCiAgICogICAgICAgLi4uCiAgICogICAgIH07CiAgICoKICAgKiAgICAgY29uc3QgbG9jYWxVbmlmb3JtcyA9IHsKICAgKiAgICAgICB1X3dvcmxkOiAuLi4KICAgKiAgICAgICB1X2RpZmZ1c2VDb2xvcjogLi4uCiAgICogICAgIH07CiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgc2hhcmVkVW5pZm9ybXMsIGxvY2FsVW5pZm9ybXMpOwogICAqCiAgICogICAgIC8vIGlzIHRoZSBzYW1lIGFzCiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgW3NoYXJlZFVuaWZvcm1zLCBsb2NhbFVuaWZvcm1zXSk7CiAgICoKICAgKiAgICAgLy8gaXMgdGhlIHNhbWUgYXMKICAgKgogICAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCBzaGFyZWRVbmlmb3Jtcyk7CiAgICogICAgIHR3Z2wuc2V0VW5pZm9ybXMocHJvZ3JhbUluZm8sIGxvY2FsVW5pZm9ybXN9OwogICAqCiAgICogICBZb3UgY2FuIGFsc28gZmlsbCBvdXQgc3RydWN0dXJlIGFuZCBhcnJheSB2YWx1ZXMgZWl0aGVyIHZpYQogICAqICAgc2hvcnRjdXQuIEV4YW1wbGUKICAgKgogICAqICAgICAvLyAtLSBpbiBzaGFkZXIgLS0KICAgKiAgICAgc3RydWN0IExpZ2h0IHsKICAgKiAgICAgICBmbG9hdCBpbnRlbnNpdHk7CiAgICogICAgICAgdmVjNCBjb2xvcjsKICAgKiAgICAgICBmbG9hdCBuZWFyRmFyWzJdOwogICAqICAgICB9OwogICAqICAgICB1bmlmb3JtIExpZ2h0IGxpZ2h0c1syXTsKICAgKgogICAqICAgICAvLyBpbiBKYXZhU2NyaXB0CiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgewogICAqICAgICAgIGxpZ2h0czogWwogICAqICAgICAgICAgeyBpbnRlbnNpdHk6IDUuMCwgY29sb3I6IFsxLCAwLCAwLCAxXSwgbmVhckZhclswLjEsIDEwXSB9LAogICAqICAgICAgICAgeyBpbnRlbnNpdHk6IDIuMCwgY29sb3I6IFswLCAwLCAxLCAxXSwgbmVhckZhclswLjIsIDE1XSB9LAogICAqICAgICAgIF0sCiAgICogICAgIH0pOwogICAqCiAgICogICBvciB0aGUgbW9yZSB0cmFkaXRpb25hbCB3YXkKICAgKgogICAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCB7CiAgICogICAgICAgImxpZ2h0c1swXS5pbnRlbnNpdHkiOiA1LjAsCiAgICogICAgICAgImxpZ2h0c1swXS5jb2xvciI6IFsxLCAwLCAwLCAxXSwKICAgKiAgICAgICAibGlnaHRzWzBdLm5lYXJGYXIiOiBbMC4xLCAxMF0sCiAgICogICAgICAgImxpZ2h0c1sxXS5pbnRlbnNpdHkiOiAyLjAsCiAgICogICAgICAgImxpZ2h0c1sxXS5jb2xvciI6IFswLCAwLCAxLCAxXSwKICAgKiAgICAgICAibGlnaHRzWzFdLm5lYXJGYXIiOiBbMC4yLCAxNV0sCiAgICogICAgIH0pOwogICAqCiAgICogICBZb3UgY2FuIGFsc28gc3BlY2lmeSBwYXJ0aWFsIHBhdGhzCiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgewogICAqICAgICAgICdsaWdodHNbMV0nOiB7IGludGVuc2l0eTogNS4wLCBjb2xvcjogWzEsIDAsIDAsIDFdLCBuZWFyRmFyWzAuMiwgMTVdIH0sCiAgICogICAgIH0pOwogICAqCiAgICogICBCdXQgeW91IGNhbiBub3Qgc3BlY2lmeSBsZWFmIGFycmF5IGluZGljZXMKICAgKgogICAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCB7CiAgICogICAgICAgJ2xpZ2h0c1sxXS5uZWFyRmFyWzFdJzogMTUsICAgICAvLyBCQUQhIG5lYXJGYXIgaXMgYSBsZWFmCiAgICogICAgICAgJ2xpZ2h0c1sxXS5uZWFyRmFyJzogWzAuMiwgMTVdLCAvLyBHT09ECiAgICogICAgIH0pOwogICAqCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zCiAgICovCiAgZnVuY3Rpb24gc2V0VW5pZm9ybXMoc2V0dGVycywgLi4uYXJncykgeyAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgY29uc3QgYWN0dWFsU2V0dGVycyA9IHNldHRlcnMudW5pZm9ybVNldHRlcnMgfHwgc2V0dGVyczsKICAgIGNvbnN0IG51bUFyZ3MgPSBhcmdzLmxlbmd0aDsKICAgIGZvciAobGV0IGFOZHggPSAwOyBhTmR4IDwgbnVtQXJnczsgKythTmR4KSB7CiAgICAgIGNvbnN0IHZhbHVlcyA9IGFyZ3NbYU5keF07CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykpIHsKICAgICAgICBjb25zdCBudW1WYWx1ZXMgPSB2YWx1ZXMubGVuZ3RoOwogICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1WYWx1ZXM7ICsraWkpIHsKICAgICAgICAgIHNldFVuaWZvcm1zKGFjdHVhbFNldHRlcnMsIHZhbHVlc1tpaV0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdmFsdWVzKSB7CiAgICAgICAgICBjb25zdCBzZXR0ZXIgPSBhY3R1YWxTZXR0ZXJzW25hbWVdOwogICAgICAgICAgaWYgKHNldHRlcikgewogICAgICAgICAgICBzZXR0ZXIodmFsdWVzW25hbWVdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIENyZWF0ZXMgc2V0dGVyIGZ1bmN0aW9ucyBmb3IgYWxsIGF0dHJpYnV0ZXMgb2YgYSBzaGFkZXIKICAgKiBwcm9ncmFtLiBZb3UgY2FuIHBhc3MgdGhpcyB0byB7QGxpbmsgbW9kdWxlOnR3Z2wuc2V0QnVmZmVyc0FuZEF0dHJpYnV0ZXN9IHRvIHNldCBhbGwgeW91ciBidWZmZXJzIGFuZCBhdHRyaWJ1dGVzLgogICAqCiAgICogQHNlZSB7QGxpbmsgbW9kdWxlOnR3Z2wuc2V0QXR0cmlidXRlc30gZm9yIGV4YW1wbGUKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCB0byB1c2UuCiAgICogQHBhcmFtIHtXZWJHTFByb2dyYW19IHByb2dyYW0gdGhlIHByb2dyYW0gdG8gY3JlYXRlIHNldHRlcnMgZm9yLgogICAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj59IGFuIG9iamVjdCB3aXRoIGEgc2V0dGVyIGZvciBlYWNoIGF0dHJpYnV0ZSBieSBuYW1lLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZVNldHRlcnMoZ2wsIHByb2dyYW0pIHsKICAgIGNvbnN0IGF0dHJpYlNldHRlcnMgPSB7CiAgICB9OwoKICAgIGNvbnN0IG51bUF0dHJpYnMgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIEFDVElWRV9BVFRSSUJVVEVTKTsKICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1BdHRyaWJzOyArK2lpKSB7CiAgICAgIGNvbnN0IGF0dHJpYkluZm8gPSBnbC5nZXRBY3RpdmVBdHRyaWIocHJvZ3JhbSwgaWkpOwogICAgICBpZiAoaXNCdWlsdEluKGF0dHJpYkluZm8pKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgY29uc3QgaW5kZXggPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBhdHRyaWJJbmZvLm5hbWUpOwogICAgICBjb25zdCB0eXBlSW5mbyA9IGF0dHJUeXBlTWFwW2F0dHJpYkluZm8udHlwZV07CiAgICAgIGNvbnN0IHNldHRlciA9IHR5cGVJbmZvLnNldHRlcihnbCwgaW5kZXgsIHR5cGVJbmZvKTsKICAgICAgc2V0dGVyLmxvY2F0aW9uID0gaW5kZXg7CiAgICAgIGF0dHJpYlNldHRlcnNbYXR0cmliSW5mby5uYW1lXSA9IHNldHRlcjsKICAgIH0KCiAgICByZXR1cm4gYXR0cmliU2V0dGVyczsKICB9CgogIC8qKgogICAqIFNldHMgYXR0cmlidXRlcyBhbmQgYmluZHMgYnVmZmVycyAoZGVwcmVjYXRlZC4uLiB1c2Uge0BsaW5rIG1vZHVsZTp0d2dsLnNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzfSkKICAgKgogICAqIEV4YW1wbGU6CiAgICoKICAgKiAgICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0cygKICAgKiAgICAgICAgIGdsLCBbInNvbWUtdnMiLCAic29tZS1mcyIpOwogICAqCiAgICogICAgIGNvbnN0IGF0dHJpYlNldHRlcnMgPSBjcmVhdGVBdHRyaWJ1dGVTZXR0ZXJzKHByb2dyYW0pOwogICAqCiAgICogICAgIGNvbnN0IHBvc2l0aW9uQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7CiAgICogICAgIGNvbnN0IHRleGNvb3JkQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7CiAgICoKICAgKiAgICAgY29uc3QgYXR0cmlicyA9IHsKICAgKiAgICAgICBhX3Bvc2l0aW9uOiB7YnVmZmVyOiBwb3NpdGlvbkJ1ZmZlciwgbnVtQ29tcG9uZW50czogM30sCiAgICogICAgICAgYV90ZXhjb29yZDoge2J1ZmZlcjogdGV4Y29vcmRCdWZmZXIsIG51bUNvbXBvbmVudHM6IDJ9LAogICAqICAgICB9OwogICAqCiAgICogICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7CiAgICoKICAgKiBUaGlzIHdpbGwgYXV0b21hdGljYWxseSBiaW5kIHRoZSBidWZmZXJzIEFORCBzZXQgdGhlCiAgICogYXR0cmlidXRlcy4KICAgKgogICAqICAgICBzZXRBdHRyaWJ1dGVzKGF0dHJpYlNldHRlcnMsIGF0dHJpYnMpOwogICAqCiAgICogUHJvcGVydGllcyBvZiBhdHRyaWJzLiBGb3IgZWFjaCBhdHRyaWIgeW91IGNhbiBhZGQKICAgKiBwcm9wZXJ0aWVzOgogICAqCiAgICogKiAgIHR5cGU6IHRoZSB0eXBlIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlci4gRGVmYXVsdCA9IGdsLkZMT0FUCiAgICogKiAgIG5vcm1hbGl6ZTogd2hldGhlciBvciBub3QgdG8gbm9ybWFsaXplIHRoZSBkYXRhLiBEZWZhdWx0ID0gZmFsc2UKICAgKiAqICAgc3RyaWRlOiB0aGUgc3RyaWRlLiBEZWZhdWx0ID0gMAogICAqICogICBvZmZzZXQ6IG9mZnNldCBpbnRvIHRoZSBidWZmZXIuIERlZmF1bHQgPSAwCiAgICogKiAgIGRpdmlzb3I6IHRoZSBkaXZpc29yIGZvciBpbnN0YW5jZXMuIERlZmF1bHQgPSB1bmRlZmluZWQKICAgKgogICAqIEZvciBleGFtcGxlIGlmIHlvdSBoYWQgMyB2YWx1ZSBmbG9hdCBwb3NpdGlvbnMsIDIgdmFsdWUKICAgKiBmbG9hdCB0ZXhjb29yZCBhbmQgNCB2YWx1ZSB1aW50OCBjb2xvcnMgeW91J2Qgc2V0dXAgeW91cgogICAqIGF0dHJpYnMgbGlrZSB0aGlzCiAgICoKICAgKiAgICAgY29uc3QgYXR0cmlicyA9IHsKICAgKiAgICAgICBhX3Bvc2l0aW9uOiB7YnVmZmVyOiBwb3NpdGlvbkJ1ZmZlciwgbnVtQ29tcG9uZW50czogM30sCiAgICogICAgICAgYV90ZXhjb29yZDoge2J1ZmZlcjogdGV4Y29vcmRCdWZmZXIsIG51bUNvbXBvbmVudHM6IDJ9LAogICAqICAgICAgIGFfY29sb3I6IHsKICAgKiAgICAgICAgIGJ1ZmZlcjogY29sb3JCdWZmZXIsCiAgICogICAgICAgICBudW1Db21wb25lbnRzOiA0LAogICAqICAgICAgICAgdHlwZTogZ2wuVU5TSUdORURfQllURSwKICAgKiAgICAgICAgIG5vcm1hbGl6ZTogdHJ1ZSwKICAgKiAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSBzZXR0ZXJzIEF0dHJpYnV0ZSBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlQXR0cmlidXRlU2V0dGVycwogICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+fSBidWZmZXJzIEF0dHJpYkluZm9zIG1hcHBlZCBieSBhdHRyaWJ1dGUgbmFtZS4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXMKICAgKiBAZGVwcmVjYXRlZCB1c2Uge0BsaW5rIG1vZHVsZTp0d2dsLnNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzfQogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhzZXR0ZXJzLCBidWZmZXJzKSB7CiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gYnVmZmVycykgewogICAgICBjb25zdCBzZXR0ZXIgPSBzZXR0ZXJzW25hbWVdOwogICAgICBpZiAoc2V0dGVyKSB7CiAgICAgICAgc2V0dGVyKGJ1ZmZlcnNbbmFtZV0pOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBTZXRzIGF0dHJpYnV0ZXMgYW5kIGJ1ZmZlcnMgaW5jbHVkaW5nIHRoZSBgRUxFTUVOVF9BUlJBWV9CVUZGRVJgIGlmIGFwcHJvcHJpYXRlCiAgICoKICAgKiBFeGFtcGxlOgogICAqCiAgICogICAgIGNvbnN0IHByb2dyYW1JbmZvID0gY3JlYXRlUHJvZ3JhbUluZm8oCiAgICogICAgICAgICBnbCwgWyJzb21lLXZzIiwgInNvbWUtZnMiKTsKICAgKgogICAqICAgICBjb25zdCBhcnJheXMgPSB7CiAgICogICAgICAgcG9zaXRpb246IHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMCwgMCwgMTAsIDEwLCAwXSwgfSwKICAgKiAgICAgICB0ZXhjb29yZDogeyBudW1Db21wb25lbnRzOiAyLCBkYXRhOiBbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0sICAgICAgICAgICAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogICAgIGNvbnN0IGJ1ZmZlckluZm8gPSBjcmVhdGVCdWZmZXJJbmZvRnJvbUFycmF5cyhnbCwgYXJyYXlzKTsKICAgKgogICAqICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW1JbmZvLnByb2dyYW0pOwogICAqCiAgICogVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgYmluZCB0aGUgYnVmZmVycyBBTkQgc2V0IHRoZQogICAqIGF0dHJpYnV0ZXMuCiAgICoKICAgKiAgICAgc2V0QnVmZmVyc0FuZEF0dHJpYnV0ZXMoZ2wsIHByb2dyYW1JbmZvLCBidWZmZXJJbmZvKTsKICAgKgogICAqIEZvciB0aGUgZXhhbXBsZSBhYm92ZSBpdCBpcyBlcXVpdmFsZW50IHRvCiAgICoKICAgKiAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc2l0aW9uQnVmZmVyKTsKICAgKiAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYV9wb3NpdGlvbkxvY2F0aW9uKTsKICAgKiAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihhX3Bvc2l0aW9uTG9jYXRpb24sIDMsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7CiAgICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXhjb29yZEJ1ZmZlcik7CiAgICogICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfdGV4Y29vcmRMb2NhdGlvbik7CiAgICogICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoYV90ZXhjb29yZExvY2F0aW9uLCA0LCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApOwogICAqCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0LgogICAqIEBwYXJhbSB7KG1vZHVsZTp0d2dsLlByb2dyYW1JbmZvfE9iamVjdC48c3RyaW5nLCBmdW5jdGlvbj4pfSBzZXR0ZXJzIEEgYFByb2dyYW1JbmZvYCBhcyByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVQcm9ncmFtSW5mb30gb3IgQXR0cmlidXRlIHNldHRlcnMgYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlQXR0cmlidXRlU2V0dGVyc30KICAgKiBAcGFyYW0geyhtb2R1bGU6dHdnbC5CdWZmZXJJbmZvfG1vZHVsZTp0d2dsLlZlcnRleEFycmF5SW5mbyl9IGJ1ZmZlcnMgYSBgQnVmZmVySW5mb2AgYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXN9LgogICAqICAgb3IgYSBgVmVydGV4QXJyYXlJbmZvYCBhcyByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVWZXJ0ZXhBcnJheUluZm99CiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zCiAgICovCiAgZnVuY3Rpb24gc2V0QnVmZmVyc0FuZEF0dHJpYnV0ZXMoZ2wsIHByb2dyYW1JbmZvLCBidWZmZXJzKSB7CiAgICBpZiAoYnVmZmVycy52ZXJ0ZXhBcnJheU9iamVjdCkgewogICAgICBnbC5iaW5kVmVydGV4QXJyYXkoYnVmZmVycy52ZXJ0ZXhBcnJheU9iamVjdCk7CiAgICB9IGVsc2UgewogICAgICBzZXRBdHRyaWJ1dGVzKHByb2dyYW1JbmZvLmF0dHJpYlNldHRlcnMgfHwgcHJvZ3JhbUluZm8sIGJ1ZmZlcnMuYXR0cmlicyk7CiAgICAgIGlmIChidWZmZXJzLmluZGljZXMpIHsKICAgICAgICBnbC5iaW5kQnVmZmVyKEVMRU1FTlRfQVJSQVlfQlVGRkVSJDEsIGJ1ZmZlcnMuaW5kaWNlcyk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IFByb2dyYW1JbmZvCiAgICogQHByb3BlcnR5IHtXZWJHTFByb2dyYW19IHByb2dyYW0gQSBzaGFkZXIgcHJvZ3JhbQogICAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgZnVuY3Rpb24+fSB1bmlmb3JtU2V0dGVycyBvYmplY3Qgb2Ygc2V0dGVycyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZVVuaWZvcm1TZXR0ZXJzLAogICAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgZnVuY3Rpb24+fSBhdHRyaWJTZXR0ZXJzIG9iamVjdCBvZiBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlQXR0cmliU2V0dGVycywKICAgKiBAcHJvcGVydHkge21vZHVsZTp0d2dsLlVuaWZvcm1CbG9ja1NwZWN9IFt1bmlmb3JtQmxvY2tTcGVjXSBhIHVuaWZvcm0gYmxvY2sgc3BlYyBmb3IgbWFraW5nIFVuaWZvcm1CbG9ja0luZm9zIHdpdGggY3JlYXRlVW5pZm9ybUJsb2NrSW5mbyBldGMuLgogICAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgbW9kdWxlOnR3Z2wuVHJhbnNmb3JtRmVlZGJhY2tJbmZvPn0gW3RyYW5zZm9ybUZlZWRiYWNrSW5mb10gaW5mbyBmb3IgdHJhbnNmb3JtIGZlZWRiYWNrcwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBDcmVhdGVzIGEgUHJvZ3JhbUluZm8gZnJvbSBhbiBleGlzdGluZyBwcm9ncmFtLgogICAqCiAgICogQSBQcm9ncmFtSW5mbyBjb250YWlucwogICAqCiAgICogICAgIHByb2dyYW1JbmZvID0gewogICAqICAgICAgICBwcm9ncmFtOiBXZWJHTFByb2dyYW0sCiAgICogICAgICAgIHVuaWZvcm1TZXR0ZXJzOiBvYmplY3Qgb2Ygc2V0dGVycyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZVVuaWZvcm1TZXR0ZXJzLAogICAqICAgICAgICBhdHRyaWJTZXR0ZXJzOiBvYmplY3Qgb2Ygc2V0dGVycyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZUF0dHJpYlNldHRlcnMsCiAgICogICAgIH0KICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogICAgICAgIHRvIHVzZS4KICAgKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbX0gcHJvZ3JhbSBhbiBleGlzdGluZyBXZWJHTFByb2dyYW0uCiAgICogQHJldHVybiB7bW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm99IFRoZSBjcmVhdGVkIFByb2dyYW1JbmZvLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZVByb2dyYW1JbmZvRnJvbVByb2dyYW0oZ2wsIHByb2dyYW0pIHsKICAgIGNvbnN0IHVuaWZvcm1TZXR0ZXJzID0gY3JlYXRlVW5pZm9ybVNldHRlcnMoZ2wsIHByb2dyYW0pOwogICAgY29uc3QgYXR0cmliU2V0dGVycyA9IGNyZWF0ZUF0dHJpYnV0ZVNldHRlcnMoZ2wsIHByb2dyYW0pOwogICAgY29uc3QgcHJvZ3JhbUluZm8gPSB7CiAgICAgIHByb2dyYW0sCiAgICAgIHVuaWZvcm1TZXR0ZXJzLAogICAgICBhdHRyaWJTZXR0ZXJzLAogICAgfTsKCiAgICBpZiAoaXNXZWJHTDIoZ2wpKSB7CiAgICAgIHByb2dyYW1JbmZvLnVuaWZvcm1CbG9ja1NwZWMgPSBjcmVhdGVVbmlmb3JtQmxvY2tTcGVjRnJvbVByb2dyYW0oZ2wsIHByb2dyYW0pOwogICAgICBwcm9ncmFtSW5mby50cmFuc2Zvcm1GZWVkYmFja0luZm8gPSBjcmVhdGVUcmFuc2Zvcm1GZWVkYmFja0luZm8oZ2wsIHByb2dyYW0pOwogICAgfQoKICAgIHJldHVybiBwcm9ncmFtSW5mbzsKICB9CgogIGNvbnN0IG5vdElkUkUgPSAvXHN8e3x9fDsvOwoKICAvKioKICAgKiBDcmVhdGVzIGEgUHJvZ3JhbUluZm8gZnJvbSAyIHNvdXJjZXMuCiAgICoKICAgKiBBIFByb2dyYW1JbmZvIGNvbnRhaW5zCiAgICoKICAgKiAgICAgcHJvZ3JhbUluZm8gPSB7CiAgICogICAgICAgIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwKICAgKiAgICAgICAgdW5pZm9ybVNldHRlcnM6IG9iamVjdCBvZiBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlVW5pZm9ybVNldHRlcnMsCiAgICogICAgICAgIGF0dHJpYlNldHRlcnM6IG9iamVjdCBvZiBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlQXR0cmliU2V0dGVycywKICAgKiAgICAgfQogICAqCiAgICogTk9URTogVGhlcmUgYXJlIDQgc2lnbmF0dXJlcyBmb3IgdGhpcyBmdW5jdGlvbgogICAqCiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUluZm8oZ2wsIFt2cywgZnNdLCBvcHRpb25zKTsKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtSW5mbyhnbCwgW3ZzLCBmc10sIG9wdF9lcnJGdW5jKTsKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtSW5mbyhnbCwgW3ZzLCBmc10sIG9wdF9hdHRyaWJzLCBvcHRfZXJyRnVuYyk7CiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUluZm8oZ2wsIFt2cywgZnNdLCBvcHRfYXR0cmlicywgb3B0X2xvY2F0aW9ucywgb3B0X2VyckZ1bmMpOwogICAqCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiAgICAgICAgdG8gdXNlLgogICAqIEBwYXJhbSB7c3RyaW5nW119IHNoYWRlclNvdXJjZXMgQXJyYXkgb2Ygc291cmNlcyBmb3IgdGhlCiAgICogICAgICAgIHNoYWRlcnMgb3IgaWRzLiBUaGUgZmlyc3QgaXMgYXNzdW1lZCB0byBiZSB0aGUgdmVydGV4IHNoYWRlciwKICAgKiAgICAgICAgdGhlIHNlY29uZCB0aGUgZnJhZ21lbnQgc2hhZGVyLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuUHJvZ3JhbU9wdGlvbnN8c3RyaW5nW118bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9hdHRyaWJzXSBPcHRpb25zIGZvciB0aGUgcHJvZ3JhbSBvciBhbiBhcnJheSBvZiBhdHRyaWJzIG5hbWVzIG9yIGFuIGVycm9yIGNhbGxiYWNrLiBMb2NhdGlvbnMgd2lsbCBiZSBhc3NpZ25lZCBieSBpbmRleCBpZiBub3QgcGFzc2VkIGluCiAgICogQHBhcmFtIHtudW1iZXJbXX0gW29wdF9sb2NhdGlvbnN8bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja10gVGhlIGxvY2F0aW9ucyBmb3IgdGhlLiBBIHBhcmFsbGVsIGFycmF5IHRvIG9wdF9hdHRyaWJzIGxldHRpbmcgeW91IGFzc2lnbiBsb2NhdGlvbnMgb3IgYW4gZXJyb3IgY2FsbGJhY2suCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrfSBbb3B0X2Vycm9yQ2FsbGJhY2tdIGNhbGxiYWNrIGZvciBlcnJvcnMuIEJ5IGRlZmF1bHQgaXQganVzdCBwcmludHMgYW4gZXJyb3IgdG8gdGhlIGNvbnNvbGUKICAgKiAgICAgICAgb24gZXJyb3IuIElmIHlvdSB3YW50IHNvbWV0aGluZyBlbHNlIHBhc3MgYW4gY2FsbGJhY2suIEl0J3MgcGFzc2VkIGFuIGVycm9yIG1lc3NhZ2UuCiAgICogQHJldHVybiB7bW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm8/fSBUaGUgY3JlYXRlZCBQcm9ncmFtSW5mbyBvciBudWxsIGlmIGl0IGZhaWxlZCB0byBsaW5rIG9yIGNvbXBpbGUKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXMKICAgKi8KICBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtSW5mbygKICAgICAgZ2wsIHNoYWRlclNvdXJjZXMsIG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyb3JDYWxsYmFjaykgewogICAgY29uc3QgcHJvZ09wdGlvbnMgPSBnZXRQcm9ncmFtT3B0aW9ucyhvcHRfYXR0cmlicywgb3B0X2xvY2F0aW9ucywgb3B0X2Vycm9yQ2FsbGJhY2spOwogICAgY29uc3QgZXJyb3JzID0gW107CiAgICBzaGFkZXJTb3VyY2VzID0gc2hhZGVyU291cmNlcy5tYXAoZnVuY3Rpb24oc291cmNlKSB7CiAgICAgIC8vIExldHMgYXNzdW1lIGlmIHRoZXJlIGlzIG5vIFxuIGl0J3MgYW4gaWQKICAgICAgaWYgKCFub3RJZFJFLnRlc3Qoc291cmNlKSkgewogICAgICAgIGNvbnN0IHNjcmlwdCA9IGdldEVsZW1lbnRCeUlkKHNvdXJjZSk7CiAgICAgICAgaWYgKCFzY3JpcHQpIHsKICAgICAgICAgIGNvbnN0IGVyciA9IGBubyBlbGVtZW50IHdpdGggaWQ6ICR7c291cmNlfWA7CiAgICAgICAgICBwcm9nT3B0aW9ucy5lcnJvckNhbGxiYWNrKGVycik7CiAgICAgICAgICBlcnJvcnMucHVzaChlcnIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzb3VyY2UgPSBzY3JpcHQudGV4dDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHNvdXJjZTsKICAgIH0pOwoKICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7CiAgICAgIHJldHVybiByZXBvcnRFcnJvcihwcm9nT3B0aW9ucywgJycpOwogICAgfQoKICAgIGNvbnN0IG9yaWdDYWxsYmFjayA9IHByb2dPcHRpb25zLmNhbGxiYWNrOwogICAgaWYgKG9yaWdDYWxsYmFjaykgewogICAgICBwcm9nT3B0aW9ucy5jYWxsYmFjayA9IChlcnIsIHByb2dyYW0pID0+IHsKICAgICAgICBvcmlnQ2FsbGJhY2soZXJyLCBlcnIgPyB1bmRlZmluZWQgOiBjcmVhdGVQcm9ncmFtSW5mb0Zyb21Qcm9ncmFtKGdsLCBwcm9ncmFtKSk7CiAgICAgIH07CiAgICB9CgogICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW1Gcm9tU291cmNlcyhnbCwgc2hhZGVyU291cmNlcywgcHJvZ09wdGlvbnMpOwogICAgaWYgKCFwcm9ncmFtKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHJldHVybiBjcmVhdGVQcm9ncmFtSW5mb0Zyb21Qcm9ncmFtKGdsLCBwcm9ncmFtKTsKICB9CgogIC8qCiAgICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlcwogICAqCiAgICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAogICAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KICAgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKICAgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKICAgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAqCiAgICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICAgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgKgogICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCiAgICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwogICAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKICAgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAgICovCgogIGNvbnN0IFRSSUFOR0xFUyAgICAgICAgICAgICAgICAgICAgICA9IDB4MDAwNDsKICBjb25zdCBVTlNJR05FRF9TSE9SVCAgICAgICAgICAgICAgICAgPSAweDE0MDM7CgogIC8qKgogICAqIERyYXdpbmcgcmVsYXRlZCBmdW5jdGlvbnMKICAgKgogICAqIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHRoZXkgYXJlIGF2YWlsYWJsZSBhdCBib3RoIGB0d2dsLmRyYXdgIGFuZCBgdHdnbGAKICAgKiBpdHNlbGYKICAgKgogICAqIFNlZSB7QGxpbmsgbW9kdWxlOnR3Z2x9IGZvciBjb3JlIGZ1bmN0aW9ucwogICAqCiAgICogQG1vZHVsZSB0d2dsL2RyYXcKICAgKi8KCiAgLyoqCiAgICogQ2FsbHMgYGdsLmRyYXdFbGVtZW50c2Agb3IgYGdsLmRyYXdBcnJheXNgLCB3aGljaGV2ZXIgaXMgYXBwcm9wcmlhdGUKICAgKgogICAqIG5vcm1hbGx5IHlvdSdkIGNhbGwgYGdsLmRyYXdFbGVtZW50c2Agb3IgYGdsLmRyYXdBcnJheXNgIHlvdXJzZWxmCiAgICogYnV0IGNhbGxpbmcgdGhpcyBtZWFucyBpZiB5b3Ugc3dpdGNoIGZyb20gaW5kZXhlZCBkYXRhIHRvIG5vbi1pbmRleGVkCiAgICogZGF0YSB5b3UgZG9uJ3QgaGF2ZSB0byByZW1lbWJlciB0byB1cGRhdGUgeW91ciBkcmF3IGNhbGwuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0geyhtb2R1bGU6dHdnbC5CdWZmZXJJbmZvfG1vZHVsZTp0d2dsLlZlcnRleEFycmF5SW5mbyl9IGJ1ZmZlckluZm8gQSBCdWZmZXJJbmZvIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzfSBvcgogICAqICAgYSBWZXJ0ZXhBcnJheUluZm8gYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlVmVydGV4QXJyYXlJbmZvfQogICAqIEBwYXJhbSB7bnVtYmVyfSBbdHlwZV0gZWcgKGdsLlRSSUFOR0xFUywgZ2wuTElORVMsIGdsLlBPSU5UUywgZ2wuVFJJQU5HTEVfU1RSSVAsIC4uLikuIERlZmF1bHRzIHRvIGBnbC5UUklBTkdMRVNgCiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb3VudF0gQW4gb3B0aW9uYWwgY291bnQuIERlZmF1bHRzIHRvIGJ1ZmZlckluZm8ubnVtRWxlbWVudHMKICAgKiBAcGFyYW0ge251bWJlcn0gW29mZnNldF0gQW4gb3B0aW9uYWwgb2Zmc2V0LiBEZWZhdWx0cyB0byAwLgogICAqIEBwYXJhbSB7bnVtYmVyfSBbaW5zdGFuY2VDb3VudF0gQW4gb3B0aW9uYWwgaW5zdGFuY2VDb3VudC4gaWYgc2V0IHRoZW4gYGRyYXdBcnJheXNJbnN0YW5jZWRgIG9yIGBkcmF3RWxlbWVudHNJbnN0YW5jZWRgIHdpbGwgYmUgY2FsbGVkCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL2RyYXcKICAgKi8KICBmdW5jdGlvbiBkcmF3QnVmZmVySW5mbyhnbCwgYnVmZmVySW5mbywgdHlwZSwgY291bnQsIG9mZnNldCwgaW5zdGFuY2VDb3VudCkgewogICAgdHlwZSA9IHR5cGUgPT09IHVuZGVmaW5lZCA/IFRSSUFOR0xFUyA6IHR5cGU7CiAgICBjb25zdCBpbmRpY2VzID0gYnVmZmVySW5mby5pbmRpY2VzOwogICAgY29uc3QgZWxlbWVudFR5cGUgPSBidWZmZXJJbmZvLmVsZW1lbnRUeXBlOwogICAgY29uc3QgbnVtRWxlbWVudHMgPSBjb3VudCA9PT0gdW5kZWZpbmVkID8gYnVmZmVySW5mby5udW1FbGVtZW50cyA6IGNvdW50OwogICAgb2Zmc2V0ID0gb2Zmc2V0ID09PSB1bmRlZmluZWQgPyAwIDogb2Zmc2V0OwogICAgaWYgKGVsZW1lbnRUeXBlIHx8IGluZGljZXMpIHsKICAgICAgaWYgKGluc3RhbmNlQ291bnQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGdsLmRyYXdFbGVtZW50c0luc3RhbmNlZCh0eXBlLCBudW1FbGVtZW50cywgZWxlbWVudFR5cGUgPT09IHVuZGVmaW5lZCA/IFVOU0lHTkVEX1NIT1JUIDogYnVmZmVySW5mby5lbGVtZW50VHlwZSwgb2Zmc2V0LCBpbnN0YW5jZUNvdW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBnbC5kcmF3RWxlbWVudHModHlwZSwgbnVtRWxlbWVudHMsIGVsZW1lbnRUeXBlID09PSB1bmRlZmluZWQgPyBVTlNJR05FRF9TSE9SVCA6IGJ1ZmZlckluZm8uZWxlbWVudFR5cGUsIG9mZnNldCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChpbnN0YW5jZUNvdW50ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBnbC5kcmF3QXJyYXlzSW5zdGFuY2VkKHR5cGUsIG9mZnNldCwgbnVtRWxlbWVudHMsIGluc3RhbmNlQ291bnQpOwogICAgICB9IGVsc2UgewogICAgICAgIGdsLmRyYXdBcnJheXModHlwZSwgb2Zmc2V0LCBudW1FbGVtZW50cyk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qCiAgICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlcwogICAqCiAgICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAogICAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KICAgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKICAgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKICAgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAqCiAgICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICAgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgKgogICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCiAgICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwogICAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKICAgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAgICovCgogIGNvbnN0IEZSQU1FQlVGRkVSICAgICAgICAgICAgICAgICAgICA9IDB4OGQ0MDsKICBjb25zdCBSRU5ERVJCVUZGRVIgICAgICAgICAgICAgICAgICAgPSAweDhkNDE7CiAgY29uc3QgVEVYVFVSRV8yRCAgICAgICAgICAgICAgICAgICAgID0gMHgwZGUxOwoKICBjb25zdCBVTlNJR05FRF9CWVRFICAgICAgICAgICAgICAgICAgPSAweDE0MDE7CgogIC8qIFBpeGVsRm9ybWF0ICovCiAgY29uc3QgREVQVEhfQ09NUE9ORU5UICAgICAgICAgICAgICAgID0gMHgxOTAyOwogIGNvbnN0IFJHQkEgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTkwODsKICBjb25zdCBERVBUSF9DT01QT05FTlQyNCAgICAgICAgICAgICAgPSAweDgxYTY7CiAgY29uc3QgREVQVEhfQ09NUE9ORU5UMzJGICAgICAgICAgICAgID0gMHg4Y2FjOwogIGNvbnN0IERFUFRIMjRfU1RFTkNJTDggICAgICAgICAgICAgICA9IDB4ODhmMDsKICBjb25zdCBERVBUSDMyRl9TVEVOQ0lMOCAgICAgICAgICAgICAgPSAweDhjYWQ7CgogIC8qIEZyYW1lYnVmZmVyIE9iamVjdC4gKi8KICBjb25zdCBSR0JBNCAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgwNTY7CiAgY29uc3QgUkdCNV9BMSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MDU3OwogIGNvbnN0IFJHQjU2NSAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ2MjsKICBjb25zdCBERVBUSF9DT01QT05FTlQxNiAgICAgICAgICAgICAgPSAweDgxQTU7CiAgY29uc3QgU1RFTkNJTF9JTkRFWCAgICAgICAgICAgICAgICAgID0gMHgxOTAxOwogIGNvbnN0IFNURU5DSUxfSU5ERVg4ICAgICAgICAgICAgICAgICA9IDB4OEQ0ODsKICBjb25zdCBERVBUSF9TVEVOQ0lMICAgICAgICAgICAgICAgICAgPSAweDg0Rjk7CiAgY29uc3QgQ09MT1JfQVRUQUNITUVOVDAgICAgICAgICAgICAgID0gMHg4Q0UwOwogIGNvbnN0IERFUFRIX0FUVEFDSE1FTlQgICAgICAgICAgICAgICA9IDB4OEQwMDsKICBjb25zdCBTVEVOQ0lMX0FUVEFDSE1FTlQgICAgICAgICAgICAgPSAweDhEMjA7CiAgY29uc3QgREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UICAgICAgID0gMHg4MjFBOwoKICAvKiBUZXh0dXJlV3JhcE1vZGUgKi8KICBjb25zdCBDTEFNUF9UT19FREdFICAgICAgICAgICAgICAgICAgPSAweDgxMkY7CgogIC8qIFRleHR1cmVNYWdGaWx0ZXIgKi8KICBjb25zdCBMSU5FQVIgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDI2MDE7CgogIC8qKgogICAqIFRoZSBvcHRpb25zIGZvciBhIGZyYW1lYnVmZmVyIGF0dGFjaG1lbnQuCiAgICoKICAgKiBOb3RlOiBGb3IgYSBgZm9ybWF0YCB0aGF0IGlzIGEgdGV4dHVyZSBpbmNsdWRlIGFsbCB0aGUgdGV4dHVyZQogICAqIG9wdGlvbnMgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IGZvciBleGFtcGxlCiAgICogYG1pbmAsIGBtYWdgLCBgY2xhbXBgLCBldGMuLi4gTm90ZSB0aGF0IHVubGlrZSB7QGxpbmsgbW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9CiAgICogYGF1dG9gIGRlZmF1bHRzIHRvIGBmYWxzZWAgZm9yIGF0dGFjaG1lbnQgdGV4dHVyZXMgYnV0IGBtaW5gIGFuZCBgbWFnYCBkZWZhdWx0CiAgICogdG8gYGdsLkxJTkVBUmAgYW5kIGB3cmFwYCBkZWZhdWx0cyB0byBgQ0xBTVBfVE9fRURHRWAKICAgKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IEF0dGFjaG1lbnRPcHRpb25zCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFthdHRhY2htZW50UG9pbnRdIFRoZSBhdHRhY2htZW50IHBvaW50LiBEZWZhdWx0cwogICAqICAgdG8gYGdsLkNPTE9SX0FUVEFDSE1FTlQwICsgbmR4YCB1bmxlc3MgdHlwZSBpcyBhIGRlcHRoIG9yIHN0ZW5jaWwgdHlwZQogICAqICAgdGhlbiBpdCdzIGdsLkRFUFRIX0FUVEFDSE1FTlQgb3IgYGdsLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVGAgZGVwZW5kaW5nCiAgICogICBvbiB0aGUgZm9ybWF0IG9yIGF0dGFjaG1lbnQgdHlwZS4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2Zvcm1hdF0gVGhlIGZvcm1hdC4gSWYgb25lIG9mIGBnbC5SR0JBNGAsCiAgICogICBgZ2wuUkdCNTY1YCwgYGdsLlJHQjVfQTFgLCBgZ2wuREVQVEhfQ09NUE9ORU5UMTZgLAogICAqICAgYGdsLlNURU5DSUxfSU5ERVg4YCBvciBgZ2wuREVQVEhfU1RFTkNJTGAgdGhlbiB3aWxsIGNyZWF0ZSBhCiAgICogICByZW5kZXJidWZmZXIuIE90aGVyd2lzZSB3aWxsIGNyZWF0ZSBhIHRleHR1cmUuIERlZmF1bHQgPSBgZ2wuUkdCQWAKICAgKiBAcHJvcGVydHkge251bWJlcn0gW3R5cGVdIFRoZSB0eXBlLiBVc2VkIGZvciB0ZXh0dXJlLiBEZWZhdWx0ID0gYGdsLlVOU0lHTkVEX0JZVEVgLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGFyZ2V0XSBUaGUgdGV4dHVyZSB0YXJnZXQgZm9yIGBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRGAuCiAgICogICBEZWZhdWx0cyB0byBgZ2wuVEVYVFVSRV8yRGAuIFNldCB0byBhcHByb3ByaWF0ZSBmYWNlIGZvciBjdWJlIG1hcHMuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtzYW1wbGVzXSBUaGUgbnVtYmVyIG9mIHNhbXBsZXMuIERlZmF1bHQgPSAxCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtsZXZlbF0gbGV2ZWwgZm9yIGBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRGAuIERlZmF1bHRzIHRvIDAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtsYXllcl0gbGF5ZXIgZm9yIGBnbC5mcmFtZWJ1ZmZlclRleHR1cmVMYXllcmAuIERlZmF1bHRzIHRvIHVuZGVmaW5lZC4KICAgKiAgIElmIHNldCB0aGVuIGBnbC5mcmFtZWJ1ZmZlclRleHR1cmVMYXllcmAgaXMgY2FsbGVkLCBpZiBub3QgdGhlbiBgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkRgCiAgICogQHByb3BlcnR5IHsoV2ViR0xSZW5kZXJidWZmZXIgfCBXZWJHTFRleHR1cmUpfSBbYXR0YWNobWVudF0gQW4gZXhpc3RpbmcgcmVuZGVyYnVmZmVyIG9yIHRleHR1cmUuCiAgICogICAgSWYgcHJvdmlkZWQgd2lsbCBhdHRhY2ggdGhpcyBPYmplY3QuIFRoaXMgYWxsb3dzIHlvdSB0byBzaGFyZQogICAqICAgIGF0dGFjaG1lbnRzIGFjcm9zcyBmcmFtZWJ1ZmZlcnMuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICogQG1peGVzIG1vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zCiAgICovCgogIGNvbnN0IGRlZmF1bHRBdHRhY2htZW50cyA9IFsKICAgIHsgZm9ybWF0OiBSR0JBLCB0eXBlOiBVTlNJR05FRF9CWVRFLCBtaW46IExJTkVBUiwgd3JhcDogQ0xBTVBfVE9fRURHRSwgfSwKICAgIHsgZm9ybWF0OiBERVBUSF9TVEVOQ0lMLCB9LAogIF07CgogIGNvbnN0IGF0dGFjaG1lbnRzQnlGb3JtYXQgPSB7fTsKICBhdHRhY2htZW50c0J5Rm9ybWF0W0RFUFRIX1NURU5DSUxdID0gREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UOwogIGF0dGFjaG1lbnRzQnlGb3JtYXRbU1RFTkNJTF9JTkRFWF0gPSBTVEVOQ0lMX0FUVEFDSE1FTlQ7CiAgYXR0YWNobWVudHNCeUZvcm1hdFtTVEVOQ0lMX0lOREVYOF0gPSBTVEVOQ0lMX0FUVEFDSE1FTlQ7CiAgYXR0YWNobWVudHNCeUZvcm1hdFtERVBUSF9DT01QT05FTlRdID0gREVQVEhfQVRUQUNITUVOVDsKICBhdHRhY2htZW50c0J5Rm9ybWF0W0RFUFRIX0NPTVBPTkVOVDE2XSA9IERFUFRIX0FUVEFDSE1FTlQ7CiAgYXR0YWNobWVudHNCeUZvcm1hdFtERVBUSF9DT01QT05FTlQyNF0gPSBERVBUSF9BVFRBQ0hNRU5UOwogIGF0dGFjaG1lbnRzQnlGb3JtYXRbREVQVEhfQ09NUE9ORU5UMzJGXSA9IERFUFRIX0FUVEFDSE1FTlQ7CiAgYXR0YWNobWVudHNCeUZvcm1hdFtERVBUSDI0X1NURU5DSUw4XSA9IERFUFRIX1NURU5DSUxfQVRUQUNITUVOVDsKICBhdHRhY2htZW50c0J5Rm9ybWF0W0RFUFRIMzJGX1NURU5DSUw4XSA9IERFUFRIX1NURU5DSUxfQVRUQUNITUVOVDsKCiAgZnVuY3Rpb24gZ2V0QXR0YWNobWVudFBvaW50Rm9yRm9ybWF0KGZvcm1hdCwgaW50ZXJuYWxGb3JtYXQpIHsKICAgIHJldHVybiBhdHRhY2htZW50c0J5Rm9ybWF0W2Zvcm1hdF0gfHwgYXR0YWNobWVudHNCeUZvcm1hdFtpbnRlcm5hbEZvcm1hdF07CiAgfQoKICBjb25zdCByZW5kZXJidWZmZXJGb3JtYXRzID0ge307CiAgcmVuZGVyYnVmZmVyRm9ybWF0c1tSR0JBNF0gPSB0cnVlOwogIHJlbmRlcmJ1ZmZlckZvcm1hdHNbUkdCNV9BMV0gPSB0cnVlOwogIHJlbmRlcmJ1ZmZlckZvcm1hdHNbUkdCNTY1XSA9IHRydWU7CiAgcmVuZGVyYnVmZmVyRm9ybWF0c1tERVBUSF9TVEVOQ0lMXSA9IHRydWU7CiAgcmVuZGVyYnVmZmVyRm9ybWF0c1tERVBUSF9DT01QT05FTlQxNl0gPSB0cnVlOwogIHJlbmRlcmJ1ZmZlckZvcm1hdHNbU1RFTkNJTF9JTkRFWF0gPSB0cnVlOwogIHJlbmRlcmJ1ZmZlckZvcm1hdHNbU1RFTkNJTF9JTkRFWDhdID0gdHJ1ZTsKCiAgZnVuY3Rpb24gaXNSZW5kZXJidWZmZXJGb3JtYXQoZm9ybWF0KSB7CiAgICByZXR1cm4gcmVuZGVyYnVmZmVyRm9ybWF0c1tmb3JtYXRdOwogIH0KCiAgY29uc3QgTUFYX0NPTE9SX0FUVEFDSE1FTlRfUE9JTlRTID0gMzI7ICAvLyBldmVuIGFuIDMwOTAgb25seSBzdXBwb3J0cyA4IGJ1dCBXZWJHTC9PcGVuR0wgRVMgZGVmaW5lIGNvbnN0YW50cyBmb3IgMzIKCiAgZnVuY3Rpb24gaXNDb2xvckF0dGFjaG1lbnRQb2ludChhdHRhY2htZW50UG9pbnQpIHsKICAgIHJldHVybiBhdHRhY2htZW50UG9pbnQgPj0gQ09MT1JfQVRUQUNITUVOVDAgJiYgYXR0YWNobWVudFBvaW50IDwgQ09MT1JfQVRUQUNITUVOVDAgKyBNQVhfQ09MT1JfQVRUQUNITUVOVF9QT0lOVFM7CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBGcmFtZWJ1ZmZlckluZm8KICAgKiBAcHJvcGVydHkge1dlYkdMRnJhbWVidWZmZXJ9IGZyYW1lYnVmZmVyIFRoZSBXZWJHTEZyYW1lYnVmZmVyIGZvciB0aGlzIGZyYW1lYnVmZmVySW5mbwogICAqIEBwcm9wZXJ0eSB7QXJyYXkuPChXZWJHTFJlbmRlcmJ1ZmZlciB8IFdlYkdMVGV4dHVyZSk+fSBhdHRhY2htZW50cyBUaGUgY3JlYXRlZCBhdHRhY2htZW50cyBpbiB0aGUgc2FtZSBvcmRlciBhcyBwYXNzZWQgaW4gdG8ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mb30uCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgZnJhbWVidWZmZXIgYW5kIGl0cyBhdHRhY2htZW50cwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoZWlnaHQgVGhlIHdpZHRoIG9mIHRoZSBmcmFtZWJ1ZmZlciBhbmQgaXRzIGF0dGFjaG1lbnRzCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIENyZWF0ZXMgYSBmcmFtZWJ1ZmZlciBhbmQgYXR0YWNobWVudHMuCiAgICoKICAgKiBUaGlzIHJldHVybnMgYSB7QGxpbmsgbW9kdWxlOnR3Z2wuRnJhbWVidWZmZXJJbmZvfSBiZWNhdXNlIGl0IG5lZWRzIHRvIHJldHVybiB0aGUgYXR0YWNobWVudHMgYXMgd2VsbCBhcyB0aGUgZnJhbWVidWZmZXIuCiAgICogSXQgYWxzbyBsZWF2ZXMgdGhlIGZyYW1lYnVmZmVyIGl0IGp1c3QgY3JlYXRlZCBhcyB0aGUgY3VycmVudGx5IGJvdW5kIGBGUkFNRUJVRkZFUmAuCiAgICogTm90ZTogSWYgdGhpcyBpcyBXZWJHTDIgb3IgaWYgeW91IGNhbGxlZCB7QGxpbmsgbW9kdWxlOnR3Z2wuYWRkRXh0ZW5zaW9uc1RvQ29udGV4dH0gdGhlbiBpdCB3aWxsIHNldCB0aGUgZHJhd0J1ZmZlcnMKICAgKiB0byBgW0NPTE9SX0FUVEFDSE1FTlQwLCBDT0xPUl9BVFRBQ0hNRU5UMSwgLi4uXWAgZm9yIGhvdyBldmVyIG1hbnkgY29sb3IgYXR0YWNobWVudHMgd2VyZSBjcmVhdGVkLgogICAqCiAgICogVGhlIHNpbXBsZXN0IHVzYWdlCiAgICoKICAgKiAgICAgLy8gY3JlYXRlIGFuIFJHQkEvVU5TSUdORURfQllURSB0ZXh0dXJlIGFuZCBERVBUSF9TVEVOQ0lMIHJlbmRlcmJ1ZmZlcgogICAqICAgICBjb25zdCBmYmkgPSB0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mbyhnbCk7CiAgICoKICAgKiBNb3JlIGNvbXBsZXggdXNhZ2UKICAgKgogICAqICAgICAvLyBjcmVhdGUgYW4gUkdCNTY1IHJlbmRlcmJ1ZmZlciBhbmQgYSBTVEVOQ0lMX0lOREVYOCByZW5kZXJidWZmZXIKICAgKiAgICAgY29uc3QgYXR0YWNobWVudHMgPSBbCiAgICogICAgICAgeyBmb3JtYXQ6IFJHQjU2NSwgbWFnOiBORUFSRVNUIH0sCiAgICogICAgICAgeyBmb3JtYXQ6IFNURU5DSUxfSU5ERVg4IH0sCiAgICogICAgIF0KICAgKiAgICAgY29uc3QgZmJpID0gdHdnbC5jcmVhdGVGcmFtZWJ1ZmZlckluZm8oZ2wsIGF0dGFjaG1lbnRzKTsKICAgKgogICAqIFBhc3NpbmcgaW4gYSBzcGVjaWZpYyBzaXplCiAgICoKICAgKiAgICAgY29uc3Qgd2lkdGggPSAyNTY7CiAgICogICAgIGNvbnN0IGhlaWdodCA9IDI1NjsKICAgKiAgICAgY29uc3QgZmJpID0gdHdnbC5jcmVhdGVGcmFtZWJ1ZmZlckluZm8oZ2wsIGF0dGFjaG1lbnRzLCB3aWR0aCwgaGVpZ2h0KTsKICAgKgogICAqICoqTm90ZSEhKiogSXQgaXMgdXAgdG8geW91IHRvIGNoZWNrIGlmIHRoZSBmcmFtZWJ1ZmZlciBpcyByZW5kZXJhYmxlIGJ5IGNhbGxpbmcgYGdsLmNoZWNrRnJhbWVidWZmZXJTdGF0dXNgLgogICAqIFtXZWJHTDEgb25seSBndWFyYW50ZWVzIDMgY29tYmluYXRpb25zIG9mIGF0dGFjaG1lbnRzIHdvcmtdKGh0dHBzOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL3NwZWNzL2xhdGVzdC8xLjAvIzYuNikuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuQXR0YWNobWVudE9wdGlvbnNbXX0gW2F0dGFjaG1lbnRzXSB3aGljaCBhdHRhY2htZW50cyB0byBjcmVhdGUuIElmIG5vdCBwcm92aWRlZCB0aGUgZGVmYXVsdCBpcyBhIGZyYW1lYnVmZmVyIHdpdGggYW4KICAgKiAgICBgUkdCQWAsIGBVTlNJR05FRF9CWVRFYCB0ZXh0dXJlIGBDT0xPUl9BVFRBQ0hNRU5UMGAgYW5kIGEgYERFUFRIX1NURU5DSUxgIHJlbmRlcmJ1ZmZlciBgREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UYC4KICAgKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoXSB0aGUgd2lkdGggZm9yIHRoZSBhdHRhY2htZW50cy4gRGVmYXVsdCA9IHNpemUgb2YgZHJhd2luZ0J1ZmZlcgogICAqIEBwYXJhbSB7bnVtYmVyfSBbaGVpZ2h0XSB0aGUgaGVpZ2h0IGZvciB0aGUgYXR0YWNobWVudHMuIERlZmF1bHQgPSBzaXplIG9mIGRyYXdpbmdCdWZmZXIKICAgKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5GcmFtZWJ1ZmZlckluZm99IHRoZSBmcmFtZWJ1ZmZlciBhbmQgYXR0YWNobWVudHMuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL2ZyYW1lYnVmZmVycwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUZyYW1lYnVmZmVySW5mbyhnbCwgYXR0YWNobWVudHMsIHdpZHRoLCBoZWlnaHQpIHsKICAgIGNvbnN0IHRhcmdldCA9IEZSQU1FQlVGRkVSOwogICAgY29uc3QgZmIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpOwogICAgZ2wuYmluZEZyYW1lYnVmZmVyKHRhcmdldCwgZmIpOwogICAgd2lkdGggID0gd2lkdGggIHx8IGdsLmRyYXdpbmdCdWZmZXJXaWR0aDsKICAgIGhlaWdodCA9IGhlaWdodCB8fCBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0OwogICAgYXR0YWNobWVudHMgPSBhdHRhY2htZW50cyB8fCBkZWZhdWx0QXR0YWNobWVudHM7CiAgICBjb25zdCB1c2VkQ29sb3JBdHRhY2htZW50c1BvaW50cyA9IFtdOwogICAgY29uc3QgZnJhbWVidWZmZXJJbmZvID0gewogICAgICBmcmFtZWJ1ZmZlcjogZmIsCiAgICAgIGF0dGFjaG1lbnRzOiBbXSwKICAgICAgd2lkdGg6IHdpZHRoLAogICAgICBoZWlnaHQ6IGhlaWdodCwKICAgIH07CgogICAgYXR0YWNobWVudHMuZm9yRWFjaChmdW5jdGlvbihhdHRhY2htZW50T3B0aW9ucywgaSkgewogICAgICBsZXQgYXR0YWNobWVudCA9IGF0dGFjaG1lbnRPcHRpb25zLmF0dGFjaG1lbnQ7CiAgICAgIGNvbnN0IHNhbXBsZXMgPSBhdHRhY2htZW50T3B0aW9ucy5zYW1wbGVzOwogICAgICBjb25zdCBmb3JtYXQgPSBhdHRhY2htZW50T3B0aW9ucy5mb3JtYXQ7CiAgICAgIGxldCBhdHRhY2htZW50UG9pbnQgPSBhdHRhY2htZW50T3B0aW9ucy5hdHRhY2htZW50UG9pbnQgfHwgZ2V0QXR0YWNobWVudFBvaW50Rm9yRm9ybWF0KGZvcm1hdCwgYXR0YWNobWVudE9wdGlvbnMuaW50ZXJuYWxGb3JtYXQpOwogICAgICBpZiAoIWF0dGFjaG1lbnRQb2ludCkgewogICAgICAgIGF0dGFjaG1lbnRQb2ludCA9IENPTE9SX0FUVEFDSE1FTlQwICsgaTsKICAgICAgfQogICAgICBpZiAoaXNDb2xvckF0dGFjaG1lbnRQb2ludChhdHRhY2htZW50UG9pbnQpKSB7CiAgICAgICAgdXNlZENvbG9yQXR0YWNobWVudHNQb2ludHMucHVzaChhdHRhY2htZW50UG9pbnQpOwogICAgICB9CiAgICAgIGlmICghYXR0YWNobWVudCkgewogICAgICAgIGlmIChzYW1wbGVzICE9PSB1bmRlZmluZWQgfHwgaXNSZW5kZXJidWZmZXJGb3JtYXQoZm9ybWF0KSkgewogICAgICAgICAgYXR0YWNobWVudCA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpOwogICAgICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihSRU5ERVJCVUZGRVIsIGF0dGFjaG1lbnQpOwogICAgICAgICAgaWYgKHNhbXBsZXMgPiAxKSB7CiAgICAgICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZShSRU5ERVJCVUZGRVIsIHNhbXBsZXMsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBnbC5yZW5kZXJidWZmZXJTdG9yYWdlKFJFTkRFUkJVRkZFUiwgZm9ybWF0LCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgdGV4dHVyZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBhdHRhY2htZW50T3B0aW9ucyk7CiAgICAgICAgICB0ZXh0dXJlT3B0aW9ucy53aWR0aCA9IHdpZHRoOwogICAgICAgICAgdGV4dHVyZU9wdGlvbnMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgICAgaWYgKHRleHR1cmVPcHRpb25zLmF1dG8gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICB0ZXh0dXJlT3B0aW9ucy5hdXRvID0gZmFsc2U7CiAgICAgICAgICAgIHRleHR1cmVPcHRpb25zLm1pbiA9IHRleHR1cmVPcHRpb25zLm1pbiB8fCB0ZXh0dXJlT3B0aW9ucy5taW5NYWcgfHwgTElORUFSOwogICAgICAgICAgICB0ZXh0dXJlT3B0aW9ucy5tYWcgPSB0ZXh0dXJlT3B0aW9ucy5tYWcgfHwgdGV4dHVyZU9wdGlvbnMubWluTWFnIHx8IExJTkVBUjsKICAgICAgICAgICAgdGV4dHVyZU9wdGlvbnMud3JhcFMgPSB0ZXh0dXJlT3B0aW9ucy53cmFwUyB8fCB0ZXh0dXJlT3B0aW9ucy53cmFwIHx8IENMQU1QX1RPX0VER0U7CiAgICAgICAgICAgIHRleHR1cmVPcHRpb25zLndyYXBUID0gdGV4dHVyZU9wdGlvbnMud3JhcFQgfHwgdGV4dHVyZU9wdGlvbnMud3JhcCB8fCBDTEFNUF9UT19FREdFOwogICAgICAgICAgfQogICAgICAgICAgYXR0YWNobWVudCA9IGNyZWF0ZVRleHR1cmUoZ2wsIHRleHR1cmVPcHRpb25zKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGlzUmVuZGVyYnVmZmVyKGdsLCBhdHRhY2htZW50KSkgewogICAgICAgIGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKHRhcmdldCwgYXR0YWNobWVudFBvaW50LCBSRU5ERVJCVUZGRVIsIGF0dGFjaG1lbnQpOwogICAgICB9IGVsc2UgaWYgKGlzVGV4dHVyZShnbCwgYXR0YWNobWVudCkpIHsKICAgICAgICBpZiAoYXR0YWNobWVudE9wdGlvbnMubGF5ZXIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlTGF5ZXIoCiAgICAgICAgICAgIHRhcmdldCwKICAgICAgICAgICAgYXR0YWNobWVudFBvaW50LAogICAgICAgICAgICBhdHRhY2htZW50LAogICAgICAgICAgICBhdHRhY2htZW50T3B0aW9ucy5sZXZlbCB8fCAwLAogICAgICAgICAgICBhdHRhY2htZW50T3B0aW9ucy5sYXllcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKAogICAgICAgICAgICAgIHRhcmdldCwKICAgICAgICAgICAgICBhdHRhY2htZW50UG9pbnQsCiAgICAgICAgICAgICAgYXR0YWNobWVudE9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQsCiAgICAgICAgICAgICAgYXR0YWNobWVudCwKICAgICAgICAgICAgICBhdHRhY2htZW50T3B0aW9ucy5sZXZlbCB8fCAwKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGF0dGFjaG1lbnQgdHlwZScpOwogICAgICB9CiAgICAgIGZyYW1lYnVmZmVySW5mby5hdHRhY2htZW50cy5wdXNoKGF0dGFjaG1lbnQpOwogICAgfSk7CiAgICBpZiAoZ2wuZHJhd0J1ZmZlcnMpIHsKICAgICAgZ2wuZHJhd0J1ZmZlcnModXNlZENvbG9yQXR0YWNobWVudHNQb2ludHMpOwogICAgfQogICAgcmV0dXJuIGZyYW1lYnVmZmVySW5mbzsKICB9CgogIC8qKgogICAqIEJpbmRzIGEgZnJhbWVidWZmZXIKICAgKgogICAqIFRoaXMgZnVuY3Rpb24gcHJldHR5IG11Y2ggc29sZWx5IGV4aXN0cyBiZWNhdXNlIEkgc3BlbnQgaG91cnMKICAgKiB0cnlpbmcgdG8gZmlndXJlIG91dCB3aHkgc29tZXRoaW5nIEkgd3JvdGUgd2Fzbid0IHdvcmtpbmcgb25seQogICAqIHRvIHJlYWxpemUgSSBmb3JnZXQgdG8gc2V0IHRoZSB2aWV3cG9ydCBkaW1lbnNpb25zLgogICAqIE15IGhvcGUgaXMgdGhpcyBmdW5jdGlvbiB3aWxsIGZpeCB0aGF0LgogICAqCiAgICogSXQgaXMgZWZmZWN0aXZlbHkgdGhlIHNhbWUgYXMKICAgKgogICAqICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHNvbWVGcmFtZWJ1ZmZlckluZm8uZnJhbWVidWZmZXIpOwogICAqICAgICBnbC52aWV3cG9ydCgwLCAwLCBzb21lRnJhbWVidWZmZXJJbmZvLndpZHRoLCBzb21lRnJhbWVidWZmZXJJbmZvLmhlaWdodCk7CiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRnJhbWVidWZmZXJJbmZvfG51bGx9IFtmcmFtZWJ1ZmZlckluZm9dIGEgZnJhbWVidWZmZXJJbmZvIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mb30uCiAgICogICBJZiBmYWxzeSB3aWxsIGJpbmQgdGhlIGNhbnZhcy4KICAgKiBAcGFyYW0ge251bWJlcn0gW3RhcmdldF0gVGhlIHRhcmdldC4gSWYgbm90IHBhc3NlZCBgZ2wuRlJBTUVCVUZGRVJgIHdpbGwgYmUgdXNlZC4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvZnJhbWVidWZmZXJzCiAgICovCgogIGZ1bmN0aW9uIGJpbmRGcmFtZWJ1ZmZlckluZm8oZ2wsIGZyYW1lYnVmZmVySW5mbywgdGFyZ2V0KSB7CiAgICB0YXJnZXQgPSB0YXJnZXQgfHwgRlJBTUVCVUZGRVI7CiAgICBpZiAoZnJhbWVidWZmZXJJbmZvKSB7CiAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcih0YXJnZXQsIGZyYW1lYnVmZmVySW5mby5mcmFtZWJ1ZmZlcik7CiAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIGZyYW1lYnVmZmVySW5mby53aWR0aCwgZnJhbWVidWZmZXJJbmZvLmhlaWdodCk7CiAgICB9IGVsc2UgewogICAgICBnbC5iaW5kRnJhbWVidWZmZXIodGFyZ2V0LCBudWxsKTsKICAgICAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuZHJhd2luZ0J1ZmZlcldpZHRoLCBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHRleHR1cmUoY29udGV4dCwgc291cmNlKSB7CiAgICByZXR1cm4gKCkgPT4gc291cmNlIGluc3RhbmNlb2YgV2ViR0xUZXh0dXJlID8gc291cmNlIDogY3JlYXRlVGV4dHVyZShjb250ZXh0LCB7CiAgICAgIHNyYzogc291cmNlLAogICAgICB3cmFwOiBjb250ZXh0LkNMQU1QX1RPX0VER0UKICAgIH0pOwogIH0KICBjb25zdCBXRUJHTF9NSU5JTVVNX1RFWFRVUkVfU0laRSA9IDI7CgogIGNsYXNzIFdlYmdsUGlwZWxpbmVQcm9ncmFtIHsKICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgdGhpcy5pZCA9ICJfIjsKICAgICAgY29uc3QgeyBjb250ZXh0LCB3aWR0aCwgaGVpZ2h0IH0gPSBvcHRpb25zOwogICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgICBjb25zdCBkZWZpbmVzID0gdGhpcy5idWlsZERlZmluZXMoKTsKICAgICAgdGhpcy5wcm9ncmFtSW5mbyA9IGNyZWF0ZVByb2dyYW1JbmZvKHRoaXMuY29udGV4dCwgWwogICAgICAgIGRlZmluZXMgKyB0aGlzLmdldFZlcnRleFNoYWRlcigpLAogICAgICAgIGRlZmluZXMgKyB0aGlzLmdldEZyYWdtZW50U2hhZGVyKCkKICAgICAgXSk7CiAgICAgIHRoaXMuYnVmZmVySW5mbyA9IGNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzKAogICAgICAgIHRoaXMuY29udGV4dCwKICAgICAgICB0aGlzLmdldEJ1ZmZlcnMoKQogICAgICApOwogICAgICB0aGlzLmZiaSA9IGNyZWF0ZUZyYW1lYnVmZmVySW5mbygKICAgICAgICB0aGlzLmNvbnRleHQsCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICBmb3JtYXQ6IHRoaXMuY29udGV4dC5SR0JBLAogICAgICAgICAgICB0eXBlOiB0aGlzLmNvbnRleHQuVU5TSUdORURfQllURSwKICAgICAgICAgICAgbWluOiB0aGlzLmNvbnRleHQuTElORUFSLAogICAgICAgICAgICB3cmFwOiB0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRQogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMub3V0cHV0ID0gdGhpcy5mYmkuYXR0YWNobWVudHNbMF07CiAgICB9CiAgICByZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCkgewogICAgICB0aGlzLmZiaSA9IGNyZWF0ZUZyYW1lYnVmZmVySW5mbygKICAgICAgICB0aGlzLmNvbnRleHQsCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICBmb3JtYXQ6IHRoaXMuY29udGV4dC5SR0JBLAogICAgICAgICAgICB0eXBlOiB0aGlzLmNvbnRleHQuVU5TSUdORURfQllURSwKICAgICAgICAgICAgbWluOiB0aGlzLmNvbnRleHQuTElORUFSLAogICAgICAgICAgICB3cmFwOiB0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRQogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMub3B0aW9ucy53aWR0aCA9IHdpZHRoOwogICAgICB0aGlzLm9wdGlvbnMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB0aGlzLm91dHB1dCA9IHRoaXMuZmJpLmF0dGFjaG1lbnRzWzBdOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIGRlZmluZXMgcHJlcGVuZCB0byB0aGUgc2hhZGVycwogICAgICogQHJldHVybnMgT2JqZWN0IHdoZXJlIGtleSBpcyB0aGUgZGVmaW5lIG5hbWUgYW5kIHZhbHVlIHRoZSBkZWZpbmUgdmFsdWUKICAgICAqLwogICAgZ2V0RGVmaW5lcygpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIGJ1ZmZlcnMgdXNlZCBieSB0aGUgcHJvZ3JhbQogICAgICogVGhlIGJ1ZmZlcnMgYXJlIHVwbG9hZGVkIG9ubHkgb25jZSBhdCB0aGUgaW5pdGlhbGl6YXRpb24KICAgICAqIEByZXR1cm5zIEJ1ZmZlciBtYXAKICAgICAqLwogICAgZ2V0QnVmZmVycygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwb3NpdGlvbjogewogICAgICAgICAgbnVtQ29tcG9uZW50czogMiwKICAgICAgICAgIGRhdGE6IFstMSwgLTEsIC0xLCAxLCAxLCAtMSwgMSwgMSwgLTEsIDEsIDEsIC0xXQogICAgICAgIH0sCiAgICAgICAgdGV4dHVyZV9jb29yZDogewogICAgICAgICAgbnVtQ29tcG9uZW50czogMiwKICAgICAgICAgIGRhdGE6IFswLCAwLCAwLCAxLCAxLCAwLCAxLCAxLCAwLCAxLCAxLCAwXQogICAgICAgIH0KICAgICAgfTsKICAgIH0KICAgIC8qKgogICAgICogQnVpbGQgcHJlcGVuZGFibGUgc3RyaW5nIHRvIHNoYWRlcnMgc291cmNlIGNvbnRhaW5pbmcgdGhlIGRlZmluZXMgcmV0dXJuZWQgYnkgZ2V0RGVmaW5lcy4KICAgICAqIEByZXR1cm5zIFByZXBlbmRhYmxlIHN0cmluZwogICAgICovCiAgICBidWlsZERlZmluZXMoKSB7CiAgICAgIGxldCByZXN1bHQgPSAiIjsKICAgICAgY29uc3QgZGVmaW5lcyA9IHRoaXMuZ2V0RGVmaW5lcygpOwogICAgICBmb3IgKGxldCBpIGluIGRlZmluZXMpIHsKICAgICAgICByZXN1bHQgKz0gYCNkZWZpbmUgJHtpfSAke2RlZmluZXNbaV0udG9GaXhlZCgxKX0KYDsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBSdW4gdGhlIHByb2dyYW0KICAgICAqIEBwYXJhbSB1bmlmb3JtcyBEYXRhIHRvIHVzZWQgZm9yIHRoZSB1bmlmb3JtcwogICAgICovCiAgICBydW4odW5pZm9ybXMpIHsKICAgICAgdGhpcy5wcm9maWxlcj8ucHVzaENvbnRleHQoCiAgICAgICAgYFske3RoaXMuaWR9XSBQUk9HIDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YAogICAgICApOwogICAgICB0aGlzLnByb2ZpbGVyPy5wdXNoQ29udGV4dChgWyR7dGhpcy5pZH1dIFVOSUZPUk1TYCk7CiAgICAgIGZvciAoY29uc3QgdSBpbiB1bmlmb3JtcykgewogICAgICAgIGlmICh0eXBlb2YgdW5pZm9ybXNbdV0gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIHRoaXMucHJvZmlsZXI/LnB1c2hDb250ZXh0KGBbJHt0aGlzLmlkfV0gVU5JIDogJHt1fWApOwogICAgICAgICAgdW5pZm9ybXNbdV0gPSB1bmlmb3Jtc1t1XSgpOwogICAgICAgICAgdGhpcy5wcm9maWxlcj8ucG9wQ29udGV4dChgWyR7dGhpcy5pZH1dIFVOSSA6ICR7dX1gKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5wcm9maWxlcj8ucG9wQ29udGV4dChgWyR7dGhpcy5pZH1dIFVOSUZPUk1TYCk7CiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgICAgIGxldCBkZWx0YSA9IDA7CiAgICAgIGlmICh0aGlzLmxhc3RSdW4pIHsKICAgICAgICBkZWx0YSA9IChub3cgLSB0aGlzLmxhc3RSdW4pIC8gMWUzOwogICAgICB9CiAgICAgIHRoaXMubGFzdFJ1biA9IG5vdzsKICAgICAgdGhpcy5jb250ZXh0LnZpZXdwb3J0KAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICB0aGlzLmNvbnRleHQuY2FudmFzLndpZHRoLAogICAgICAgIHRoaXMuY29udGV4dC5jYW52YXMuaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMuY29udGV4dC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbUluZm8ucHJvZ3JhbSk7CiAgICAgIHNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzKAogICAgICAgIHRoaXMuY29udGV4dCwKICAgICAgICB0aGlzLnByb2dyYW1JbmZvLAogICAgICAgIHRoaXMuYnVmZmVySW5mbwogICAgICApOwogICAgICBzZXRVbmlmb3Jtcyh0aGlzLnByb2dyYW1JbmZvLCB7CiAgICAgICAgZGVsdGEsCiAgICAgICAgY2FudmFzOiBbdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCwgdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHRdLAogICAgICAgIC4uLnVuaWZvcm1zCiAgICAgIH0pOwogICAgICBiaW5kRnJhbWVidWZmZXJJbmZvKAogICAgICAgIHRoaXMuY29udGV4dCwKICAgICAgICB0aGlzLm9wdGlvbnMuZGlzYWJsZUZyYW1lYnVmZmVyID8gbnVsbCA6IHRoaXMuZmJpCiAgICAgICk7CiAgICAgIGRyYXdCdWZmZXJJbmZvKHRoaXMuY29udGV4dCwgdGhpcy5idWZmZXJJbmZvKTsKICAgICAgdGhpcy5wcm9maWxlcj8ucG9wQ29udGV4dCgKICAgICAgICBgWyR7dGhpcy5pZH1dIFBST0cgOiAke3RoaXMuY29uc3RydWN0b3IubmFtZX1gCiAgICAgICk7CiAgICB9CiAgICBzZXRQcm9maWxlcihwcm9maWxlcikgewogICAgICB0aGlzLnByb2ZpbGVyID0gcHJvZmlsZXI7CiAgICB9CiAgfQoKICB2YXIgZnJhZ21lbnRTaGFkZXIkOCA9ICJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcblxudmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkO1xuXG51bmlmb3JtIHNhbXBsZXIyRCBiYWNrZ3JvdW5kO1xudW5pZm9ybSBzYW1wbGVyMkQgZm9yZWdyb3VuZDtcbnVuaWZvcm0gc2FtcGxlcjJEIHRocmVzaG9sZDtcblxudm9pZCBtYWluKCkge1xuICB2ZWM0IGJhY2tncm91bmRDb2xvciA9IHRleHR1cmUyRChiYWNrZ3JvdW5kLCBfdGV4dHVyZV9jb29yZCk7XG4gIHZlYzQgZm9yZWdyb3VuZENvbG9yID0gdGV4dHVyZTJEKGZvcmVncm91bmQsIF90ZXh0dXJlX2Nvb3JkKTtcbiAgdmVjNCB0cmVzaG9sZENvbG9yID0gdGV4dHVyZTJEKHRocmVzaG9sZCwgX3RleHR1cmVfY29vcmQpO1xuICBnbF9GcmFnQ29sb3IgPSBmb3JlZ3JvdW5kQ29sb3IgKiB0cmVzaG9sZENvbG9yLmEgK1xuICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgKiAoMS4gLSB0cmVzaG9sZENvbG9yLmEpO1xufVxuIjsKCiAgdmFyIHZlcnRleFNoYWRlciQ4ID0gInZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XG5hdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTtcbiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkO1xuICBfdGV4dHVyZV9jb29yZC55ID0gMS4gLSB0ZXh0dXJlX2Nvb3JkLnk7XG59XG4iOwoKICBjbGFzcyBNaXggZXh0ZW5kcyBXZWJnbFBpcGVsaW5lUHJvZ3JhbSB7CiAgICBnZXRGcmFnbWVudFNoYWRlcigpIHsKICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyJDg7CiAgICB9CiAgICBnZXRWZXJ0ZXhTaGFkZXIoKSB7CiAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXIkODsKICAgIH0KICB9CgogIGNsYXNzIFdlYmdsUGlwZWxpbmUgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIC8qKgogICAgICAgKiBQaXBlbGluZSBwcm9ncmFtIGluZm9zIHRvIHJ1bgogICAgICAgKi8KICAgICAgdGhpcy5zdGVwcyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBwcm9ncmFtIHBpcGVsaW5lIHRvIHRoZSByZW5kZXJpbmcgcGlwZWxpbmUKICAgICAqIEBwYXJhbSBzdGVwIFByb2dyYW0gcGlwZWxpbmUgaW5mb3MKICAgICAqLwogICAgYWRkU3RlcChzdGVwKSB7CiAgICAgIHRoaXMuc3RlcHMucHVzaChzdGVwKTsKICAgIH0KICAgIC8qKgogICAgICogUnVuIHRoZSBwaXBlbGluZQogICAgICovCiAgICBhc3luYyBydW4oKSB7CiAgICAgIGZvciAoY29uc3Qgc3RlcCBvZiB0aGlzLnN0ZXBzKSB7CiAgICAgICAgc3RlcC5wcm9ncmFtLnJ1bihzdGVwLmdldFVuaWZvcm1zKCkpOwogICAgICB9CiAgICB9CiAgICByZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCkgewogICAgICB0aGlzLnByb2ZpbGVyPy5wdXNoQ29udGV4dChgUElQIFske3RoaXMuY29uc3RydWN0b3IubmFtZX1dYCk7CiAgICAgIGZvciAoY29uc3Qgc3RlcCBvZiB0aGlzLnN0ZXBzKSB7CiAgICAgICAgaWYgKCFzdGVwLnByZXZlbnRSZXNpemUpIHsKICAgICAgICAgIHN0ZXAucHJvZ3JhbS5yZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMucHJvZmlsZXI/LnBvcENvbnRleHQoYFBJUCBbJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9XWApOwogICAgfQogICAgc2V0UHJvZmlsZXIocHJvZmlsZXIpIHsKICAgICAgdGhpcy5wcm9maWxlciA9IHByb2ZpbGVyOwogICAgICBmb3IgKGNvbnN0IHN0ZXAgb2YgdGhpcy5zdGVwcykgewogICAgICAgIHN0ZXAucHJvZ3JhbS5zZXRQcm9maWxlcihwcm9maWxlcik7CiAgICAgIH0KICAgIH0KICAgIHNldElkKGlkKSB7CiAgICAgIGZvciAoY29uc3Qgc3RlcCBvZiB0aGlzLnN0ZXBzKSB7CiAgICAgICAgc3RlcC5wcm9ncmFtLmlkID0gaWQ7CiAgICAgIH0KICAgIH0KICB9CgogIGNsYXNzIFdlYmdsVHJhbnNmb3JtZXJQaXBlbGluZSBleHRlbmRzIFdlYmdsUGlwZWxpbmUgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMucHJlY2lzZU1hc2tFbmFibGVkID0gZmFsc2U7CiAgICB9CiAgfQoKICBjbGFzcyBCYWNrZ3JvdW5kSW1hZ2VQaXBlbGluZSBleHRlbmRzIFdlYmdsVHJhbnNmb3JtZXJQaXBlbGluZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMucHJlY2lzZU1hc2tFbmFibGVkID0gdHJ1ZTsKICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAgICAgY29udGV4dCwKICAgICAgICBoZWlnaHQ6IGNvbnRleHQuY2FudmFzLmhlaWdodCwKICAgICAgICB3aWR0aDogY29udGV4dC5jYW52YXMud2lkdGgKICAgICAgfTsKICAgICAgY29uc3QgbWl4ID0gbmV3IE1peCh7IC4uLmRlZmF1bHRPcHRpb25zLCBkaXNhYmxlRnJhbWVidWZmZXI6IHRydWUgfSk7CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogbWl4LAogICAgICAgIGdldFVuaWZvcm1zOiAoKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuaW5wdXRCYWNrZ3JvdW5kSW1hZ2UpLAogICAgICAgICAgICBmb3JlZ3JvdW5kOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuaW5wdXRJbWFnZSksCiAgICAgICAgICAgIHRocmVzaG9sZDogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0TWFzaykKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIHNldERhdGEoaW1hZ2UsIG1hc2spIHsKICAgICAgdGhpcy5pbnB1dEltYWdlID0gaW1hZ2U7CiAgICAgIHRoaXMuaW5wdXRNYXNrID0gbWFzazsKICAgIH0KICB9CgogIHZhciBmcmFnbWVudFNoYWRlciQ3ID0gInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG52YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXG52b2lkIG1haW4oKSB7IGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCk7IH1cbiI7CgogIHZhciB2ZXJ0ZXhTaGFkZXIkNyA9ICJ2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xuYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDtcbnVuaWZvcm0gYm9vbCBpbnZlcnRfeTtcblxudm9pZCBtYWluKCkge1xuICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7XG4gIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDtcbiAgaWYgKGludmVydF95KSB7XG4gICAgX3RleHR1cmVfY29vcmQueSA9IDEuIC0gdGV4dHVyZV9jb29yZC55O1xuICB9XG59XG4iOwoKICBjbGFzcyBSZW5kZXJUZXh0dXJlIGV4dGVuZHMgV2ViZ2xQaXBlbGluZVByb2dyYW0gewogICAgZ2V0RnJhZ21lbnRTaGFkZXIoKSB7CiAgICAgIHJldHVybiBmcmFnbWVudFNoYWRlciQ3OwogICAgfQogICAgZ2V0VmVydGV4U2hhZGVyKCkgewogICAgICByZXR1cm4gdmVydGV4U2hhZGVyJDc7CiAgICB9CiAgfQoKICBjbGFzcyBSZXNpemVJbWFnZVBpcGVsaW5lIGV4dGVuZHMgV2ViZ2xQaXBlbGluZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gewogICAgICAgIGNvbnRleHQsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIHdpZHRoCiAgICAgIH07CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogbmV3IFJlbmRlclRleHR1cmUoewogICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsCiAgICAgICAgICBkaXNhYmxlRnJhbWVidWZmZXI6IHRydWUKICAgICAgICB9KSwKICAgICAgICBnZXRVbmlmb3JtczogKCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0SW1hZ2UpLAogICAgICAgICAgICBpbnZlcnRfeTogdHJ1ZQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgc2V0RGF0YShpbWFnZSkgewogICAgICB0aGlzLmlucHV0SW1hZ2UgPSBpbWFnZTsKICAgIH0KICB9CgogIGFzeW5jIGZ1bmN0aW9uIHdhaXQobXMpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0sIG1zKTsKICAgIH0pOwogIH0KCiAgdmFyIGZyYWdtZW50U2hhZGVyJDYgPSAicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG5cbnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxudW5pZm9ybSB2ZWMyIGNhbnZhcztcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XG5cbnZlYzQgbG9vcCgpO1xuXG52b2lkIG1haW4oKSB7IGdsX0ZyYWdDb2xvciA9IGxvb3AoKTsgfVxuIjsKCiAgdmFyIHZlcnRleFNoYWRlciQ2ID0gInZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XG5hdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTtcbiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkO1xufVxuIjsKCiAgdmFyIEJMVVJfVFlQRSA9IC8qIEBfX1BVUkVfXyAqLyAoKEJMVVJfVFlQRTIpID0+IHsKICAgIEJMVVJfVFlQRTJbQkxVUl9UWVBFMlsiTElORUFSIl0gPSAwXSA9ICJMSU5FQVIiOwogICAgQkxVUl9UWVBFMltCTFVSX1RZUEUyWyJHQVVTU0lBTiJdID0gMV0gPSAiR0FVU1NJQU4iOwogICAgcmV0dXJuIEJMVVJfVFlQRTI7CiAgfSkoQkxVUl9UWVBFIHx8IHt9KTsKICBjbGFzcyBCbHVyIGV4dGVuZHMgV2ViZ2xQaXBlbGluZVByb2dyYW0gewogICAgZ2V0RGVmaW5lcygpIHsKICAgICAgcmV0dXJuIHsgUkFESVVTOiB0aGlzLm9wdGlvbnMucmFkaXVzID8/IDEgfTsKICAgIH0KICAgIGdldEZyYWdtZW50U2hhZGVyKCkgewogICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXIkNiArIHRoaXMuY3JlYXRlTG9vcEZ1bmN0aW9uKCk7CiAgICB9CiAgICBnZXRWZXJ0ZXhTaGFkZXIoKSB7CiAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXIkNjsKICAgIH0KICAgIGNyZWF0ZUxvb3BGdW5jdGlvbigpIHsKICAgICAgbGV0IHJhZGl1cyA9IHRoaXMub3B0aW9ucy5yYWRpdXMgPz8gMTsKICAgICAgcmV0dXJuIGAKCiAgICAgICAgdmVjNCBsb29wKCkgeyAKICAgICAgICAgICAgdmVjNCByZXN1bHQgPSB2ZWM0KDAsMCwwLDApOwogICAgICAgICAgICBmbG9hdCBmYWN0b3JTdW0gPSAwLjsKCiAgICAgICAgICAgIHZlYzIgbm9ybWFsaXplZFJhZGl1cyA9IHZlYzIoLSR7cmFkaXVzfS4pIC8gY2FudmFzOwogICAgICAgICAgICB2ZWMyIG5vcm1hbGl6ZWRJbmNyZW1lbnQgPSB2ZWMyKDEuKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBkaWZmID0gbm9ybWFsaXplZFJhZGl1czsKCiAgICAgICAgICAgIGZvcihpbnQgeT0tJHtyYWRpdXN9OyB5PCR7cmFkaXVzICsgMX07ICsreSkgewogICAgICAgICAgICAgICAgZm9yKGludCB4PS0ke3JhZGl1c307IHg8JHtyYWRpdXMgKyAxfTsgKyt4KSB7CiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFjdG9yID0gMS47CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGZhY3RvciAqIHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpOwogICAgICAgICAgICAgICAgICAgIGZhY3RvclN1bSArPSBmYWN0b3I7CiAgICAgICAgICAgICAgICAgICAgZGlmZi54ICs9IG5vcm1hbGl6ZWRJbmNyZW1lbnQueDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRpZmYueSArPSBub3JtYWxpemVkSW5jcmVtZW50Lnk7CiAgICAgICAgICAgICAgICBkaWZmLnggPSBub3JtYWxpemVkUmFkaXVzLng7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAvIGZhY3RvclN1bTsKICAgICAgICB9YDsKICAgIH0KICAgIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dhdXNzaWFuX2JsdXIKICAgIGdldEZhY3Rvcih4LCB5KSB7CiAgICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnR5cGUpIHsKICAgICAgICBjYXNlIDEgLyogR0FVU1NJQU4gKi86CiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRMaW5lYXJGYWN0b3IoeCwgeSk7CiAgICAgICAgY2FzZSAwIC8qIExJTkVBUiAqLzoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZWFyRmFjdG9yKHgsIHkpOwogICAgICB9CiAgICB9CiAgICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HYXVzc2lhbl9ibHVyCiAgICBnZXRMaW5lYXJGYWN0b3IoeCwgeSkgewogICAgICByZXR1cm4gMTsKICAgIH0KICAgIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dhdXNzaWFuX2JsdXIKICAgIGdldEdhdXNzaWFuRmFjdG9yKHgsIHkpIHsKICAgICAgY29uc3QgVEFVID0gTWF0aC5QSSAqIDI7CiAgICAgIGNvbnN0IHZhcmlhbmNlID0gTWF0aC5tYXgodGhpcy5vcHRpb25zLnJhZGl1cyA/PyAxLCAxKTsKICAgICAgY29uc3QgZUZhY3RvciA9IDEgLyAoVEFVICogdmFyaWFuY2UgKiogMik7CiAgICAgIGNvbnN0IGVQb3dlck51bWVyYXRvciA9IC0oeCAqKiAyICsgeSAqKiAyKTsKICAgICAgY29uc3QgZVBvd2VyID0gZUZhY3RvciAqIGVQb3dlck51bWVyYXRvcjsKICAgICAgcmV0dXJuIGVGYWN0b3IgKiBNYXRoLkUgKiogZVBvd2VyOwogICAgfQogIH0KCiAgY2xhc3MgV2ViZ2xQaXBlbGluZVByb2dyYW1Eb3VibGVCdWZmZXIgZXh0ZW5kcyBXZWJnbFBpcGVsaW5lUHJvZ3JhbSB7CiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIHN1cGVyKG9wdGlvbnMpOwogICAgICB0aGlzLmZiaTIgPSBjcmVhdGVGcmFtZWJ1ZmZlckluZm8oCiAgICAgICAgb3B0aW9ucy5jb250ZXh0LAogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgZm9ybWF0OiBvcHRpb25zLmNvbnRleHQuUkdCQSwKICAgICAgICAgICAgdHlwZTogb3B0aW9ucy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsCiAgICAgICAgICAgIG1pbjogb3B0aW9ucy5jb250ZXh0LkxJTkVBUiwKICAgICAgICAgICAgbWFnOiBvcHRpb25zLmNvbnRleHQuTElORUFSLAogICAgICAgICAgICB3cmFwOiBvcHRpb25zLmNvbnRleHQuQ0xBTVBfVE9fRURHRQogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgb3B0aW9ucy53aWR0aCwKICAgICAgICBvcHRpb25zLmhlaWdodAogICAgICApOwogICAgfQogICAgcnVuKHVuaWZvcm1zKSB7CiAgICAgIGNvbnN0IHRtcCA9IHRoaXMuZmJpOwogICAgICB0aGlzLmZiaSA9IHRoaXMuZmJpMjsKICAgICAgdGhpcy5mYmkyID0gdG1wOwogICAgICB0aGlzLm91dHB1dCA9IHRoaXMuZmJpLmF0dGFjaG1lbnRzWzBdOwogICAgICBzdXBlci5ydW4oewogICAgICAgIC4uLnVuaWZvcm1zLAogICAgICAgIHByZXZpb3VzX3JlbmRlcmluZzogdGhpcy5mYmkyLmF0dGFjaG1lbnRzWzBdCiAgICAgIH0pOwogICAgfQogICAgcmVzaXplT3V0cHV0KHdpZHRoLCBoZWlnaHQpIHsKICAgICAgc3VwZXIucmVzaXplT3V0cHV0KHdpZHRoLCBoZWlnaHQpOwogICAgICB0aGlzLmZiaTIgPSBjcmVhdGVGcmFtZWJ1ZmZlckluZm8oCiAgICAgICAgdGhpcy5jb250ZXh0LAogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgZm9ybWF0OiB0aGlzLmNvbnRleHQuUkdCQSwKICAgICAgICAgICAgdHlwZTogdGhpcy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsCiAgICAgICAgICAgIG1pbjogdGhpcy5jb250ZXh0LkxJTkVBUiwKICAgICAgICAgICAgd3JhcDogdGhpcy5jb250ZXh0LkNMQU1QX1RPX0VER0UKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodAogICAgICApOwogICAgfQogIH0KCiAgdmFyIGZyYWdtZW50U2hhZGVyJDUgPSAicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG5cbnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxuLy8gdW5pZm9ybSBmbG9hdCB0cmVzaG9sZDtcbnVuaWZvcm0gc2FtcGxlcjJEIGltYWdlX25vdztcbnVuaWZvcm0gc2FtcGxlcjJEIGltYWdlX2JlZm9yZTtcbnVuaWZvcm0gc2FtcGxlcjJEIG1hc2tfbm93O1xudW5pZm9ybSBzYW1wbGVyMkQgbWFza19iZWZvcmU7XG51bmlmb3JtIHNhbXBsZXIyRCBwcmV2aW91c19yZW5kZXJpbmc7XG51bmlmb3JtIHZlYzIgY2FudmFzO1xuXG51bmlmb3JtIGZsb2F0IGRlbHRhO1xuXG5mbG9hdCBjdXJyZW50X2ZhY3RvciA9IDAuNjk7XG5mbG9hdCBwcmV2aW91c19mYWN0b3IgPSAwLjc0O1xuZmxvYXQgdGhyZXNob2xkX2FjdGl2YXRpb24gPSAwLjU0O1xuXG5mbG9hdCBtYXAoZmxvYXQgdmFsdWUsIGZsb2F0IG1pbjEsIGZsb2F0IG1heDEsIGZsb2F0IG1pbjIsIGZsb2F0IG1heDIpIHtcbiAgcmV0dXJuIG1pbjIgKyAodmFsdWUgLSBtaW4xKSAqIChtYXgyIC0gbWluMikgLyAobWF4MSAtIG1pbjEpO1xufVxuXG5mbG9hdCBnZXRUaHJlc2hvbGQoKSB7XG4gIHZlYzQgY29sb3IgPSB2ZWM0KDAuKTtcbiAgZm9yIChmbG9hdCB5ID0gLTYuOyB5IDwgNy47IHkgKz0gMS4pIHtcbiAgICBmb3IgKGZsb2F0IHggPSAtNi47IHggPCA3LjsgeCArPSAxLikge1xuICAgICAgdmVjNCBpbWFnZV9ub3dfY29sb3IgPVxuICAgICAgICAgIHRleHR1cmUyRChpbWFnZV9ub3csIF90ZXh0dXJlX2Nvb3JkICsgdmVjMih4LCB5KSAvIGNhbnZhcyk7XG4gICAgICB2ZWM0IGltYWdlX2JlZm9yZV9jb2xvciA9XG4gICAgICAgICAgdGV4dHVyZTJEKGltYWdlX2JlZm9yZSwgX3RleHR1cmVfY29vcmQgKyB2ZWMyKHgsIHkpIC8gY2FudmFzKTtcbiAgICAgIGNvbG9yICs9IGFicyhpbWFnZV9iZWZvcmVfY29sb3IgLSBpbWFnZV9ub3dfY29sb3IpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gKGNvbG9yLnggKyBjb2xvci55ICsgY29sb3IueikgLyAoMy4gKiA5Lik7XG59XG5cbnZvaWQgbWFpbigpIHtcbiAgZmxvYXQgdHJlc2hvbGRfaW5wdXQgPSAuNDtcbiAgZmxvYXQgdHJlc2hvbGRfcHJldmlvdXNfcmVuZGVyaW5nID0gLjk4O1xuXG4gIHZlYzQgbWFza19ub3dfY29sb3IgPSB0ZXh0dXJlMkQobWFza19ub3csIF90ZXh0dXJlX2Nvb3JkKTtcbiAgdmVjNCBtYXNrX2JlZm9yZV9jb2xvciA9IHRleHR1cmUyRChtYXNrX2JlZm9yZSwgX3RleHR1cmVfY29vcmQpO1xuICB2ZWM0IHByZXZpb3VzX3JlbmRlcmluZ19jb2xvciA9IHRleHR1cmUyRChwcmV2aW91c19yZW5kZXJpbmcsIF90ZXh0dXJlX2Nvb3JkKTtcblxuICB2ZWMzIG1hc2tfZGlmZiA9IGFicyhtYXNrX2JlZm9yZV9jb2xvci54eXogLSBtYXNrX25vd19jb2xvci54eXopO1xuICBmbG9hdCBmbGlja2VyaW5nID0gbWFza19kaWZmLng7XG4gIGZsb2F0IHRocmVzaG9sZCA9IGdldFRocmVzaG9sZCgpO1xuICBpZiAodGhyZXNob2xkIDwgdGhyZXNob2xkX2FjdGl2YXRpb24pIHtcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGZsaWNrZXJpbmcsIDAuLCAwLiwgMS4pICogY3VycmVudF9mYWN0b3IgK1xuICAgICAgICAgICAgICAgICAgIHByZXZpb3VzX3JlbmRlcmluZ19jb2xvciAqIHByZXZpb3VzX2ZhY3RvcjtcbiAgICBnbF9GcmFnQ29sb3IgKj0gKDEuIC0gdGhyZXNob2xkKTtcbiAgfVxufVxuIjsKCiAgdmFyIHZlcnRleFNoYWRlciQ1ID0gInZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XG5hdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTtcbiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkO1xufVxuIjsKCiAgY2xhc3MgRmxpY2tlcmluZyBleHRlbmRzIFdlYmdsUGlwZWxpbmVQcm9ncmFtRG91YmxlQnVmZmVyIHsKICAgIGdldEZyYWdtZW50U2hhZGVyKCkgewogICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXIkNTsKICAgIH0KICAgIGdldFZlcnRleFNoYWRlcigpIHsKICAgICAgcmV0dXJuIHZlcnRleFNoYWRlciQ1OwogICAgfQogIH0KCiAgdmFyIGZyYWdtZW50U2hhZGVyJDQgPSAiI3ZlcnNpb24gMzAwIGVzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vVm9sY29taXgvdmlydHVhbC1iYWNrZ3JvdW5kL2Jsb2IvbWFpbi9zcmMvcGlwZWxpbmVzL3dlYmdsMi9qb2ludEJpbGF0ZXJhbEZpbHRlclN0YWdlLnRzXG5cbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcbnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0X2ZyYW1lO1xudW5pZm9ybSBzYW1wbGVyMkQgc2VnbWVudGF0aW9uX21hc2s7XG51bmlmb3JtIHNhbXBsZXIyRCB0aHJlc2hvbGQ7XG51bmlmb3JtIHZlYzIgdGV4ZWxfc2l6ZTtcbnVuaWZvcm0gZmxvYXQgc3RlcDtcbnVuaWZvcm0gZmxvYXQgcmFkaXVzO1xudW5pZm9ybSBmbG9hdCBvZmZzZXQ7XG51bmlmb3JtIGZsb2F0IHNpZ21hX3RleGVsO1xudW5pZm9ybSBmbG9hdCBzaWdtYV9jb2xvcjtcblxuaW4gdmVjMiBfdGV4dHVyZV9jb29yZDtcbm91dCB2ZWM0IG91dENvbG9yO1xuXG5mbG9hdCBnYXVzc2lhbihmbG9hdCB4LCBmbG9hdCBzaWdtYSkge1xuICBmbG9hdCBjb2VmZiA9IC0wLjUgLyAoc2lnbWEgKiBzaWdtYSAqIDQuMCArIDEuMGUtNik7XG4gIHJldHVybiBleHAoKHggKiB4KSAqIGNvZWZmKTtcbn1cblxudm9pZCBtYWluKCkge1xuICB2ZWMyIGNlbnRlckNvb3JkID0gX3RleHR1cmVfY29vcmQ7XG4gIHZlYzMgY2VudGVyQ29sb3IgPSB0ZXh0dXJlKGlucHV0X2ZyYW1lLCBjZW50ZXJDb29yZCkucmdiO1xuICBmbG9hdCBuZXdWYWwgPSAwLjA7XG4gIGZsb2F0IHNwYWNlV2VpZ2h0ID0gMC4wO1xuICBmbG9hdCBjb2xvcldlaWdodCA9IDAuMDtcbiAgZmxvYXQgdG90YWxXZWlnaHQgPSAwLjA7XG4gIC8vIFN1YnNhbXBsZSBrZXJuZWwgc3BhY2UuXG4gIGZvciAoZmxvYXQgaSA9IC1yYWRpdXMgKyBvZmZzZXQ7IGkgPD0gcmFkaXVzOyBpICs9IHN0ZXApIHtcbiAgICBmb3IgKGZsb2F0IGogPSAtcmFkaXVzICsgb2Zmc2V0OyBqIDw9IHJhZGl1czsgaiArPSBzdGVwKSB7XG4gICAgICB2ZWMyIHNoaWZ0ID0gdmVjMihqLCBpKSAqIHRleGVsX3NpemU7XG4gICAgICB2ZWMyIGNvb3JkID0gdmVjMihjZW50ZXJDb29yZCArIHNoaWZ0KTtcbiAgICAgIHZlYzMgZnJhbWVDb2xvciA9IHRleHR1cmUoaW5wdXRfZnJhbWUsIGNvb3JkKS5yZ2I7XG4gICAgICBmbG9hdCB0aHJlc2hvbGQgPSB0ZXh0dXJlKHRocmVzaG9sZCwgY29vcmQpLmE7XG4gICAgICBmbG9hdCBvdXRWYWwgPSB0ZXh0dXJlKHNlZ21lbnRhdGlvbl9tYXNrLCBjb29yZCkuYTtcblxuICAgICAgc3BhY2VXZWlnaHQgPSBnYXVzc2lhbihkaXN0YW5jZShjZW50ZXJDb29yZCwgY29vcmQpLCBzaWdtYV90ZXhlbCk7XG4gICAgICBjb2xvcldlaWdodCA9IGdhdXNzaWFuKGRpc3RhbmNlKGNlbnRlckNvbG9yLCBmcmFtZUNvbG9yKSwgc2lnbWFfY29sb3IpO1xuICAgICAgdG90YWxXZWlnaHQgKz0gc3BhY2VXZWlnaHQgKiBjb2xvcldlaWdodDtcbiAgICAgIG5ld1ZhbCArPSBzcGFjZVdlaWdodCAqIGNvbG9yV2VpZ2h0ICogb3V0VmFsICogdGhyZXNob2xkO1xuICAgIH1cbiAgfVxuICBuZXdWYWwgLz0gdG90YWxXZWlnaHQ7XG4gIG91dENvbG9yID0gdmVjNCh2ZWMzKDAuKSwgbmV3VmFsKTtcbn0iOwoKICB2YXIgdmVydGV4U2hhZGVyJDQgPSAiI3ZlcnNpb24gMzAwIGVzXG5pbiB2ZWMyIHBvc2l0aW9uO1xuaW4gdmVjMiB0ZXh0dXJlX2Nvb3JkO1xub3V0IHZlYzIgX3RleHR1cmVfY29vcmQ7XG52b2lkIG1haW4oKSB7XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4wLCAxLjApO1xuICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7XG59IjsKCiAgY2xhc3MgSm9pbnRCaWxhdGVyYWwgZXh0ZW5kcyBXZWJnbFBpcGVsaW5lUHJvZ3JhbSB7CiAgICBnZXRGcmFnbWVudFNoYWRlcigpIHsKICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyJDQ7CiAgICB9CiAgICBnZXRWZXJ0ZXhTaGFkZXIoKSB7CiAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXIkNDsKICAgIH0KICB9CgogIHZhciBmcmFnbWVudFNoYWRlciQzID0gInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG52YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbnVuaWZvcm0gdmVjMiBjYW52YXM7XG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXG52b2lkIG1haW4oKSB7XG4gIGludCBjb3VudCA9IDA7XG4gIGZvciAoZmxvYXQgeSA9IC0xLjsgeSA8IDIuOyB5ICs9IDEuKSB7XG4gICAgZm9yIChmbG9hdCB4ID0gLTEuOyB4IDwgMi47IHggKz0gMS4pIHtcbiAgICAgIHZlYzIgY29vcmQgPSBfdGV4dHVyZV9jb29yZCArIHZlYzIoeSwgeCkgLyBjYW52YXM7XG4gICAgICB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIGNvb3JkKTtcbiAgICAgIGlmIChjb2xvci5yID4gLjEpIHtcbiAgICAgICAgY291bnQrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGNvdW50ID4gNSkge1xuICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCk7XG4gIH1cbn1cbiI7CgogIHZhciB2ZXJ0ZXhTaGFkZXIkMyA9ICJ2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xuYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDtcblxudm9pZCBtYWluKCkge1xuICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7XG4gIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDtcbn1cbiI7CgogIGNsYXNzIE1pbmltdW1TdXJmYWNlIGV4dGVuZHMgV2ViZ2xQaXBlbGluZVByb2dyYW0gewogICAgZ2V0RnJhZ21lbnRTaGFkZXIoKSB7CiAgICAgIHJldHVybiBmcmFnbWVudFNoYWRlciQzOwogICAgfQogICAgZ2V0VmVydGV4U2hhZGVyKCkgewogICAgICByZXR1cm4gdmVydGV4U2hhZGVyJDM7CiAgICB9CiAgfQoKICB2YXIgZnJhZ21lbnRTaGFkZXIkMiA9ICJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcblxudmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkO1xuXG51bmlmb3JtIHZlYzIgY2FudmFzO1xudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcblxudm9pZCBtYWluKCkge1xuICB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIF90ZXh0dXJlX2Nvb3JkKTtcbiAgZm9yIChmbG9hdCB5ID0gLTIuOyB5IDwgMy47IHkgKz0gMS4pIHtcbiAgICBmb3IgKGZsb2F0IHggPSAtMi47IHggPCAzLjsgeCArPSAxLikge1xuICAgICAgdmVjMiBjb29yZCA9IF90ZXh0dXJlX2Nvb3JkO1xuICAgICAgY29vcmQgKz0gdmVjMih5LCB4KSAvIGNhbnZhcztcbiAgICAgIGNvbG9yICs9IHRleHR1cmUyRCh0ZXh0dXJlLCBjb29yZCkgKiAoMS4gLyA0Lik7XG4gICAgfVxuICB9XG5cbiAgZ2xfRnJhZ0NvbG9yID0gY29sb3I7XG59XG4iOwoKICB2YXIgdmVydGV4U2hhZGVyJDIgPSAidmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkO1xuXG5hdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcbmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7XG5cbnZvaWQgbWFpbigpIHtcbiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pO1xuICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7XG59XG4iOwoKICBjbGFzcyBTbW9vdGggZXh0ZW5kcyBXZWJnbFBpcGVsaW5lUHJvZ3JhbURvdWJsZUJ1ZmZlciB7CiAgICBnZXRGcmFnbWVudFNoYWRlcigpIHsKICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyJDI7CiAgICB9CiAgICBnZXRWZXJ0ZXhTaGFkZXIoKSB7CiAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXIkMjsKICAgIH0KICB9CgogIHZhciBmcmFnbWVudFNoYWRlciQxID0gInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG52YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbnVuaWZvcm0gc2FtcGxlcjJEIHRocmVzaG9sZDtcbnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0cztcblxudm9pZCBtYWluKCkge1xuICB2ZWM0IGlucHV0c19jb2xvciA9IHRleHR1cmUyRChpbnB1dHMsIF90ZXh0dXJlX2Nvb3JkKTtcbiAgdmVjNCB0aHJlc2hvbGRfY29sb3IgPSB0ZXh0dXJlMkQodGhyZXNob2xkLCBfdGV4dHVyZV9jb29yZCk7XG4gIGlmICh0aHJlc2hvbGRfY29sb3IuciA8IC4xICYmIGlucHV0c19jb2xvci5yID4gLjUpIHtcbiAgICBnbF9GcmFnQ29sb3IgPSBpbnB1dHNfY29sb3I7XG4gIH1cbn1cbiI7CgogIHZhciB2ZXJ0ZXhTaGFkZXIkMSA9ICJ2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xuYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDtcblxudm9pZCBtYWluKCkge1xuICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7XG4gIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDtcbn1cbiI7CgogIGNsYXNzIFRyYWNrIGV4dGVuZHMgV2ViZ2xQaXBlbGluZVByb2dyYW1Eb3VibGVCdWZmZXIgewogICAgZ2V0RnJhZ21lbnRTaGFkZXIoKSB7CiAgICAgIHJldHVybiBmcmFnbWVudFNoYWRlciQxOwogICAgfQogICAgZ2V0VmVydGV4U2hhZGVyKCkgewogICAgICByZXR1cm4gdmVydGV4U2hhZGVyJDE7CiAgICB9CiAgfQoKICBjbGFzcyBJbXByb3ZlU2VnbWVudGF0aW9uTWFza1BpcGVsaW5lIGV4dGVuZHMgV2ViZ2xQaXBlbGluZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMub3B0aW9ucyA9IHsKICAgICAgICBjdXJyZW50VGhyZXNob2xkTWluaW11bTogMCwKICAgICAgICBjdXJyZW50VGhyZXNob2xkTWF4aW11bTogMSwKICAgICAgICBwcmV2aW91c1RocmVzaG9sZE1pbmltdW06IDAsCiAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRNYXhpbXVtOiAxLAogICAgICAgIHRocmVzaG9sZE1pbmltdW06IDAsCiAgICAgICAgdGhyZXNob2xkTWF4aW11bTogMSwKICAgICAgICB0aHJlc2hvbGRGYWN0b3I6IDEKICAgICAgfTsKICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAgICAgY29udGV4dCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgd2lkdGgKICAgICAgfTsKICAgICAgY29uc3QgZmxpY2tlcmluZyA9IG5ldyBGbGlja2VyaW5nKGRlZmF1bHRPcHRpb25zKTsKICAgICAgY29uc3QgYmx1ciA9IG5ldyBCbHVyKHsKICAgICAgICAuLi5kZWZhdWx0T3B0aW9ucywKICAgICAgICByYWRpdXM6IDEsCiAgICAgICAgdHlwZTogQkxVUl9UWVBFLkdBVVNTSUFOCiAgICAgIH0pOwogICAgICBjb25zdCB0cmFjayA9IG5ldyBUcmFjayhkZWZhdWx0T3B0aW9ucyk7CiAgICAgIGNvbnN0IHNtb290aCA9IG5ldyBTbW9vdGgoZGVmYXVsdE9wdGlvbnMpOwogICAgICBjb25zdCBtaW5pbXVtU3VyZmFjZSA9IG5ldyBNaW5pbXVtU3VyZmFjZShkZWZhdWx0T3B0aW9ucyk7CiAgICAgIHRoaXMuam9pbnRCaWxhdGVyYWwgPSBuZXcgSm9pbnRCaWxhdGVyYWwoZGVmYXVsdE9wdGlvbnMpOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IGZsaWNrZXJpbmcsCiAgICAgICAgZ2V0VW5pZm9ybXM6ICgpID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGltYWdlX25vdzogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0SW1hZ2UpLAogICAgICAgICAgICBpbWFnZV9iZWZvcmU6IHRleHR1cmUoY29udGV4dCwgdGhpcy5wcmV2aW91c0lucHV0SW1hZ2UpLAogICAgICAgICAgICBtYXNrX25vdzogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0TWFzayksCiAgICAgICAgICAgIG1hc2tfYmVmb3JlOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMucHJldmlvdXNJbnB1dE1hc2spLAogICAgICAgICAgICBjdXJyZW50X3RocmVzaG9sZF9taW5pbXVtOiB0aGlzLm9wdGlvbnMuY3VycmVudFRocmVzaG9sZE1pbmltdW0sCiAgICAgICAgICAgIGN1cnJlbnRfdGhyZXNob2xkX21heGltdW06IHRoaXMub3B0aW9ucy5jdXJyZW50VGhyZXNob2xkTWF4aW11bSwKICAgICAgICAgICAgcHJldmlvdXNfdGhyZXNob2xkX21pbmltdW06IHRoaXMub3B0aW9ucy5wcmV2aW91c1RocmVzaG9sZE1pbmltdW0sCiAgICAgICAgICAgIHByZXZpb3VzX3RocmVzaG9sZF9tYXhpbXVtOiB0aGlzLm9wdGlvbnMucHJldmlvdXNUaHJlc2hvbGRNYXhpbXVtLAogICAgICAgICAgICB0aHJlc2hvbGRfbWluaW11bTogdGhpcy5vcHRpb25zLnRocmVzaG9sZE1pbmltdW0sCiAgICAgICAgICAgIHRocmVzaG9sZF9tYXhpbXVtOiB0aGlzLm9wdGlvbnMudGhyZXNob2xkTWF4aW11bSwKICAgICAgICAgICAgdGhyZXNob2xkX2ZhY3RvcjogdGhpcy5vcHRpb25zLnRocmVzaG9sZEZhY3RvcgogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IHRyYWNrLAogICAgICAgIGdldFVuaWZvcm1zOiAoKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpbnB1dHM6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dE1hc2spLAogICAgICAgICAgICB0aHJlc2hvbGQ6IHRleHR1cmUoY29udGV4dCwgZmxpY2tlcmluZy5vdXRwdXQpCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogbWluaW11bVN1cmZhY2UsCiAgICAgICAgZ2V0VW5pZm9ybXM6ICgpID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUoY29udGV4dCwgdHJhY2sub3V0cHV0KQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IHNtb290aCwKICAgICAgICBnZXRVbmlmb3JtczogKCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZShjb250ZXh0LCBtaW5pbXVtU3VyZmFjZS5vdXRwdXQpCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogYmx1ciwKICAgICAgICBnZXRVbmlmb3JtczogKCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZShjb250ZXh0LCBzbW9vdGgub3V0cHV0KQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IHRoaXMuam9pbnRCaWxhdGVyYWwsCiAgICAgICAgZ2V0VW5pZm9ybXM6ICgpID0+IHsKICAgICAgICAgIGNvbnN0IGtTcGFyc2l0eUZhY3RvciA9IDAuNjY7CiAgICAgICAgICBjb25zdCBvdXRwdXRXaWR0aCA9IHRoaXMuaW5wdXRJbWFnZT8ud2lkdGggPz8gMTsKICAgICAgICAgIGNvbnN0IG91dHB1dEhlaWdodCA9IHRoaXMuaW5wdXRJbWFnZT8uaGVpZ2h0ID8/IDE7CiAgICAgICAgICBjb25zdCBzZWdtZW50YXRpb25XaWR0aCA9IHRoaXMuaW5wdXRNYXNrPy53aWR0aCA/PyAxOwogICAgICAgICAgY29uc3Qgc2VnbWVudGF0aW9uSGVpZ2h0ID0gdGhpcy5pbnB1dE1hc2s/LmhlaWdodCA/PyAxOwogICAgICAgICAgY29uc3Qgc2lnbWFTcGFjZSA9IE1hdGgubWF4KAogICAgICAgICAgICBvdXRwdXRXaWR0aCAvIHNlZ21lbnRhdGlvbldpZHRoLAogICAgICAgICAgICBvdXRwdXRIZWlnaHQgLyBzZWdtZW50YXRpb25IZWlnaHQKICAgICAgICAgICk7CiAgICAgICAgICBjb25zdCBzcGFyc2l0eSA9IE1hdGgubWF4KAogICAgICAgICAgICAxLAogICAgICAgICAgICBNYXRoLnNxcnQoc2lnbWFTcGFjZSkgKiBrU3BhcnNpdHlGYWN0b3IKICAgICAgICAgICk7CiAgICAgICAgICBjb25zdCB0ZXhlbFdpZHRoID0gMSAvIG91dHB1dFdpZHRoOwogICAgICAgICAgY29uc3QgdGV4ZWxIZWlnaHQgPSAxIC8gb3V0cHV0SGVpZ2h0OwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW5wdXRfZnJhbWU6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dEltYWdlKSwKICAgICAgICAgICAgc2VnbWVudGF0aW9uX21hc2s6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dE1hc2spLAogICAgICAgICAgICB0aHJlc2hvbGQ6IHRleHR1cmUoY29udGV4dCwgYmx1ci5vdXRwdXQpLAogICAgICAgICAgICB0ZXhlbF9zaXplOiBbdGV4ZWxXaWR0aCwgdGV4ZWxIZWlnaHRdLAogICAgICAgICAgICBzdGVwOiBzcGFyc2l0eSwKICAgICAgICAgICAgcmFkaXVzOiBzaWdtYVNwYWNlLAogICAgICAgICAgICBvZmZzZXQ6IHNwYXJzaXR5ID4gMSA/IHNwYXJzaXR5ICogMC41IDogMCwKICAgICAgICAgICAgc2lnbWFfdGV4ZWw6IE1hdGgubWF4KHRleGVsV2lkdGgsIHRleGVsSGVpZ2h0KSAqIHNpZ21hU3BhY2UsCiAgICAgICAgICAgIHNpZ21hX2NvbG9yOiAwLjEKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5vdXRwdXQgPSB0aGlzLmpvaW50QmlsYXRlcmFsLm91dHB1dDsKICAgIH0KICAgIHNldERhdGEoaW1hZ2UsIG1hc2spIHsKICAgICAgdGhpcy5wcmV2aW91c0lucHV0SW1hZ2UgPSB0aGlzLmlucHV0SW1hZ2UgPyB0aGlzLmlucHV0SW1hZ2UgOiBpbWFnZTsKICAgICAgdGhpcy5wcmV2aW91c0lucHV0TWFzayA9IHRoaXMuaW5wdXRNYXNrID8gdGhpcy5pbnB1dE1hc2sgOiBtYXNrOwogICAgICB0aGlzLmlucHV0SW1hZ2UgPSBpbWFnZTsKICAgICAgdGhpcy5pbnB1dE1hc2sgPSBtYXNrOwogICAgfQogICAgc2V0T3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICB9CiAgICByZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCkgewogICAgICBzdXBlci5yZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCk7CiAgICAgIHRoaXMub3V0cHV0ID0gdGhpcy5qb2ludEJpbGF0ZXJhbC5vdXRwdXQ7CiAgICB9CiAgfQoKICBjbGFzcyBXZWJnbFByb2ZpbGVyIHsKICAgIGNvbnN0cnVjdG9yKGNvbnRleHQpIHsKICAgICAgdGhpcy5xdWVyaWVzID0gW107CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMuZXh0ZW5zaW9uID0gY29udGV4dC5nZXRFeHRlbnNpb24oCiAgICAgICAgIkVYVF9kaXNqb2ludF90aW1lcl9xdWVyeV93ZWJnbDIiCiAgICAgICk7CiAgICB9CiAgICBzdGFydCgpIHsKICAgIH0KICAgIHN0b3AoKSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZVF1ZXJ5KSB7CiAgICAgICAgdGhpcy5jb250ZXh0LmVuZFF1ZXJ5KHRoaXMuZXh0ZW5zaW9uLlRJTUVfRUxBUFNFRF9FWFQpOwogICAgICB9CiAgICB9CiAgICBwdXNoQ29udGV4dChuYW1lKSB7CiAgICAgIHRoaXMuY3JlYXRlUXVlcnkoIlBVU0giIC8qIFBVU0ggKi8sIG5hbWUpOwogICAgfQogICAgcG9wQ29udGV4dChuYW1lKSB7CiAgICAgIHRoaXMuY3JlYXRlUXVlcnkoIlBPUCIgLyogUE9QICovLCBuYW1lKTsKICAgIH0KICAgIGNyZWF0ZVF1ZXJ5KGFjdGlvbiwgbmFtZSkgewogICAgICBpZiAodGhpcy5hY3RpdmVRdWVyeSkgewogICAgICAgIHRoaXMuY29udGV4dC5lbmRRdWVyeSh0aGlzLmV4dGVuc2lvbi5USU1FX0VMQVBTRURfRVhUKTsKICAgICAgfQogICAgICB0aGlzLmFjdGl2ZVF1ZXJ5ID0gdGhpcy5jb250ZXh0LmNyZWF0ZVF1ZXJ5KCk7CiAgICAgIHRoaXMuY29udGV4dC5iZWdpblF1ZXJ5KAogICAgICAgIHRoaXMuZXh0ZW5zaW9uLlRJTUVfRUxBUFNFRF9FWFQsCiAgICAgICAgdGhpcy5hY3RpdmVRdWVyeQogICAgICApOwogICAgICB0aGlzLnF1ZXJpZXMucHVzaCh7CiAgICAgICAgbmFtZSwKICAgICAgICBhY3Rpb24sCiAgICAgICAgcXVlcnk6IHRoaXMuYWN0aXZlUXVlcnkKICAgICAgfSk7CiAgICB9CiAgICBhc3luYyBnZXRSZXNvbHZlZFF1ZXJpZXMoKSB7CiAgICAgIGNvbnN0IHF1ZXJpZXMgPSAoYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgICAgWy4uLnRoaXMucXVlcmllc10ubWFwKChxdWVyeSkgPT4gdGhpcy5yZXNvbHZlUXVlcnkocXVlcnkpKQogICAgICApKS5maWx0ZXIoKHEpID0+IHEpOwogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHF1ZXJpZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICBxdWVyaWVzW2ldLnRpbWVzdGFtcCArPSBxdWVyaWVzW2kgLSAxXS5kdXJhdGlvbiArIHF1ZXJpZXNbaSAtIDFdLnRpbWVzdGFtcDsKICAgICAgfQogICAgICByZXR1cm4gcXVlcmllczsKICAgIH0KICAgIGFzeW5jIHJlc29sdmVRdWVyeShxdWVyeSkgewogICAgICBpZiAoIWF3YWl0IHRoaXMuYXdhaXRRdWVyeUF2YWlsYWJsZShxdWVyeSkpIHsKICAgICAgICBjb25zb2xlLmxvZygiVW5hd2FpdGFibGUgcXVlcnkiLCBxdWVyeSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxldCBkaXNqb2ludCA9IHRoaXMuY29udGV4dC5nZXRQYXJhbWV0ZXIoCiAgICAgICAgdGhpcy5leHRlbnNpb24uR1BVX0RJU0pPSU5UX0VYVAogICAgICApOwogICAgICBpZiAoZGlzam9pbnQpIHsKICAgICAgICBjb25zb2xlLmxvZygiRGlzam9pbnRlZCBxdWVyeSIsIHF1ZXJ5KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5xdWVyeSwKICAgICAgICBkdXJhdGlvbjogdGhpcy5jb250ZXh0LmdldFF1ZXJ5UGFyYW1ldGVyKAogICAgICAgICAgcXVlcnkucXVlcnksCiAgICAgICAgICB0aGlzLmNvbnRleHQuUVVFUllfUkVTVUxUCiAgICAgICAgKSwKICAgICAgICB0aW1lc3RhbXA6IDAKICAgICAgfTsKICAgIH0KICAgIGFzeW5jIGF3YWl0UXVlcnlBdmFpbGFibGUocXVlcnkpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgKytpKSB7CiAgICAgICAgbGV0IGF2YWlsYWJsZSA9IHRoaXMuY29udGV4dC5nZXRRdWVyeVBhcmFtZXRlcigKICAgICAgICAgIHF1ZXJ5LnF1ZXJ5LAogICAgICAgICAgdGhpcy5jb250ZXh0LlFVRVJZX1JFU1VMVF9BVkFJTEFCTEUKICAgICAgICApOwogICAgICAgIGlmIChhdmFpbGFibGUpIHsKICAgICAgICAgIHJldHVybiBxdWVyeTsKICAgICAgICB9CiAgICAgICAgYXdhaXQgd2FpdCgyMDApOwogICAgICB9CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgfQoKICBjbGFzcyBXZWJnbFJlbmRlcmVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnByZXZpb3VzSW1hZ2VXaWR0aCA9IDA7CiAgICAgIHRoaXMucHJldmlvdXNJbWFnZUhlaWdodCA9IDA7CiAgICAgIHRoaXMucHJldmlvdXNNYXNrV2lkdGggPSBXRUJHTF9NSU5JTVVNX1RFWFRVUkVfU0laRTsKICAgICAgdGhpcy5wcmV2aW91c01hc2tIZWlnaHQgPSBXRUJHTF9NSU5JTVVNX1RFWFRVUkVfU0laRTsKICAgICAgdGhpcy5wb3N0UHJvY2Vzc2luZ0VuYWJsZWQgPSB0cnVlOwogICAgICBjb25zdCBjYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKDAsIDApOwogICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIndlYmdsMiIpOwogICAgICBpZiAoIWNvbnRleHQpIHsKICAgICAgICB0aHJvdyAiRmFpbCB0byByZXRyaWV2ZSB3ZWJnbDIgY29udGV4dCI7CiAgICAgIH0KICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMuaW1wcm92ZU1hc2sgPSBuZXcgSW1wcm92ZVNlZ21lbnRhdGlvbk1hc2tQaXBlbGluZSgKICAgICAgICB0aGlzLmNvbnRleHQsCiAgICAgICAgV0VCR0xfTUlOSU1VTV9URVhUVVJFX1NJWkUsCiAgICAgICAgV0VCR0xfTUlOSU1VTV9URVhUVVJFX1NJWkUKICAgICAgKTsKICAgIH0KICAgIHNldEZsaWNrZXJpbmdPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgdGhpcy5pbXByb3ZlTWFzay5zZXRPcHRpb25zKG9wdGlvbnMpOwogICAgfQogICAgZW5hYmxlUG9zdFByb2Nlc3NpbmcoKSB7CiAgICAgIHRoaXMucG9zdFByb2Nlc3NpbmdFbmFibGVkID0gdHJ1ZTsKICAgIH0KICAgIGRpc2FibGVQb3N0UHJvY2Vzc2luZygpIHsKICAgICAgdGhpcy5wb3N0UHJvY2Vzc2luZ0VuYWJsZWQgPSBmYWxzZTsKICAgIH0KICAgIGFzeW5jIHByb2ZpbGVXZWJnbChkdXJhdGlvbikgewogICAgICBjb25zdCBwcm9maWxlciA9IG5ldyBXZWJnbFByb2ZpbGVyKHRoaXMuY29udGV4dCk7CiAgICAgIHRoaXMucHJvZmlsZXIgPSBwcm9maWxlcjsKICAgICAgcHJvZmlsZXIuc3RhcnQoKTsKICAgICAgYXdhaXQgd2FpdChkdXJhdGlvbik7CiAgICAgIHRoaXMucHJvZmlsZXIgPSB2b2lkIDA7CiAgICAgIHByb2ZpbGVyLnN0b3AoKTsKICAgICAgcmV0dXJuIHByb2ZpbGVyLmdldFJlc29sdmVkUXVlcmllcygpOwogICAgfQogICAgYXN5bmMgcmVuZGVyKGltYWdlLCBtYXNrKSB7CiAgICAgIGlmICghdGhpcy5waXBlbGluZSkgewogICAgICAgIHRocm93ICJtaXNzaW5nIHBpcGVsaW5lIjsKICAgICAgfQogICAgICBpZiAodGhpcy5wcmV2aW91c0ltYWdlSGVpZ2h0ICE9PSBpbWFnZS5oZWlnaHQgfHwgdGhpcy5wcmV2aW91c0ltYWdlV2lkdGggIT09IGltYWdlLndpZHRoKSB7CiAgICAgICAgdGhpcy5yZXNpemVPdXRwdXQoaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucHJldmlvdXNNYXNrSGVpZ2h0ICE9PSBtYXNrLmhlaWdodCB8fCB0aGlzLnByZXZpb3VzTWFza1dpZHRoICE9PSBtYXNrLndpZHRoKSB7CiAgICAgICAgdGhpcy5pbXByb3ZlTWFzay5yZXNpemVPdXRwdXQobWFzay53aWR0aCwgbWFzay5oZWlnaHQpOwogICAgICAgIHRoaXMucHJldmlvdXNNYXNrV2lkdGggPSBtYXNrLndpZHRoOwogICAgICAgIHRoaXMucHJldmlvdXNNYXNrSGVpZ2h0ID0gbWFzay5oZWlnaHQ7CiAgICAgIH0KICAgICAgY29uc3QgcXVlcnkgPSBgcmVuZGVyZXJgOwogICAgICB0aGlzLnByb2ZpbGVyPy5wdXNoQ29udGV4dChxdWVyeSk7CiAgICAgIHRoaXMuaW1wcm92ZU1hc2suc2V0UHJvZmlsZXIodGhpcy5wcm9maWxlcik7CiAgICAgIHRoaXMucGlwZWxpbmUuc2V0UHJvZmlsZXIodGhpcy5wcm9maWxlcik7CiAgICAgIGxldCBmaW5hbE1hc2sgPSBtYXNrOwogICAgICBpZiAodGhpcy5wb3N0UHJvY2Vzc2luZ0VuYWJsZWQpIHsKICAgICAgICB0aGlzLmltcHJvdmVNYXNrLnNldERhdGEoaW1hZ2UsIG1hc2spOwogICAgICAgIHRoaXMuaW1wcm92ZU1hc2sucnVuKCk7CiAgICAgICAgZmluYWxNYXNrID0gdGhpcy5pbXByb3ZlTWFzay5vdXRwdXQ7CiAgICAgIH0KICAgICAgdGhpcy5waXBlbGluZS5zZXREYXRhKGltYWdlLCBmaW5hbE1hc2spOwogICAgICBhd2FpdCB0aGlzLnBpcGVsaW5lLnJ1bigpOwogICAgICB0aGlzLnByb2ZpbGVyPy5wb3BDb250ZXh0KHF1ZXJ5KTsKICAgICAgcmV0dXJuIHRoaXMuY2FudmFzOwogICAgfQogICAgcmVzaXplT3V0cHV0KHdpZHRoLCBoZWlnaHQpIHsKICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB3aWR0aDsKICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB0aGlzLnBpcGVsaW5lPy5yZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCk7CiAgICAgIHRoaXMucHJldmlvdXNJbWFnZVdpZHRoID0gd2lkdGg7CiAgICAgIHRoaXMucHJldmlvdXNJbWFnZUhlaWdodCA9IGhlaWdodDsKICAgIH0KICB9CgogIGNsYXNzIFdlYmdsSW1hZ2VCYWNrZ3JvdW5kUmVuZGVyZXIgZXh0ZW5kcyBXZWJnbFJlbmRlcmVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLnBpcGVsaW5lID0gbmV3IEJhY2tncm91bmRJbWFnZVBpcGVsaW5lKHRoaXMuY29udGV4dCk7CiAgICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoMCwgMCk7CiAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wyIik7CiAgICAgIGlmICghY29udGV4dCkgewogICAgICAgIHRocm93ICJGYWlsIHRvIHJldHJpZXZlIHdlYmdsIGNvbnRleHQiOwogICAgICB9CiAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlUmVzaXplckNhbnZhcyA9IGNhbnZhczsKICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXNpemVyQ29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlUmVzaXplciA9IG5ldyBSZXNpemVJbWFnZVBpcGVsaW5lKAogICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlUmVzaXplckNvbnRleHQsCiAgICAgICAgMCwKICAgICAgICAwCiAgICAgICk7CiAgICB9CiAgICBzZXRCYWNrZ3JvdW5kSW1hZ2UoaW1hZ2UpIHsKICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UgPSBpbWFnZTsKICAgICAgdGhpcy51cGRhdGVCYWNrZ3JvdW5kSW1hZ2UoKTsKICAgIH0KICAgIHVwZGF0ZUJhY2tncm91bmRJbWFnZSgpIHsKICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmNhbnZhczsKICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXNpemVyLnJlc2l6ZU91dHB1dCh3aWR0aCwgaGVpZ2h0KTsKICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXNpemVyLnNldERhdGEodGhpcy5iYWNrZ3JvdW5kSW1hZ2UpOwogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZVJlc2l6ZXIucnVuKCk7CiAgICAgIHRoaXMucGlwZWxpbmUuaW5wdXRCYWNrZ3JvdW5kSW1hZ2UgPSB0aGlzLmJhY2tncm91bmRJbWFnZVJlc2l6ZXJDYW52YXM7CiAgICB9CiAgICByZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCkgewogICAgICBzdXBlci5yZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCk7CiAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlUmVzaXplckNhbnZhcy53aWR0aCA9IHdpZHRoOwogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZVJlc2l6ZXJDYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZVJlc2l6ZXIucmVzaXplT3V0cHV0KHdpZHRoLCBoZWlnaHQpOwogICAgICB0aGlzLnVwZGF0ZUJhY2tncm91bmRJbWFnZSgpOwogICAgfQogIH0KCiAgY2xhc3MgQ2FudmFzMmRWaWRlb0JhY2tncm91bmRSZW5kZXJlciBleHRlbmRzIFdlYmdsSW1hZ2VCYWNrZ3JvdW5kUmVuZGVyZXIgewogICAgc2V0QmFja2dyb3VuZFZpZGVvKHJlYWRlcikgewogICAgICB0aGlzLmZyYW1lUmVhZGVyID0gcmVhZGVyOwogICAgfQogICAgYXN5bmMgcmVuZGVyKGltYWdlLCBtYXNrKSB7CiAgICAgIGF3YWl0IHRoaXMucmVhZE5leHRWaWRlb0ZyYW1lKCk7CiAgICAgIHJldHVybiBzdXBlci5yZW5kZXIoaW1hZ2UsIG1hc2spOwogICAgfQogICAgYXN5bmMgcmVhZE5leHRWaWRlb0ZyYW1lKCkgewogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmZyYW1lUmVhZGVyPy5yZWFkKCk7CiAgICAgIGlmIChyZXN1bHQ/LnZhbHVlKSB7CiAgICAgICAgY29uc3QgYml0bWFwID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAocmVzdWx0LnZhbHVlKTsKICAgICAgICB0aGlzLnNldEJhY2tncm91bmRJbWFnZShiaXRtYXApOwogICAgICAgIHJlc3VsdC52YWx1ZS5jbG9zZSgpOwogICAgICB9CiAgICB9CiAgfQoKICBjbGFzcyBDYW52YXMyZFJlbmRlcmVyRmFjdG9yeSB7CiAgICBibHVyQmFja2dyb3VuZChyYWRpdXMpIHsKICAgICAgcmV0dXJuIG5ldyBDYW52YXMyZEJhY2tncm91bmRSZW5kZXJlcihyYWRpdXMpOwogICAgfQogICAgYmx1clNpbGhvdWV0dGUocmFkaXVzKSB7CiAgICAgIHJldHVybiBuZXcgQ2FudmFzMmRCbHVyU2lsaG91ZXR0ZVJlbmRlcmVyKHJhZGl1cyk7CiAgICB9CiAgICBpbWFnZUJhY2tncm91bmQoKSB7CiAgICAgIHJldHVybiBuZXcgQ2FudmFzMmRJbWFnZUJhY2tncm91bmRSZW5kZXJlcigpOwogICAgfQogICAgdmlkZW9CYWNrZ3JvdW5kKCkgewogICAgICByZXR1cm4gbmV3IENhbnZhczJkVmlkZW9CYWNrZ3JvdW5kUmVuZGVyZXIoKTsKICAgIH0KICB9CgogIHZhciBmcmFnbWVudFNoYWRlciA9ICJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcblxudmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkO1xuXG51bmlmb3JtIHZlYzIgY2FudmFzO1xudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcbnVuaWZvcm0gc2FtcGxlcjJEIG1hc2s7XG5cbnZlYzQgbG9vcCgpO1xuXG52b2lkIG1haW4oKSB7IGdsX0ZyYWdDb2xvciA9IGxvb3AoKTsgfVxuIjsKCiAgdmFyIHZlcnRleFNoYWRlciA9ICJ2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xuYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDtcblxudm9pZCBtYWluKCkge1xuICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7XG4gIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDtcbn1cbiI7CgogIGNsYXNzIEJsdXJNYXNrZWQgZXh0ZW5kcyBXZWJnbFBpcGVsaW5lUHJvZ3JhbSB7CiAgICBnZXREZWZpbmVzKCkgewogICAgICByZXR1cm4geyBSQURJVVM6IHRoaXMub3B0aW9ucy5yYWRpdXMgPz8gMSB9OwogICAgfQogICAgZ2V0RnJhZ21lbnRTaGFkZXIoKSB7CiAgICAgIHJldHVybiBmcmFnbWVudFNoYWRlciArIHRoaXMuY3JlYXRlTG9vcEZ1bmN0aW9uKCk7CiAgICB9CiAgICBnZXRWZXJ0ZXhTaGFkZXIoKSB7CiAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXI7CiAgICB9CiAgICBjcmVhdGVMb29wRnVuY3Rpb24oKSB7CiAgICAgIGxldCByYWRpdXMgPSB0aGlzLm9wdGlvbnMucmFkaXVzID8/IDE7CiAgICAgIHJldHVybiBgCgogICAgICAgIHZlYzQgbG9vcCgpIHsgCiAgICAgICAgICAgIHZlYzQgcmVzdWx0ID0gdmVjNCgwLDAsMCwwKTsKICAgICAgICAgICAgZmxvYXQgZmFjdG9yU3VtID0gMC47CgogICAgICAgICAgICB2ZWMyIG5vcm1hbGl6ZWRSYWRpdXMgPSB2ZWMyKC0ke3JhZGl1c30uKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBub3JtYWxpemVkSW5jcmVtZW50ID0gdmVjMigxLikgLyBjYW52YXM7CiAgICAgICAgICAgIHZlYzIgZGlmZiA9IG5vcm1hbGl6ZWRSYWRpdXM7CiAgICAgICAgICAgIGZsb2F0IG1heExlbmd0aCA9IGxlbmd0aChub3JtYWxpemVkUmFkaXVzKTsKCiAgICAgICAgICAgIGZvcihpbnQgeT0tJHtyYWRpdXN9OyB5PCR7cmFkaXVzICsgMX07ICsreSkgewogICAgICAgICAgICAgICAgZm9yKGludCB4PS0ke3JhZGl1c307IHg8JHtyYWRpdXMgKyAxfTsgKyt4KSB7CiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFjdG9yID0gKDEuLSB0ZXh0dXJlMkQobWFzaywgX3RleHR1cmVfY29vcmQgKyBkaWZmKS5hKSAqIChtYXhMZW5ndGggLSBsZW5ndGgoZGlmZikpIC8gbWF4TGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBmYWN0b3IgKiB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQgKyBkaWZmKTsKICAgICAgICAgICAgICAgICAgICBmYWN0b3JTdW0gKz0gZmFjdG9yOwogICAgICAgICAgICAgICAgICAgIGRpZmYueCArPSBub3JtYWxpemVkSW5jcmVtZW50Lng7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkaWZmLnkgKz0gbm9ybWFsaXplZEluY3JlbWVudC55OwogICAgICAgICAgICAgICAgZGlmZi54ID0gbm9ybWFsaXplZFJhZGl1cy54OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQgLyBmYWN0b3JTdW07CiAgICAgICAgfWA7CiAgICB9CiAgfQoKICBjb25zdCBUSFJFU0hPTERfUkFESVVTX0ZBQ1RPUiA9IDEwOwogIGNvbnN0IExPV19SQURJVVNfRkFDVE9SID0gMjsKICBjb25zdCBISUdIX1JBRElVU19GQUNUT1IgPSA4OwogIGNsYXNzIEJhY2tncm91bmRCbHVyUGlwZWxpbmUgZXh0ZW5kcyBXZWJnbFRyYW5zZm9ybWVyUGlwZWxpbmUgewogICAgY29uc3RydWN0b3IoY29udGV4dCwgcmFkaXVzKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzOwogICAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHsKICAgICAgICBjb250ZXh0LAogICAgICAgIGhlaWdodDogY29udGV4dC5jYW52YXMuaGVpZ2h0LAogICAgICAgIHdpZHRoOiBjb250ZXh0LmNhbnZhcy53aWR0aAogICAgICB9OwogICAgICB0aGlzLmJsdXIgPSBuZXcgQmx1ck1hc2tlZCh7CiAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsCiAgICAgICAgcmFkaXVzLAogICAgICAgIC4uLnRoaXMuZ2V0Qmx1clRleHR1cmVTaXplKAogICAgICAgICAgY29udGV4dC5jYW52YXMud2lkdGgsCiAgICAgICAgICBjb250ZXh0LmNhbnZhcy5oZWlnaHQKICAgICAgICApCiAgICAgIH0pOwogICAgICBjb25zdCBtaXggPSBuZXcgTWl4KHsgLi4uZGVmYXVsdE9wdGlvbnMsIGRpc2FibGVGcmFtZWJ1ZmZlcjogdHJ1ZSB9KTsKICAgICAgdGhpcy5hZGRTdGVwKHsKICAgICAgICBwcm9ncmFtOiB0aGlzLmJsdXIsCiAgICAgICAgcHJldmVudFJlc2l6ZTogdHJ1ZSwKICAgICAgICBnZXRVbmlmb3JtczogKCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0SW1hZ2UpLAogICAgICAgICAgICBtYXNrOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuaW5wdXRNYXNrKQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IG1peCwKICAgICAgICBnZXRVbmlmb3JtczogKCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdGV4dHVyZShjb250ZXh0LCB0aGlzLmJsdXIub3V0cHV0KSwKICAgICAgICAgICAgZm9yZWdyb3VuZDogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0SW1hZ2UpLAogICAgICAgICAgICB0aHJlc2hvbGQ6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dE1hc2spCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICBnZXRCbHVyVGV4dHVyZVNpemUod2lkdGgsIGhlaWdodCkgewogICAgICBjb25zdCBmYWN0b3IgPSB0aGlzLnJhZGl1cyA+IFRIUkVTSE9MRF9SQURJVVNfRkFDVE9SID8gSElHSF9SQURJVVNfRkFDVE9SIDogTE9XX1JBRElVU19GQUNUT1I7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IE1hdGgubWF4KFdFQkdMX01JTklNVU1fVEVYVFVSRV9TSVpFLCB3aWR0aCAvIGZhY3RvciksCiAgICAgICAgaGVpZ2h0OiBNYXRoLm1heChXRUJHTF9NSU5JTVVNX1RFWFRVUkVfU0laRSwgaGVpZ2h0IC8gZmFjdG9yKQogICAgICB9OwogICAgfQogICAgc2V0RGF0YShpbWFnZSwgbWFzaykgewogICAgICB0aGlzLmlucHV0SW1hZ2UgPSBpbWFnZTsKICAgICAgdGhpcy5pbnB1dE1hc2sgPSBtYXNrOwogICAgfQogICAgcmVzaXplT3V0cHV0KHdpZHRoLCBoZWlnaHQpIHsKICAgICAgc3VwZXIucmVzaXplT3V0cHV0KHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBibHVyU2l6ZSA9IHRoaXMuZ2V0Qmx1clRleHR1cmVTaXplKHdpZHRoLCBoZWlnaHQpOwogICAgICB0aGlzLmJsdXIucmVzaXplT3V0cHV0KGJsdXJTaXplLndpZHRoLCBibHVyU2l6ZS5oZWlnaHQpOwogICAgfQogIH0KCiAgY2xhc3MgV2ViZ2xCbHVyQmFja2dyb3VuZFJlbmRlcmVyIGV4dGVuZHMgV2ViZ2xSZW5kZXJlciB7CiAgICBjb25zdHJ1Y3RvcihyYWRpdXMpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5waXBlbGluZSA9IG5ldyBCYWNrZ3JvdW5kQmx1clBpcGVsaW5lKHRoaXMuY29udGV4dCwgcmFkaXVzKTsKICAgICAgdGhpcy5kaXNhYmxlUG9zdFByb2Nlc3NpbmcoKTsKICAgIH0KICB9CgogIGNsYXNzIEZvcmVncm91bmRCbHVyUGlwZWxpbmUgZXh0ZW5kcyBXZWJnbFRyYW5zZm9ybWVyUGlwZWxpbmUgewogICAgY29uc3RydWN0b3IoY29udGV4dCwgcmFkaXVzKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gewogICAgICAgIGNvbnRleHQsCiAgICAgICAgaGVpZ2h0OiBjb250ZXh0LmNhbnZhcy5oZWlnaHQsCiAgICAgICAgd2lkdGg6IGNvbnRleHQuY2FudmFzLndpZHRoCiAgICAgIH07CiAgICAgIGNvbnN0IGJsdXIgPSBuZXcgQmx1cih7CiAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsCiAgICAgICAgcmFkaXVzLAogICAgICAgIHR5cGU6IEJMVVJfVFlQRS5HQVVTU0lBTgogICAgICB9KTsKICAgICAgY29uc3QgbWl4ID0gbmV3IE1peCh7IC4uLmRlZmF1bHRPcHRpb25zLCBkaXNhYmxlRnJhbWVidWZmZXI6IHRydWUgfSk7CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogYmx1ciwKICAgICAgICBnZXRVbmlmb3JtczogKCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0SW1hZ2UpCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogbWl4LAogICAgICAgIGdldFVuaWZvcm1zOiAoKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuaW5wdXRJbWFnZSksCiAgICAgICAgICAgIGZvcmVncm91bmQ6IHRleHR1cmUoY29udGV4dCwgYmx1ci5vdXRwdXQpLAogICAgICAgICAgICB0aHJlc2hvbGQ6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dE1hc2spCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICBzZXREYXRhKGltYWdlLCBtYXNrKSB7CiAgICAgIHRoaXMuaW5wdXRJbWFnZSA9IGltYWdlOwogICAgICB0aGlzLmlucHV0TWFzayA9IG1hc2s7CiAgICB9CiAgfQoKICBjbGFzcyBXZWJnbEJsdXJTaWxob3VldHRlUmVuZGVyZXIgZXh0ZW5kcyBXZWJnbFJlbmRlcmVyIHsKICAgIGNvbnN0cnVjdG9yKHJhZGl1cykgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLnBpcGVsaW5lID0gbmV3IEZvcmVncm91bmRCbHVyUGlwZWxpbmUodGhpcy5jb250ZXh0LCByYWRpdXMpOwogICAgICB0aGlzLmRpc2FibGVQb3N0UHJvY2Vzc2luZygpOwogICAgfQogIH0KCiAgY2xhc3MgQmFja2dyb3VuZFZpZGVvUGlwZWxpbmUgZXh0ZW5kcyBCYWNrZ3JvdW5kSW1hZ2VQaXBlbGluZSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgICAgdGhpcy5wcmVjaXNlTWFza0VuYWJsZWQgPSB0cnVlOwogICAgfQogICAgc2V0IHJlYWRlcihyZWFkZXIpIHsKICAgICAgdGhpcy5mcmFtZVJlYWRlciA9IHJlYWRlcjsKICAgIH0KICAgIGFzeW5jIHJ1bigpIHsKICAgICAgaWYgKHRoaXMuZnJhbWVSZWFkZXIpIHsKICAgICAgICBhd2FpdCB0aGlzLnJlYWROZXh0VmlkZW9GcmFtZSgpOwogICAgICAgIGF3YWl0IHN1cGVyLnJ1bigpOwogICAgICB9CiAgICB9CiAgICBhc3luYyByZWFkTmV4dFZpZGVvRnJhbWUoKSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZnJhbWVSZWFkZXI/LnJlYWQoKTsKICAgICAgaWYgKHJlc3VsdD8udmFsdWUpIHsKICAgICAgICB0aGlzLmlucHV0QmFja2dyb3VuZEltYWdlID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAocmVzdWx0LnZhbHVlKTsKICAgICAgICByZXN1bHQudmFsdWUuY2xvc2UoKTsKICAgICAgfQogICAgfQogIH0KCiAgY2xhc3MgV2ViZ2xWaWRlb0JhY2tncm91bmRSZW5kZXJlciBleHRlbmRzIFdlYmdsUmVuZGVyZXIgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMucGlwZWxpbmUgPSBuZXcgQmFja2dyb3VuZFZpZGVvUGlwZWxpbmUodGhpcy5jb250ZXh0KTsKICAgIH0KICAgIHNldEJhY2tncm91bmRWaWRlbyh2aWRlbykgewogICAgICB0aGlzLnBpcGVsaW5lLnJlYWRlciA9IHZpZGVvOwogICAgfQogIH0KCiAgY2xhc3MgV2ViZ2xSZW5kZXJlckZhY3RvcnkgewogICAgYmx1ckJhY2tncm91bmQocmFkaXVzKSB7CiAgICAgIHJldHVybiBuZXcgV2ViZ2xCbHVyQmFja2dyb3VuZFJlbmRlcmVyKHJhZGl1cyk7CiAgICB9CiAgICBibHVyU2lsaG91ZXR0ZShyYWRpdXMpIHsKICAgICAgcmV0dXJuIG5ldyBXZWJnbEJsdXJTaWxob3VldHRlUmVuZGVyZXIocmFkaXVzKTsKICAgIH0KICAgIGltYWdlQmFja2dyb3VuZCgpIHsKICAgICAgcmV0dXJuIG5ldyBXZWJnbEltYWdlQmFja2dyb3VuZFJlbmRlcmVyKCk7CiAgICB9CiAgICB2aWRlb0JhY2tncm91bmQoKSB7CiAgICAgIHJldHVybiBuZXcgV2ViZ2xWaWRlb0JhY2tncm91bmRSZW5kZXJlcigpOwogICAgfQogIH0KCiAgY2xhc3MgUmVuZGVyZXJGYWN0b3J5IHsKICAgIGNvbnN0cnVjdG9yKHJlbmRlcmluZ1R5cGUpIHsKICAgICAgc3dpdGNoIChyZW5kZXJpbmdUeXBlKSB7CiAgICAgICAgY2FzZSBSZW5kZXJpbmdUeXBlLkNBTlZBUzoKICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBDYW52YXMyZFJlbmRlcmVyRmFjdG9yeSgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBSZW5kZXJpbmdUeXBlLldFQkdMOgogICAgICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IFdlYmdsUmVuZGVyZXJGYWN0b3J5KCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgY29uc3QgZmVhdHVyZSA9IGdldFBlcmZvcm1hbmNlU3VwcG9ydCgpOwogICAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmVhdHVyZS5zdXBwb3J0ZWQgPyBuZXcgV2ViZ2xSZW5kZXJlckZhY3RvcnkoKSA6IG5ldyBDYW52YXMyZFJlbmRlcmVyRmFjdG9yeSgpOwogICAgICB9CiAgICB9CiAgICBibHVyQmFja2dyb3VuZChyYWRpdXMpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmJsdXJCYWNrZ3JvdW5kKHJhZGl1cyk7CiAgICB9CiAgICBibHVyU2lsaG91ZXR0ZShyYWRpdXMpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmJsdXJTaWxob3VldHRlKHJhZGl1cyk7CiAgICB9CiAgICBpbWFnZUJhY2tncm91bmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldEZhY3RvcnkoKS5pbWFnZUJhY2tncm91bmQoKTsKICAgIH0KICAgIHZpZGVvQmFja2dyb3VuZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLnZpZGVvQmFja2dyb3VuZCgpOwogICAgfQogICAgZ2V0RmFjdG9yeSgpIHsKICAgICAgaWYgKCF0aGlzLmZhY3RvcnkpIHsKICAgICAgICB0aHJvdyAiRmFjdG9yeSBpcyBub3QgaW5pdGlhbGl6ZWQiOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmZhY3Rvcnk7CiAgICB9CiAgfQoKICBjbGFzcyBCYWNrZ3JvdW5kRmlsdGVyIHsKICAgIHNldEJhY2tncm91bmRPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgY29uc3QgZmFjdG9yeSA9IG5ldyBSZW5kZXJlckZhY3Rvcnkob3B0aW9ucy5yZW5kZXJpbmdPcHRpb25zPy50eXBlKTsKICAgICAgc3dpdGNoIChvcHRpb25zLnRyYW5zZm9ybWVyVHlwZSkgewogICAgICAgIGNhc2UgIkJhY2tncm91bmRCbHVyIjoKICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBmYWN0b3J5LmJsdXJCYWNrZ3JvdW5kKAogICAgICAgICAgICB0aGlzLmdldEJsdXJTaXplKG9wdGlvbnMucmFkaXVzKQogICAgICAgICAgKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlNpbGhvdWV0dGVCbHVyIjoKICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBmYWN0b3J5LmJsdXJTaWxob3VldHRlKAogICAgICAgICAgICB0aGlzLmdldEJsdXJTaXplKG9wdGlvbnMucmFkaXVzKQogICAgICAgICAgKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlZpZGVvQmFja2dyb3VuZCI6CiAgICAgICAgICBjb25zdCB2aWRlb1JlbmRlcmVyID0gZmFjdG9yeS52aWRlb0JhY2tncm91bmQoKTsKICAgICAgICAgIGlmICh0aGlzLmJhY2tncm91bmRWaWRlbykgewogICAgICAgICAgICB2aWRlb1JlbmRlcmVyLnNldEJhY2tncm91bmRWaWRlbyh0aGlzLmJhY2tncm91bmRWaWRlbyk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gdmlkZW9SZW5kZXJlcjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlZpcnR1YWxCYWNrZ3JvdW5kIjoKICAgICAgICAgIGNvbnN0IGltYWdlUmVuZGVyZXIgPSBmYWN0b3J5LmltYWdlQmFja2dyb3VuZCgpOwogICAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZEltYWdlKSB7CiAgICAgICAgICAgIGltYWdlUmVuZGVyZXIuc2V0QmFja2dyb3VuZEltYWdlKHRoaXMuYmFja2dyb3VuZEltYWdlKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBpbWFnZVJlbmRlcmVyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRocm93IGBVbmtub3duIHJlbmRlcmluZyB0eXBlIFske29wdGlvbnMudHJhbnNmb3JtZXJUeXBlfV1gOwogICAgICB9CiAgICAgIGlmIChvcHRpb25zLnJlbmRlcmluZ09wdGlvbnM/LnR5cGUgPT09IFJlbmRlcmluZ1R5cGUuV0VCR0wpIHsKICAgICAgICBpZiAob3B0aW9ucy5yZW5kZXJpbmdPcHRpb25zLnNlbGZpZVNlZ21lbnRhdGlvblR5cGUgPT09IFdlYmdsU2VsZmllU2VnbWVudGF0aW9uVHlwZS5QUkVDSVNFKSB7CiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmVuYWJsZVBvc3RQcm9jZXNzaW5nKCk7CiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlbmRlcmluZ09wdGlvbnMuc2VsZmllU2VnbWVudGF0aW9uVHlwZSA9PT0gV2ViZ2xTZWxmaWVTZWdtZW50YXRpb25UeXBlLkZBU1QpIHsKICAgICAgICAgIHRoaXMucmVuZGVyZXIuZGlzYWJsZVBvc3RQcm9jZXNzaW5nKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBzZXRGbGlja2VyaW5nT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHRoaXMucmVuZGVyZXI/LnNldEZsaWNrZXJpbmdPcHRpb25zKG9wdGlvbnMpOwogICAgfQogICAgc2V0VmlkZW9CR1JlYWRhYmxlKHZpZGVvKSB7CiAgICAgIHRoaXMuYmFja2dyb3VuZFZpZGVvID0gdmlkZW8uZ2V0UmVhZGVyKCk7CiAgICAgIGNvbnN0IHJlbmRlcmVyQXNBbnkgPSB0aGlzLnJlbmRlcmVyOwogICAgICBpZiAocmVuZGVyZXJBc0FueT8uc2V0QmFja2dyb3VuZFZpZGVvKSB7CiAgICAgICAgcmVuZGVyZXJBc0FueS5zZXRCYWNrZ3JvdW5kVmlkZW8odGhpcy5iYWNrZ3JvdW5kVmlkZW8pOwogICAgICB9CiAgICB9CiAgICBhc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShpbWFnZSkgewogICAgICBjb25zdCByZW5kZXJlckFzQW55ID0gdGhpcy5yZW5kZXJlcjsKICAgICAgaWYgKHJlbmRlcmVyQXNBbnk/LnNldEJhY2tncm91bmRJbWFnZSkgewogICAgICAgIHJlbmRlcmVyQXNBbnkuc2V0QmFja2dyb3VuZEltYWdlKGltYWdlKTsKICAgICAgfQogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZSA9IGltYWdlOwogICAgfQogICAgYXN5bmMgcHJvY2Vzcyhmb3JlZ3JvdW5kLCBtYXNrKSB7CiAgICAgIGlmICh0aGlzLnJlbmRlcmVyKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIucmVuZGVyKGZvcmVncm91bmQsIG1hc2spOwogICAgICB9CiAgICB9CiAgICBhc3luYyByZXNpemVGb3JlZ3JvdW5kKHdpZHRoLCBoZWlnaHQpIHsKICAgIH0KICAgIGdldEJsdXJTaXplKHJhZGl1cyA9IEJsdXJSYWRpdXMuTG93KSB7CiAgICAgIHN3aXRjaCAocmFkaXVzKSB7CiAgICAgICAgY2FzZSBCbHVyUmFkaXVzLkxvdzoKICAgICAgICAgIHJldHVybiA1OwogICAgICAgIGNhc2UgQmx1clJhZGl1cy5IaWdoOgogICAgICAgICAgcmV0dXJuIDEyOwogICAgICB9CiAgICAgIHJldHVybiByYWRpdXM7CiAgICB9CiAgICBhc3luYyBwcm9maWxlKGR1cmF0aW9uKSB7CiAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyPy5wcm9maWxlV2ViZ2woZHVyYXRpb24pID8/IFtdOwogICAgfQogIH0KCiAgdmFyIGNyZWF0ZVZvbmFnZVRGTGl0ZVNpbWRNb2R1bGUgPSAoZnVuY3Rpb24oKSB7CiAgICB2YXIgX3NjcmlwdERpciA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY3VycmVudFNjcmlwdCA/IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjIDogdW5kZWZpbmVkOwogICAgCiAgICByZXR1cm4gKAogIGZ1bmN0aW9uKGNyZWF0ZVZvbmFnZVRGTGl0ZVNpbWRNb2R1bGUpIHsKICAgIGNyZWF0ZVZvbmFnZVRGTGl0ZVNpbWRNb2R1bGUgPSBjcmVhdGVWb25hZ2VURkxpdGVTaW1kTW9kdWxlIHx8IHt9OwoKICB2YXIgTW9kdWxlPXR5cGVvZiBjcmVhdGVWb25hZ2VURkxpdGVTaW1kTW9kdWxlIT09InVuZGVmaW5lZCI/Y3JlYXRlVm9uYWdlVEZMaXRlU2ltZE1vZHVsZTp7fTt2YXIgcmVhZHlQcm9taXNlUmVzb2x2ZSxyZWFkeVByb21pc2VSZWplY3Q7TW9kdWxlWyJyZWFkeSJdPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtyZWFkeVByb21pc2VSZXNvbHZlPXJlc29sdmU7cmVhZHlQcm9taXNlUmVqZWN0PXJlamVjdDt9KTt2YXIgbW9kdWxlT3ZlcnJpZGVzPXt9O3ZhciBrZXk7Zm9yKGtleSBpbiBNb2R1bGUpe2lmKE1vZHVsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKXttb2R1bGVPdmVycmlkZXNba2V5XT1Nb2R1bGVba2V5XTt9fXZhciB0aGlzUHJvZ3JhbT0iLi90aGlzLnByb2dyYW0iO3ZhciBxdWl0Xz1mdW5jdGlvbihzdGF0dXMsdG9UaHJvdyl7dGhyb3cgdG9UaHJvd307dmFyIEVOVklST05NRU5UX0lTX1dFQj10cnVlO3ZhciBzY3JpcHREaXJlY3Rvcnk9IiI7ZnVuY3Rpb24gbG9jYXRlRmlsZShwYXRoKXtpZihNb2R1bGVbImxvY2F0ZUZpbGUiXSl7cmV0dXJuIE1vZHVsZVsibG9jYXRlRmlsZSJdKHBhdGgsc2NyaXB0RGlyZWN0b3J5KX1yZXR1cm4gc2NyaXB0RGlyZWN0b3J5K3BhdGh9dmFyIHJlYWRCaW5hcnk7e2lmKHR5cGVvZiBkb2N1bWVudCE9PSJ1bmRlZmluZWQiJiZkb2N1bWVudC5jdXJyZW50U2NyaXB0KXtzY3JpcHREaXJlY3Rvcnk9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7fWlmKF9zY3JpcHREaXIpe3NjcmlwdERpcmVjdG9yeT1fc2NyaXB0RGlyO31pZihzY3JpcHREaXJlY3RvcnkuaW5kZXhPZigiYmxvYjoiKSE9PTApe3NjcmlwdERpcmVjdG9yeT1zY3JpcHREaXJlY3Rvcnkuc3Vic3RyKDAsc2NyaXB0RGlyZWN0b3J5LnJlcGxhY2UoL1s/I10uKi8sIiIpLmxhc3RJbmRleE9mKCIvIikrMSk7fWVsc2Uge3NjcmlwdERpcmVjdG9yeT0iIjt9fXZhciBvdXQ9TW9kdWxlWyJwcmludCJdfHxjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO3ZhciBlcnI9TW9kdWxlWyJwcmludEVyciJdfHxjb25zb2xlLndhcm4uYmluZChjb25zb2xlKTtmb3Ioa2V5IGluIG1vZHVsZU92ZXJyaWRlcyl7aWYobW9kdWxlT3ZlcnJpZGVzLmhhc093blByb3BlcnR5KGtleSkpe01vZHVsZVtrZXldPW1vZHVsZU92ZXJyaWRlc1trZXldO319bW9kdWxlT3ZlcnJpZGVzPW51bGw7aWYoTW9kdWxlWyJhcmd1bWVudHMiXSlNb2R1bGVbImFyZ3VtZW50cyJdO2lmKE1vZHVsZVsidGhpc1Byb2dyYW0iXSl0aGlzUHJvZ3JhbT1Nb2R1bGVbInRoaXNQcm9ncmFtIl07aWYoTW9kdWxlWyJxdWl0Il0pcXVpdF89TW9kdWxlWyJxdWl0Il07dmFyIHdhc21CaW5hcnk7aWYoTW9kdWxlWyJ3YXNtQmluYXJ5Il0pd2FzbUJpbmFyeT1Nb2R1bGVbIndhc21CaW5hcnkiXTt2YXIgbm9FeGl0UnVudGltZT1Nb2R1bGVbIm5vRXhpdFJ1bnRpbWUiXXx8dHJ1ZTtpZih0eXBlb2YgV2ViQXNzZW1ibHkhPT0ib2JqZWN0Iil7YWJvcnQoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt9dmFyIHdhc21NZW1vcnk7dmFyIEFCT1JUPWZhbHNlO3ZhciBVVEY4RGVjb2Rlcj10eXBlb2YgVGV4dERlY29kZXIhPT0idW5kZWZpbmVkIj9uZXcgVGV4dERlY29kZXIoInV0ZjgiKTp1bmRlZmluZWQ7ZnVuY3Rpb24gVVRGOEFycmF5VG9TdHJpbmcoaGVhcCxpZHgsbWF4Qnl0ZXNUb1JlYWQpe3ZhciBlbmRJZHg9aWR4K21heEJ5dGVzVG9SZWFkO3ZhciBlbmRQdHI9aWR4O3doaWxlKGhlYXBbZW5kUHRyXSYmIShlbmRQdHI+PWVuZElkeCkpKytlbmRQdHI7aWYoZW5kUHRyLWlkeD4xNiYmaGVhcC5zdWJhcnJheSYmVVRGOERlY29kZXIpe3JldHVybiBVVEY4RGVjb2Rlci5kZWNvZGUoaGVhcC5zdWJhcnJheShpZHgsZW5kUHRyKSl9ZWxzZSB7dmFyIHN0cj0iIjt3aGlsZShpZHg8ZW5kUHRyKXt2YXIgdTA9aGVhcFtpZHgrK107aWYoISh1MCYxMjgpKXtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUodTApO2NvbnRpbnVlfXZhciB1MT1oZWFwW2lkeCsrXSY2MztpZigodTAmMjI0KT09MTkyKXtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUoKHUwJjMxKTw8Nnx1MSk7Y29udGludWV9dmFyIHUyPWhlYXBbaWR4KytdJjYzO2lmKCh1MCYyNDApPT0yMjQpe3UwPSh1MCYxNSk8PDEyfHUxPDw2fHUyO31lbHNlIHt1MD0odTAmNyk8PDE4fHUxPDwxMnx1Mjw8NnxoZWFwW2lkeCsrXSY2Mzt9aWYodTA8NjU1MzYpe3N0cis9U3RyaW5nLmZyb21DaGFyQ29kZSh1MCk7fWVsc2Uge3ZhciBjaD11MC02NTUzNjtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8Y2g+PjEwLDU2MzIwfGNoJjEwMjMpO319fXJldHVybiBzdHJ9ZnVuY3Rpb24gVVRGOFRvU3RyaW5nKHB0cixtYXhCeXRlc1RvUmVhZCl7cmV0dXJuIHB0cj9VVEY4QXJyYXlUb1N0cmluZyhIRUFQVTgscHRyLG1heEJ5dGVzVG9SZWFkKToiIn1mdW5jdGlvbiB3cml0ZUFzY2lpVG9NZW1vcnkoc3RyLGJ1ZmZlcixkb250QWRkTnVsbCl7Zm9yKHZhciBpPTA7aTxzdHIubGVuZ3RoOysraSl7SEVBUDhbYnVmZmVyKys+PjBdPXN0ci5jaGFyQ29kZUF0KGkpO31pZighZG9udEFkZE51bGwpSEVBUDhbYnVmZmVyPj4wXT0wO31mdW5jdGlvbiBhbGlnblVwKHgsbXVsdGlwbGUpe2lmKHglbXVsdGlwbGU+MCl7eCs9bXVsdGlwbGUteCVtdWx0aXBsZTt9cmV0dXJuIHh9dmFyIGJ1ZmZlcixIRUFQOCxIRUFQVTgsSEVBUDMyO2Z1bmN0aW9uIHVwZGF0ZUdsb2JhbEJ1ZmZlckFuZFZpZXdzKGJ1Zil7YnVmZmVyPWJ1ZjtNb2R1bGVbIkhFQVA4Il09SEVBUDg9bmV3IEludDhBcnJheShidWYpO01vZHVsZVsiSEVBUDE2Il09bmV3IEludDE2QXJyYXkoYnVmKTtNb2R1bGVbIkhFQVAzMiJdPUhFQVAzMj1uZXcgSW50MzJBcnJheShidWYpO01vZHVsZVsiSEVBUFU4Il09SEVBUFU4PW5ldyBVaW50OEFycmF5KGJ1Zik7TW9kdWxlWyJIRUFQVTE2Il09bmV3IFVpbnQxNkFycmF5KGJ1Zik7TW9kdWxlWyJIRUFQVTMyIl09bmV3IFVpbnQzMkFycmF5KGJ1Zik7TW9kdWxlWyJIRUFQRjMyIl09bmV3IEZsb2F0MzJBcnJheShidWYpO01vZHVsZVsiSEVBUEY2NCJdPW5ldyBGbG9hdDY0QXJyYXkoYnVmKTt9TW9kdWxlWyJJTklUSUFMX01FTU9SWSJdfHwxNjc3NzIxNjt2YXIgd2FzbVRhYmxlO3ZhciBfX0FUUFJFUlVOX189W107dmFyIF9fQVRJTklUX189W107dmFyIF9fQVRQT1NUUlVOX189W107dmFyIHJ1bnRpbWVLZWVwYWxpdmVDb3VudGVyPTA7ZnVuY3Rpb24ga2VlcFJ1bnRpbWVBbGl2ZSgpe3JldHVybiBub0V4aXRSdW50aW1lfHxydW50aW1lS2VlcGFsaXZlQ291bnRlcj4wfWZ1bmN0aW9uIHByZVJ1bigpe2lmKE1vZHVsZVsicHJlUnVuIl0pe2lmKHR5cGVvZiBNb2R1bGVbInByZVJ1biJdPT0iZnVuY3Rpb24iKU1vZHVsZVsicHJlUnVuIl09W01vZHVsZVsicHJlUnVuIl1dO3doaWxlKE1vZHVsZVsicHJlUnVuIl0ubGVuZ3RoKXthZGRPblByZVJ1bihNb2R1bGVbInByZVJ1biJdLnNoaWZ0KCkpO319Y2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVFBSRVJVTl9fKTt9ZnVuY3Rpb24gaW5pdFJ1bnRpbWUoKXtjYWxsUnVudGltZUNhbGxiYWNrcyhfX0FUSU5JVF9fKTt9ZnVuY3Rpb24gcG9zdFJ1bigpe2lmKE1vZHVsZVsicG9zdFJ1biJdKXtpZih0eXBlb2YgTW9kdWxlWyJwb3N0UnVuIl09PSJmdW5jdGlvbiIpTW9kdWxlWyJwb3N0UnVuIl09W01vZHVsZVsicG9zdFJ1biJdXTt3aGlsZShNb2R1bGVbInBvc3RSdW4iXS5sZW5ndGgpe2FkZE9uUG9zdFJ1bihNb2R1bGVbInBvc3RSdW4iXS5zaGlmdCgpKTt9fWNhbGxSdW50aW1lQ2FsbGJhY2tzKF9fQVRQT1NUUlVOX18pO31mdW5jdGlvbiBhZGRPblByZVJ1bihjYil7X19BVFBSRVJVTl9fLnVuc2hpZnQoY2IpO31mdW5jdGlvbiBhZGRPbkluaXQoY2Ipe19fQVRJTklUX18udW5zaGlmdChjYik7fWZ1bmN0aW9uIGFkZE9uUG9zdFJ1bihjYil7X19BVFBPU1RSVU5fXy51bnNoaWZ0KGNiKTt9dmFyIHJ1bkRlcGVuZGVuY2llcz0wO3ZhciBkZXBlbmRlbmNpZXNGdWxmaWxsZWQ9bnVsbDtmdW5jdGlvbiBhZGRSdW5EZXBlbmRlbmN5KGlkKXtydW5EZXBlbmRlbmNpZXMrKztpZihNb2R1bGVbIm1vbml0b3JSdW5EZXBlbmRlbmNpZXMiXSl7TW9kdWxlWyJtb25pdG9yUnVuRGVwZW5kZW5jaWVzIl0ocnVuRGVwZW5kZW5jaWVzKTt9fWZ1bmN0aW9uIHJlbW92ZVJ1bkRlcGVuZGVuY3koaWQpe3J1bkRlcGVuZGVuY2llcy0tO2lmKE1vZHVsZVsibW9uaXRvclJ1bkRlcGVuZGVuY2llcyJdKXtNb2R1bGVbIm1vbml0b3JSdW5EZXBlbmRlbmNpZXMiXShydW5EZXBlbmRlbmNpZXMpO31pZihydW5EZXBlbmRlbmNpZXM9PTApe2lmKGRlcGVuZGVuY2llc0Z1bGZpbGxlZCl7dmFyIGNhbGxiYWNrPWRlcGVuZGVuY2llc0Z1bGZpbGxlZDtkZXBlbmRlbmNpZXNGdWxmaWxsZWQ9bnVsbDtjYWxsYmFjaygpO319fU1vZHVsZVsicHJlbG9hZGVkSW1hZ2VzIl09e307TW9kdWxlWyJwcmVsb2FkZWRBdWRpb3MiXT17fTtmdW5jdGlvbiBhYm9ydCh3aGF0KXt7aWYoTW9kdWxlWyJvbkFib3J0Il0pe01vZHVsZVsib25BYm9ydCJdKHdoYXQpO319d2hhdD0iQWJvcnRlZCgiK3doYXQrIikiO2Vycih3aGF0KTtBQk9SVD10cnVlO3doYXQrPSIuIEJ1aWxkIHdpdGggLXMgQVNTRVJUSU9OUz0xIGZvciBtb3JlIGluZm8uIjt2YXIgZT1uZXcgV2ViQXNzZW1ibHkuUnVudGltZUVycm9yKHdoYXQpO3JlYWR5UHJvbWlzZVJlamVjdChlKTt0aHJvdyBlfXZhciBkYXRhVVJJUHJlZml4PSJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIjtmdW5jdGlvbiBpc0RhdGFVUkkoZmlsZW5hbWUpe3JldHVybiBmaWxlbmFtZS5zdGFydHNXaXRoKGRhdGFVUklQcmVmaXgpfXZhciB3YXNtQmluYXJ5RmlsZTt3YXNtQmluYXJ5RmlsZT0idGZsaXRlLXNpbWQud2FzbSI7aWYoIWlzRGF0YVVSSSh3YXNtQmluYXJ5RmlsZSkpe3dhc21CaW5hcnlGaWxlPWxvY2F0ZUZpbGUod2FzbUJpbmFyeUZpbGUpO31mdW5jdGlvbiBnZXRCaW5hcnkoZmlsZSl7dHJ5e2lmKGZpbGU9PXdhc21CaW5hcnlGaWxlJiZ3YXNtQmluYXJ5KXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkod2FzbUJpbmFyeSl9aWYocmVhZEJpbmFyeSk7ZWxzZSB7dGhyb3cgImJvdGggYXN5bmMgYW5kIHN5bmMgZmV0Y2hpbmcgb2YgdGhlIHdhc20gZmFpbGVkIn19Y2F0Y2goZXJyKXthYm9ydChlcnIpO319ZnVuY3Rpb24gZ2V0QmluYXJ5UHJvbWlzZSgpe2lmKCF3YXNtQmluYXJ5JiYoRU5WSVJPTk1FTlRfSVNfV0VCKSl7aWYodHlwZW9mIGZldGNoPT09ImZ1bmN0aW9uIil7cmV0dXJuIGZldGNoKHdhc21CaW5hcnlGaWxlLHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7aWYoIXJlc3BvbnNlWyJvayJdKXt0aHJvdyAiZmFpbGVkIHRvIGxvYWQgd2FzbSBiaW5hcnkgZmlsZSBhdCAnIit3YXNtQmluYXJ5RmlsZSsiJyJ9cmV0dXJuIHJlc3BvbnNlWyJhcnJheUJ1ZmZlciJdKCl9KS5jYXRjaChmdW5jdGlvbigpe3JldHVybiBnZXRCaW5hcnkod2FzbUJpbmFyeUZpbGUpfSl9fXJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGdldEJpbmFyeSh3YXNtQmluYXJ5RmlsZSl9KX1mdW5jdGlvbiBjcmVhdGVXYXNtKCl7dmFyIGluZm89eyJhIjphc21MaWJyYXJ5QXJnfTtmdW5jdGlvbiByZWNlaXZlSW5zdGFuY2UoaW5zdGFuY2UsbW9kdWxlKXt2YXIgZXhwb3J0cz1pbnN0YW5jZS5leHBvcnRzO01vZHVsZVsiYXNtIl09ZXhwb3J0czt3YXNtTWVtb3J5PU1vZHVsZVsiYXNtIl1bInEiXTt1cGRhdGVHbG9iYWxCdWZmZXJBbmRWaWV3cyh3YXNtTWVtb3J5LmJ1ZmZlcik7d2FzbVRhYmxlPU1vZHVsZVsiYXNtIl1bIkUiXTthZGRPbkluaXQoTW9kdWxlWyJhc20iXVsiciJdKTtyZW1vdmVSdW5EZXBlbmRlbmN5KCk7fWFkZFJ1bkRlcGVuZGVuY3koKTtmdW5jdGlvbiByZWNlaXZlSW5zdGFudGlhdGlvblJlc3VsdChyZXN1bHQpe3JlY2VpdmVJbnN0YW5jZShyZXN1bHRbImluc3RhbmNlIl0pO31mdW5jdGlvbiBpbnN0YW50aWF0ZUFycmF5QnVmZmVyKHJlY2VpdmVyKXtyZXR1cm4gZ2V0QmluYXJ5UHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24oYmluYXJ5KXtyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYmluYXJ5LGluZm8pfSkudGhlbihmdW5jdGlvbihpbnN0YW5jZSl7cmV0dXJuIGluc3RhbmNlfSkudGhlbihyZWNlaXZlcixmdW5jdGlvbihyZWFzb24pe2VycigiZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogIityZWFzb24pO2Fib3J0KHJlYXNvbik7fSl9ZnVuY3Rpb24gaW5zdGFudGlhdGVBc3luYygpe2lmKCF3YXNtQmluYXJ5JiZ0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmc9PT0iZnVuY3Rpb24iJiYhaXNEYXRhVVJJKHdhc21CaW5hcnlGaWxlKSYmdHlwZW9mIGZldGNoPT09ImZ1bmN0aW9uIil7cmV0dXJuIGZldGNoKHdhc21CaW5hcnlGaWxlLHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7dmFyIHJlc3VsdD1XZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhyZXNwb25zZSxpbmZvKTtyZXR1cm4gcmVzdWx0LnRoZW4ocmVjZWl2ZUluc3RhbnRpYXRpb25SZXN1bHQsZnVuY3Rpb24ocmVhc29uKXtlcnIoIndhc20gc3RyZWFtaW5nIGNvbXBpbGUgZmFpbGVkOiAiK3JlYXNvbik7ZXJyKCJmYWxsaW5nIGJhY2sgdG8gQXJyYXlCdWZmZXIgaW5zdGFudGlhdGlvbiIpO3JldHVybiBpbnN0YW50aWF0ZUFycmF5QnVmZmVyKHJlY2VpdmVJbnN0YW50aWF0aW9uUmVzdWx0KX0pfSl9ZWxzZSB7cmV0dXJuIGluc3RhbnRpYXRlQXJyYXlCdWZmZXIocmVjZWl2ZUluc3RhbnRpYXRpb25SZXN1bHQpfX1pZihNb2R1bGVbImluc3RhbnRpYXRlV2FzbSJdKXt0cnl7dmFyIGV4cG9ydHM9TW9kdWxlWyJpbnN0YW50aWF0ZVdhc20iXShpbmZvLHJlY2VpdmVJbnN0YW5jZSk7cmV0dXJuIGV4cG9ydHN9Y2F0Y2goZSl7ZXJyKCJNb2R1bGUuaW5zdGFudGlhdGVXYXNtIGNhbGxiYWNrIGZhaWxlZCB3aXRoIGVycm9yOiAiK2UpO3JldHVybiBmYWxzZX19aW5zdGFudGlhdGVBc3luYygpLmNhdGNoKHJlYWR5UHJvbWlzZVJlamVjdCk7cmV0dXJuIHt9fWZ1bmN0aW9uIGNhbGxSdW50aW1lQ2FsbGJhY2tzKGNhbGxiYWNrcyl7d2hpbGUoY2FsbGJhY2tzLmxlbmd0aD4wKXt2YXIgY2FsbGJhY2s9Y2FsbGJhY2tzLnNoaWZ0KCk7aWYodHlwZW9mIGNhbGxiYWNrPT0iZnVuY3Rpb24iKXtjYWxsYmFjayhNb2R1bGUpO2NvbnRpbnVlfXZhciBmdW5jPWNhbGxiYWNrLmZ1bmM7aWYodHlwZW9mIGZ1bmM9PT0ibnVtYmVyIil7aWYoY2FsbGJhY2suYXJnPT09dW5kZWZpbmVkKXt3YXNtVGFibGUuZ2V0KGZ1bmMpKCk7fWVsc2Uge3dhc21UYWJsZS5nZXQoZnVuYykoY2FsbGJhY2suYXJnKTt9fWVsc2Uge2Z1bmMoY2FsbGJhY2suYXJnPT09dW5kZWZpbmVkP251bGw6Y2FsbGJhY2suYXJnKTt9fX1mdW5jdGlvbiBfX19hc3NlcnRfZmFpbChjb25kaXRpb24sZmlsZW5hbWUsbGluZSxmdW5jKXthYm9ydCgiQXNzZXJ0aW9uIGZhaWxlZDogIitVVEY4VG9TdHJpbmcoY29uZGl0aW9uKSsiLCBhdDogIitbZmlsZW5hbWU/VVRGOFRvU3RyaW5nKGZpbGVuYW1lKToidW5rbm93biBmaWxlbmFtZSIsbGluZSxmdW5jP1VURjhUb1N0cmluZyhmdW5jKToidW5rbm93biBmdW5jdGlvbiJdKTt9ZnVuY3Rpb24gX19kbG9wZW5fanMoZmlsZW5hbWUsZmxhZyl7YWJvcnQoIlRvIHVzZSBkbG9wZW4sIHlvdSBuZWVkIHRvIHVzZSBFbXNjcmlwdGVuJ3MgbGlua2luZyBzdXBwb3J0LCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2Vtc2NyaXB0ZW4tY29yZS9lbXNjcmlwdGVuL3dpa2kvTGlua2luZyIpO31mdW5jdGlvbiBfX2Rsc3ltX2pzKGhhbmRsZSxzeW1ib2wpe2Fib3J0KCJUbyB1c2UgZGxvcGVuLCB5b3UgbmVlZCB0byB1c2UgRW1zY3JpcHRlbidzIGxpbmtpbmcgc3VwcG9ydCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbXNjcmlwdGVuLWNvcmUvZW1zY3JpcHRlbi93aWtpL0xpbmtpbmciKTt9ZnVuY3Rpb24gX2Fib3J0KCl7YWJvcnQoIiIpO312YXIgX2Vtc2NyaXB0ZW5fZ2V0X25vdztfZW1zY3JpcHRlbl9nZXRfbm93PWZ1bmN0aW9uKCl7cmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpfTt2YXIgX2Vtc2NyaXB0ZW5fZ2V0X25vd19pc19tb25vdG9uaWM9dHJ1ZTtmdW5jdGlvbiBzZXRFcnJObyh2YWx1ZSl7SEVBUDMyW19fX2Vycm5vX2xvY2F0aW9uKCk+PjJdPXZhbHVlO3JldHVybiB2YWx1ZX1mdW5jdGlvbiBfY2xvY2tfZ2V0dGltZShjbGtfaWQsdHApe3ZhciBub3c7aWYoY2xrX2lkPT09MCl7bm93PURhdGUubm93KCk7fWVsc2UgaWYoKGNsa19pZD09PTF8fGNsa19pZD09PTQpJiZfZW1zY3JpcHRlbl9nZXRfbm93X2lzX21vbm90b25pYyl7bm93PV9lbXNjcmlwdGVuX2dldF9ub3coKTt9ZWxzZSB7c2V0RXJyTm8oMjgpO3JldHVybiAtMX1IRUFQMzJbdHA+PjJdPW5vdy8xZTN8MDtIRUFQMzJbdHArND4+Ml09bm93JTFlMyoxZTMqMWUzfDA7cmV0dXJuIDB9ZnVuY3Rpb24gX2Vtc2NyaXB0ZW5fZ2V0X2hlYXBfbWF4KCl7cmV0dXJuIDIxNDc0ODM2NDh9ZnVuY3Rpb24gX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZyhkZXN0LHNyYyxudW0pe0hFQVBVOC5jb3B5V2l0aGluKGRlc3Qsc3JjLHNyYytudW0pO31mdW5jdGlvbiBlbXNjcmlwdGVuX3JlYWxsb2NfYnVmZmVyKHNpemUpe3RyeXt3YXNtTWVtb3J5Lmdyb3coc2l6ZS1idWZmZXIuYnl0ZUxlbmd0aCs2NTUzNT4+PjE2KTt1cGRhdGVHbG9iYWxCdWZmZXJBbmRWaWV3cyh3YXNtTWVtb3J5LmJ1ZmZlcik7cmV0dXJuIDF9Y2F0Y2goZSl7fX1mdW5jdGlvbiBfZW1zY3JpcHRlbl9yZXNpemVfaGVhcChyZXF1ZXN0ZWRTaXplKXt2YXIgb2xkU2l6ZT1IRUFQVTgubGVuZ3RoO3JlcXVlc3RlZFNpemU9cmVxdWVzdGVkU2l6ZT4+PjA7dmFyIG1heEhlYXBTaXplPTIxNDc0ODM2NDg7aWYocmVxdWVzdGVkU2l6ZT5tYXhIZWFwU2l6ZSl7cmV0dXJuIGZhbHNlfWZvcih2YXIgY3V0RG93bj0xO2N1dERvd248PTQ7Y3V0RG93bio9Mil7dmFyIG92ZXJHcm93bkhlYXBTaXplPW9sZFNpemUqKDErLjIvY3V0RG93bik7b3Zlckdyb3duSGVhcFNpemU9TWF0aC5taW4ob3Zlckdyb3duSGVhcFNpemUscmVxdWVzdGVkU2l6ZSsxMDA2NjMyOTYpO3ZhciBuZXdTaXplPU1hdGgubWluKG1heEhlYXBTaXplLGFsaWduVXAoTWF0aC5tYXgocmVxdWVzdGVkU2l6ZSxvdmVyR3Jvd25IZWFwU2l6ZSksNjU1MzYpKTt2YXIgcmVwbGFjZW1lbnQ9ZW1zY3JpcHRlbl9yZWFsbG9jX2J1ZmZlcihuZXdTaXplKTtpZihyZXBsYWNlbWVudCl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX1mdW5jdGlvbiBfZW1zY3JpcHRlbl90aHJlYWRfc2xlZXAobXNlY3Mpe3ZhciBzdGFydD1fZW1zY3JpcHRlbl9nZXRfbm93KCk7d2hpbGUoX2Vtc2NyaXB0ZW5fZ2V0X25vdygpLXN0YXJ0PG1zZWNzKXt9fXZhciBFTlY9e307ZnVuY3Rpb24gZ2V0RXhlY3V0YWJsZU5hbWUoKXtyZXR1cm4gdGhpc1Byb2dyYW18fCIuL3RoaXMucHJvZ3JhbSJ9ZnVuY3Rpb24gZ2V0RW52U3RyaW5ncygpe2lmKCFnZXRFbnZTdHJpbmdzLnN0cmluZ3Mpe3ZhciBsYW5nPSh0eXBlb2YgbmF2aWdhdG9yPT09Im9iamVjdCImJm5hdmlnYXRvci5sYW5ndWFnZXMmJm5hdmlnYXRvci5sYW5ndWFnZXNbMF18fCJDIikucmVwbGFjZSgiLSIsIl8iKSsiLlVURi04Ijt2YXIgZW52PXsiVVNFUiI6IndlYl91c2VyIiwiTE9HTkFNRSI6IndlYl91c2VyIiwiUEFUSCI6Ii8iLCJQV0QiOiIvIiwiSE9NRSI6Ii9ob21lL3dlYl91c2VyIiwiTEFORyI6bGFuZywiXyI6Z2V0RXhlY3V0YWJsZU5hbWUoKX07Zm9yKHZhciB4IGluIEVOVil7aWYoRU5WW3hdPT09dW5kZWZpbmVkKWRlbGV0ZSBlbnZbeF07ZWxzZSBlbnZbeF09RU5WW3hdO312YXIgc3RyaW5ncz1bXTtmb3IodmFyIHggaW4gZW52KXtzdHJpbmdzLnB1c2goeCsiPSIrZW52W3hdKTt9Z2V0RW52U3RyaW5ncy5zdHJpbmdzPXN0cmluZ3M7fXJldHVybiBnZXRFbnZTdHJpbmdzLnN0cmluZ3N9dmFyIFNZU0NBTExTPXttYXBwaW5nczp7fSxidWZmZXJzOltudWxsLFtdLFtdXSxwcmludENoYXI6ZnVuY3Rpb24oc3RyZWFtLGN1cnIpe3ZhciBidWZmZXI9U1lTQ0FMTFMuYnVmZmVyc1tzdHJlYW1dO2lmKGN1cnI9PT0wfHxjdXJyPT09MTApeyhzdHJlYW09PT0xP291dDplcnIpKFVURjhBcnJheVRvU3RyaW5nKGJ1ZmZlciwwKSk7YnVmZmVyLmxlbmd0aD0wO31lbHNlIHtidWZmZXIucHVzaChjdXJyKTt9fSx2YXJhcmdzOnVuZGVmaW5lZCxnZXQ6ZnVuY3Rpb24oKXtTWVNDQUxMUy52YXJhcmdzKz00O3ZhciByZXQ9SEVBUDMyW1NZU0NBTExTLnZhcmFyZ3MtND4+Ml07cmV0dXJuIHJldH0sZ2V0U3RyOmZ1bmN0aW9uKHB0cil7dmFyIHJldD1VVEY4VG9TdHJpbmcocHRyKTtyZXR1cm4gcmV0fSxnZXQ2NDpmdW5jdGlvbihsb3csaGlnaCl7cmV0dXJuIGxvd319O2Z1bmN0aW9uIF9lbnZpcm9uX2dldChfX2Vudmlyb24sZW52aXJvbl9idWYpe3ZhciBidWZTaXplPTA7Z2V0RW52U3RyaW5ncygpLmZvckVhY2goZnVuY3Rpb24oc3RyaW5nLGkpe3ZhciBwdHI9ZW52aXJvbl9idWYrYnVmU2l6ZTtIRUFQMzJbX19lbnZpcm9uK2kqND4+Ml09cHRyO3dyaXRlQXNjaWlUb01lbW9yeShzdHJpbmcscHRyKTtidWZTaXplKz1zdHJpbmcubGVuZ3RoKzE7fSk7cmV0dXJuIDB9ZnVuY3Rpb24gX2Vudmlyb25fc2l6ZXNfZ2V0KHBlbnZpcm9uX2NvdW50LHBlbnZpcm9uX2J1Zl9zaXplKXt2YXIgc3RyaW5ncz1nZXRFbnZTdHJpbmdzKCk7SEVBUDMyW3BlbnZpcm9uX2NvdW50Pj4yXT1zdHJpbmdzLmxlbmd0aDt2YXIgYnVmU2l6ZT0wO3N0cmluZ3MuZm9yRWFjaChmdW5jdGlvbihzdHJpbmcpe2J1ZlNpemUrPXN0cmluZy5sZW5ndGgrMTt9KTtIRUFQMzJbcGVudmlyb25fYnVmX3NpemU+PjJdPWJ1ZlNpemU7cmV0dXJuIDB9ZnVuY3Rpb24gX2V4aXQoc3RhdHVzKXtleGl0KHN0YXR1cyk7fWZ1bmN0aW9uIF9mZF9jbG9zZShmZCl7cmV0dXJuIDB9ZnVuY3Rpb24gX2ZkX3NlZWsoZmQsb2Zmc2V0X2xvdyxvZmZzZXRfaGlnaCx3aGVuY2UsbmV3T2Zmc2V0KXt9ZnVuY3Rpb24gX2ZkX3dyaXRlKGZkLGlvdixpb3ZjbnQscG51bSl7dmFyIG51bT0wO2Zvcih2YXIgaT0wO2k8aW92Y250O2krKyl7dmFyIHB0cj1IRUFQMzJbaW92K2kqOD4+Ml07dmFyIGxlbj1IRUFQMzJbaW92KyhpKjgrNCk+PjJdO2Zvcih2YXIgaj0wO2o8bGVuO2orKyl7U1lTQ0FMTFMucHJpbnRDaGFyKGZkLEhFQVBVOFtwdHIral0pO31udW0rPWxlbjt9SEVBUDMyW3BudW0+PjJdPW51bTtyZXR1cm4gMH1mdW5jdGlvbiBnZXRSYW5kb21EZXZpY2UoKXtpZih0eXBlb2YgY3J5cHRvPT09Im9iamVjdCImJnR5cGVvZiBjcnlwdG9bImdldFJhbmRvbVZhbHVlcyJdPT09ImZ1bmN0aW9uIil7dmFyIHJhbmRvbUJ1ZmZlcj1uZXcgVWludDhBcnJheSgxKTtyZXR1cm4gZnVuY3Rpb24oKXtjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHJhbmRvbUJ1ZmZlcik7cmV0dXJuIHJhbmRvbUJ1ZmZlclswXX19ZWxzZSByZXR1cm4gZnVuY3Rpb24oKXthYm9ydCgicmFuZG9tRGV2aWNlIik7fX1mdW5jdGlvbiBfZ2V0ZW50cm9weShidWZmZXIsc2l6ZSl7aWYoIV9nZXRlbnRyb3B5LnJhbmRvbURldmljZSl7X2dldGVudHJvcHkucmFuZG9tRGV2aWNlPWdldFJhbmRvbURldmljZSgpO31mb3IodmFyIGk9MDtpPHNpemU7aSsrKXtIRUFQOFtidWZmZXIraT4+MF09X2dldGVudHJvcHkucmFuZG9tRGV2aWNlKCk7fXJldHVybiAwfXZhciBhc21MaWJyYXJ5QXJnPXsiYSI6X19fYXNzZXJ0X2ZhaWwsImUiOl9fZGxvcGVuX2pzLCJkIjpfX2Rsc3ltX2pzLCJiIjpfYWJvcnQsIm4iOl9jbG9ja19nZXR0aW1lLCJoIjpfZW1zY3JpcHRlbl9nZXRfaGVhcF9tYXgsImwiOl9lbXNjcmlwdGVuX21lbWNweV9iaWcsIm0iOl9lbXNjcmlwdGVuX3Jlc2l6ZV9oZWFwLCJwIjpfZW1zY3JpcHRlbl90aHJlYWRfc2xlZXAsImYiOl9lbnZpcm9uX2dldCwiZyI6X2Vudmlyb25fc2l6ZXNfZ2V0LCJqIjpfZXhpdCwiaSI6X2ZkX2Nsb3NlLCJrIjpfZmRfc2VlaywiYyI6X2ZkX3dyaXRlLCJvIjpfZ2V0ZW50cm9weX07Y3JlYXRlV2FzbSgpO01vZHVsZVsiX19fd2FzbV9jYWxsX2N0b3JzIl09ZnVuY3Rpb24oKXtyZXR1cm4gKE1vZHVsZVsiX19fd2FzbV9jYWxsX2N0b3JzIl09TW9kdWxlWyJhc20iXVsiciJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O01vZHVsZVsiX2dldE1vZGVsQnVmZmVyTWVtb3J5T2Zmc2V0Il09ZnVuY3Rpb24oKXtyZXR1cm4gKE1vZHVsZVsiX2dldE1vZGVsQnVmZmVyTWVtb3J5T2Zmc2V0Il09TW9kdWxlWyJhc20iXVsicyJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O01vZHVsZVsiX2dldElucHV0TWVtb3J5T2Zmc2V0Il09ZnVuY3Rpb24oKXtyZXR1cm4gKE1vZHVsZVsiX2dldElucHV0TWVtb3J5T2Zmc2V0Il09TW9kdWxlWyJhc20iXVsidCJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O01vZHVsZVsiX2dldElucHV0SGVpZ2h0Il09ZnVuY3Rpb24oKXtyZXR1cm4gKE1vZHVsZVsiX2dldElucHV0SGVpZ2h0Il09TW9kdWxlWyJhc20iXVsidSJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O01vZHVsZVsiX2dldElucHV0V2lkdGgiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfZ2V0SW5wdXRXaWR0aCJdPU1vZHVsZVsiYXNtIl1bInYiXSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtNb2R1bGVbIl9nZXRJbnB1dENoYW5uZWxDb3VudCJdPWZ1bmN0aW9uKCl7cmV0dXJuIChNb2R1bGVbIl9nZXRJbnB1dENoYW5uZWxDb3VudCJdPU1vZHVsZVsiYXNtIl1bInciXSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtNb2R1bGVbIl9nZXRPdXRwdXRNZW1vcnlPZmZzZXQiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfZ2V0T3V0cHV0TWVtb3J5T2Zmc2V0Il09TW9kdWxlWyJhc20iXVsieCJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O01vZHVsZVsiX2dldE91dHB1dEhlaWdodCJdPWZ1bmN0aW9uKCl7cmV0dXJuIChNb2R1bGVbIl9nZXRPdXRwdXRIZWlnaHQiXT1Nb2R1bGVbImFzbSJdWyJ5Il0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07TW9kdWxlWyJfZ2V0T3V0cHV0V2lkdGgiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfZ2V0T3V0cHV0V2lkdGgiXT1Nb2R1bGVbImFzbSJdWyJ6Il0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07TW9kdWxlWyJfZ2V0T3V0cHV0Q2hhbm5lbENvdW50Il09ZnVuY3Rpb24oKXtyZXR1cm4gKE1vZHVsZVsiX2dldE91dHB1dENoYW5uZWxDb3VudCJdPU1vZHVsZVsiYXNtIl1bIkEiXSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtNb2R1bGVbIl9sb2FkTW9kZWwiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfbG9hZE1vZGVsIl09TW9kdWxlWyJhc20iXVsiQiJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O01vZHVsZVsiX3J1bkluZmVyZW5jZSJdPWZ1bmN0aW9uKCl7cmV0dXJuIChNb2R1bGVbIl9ydW5JbmZlcmVuY2UiXT1Nb2R1bGVbImFzbSJdWyJDIl0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07TW9kdWxlWyJfaXNHUFVFbmFibGVkIl09ZnVuY3Rpb24oKXtyZXR1cm4gKE1vZHVsZVsiX2lzR1BVRW5hYmxlZCJdPU1vZHVsZVsiYXNtIl1bIkQiXSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTt2YXIgX19fZXJybm9fbG9jYXRpb249TW9kdWxlWyJfX19lcnJub19sb2NhdGlvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIChfX19lcnJub19sb2NhdGlvbj1Nb2R1bGVbIl9fX2Vycm5vX2xvY2F0aW9uIl09TW9kdWxlWyJhc20iXVsiRiJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3ZhciBjYWxsZWRSdW47ZnVuY3Rpb24gRXhpdFN0YXR1cyhzdGF0dXMpe3RoaXMubmFtZT0iRXhpdFN0YXR1cyI7dGhpcy5tZXNzYWdlPSJQcm9ncmFtIHRlcm1pbmF0ZWQgd2l0aCBleGl0KCIrc3RhdHVzKyIpIjt0aGlzLnN0YXR1cz1zdGF0dXM7fWRlcGVuZGVuY2llc0Z1bGZpbGxlZD1mdW5jdGlvbiBydW5DYWxsZXIoKXtpZighY2FsbGVkUnVuKXJ1bigpO2lmKCFjYWxsZWRSdW4pZGVwZW5kZW5jaWVzRnVsZmlsbGVkPXJ1bkNhbGxlcjt9O2Z1bmN0aW9uIHJ1bihhcmdzKXtpZihydW5EZXBlbmRlbmNpZXM+MCl7cmV0dXJufXByZVJ1bigpO2lmKHJ1bkRlcGVuZGVuY2llcz4wKXtyZXR1cm59ZnVuY3Rpb24gZG9SdW4oKXtpZihjYWxsZWRSdW4pcmV0dXJuO2NhbGxlZFJ1bj10cnVlO01vZHVsZVsiY2FsbGVkUnVuIl09dHJ1ZTtpZihBQk9SVClyZXR1cm47aW5pdFJ1bnRpbWUoKTtyZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7aWYoTW9kdWxlWyJvblJ1bnRpbWVJbml0aWFsaXplZCJdKU1vZHVsZVsib25SdW50aW1lSW5pdGlhbGl6ZWQiXSgpO3Bvc3RSdW4oKTt9aWYoTW9kdWxlWyJzZXRTdGF0dXMiXSl7TW9kdWxlWyJzZXRTdGF0dXMiXSgiUnVubmluZy4uLiIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7TW9kdWxlWyJzZXRTdGF0dXMiXSgiIik7fSwxKTtkb1J1bigpO30sMSk7fWVsc2Uge2RvUnVuKCk7fX1Nb2R1bGVbInJ1biJdPXJ1bjtmdW5jdGlvbiBleGl0KHN0YXR1cyxpbXBsaWNpdCl7cHJvY0V4aXQoc3RhdHVzKTt9ZnVuY3Rpb24gcHJvY0V4aXQoY29kZSl7aWYoIWtlZXBSdW50aW1lQWxpdmUoKSl7aWYoTW9kdWxlWyJvbkV4aXQiXSlNb2R1bGVbIm9uRXhpdCJdKGNvZGUpO0FCT1JUPXRydWU7fXF1aXRfKGNvZGUsbmV3IEV4aXRTdGF0dXMoY29kZSkpO31pZihNb2R1bGVbInByZUluaXQiXSl7aWYodHlwZW9mIE1vZHVsZVsicHJlSW5pdCJdPT0iZnVuY3Rpb24iKU1vZHVsZVsicHJlSW5pdCJdPVtNb2R1bGVbInByZUluaXQiXV07d2hpbGUoTW9kdWxlWyJwcmVJbml0Il0ubGVuZ3RoPjApe01vZHVsZVsicHJlSW5pdCJdLnBvcCgpKCk7fX1ydW4oKTsKCgogICAgcmV0dXJuIGNyZWF0ZVZvbmFnZVRGTGl0ZVNpbWRNb2R1bGUucmVhZHkKICB9CiAgKTsKICB9KSgpOwoKICBjbGFzcyBWb25hZ2VURkxpdGVJbmZvIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmlzU0lNRFN1cHBvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLmlzVGhyZWFkc1N1cHBvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLmlucHV0V2lkdGggPSAwOwogICAgICB0aGlzLmlucHV0SGVpZ2h0ID0gMDsKICAgICAgdGhpcy5pbnB1dENoYW5uZWxDb3VudCA9IDA7CiAgICAgIHRoaXMuaW5wdXRNZW1vcnlPZmZzZXQgPSAwOwogICAgICB0aGlzLm91dHB1dFdpZHRoID0gMDsKICAgICAgdGhpcy5vdXRwdXRIZWlnaHQgPSAwOwogICAgICB0aGlzLm91dHB1dENoYW5uZWxDb3VudCA9IDA7CiAgICAgIHRoaXMub3V0cHV0TWVtb3J5T2Zmc2V0ID0gMDsKICAgIH0KICB9CiAgY29uc3QgZGVmYXVsdFdhc21Bc3NldFVyaSA9ICJodHRwczovL2Qzb3Bxam1xenhmMDU3LmNsb3VkZnJvbnQubmV0L3ZvbmFnZS10ZW5zb3JmbG93LXdhc20vdGZsaXRlLXNpbWQtd2FzbS8xLjEuMy8iOwogIGNvbnN0IGRlZmF1bHRUZmxpdGVBc3NldFVyaVBhdGggPSAiaHR0cHM6Ly9kM29wcWptcXp4ZjA1Ny5jbG91ZGZyb250Lm5ldC9tbC9zZWxmaWVfc2VnbWVudGF0aW9uLzQuMC4wLyI7CiAgYXN5bmMgZnVuY3Rpb24gbG9hZFNlbGZpZVNlZ21lbnRhdGlvbih3YXNtVXJpID0gZGVmYXVsdFdhc21Bc3NldFVyaSwgdGZsaXRlVXJpID0gZGVmYXVsdFRmbGl0ZUFzc2V0VXJpUGF0aCkgewogICAgbGV0IHRmbGl0ZUluZm8gPSBuZXcgVm9uYWdlVEZMaXRlSW5mbygpOwogICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZFRGTGl0ZSgpIHsKICAgICAgICBjb25zdCBoZWxwZXIgPSB7CiAgICAgICAgICBsb2NhdGVGaWxlOiBmdW5jdGlvbihwYXRoKSB7CiAgICAgICAgICAgIHJldHVybiB3YXNtVXJpICsgcGF0aDsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJldHVybiBjcmVhdGVWb25hZ2VURkxpdGVTaW1kTW9kdWxlKGhlbHBlcik7CiAgICAgIH0KICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZFRGTGl0ZU1vZGVsKHRmbGl0ZSkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZTIsIHJlamVjdDIpID0+IHsKICAgICAgICAgIGNvbnN0IG5ld1NlbGVjdGVkVEZMaXRlID0gdGZsaXRlOwogICAgICAgICAgaWYgKHR5cGVvZiBuZXdTZWxlY3RlZFRGTGl0ZSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgcmV0dXJuIHJlamVjdDIoYFRGTGl0ZSBiYWNrZW5kIHVuYXZhaWxhYmxlOiB3YXNtU2ltZGApOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgbW9kZWxGaWxlTmFtZSA9ICJzZWxmaWVfc2VnbWVudGF0aW9uX2xhbmRzY2FwZSI7CiAgICAgICAgICBjb25zb2xlLmxvZygiTG9hZGluZyB0ZmxpdGUgbW9kZWw6IiwgbW9kZWxGaWxlTmFtZSk7CiAgICAgICAgICBsZXQgbW9kZWxVcmwgPSB0ZmxpdGVVcmkgKyBgJHttb2RlbEZpbGVOYW1lfS50ZmxpdGVgOwogICAgICAgICAgY29uc29sZS5sb2coIlRGTGl0ZSBtb2RlbFVybDogIiArIG1vZGVsVXJsKTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IG1vZGVsUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChtb2RlbFVybCk7CiAgICAgICAgICAgIGNvbnN0IG1vZGVsID0gYXdhaXQgbW9kZWxSZXNwb25zZS5hcnJheUJ1ZmZlcigpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiTW9kZWwgYnVmZmVyIHNpemU6IiwgbW9kZWwuYnl0ZUxlbmd0aCk7CiAgICAgICAgICAgIGNvbnN0IG1vZGVsQnVmZmVyT2Zmc2V0ID0gbmV3U2VsZWN0ZWRURkxpdGUuX2dldE1vZGVsQnVmZmVyTWVtb3J5T2Zmc2V0KCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICJNb2RlbCBidWZmZXIgbWVtb3J5IG9mZnNldDoiLAogICAgICAgICAgICAgIG1vZGVsQnVmZmVyT2Zmc2V0CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJMb2FkaW5nIG1vZGVsIGJ1ZmZlci4uLiIpOwogICAgICAgICAgICBuZXdTZWxlY3RlZFRGTGl0ZS5IRUFQVTguc2V0KAogICAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KG1vZGVsKSwKICAgICAgICAgICAgICBtb2RlbEJ1ZmZlck9mZnNldAogICAgICAgICAgICApOwogICAgICAgICAgICBjb25zdCBsb2FkTW9kZWxSZXN1bHQgPSBuZXdTZWxlY3RlZFRGTGl0ZS5fbG9hZE1vZGVsKAogICAgICAgICAgICAgIG1vZGVsLmJ5dGVMZW5ndGgKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY29uc29sZS5sb2coIkxvYWQgbW9kZWwgcmVzdWx0OiIsIGxvYWRNb2RlbFJlc3VsdCk7CiAgICAgICAgICAgIGlmIChsb2FkTW9kZWxSZXN1bHQgIT09IDApIHsKICAgICAgICAgICAgICByZWplY3QyKCJDYW5ub3QgbG9hZCBtb2RlbCIpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB0ZmxpdGVJbmZvLmlucHV0V2lkdGggPSBuZXdTZWxlY3RlZFRGTGl0ZS5fZ2V0SW5wdXRXaWR0aCgpOwogICAgICAgICAgICB0ZmxpdGVJbmZvLmlucHV0SGVpZ2h0ID0gbmV3U2VsZWN0ZWRURkxpdGUuX2dldElucHV0SGVpZ2h0KCk7CiAgICAgICAgICAgIHRmbGl0ZUluZm8uaW5wdXRDaGFubmVsQ291bnQgPSBuZXdTZWxlY3RlZFRGTGl0ZS5fZ2V0SW5wdXRDaGFubmVsQ291bnQoKTsKICAgICAgICAgICAgdGZsaXRlSW5mby5pbnB1dE1lbW9yeU9mZnNldCA9IG5ld1NlbGVjdGVkVEZMaXRlLl9nZXRJbnB1dE1lbW9yeU9mZnNldCgpOwogICAgICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgICAiSW5wdXQgbWVtb3J5IG9mZnNldDoiLAogICAgICAgICAgICAgIHRmbGl0ZUluZm8uaW5wdXRNZW1vcnlPZmZzZXQKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY29uc29sZS5sb2coIklucHV0IGhlaWdodDoiLCB0ZmxpdGVJbmZvLmlucHV0SGVpZ2h0KTsKICAgICAgICAgICAgY29uc29sZS5sb2coIklucHV0IHdpZHRoOiIsIHRmbGl0ZUluZm8uaW5wdXRXaWR0aCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICJJbnB1dCBjaGFubmVsczoiLAogICAgICAgICAgICAgIHRmbGl0ZUluZm8uaW5wdXRDaGFubmVsQ291bnQKICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGZsaXRlSW5mby5vdXRwdXRNZW1vcnlPZmZzZXQgPSBuZXdTZWxlY3RlZFRGTGl0ZS5fZ2V0T3V0cHV0TWVtb3J5T2Zmc2V0KCk7CiAgICAgICAgICAgIHRmbGl0ZUluZm8ub3V0cHV0V2lkdGggPSBuZXdTZWxlY3RlZFRGTGl0ZS5fZ2V0T3V0cHV0V2lkdGgoKTsKICAgICAgICAgICAgdGZsaXRlSW5mby5vdXRwdXRIZWlnaHQgPSBuZXdTZWxlY3RlZFRGTGl0ZS5fZ2V0T3V0cHV0SGVpZ2h0KCk7CiAgICAgICAgICAgIHRmbGl0ZUluZm8ub3V0cHV0Q2hhbm5lbENvdW50ID0gbmV3U2VsZWN0ZWRURkxpdGUuX2dldE91dHB1dENoYW5uZWxDb3VudCgpOwogICAgICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgICAiT3V0cHV0IG1lbW9yeSBvZmZzZXQ6IiwKICAgICAgICAgICAgICB0ZmxpdGVJbmZvLm91dHB1dE1lbW9yeU9mZnNldAogICAgICAgICAgICApOwogICAgICAgICAgICBjb25zb2xlLmxvZygiT3V0cHV0IGhlaWdodDoiLCB0ZmxpdGVJbmZvLm91dHB1dEhlaWdodCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJPdXRwdXQgd2lkdGg6IiwgdGZsaXRlSW5mby5vdXRwdXRXaWR0aCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICJPdXRwdXQgY2hhbm5lbHM6IiwKICAgICAgICAgICAgICB0ZmxpdGVJbmZvLm91dHB1dENoYW5uZWxDb3VudAogICAgICAgICAgICApOwogICAgICAgICAgICB0ZmxpdGVJbmZvLnNlbGVjdGVkVEZMaXRlID0gbmV3U2VsZWN0ZWRURkxpdGU7CiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICByZWplY3QyKGVycm9yKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgcmVzb2x2ZTIoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBsb2FkVEZMaXRlKCkudGhlbigodGZsaXRlKSA9PiB7CiAgICAgICAgaWYgKHRmbGl0ZSA9PT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5lcnJvcigibG9hZFRGTGl0ZSBudWxsIik7CiAgICAgICAgICB0aHJvdyAibG9hZFRGTGl0ZSBudWxsIjsKICAgICAgICB9CiAgICAgICAgbG9hZFRGTGl0ZU1vZGVsKHRmbGl0ZSkudGhlbigocmVzb2x2ZWQpID0+IHsKICAgICAgICAgIHJlc29sdmUodGZsaXRlSW5mbyk7CiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcigibG9hZFRGTGl0ZU1vZGVsIGVycm9yIik7CiAgICAgICAgICByZWplY3QoImxvYWRURkxpdGVNb2RlbCBlcnJvciIpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaCgoZSkgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoImxvYWRURkxpdGUgZXJyb3I6IiwgZSk7CiAgICAgICAgcmVqZWN0KCJsb2FkVEZMaXRlIGVycm9yOiIgKyBlKTsKICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiBwcm9taXNlOwogIH0KCiAgdmFyIHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6e307ZnVuY3Rpb24gZShlLG4pe3Q6e2Zvcih2YXIgcj1bIkNMT1NVUkVfRkxBR1MiXSxpPXQscz0wO3M8ci5sZW5ndGg7cysrKWlmKG51bGw9PShpPWlbcltzXV0pKXtyPW51bGw7YnJlYWsgdH1yPWk7fXJldHVybiBudWxsIT0oZT1yJiZyW2VdKT9lOm59ZnVuY3Rpb24gbigpe3Rocm93IEVycm9yKCJJbnZhbGlkIFVURjgiKX1mdW5jdGlvbiByKHQsZSl7cmV0dXJuIGU9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGUpLG51bGw9PXQ/ZTp0K2V9bGV0IGkscztjb25zdCBvPSJ1bmRlZmluZWQiIT10eXBlb2YgVGV4dERlY29kZXI7bGV0IGE7Y29uc3QgaD0idW5kZWZpbmVkIiE9dHlwZW9mIFRleHRFbmNvZGVyO2Z1bmN0aW9uIGModCl7aWYoaCl0PShhfHw9bmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCk7ZWxzZSB7bGV0IG49MDtjb25zdCByPW5ldyBVaW50OEFycmF5KDMqdC5sZW5ndGgpO2ZvcihsZXQgaT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgZT10LmNoYXJDb2RlQXQoaSk7aWYoZTwxMjgpcltuKytdPWU7ZWxzZSB7aWYoZTwyMDQ4KXJbbisrXT1lPj42fDE5MjtlbHNlIHtpZihlPj01NTI5NiYmZTw9NTczNDMpe2lmKGU8PTU2MzE5JiZpPHQubGVuZ3RoKXtjb25zdCBzPXQuY2hhckNvZGVBdCgrK2kpO2lmKHM+PTU2MzIwJiZzPD01NzM0Myl7ZT0xMDI0KihlLTU1Mjk2KStzLTU2MzIwKzY1NTM2LHJbbisrXT1lPj4xOHwyNDAscltuKytdPWU+PjEyJjYzfDEyOCxyW24rK109ZT4+NiY2M3wxMjgscltuKytdPTYzJmV8MTI4O2NvbnRpbnVlfWktLTt9ZT02NTUzMzt9cltuKytdPWU+PjEyfDIyNCxyW24rK109ZT4+NiY2M3wxMjg7fXJbbisrXT02MyZlfDEyODt9fXQ9bj09PXIubGVuZ3RoP3I6ci5zdWJhcnJheSgwLG4pO31yZXR1cm4gdH12YXIgdSxsPWUoNjEwNDAxMzAxLCExKSxmPWUoNjQ1MTcyMzQzLGUoMSwhMCkpLGQ9ZSg2NjAwMTQwOTQsITEpO2NvbnN0IHA9dC5uYXZpZ2F0b3I7ZnVuY3Rpb24gZyh0KXtyZXR1cm4gISFsJiYoISF1JiZ1LmJyYW5kcy5zb21lKCgoe2JyYW5kOmV9KT0+ZSYmLTEhPWUuaW5kZXhPZih0KSkpKX1mdW5jdGlvbiBtKGUpe3ZhciBuO3JldHVybiAobj10Lm5hdmlnYXRvcikmJihuPW4udXNlckFnZW50KXx8KG49IiIpLC0xIT1uLmluZGV4T2YoZSl9ZnVuY3Rpb24geSgpe3JldHVybiAhIWwmJighIXUmJnUuYnJhbmRzLmxlbmd0aD4wKX1mdW5jdGlvbiBfKCl7cmV0dXJuIHkoKT9nKCJDaHJvbWl1bSIpOihtKCJDaHJvbWUiKXx8bSgiQ3JpT1MiKSkmJiEoIXkoKSYmbSgiRWRnZSIpKXx8bSgiU2lsayIpfWZ1bmN0aW9uIHYodCl7cmV0dXJuIHZbIiAiXSh0KSx0fXU9cCYmcC51c2VyQWdlbnREYXRhfHxudWxsLHZbIiAiXT1mdW5jdGlvbigpe307dmFyIEU9IXkoKSYmKG0oIlRyaWRlbnQiKXx8bSgiTVNJRSIpKTshbSgiQW5kcm9pZCIpfHxfKCksXygpLG0oIlNhZmFyaSIpJiYoXygpfHwheSgpJiZtKCJDb2FzdCIpfHwheSgpJiZtKCJPcGVyYSIpfHwheSgpJiZtKCJFZGdlIil8fCh5KCk/ZygiTWljcm9zb2Z0IEVkZ2UiKTptKCJFZGcvIikpfHx5KCkmJmcoIk9wZXJhIikpO3ZhciB3PXt9LFQ9bnVsbDtmdW5jdGlvbiBBKHQpe3ZhciBlPXQubGVuZ3RoLG49MyplLzQ7biUzP249TWF0aC5mbG9vcihuKTotMSE9Ij0uIi5pbmRleE9mKHRbZS0xXSkmJihuPS0xIT0iPS4iLmluZGV4T2YodFtlLTJdKT9uLTI6bi0xKTt2YXIgcj1uZXcgVWludDhBcnJheShuKSxpPTA7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbihlKXtmb3IoO3I8dC5sZW5ndGg7KXt2YXIgbj10LmNoYXJBdChyKyspLGk9VFtuXTtpZihudWxsIT1pKXJldHVybiBpO2lmKCEvXltcc1x4YTBdKiQvLnRlc3QobikpdGhyb3cgRXJyb3IoIlVua25vd24gYmFzZTY0IGVuY29kaW5nIGF0IGNoYXI6ICIrbil9cmV0dXJuIGV9YigpO2Zvcih2YXIgcj0wOzspe3ZhciBpPW4oLTEpLHM9bigwKSxvPW4oNjQpLGE9big2NCk7aWYoNjQ9PT1hJiYtMT09PWkpYnJlYWs7ZShpPDwyfHM+PjQpLDY0IT1vJiYoZShzPDw0JjI0MHxvPj4yKSw2NCE9YSYmZShvPDw2JjE5MnxhKSk7fX0odCwoZnVuY3Rpb24odCl7cltpKytdPXQ7fSkpLGkhPT1uP3Iuc3ViYXJyYXkoMCxpKTpyfWZ1bmN0aW9uIGIoKXtpZighVCl7VD17fTtmb3IodmFyIHQ9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ii5zcGxpdCgiIiksZT1bIisvPSIsIisvIiwiLV89IiwiLV8uIiwiLV8iXSxuPTA7bjw1O24rKyl7dmFyIHI9dC5jb25jYXQoZVtuXS5zcGxpdCgiIikpO3dbbl09cjtmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIHM9cltpXTt2b2lkIDA9PT1UW3NdJiYoVFtzXT1pKTt9fX19dmFyIGs9InVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OEFycmF5LFM9IUUmJiJmdW5jdGlvbiI9PXR5cGVvZiBidG9hO2Z1bmN0aW9uIHgodCl7aWYoIVMpe3ZhciBlO3ZvaWQgMD09PWUmJihlPTApLGIoKSxlPXdbZV07dmFyIG49QXJyYXkoTWF0aC5mbG9vcih0Lmxlbmd0aC8zKSkscj1lWzY0XXx8IiI7bGV0IGg9MCxjPTA7Zm9yKDtoPHQubGVuZ3RoLTI7aCs9Myl7dmFyIGk9dFtoXSxzPXRbaCsxXSxvPXRbaCsyXSxhPWVbaT4+Ml07aT1lWygzJmkpPDw0fHM+PjRdLHM9ZVsoMTUmcyk8PDJ8bz4+Nl0sbz1lWzYzJm9dLG5bYysrXT1hK2krcytvO31zd2l0Y2goYT0wLG89cix0Lmxlbmd0aC1oKXtjYXNlIDI6bz1lWygxNSYoYT10W2grMV0pKTw8Ml18fHI7Y2FzZSAxOnQ9dFtoXSxuW2NdPWVbdD4+Ml0rZVsoMyZ0KTw8NHxhPj40XStvK3I7fXJldHVybiBuLmpvaW4oIiIpfWZvcihlPSIiLG49MCxyPXQubGVuZ3RoLTEwMjQwO248cjspZSs9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHQuc3ViYXJyYXkobixuKz0xMDI0MCkpO3JldHVybiBlKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbj90LnN1YmFycmF5KG4pOnQpLGJ0b2EoZSl9Y29uc3QgTD0vWy1fLl0vZyxGPXsiLSI6IisiLF86Ii8iLCIuIjoiPSJ9O2Z1bmN0aW9uIFIodCl7cmV0dXJuIEZbdF18fCIifWZ1bmN0aW9uIE0odCl7aWYoIVMpcmV0dXJuIEEodCk7TC50ZXN0KHQpJiYodD10LnJlcGxhY2UoTCxSKSksdD1hdG9iKHQpO2NvbnN0IGU9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKWVbbl09dC5jaGFyQ29kZUF0KG4pO3JldHVybiBlfWZ1bmN0aW9uIEkodCl7cmV0dXJuIGsmJm51bGwhPXQmJnQgaW5zdGFuY2VvZiBVaW50OEFycmF5fXZhciBQPXt9O2xldCBPO2Z1bmN0aW9uIEModCl7aWYodCE9PVApdGhyb3cgRXJyb3IoImlsbGVnYWwgZXh0ZXJuYWwgY2FsbGVyIil9ZnVuY3Rpb24gVSgpe3JldHVybiBPfHw9bmV3IEQobnVsbCxQKX1mdW5jdGlvbiBOKHQpe0MoUCk7dmFyIGU9dC5nO3JldHVybiBudWxsPT0oZT1udWxsPT1lfHxJKGUpP2U6InN0cmluZyI9PXR5cGVvZiBlP00oZSk6bnVsbCk/ZTp0Lmc9ZX12YXIgRD1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUpe2lmKEMoZSksdGhpcy5nPXQsbnVsbCE9dCYmMD09PXQubGVuZ3RoKXRocm93IEVycm9yKCJCeXRlU3RyaW5nIHNob3VsZCBiZSBjb25zdHJ1Y3RlZCB3aXRoIG5vbi1lbXB0eSB2YWx1ZXMiKX1oKCl7cmV0dXJuIG5ldyBVaW50OEFycmF5KE4odGhpcyl8fDApfX07ZnVuY3Rpb24gQih0LGUpe3QuX19jbG9zdXJlX19lcnJvcl9fY29udGV4dF9fOTg0MzgyfHwodC5fX2Nsb3N1cmVfX2Vycm9yX19jb250ZXh0X185ODQzODI9e30pLHQuX19jbG9zdXJlX19lcnJvcl9fY29udGV4dF9fOTg0MzgyLnNldmVyaXR5PWU7fWxldCBHO2Z1bmN0aW9uIGooKXtjb25zdCBlPUVycm9yKCk7QihlLCJpbmNpZGVudCIpLGZ1bmN0aW9uKGUpe3Quc2V0VGltZW91dCgoKCk9Pnt0aHJvdyBlfSksMCk7fShlKTt9ZnVuY3Rpb24gVih0KXtyZXR1cm4gQih0PUVycm9yKHQpLCJ3YXJuaW5nIiksdH1mdW5jdGlvbiBYKCl7cmV0dXJuICJmdW5jdGlvbiI9PXR5cGVvZiBCaWdJbnR9ZnVuY3Rpb24gSCh0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCl9dmFyIFc9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2woKTtmdW5jdGlvbiB6KHQpe3JldHVybiAiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbCgpP1N5bWJvbCgpOnR9dmFyIEs9eigpLFk9eigiMGRpIiksJD16KCIyZXgiKSxxPXooIjFvYSIpLEo9eigiMGRnIiksWj1XPyh0LGUpPT57dFtLXXw9ZTt9Oih0LGUpPT57dm9pZCAwIT09dC5nP3QuZ3w9ZTpPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LHtnOnt2YWx1ZTplLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCxlbnVtZXJhYmxlOiExfX0pO30sUT1XPyh0LGUpPT57dFtLXSY9fmU7fToodCxlKT0+e3ZvaWQgMCE9PXQuZyYmKHQuZyY9fmUpO30sdHQ9Vz90PT4wfHRbS106dD0+MHx0LmcsZXQ9Vz90PT50W0tdOnQ9PnQuZyxudD1XPyh0LGUpPT57dFtLXT1lO306KHQsZSk9Pnt2b2lkIDAhPT10Lmc/dC5nPWU6T2JqZWN0LmRlZmluZVByb3BlcnRpZXModCx7Zzp7dmFsdWU6ZSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsZW51bWVyYWJsZTohMX19KTt9O2Z1bmN0aW9uIHJ0KHQpe3JldHVybiBaKHQsMzQpLHR9ZnVuY3Rpb24gaXQodCxlKXtudChlLC0xNDU5MSYoMHx0KSk7fWZ1bmN0aW9uIHN0KHQsZSl7bnQoZSwtMTQ1NTcmKDM0fHQpKTt9dmFyIG90LGF0PXt9LGh0PXt9O2Z1bmN0aW9uIGN0KHQpe3JldHVybiAhKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fHQuSmEhPT1odCl9ZnVuY3Rpb24gdXQodCl7cmV0dXJuIG51bGwhPT10JiYib2JqZWN0Ij09dHlwZW9mIHQmJiFBcnJheS5pc0FycmF5KHQpJiZ0LmNvbnN0cnVjdG9yPT09T2JqZWN0fWZ1bmN0aW9uIGx0KHQsZSxuKXtpZihudWxsIT10KWlmKCJzdHJpbmciPT10eXBlb2YgdCl0PXQ/bmV3IEQodCxQKTpVKCk7ZWxzZSBpZih0LmNvbnN0cnVjdG9yIT09RClpZihJKHQpKXQ9dC5sZW5ndGg/bmV3IEQobj90Om5ldyBVaW50OEFycmF5KHQpLFApOlUoKTtlbHNlIHtpZighZSl0aHJvdyBFcnJvcigpO3Q9dm9pZCAwO31yZXR1cm4gdH1mdW5jdGlvbiBmdCh0KXtyZXR1cm4gISghQXJyYXkuaXNBcnJheSh0KXx8dC5sZW5ndGgpJiYhISgxJnR0KHQpKX1jb25zdCBkdD1bXTtmdW5jdGlvbiBwdCh0KXtpZigyJnQpdGhyb3cgRXJyb3IoKX1udChkdCw1NSksb3Q9T2JqZWN0LmZyZWV6ZShkdCk7Y2xhc3MgZ3R7Y29uc3RydWN0b3IodCxlLG4pe3RoaXMubD0wLHRoaXMuZz10LHRoaXMuaD1lLHRoaXMubT1uO31uZXh0KCl7aWYodGhpcy5sPHRoaXMuZy5sZW5ndGgpe2NvbnN0IHQ9dGhpcy5nW3RoaXMubCsrXTtyZXR1cm4ge2RvbmU6ITEsdmFsdWU6dGhpcy5oP3RoaXMuaC5jYWxsKHRoaXMubSx0KTp0fX1yZXR1cm4ge2RvbmU6ITAsdmFsdWU6dm9pZCAwfX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiBuZXcgZ3QodGhpcy5nLHRoaXMuaCx0aGlzLm0pfX1sZXQgbXQseXQ7ZnVuY3Rpb24gX3QodCxlKXsoZT1tdD9lW210XTp2b2lkIDApJiYodFttdF09SChlKSk7fXZhciB2dD1PYmplY3QuZnJlZXplKHt9KTt2YXIgRXQ9T2JqZWN0LmZyZWV6ZSh7fSk7Y29uc3Qgd3Q9ImZ1bmN0aW9uIj09dHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNsaWNlO2xldCBUdCxBdD0wLGJ0PTA7ZnVuY3Rpb24ga3QodCl7Y29uc3QgZT10Pj4+MDtBdD1lLGJ0PSh0LWUpLzQyOTQ5NjcyOTY+Pj4wO31mdW5jdGlvbiBTdCh0KXtpZih0PDApe2t0KC10KTtjb25zdFtlLG5dPVB0KEF0LGJ0KTtBdD1lPj4+MCxidD1uPj4+MDt9ZWxzZSBrdCh0KTt9ZnVuY3Rpb24geHQodCl7Y29uc3QgZT1UdHx8PW5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoOCkpO2Uuc2V0RmxvYXQzMigwLCt0LCEwKSxidD0wLEF0PWUuZ2V0VWludDMyKDAsITApO31mdW5jdGlvbiBMdCh0LGUpe3JldHVybiA0Mjk0OTY3Mjk2KmUrKHQ+Pj4wKX1mdW5jdGlvbiBGdCh0LGUpe2NvbnN0IG49MjE0NzQ4MzY0OCZlO3JldHVybiBuJiYoZT1+ZT4+PjAsMD09KHQ9MSt+dD4+PjApJiYoZT1lKzE+Pj4wKSksdD1MdCh0LGUpLG4/LXQ6dH1mdW5jdGlvbiBSdCh0LGUpe2lmKHQ+Pj49MCwoZT4+Pj0wKTw9MjA5NzE1MSl2YXIgbj0iIisoNDI5NDk2NzI5NiplK3QpO2Vsc2UgWCgpP249IiIrKEJpZ0ludChlKTw8QmlnSW50KDMyKXxCaWdJbnQodCkpOih0PSgxNjc3NzIxNSZ0KSs2Nzc3MjE2KihuPTE2Nzc3MjE1Jih0Pj4+MjR8ZTw8OCkpKzY3MTA2NTYqKGU9ZT4+MTYmNjU1MzUpLG4rPTgxNDc0OTcqZSxlKj0yLHQ+PTFlNyYmKG4rPXQvMWU3Pj4+MCx0JT0xZTcpLG4+PTFlNyYmKGUrPW4vMWU3Pj4+MCxuJT0xZTcpLG49ZStNdChuKStNdCh0KSk7cmV0dXJuIG59ZnVuY3Rpb24gTXQodCl7cmV0dXJuIHQ9U3RyaW5nKHQpLCIwMDAwMDAwIi5zbGljZSh0Lmxlbmd0aCkrdH1mdW5jdGlvbiBJdCh0KXtpZih0Lmxlbmd0aDwxNilTdChOdW1iZXIodCkpO2Vsc2UgaWYoWCgpKXQ9QmlnSW50KHQpLEF0PU51bWJlcih0JkJpZ0ludCg0Mjk0OTY3Mjk1KSk+Pj4wLGJ0PU51bWJlcih0Pj5CaWdJbnQoMzIpJkJpZ0ludCg0Mjk0OTY3Mjk1KSk7ZWxzZSB7Y29uc3QgZT0rKCItIj09PXRbMF0pO2J0PUF0PTA7Y29uc3Qgbj10Lmxlbmd0aDtmb3IobGV0IHI9ZSxpPShuLWUpJTYrZTtpPD1uO3I9aSxpKz02KXtjb25zdCBlPU51bWJlcih0LnNsaWNlKHIsaSkpO2J0Kj0xZTYsQXQ9MWU2KkF0K2UsQXQ+PTQyOTQ5NjcyOTYmJihidCs9TWF0aC50cnVuYyhBdC80Mjk0OTY3Mjk2KSxidD4+Pj0wLEF0Pj4+PTApO31pZihlKXtjb25zdFt0LGVdPVB0KEF0LGJ0KTtBdD10LGJ0PWU7fX19ZnVuY3Rpb24gUHQodCxlKXtyZXR1cm4gZT1+ZSx0P3Q9MSt+dDplKz0xLFt0LGVdfWZ1bmN0aW9uIE90KHQpe3JldHVybiB0LlFhPSEwLHR9dmFyIEN0PU90KCh0PT4ibnVtYmVyIj09dHlwZW9mIHQpKSxVdD1PdCgodD0+InN0cmluZyI9PXR5cGVvZiB0KSksTnQ9T3QoKHQ9PiJib29sZWFuIj09dHlwZW9mIHQpKSxEdD0iZnVuY3Rpb24iPT10eXBlb2YgdC5CaWdJbnQmJiJiaWdpbnQiPT10eXBlb2YgdC5CaWdJbnQoMCksQnQ9T3QoKHQ9PkR0P3Q+PWp0JiZ0PD1YdDoiLSI9PT10WzBdP0h0KHQsR3QpOkh0KHQsVnQpKSk7Y29uc3QgR3Q9TnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIudG9TdHJpbmcoKSxqdD1EdD9CaWdJbnQoTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpOnZvaWQgMCxWdD1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUi50b1N0cmluZygpLFh0PUR0P0JpZ0ludChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUik6dm9pZCAwO2Z1bmN0aW9uIEh0KHQsZSl7aWYodC5sZW5ndGg+ZS5sZW5ndGgpcmV0dXJuICExO2lmKHQubGVuZ3RoPGUubGVuZ3RofHx0PT09ZSlyZXR1cm4gITA7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IHI9dFtuXSxpPWVbbl07aWYocj5pKXJldHVybiAhMTtpZihyPGkpcmV0dXJuICEwfX1mdW5jdGlvbiBXdCh0KXtyZXR1cm4gbnVsbD09dHx8Im51bWJlciI9PXR5cGVvZiB0P3Q6Ik5hTiI9PT10fHwiSW5maW5pdHkiPT09dHx8Ii1JbmZpbml0eSI9PT10P051bWJlcih0KTp2b2lkIDB9ZnVuY3Rpb24genQodCl7cmV0dXJuIG51bGw9PXR8fCJib29sZWFuIj09dHlwZW9mIHQ/dDoibnVtYmVyIj09dHlwZW9mIHQ/ISF0OnZvaWQgMH1jb25zdCBLdD0vXi0/KFsxLTldWzAtOV0qfDApKFwuWzAtOV0rKT8kLztmdW5jdGlvbiBZdCh0KXtjb25zdCBlPXR5cGVvZiB0O3N3aXRjaChlKXtjYXNlImJpZ2ludCI6cmV0dXJuICEwO2Nhc2UibnVtYmVyIjpyZXR1cm4gTnVtYmVyLmlzRmluaXRlKHQpfXJldHVybiAic3RyaW5nIj09PWUmJkt0LnRlc3QodCl9ZnVuY3Rpb24gJHQodCl7aWYobnVsbD09dClyZXR1cm4gdDtpZigic3RyaW5nIj09dHlwZW9mIHQpe2lmKCF0KXJldHVybjt0PSt0O31yZXR1cm4gIm51bWJlciI9PXR5cGVvZiB0JiZOdW1iZXIuaXNGaW5pdGUodCk/MHx0OnZvaWQgMH1mdW5jdGlvbiBxdCh0KXtpZihudWxsPT10KXJldHVybiB0O2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoIXQpcmV0dXJuO3Q9K3Q7fXJldHVybiAibnVtYmVyIj09dHlwZW9mIHQmJk51bWJlci5pc0Zpbml0ZSh0KT90Pj4+MDp2b2lkIDB9ZnVuY3Rpb24gSnQodCl7cmV0dXJuICItIiE9PXRbMF0mJih0Lmxlbmd0aDwyMHx8MjA9PT10Lmxlbmd0aCYmTnVtYmVyKHQuc3Vic3RyaW5nKDAsNikpPDE4NDQ2Nyl9ZnVuY3Rpb24gWnQodCl7cmV0dXJuIHQ9TWF0aC50cnVuYyh0KSxOdW1iZXIuaXNTYWZlSW50ZWdlcih0KXx8KFN0KHQpLHQ9RnQoQXQsYnQpKSx0fWZ1bmN0aW9uIFF0KHQpe3ZhciBlPU1hdGgudHJ1bmMoTnVtYmVyKHQpKTtpZihOdW1iZXIuaXNTYWZlSW50ZWdlcihlKSlyZXR1cm4gU3RyaW5nKGUpO2lmKC0xIT09KGU9dC5pbmRleE9mKCIuIikpJiYodD10LnN1YnN0cmluZygwLGUpKSwhKCItIj09PXRbMF0/dC5sZW5ndGg8MjB8fDIwPT09dC5sZW5ndGgmJk51bWJlcih0LnN1YnN0cmluZygwLDcpKT4tOTIyMzM3OnQubGVuZ3RoPDE5fHwxOT09PXQubGVuZ3RoJiZOdW1iZXIodC5zdWJzdHJpbmcoMCw2KSk8OTIyMzM3KSlpZihJdCh0KSx0PUF0LDIxNDc0ODM2NDgmKGU9YnQpKWlmKFgoKSl0PSIiKyhCaWdJbnQoMHxlKTw8QmlnSW50KDMyKXxCaWdJbnQodD4+PjApKTtlbHNlIHtjb25zdFtuLHJdPVB0KHQsZSk7dD0iLSIrUnQobixyKTt9ZWxzZSB0PVJ0KHQsZSk7cmV0dXJuIHR9ZnVuY3Rpb24gdGUodCl7cmV0dXJuIG51bGw9PXQ/dDoiYmlnaW50Ij09dHlwZW9mIHQ/KEJ0KHQpP3Q9TnVtYmVyKHQpOih0PUJpZ0ludC5hc0ludE4oNjQsdCksdD1CdCh0KT9OdW1iZXIodCk6U3RyaW5nKHQpKSx0KTpZdCh0KT8ibnVtYmVyIj09dHlwZW9mIHQ/WnQodCk6UXQodCk6dm9pZCAwfWZ1bmN0aW9uIGVlKHQpe2lmKG51bGw9PXQpcmV0dXJuIHQ7dmFyIGU9dHlwZW9mIHQ7aWYoImJpZ2ludCI9PT1lKXJldHVybiBTdHJpbmcoQmlnSW50LmFzVWludE4oNjQsdCkpO2lmKFl0KHQpKXtpZigic3RyaW5nIj09PWUpcmV0dXJuIGU9TWF0aC50cnVuYyhOdW1iZXIodCkpLE51bWJlci5pc1NhZmVJbnRlZ2VyKGUpJiZlPj0wP3Q9U3RyaW5nKGUpOigtMSE9PShlPXQuaW5kZXhPZigiLiIpKSYmKHQ9dC5zdWJzdHJpbmcoMCxlKSksSnQodCl8fChJdCh0KSx0PVJ0KEF0LGJ0KSkpLHQ7aWYoIm51bWJlciI9PT1lKXJldHVybiAodD1NYXRoLnRydW5jKHQpKT49MCYmTnVtYmVyLmlzU2FmZUludGVnZXIodCk/dDpmdW5jdGlvbih0KXtpZih0PDApe1N0KHQpO2NvbnN0IGU9UnQoQXQsYnQpO3JldHVybiB0PU51bWJlcihlKSxOdW1iZXIuaXNTYWZlSW50ZWdlcih0KT90OmV9cmV0dXJuIEp0KFN0cmluZyh0KSk/dDooU3QodCksTHQoQXQsYnQpKX0odCl9fWZ1bmN0aW9uIG5lKHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdCl0aHJvdyBFcnJvcigpO3JldHVybiB0fWZ1bmN0aW9uIHJlKHQpe2lmKG51bGwhPXQmJiJzdHJpbmciIT10eXBlb2YgdCl0aHJvdyBFcnJvcigpO3JldHVybiB0fWZ1bmN0aW9uIGllKHQpe3JldHVybiBudWxsPT10fHwic3RyaW5nIj09dHlwZW9mIHQ/dDp2b2lkIDB9ZnVuY3Rpb24gc2UodCxlLG4scil7aWYobnVsbCE9dCYmIm9iamVjdCI9PXR5cGVvZiB0JiZ0Llk9PT1hdClyZXR1cm4gdDtpZighQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gbj8yJnI/KHQ9ZVtZXSk/ZT10OihydCgodD1uZXcgZSkudSksZT1lW1ldPXQpOmU9bmV3IGU6ZT12b2lkIDAsZTtsZXQgaT1uPXR0KHQpO3JldHVybiAwPT09aSYmKGl8PTMyJnIpLGl8PTImcixpIT09biYmbnQodCxpKSxuZXcgZSh0KX1mdW5jdGlvbiBvZSh0LGUsbil7aWYoZSl0OntpZighWXQoZT10KSl0aHJvdyBWKCJpbnQ2NCIpO3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJzdHJpbmciOmU9UXQoZSk7YnJlYWsgdDtjYXNlImJpZ2ludCI6aWYodD1lPUJpZ0ludC5hc0ludE4oNjQsZSksVXQodCkpe2lmKCEvXlxzKig/Oi0/WzEtOV1cZCp8MCk/XHMqJC8udGVzdCh0KSl0aHJvdyBFcnJvcihTdHJpbmcodCkpfWVsc2UgaWYoQ3QodCkmJiFOdW1iZXIuaXNTYWZlSW50ZWdlcih0KSl0aHJvdyBFcnJvcihTdHJpbmcodCkpO2U9RHQ/QmlnSW50KGUpOk50KGUpP2U/IjEiOiIwIjpVdChlKT9lLnRyaW0oKXx8IjAiOlN0cmluZyhlKTticmVhayB0O2RlZmF1bHQ6ZT1adChlKTt9fWVsc2UgZT10ZSh0KTtyZXR1cm4gInN0cmluZyI9PXR5cGVvZihuPW51bGw9PSh0PWUpP24/MDp2b2lkIDA6dCkmJihlPStuLE51bWJlci5pc1NhZmVJbnRlZ2VyKGUpKT9lOm59ZnVuY3Rpb24gYWUodCl7dmFyIGU9aGU/LmdldCh0KTtpZihlKXJldHVybiBlO2lmKE1hdGgucmFuZG9tKCk+LjAxKXJldHVybiB0O2lmKHZvaWQgMD09PXVlKWlmKCJmdW5jdGlvbiIhPXR5cGVvZiBQcm94eSl1ZT1udWxsO2Vsc2UgdHJ5e3VlPS0xIT09UHJveHkudG9TdHJpbmcoKS5pbmRleE9mKCJbbmF0aXZlIGNvZGVdIik/UHJveHk6bnVsbDt9Y2F0Y2h7dWU9bnVsbDt9cmV0dXJuIChlPXVlKT8oZnVuY3Rpb24odCxlKXsoaGV8fD1uZXcgV2Vha01hcCkuc2V0KHQsZSksKGNlfHw9bmV3IFdlYWtNYXApLnNldChlLHQpO30odCxlPW5ldyBlKHQse3NldDoodCxlLG4pPT4oaigpLHRbZV09biwhMCl9KSksZSk6dH1sZXQgaGUsY2UsdWUsbGUsZmUsZGU7ZnVuY3Rpb24gcGUodCl7c3dpdGNoKHR5cGVvZiB0KXtjYXNlImJvb2xlYW4iOnJldHVybiBmZXx8PVswLHZvaWQgMCwhMF07Y2FzZSJudW1iZXIiOnJldHVybiB0PjA/dm9pZCAwOjA9PT10P2RlfHw9WzAsdm9pZCAwXTpbLXQsdm9pZCAwXTtjYXNlInN0cmluZyI6cmV0dXJuIFswLHRdO2Nhc2Uib2JqZWN0IjpyZXR1cm4gdH19ZnVuY3Rpb24gZ2UodCxlKXtyZXR1cm4gbWUodCxlWzBdLGVbMV0pfWZ1bmN0aW9uIG1lKHQsZSxuKXtpZihudWxsPT10JiYodD1sZSksbGU9dm9pZCAwLG51bGw9PXQpe3ZhciByPTk2O24/KHQ9W25dLHJ8PTUxMik6dD1bXSxlJiYocj0tMTY3NjA4MzMmcnwoMTAyMyZlKTw8MTQpO31lbHNlIHtpZighQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBFcnJvcigibmFyciIpO2lmKDIwNDgmKHI9dHQodCkpKXRocm93IEVycm9yKCJmYXJyIik7aWYoNjQmcilyZXR1cm4gdDtpZihyfD02NCxuJiYocnw9NTEyLG4hPT10WzBdKSl0aHJvdyBFcnJvcigibWlkIik7dDp7Y29uc3QgaT0obj10KS5sZW5ndGg7aWYoaSl7Y29uc3QgdD1pLTE7aWYodXQoblt0XSkpe2lmKChlPXQtKCshISg1MTImKHJ8PTI1NikpLTEpKT49MTAyNCl0aHJvdyBFcnJvcigicHZ0bG10Iik7cj0tMTY3NjA4MzMmcnwoMTAyMyZlKTw8MTQ7YnJlYWsgdH19aWYoZSl7aWYoKGU9TWF0aC5tYXgoZSxpLSgrISEoNTEyJnIpLTEpKSk+MTAyNCl0aHJvdyBFcnJvcigic3B2dCIpO3I9LTE2NzYwODMzJnJ8KDEwMjMmZSk8PDE0O319fXJldHVybiBudCh0LHIpLHR9Y29uc3QgeWU9e307bGV0IF9lPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB2KG5ldyBjbGFzcyBleHRlbmRzIE1hcHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7fX0pLCExfWNhdGNoe3JldHVybiAhMH19KCk7Y2xhc3MgdmV7Y29uc3RydWN0b3IoKXt0aGlzLmc9bmV3IE1hcDt9Z2V0KHQpe3JldHVybiB0aGlzLmcuZ2V0KHQpfXNldCh0LGUpe3JldHVybiB0aGlzLmcuc2V0KHQsZSksdGhpcy5zaXplPXRoaXMuZy5zaXplLHRoaXN9ZGVsZXRlKHQpe3JldHVybiB0PXRoaXMuZy5kZWxldGUodCksdGhpcy5zaXplPXRoaXMuZy5zaXplLHR9Y2xlYXIoKXt0aGlzLmcuY2xlYXIoKSx0aGlzLnNpemU9dGhpcy5nLnNpemU7fWhhcyh0KXtyZXR1cm4gdGhpcy5nLmhhcyh0KX1lbnRyaWVzKCl7cmV0dXJuIHRoaXMuZy5lbnRyaWVzKCl9a2V5cygpe3JldHVybiB0aGlzLmcua2V5cygpfXZhbHVlcygpe3JldHVybiB0aGlzLmcudmFsdWVzKCl9Zm9yRWFjaCh0LGUpe3JldHVybiB0aGlzLmcuZm9yRWFjaCh0LGUpfVtTeW1ib2wuaXRlcmF0b3JdKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfX1jb25zdCBFZT1fZT8oT2JqZWN0LnNldFByb3RvdHlwZU9mKHZlLnByb3RvdHlwZSxNYXAucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh2ZS5wcm90b3R5cGUse3NpemU6e3ZhbHVlOjAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsd3JpdGFibGU6ITB9fSksdmUpOmNsYXNzIGV4dGVuZHMgTWFwe2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt9fTtmdW5jdGlvbiB3ZSh0KXtyZXR1cm4gdH1mdW5jdGlvbiBUZSh0KXtpZigyJnQuTCl0aHJvdyBFcnJvcigiQ2Fubm90IG11dGF0ZSBhbiBpbW11dGFibGUgTWFwIil9dmFyIEFlPWNsYXNzIGV4dGVuZHMgRWV7Y29uc3RydWN0b3IodCxlLG49d2Uscj13ZSl7c3VwZXIoKTtsZXQgaT10dCh0KTtpfD02NCxudCh0LGkpLHRoaXMuTD1pLHRoaXMuVj1lLHRoaXMuUz1uLHRoaXMuYWE9dGhpcy5WP2JlOnI7Zm9yKGxldCBzPTA7czx0Lmxlbmd0aDtzKyspe2NvbnN0IG89dFtzXSxhPW4ob1swXSwhMSwhMCk7bGV0IGg9b1sxXTtlP3ZvaWQgMD09PWgmJihoPW51bGwpOmg9cihvWzFdLCExLCEwLHZvaWQgMCx2b2lkIDAsaSksc3VwZXIuc2V0KGEsaCk7fX1vYSh0PWtlKXtpZigwIT09dGhpcy5zaXplKXJldHVybiB0aGlzLloodCl9Wih0PWtlKXtjb25zdCBlPVtdLG49c3VwZXIuZW50cmllcygpO2Zvcih2YXIgcjshKHI9bi5uZXh0KCkpLmRvbmU7KShyPXIudmFsdWUpWzBdPXQoclswXSksclsxXT10KHJbMV0pLGUucHVzaChyKTtyZXR1cm4gZX1jbGVhcigpe1RlKHRoaXMpLHN1cGVyLmNsZWFyKCk7fWRlbGV0ZSh0KXtyZXR1cm4gVGUodGhpcyksc3VwZXIuZGVsZXRlKHRoaXMuUyh0LCEwLCExKSl9ZW50cmllcygpe3ZhciB0PXRoaXMubmEoKTtyZXR1cm4gbmV3IGd0KHQsU2UsdGhpcyl9a2V5cygpe3JldHVybiB0aGlzLklhKCl9dmFsdWVzKCl7dmFyIHQ9dGhpcy5uYSgpO3JldHVybiBuZXcgZ3QodCxBZS5wcm90b3R5cGUuZ2V0LHRoaXMpfWZvckVhY2godCxlKXtzdXBlci5mb3JFYWNoKCgobixyKT0+e3QuY2FsbChlLHRoaXMuZ2V0KHIpLHIsdGhpcyk7fSkpO31zZXQodCxlKXtyZXR1cm4gVGUodGhpcyksbnVsbD09KHQ9dGhpcy5TKHQsITAsITEpKT90aGlzOm51bGw9PWU/KHN1cGVyLmRlbGV0ZSh0KSx0aGlzKTpzdXBlci5zZXQodCx0aGlzLmFhKGUsITAsITAsdGhpcy5WLCExLHRoaXMuTCkpfU9hKHQpe2NvbnN0IGU9dGhpcy5TKHRbMF0sITEsITApO3Q9dFsxXSx0PXRoaXMuVj92b2lkIDA9PT10P251bGw6dDp0aGlzLmFhKHQsITEsITAsdm9pZCAwLCExLHRoaXMuTCksc3VwZXIuc2V0KGUsdCk7fWhhcyh0KXtyZXR1cm4gc3VwZXIuaGFzKHRoaXMuUyh0LCExLCExKSl9Z2V0KHQpe3Q9dGhpcy5TKHQsITEsITEpO2NvbnN0IGU9c3VwZXIuZ2V0KHQpO2lmKHZvaWQgMCE9PWUpe3ZhciBuPXRoaXMuVjtyZXR1cm4gbj8oKG49dGhpcy5hYShlLCExLCEwLG4sdGhpcy50YSx0aGlzLkwpKSE9PWUmJnN1cGVyLnNldCh0LG4pLG4pOmV9fW5hKCl7cmV0dXJuIEFycmF5LmZyb20oc3VwZXIua2V5cygpKX1JYSgpe3JldHVybiBzdXBlci5rZXlzKCl9W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpcy5lbnRyaWVzKCl9fTtmdW5jdGlvbiBiZSh0LGUsbixyLGkscyl7cmV0dXJuIHQ9c2UodCxyLG4scyksaSYmKHQ9VWUodCkpLHR9ZnVuY3Rpb24ga2UodCl7cmV0dXJuIHR9ZnVuY3Rpb24gU2UodCl7cmV0dXJuIFt0LHRoaXMuZ2V0KHQpXX1sZXQgeGU7ZnVuY3Rpb24gTGUoKXtyZXR1cm4geGV8fD1uZXcgQWUocnQoW10pLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHllKX1mdW5jdGlvbiBGZSh0LGUsbixyLGkpe2lmKG51bGwhPXQpe2lmKEFycmF5LmlzQXJyYXkodCkpdD1mdCh0KT92b2lkIDA6aSYmMiZ0dCh0KT90OlJlKHQsZSxuLHZvaWQgMCE9PXIsaSk7ZWxzZSBpZih1dCh0KSl7Y29uc3Qgcz17fTtmb3IobGV0IG8gaW4gdClzW29dPUZlKHRbb10sZSxuLHIsaSk7dD1zO31lbHNlIHQ9ZSh0LHIpO3JldHVybiB0fX1mdW5jdGlvbiBSZSh0LGUsbixyLGkpe2NvbnN0IHM9cnx8bj90dCh0KTowO3I9cj8hISgzMiZzKTp2b2lkIDA7Y29uc3Qgbz1IKHQpO2ZvcihsZXQgdD0wO3Q8by5sZW5ndGg7dCsrKW9bdF09RmUob1t0XSxlLG4scixpKTtyZXR1cm4gbiYmKF90KG8sdCksbihzLG8pKSxvfWZ1bmN0aW9uIE1lKHQpe3JldHVybiBGZSh0LEllLHZvaWQgMCx2b2lkIDAsITEpfWZ1bmN0aW9uIEllKHQpe3JldHVybiB0Llk9PT1hdD90LnRvSlNPTigpOnQgaW5zdGFuY2VvZiBBZT90Lm9hKE1lKTpmdW5jdGlvbih0KXtzd2l0Y2godHlwZW9mIHQpe2Nhc2UibnVtYmVyIjpyZXR1cm4gaXNGaW5pdGUodCk/dDpTdHJpbmcodCk7Y2FzZSJiaWdpbnQiOnJldHVybiBCdCh0KT9OdW1iZXIodCk6U3RyaW5nKHQpO2Nhc2UiYm9vbGVhbiI6cmV0dXJuIHQ/MTowO2Nhc2Uib2JqZWN0IjppZih0KWlmKEFycmF5LmlzQXJyYXkodCkpe2lmKGZ0KHQpKXJldHVybn1lbHNlIHtpZihJKHQpKXJldHVybiB4KHQpO2lmKHQgaW5zdGFuY2VvZiBEKXtjb25zdCBlPXQuZztyZXR1cm4gbnVsbD09ZT8iIjoic3RyaW5nIj09dHlwZW9mIGU/ZTp0Lmc9eChlKX1pZih0IGluc3RhbmNlb2YgQWUpcmV0dXJuIHQub2EoKX19cmV0dXJuIHR9KHQpfWZ1bmN0aW9uIFBlKHQsZSxuPXN0KXtpZihudWxsIT10KXtpZihrJiZ0IGluc3RhbmNlb2YgVWludDhBcnJheSlyZXR1cm4gZT90Om5ldyBVaW50OEFycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkodCkpe3ZhciByPXR0KHQpO3JldHVybiAyJnI/dDooZSYmPTA9PT1yfHwhISgzMiZyKSYmISg2NCZyfHwhKDE2JnIpKSxlPyhudCh0LC0xMjI5MyYoMzR8cikpLHQpOlJlKHQsUGUsNCZyP3N0Om4sITAsITApKX1yZXR1cm4gdC5ZPT09YXQ/KG49dC51LHQ9MiYocj1ldChuKSk/dDpPZSh0LG4sciwhMCkpOnQgaW5zdGFuY2VvZiBBZSYmISgyJnQuTCkmJihuPXJ0KHQuWihQZSkpLHQ9bmV3IEFlKG4sdC5WLHQuUyx0LmFhKSksdH19ZnVuY3Rpb24gT2UodCxlLG4scil7cmV0dXJuIHQ9dC5jb25zdHJ1Y3RvcixsZT1lPUNlKGUsbixyKSxlPW5ldyB0KGUpLGxlPXZvaWQgMCxlfWZ1bmN0aW9uIENlKHQsZSxuKXtjb25zdCByPW58fDImZT9zdDppdCxpPSEhKDMyJmUpO3JldHVybiB0PWZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPUgodCk7dmFyIGk9ci5sZW5ndGg7Y29uc3Qgcz0yNTYmZT9yW2ktMV06dm9pZCAwO2ZvcihpKz1zPy0xOjAsZT01MTImZT8xOjA7ZTxpO2UrKylyW2VdPW4ocltlXSk7aWYocyl7ZT1yW2VdPXt9O2Zvcihjb25zdCB0IGluIHMpZVt0XT1uKHNbdF0pO31yZXR1cm4gX3Qocix0KSxyfSh0LGUsKHQ9PlBlKHQsaSxyKSkpLFoodCwzMnwobj8yOjApKSx0fWZ1bmN0aW9uIFVlKHQpe2NvbnN0IGU9dC51LG49ZXQoZSk7cmV0dXJuIDImbj9PZSh0LGUsbiwhMSk6dH1mdW5jdGlvbiBOZSh0LGUsbixyKXtyZXR1cm4gISg0JmUpfHxudWxsIT1uJiYoIXImJjA9PT1uJiYoNDA5NiZlfHw4MTkyJmUpJiYodC5jb25zdHJ1Y3RvcltKXT0xKygwfHQuY29uc3RydWN0b3JbSl0pKTw1JiZqKCksMCE9PW4mJiEobiZlKSl9ZnVuY3Rpb24gRGUodCxlKXtyZXR1cm4gR2UodD10LnUsZXQodCksZSl9ZnVuY3Rpb24gQmUodCxlLG4scil7aWYoISgoZT1yKygrISEoNTEyJmUpLTEpKTwwfHxlPj10Lmxlbmd0aHx8ZT49bikpcmV0dXJuIHRbZV19ZnVuY3Rpb24gR2UodCxlLG4scil7aWYoLTE9PT1uKXJldHVybiBudWxsO2NvbnN0IGk9ZT4+MTQmMTAyM3x8NTM2ODcwOTEyO2lmKCEobj49aSkpe3ZhciBzPXQubGVuZ3RoO3JldHVybiByJiYyNTYmZSYmbnVsbCE9KHI9dFtzLTFdW25dKT8oQmUodCxlLGksbikmJm51bGwhPSQmJigoZT0odD1HPz89e30pWyRdfHwwKT49NHx8KHRbJF09ZSsxLGooKSkpLHIpOkJlKHQsZSxpLG4pfXJldHVybiAyNTYmZT90W3QubGVuZ3RoLTFdW25dOnZvaWQgMH1mdW5jdGlvbiBqZSh0LGUsbixyKXtjb25zdCBpPXQudTtsZXQgcz1ldChpKTtyZXR1cm4gcHQocyksVmUoaSxzLGUsbixyKSx0fWZ1bmN0aW9uIFZlKHQsZSxuLHIsaSl7Y29uc3Qgcz1lPj4xNCYxMDIzfHw1MzY4NzA5MTI7aWYobj49c3x8aSYmIWYpe2xldCBvPWU7aWYoMjU2JmUpaT10W3QubGVuZ3RoLTFdO2Vsc2Uge2lmKG51bGw9PXIpcmV0dXJuIG87aT10W3MrKCshISg1MTImZSktMSldPXt9LG98PTI1Njt9cmV0dXJuIGlbbl09cixuPHMmJih0W24rKCshISg1MTImZSktMSldPXZvaWQgMCksbyE9PWUmJm50KHQsbyksb31yZXR1cm4gdFtuKygrISEoNTEyJmUpLTEpXT1yLDI1NiZlJiYobiBpbih0PXRbdC5sZW5ndGgtMV0pJiZkZWxldGUgdFtuXSksZX1mdW5jdGlvbiBYZSh0LGUsbixyLGkpe3ZhciBzPTImZTtsZXQgbz1HZSh0LGUsbixpKTtBcnJheS5pc0FycmF5KG8pfHwobz1vdCk7Y29uc3QgYT0hKDImcik7cj0hKDEmcik7Y29uc3QgaD0hISgzMiZlKTtsZXQgYz10dChvKTtyZXR1cm4gMCE9PWN8fCFofHxzfHxhPzEmY3x8KGN8PTEsbnQobyxjKSk6KGN8PTMzLG50KG8sYykpLHM/KHQ9ITEsMiZjfHwocnQobyksdD0hISg0JmMpKSwocnx8dCkmJk9iamVjdC5mcmVlemUobykpOihzPSEhKDImYyl8fCEhKDIwNDgmYyksciYmcz8obz1IKG8pLHI9MSxoJiYhYSYmKHJ8PTMyKSxudChvLHIpLFZlKHQsZSxuLG8saSkpOmEmJjMyJmMmJiFzJiZRKG8sMzIpKSxvfWZ1bmN0aW9uIEhlKHQsZSl7dD10LnU7bGV0IG49ZXQodCk7Y29uc3Qgcj1HZSh0LG4sZSksaT1XdChyKTtyZXR1cm4gbnVsbCE9aSYmaSE9PXImJlZlKHQsbixlLGkpLGl9ZnVuY3Rpb24gV2UodCl7dD10LnU7bGV0IGU9ZXQodCk7Y29uc3Qgbj1HZSh0LGUsMSkscj1sdChuLCEwLCEhKDM0JmUpKTtyZXR1cm4gbnVsbCE9ciYmciE9PW4mJlZlKHQsZSwxLHIpLHJ9ZnVuY3Rpb24gemUodCxlLG4pe3ZhciByPXZvaWQgMD09PXZ0PzI6NTtjb25zdCBpPXQudTt2YXIgcz1ldChpKTtjb25zdCBvPTImcz8xOnI7cj1LZShpLHMsZSk7dmFyIGE9dHQocik7aWYoTmUodCxhLHZvaWQgMCwhMSkpeyg0JmF8fE9iamVjdC5pc0Zyb3plbihyKSkmJihyPUgociksYT1mbihhLHMpLHM9VmUoaSxzLGUscikpO2xldCBvPXQ9MDtmb3IoO3Q8ci5sZW5ndGg7dCsrKXtjb25zdCBlPW4oclt0XSk7bnVsbCE9ZSYmKHJbbysrXT1lKTt9bzx0JiYoci5sZW5ndGg9byksYT0tNDA5NyYoMjB8KGE9WWUoYSxzKSkpLG50KHIsYSY9LTgxOTMpLDImYSYmT2JqZWN0LmZyZWV6ZShyKTt9bGV0IGg7cmV0dXJuIDE9PT1vfHw0PT09byYmMzImYT8kZShhKXx8KHM9YSwoYXw9MikhPT1zJiZudChyLGEpLE9iamVjdC5mcmVlemUocikpOihuPTU9PT1vJiYoISEoMzImYSl8fCRlKGEpfHwhIWhlPy5nZXQocikpLCgyPT09b3x8bikmJiRlKGEpJiYocj1IKHIpLGE9ZG4oYT1mbihhLHMpLHMsITEpLG50KHIsYSkscz1WZShpLHMsZSxyKSksJGUoYSl8fChlPWEsKGE9ZG4oYSxzLCExKSkhPT1lJiZudChyLGEpKSxuJiYoaD1hZShyKSkpLGh8fHJ9ZnVuY3Rpb24gS2UodCxlLG4pe3JldHVybiB0PUdlKHQsZSxuKSxBcnJheS5pc0FycmF5KHQpP3Q6b3R9ZnVuY3Rpb24gWWUodCxlKXtyZXR1cm4gMD09PXQmJih0PWZuKHQsZSkpLDF8dH1mdW5jdGlvbiAkZSh0KXtyZXR1cm4gISEoMiZ0KSYmISEoNCZ0KXx8ISEoMjA0OCZ0KX1mdW5jdGlvbiBxZSh0KXt0PUgodCk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspe2NvbnN0IG49dFtlXT1IKHRbZV0pO0FycmF5LmlzQXJyYXkoblsxXSkmJihuWzFdPXJ0KG5bMV0pKTt9cmV0dXJuIHR9ZnVuY3Rpb24gSmUodCxlLG4scil7dD10LnU7bGV0IGk9ZXQodCk7cHQoaSksVmUodCxpLGUsKCIwIj09PXI/MD09PU51bWJlcihuKTpuPT09cik/dm9pZCAwOm4pO31mdW5jdGlvbiBaZSh0LGUsbixyKXtjb25zdCBpPWV0KHQpO3B0KGkpLHQ9WGUodCxpLGUsMikscj1uKHIsKDQmKGU9dHQodCkpPzQwOTYmZT80MDk2OjgxOTImZT84MTkyOjA6dm9pZCAwKT8/MCksdC5wdXNoKHIpO31mdW5jdGlvbiBRZSh0KXtyZXR1cm4gdH1mdW5jdGlvbiB0bih0LGUpe3ZhciBuPV9zO3JldHVybiBybihlbih0PXQudSksdCxldCh0KSxuKT09PWU/ZTotMX1mdW5jdGlvbiBlbih0KXtpZihXKXJldHVybiB0W3FdPz8odFtxXT1uZXcgTWFwKTtpZihxIGluIHQpcmV0dXJuIHRbcV07Y29uc3QgZT1uZXcgTWFwO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCxxLHt2YWx1ZTplfSksZX1mdW5jdGlvbiBubih0LGUsbixyKXtjb25zdCBpPWVuKHQpLHM9cm4oaSx0LGUsbik7cmV0dXJuIHMhPT1yJiYocyYmKGU9VmUodCxlLHMpKSxpLnNldChuLHIpKSxlfWZ1bmN0aW9uIHJuKHQsZSxuLHIpe2xldCBpPXQuZ2V0KHIpO2lmKG51bGwhPWkpcmV0dXJuIGk7aT0wO2ZvcihsZXQgdD0wO3Q8ci5sZW5ndGg7dCsrKXtjb25zdCBzPXJbdF07bnVsbCE9R2UoZSxuLHMpJiYoMCE9PWkmJihuPVZlKGUsbixpKSksaT1zKTt9cmV0dXJuIHQuc2V0KHIsaSksaX1mdW5jdGlvbiBzbih0LGUsbixyKXtsZXQgaT1ldCh0KTtjb25zdCBzPUdlKHQsaSxuLHIpO2xldCBvO2lmKG51bGwhPXMmJnMuWT09PWF0KXJldHVybiAoZT1VZShzKSkhPT1zJiZWZSh0LGksbixlLHIpLGUudTtpZihBcnJheS5pc0FycmF5KHMpKXtjb25zdCB0PXR0KHMpO289MiZ0P0NlKHMsdCwhMSk6cyxvPWdlKG8sZSk7fWVsc2Ugbz1nZSh2b2lkIDAsZSk7cmV0dXJuIG8hPT1zJiZWZSh0LGksbixvLHIpLG99ZnVuY3Rpb24gb24odCxlLG4scil7dD10LnU7bGV0IGk9ZXQodCk7Y29uc3Qgcz1HZSh0LGksbixyKTtyZXR1cm4gKGU9c2UocyxlLCExLGkpKSE9PXMmJm51bGwhPWUmJlZlKHQsaSxuLGUsciksZX1mdW5jdGlvbiBhbih0LGUsbixyPSExKXtpZihudWxsPT0oZT1vbih0LGUsbixyKSkpcmV0dXJuIGU7dD10LnU7bGV0IGk9ZXQodCk7aWYoISgyJmkpKXtjb25zdCBzPVVlKGUpO3MhPT1lJiZWZSh0LGksbixlPXMscik7fXJldHVybiBlfWZ1bmN0aW9uIGhuKHQsZSxuLHIsaSxzLG8pe3ZhciBhPSEhKDImZSk7aT1hPzE6aSxzPSEhcyxvJiY9IWEsYT1LZSh0LGUscik7dmFyIGg9dHQoYSksYz0hISg0JmgpO2lmKCFjKXt2YXIgdT1hLGw9ZTtjb25zdCB0PSEhKDImKGg9WWUoaCxlKSkpO3QmJihsfD0yKTtsZXQgcj0hdCxpPSEwLHM9MCxvPTA7Zm9yKDtzPHUubGVuZ3RoO3MrKyl7Y29uc3QgZT1zZSh1W3NdLG4sITEsbCk7aWYoZSBpbnN0YW5jZW9mIG4pe2lmKCF0KXtjb25zdCB0PSEhKDImdHQoZS51KSk7ciYmPSF0LGkmJj10O311W28rK109ZTt9fW88cyYmKHUubGVuZ3RoPW8pLGh8PTQsaD1pPzE2fGg6LTE3JmgsbnQodSxoPXI/OHxoOi05JmgpLHQmJk9iamVjdC5mcmVlemUodSk7fWlmKG8mJiEoOCZofHwhYS5sZW5ndGgmJigxPT09aXx8ND09PWkmJjMyJmgpKSl7Zm9yKCRlKGgpJiYoYT1IKGEpLGg9Zm4oaCxlKSxlPVZlKHQsZSxyLGEpKSxuPWEsbz1oLHU9MDt1PG4ubGVuZ3RoO3UrKykoaD1uW3VdKSE9PShsPVVlKGgpKSYmKG5bdV09bCk7b3w9OCxvPW4ubGVuZ3RoPy0xNyZvOjE2fG8sbnQobixvKSxoPW87fWxldCBmO3JldHVybiAxPT09aXx8ND09PWkmJjMyJmg/JGUoaCl8fChlPWgsKGh8PSFhLmxlbmd0aHx8MTYmaCYmKCFjfHwzMiZoKT8yOjIwNDgpIT09ZSYmbnQoYSxoKSxPYmplY3QuZnJlZXplKGEpKTooYz01PT09aSYmKCEhKDMyJmgpfHwkZShoKXx8ISFoZT8uZ2V0KGEpKSwoMj09PWl8fGMpJiYkZShoKSYmKGE9SChhKSxoPWRuKGg9Zm4oaCxlKSxlLHMpLG50KGEsaCksZT1WZSh0LGUscixhKSksJGUoaCl8fCh0PWgsKGg9ZG4oaCxlLHMpKSE9PXQmJm50KGEsaCkpLGMmJihmPWFlKGEpKSksZnx8YX1mdW5jdGlvbiBjbih0LGUsbil7dD10LnU7Y29uc3Qgcj1ldCh0KTtyZXR1cm4gaG4odCxyLGUsbix2b2lkIDA9PT12dD8yOjUsITEsISgyJnIpKX1mdW5jdGlvbiB1bih0LGUsbixyLGkpe3JldHVybiBudWxsPT1yJiYocj12b2lkIDApLGplKHQsbixyLGkpfWZ1bmN0aW9uIGxuKHQsZSxuLHIpe251bGw9PXImJihyPXZvaWQgMCk7dDp7dD10LnU7bGV0IGk9ZXQodCk7aWYocHQoaSksbnVsbD09cil7Y29uc3Qgcj1lbih0KTtpZihybihyLHQsaSxuKSE9PWUpYnJlYWsgdDtyLnNldChuLDApO31lbHNlIGk9bm4odCxpLG4sZSk7VmUodCxpLGUscik7fX1mdW5jdGlvbiBmbih0LGUpe3JldHVybiAtMjA0OSYodD0zMnwoMiZlPzJ8dDotMyZ0KSl9ZnVuY3Rpb24gZG4odCxlLG4pe3JldHVybiAzMiZlJiZufHwodCY9LTMzKSx0fWZ1bmN0aW9uIHBuKHQsZSxuLHIpe3Q9dC51O2NvbnN0IGk9ZXQodCk7cHQoaSksZT1obih0LGksbixlLDIsITApLG49bnVsbCE9cj9yOm5ldyBuLGUucHVzaChuKSwyJnR0KG4udSk/UShlLDgpOlEoZSwxNik7fWZ1bmN0aW9uIGduKHQsZSl7cmV0dXJuIHQ/P2V9ZnVuY3Rpb24gbW4odCxlKXtyZXR1cm4gJHQoRGUodCxlKSl9ZnVuY3Rpb24geW4odCxlKXtyZXR1cm4gZ24oSGUodCxlKSwwKX1mdW5jdGlvbiBfbih0LGUpe3JldHVybiBnbihpZShEZSh0LGUpKSwiIil9ZnVuY3Rpb24gdm4odCxlLG4pe2lmKG51bGwhPW4mJiJib29sZWFuIiE9dHlwZW9mIG4pdGhyb3cgdD10eXBlb2YgbixFcnJvcihgRXhwZWN0ZWQgYm9vbGVhbiBidXQgZ290ICR7Im9iamVjdCIhPXQ/dDpuP0FycmF5LmlzQXJyYXkobik/ImFycmF5Ijp0OiJudWxsIn06ICR7bn1gKTtqZSh0LGUsbik7fWZ1bmN0aW9uIEVuKHQsZSxuKXtpZihudWxsIT1uKXtpZigibnVtYmVyIiE9dHlwZW9mIG4pdGhyb3cgVigiaW50MzIiKTtpZighTnVtYmVyLmlzRmluaXRlKG4pKXRocm93IFYoImludDMyIik7bnw9MDt9amUodCxlLG4pO31mdW5jdGlvbiB3bih0LGUsbil7aWYobnVsbCE9biYmIm51bWJlciIhPXR5cGVvZiBuKXRocm93IEVycm9yKGBWYWx1ZSBvZiBmbG9hdC9kb3VibGUgZmllbGQgbXVzdCBiZSBhIG51bWJlciwgZm91bmQgJHt0eXBlb2Ygbn06ICR7bn1gKTtqZSh0LGUsbik7fWZ1bmN0aW9uIFRuKHQsZSxuKXt7Y29uc3QgYT10LnU7bGV0IGg9ZXQoYSk7aWYocHQoaCksbnVsbD09bilWZShhLGgsZSk7ZWxzZSB7bj1jZT8uZ2V0KG4pfHxuO3ZhciByLGk9dHQobikscz1pLG89ISEoMiZpKXx8T2JqZWN0LmlzRnJvemVuKG4pO2lmKChyPSFvKSYmKHI9dm9pZCAwPT09RXR8fCExKSxOZSh0LGkpKWZvcihpPTIxLG8mJihuPUgobikscz0wLGk9ZG4oaT1mbihpLGgpLGgsITApKSx0PTA7dDxuLmxlbmd0aDt0Kyspblt0XT1uZShuW3RdKTtyJiYobj1IKG4pLHM9MCxpPWRuKGk9Zm4oaSxoKSxoLCEwKSksaSE9PXMmJm50KG4saSksVmUoYSxoLGUsbik7fX19ZnVuY3Rpb24gQW4odCxlKXtyZXR1cm4gRXJyb3IoYEludmFsaWQgd2lyZSB0eXBlOiAke3R9IChhdCBwb3NpdGlvbiAke2V9KWApfWZ1bmN0aW9uIGJuKCl7cmV0dXJuIEVycm9yKCJGYWlsZWQgdG8gcmVhZCB2YXJpbnQsIGVuY29kaW5nIGlzIGludmFsaWQuIil9ZnVuY3Rpb24ga24odCxlKXtyZXR1cm4gRXJyb3IoYFRyaWVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBkYXRhICR7ZX0gPiAke3R9YCl9ZnVuY3Rpb24gU24odCl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiB7YnVmZmVyOk0odCksTjohMX07aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4ge2J1ZmZlcjpuZXcgVWludDhBcnJheSh0KSxOOiExfTtpZih0LmNvbnN0cnVjdG9yPT09VWludDhBcnJheSlyZXR1cm4ge2J1ZmZlcjp0LE46ITF9O2lmKHQuY29uc3RydWN0b3I9PT1BcnJheUJ1ZmZlcilyZXR1cm4ge2J1ZmZlcjpuZXcgVWludDhBcnJheSh0KSxOOiExfTtpZih0LmNvbnN0cnVjdG9yPT09RClyZXR1cm4ge2J1ZmZlcjpOKHQpfHxuZXcgVWludDhBcnJheSgwKSxOOiEwfTtpZih0IGluc3RhbmNlb2YgVWludDhBcnJheSlyZXR1cm4ge2J1ZmZlcjpuZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKSxOOiExfTt0aHJvdyBFcnJvcigiVHlwZSBub3QgY29udmVydGlibGUgdG8gYSBVaW50OEFycmF5LCBleHBlY3RlZCBhIFVpbnQ4QXJyYXksIGFuIEFycmF5QnVmZmVyLCBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZywgYSBCeXRlU3RyaW5nIG9yIGFuIEFycmF5IG9mIG51bWJlcnMiKX1mdW5jdGlvbiB4bih0LGUpe2xldCBuLHI9MCxpPTAscz0wO2NvbnN0IG89dC5oO2xldCBhPXQuZztkb3tuPW9bYSsrXSxyfD0oMTI3Jm4pPDxzLHMrPTc7fXdoaWxlKHM8MzImJjEyOCZuKTtmb3Iocz4zMiYmKGl8PSgxMjcmbik+PjQpLHM9MztzPDMyJiYxMjgmbjtzKz03KW49b1thKytdLGl8PSgxMjcmbik8PHM7aWYoQ24odCxhKSxuPDEyOClyZXR1cm4gZShyPj4+MCxpPj4+MCk7dGhyb3cgYm4oKX1mdW5jdGlvbiBMbih0KXtsZXQgZT0wLG49dC5nO2NvbnN0IHI9bisxMCxpPXQuaDtmb3IoO248cjspe2NvbnN0IHI9aVtuKytdO2lmKGV8PXIsMD09KDEyOCZyKSlyZXR1cm4gQ24odCxuKSwhISgxMjcmZSl9dGhyb3cgYm4oKX1mdW5jdGlvbiBGbih0KXtjb25zdCBlPXQuaDtsZXQgbj10Lmcscj1lW24rK10saT0xMjcmcjtpZigxMjgmciYmKHI9ZVtuKytdLGl8PSgxMjcmcik8PDcsMTI4JnImJihyPWVbbisrXSxpfD0oMTI3JnIpPDwxNCwxMjgmciYmKHI9ZVtuKytdLGl8PSgxMjcmcik8PDIxLDEyOCZyJiYocj1lW24rK10saXw9cjw8MjgsMTI4JnImJjEyOCZlW24rK10mJjEyOCZlW24rK10mJjEyOCZlW24rK10mJjEyOCZlW24rK10mJjEyOCZlW24rK10pKSkpKXRocm93IGJuKCk7cmV0dXJuIENuKHQsbiksaX1mdW5jdGlvbiBSbih0KXtyZXR1cm4gRm4odCk+Pj4wfWZ1bmN0aW9uIE1uKHQpe3ZhciBlPXQuaDtjb25zdCBuPXQuZyxyPWVbbl0saT1lW24rMV0scz1lW24rMl07cmV0dXJuIGU9ZVtuKzNdLENuKHQsdC5nKzQpLChyPDwwfGk8PDh8czw8MTZ8ZTw8MjQpPj4+MH1mdW5jdGlvbiBJbih0KXt2YXIgZT1Nbih0KTt0PTIqKGU+PjMxKSsxO2NvbnN0IG49ZT4+PjIzJjI1NTtyZXR1cm4gZSY9ODM4ODYwNywyNTU9PW4/ZT9OYU46dCooMS8wKTowPT1uP3QqTWF0aC5wb3coMiwtMTQ5KSplOnQqTWF0aC5wb3coMixuLTE1MCkqKGUrTWF0aC5wb3coMiwyMykpfWZ1bmN0aW9uIFBuKHQpe3JldHVybiBGbih0KX1mdW5jdGlvbiBPbih0LGUse2RhOm49ITF9PXt9KXt0LmRhPW4sZSYmKGU9U24oZSksdC5oPWUuYnVmZmVyLHQubT1lLk4sdC5qPTAsdC5sPXQuaC5sZW5ndGgsdC5nPXQuaik7fWZ1bmN0aW9uIENuKHQsZSl7aWYodC5nPWUsZT50LmwpdGhyb3cga24odC5sLGUpfWZ1bmN0aW9uIFVuKHQsZSl7aWYoZTwwKXRocm93IEVycm9yKGBUcmllZCB0byByZWFkIGEgbmVnYXRpdmUgYnl0ZSBsZW5ndGg6ICR7ZX1gKTtjb25zdCBuPXQuZyxyPW4rZTtpZihyPnQubCl0aHJvdyBrbihlLHQubC1uKTtyZXR1cm4gdC5nPXIsbn1mdW5jdGlvbiBObih0LGUpe2lmKDA9PWUpcmV0dXJuIFUoKTt2YXIgbj1Vbih0LGUpO3JldHVybiB0LmRhJiZ0Lm0/bj10Lmguc3ViYXJyYXkobixuK2UpOih0PXQuaCxuPW49PT0oZT1uK2UpP25ldyBVaW50OEFycmF5KDApOnd0P3Quc2xpY2UobixlKTpuZXcgVWludDhBcnJheSh0LnN1YmFycmF5KG4sZSkpKSwwPT1uLmxlbmd0aD9VKCk6bmV3IEQobixQKX1BZS5wcm90b3R5cGUudG9KU09OPXZvaWQgMCxBZS5wcm90b3R5cGUuSmE9aHQ7dmFyIERuPVtdO2Z1bmN0aW9uIEJuKHQpe3ZhciBlPXQuZztpZihlLmc9PWUubClyZXR1cm4gITE7dC5sPXQuZy5nO3ZhciBuPVJuKHQuZyk7aWYoZT1uPj4+MywhKChuJj03KT49MCYmbjw9NSkpdGhyb3cgQW4obix0LmwpO2lmKGU8MSl0aHJvdyBFcnJvcihgSW52YWxpZCBmaWVsZCBudW1iZXI6ICR7ZX0gKGF0IHBvc2l0aW9uICR7dC5sfSlgKTtyZXR1cm4gdC5tPWUsdC5oPW4sITB9ZnVuY3Rpb24gR24odCl7c3dpdGNoKHQuaCl7Y2FzZSAwOjAhPXQuaD9Hbih0KTpMbih0LmcpO2JyZWFrO2Nhc2UgMTpDbih0PXQuZyx0LmcrOCk7YnJlYWs7Y2FzZSAyOmlmKDIhPXQuaClHbih0KTtlbHNlIHt2YXIgZT1Sbih0LmcpO0NuKHQ9dC5nLHQuZytlKTt9YnJlYWs7Y2FzZSA1OkNuKHQ9dC5nLHQuZys0KTticmVhaztjYXNlIDM6Zm9yKGU9dC5tOzspe2lmKCFCbih0KSl0aHJvdyBFcnJvcigiVW5tYXRjaGVkIHN0YXJ0LWdyb3VwIHRhZzogc3RyZWFtIEVPRiIpO2lmKDQ9PXQuaCl7aWYodC5tIT1lKXRocm93IEVycm9yKCJVbm1hdGNoZWQgZW5kLWdyb3VwIHRhZyIpO2JyZWFrfUduKHQpO31icmVhaztkZWZhdWx0OnRocm93IEFuKHQuaCx0LmwpfX1mdW5jdGlvbiBqbih0LGUsbil7Y29uc3Qgcj10LmcubCxpPVJuKHQuZykscz10LmcuZytpO2xldCBvPXMtcjtpZihvPD0wJiYodC5nLmw9cyxuKGUsdCx2b2lkIDAsdm9pZCAwLHZvaWQgMCksbz1zLXQuZy5nKSxvKXRocm93IEVycm9yKGBNZXNzYWdlIHBhcnNpbmcgZW5kZWQgdW5leHBlY3RlZGx5LiBFeHBlY3RlZCB0byByZWFkICR7aX0gYnl0ZXMsIGluc3RlYWQgcmVhZCAke2ktb30gYnl0ZXMsIGVpdGhlciB0aGUgZGF0YSBlbmRlZCB1bmV4cGVjdGVkbHkgb3IgdGhlIG1lc3NhZ2UgbWlzcmVwb3J0ZWQgaXRzIG93biBsZW5ndGhgKTtyZXR1cm4gdC5nLmc9cyx0LmcubD1yLGV9ZnVuY3Rpb24gVm4odCl7dmFyIGU9Um4odC5nKSxhPVVuKHQ9dC5nLGUpO2lmKHQ9dC5oLG8pe3ZhciBoLGM9dDsoaD1zKXx8KGg9cz1uZXcgVGV4dERlY29kZXIoInV0Zi04Iix7ZmF0YWw6ITB9KSksZT1hK2UsYz0wPT09YSYmZT09PWMubGVuZ3RoP2M6Yy5zdWJhcnJheShhLGUpO3RyeXt2YXIgdT1oLmRlY29kZShjKTt9Y2F0Y2godCl7aWYodm9pZCAwPT09aSl7dHJ5e2guZGVjb2RlKG5ldyBVaW50OEFycmF5KFsxMjhdKSk7fWNhdGNoKHQpe310cnl7aC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoWzk3XSkpLGk9ITA7fWNhdGNoKHQpe2k9ITE7fX10aHJvdyAhaSYmKHM9dm9pZCAwKSx0fX1lbHNlIHtlPSh1PWEpK2UsYT1bXTtsZXQgaSxzPW51bGw7Zm9yKDt1PGU7KXt2YXIgbD10W3UrK107bDwxMjg/YS5wdXNoKGwpOmw8MjI0P3U+PWU/bigpOihpPXRbdSsrXSxsPDE5NHx8MTI4IT0oMTkyJmkpPyh1LS0sbigpKTphLnB1c2goKDMxJmwpPDw2fDYzJmkpKTpsPDI0MD91Pj1lLTE/bigpOihpPXRbdSsrXSwxMjghPSgxOTImaSl8fDIyND09PWwmJmk8MTYwfHwyMzc9PT1sJiZpPj0xNjB8fDEyOCE9KDE5MiYoaD10W3UrK10pKT8odS0tLG4oKSk6YS5wdXNoKCgxNSZsKTw8MTJ8KDYzJmkpPDw2fDYzJmgpKTpsPD0yNDQ/dT49ZS0yP24oKTooaT10W3UrK10sMTI4IT0oMTkyJmkpfHxpLTE0NCsobDw8MjgpPj4zMCE9MHx8MTI4IT0oMTkyJihoPXRbdSsrXSkpfHwxMjghPSgxOTImKGM9dFt1KytdKSk/KHUtLSxuKCkpOihsPSg3JmwpPDwxOHwoNjMmaSk8PDEyfCg2MyZoKTw8Nnw2MyZjLGwtPTY1NTM2LGEucHVzaCg1NTI5NisobD4+MTAmMTAyMyksNTYzMjArKDEwMjMmbCkpKSk6bigpLGEubGVuZ3RoPj04MTkyJiYocz1yKHMsYSksYS5sZW5ndGg9MCk7fXU9cihzLGEpO31yZXR1cm4gdX1mdW5jdGlvbiBYbih0KXtjb25zdCBlPVJuKHQuZyk7cmV0dXJuIE5uKHQuZyxlKX1mdW5jdGlvbiBIbih0LGUsbil7dmFyIHI9Um4odC5nKTtmb3Iocj10LmcuZytyO3QuZy5nPHI7KW4ucHVzaChlKHQuZykpO312YXIgV249W107bGV0IHpuO2Z1bmN0aW9uIEtuKHQsZSxuKXtlLmc/ZS5tKHQsZS5nLGUuaCxuLCEwKTplLm0odCxlLmgsbiwhMCk7fXZhciBZbj1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMudT1tZSh0LGUpO310b0pTT04oKXtyZXR1cm4gJG4odGhpcyl9bCgpe3ZhciB0PXZvO3JldHVybiB0Lmc/dC5sKHRoaXMsdC5nLHQuaCwhMCk6dC5sKHRoaXMsdC5oLHQuZGVmYXVsdFZhbHVlLCEwKX1jbG9uZSgpe2NvbnN0IHQ9dGhpcy51O3JldHVybiBPZSh0aGlzLHQsZXQodCksITEpfU4oKXtyZXR1cm4gISEoMiZ0dCh0aGlzLnUpKX19O2Z1bmN0aW9uICRuKHQpe3Q9em4/dC51OlJlKHQudSxJZSx2b2lkIDAsdm9pZCAwLCExKTt7dmFyIGU9IXpuO2xldCBjPXQubGVuZ3RoO2lmKGMpe3ZhciBuPXRbYy0xXSxyPXV0KG4pO3I/Yy0tOm49dm9pZCAwO3ZhciBpPXQ7aWYocil7dDp7dmFyIHM9bixvPXt9O2lmKHI9ITEscylmb3IodmFyIGEgaW4gcyl7aWYoaXNOYU4oK2EpKXtvW2FdPXNbYV07Y29udGludWV9bGV0IHQ9c1thXTtBcnJheS5pc0FycmF5KHQpJiYoZnQodCl8fGN0KHQpJiYwPT09dC5zaXplKSYmKHQ9bnVsbCksbnVsbD09dCYmKHI9ITApLG51bGwhPXQmJihvW2FdPXQpO31pZihyKXtmb3IobGV0IHQgaW4gbylicmVhayB0O289bnVsbDt9ZWxzZSBvPXM7fXM9bnVsbD09bz9udWxsIT1uOm8hPT1uO31mb3IoO2M+MCYmKG51bGw9PShhPWlbYy0xXSl8fGZ0KGEpfHxjdChhKSYmMD09PWEuc2l6ZSk7Yy0tKXZhciBoPSEwOyhpIT09dHx8c3x8aCkmJihlPyhofHxzfHxvKSYmKGkubGVuZ3RoPWMpOmk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaSwwLGMpLG8mJmkucHVzaChvKSksaD1pO31lbHNlIGg9dDt9cmV0dXJuIGh9ZnVuY3Rpb24gcW4odCl7cmV0dXJuIHQ/L15cZCskLy50ZXN0KHQpPyhJdCh0KSxuZXcgSm4oQXQsYnQpKTpudWxsOlpufHw9bmV3IEpuKDAsMCl9WW4ucHJvdG90eXBlLlk9YXQsWW4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB6bj0hMCwkbih0aGlzKS50b1N0cmluZygpfWZpbmFsbHl7em49ITE7fX07dmFyIEpuPWNsYXNze2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5oPXQ+Pj4wLHRoaXMuZz1lPj4+MDt9fTtsZXQgWm47ZnVuY3Rpb24gUW4odCl7cmV0dXJuIHQ/L14tP1xkKyQvLnRlc3QodCk/KEl0KHQpLG5ldyB0cihBdCxidCkpOm51bGw6ZXJ8fD1uZXcgdHIoMCwwKX12YXIgdHI9Y2xhc3N7Y29uc3RydWN0b3IodCxlKXt0aGlzLmg9dD4+PjAsdGhpcy5nPWU+Pj4wO319O2xldCBlcjtmdW5jdGlvbiBucih0LGUsbil7Zm9yKDtuPjB8fGU+MTI3Oyl0LmcucHVzaCgxMjcmZXwxMjgpLGU9KGU+Pj43fG48PDI1KT4+PjAsbj4+Pj03O3QuZy5wdXNoKGUpO31mdW5jdGlvbiBycih0LGUpe2Zvcig7ZT4xMjc7KXQuZy5wdXNoKDEyNyZlfDEyOCksZT4+Pj03O3QuZy5wdXNoKGUpO31mdW5jdGlvbiBpcih0LGUpe2lmKGU+PTApcnIodCxlKTtlbHNlIHtmb3IobGV0IG49MDtuPDk7bisrKXQuZy5wdXNoKDEyNyZlfDEyOCksZT4+PTc7dC5nLnB1c2goMSk7fX1mdW5jdGlvbiBzcih0LGUpe3QuZy5wdXNoKGU+Pj4wJjI1NSksdC5nLnB1c2goZT4+PjgmMjU1KSx0LmcucHVzaChlPj4+MTYmMjU1KSx0LmcucHVzaChlPj4+MjQmMjU1KTt9ZnVuY3Rpb24gb3IodCxlKXswIT09ZS5sZW5ndGgmJih0LmwucHVzaChlKSx0LmgrPWUubGVuZ3RoKTt9ZnVuY3Rpb24gYXIodCxlLG4pe3JyKHQuZyw4KmUrbik7fWZ1bmN0aW9uIGhyKHQsZSl7cmV0dXJuIGFyKHQsZSwyKSxlPXQuZy5lbmQoKSxvcih0LGUpLGUucHVzaCh0LmgpLGV9ZnVuY3Rpb24gY3IodCxlKXt2YXIgbj1lLnBvcCgpO2ZvcihuPXQuaCt0LmcubGVuZ3RoKCktbjtuPjEyNzspZS5wdXNoKDEyNyZufDEyOCksbj4+Pj03LHQuaCsrO2UucHVzaChuKSx0LmgrKzt9ZnVuY3Rpb24gdXIodCxlLG4pe2FyKHQsZSwyKSxycih0Lmcsbi5sZW5ndGgpLG9yKHQsdC5nLmVuZCgpKSxvcih0LG4pO31mdW5jdGlvbiBscih0LGUsbixyKXtudWxsIT1uJiYoZT1ocih0LGUpLHIobix0KSxjcih0LGUpKTt9Y2xhc3MgZnJ7Y29uc3RydWN0b3IodCxlLG4scil7dGhpcy5nPXQsdGhpcy5oPWUsdGhpcy5sPW4sdGhpcy5wYT1yO319ZnVuY3Rpb24gZHIodCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dFswXWluc3RhbmNlb2YgZnI/dDpbZ2ksdF06W3Qsdm9pZCAwXX1mdW5jdGlvbiBwcih0LGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe3ZhciBuPXR0KGUpO2lmKDQmbilyZXR1cm4gZTtmb3IodmFyIHI9MCxpPTA7cjxlLmxlbmd0aDtyKyspe2NvbnN0IG49dChlW3JdKTtudWxsIT1uJiYoZVtpKytdPW4pO31yZXR1cm4gaTxyJiYoZS5sZW5ndGg9aSksbnQoZSwtMTIyODkmKDV8bikpLDImbiYmT2JqZWN0LmZyZWV6ZShlKSxlfX1jb25zdCBncj1TeW1ib2woKTtmdW5jdGlvbiBtcih0KXtsZXQgZT10W2dyXTtpZighZSl7Y29uc3Qgbj1icih0KSxyPVVyKHQpLGk9ci5sO2U9aT8odCxlKT0+aSh0LGUscik6KHQsZSk9Pntmb3IoO0JuKGUpJiY0IT1lLmg7KXt2YXIgaT1lLm07bGV0IG49cltpXTtjb25zdCBhPSFuO2xldCBoPSExO2lmKCFuKXt2YXIgcz1yLlU7aWYocyl7dmFyIG89c1tpXTtvJiYoaD1zLk8/LltpXSwoIWR8fGgpJiYocz15cihvKSkmJihuPXJbaV09cykpO319biYmbihlLHQsaSl8fChpPShzPWUpLmwsR24ocykscy5pYT9zPXZvaWQgMDoobz1zLmcuZy1pLHMuZy5nPWkscz1ObihzLmcsbykpLGk9dCxzJiYobXR8fD1TeW1ib2woKSwobz1pW210XSk/by5wdXNoKHMpOmlbbXRdPVtzXSkpLGEmJm4mJiFoJiZXcisrPDUmJmooKTt9bj09PXZyfHxuPT09RXJ8fG4uanx8KHRbeXR8fD1TeW1ib2woKV09bik7fSx0W2dyXT1lO31yZXR1cm4gZX1mdW5jdGlvbiB5cih0KXtjb25zdCBlPSh0PWRyKHQpKVswXS5nO2lmKHQ9dFsxXSl7Y29uc3Qgbj1tcih0KSxyPVVyKHQpLlQ7cmV0dXJuICh0LGkscyk9PmUodCxpLHMscixuKX1yZXR1cm4gZX1jbGFzcyBfcnt9bGV0IHZyLEVyO2NvbnN0IHdyPVN5bWJvbCgpO2Z1bmN0aW9uIFRyKHQsZSxuKXtjb25zdCByPW5bMV07bGV0IGk7aWYocil7Y29uc3Qgbj1yW3dyXTtpPW4/bi5UOnBlKHJbMF0pLHRbZV09bj8/cjt9aSYmaT09PWZlPyh0Lmd8fCh0Lmc9bmV3IFNldCkpLmFkZChlKTpuWzBdJiYodC5ofHwodC5oPW5ldyBTZXQpKS5hZGQoZSk7fWZ1bmN0aW9uIEFyKHQsZSl7cmV0dXJuIFt0LmwsIWV8fGVbMF0+MD92b2lkIDA6ZV19ZnVuY3Rpb24gYnIodCl7dmFyIGU9dFt3cl07aWYoZSlyZXR1cm4gZTtpZighKGU9U3IodCx0W3dyXT1uZXcgX3IsQXIsQXIsVHIpKS5VJiYhZS5oJiYhZS5nKXtsZXQgbj0hMDtmb3IobGV0IHQgaW4gZSlpc05hTih0KXx8KG49ITEpO24/KHBlKHRbMF0pPT09ZmU/RXI/ZT1FcjooKGU9bmV3IF9yKS5UPXBlKCEwKSxlPUVyPWUpOmU9dnJ8fD1uZXcgX3IsZT10W3dyXT1lKTplLmo9ITA7fXJldHVybiBlfWZ1bmN0aW9uIGtyKHQsZSxuKXt0W2VdPW47fWZ1bmN0aW9uIFNyKHQsZSxuLHIsaT1rcil7ZS5UPXBlKHRbMF0pO2xldCBzPTA7dmFyIG89dFsrK3NdO28mJm8uY29uc3RydWN0b3I9PT1PYmplY3QmJihlLlU9bywiZnVuY3Rpb24iPT10eXBlb2Yobz10Wysrc10pJiYoZS5sPW8sZS5tPXRbKytzXSxvPXRbKytzXSkpO2NvbnN0IGE9e307Zm9yKDtBcnJheS5pc0FycmF5KG8pJiYibnVtYmVyIj09dHlwZW9mIG9bMF0mJm9bMF0+MDspe2Zvcih2YXIgaD0wO2g8by5sZW5ndGg7aCsrKWFbb1toXV09bztvPXRbKytzXTt9Zm9yKGg9MTt2b2lkIDAhPT1vOyl7bGV0IGw7Im51bWJlciI9PXR5cGVvZiBvJiYoaCs9byxvPXRbKytzXSk7dmFyIGM9dm9pZCAwO2lmKG8gaW5zdGFuY2VvZiBmcj9sPW86KGw9bWkscy0tKSxsLnBhKXtvPXRbKytzXSxjPXQ7dmFyIHU9czsiZnVuY3Rpb24iPT10eXBlb2YgbyYmKG89bygpLGNbdV09byksYz1vO31mb3IodT1oKzEsIm51bWJlciI9PXR5cGVvZihvPXRbKytzXSkmJm88MCYmKHUtPW8sbz10Wysrc10pO2g8dTtoKyspe2NvbnN0IHQ9YVtoXTtpKGUsaCxjP3IobCxjLHQpOm4obCx0KSk7fX1yZXR1cm4gZX1jb25zdCB4cj1TeW1ib2woKTtmdW5jdGlvbiBMcih0KXtsZXQgZT10W3hyXTtpZighZSl7Y29uc3Qgbj1Jcih0KTtlPSh0LGUpPT5Ccih0LGUsbiksdFt4cl09ZTt9cmV0dXJuIGV9Y29uc3QgRnI9U3ltYm9sKCk7ZnVuY3Rpb24gUnIodCl7cmV0dXJuIHQuaH1mdW5jdGlvbiBNcih0LGUpe2xldCBuLHI7Y29uc3QgaT10Lmg7cmV0dXJuICh0LHMsbyk9PmkodCxzLG8scnx8PUlyKGUpLlQsbnx8PUxyKGUpKX1mdW5jdGlvbiBJcih0KXtsZXQgZT10W0ZyXTtyZXR1cm4gZXx8KGU9U3IodCx0W0ZyXT17fSxScixNciksTnIodCksZSl9Y29uc3QgUHI9U3ltYm9sKCk7ZnVuY3Rpb24gT3IodCxlKXtjb25zdCBuPXQuZztyZXR1cm4gZT8odCxyLGkpPT5uKHQscixpLGUpOm59ZnVuY3Rpb24gQ3IodCxlLG4pe2NvbnN0IHI9dC5nO2xldCBpLHM7cmV0dXJuICh0LG8sYSk9PnIodCxvLGEsc3x8PVVyKGUpLlQsaXx8PW1yKGUpLG4pfWZ1bmN0aW9uIFVyKHQpe2xldCBlPXRbUHJdO3JldHVybiBlfHwoYnIodCksZT1Tcih0LHRbUHJdPXt9LE9yLENyKSxOcih0KSxlKX1mdW5jdGlvbiBOcih0KXtQciBpbiB0JiZ3ciBpbiB0JiZGciBpbiB0JiYodC5sZW5ndGg9MCk7fWZ1bmN0aW9uIERyKHQsZSl7dmFyIG49dFtlXTtpZihuKXJldHVybiBuO2lmKG49dC5VKXt2YXIgcj1uW2VdO2lmKHIpe3ZhciBpPShyPWRyKHIpKVswXS5oO2lmKHI9clsxXSxuPW4uTz8uW2VdLCFkfHxuKXtpZihyKXtjb25zdCBlPUxyKHIpLHM9SXIocikuVDtuPShuPXQubSk/bihzLGUpOih0LG4scik9PmkodCxuLHIscyxlKTt9ZWxzZSBuPWk7cmV0dXJuIHRbZV09bn19fX1mdW5jdGlvbiBCcih0LGUsbil7Zm9yKHZhciByPWV0KHQpLGk9KyEhKDUxMiZyKS0xLHM9dC5sZW5ndGgsbz01MTImcj8xOjAsYT1zKygyNTYmcj8tMTowKTtvPGE7bysrKXtjb25zdCByPXRbb107aWYobnVsbD09ciljb250aW51ZTtjb25zdCBzPW8taSxhPURyKG4scyk7aWYoIWEpY29udGludWU7Y29uc3QgaD1uLlU7aD8uW3NdJiYhaD8uTz8uW3NdJiZXcisrPDUmJmooKSxhKGUscixzKTt9aWYoMjU2JnIpe3I9dFtzLTFdO2ZvcihsZXQgdCBpbiByKWk9K3QsIU51bWJlci5pc05hTihpKSYmKG51bGwhPShzPXJbdF0pJiYoYT1EcihuLGkpKSkmJigobz1uLlUpPy5baV0mJiFvPy5PPy5baV0mJldyKys8NSYmaigpLGEoZSxzLGkpKTt9aWYodD1tdD90W210XTp2b2lkIDApZm9yKG9yKGUsZS5nLmVuZCgpKSxuPTA7bjx0Lmxlbmd0aDtuKyspb3IoZSxOKHRbbl0pfHxuZXcgVWludDhBcnJheSgwKSk7fWZ1bmN0aW9uIEdyKHQsZSl7cmV0dXJuIG5ldyBmcih0LGUsITEsITEpfWZ1bmN0aW9uIGpyKHQsZSl7cmV0dXJuIG5ldyBmcih0LGUsITAsITEpfWZ1bmN0aW9uIFZyKHQsZSl7cmV0dXJuIG5ldyBmcih0LGUsITEsITApfWZ1bmN0aW9uIFhyKHQsZSxuKXtWZSh0LGV0KHQpLGUsbik7fXZhciBIcj1WcigoZnVuY3Rpb24odCxlLG4scixpKXtyZXR1cm4gMj09PXQuaCYmKHQ9am4odCxnZShbdm9pZCAwLHZvaWQgMF0sciksaSkscHQocj1ldChlKSksKGk9R2UoZSxyLG4pKWluc3RhbmNlb2YgQWU/MCE9KDImaS5MKT8oKGk9aS5aKCkpLnB1c2godCksVmUoZSxyLG4saSkpOmkuT2EodCk6QXJyYXkuaXNBcnJheShpKT8oMiZ0dChpKSYmVmUoZSxyLG4saT1xZShpKSksaS5wdXNoKHQpKTpWZShlLHIsbixbdF0pLCEwKX0pLChmdW5jdGlvbih0LGUsbixyLGkpe2lmKGUgaW5zdGFuY2VvZiBBZSllLmZvckVhY2goKChlLHMpPT57bHIodCxuLGdlKFtzLGVdLHIpLGkpO30pKTtlbHNlIGlmKEFycmF5LmlzQXJyYXkoZSkpZm9yKGxldCBzPTA7czxlLmxlbmd0aDtzKyspe2NvbnN0IG89ZVtzXTtBcnJheS5pc0FycmF5KG8pJiZscih0LG4sZ2UobyxyKSxpKTt9fSkpO2xldCBXcj0wO2Z1bmN0aW9uIHpyKHQsZSxuKXtlPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXQpcmV0dXJuIHQ7Y29uc3QgZT10eXBlb2YgdDtpZigiYmlnaW50Ij09PWUpcmV0dXJuIFN0cmluZyhCaWdJbnQuYXNJbnROKDY0LHQpKTtpZihZdCh0KSl7aWYoInN0cmluZyI9PT1lKXJldHVybiBRdCh0KTtpZigibnVtYmVyIj09PWUpcmV0dXJuIFp0KHQpfX0oZSksbnVsbCE9ZSYmKCJzdHJpbmciPT10eXBlb2YgZSYmUW4oZSksbnVsbCE9ZSYmKGFyKHQsbiwwKSwibnVtYmVyIj09dHlwZW9mIGU/KHQ9dC5nLFN0KGUpLG5yKHQsQXQsYnQpKToobj1RbihlKSxucih0Lmcsbi5oLG4uZykpKSk7fWZ1bmN0aW9uIEtyKHQsZSxuKXtudWxsIT0oZT0kdChlKSkmJm51bGwhPWUmJihhcih0LG4sMCksaXIodC5nLGUpKTt9ZnVuY3Rpb24gWXIodCxlLG4pe251bGwhPShlPXp0KGUpKSYmKGFyKHQsbiwwKSx0LmcuZy5wdXNoKGU/MTowKSk7fWZ1bmN0aW9uICRyKHQsZSxuKXtudWxsIT0oZT1pZShlKSkmJnVyKHQsbixjKGUpKTt9ZnVuY3Rpb24gcXIodCxlLG4scixpKXtscih0LG4sZSBpbnN0YW5jZW9mIFluP2UudTpBcnJheS5pc0FycmF5KGUpP2dlKGUscik6dm9pZCAwLGkpO31mdW5jdGlvbiBKcih0LGUsbil7bnVsbCE9KGU9bnVsbD09ZXx8InN0cmluZyI9PXR5cGVvZiBlfHxJKGUpfHxlIGluc3RhbmNlb2YgRD9lOnZvaWQgMCkmJnVyKHQsbixTbihlKS5idWZmZXIpO31mdW5jdGlvbiBacih0LGUsbil7cmV0dXJuICg1PT09dC5ofHwyPT09dC5oKSYmKGU9WGUoZSxldChlKSxuLDIsITEpLDI9PXQuaD9Ibih0LEluLGUpOmUucHVzaChJbih0LmcpKSwhMCl9dmFyIFFyLHRpPUdyKChmdW5jdGlvbih0LGUsbil7aWYoMSE9PXQuaClyZXR1cm4gITE7dmFyIHI9dC5nO3Q9TW4ocik7Y29uc3QgaT1NbihyKTtyPTIqKGk+PjMxKSsxO2NvbnN0IHM9aT4+PjIwJjIwNDc7cmV0dXJuIHQ9NDI5NDk2NzI5NiooMTA0ODU3NSZpKSt0LFhyKGUsbiwyMDQ3PT1zP3Q/TmFOOnIqKDEvMCk6MD09cz9yKk1hdGgucG93KDIsLTEwNzQpKnQ6cipNYXRoLnBvdygyLHMtMTA3NSkqKHQrNDUwMzU5OTYyNzM3MDQ5NikpLCEwfSksKGZ1bmN0aW9uKHQsZSxuKXtudWxsIT0oZT1XdChlKSkmJihhcih0LG4sMSksdD10LmcsKG49VHR8fD1uZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDgpKSkuc2V0RmxvYXQ2NCgwLCtlLCEwKSxBdD1uLmdldFVpbnQzMigwLCEwKSxidD1uLmdldFVpbnQzMig0LCEwKSxzcih0LEF0KSxzcih0LGJ0KSk7fSkpLGVpPUdyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDU9PT10LmgmJihYcihlLG4sSW4odC5nKSksITApfSksKGZ1bmN0aW9uKHQsZSxuKXtudWxsIT0oZT1XdChlKSkmJihhcih0LG4sNSksdD10LmcseHQoZSksc3IodCxBdCkpO30pKSxuaT1qcihaciwoZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPShlPXByKFd0LGUpKSlmb3IobGV0IG89MDtvPGUubGVuZ3RoO28rKyl7dmFyIHI9dCxpPW4scz1lW29dO251bGwhPXMmJihhcihyLGksNSkscj1yLmcseHQocyksc3IocixBdCkpO319KSkscmk9anIoWnIsKGZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT0oZT1wcihXdCxlKSkmJmUubGVuZ3RoKXthcih0LG4sMikscnIodC5nLDQqZS5sZW5ndGgpO2ZvcihsZXQgcj0wO3I8ZS5sZW5ndGg7cisrKW49dC5nLHh0KGVbcl0pLHNyKG4sQXQpO319KSksaWk9R3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKFhyKGUsbix4bih0LmcsRnQpKSwhMCl9KSx6ciksc2k9R3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKFhyKGUsbiwwPT09KHQ9eG4odC5nLEZ0KSk/dm9pZCAwOnQpLCEwKX0pLHpyKSxvaT1HcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09dC5oJiYoWHIoZSxuLHhuKHQuZyxMdCkpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7bnVsbCE9KGU9ZWUoZSkpJiYoInN0cmluZyI9PXR5cGVvZiBlJiZxbihlKSxudWxsIT1lJiYoYXIodCxuLDApLCJudW1iZXIiPT10eXBlb2YgZT8odD10LmcsU3QoZSksbnIodCxBdCxidCkpOihuPXFuKGUpLG5yKHQuZyxuLmgsbi5nKSkpKTt9KSksYWk9R3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKFhyKGUsbixGbih0LmcpKSwhMCl9KSxLciksaGk9anIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gKDA9PT10Lmh8fDI9PT10LmgpJiYoZT1YZShlLGV0KGUpLG4sMiwhMSksMj09dC5oP0huKHQsRm4sZSk6ZS5wdXNoKEZuKHQuZykpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9cHIoJHQsZSkpJiZlLmxlbmd0aCl7bj1ocih0LG4pO2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKWlyKHQuZyxlW25dKTtjcih0LG4pO319KSksY2k9R3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKFhyKGUsbiwwPT09KHQ9Rm4odC5nKSk/dm9pZCAwOnQpLCEwKX0pLEtyKSx1aT1HcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09dC5oJiYoWHIoZSxuLExuKHQuZykpLCEwKX0pLFlyKSxsaT1HcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09dC5oJiYoWHIoZSxuLCExPT09KHQ9TG4odC5nKSk/dm9pZCAwOnQpLCEwKX0pLFlyKSxmaT1qcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAyPT09dC5oJiYoWmUoZSxuLFFlLHQ9Vm4odCkpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9cHIoaWUsZSkpKWZvcihsZXQgbz0wO288ZS5sZW5ndGg7bysrKXt2YXIgcj10LGk9bixzPWVbb107bnVsbCE9cyYmdXIocixpLGMocykpO319KSksZGk9R3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMj09PXQuaCYmKFhyKGUsbiwiIj09PSh0PVZuKHQpKT92b2lkIDA6dCksITApfSksJHIpLHBpPUdyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDI9PT10LmgmJihYcihlLG4sVm4odCkpLCEwKX0pLCRyKSxnaT1WcigoZnVuY3Rpb24odCxlLG4scixpKXtyZXR1cm4gMj09PXQuaCYmKGpuKHQsc24oZSxyLG4sITApLGkpLCEwKX0pLHFyKSxtaT1WcigoZnVuY3Rpb24odCxlLG4scixpKXtyZXR1cm4gMj09PXQuaCYmKGpuKHQsc24oZSxyLG4pLGkpLCEwKX0pLHFyKTtRcj1uZXcgZnIoKGZ1bmN0aW9uKHQsZSxuLHIsaSl7aWYoMiE9PXQuaClyZXR1cm4gITE7cj1nZSh2b2lkIDAscik7bGV0IHM9ZXQoZSk7cHQocyk7bGV0IG89WGUoZSxzLG4sMyk7cmV0dXJuIHM9ZXQoZSksNCZ0dChvKSYmKG89SChvKSxudChvLC0yMDc5JigxfHR0KG8pKSksVmUoZSxzLG4sbykpLG8ucHVzaChyKSxqbih0LHIsaSksITB9KSwoZnVuY3Rpb24odCxlLG4scixpKXtpZihBcnJheS5pc0FycmF5KGUpKWZvcihsZXQgcz0wO3M8ZS5sZW5ndGg7cysrKXFyKHQsZVtzXSxuLHIsaSk7fSksITAsITApO3ZhciB5aT1WcigoZnVuY3Rpb24odCxlLG4scixpLHMpe3JldHVybiAyPT09dC5oJiYobm4oZSxldChlKSxzLG4pLGpuKHQsZT1zbihlLHIsbiksaSksITApfSkscXIpLF9pPUdyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDI9PT10LmgmJihYcihlLG4sWG4odCkpLCEwKX0pLEpyKSx2aT1qcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAoMD09PXQuaHx8Mj09PXQuaCkmJihlPVhlKGUsZXQoZSksbiwyLCExKSwyPT10Lmg/SG4odCxSbixlKTplLnB1c2goUm4odC5nKSksITApfSksKGZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT0oZT1wcihxdCxlKSkpZm9yKGxldCBvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciByPXQsaT1uLHM9ZVtvXTtudWxsIT1zJiYoYXIocixpLDApLHJyKHIuZyxzKSk7fX0pKSxFaT1HcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09dC5oJiYoWHIoZSxuLEZuKHQuZykpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7bnVsbCE9KGU9JHQoZSkpJiYoZT1wYXJzZUludChlLDEwKSxhcih0LG4sMCksaXIodC5nLGUpKTt9KSk7Y2xhc3Mgd2l7Y29uc3RydWN0b3IodCxlKXt0aGlzLmg9dCx0aGlzLmc9ZSx0aGlzLmw9YW4sdGhpcy5tPXVuLHRoaXMuZGVmYXVsdFZhbHVlPXZvaWQgMDt9fWZ1bmN0aW9uIFRpKHQsZSl7cmV0dXJuIG5ldyB3aSh0LGUpfWZ1bmN0aW9uIEFpKHQsZSl7cmV0dXJuIChuLHIpPT57aWYoV24ubGVuZ3RoKXtjb25zdCB0PVduLnBvcCgpO3QubyhyKSxPbih0LmcsbixyKSxuPXQ7fWVsc2Ugbj1uZXcgY2xhc3N7Y29uc3RydWN0b3IodCxlKXtpZihEbi5sZW5ndGgpe2NvbnN0IG49RG4ucG9wKCk7T24obix0LGUpLHQ9bjt9ZWxzZSB0PW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuaD1udWxsLHRoaXMubT0hMSx0aGlzLmc9dGhpcy5sPXRoaXMuaj0wLE9uKHRoaXMsdCxlKTt9Y2xlYXIoKXt0aGlzLmg9bnVsbCx0aGlzLm09ITEsdGhpcy5nPXRoaXMubD10aGlzLmo9MCx0aGlzLmRhPSExO319KHQsZSk7dGhpcy5nPXQsdGhpcy5sPXRoaXMuZy5nLHRoaXMuaD10aGlzLm09LTEsdGhpcy5vKGUpO31vKHtpYTp0PSExfT17fSl7dGhpcy5pYT10O319KG4scik7dHJ5e2NvbnN0IHI9bmV3IHQscz1yLnU7bXIoZSkocyxuKTt2YXIgaT1yO31maW5hbGx5e24uZy5jbGVhcigpLG4ubT0tMSxuLmg9LTEsV24ubGVuZ3RoPDEwMCYmV24ucHVzaChuKTt9cmV0dXJuIGl9fWZ1bmN0aW9uIGJpKHQpe3JldHVybiBmdW5jdGlvbigpe2NvbnN0IGU9bmV3IGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5sPVtdLHRoaXMuaD0wLHRoaXMuZz1uZXcgY2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmc9W107fWxlbmd0aCgpe3JldHVybiB0aGlzLmcubGVuZ3RofWVuZCgpe2NvbnN0IHQ9dGhpcy5nO3JldHVybiB0aGlzLmc9W10sdH19O319O0JyKHRoaXMudSxlLElyKHQpKSxvcihlLGUuZy5lbmQoKSk7Y29uc3Qgbj1uZXcgVWludDhBcnJheShlLmgpLHI9ZS5sLGk9ci5sZW5ndGg7bGV0IHM9MDtmb3IobGV0IHQ9MDt0PGk7dCsrKXtjb25zdCBlPXJbdF07bi5zZXQoZSxzKSxzKz1lLmxlbmd0aDt9cmV0dXJuIGUubD1bbl0sbn19dmFyIGtpPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sU2k9WzAsZGksR3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMj09PXQuaCYmKFhyKGUsbiwodD1Ybih0KSk9PT1VKCk/dm9pZCAwOnQpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9ZSl7aWYoZSBpbnN0YW5jZW9mIFluKXtjb25zdCByPWUuUmE7cmV0dXJuIHZvaWQociYmKGU9cihlKSxudWxsIT1lJiZ1cih0LG4sU24oZSkuYnVmZmVyKSkpfWlmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJufUpyKHQsZSxuKTt9KSldLHhpPVswLGFpLEVpLHVpLC0xLGhpLEVpLC0xXSxMaT1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt9fSxGaT1bMCx1aSxwaSx1aSxFaSwtMSxqcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAoMD09PXQuaHx8Mj09PXQuaCkmJihlPVhlKGUsZXQoZSksbiwyLCExKSwyPT10Lmg/SG4odCxQbixlKTplLnB1c2goRm4odC5nKSksITApfSksKGZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT0oZT1wcigkdCxlKSkmJmUubGVuZ3RoKXtuPWhyKHQsbik7Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspaXIodC5nLGVbbl0pO2NyKHQsbik7fX0pKSxwaSwtMSxbMCx1aSwtMV0sRWksdWldLFJpPVswLHBpLC0yXSxNaT1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt9fSxJaT1bMF0sUGk9WzAsYWksdWksMSx1aSwtM10sT2k9WzAscGksdWksLTEsYWksWzAsWzEsMiwzLDQsNSw2XSx5aSxJaSx5aSxGaSx5aSxSaSx5aSxQaSx5aSx4aSx5aSxbMCxwaSwtMl1dLFswLHBpXSx1aSxbMCxbMSwzXSxbMiw0XSx5aSxbMCxoaV0sLTEseWksWzAsZmldLC0xLFFyLFswLHBpLC0xXV0scGldLENpPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCwyKTt9fSxVaT17fSxOaT1VaS5PPXt9O1VpWzMzNjc4Mzg2M109T2ksTmlbMzM2NzgzODYzXT0xO3ZhciBEaT1bMCxzaSwtMSxsaSwtMyxzaSxoaSxkaSxjaSxzaSwtMSxsaSxjaSxsaSwtMixkaV07ZnVuY3Rpb24gQmkodCxlKXtKZSh0LDIscmUoZSksIiIpO31mdW5jdGlvbiBHaSh0LGUpe1plKHQudSwzLG5lLGUpO31mdW5jdGlvbiBqaSh0LGUpe1plKHQudSw0LG5lLGUpO312YXIgVmk9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LDUwMCk7fW8odCl7cmV0dXJuIHVuKHRoaXMsMCw3LHQpfX0sWGk9Wy0xLHtPOnt9fV0sSGk9WzAscGksMSxYaV0sV2k9WzAscGksZmksWGldO2Z1bmN0aW9uIHppKHQsZSl7cG4odCwxLFZpLGUpO31mdW5jdGlvbiBLaSh0LGUpe1plKHQudSwxMCxuZSxlKTt9ZnVuY3Rpb24gWWkodCxlKXtaZSh0LnUsMTUsbmUsZSk7fXZhciAkaT1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsNTAwKTt9byh0KXtyZXR1cm4gdW4odGhpcywwLDEwMDEsdCl9fSxxaT1bLTUwMCxRcixbLTUwMCxkaSwtMSxmaSwtMyxbLTIsVWksdWldLFFyLFNpLGNpLC0xLEhpLFdpLFFyLFswLGRpLGxpXSxkaSxEaSxjaSxmaSw5ODcsZmldLDQsUXIsWy01MDAscGksLTEsWy0xLHtPOnt9fV0sOTk4LHBpXSxRcixbLTUwMCxwaSxmaSwtMSxbLTIse086e319LHVpXSw5OTcsZmksLTFdLGNpLFFyLFstNTAwLHBpLGZpLFhpLDk5OCxmaV0sZmksY2ksSGksV2ksUXIsWzAsZGksLTEsWGldLGZpLC0yLERpLGRpLC0xLGxpLDk3OSxYaSxRcixTaV07JGkucHJvdG90eXBlLmc9YmkocWkpO3ZhciBKaT1BaSgkaSxxaSksWmk9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxRaT1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO31nKCl7cmV0dXJuIGNuKHRoaXMsWmksMSl9fSx0cz1bMCxRcixbMCxhaSxlaSxwaSwtMV1dLGVzPUFpKFFpLHRzKSxucz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LHJzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0saXM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9aCgpe3JldHVybiBhbih0aGlzLG5zLDIpfWcoKXtyZXR1cm4gY24odGhpcyxycyw1KX19LHNzPUFpKGNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sWzAsZmksaGkscmksWzAsRWksWzAsYWksLTNdLFswLGVpLC0zXSxbMCxhaSwtMSxbMCxRcixbMCxhaSwtMl1dXSxRcixbMCxlaSwtMSxwaSxlaV1dLHBpLC0xLGlpLFFyLFswLGFpLGVpXSxmaSxpaV0pLG9zPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sYXM9QWkoY2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxbMCxRcixbMCxlaSwtNF1dKSxocz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LGNzPUFpKGNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sWzAsUXIsWzAsZWksLTRdXSksdXM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxscz1bMCxhaSwtMSxyaSxFaV0sZnM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7fX07ZnMucHJvdG90eXBlLmc9YmkoWzAsZWksLTQsaWldKTt2YXIgZHM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxwcz1BaShjbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LFswLFFyLFswLDEsYWkscGksdHNdLGlpXSksZ3M9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxtcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO31xYSgpe2NvbnN0IHQ9V2UodGhpcyk7cmV0dXJuIG51bGw9PXQ/VSgpOnR9fSx5cz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LF9zPVsxLDJdLHZzPUFpKGNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sWzAsUXIsWzAsX3MseWksWzAscmldLHlpLFswLF9pXSxhaSxwaV0saWldKSxFcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LHdzPVswLHBpLGFpLGVpLGZpLC0xXSxUcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LEFzPVswLHVpLC0xXSxicz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LGtzPVsxLDIsMyw0LDVdLFNzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fWcoKXtyZXR1cm4gbnVsbCE9V2UodGhpcyl9aCgpe3JldHVybiBudWxsIT1pZShEZSh0aGlzLDIpKX19LHhzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fWcoKXtyZXR1cm4genQoRGUodGhpcywyKSk/PyExfX0sTHM9WzAsX2kscGksWzAsYWksaWksLTFdLFswLG9pLGlpXV0sRnM9WzAsTHMsdWksWzAsa3MseWksUGkseWksRmkseWkseGkseWksSWkseWksUmldLEVpXSxScz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LE1zPVswLEZzLGVpLC0xLGFpXSxJcz1UaSg1MDIxNDE4OTcsUnMpO1VpWzUwMjE0MTg5N109TXMsTmlbNTAyMTQxODk3XT0xO3ZhciBQcz1bMCxMc107VWlbNTEyNDk5MjAwXT1Qczt2YXIgT3M9WzAsUHNdO1VpWzUxNTcyMzUwNl09T3M7dmFyIENzPUFpKGNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sWzAsWzAsRWksLTEsbmksdmldLGxzXSksVXM9WzAsRnNdO1VpWzUwODk4MTc2OF09VXM7dmFyIE5zPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sRHM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxCcz1bMCxGcyxlaSxVcyx1aV0sR3M9WzAsRnMsTXMsQnMsZWksT3NdO1VpWzUwODk2ODE0OV09QnM7dmFyIGpzPVRpKDUwODk2ODE1MCxEcyk7VWlbNTA4OTY4MTUwXT1HcyxOaVs1MDg5NjgxNTBdPTEsTmlbNTA4OTY4MTQ5XT0xO3ZhciBWcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LFhzPVRpKDUxMzkxNjIyMCxWcyk7VWlbNTEzOTE2MjIwXT1bMCxGcyxHcyxhaV0sTmlbNTEzOTE2MjIwXT0xO3ZhciBIcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO31oKCl7cmV0dXJuIGFuKHRoaXMsRXMsMil9Zygpe2plKHRoaXMsMik7fX0sV3M9WzAsRnMsd3NdO1VpWzQ3ODgyNTQ2NV09V3MsTmlbNDc4ODI1NDY1XT0xO3ZhciB6cz1bMCxGc107VWlbNDc4ODI1NDIyXT16czt2YXIgS3M9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxZcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LCRzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0scXM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxKcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LFpzPVswLEZzLHpzLFdzLC0xXSxRcz1bMCxGcyxlaSxhaV0sdG89WzAsRnMsZWldLGVvPVswLEZzLFFzLHRvLGVpXSxubz1bMCxGcyxlbyxac107VWlbNDYzMzcwNDUyXT1acyxVaVs0NjQ4NjQyODhdPVFzLFVpWzQ3NDQ3MjQ3MF09dG87dmFyIHJvPVRpKDQ2MjcxMzIwMixxcyk7VWlbNDYyNzEzMjAyXT1lbzt2YXIgaW89VGkoNDc5MDk3MDU0LEpzKTtVaVs0NzkwOTcwNTRdPW5vLE5pWzQ3OTA5NzA1NF09MSxOaVs0NjMzNzA0NTJdPTEsTmlbNDY0ODY0Mjg4XT0xLE5pWzQ2MjcxMzIwMl09MSxOaVs0NzQ0NzI0NzBdPTE7dmFyIHNvPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sb289Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxhbz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LGhvPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IoKXtzdXBlcigpO319LGNvPVswLEZzLGVpLC0xLGFpXSx1bz1bMCxGcyxlaSx1aV07aG8ucHJvdG90eXBlLmc9YmkoWzAsRnMsdG8sWzAsRnNdLE1zLEJzLGNvLHVvXSksVWlbNTE0Nzc0ODEzXT1jbyxVaVs1MTg5MjgzODRdPXVvO3ZhciBsbz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LGZvPVRpKDQ1NjM4MzM4Myxsbyk7VWlbNDU2MzgzMzgzXT1bMCxGcyx3c10sTmlbNDU2MzgzMzgzXT0xO3ZhciBwbz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LGdvPVRpKDQ3NjM0ODE4Nyxwbyk7VWlbNDc2MzQ4MTg3XT1bMCxGcyxBc10sTmlbNDc2MzQ4MTg3XT0xO3ZhciBtbz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LHlvPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sX289WzAsRWksLTFdLHZvPVRpKDQ1ODEwNTg3NixjbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO31nKCl7dmFyIHQ9dGhpcy51O2NvbnN0IGU9ZXQodCk7Y29uc3Qgbj0yJmU7cmV0dXJuIHQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXlvO2NvbnN0IGk9MiZlO2xldCBzPSExO2lmKG51bGw9PW4pe2lmKGkpcmV0dXJuIExlKCk7bj1bXTt9ZWxzZSBpZihuLmNvbnN0cnVjdG9yPT09QWUpe2lmKDA9PSgyJm4uTCl8fGkpcmV0dXJuIG47bj1uLlooKTt9ZWxzZSBBcnJheS5pc0FycmF5KG4pP3M9ISEoMiZ0dChuKSk6bj1bXTtpZihpKXtpZighbi5sZW5ndGgpcmV0dXJuIExlKCk7c3x8KHM9ITAscnQobikpO31lbHNlIHMmJihzPSExLG49cWUobikpO3JldHVybiBzfHwoNjQmdHQobik/UShuLDMyKTozMiZlJiZaKG4sMzIpKSxWZSh0LGUsMixyPW5ldyBBZShuLHIsb2Usdm9pZCAwKSwhMSkscn0odCxlLEdlKHQsZSwyKSksIW4mJnlvJiYodC50YT0hMCksdH19KTtVaVs0NTgxMDU4NzZdPVswLF9vLEhyLFshMCxpaSxbMCxwaSwtMSxmaV1dXSxOaVs0NTgxMDU4NzZdPTE7dmFyIEVvPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sd289VGkoNDU4MTA1NzU4LEVvKTtVaVs0NTgxMDU3NThdPVswLEZzLHBpLF9vXSxOaVs0NTgxMDU3NThdPTE7dmFyIFRvPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sQW89VGkoNDQzNDQyMDU4LFRvKTtVaVs0NDM0NDIwNThdPVswLEZzLHBpLGFpLGVpLGZpLC0xXSxOaVs0NDM0NDIwNThdPTEsTmlbNTE0Nzc0ODEzXT0xO3ZhciBibz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LGtvPVRpKDUxNjU4NzIzMCxibyk7ZnVuY3Rpb24gU28odCxlKXtyZXR1cm4gZT1lP2UuY2xvbmUoKTpuZXcgRXMsdm9pZCAwIT09dC5kaXNwbGF5TmFtZXNMb2NhbGU/amUoZSwxLHJlKHQuZGlzcGxheU5hbWVzTG9jYWxlKSk6dm9pZCAwPT09dC5kaXNwbGF5TmFtZXNMb2NhbGUmJmplKGUsMSksdm9pZCAwIT09dC5tYXhSZXN1bHRzP0VuKGUsMix0Lm1heFJlc3VsdHMpOiJtYXhSZXN1bHRzImluIHQmJmplKGUsMiksdm9pZCAwIT09dC5zY29yZVRocmVzaG9sZD93bihlLDMsdC5zY29yZVRocmVzaG9sZCk6InNjb3JlVGhyZXNob2xkImluIHQmJmplKGUsMyksdm9pZCAwIT09dC5jYXRlZ29yeUFsbG93bGlzdD9UbihlLDQsdC5jYXRlZ29yeUFsbG93bGlzdCk6ImNhdGVnb3J5QWxsb3dsaXN0ImluIHQmJmplKGUsNCksdm9pZCAwIT09dC5jYXRlZ29yeURlbnlsaXN0P1RuKGUsNSx0LmNhdGVnb3J5RGVueWxpc3QpOiJjYXRlZ29yeURlbnlsaXN0ImluIHQmJmplKGUsNSksZX1mdW5jdGlvbiB4byh0LGU9LTEsbj0iIil7cmV0dXJuIHtjYXRlZ29yaWVzOnQubWFwKCh0PT4oe2luZGV4OmduKG1uKHQsMSksMCk/Py0xLHNjb3JlOnluKHQsMik/PzAsY2F0ZWdvcnlOYW1lOl9uKHQsMyk/PyIiLGRpc3BsYXlOYW1lOl9uKHQsNCk/PyIifSkpKSxoZWFkSW5kZXg6ZSxoZWFkTmFtZTpufX1mdW5jdGlvbiBMbyh0KXt2YXIgZT16ZSh0LDMsV3QpLG49emUodCwyLCR0KSxyPXplKHQsMSxpZSksaT16ZSh0LDksaWUpO2NvbnN0IHM9e2NhdGVnb3JpZXM6W10sa2V5cG9pbnRzOltdfTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKylzLmNhdGVnb3JpZXMucHVzaCh7c2NvcmU6ZVt0XSxpbmRleDpuW3RdPz8tMSxjYXRlZ29yeU5hbWU6clt0XT8/IiIsZGlzcGxheU5hbWU6aVt0XT8/IiJ9KTtpZigoZT1hbih0LGlzLDQpPy5oKCkpJiYocy5ib3VuZGluZ0JveD17b3JpZ2luWDptbihlLDEpPz8wLG9yaWdpblk6bW4oZSwyKT8/MCx3aWR0aDptbihlLDMpPz8wLGhlaWdodDptbihlLDQpPz8wLGFuZ2xlOjB9KSxhbih0LGlzLDQpPy5nKCkubGVuZ3RoKWZvcihjb25zdCBlIG9mIGFuKHQsaXMsNCkuZygpKXMua2V5cG9pbnRzLnB1c2goe3g6SGUoZSwxKT8/MCx5OkhlKGUsMik/PzAsc2NvcmU6SGUoZSw0KT8/MCxsYWJlbDppZShEZShlLDMpKT8/IiJ9KTtyZXR1cm4gc31mdW5jdGlvbiBGbyh0KXtjb25zdCBlPVtdO2Zvcihjb25zdCBuIG9mIGNuKHQsaHMsMSkpZS5wdXNoKHt4OnluKG4sMSk/PzAseTp5bihuLDIpPz8wLHo6eW4obiwzKT8/MCx2aXNpYmlsaXR5OnluKG4sNCk/PzB9KTtyZXR1cm4gZX1mdW5jdGlvbiBSbyh0KXtjb25zdCBlPVtdO2Zvcihjb25zdCBuIG9mIGNuKHQsb3MsMSkpZS5wdXNoKHt4OnluKG4sMSk/PzAseTp5bihuLDIpPz8wLHo6eW4obiwzKT8/MCx2aXNpYmlsaXR5OnluKG4sNCk/PzB9KTtyZXR1cm4gZX1mdW5jdGlvbiBNbyh0KXtyZXR1cm4gQXJyYXkuZnJvbSh0LCh0PT50PjEyNz90LTI1Njp0KSl9ZnVuY3Rpb24gSW8odCxlKXtpZih0Lmxlbmd0aCE9PWUubGVuZ3RoKXRocm93IEVycm9yKGBDYW5ub3QgY29tcHV0ZSBjb3NpbmUgc2ltaWxhcml0eSBiZXR3ZWVuIGVtYmVkZGluZ3Mgb2YgZGlmZmVyZW50IHNpemVzICgke3QubGVuZ3RofSB2cy4gJHtlLmxlbmd0aH0pLmApO2xldCBuPTAscj0wLGk9MDtmb3IobGV0IHM9MDtzPHQubGVuZ3RoO3MrKyluKz10W3NdKmVbc10scis9dFtzXSp0W3NdLGkrPWVbc10qZVtzXTtpZihyPD0wfHxpPD0wKXRocm93IEVycm9yKCJDYW5ub3QgY29tcHV0ZSBjb3NpbmUgc2ltaWxhcml0eSBvbiBlbWJlZGRpbmcgd2l0aCAwIG5vcm0uIik7cmV0dXJuIG4vTWF0aC5zcXJ0KHIqaSl9bGV0IFBvO1VpWzUxNjU4NzIzMF09WzAsRnMsY28sdW8sZWldLE5pWzUxNjU4NzIzMF09MSxOaVs1MTg5MjgzODRdPTE7Y29uc3QgT289bmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNSwxLDk2LDAsMSwxMjMsMywyLDEsMCwxMCwxMCwxLDgsMCw2NSwwLDI1MywxNSwyNTMsOTgsMTFdKTthc3luYyBmdW5jdGlvbiBDbygpe2lmKHZvaWQgMD09PVBvKXRyeXthd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShPbyksUG89ITA7fWNhdGNoe1BvPSExO31yZXR1cm4gUG99YXN5bmMgZnVuY3Rpb24gVW8odCxlPSIiKXtjb25zdCBuPWF3YWl0IENvKCk/Indhc21faW50ZXJuYWwiOiJ3YXNtX25vc2ltZF9pbnRlcm5hbCI7cmV0dXJuIHt3YXNtTG9hZGVyUGF0aDpgJHtlfS8ke3R9XyR7bn0uanNgLHdhc21CaW5hcnlQYXRoOmAke2V9LyR7dH1fJHtufS53YXNtYH19dmFyIE5vPWNsYXNze307ZnVuY3Rpb24gRG8oKXt2YXIgdD1uYXZpZ2F0b3I7cmV0dXJuICJ1bmRlZmluZWQiIT10eXBlb2YgT2Zmc2NyZWVuQ2FudmFzJiYoIWZ1bmN0aW9uKHQ9bmF2aWdhdG9yKXtyZXR1cm4gKHQ9dC51c2VyQWdlbnQpLmluY2x1ZGVzKCJTYWZhcmkiKSYmIXQuaW5jbHVkZXMoIkNocm9tZSIpfSh0KXx8ISEoKHQ9dC51c2VyQWdlbnQubWF0Y2goL1ZlcnNpb25cLyhbXGRdKykuKlNhZmFyaS8pKSYmdC5sZW5ndGg+PTEmJk51bWJlcih0WzFdKT49MTcpKX1hc3luYyBmdW5jdGlvbiBCbyh0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgaW1wb3J0U2NyaXB0cyl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtyZXR1cm4gZS5zcmM9dC50b1N0cmluZygpLGUuY3Jvc3NPcmlnaW49ImFub255bW91cyIsbmV3IFByb21pc2UoKCh0LG4pPT57ZS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwoKCk9Pnt0KCk7fSksITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCh0PT57bih0KTt9KSwhMSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKTt9KSl9aW1wb3J0U2NyaXB0cyh0LnRvU3RyaW5nKCkpO31mdW5jdGlvbiBHbyh0KXtyZXR1cm4gdm9pZCAwIT09dC52aWRlb1dpZHRoP1t0LnZpZGVvV2lkdGgsdC52aWRlb0hlaWdodF06dm9pZCAwIT09dC5uYXR1cmFsV2lkdGg/W3QubmF0dXJhbFdpZHRoLHQubmF0dXJhbEhlaWdodF06dm9pZCAwIT09dC5kaXNwbGF5V2lkdGg/W3QuZGlzcGxheVdpZHRoLHQuZGlzcGxheUhlaWdodF06W3Qud2lkdGgsdC5oZWlnaHRdfWZ1bmN0aW9uIGpvKHQsZSxuKXt0Lm18fGNvbnNvbGUuZXJyb3IoIk5vIHdhc20gbXVsdGlzdHJlYW0gc3VwcG9ydCBkZXRlY3RlZDogZW5zdXJlIGRlcGVuZGVuY3kgaW5jbHVzaW9uIG9mIDpnbF9ncmFwaF9ydW5uZXJfaW50ZXJuYWxfbXVsdGlfaW5wdXQgdGFyZ2V0IiksbihlPXQuaS5zdHJpbmdUb05ld1VURjgoZSkpLHQuaS5fZnJlZShlKTt9ZnVuY3Rpb24gVm8odCxlLG4pe2lmKCF0LmkuY2FudmFzKXRocm93IEVycm9yKCJObyBPcGVuR0wgY2FudmFzIGNvbmZpZ3VyZWQuIik7aWYobj90LmkuX2JpbmRUZXh0dXJlVG9TdHJlYW0obik6dC5pLl9iaW5kVGV4dHVyZVRvQ2FudmFzKCksIShuPXQuaS5jYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wyIil8fHQuaS5jYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wiKSkpdGhyb3cgRXJyb3IoIkZhaWxlZCB0byBvYnRhaW4gV2ViR0wgY29udGV4dCBmcm9tIHRoZSBwcm92aWRlZCBjYW52YXMuIGBnZXRDb250ZXh0KClgIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2l0aCBgd2ViZ2xgIG9yIGB3ZWJnbDJgLiIpO3QuaS5ncHVPcmlnaW5Gb3JXZWJUZXh0dXJlc0lzQm90dG9tTGVmdCYmbi5waXhlbFN0b3JlaShuLlVOUEFDS19GTElQX1lfV0VCR0wsITApLG4udGV4SW1hZ2UyRChuLlRFWFRVUkVfMkQsMCxuLlJHQkEsbi5SR0JBLG4uVU5TSUdORURfQllURSxlKSx0LmkuZ3B1T3JpZ2luRm9yV2ViVGV4dHVyZXNJc0JvdHRvbUxlZnQmJm4ucGl4ZWxTdG9yZWkobi5VTlBBQ0tfRkxJUF9ZX1dFQkdMLCExKTtjb25zdFtyLGldPUdvKGUpO3JldHVybiAhdC5sfHxyPT09dC5pLmNhbnZhcy53aWR0aCYmaT09PXQuaS5jYW52YXMuaGVpZ2h0fHwodC5pLmNhbnZhcy53aWR0aD1yLHQuaS5jYW52YXMuaGVpZ2h0PWkpLFtyLGldfWZ1bmN0aW9uIFhvKHQsZSxuKXt0Lm18fGNvbnNvbGUuZXJyb3IoIk5vIHdhc20gbXVsdGlzdHJlYW0gc3VwcG9ydCBkZXRlY3RlZDogZW5zdXJlIGRlcGVuZGVuY3kgaW5jbHVzaW9uIG9mIDpnbF9ncmFwaF9ydW5uZXJfaW50ZXJuYWxfbXVsdGlfaW5wdXQgdGFyZ2V0Iik7Y29uc3Qgcj1uZXcgVWludDMyQXJyYXkoZS5sZW5ndGgpO2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKXJbbl09dC5pLnN0cmluZ1RvTmV3VVRGOChlW25dKTtlPXQuaS5fbWFsbG9jKDQqci5sZW5ndGgpLHQuaS5IRUFQVTMyLnNldChyLGU+PjIpLG4oZSk7Zm9yKGNvbnN0IGUgb2Ygcil0LmkuX2ZyZWUoZSk7dC5pLl9mcmVlKGUpO31mdW5jdGlvbiBIbyh0LGUsbil7dC5pLnNpbXBsZUxpc3RlbmVycz10Lmkuc2ltcGxlTGlzdGVuZXJzfHx7fSx0Lmkuc2ltcGxlTGlzdGVuZXJzW2VdPW47fWZ1bmN0aW9uIFdvKHQsZSxuKXtsZXQgcj1bXTt0Lmkuc2ltcGxlTGlzdGVuZXJzPXQuaS5zaW1wbGVMaXN0ZW5lcnN8fHt9LHQuaS5zaW1wbGVMaXN0ZW5lcnNbZV09KHQsZSxpKT0+e2U/KG4ocixpKSxyPVtdKTpyLnB1c2godCk7fTt9Tm8uZm9yVmlzaW9uVGFza3M9ZnVuY3Rpb24odCl7cmV0dXJuIFVvKCJ2aXNpb24iLHQpfSxOby5mb3JUZXh0VGFza3M9ZnVuY3Rpb24odCl7cmV0dXJuIFVvKCJ0ZXh0Iix0KX0sTm8uZm9yR2VuQWlFeHBlcmltZW50YWxUYXNrcz1mdW5jdGlvbih0KXtyZXR1cm4gVW8oImdlbmFpX2V4cGVyaW1lbnRhbCIsdCl9LE5vLmZvckdlbkFpVGFza3M9ZnVuY3Rpb24odCl7cmV0dXJuIFVvKCJnZW5haSIsdCl9LE5vLmZvckF1ZGlvVGFza3M9ZnVuY3Rpb24odCl7cmV0dXJuIFVvKCJhdWRpbyIsdCl9LE5vLmlzU2ltZFN1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiBDbygpfTthc3luYyBmdW5jdGlvbiB6byh0LGUsbixyKXtyZXR1cm4gdD1hd2FpdChhc3luYyh0LGUsbixyLGkpPT57aWYoZSYmYXdhaXQgQm8oZSksIXNlbGYuTW9kdWxlRmFjdG9yeSl0aHJvdyBFcnJvcigiTW9kdWxlRmFjdG9yeSBub3Qgc2V0LiIpO2lmKG4mJihhd2FpdCBCbyhuKSwhc2VsZi5Nb2R1bGVGYWN0b3J5KSl0aHJvdyBFcnJvcigiTW9kdWxlRmFjdG9yeSBub3Qgc2V0LiIpO3JldHVybiBzZWxmLk1vZHVsZSYmaSYmKChlPXNlbGYuTW9kdWxlKS5sb2NhdGVGaWxlPWkubG9jYXRlRmlsZSxpLm1haW5TY3JpcHRVcmxPckJsb2ImJihlLm1haW5TY3JpcHRVcmxPckJsb2I9aS5tYWluU2NyaXB0VXJsT3JCbG9iKSksaT1hd2FpdCBzZWxmLk1vZHVsZUZhY3Rvcnkoc2VsZi5Nb2R1bGV8fGkpLHNlbGYuTW9kdWxlRmFjdG9yeT1zZWxmLk1vZHVsZT12b2lkIDAsbmV3IHQoaSxyKX0pKHQsbi53YXNtTG9hZGVyUGF0aCxuLmFzc2V0TG9hZGVyUGF0aCxlLHtsb2NhdGVGaWxlOnQ9PnQuZW5kc1dpdGgoIi53YXNtIik/bi53YXNtQmluYXJ5UGF0aC50b1N0cmluZygpOm4uYXNzZXRCaW5hcnlQYXRoJiZ0LmVuZHNXaXRoKCIuZGF0YSIpP24uYXNzZXRCaW5hcnlQYXRoLnRvU3RyaW5nKCk6dH0pLGF3YWl0IHQubyhyKSx0fWZ1bmN0aW9uIEtvKHQsZSl7Y29uc3Qgbj1hbih0LmJhc2VPcHRpb25zLFNzLDEpfHxuZXcgU3M7InN0cmluZyI9PXR5cGVvZiBlPyhqZShuLDIscmUoZSkpLGplKG4sMSkpOmUgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYoamUobiwxLGx0KGUsITEsITEpKSxqZShuLDIpKSx1bih0LmJhc2VPcHRpb25zLDAsMSxuKTt9ZnVuY3Rpb24gWW8odCl7dHJ5e2NvbnN0IGU9dC5HLmxlbmd0aDtpZigxPT09ZSl0aHJvdyBFcnJvcih0LkdbMF0ubWVzc2FnZSk7aWYoZT4xKXRocm93IEVycm9yKCJFbmNvdW50ZXJlZCBtdWx0aXBsZSBlcnJvcnM6ICIrdC5HLm1hcCgodD0+dC5tZXNzYWdlKSkuam9pbigiLCAiKSl9ZmluYWxseXt0Lkc9W107fX1mdW5jdGlvbiAkbyh0LGUpe3QuQj1NYXRoLm1heCh0LkIsZSk7fWZ1bmN0aW9uIHFvKHQsZSl7dC5BPW5ldyBWaSxCaSh0LkEsIlBhc3NUaHJvdWdoQ2FsY3VsYXRvciIpLEdpKHQuQSwiZnJlZV9tZW1vcnkiKSxqaSh0LkEsImZyZWVfbWVtb3J5X3VudXNlZF9vdXQiKSxLaShlLCJmcmVlX21lbW9yeSIpLHppKGUsdC5BKTt9ZnVuY3Rpb24gSm8odCxlKXtHaSh0LkEsZSksamkodC5BLGUrIl91bnVzZWRfb3V0Iik7fWZ1bmN0aW9uIFpvKHQpe3QuZy5hZGRCb29sVG9TdHJlYW0oITAsImZyZWVfbWVtb3J5Iix0LkIpO312YXIgUW89Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5nPXQsdGhpcy5HPVtdLHRoaXMuQj0wLHRoaXMuZy5zZXRBdXRvUmVuZGVyVG9TY3JlZW4oITEpO31sKHQsZT0hMCl7aWYoZSl7Y29uc3QgZT10LmJhc2VPcHRpb25zfHx7fTtpZih0LmJhc2VPcHRpb25zPy5tb2RlbEFzc2V0QnVmZmVyJiZ0LmJhc2VPcHRpb25zPy5tb2RlbEFzc2V0UGF0aCl0aHJvdyBFcnJvcigiQ2Fubm90IHNldCBib3RoIGJhc2VPcHRpb25zLm1vZGVsQXNzZXRQYXRoIGFuZCBiYXNlT3B0aW9ucy5tb2RlbEFzc2V0QnVmZmVyIik7aWYoIShhbih0aGlzLmJhc2VPcHRpb25zLFNzLDEpPy5nKCl8fGFuKHRoaXMuYmFzZU9wdGlvbnMsU3MsMSk/LmgoKXx8dC5iYXNlT3B0aW9ucz8ubW9kZWxBc3NldEJ1ZmZlcnx8dC5iYXNlT3B0aW9ucz8ubW9kZWxBc3NldFBhdGgpKXRocm93IEVycm9yKCJFaXRoZXIgYmFzZU9wdGlvbnMubW9kZWxBc3NldFBhdGggb3IgYmFzZU9wdGlvbnMubW9kZWxBc3NldEJ1ZmZlciBtdXN0IGJlIHNldCIpO2lmKGZ1bmN0aW9uKHQsZSl7bGV0IG49YW4odC5iYXNlT3B0aW9ucyxicywzKTtpZighbil7dmFyIHI9bj1uZXcgYnMsaT1uZXcgTWk7bG4ociw0LGtzLGkpO30iZGVsZWdhdGUiaW4gZSYmKCJHUFUiPT09ZS5kZWxlZ2F0ZT8oZT1uLHI9bmV3IExpLGxuKGUsMixrcyxyKSk6KGU9bixyPW5ldyBNaSxsbihlLDQsa3MscikpKSx1bih0LmJhc2VPcHRpb25zLDAsMyxuKTt9KHRoaXMsZSksZS5tb2RlbEFzc2V0UGF0aClyZXR1cm4gZmV0Y2goZS5tb2RlbEFzc2V0UGF0aC50b1N0cmluZygpKS50aGVuKCh0PT57aWYodC5vaylyZXR1cm4gdC5hcnJheUJ1ZmZlcigpO3Rocm93IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggbW9kZWw6ICR7ZS5tb2RlbEFzc2V0UGF0aH0gKCR7dC5zdGF0dXN9KWApfSkpLnRoZW4oKHQ9Pnt0cnl7dGhpcy5nLmkuRlNfdW5saW5rKCIvbW9kZWwuZGF0Iik7fWNhdGNoe310aGlzLmcuaS5GU19jcmVhdGVEYXRhRmlsZSgiLyIsIm1vZGVsLmRhdCIsbmV3IFVpbnQ4QXJyYXkodCksITAsITEsITEpLEtvKHRoaXMsIi9tb2RlbC5kYXQiKSx0aGlzLm0oKSx0aGlzLkkoKTt9KSk7aWYoZS5tb2RlbEFzc2V0QnVmZmVyIGluc3RhbmNlb2YgVWludDhBcnJheSlLbyh0aGlzLGUubW9kZWxBc3NldEJ1ZmZlcik7ZWxzZSBpZihlLm1vZGVsQXNzZXRCdWZmZXIpcmV0dXJuIGFzeW5jIGZ1bmN0aW9uKHQpe2NvbnN0IGU9W107Zm9yKHZhciBuPTA7Oyl7Y29uc3R7ZG9uZTpyLHZhbHVlOml9PWF3YWl0IHQucmVhZCgpO2lmKHIpYnJlYWs7ZS5wdXNoKGkpLG4rPWkubGVuZ3RoO31pZigwPT09ZS5sZW5ndGgpcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO2lmKDE9PT1lLmxlbmd0aClyZXR1cm4gZVswXTt0PW5ldyBVaW50OEFycmF5KG4pLG49MDtmb3IoY29uc3QgciBvZiBlKXQuc2V0KHIsbiksbis9ci5sZW5ndGg7cmV0dXJuIHR9KGUubW9kZWxBc3NldEJ1ZmZlcikudGhlbigodD0+e0tvKHRoaXMsdCksdGhpcy5tKCksdGhpcy5JKCk7fSkpfXJldHVybiB0aGlzLm0oKSx0aGlzLkkoKSxQcm9taXNlLnJlc29sdmUoKX1JKCl7fWZhKCl7bGV0IHQ7aWYodGhpcy5nLmZhKChlPT57dD1KaShlKTt9KSksIXQpdGhyb3cgRXJyb3IoIkZhaWxlZCB0byByZXRyaWV2ZSBDYWxjdWxhdG9yR3JhcGhDb25maWciKTtyZXR1cm4gdH1zZXRHcmFwaCh0LGUpe3RoaXMuZy5hdHRhY2hFcnJvckxpc3RlbmVyKCgodCxlKT0+e3RoaXMuRy5wdXNoKEVycm9yKGUpKTt9KSksdGhpcy5nLk1hKCksdGhpcy5nLnNldEdyYXBoKHQsZSksdGhpcy5BPXZvaWQgMCxZbyh0aGlzKTt9ZmluaXNoUHJvY2Vzc2luZygpe3RoaXMuZy5maW5pc2hQcm9jZXNzaW5nKCksWW8odGhpcyk7fWNsb3NlKCl7dGhpcy5BPXZvaWQgMCx0aGlzLmcuY2xvc2VHcmFwaCgpO319O2Z1bmN0aW9uIHRhKHQsZSl7aWYoIXQpdGhyb3cgRXJyb3IoYFVuYWJsZSB0byBvYnRhaW4gcmVxdWlyZWQgV2ViR0wgcmVzb3VyY2U6ICR7ZX1gKTtyZXR1cm4gdH1Rby5wcm90b3R5cGUuY2xvc2U9UW8ucHJvdG90eXBlLmNsb3NlLGZ1bmN0aW9uKGUsbil7ZT1lLnNwbGl0KCIuIik7dmFyIHIsaT10O2VbMF1pbiBpfHx2b2lkIDA9PT1pLmV4ZWNTY3JpcHR8fGkuZXhlY1NjcmlwdCgidmFyICIrZVswXSk7Zm9yKDtlLmxlbmd0aCYmKHI9ZS5zaGlmdCgpKTspZS5sZW5ndGh8fHZvaWQgMD09PW4/aT1pW3JdJiZpW3JdIT09T2JqZWN0LnByb3RvdHlwZVtyXT9pW3JdOmlbcl09e306aVtyXT1uO30oIlRhc2tSdW5uZXIiLFFvKTtjbGFzcyBlYXtjb25zdHJ1Y3Rvcih0LGUsbixyKXt0aGlzLmc9dCx0aGlzLmg9ZSx0aGlzLm09bix0aGlzLmw9cjt9YmluZCgpe3RoaXMuZy5iaW5kVmVydGV4QXJyYXkodGhpcy5oKTt9Y2xvc2UoKXt0aGlzLmcuZGVsZXRlVmVydGV4QXJyYXkodGhpcy5oKSx0aGlzLmcuZGVsZXRlQnVmZmVyKHRoaXMubSksdGhpcy5nLmRlbGV0ZUJ1ZmZlcih0aGlzLmwpO319ZnVuY3Rpb24gbmEodCxlLG4pe2NvbnN0IHI9dC5nO2lmKG49dGEoci5jcmVhdGVTaGFkZXIobiksIkZhaWxlZCB0byBjcmVhdGUgV2ViR0wgc2hhZGVyIiksci5zaGFkZXJTb3VyY2UobixlKSxyLmNvbXBpbGVTaGFkZXIobiksIXIuZ2V0U2hhZGVyUGFyYW1ldGVyKG4sci5DT01QSUxFX1NUQVRVUykpdGhyb3cgRXJyb3IoYENvdWxkIG5vdCBjb21waWxlIFdlYkdMIHNoYWRlcjogJHtyLmdldFNoYWRlckluZm9Mb2cobil9YCk7cmV0dXJuIHIuYXR0YWNoU2hhZGVyKHQuaCxuKSxufWZ1bmN0aW9uIHJhKHQsZSl7Y29uc3Qgbj10Lmcscj10YShuLmNyZWF0ZVZlcnRleEFycmF5KCksIkZhaWxlZCB0byBjcmVhdGUgdmVydGV4IGFycmF5Iik7bi5iaW5kVmVydGV4QXJyYXkocik7Y29uc3QgaT10YShuLmNyZWF0ZUJ1ZmZlcigpLCJGYWlsZWQgdG8gY3JlYXRlIGJ1ZmZlciIpO24uYmluZEJ1ZmZlcihuLkFSUkFZX0JVRkZFUixpKSxuLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHQuUCksbi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHQuUCwyLG4uRkxPQVQsITEsMCwwKSxuLmJ1ZmZlckRhdGEobi5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbLTEsLTEsLTEsMSwxLDEsMSwtMV0pLG4uU1RBVElDX0RSQVcpO2NvbnN0IHM9dGEobi5jcmVhdGVCdWZmZXIoKSwiRmFpbGVkIHRvIGNyZWF0ZSBidWZmZXIiKTtyZXR1cm4gbi5iaW5kQnVmZmVyKG4uQVJSQVlfQlVGRkVSLHMpLG4uZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodC5JKSxuLnZlcnRleEF0dHJpYlBvaW50ZXIodC5JLDIsbi5GTE9BVCwhMSwwLDApLG4uYnVmZmVyRGF0YShuLkFSUkFZX0JVRkZFUixuZXcgRmxvYXQzMkFycmF5KGU/WzAsMSwwLDAsMSwwLDEsMV06WzAsMCwwLDEsMSwxLDEsMF0pLG4uU1RBVElDX0RSQVcpLG4uYmluZEJ1ZmZlcihuLkFSUkFZX0JVRkZFUixudWxsKSxuLmJpbmRWZXJ0ZXhBcnJheShudWxsKSxuZXcgZWEobixyLGkscyl9ZnVuY3Rpb24gaWEodCxlKXtpZih0Lmcpe2lmKGUhPT10LmcpdGhyb3cgRXJyb3IoIkNhbm5vdCBjaGFuZ2UgR0wgY29udGV4dCBvbmNlIGluaXRpYWxpemVkIil9ZWxzZSB0Lmc9ZTt9ZnVuY3Rpb24gc2EodCxlLG4scil7cmV0dXJuIGlhKHQsZSksdC5ofHwodC5tKCksdC5DKCkpLG4/KHQuc3x8KHQucz1yYSh0LCEwKSksbj10LnMpOih0LnZ8fCh0LnY9cmEodCwhMSkpLG49dC52KSxlLnVzZVByb2dyYW0odC5oKSxuLmJpbmQoKSx0LmwoKSx0PXIoKSxuLmcuYmluZFZlcnRleEFycmF5KG51bGwpLHR9ZnVuY3Rpb24gb2EodCxlLG4pe3JldHVybiBpYSh0LGUpLHQ9dGEoZS5jcmVhdGVUZXh0dXJlKCksIkZhaWxlZCB0byBjcmVhdGUgdGV4dHVyZSIpLGUuYmluZFRleHR1cmUoZS5URVhUVVJFXzJELHQpLGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX1dSQVBfUyxlLkNMQU1QX1RPX0VER0UpLGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX1dSQVBfVCxlLkNMQU1QX1RPX0VER0UpLGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX01JTl9GSUxURVIsbj8/ZS5MSU5FQVIpLGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX01BR19GSUxURVIsbj8/ZS5MSU5FQVIpLGUuYmluZFRleHR1cmUoZS5URVhUVVJFXzJELG51bGwpLHR9ZnVuY3Rpb24gYWEodCxlLG4pe2lhKHQsZSksdC5BfHwodC5BPXRhKGUuY3JlYXRlRnJhbWVidWZmZXIoKSwiRmFpbGVkIHRvIGNyZWF0ZSBmcmFtZWJ1ZmZlLiIpKSxlLmJpbmRGcmFtZWJ1ZmZlcihlLkZSQU1FQlVGRkVSLHQuQSksZS5mcmFtZWJ1ZmZlclRleHR1cmUyRChlLkZSQU1FQlVGRkVSLGUuQ09MT1JfQVRUQUNITUVOVDAsZS5URVhUVVJFXzJELG4sMCk7fWZ1bmN0aW9uIGhhKHQpe3QuZz8uYmluZEZyYW1lYnVmZmVyKHQuZy5GUkFNRUJVRkZFUixudWxsKTt9dmFyIGNhPWNsYXNze0coKXtyZXR1cm4gIlxuICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgdmFyeWluZyB2ZWMyIHZUZXg7XG4gIHVuaWZvcm0gc2FtcGxlcjJEIGlucHV0VGV4dHVyZTtcbiAgdm9pZCBtYWluKCkge1xuICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRChpbnB1dFRleHR1cmUsIHZUZXgpO1xuICB9XG4gIn1tKCl7Y29uc3QgdD10aGlzLmc7aWYodGhpcy5oPXRhKHQuY3JlYXRlUHJvZ3JhbSgpLCJGYWlsZWQgdG8gY3JlYXRlIFdlYkdMIHByb2dyYW0iKSx0aGlzLmNhPW5hKHRoaXMsIlxuICBhdHRyaWJ1dGUgdmVjMiBhVmVydGV4O1xuICBhdHRyaWJ1dGUgdmVjMiBhVGV4O1xuICB2YXJ5aW5nIHZlYzIgdlRleDtcbiAgdm9pZCBtYWluKHZvaWQpIHtcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoYVZlcnRleCwgMC4wLCAxLjApO1xuICAgIHZUZXggPSBhVGV4O1xuICB9Iix0LlZFUlRFWF9TSEFERVIpLHRoaXMuYmE9bmEodGhpcyx0aGlzLkcoKSx0LkZSQUdNRU5UX1NIQURFUiksdC5saW5rUHJvZ3JhbSh0aGlzLmgpLCF0LmdldFByb2dyYW1QYXJhbWV0ZXIodGhpcy5oLHQuTElOS19TVEFUVVMpKXRocm93IEVycm9yKGBFcnJvciBkdXJpbmcgcHJvZ3JhbSBsaW5raW5nOiAke3QuZ2V0UHJvZ3JhbUluZm9Mb2codGhpcy5oKX1gKTt0aGlzLlA9dC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLmgsImFWZXJ0ZXgiKSx0aGlzLkk9dC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLmgsImFUZXgiKTt9Qygpe31sKCl7fWNsb3NlKCl7aWYodGhpcy5oKXtjb25zdCB0PXRoaXMuZzt0LmRlbGV0ZVByb2dyYW0odGhpcy5oKSx0LmRlbGV0ZVNoYWRlcih0aGlzLmNhKSx0LmRlbGV0ZVNoYWRlcih0aGlzLmJhKTt9dGhpcy5BJiZ0aGlzLmcuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5BKSx0aGlzLnYmJnRoaXMudi5jbG9zZSgpLHRoaXMucyYmdGhpcy5zLmNsb3NlKCk7fX07ZnVuY3Rpb24gZmEodCxlKXtzd2l0Y2goZSl7Y2FzZSAwOnJldHVybiB0LmcuZmluZCgodD0+dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKTtjYXNlIDE6cmV0dXJuIHQuZy5maW5kKCh0PT50IGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSk7Y2FzZSAyOnJldHVybiB0LmcuZmluZCgodD0+InVuZGVmaW5lZCIhPXR5cGVvZiBXZWJHTFRleHR1cmUmJnQgaW5zdGFuY2VvZiBXZWJHTFRleHR1cmUpKTtkZWZhdWx0OnRocm93IEVycm9yKGBUeXBlIGlzIG5vdCBzdXBwb3J0ZWQ6ICR7ZX1gKX19ZnVuY3Rpb24gZGEodCl7dmFyIGU9ZmEodCwxKTtpZighZSl7aWYoZT1mYSh0LDApKWU9bmV3IEZsb2F0MzJBcnJheShlKS5tYXAoKHQ9PnQvMjU1KSk7ZWxzZSB7ZT1uZXcgRmxvYXQzMkFycmF5KHQud2lkdGgqdC5oZWlnaHQpO2NvbnN0IHI9Z2EodCk7dmFyIG49eWEodCk7aWYoYWEobixyLHBhKHQpKSwiaVBhZCBTaW11bGF0b3I7aVBob25lIFNpbXVsYXRvcjtpUG9kIFNpbXVsYXRvcjtpUGFkO2lQaG9uZTtpUG9kIi5zcGxpdCgiOyIpLmluY2x1ZGVzKG5hdmlnYXRvci5wbGF0Zm9ybSl8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoIk1hYyIpJiYib250b3VjaGVuZCJpbiBzZWxmLmRvY3VtZW50KXtuPW5ldyBGbG9hdDMyQXJyYXkodC53aWR0aCp0LmhlaWdodCo0KSxyLnJlYWRQaXhlbHMoMCwwLHQud2lkdGgsdC5oZWlnaHQsci5SR0JBLHIuRkxPQVQsbik7Zm9yKGxldCB0PTAscj0wO3Q8ZS5sZW5ndGg7Kyt0LHIrPTQpZVt0XT1uW3JdO31lbHNlIHIucmVhZFBpeGVscygwLDAsdC53aWR0aCx0LmhlaWdodCxyLlJFRCxyLkZMT0FULGUpO310LmcucHVzaChlKTt9cmV0dXJuIGV9ZnVuY3Rpb24gcGEodCl7bGV0IGU9ZmEodCwyKTtpZighZSl7Y29uc3Qgbj1nYSh0KTtlPV9hKHQpO2NvbnN0IHI9ZGEodCksaT1tYSh0KTtuLnRleEltYWdlMkQobi5URVhUVVJFXzJELDAsaSx0LndpZHRoLHQuaGVpZ2h0LDAsbi5SRUQsbi5GTE9BVCxyKSx2YSh0KTt9cmV0dXJuIGV9ZnVuY3Rpb24gZ2EodCl7aWYoIXQuY2FudmFzKXRocm93IEVycm9yKCJDb252ZXJzaW9uIHRvIGRpZmZlcmVudCBpbWFnZSBmb3JtYXRzIHJlcXVpcmUgdGhhdCBhIGNhbnZhcyBpcyBwYXNzZWQgd2hlbiBpbml0aWFsaXppbmcgdGhlIGltYWdlLiIpO3JldHVybiB0Lmh8fCh0Lmg9dGEodC5jYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wyIiksIllvdSBjYW5ub3QgdXNlIGEgY2FudmFzIHRoYXQgaXMgYWxyZWFkeSBib3VuZCB0byBhIGRpZmZlcmVudCB0eXBlIG9mIHJlbmRlcmluZyBjb250ZXh0LiIpKSx0Lmh9ZnVuY3Rpb24gbWEodCl7aWYodD1nYSh0KSwhRWEpaWYodC5nZXRFeHRlbnNpb24oIkVYVF9jb2xvcl9idWZmZXJfZmxvYXQiKSYmdC5nZXRFeHRlbnNpb24oIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhciIpJiZ0LmdldEV4dGVuc2lvbigiRVhUX2Zsb2F0X2JsZW5kIikpRWE9dC5SMzJGO2Vsc2Uge2lmKCF0LmdldEV4dGVuc2lvbigiRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0IikpdGhyb3cgRXJyb3IoIkdQVSBkb2VzIG5vdCBmdWxseSBzdXBwb3J0IDQtY2hhbm5lbCBmbG9hdDMyIG9yIGZsb2F0MTYgZm9ybWF0cyIpO0VhPXQuUjE2Rjt9cmV0dXJuIEVhfWZ1bmN0aW9uIHlhKHQpe3JldHVybiB0Lmx8fCh0Lmw9bmV3IGNhKSx0Lmx9ZnVuY3Rpb24gX2EodCl7Y29uc3QgZT1nYSh0KTtlLnZpZXdwb3J0KDAsMCx0LndpZHRoLHQuaGVpZ2h0KSxlLmFjdGl2ZVRleHR1cmUoZS5URVhUVVJFMCk7bGV0IG49ZmEodCwyKTtyZXR1cm4gbnx8KG49b2EoeWEodCksZSx0Lm0/ZS5MSU5FQVI6ZS5ORUFSRVNUKSx0LmcucHVzaChuKSx0Lmo9ITApLGUuYmluZFRleHR1cmUoZS5URVhUVVJFXzJELG4pLG59ZnVuY3Rpb24gdmEodCl7dC5oLmJpbmRUZXh0dXJlKHQuaC5URVhUVVJFXzJELG51bGwpO312YXIgRWEsd2E9Y2xhc3N7Y29uc3RydWN0b3IodCxlLG4scixpLHMsbyl7dGhpcy5nPXQsdGhpcy5tPWUsdGhpcy5qPW4sdGhpcy5jYW52YXM9cix0aGlzLmw9aSx0aGlzLndpZHRoPXMsdGhpcy5oZWlnaHQ9byx0aGlzLmomJigwPT09LS1UYSYmY29uc29sZS5lcnJvcigiWW91IHNlZW0gdG8gYmUgY3JlYXRpbmcgTVBNYXNrIGluc3RhbmNlcyB3aXRob3V0IGludm9raW5nIC5jbG9zZSgpLiBUaGlzIGxlYWtzIHJlc291cmNlcy4iKSk7fUhhKCl7cmV0dXJuICEhZmEodGhpcywwKX1sYSgpe3JldHVybiAhIWZhKHRoaXMsMSl9Uigpe3JldHVybiAhIWZhKHRoaXMsMil9a2EoKXtyZXR1cm4gKGU9ZmEodD10aGlzLDApKXx8KGU9ZGEodCksZT1uZXcgVWludDhBcnJheShlLm1hcCgodD0+MjU1KnQpKSksdC5nLnB1c2goZSkpLGU7dmFyIHQsZTt9amEoKXtyZXR1cm4gZGEodGhpcyl9TSgpe3JldHVybiBwYSh0aGlzKX1jbG9uZSgpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IGUgb2YgdGhpcy5nKXtsZXQgbjtpZihlIGluc3RhbmNlb2YgVWludDhBcnJheSluPW5ldyBVaW50OEFycmF5KGUpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSluPW5ldyBGbG9hdDMyQXJyYXkoZSk7ZWxzZSB7aWYoIShlIGluc3RhbmNlb2YgV2ViR0xUZXh0dXJlKSl0aHJvdyBFcnJvcihgVHlwZSBpcyBub3Qgc3VwcG9ydGVkOiAke2V9YCk7e2NvbnN0IHQ9Z2EodGhpcyksZT15YSh0aGlzKTt0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMSksbj1vYShlLHQsdGhpcy5tP3QuTElORUFSOnQuTkVBUkVTVCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbik7Y29uc3Qgcj1tYSh0aGlzKTt0LnRleEltYWdlMkQodC5URVhUVVJFXzJELDAscix0aGlzLndpZHRoLHRoaXMuaGVpZ2h0LDAsdC5SRUQsdC5GTE9BVCxudWxsKSx0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxudWxsKSxhYShlLHQsbiksc2EoZSx0LCExLCgoKT0+e19hKHRoaXMpLHQuY2xlYXJDb2xvcigwLDAsMCwwKSx0LmNsZWFyKHQuQ09MT1JfQlVGRkVSX0JJVCksdC5kcmF3QXJyYXlzKHQuVFJJQU5HTEVfRkFOLDAsNCksdmEodGhpcyk7fSkpLGhhKGUpLHZhKHRoaXMpO319dC5wdXNoKG4pO31yZXR1cm4gbmV3IHdhKHQsdGhpcy5tLHRoaXMuUigpLHRoaXMuY2FudmFzLHRoaXMubCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KX1jbG9zZSgpe3RoaXMuaiYmZ2EodGhpcykuZGVsZXRlVGV4dHVyZShmYSh0aGlzLDIpKSxUYT0tMTt9fTt3YS5wcm90b3R5cGUuY2xvc2U9d2EucHJvdG90eXBlLmNsb3NlLHdhLnByb3RvdHlwZS5jbG9uZT13YS5wcm90b3R5cGUuY2xvbmUsd2EucHJvdG90eXBlLmdldEFzV2ViR0xUZXh0dXJlPXdhLnByb3RvdHlwZS5NLHdhLnByb3RvdHlwZS5nZXRBc0Zsb2F0MzJBcnJheT13YS5wcm90b3R5cGUuamEsd2EucHJvdG90eXBlLmdldEFzVWludDhBcnJheT13YS5wcm90b3R5cGUua2Esd2EucHJvdG90eXBlLmhhc1dlYkdMVGV4dHVyZT13YS5wcm90b3R5cGUuUix3YS5wcm90b3R5cGUuaGFzRmxvYXQzMkFycmF5PXdhLnByb3RvdHlwZS5sYSx3YS5wcm90b3R5cGUuaGFzVWludDhBcnJheT13YS5wcm90b3R5cGUuSGE7dmFyIFRhPTI1MDtmdW5jdGlvbiBQYSh0LGUpe3N3aXRjaChlKXtjYXNlIDA6cmV0dXJuIHQuZy5maW5kKCh0PT50IGluc3RhbmNlb2YgSW1hZ2VEYXRhKSk7Y2FzZSAxOnJldHVybiB0LmcuZmluZCgodD0+InVuZGVmaW5lZCIhPXR5cGVvZiBJbWFnZUJpdG1hcCYmdCBpbnN0YW5jZW9mIEltYWdlQml0bWFwKSk7Y2FzZSAyOnJldHVybiB0LmcuZmluZCgodD0+InVuZGVmaW5lZCIhPXR5cGVvZiBXZWJHTFRleHR1cmUmJnQgaW5zdGFuY2VvZiBXZWJHTFRleHR1cmUpKTtkZWZhdWx0OnRocm93IEVycm9yKGBUeXBlIGlzIG5vdCBzdXBwb3J0ZWQ6ICR7ZX1gKX19ZnVuY3Rpb24gT2EodCl7dmFyIGU9UGEodCwwKTtpZighZSl7ZT1VYSh0KTtjb25zdCBuPU5hKHQpLHI9bmV3IFVpbnQ4QXJyYXkodC53aWR0aCp0LmhlaWdodCo0KTthYShuLGUsQ2EodCkpLGUucmVhZFBpeGVscygwLDAsdC53aWR0aCx0LmhlaWdodCxlLlJHQkEsZS5VTlNJR05FRF9CWVRFLHIpLGhhKG4pLGU9bmV3IEltYWdlRGF0YShuZXcgVWludDhDbGFtcGVkQXJyYXkoci5idWZmZXIpLHQud2lkdGgsdC5oZWlnaHQpLHQuZy5wdXNoKGUpO31yZXR1cm4gZX1mdW5jdGlvbiBDYSh0KXtsZXQgZT1QYSh0LDIpO2lmKCFlKXtjb25zdCBuPVVhKHQpO2U9RGEodCk7Y29uc3Qgcj1QYSh0LDEpfHxPYSh0KTtuLnRleEltYWdlMkQobi5URVhUVVJFXzJELDAsbi5SR0JBLG4uUkdCQSxuLlVOU0lHTkVEX0JZVEUsciksQmEodCk7fXJldHVybiBlfWZ1bmN0aW9uIFVhKHQpe2lmKCF0LmNhbnZhcyl0aHJvdyBFcnJvcigiQ29udmVyc2lvbiB0byBkaWZmZXJlbnQgaW1hZ2UgZm9ybWF0cyByZXF1aXJlIHRoYXQgYSBjYW52YXMgaXMgcGFzc2VkIHdoZW4gaW5paXRpYWxpemluZyB0aGUgaW1hZ2UuIik7cmV0dXJuIHQuaHx8KHQuaD10YSh0LmNhbnZhcy5nZXRDb250ZXh0KCJ3ZWJnbDIiKSwiWW91IGNhbm5vdCB1c2UgYSBjYW52YXMgdGhhdCBpcyBhbHJlYWR5IGJvdW5kIHRvIGEgZGlmZmVyZW50IHR5cGUgb2YgcmVuZGVyaW5nIGNvbnRleHQuIikpLHQuaH1mdW5jdGlvbiBOYSh0KXtyZXR1cm4gdC5sfHwodC5sPW5ldyBjYSksdC5sfWZ1bmN0aW9uIERhKHQpe2NvbnN0IGU9VWEodCk7ZS52aWV3cG9ydCgwLDAsdC53aWR0aCx0LmhlaWdodCksZS5hY3RpdmVUZXh0dXJlKGUuVEVYVFVSRTApO2xldCBuPVBhKHQsMik7cmV0dXJuIG58fChuPW9hKE5hKHQpLGUpLHQuZy5wdXNoKG4pLHQubT0hMCksZS5iaW5kVGV4dHVyZShlLlRFWFRVUkVfMkQsbiksbn1mdW5jdGlvbiBCYSh0KXt0LmguYmluZFRleHR1cmUodC5oLlRFWFRVUkVfMkQsbnVsbCk7fWZ1bmN0aW9uIEdhKHQpe2NvbnN0IGU9VWEodCk7cmV0dXJuIHNhKE5hKHQpLGUsITAsKCgpPT5mdW5jdGlvbih0LGUpe2NvbnN0IG49dC5jYW52YXM7aWYobi53aWR0aD09PXQud2lkdGgmJm4uaGVpZ2h0PT09dC5oZWlnaHQpcmV0dXJuIGUoKTtjb25zdCByPW4ud2lkdGgsaT1uLmhlaWdodDtyZXR1cm4gbi53aWR0aD10LndpZHRoLG4uaGVpZ2h0PXQuaGVpZ2h0LHQ9ZSgpLG4ud2lkdGg9cixuLmhlaWdodD1pLHR9KHQsKCgpPT57aWYoZS5iaW5kRnJhbWVidWZmZXIoZS5GUkFNRUJVRkZFUixudWxsKSxlLmNsZWFyQ29sb3IoMCwwLDAsMCksZS5jbGVhcihlLkNPTE9SX0JVRkZFUl9CSVQpLGUuZHJhd0FycmF5cyhlLlRSSUFOR0xFX0ZBTiwwLDQpLCEodC5jYW52YXMgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXMpKXRocm93IEVycm9yKCJDb252ZXJzaW9uIHRvIEltYWdlQml0bWFwIHJlcXVpcmVzIHRoYXQgdGhlIE1lZGlhUGlwZSBUYXNrcyBpcyBpbml0aWFsaXplZCB3aXRoIGFuIE9mZnNjcmVlbkNhbnZhcyIpO3JldHVybiB0LmNhbnZhcy50cmFuc2ZlclRvSW1hZ2VCaXRtYXAoKX0pKSkpfXZhciBqYT1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUsbixyLGkscyxvKXt0aGlzLmc9dCx0aGlzLmo9ZSx0aGlzLm09bix0aGlzLmNhbnZhcz1yLHRoaXMubD1pLHRoaXMud2lkdGg9cyx0aGlzLmhlaWdodD1vLCh0aGlzLmp8fHRoaXMubSkmJigwPT09LS1WYSYmY29uc29sZS5lcnJvcigiWW91IHNlZW0gdG8gYmUgY3JlYXRpbmcgTVBJbWFnZSBpbnN0YW5jZXMgd2l0aG91dCBpbnZva2luZyAuY2xvc2UoKS4gVGhpcyBsZWFrcyByZXNvdXJjZXMuIikpO31HYSgpe3JldHVybiAhIVBhKHRoaXMsMCl9bWEoKXtyZXR1cm4gISFQYSh0aGlzLDEpfVIoKXtyZXR1cm4gISFQYSh0aGlzLDIpfUVhKCl7cmV0dXJuIE9hKHRoaXMpfURhKCl7dmFyIHQ9UGEodGhpcywxKTtyZXR1cm4gdHx8KENhKHRoaXMpLERhKHRoaXMpLHQ9R2EodGhpcyksQmEodGhpcyksdGhpcy5nLnB1c2godCksdGhpcy5qPSEwKSx0fU0oKXtyZXR1cm4gQ2EodGhpcyl9Y2xvbmUoKXtjb25zdCB0PVtdO2Zvcihjb25zdCBlIG9mIHRoaXMuZyl7bGV0IG47aWYoZSBpbnN0YW5jZW9mIEltYWdlRGF0YSluPW5ldyBJbWFnZURhdGEoZS5kYXRhLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZSl7Y29uc3QgdD1VYSh0aGlzKSxlPU5hKHRoaXMpO3QuYWN0aXZlVGV4dHVyZSh0LlRFWFRVUkUxKSxuPW9hKGUsdCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbiksdC50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwwLHQuUkdCQSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0LDAsdC5SR0JBLHQuVU5TSUdORURfQllURSxudWxsKSx0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxudWxsKSxhYShlLHQsbiksc2EoZSx0LCExLCgoKT0+e0RhKHRoaXMpLHQuY2xlYXJDb2xvcigwLDAsMCwwKSx0LmNsZWFyKHQuQ09MT1JfQlVGRkVSX0JJVCksdC5kcmF3QXJyYXlzKHQuVFJJQU5HTEVfRkFOLDAsNCksQmEodGhpcyk7fSkpLGhhKGUpLEJhKHRoaXMpO31lbHNlIHtpZighKGUgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcCkpdGhyb3cgRXJyb3IoYFR5cGUgaXMgbm90IHN1cHBvcnRlZDogJHtlfWApO0NhKHRoaXMpLERhKHRoaXMpLG49R2EodGhpcyksQmEodGhpcyk7fXQucHVzaChuKTt9cmV0dXJuIG5ldyBqYSh0LHRoaXMubWEoKSx0aGlzLlIoKSx0aGlzLmNhbnZhcyx0aGlzLmwsdGhpcy53aWR0aCx0aGlzLmhlaWdodCl9Y2xvc2UoKXt0aGlzLmomJlBhKHRoaXMsMSkuY2xvc2UoKSx0aGlzLm0mJlVhKHRoaXMpLmRlbGV0ZVRleHR1cmUoUGEodGhpcywyKSksVmE9LTE7fX07amEucHJvdG90eXBlLmNsb3NlPWphLnByb3RvdHlwZS5jbG9zZSxqYS5wcm90b3R5cGUuY2xvbmU9amEucHJvdG90eXBlLmNsb25lLGphLnByb3RvdHlwZS5nZXRBc1dlYkdMVGV4dHVyZT1qYS5wcm90b3R5cGUuTSxqYS5wcm90b3R5cGUuZ2V0QXNJbWFnZUJpdG1hcD1qYS5wcm90b3R5cGUuRGEsamEucHJvdG90eXBlLmdldEFzSW1hZ2VEYXRhPWphLnByb3RvdHlwZS5FYSxqYS5wcm90b3R5cGUuaGFzV2ViR0xUZXh0dXJlPWphLnByb3RvdHlwZS5SLGphLnByb3RvdHlwZS5oYXNJbWFnZUJpdG1hcD1qYS5wcm90b3R5cGUubWEsamEucHJvdG90eXBlLmhhc0ltYWdlRGF0YT1qYS5wcm90b3R5cGUuR2E7dmFyIFZhPTI1MDtmdW5jdGlvbiBYYSguLi50KXtyZXR1cm4gdC5tYXAoKChbdCxlXSk9Pih7c3RhcnQ6dCxlbmQ6ZX0pKSl9Y29uc3QgSGE9ZnVuY3Rpb24odCl7cmV0dXJuIGNsYXNzIGV4dGVuZHMgdHtNYSgpe3RoaXMuaS5fcmVnaXN0ZXJNb2RlbFJlc291cmNlc0dyYXBoU2VydmljZSgpO319fSgoV2E9Y2xhc3N7Y29uc3RydWN0b3IodCxlKXt0aGlzLmw9ITAsdGhpcy5pPXQsdGhpcy5nPW51bGwsdGhpcy5oPTAsdGhpcy5tPSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLmkuX2FkZEludFRvSW5wdXRTdHJlYW0sdm9pZCAwIT09ZT90aGlzLmkuY2FudmFzPWU6RG8oKT90aGlzLmkuY2FudmFzPW5ldyBPZmZzY3JlZW5DYW52YXMoMSwxKTooY29uc29sZS53YXJuKCJPZmZzY3JlZW5DYW52YXMgbm90IHN1cHBvcnRlZCBhbmQgR3JhcGhSdW5uZXIgY29uc3RydWN0b3IgZ2xDYW52YXMgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZC4gQ3JlYXRpbmcgYmFja3VwIGNhbnZhcy4iKSx0aGlzLmkuY2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpKTt9YXN5bmMgaW5pdGlhbGl6ZUdyYXBoKHQpe2NvbnN0IGU9YXdhaXQoYXdhaXQgZmV0Y2godCkpLmFycmF5QnVmZmVyKCk7dD0hKHQuZW5kc1dpdGgoIi5wYnR4dCIpfHx0LmVuZHNXaXRoKCIudGV4dHByb3RvIikpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkoZSksdCk7fXNldEdyYXBoRnJvbVN0cmluZyh0KXt0aGlzLnNldEdyYXBoKChuZXcgVGV4dEVuY29kZXIpLmVuY29kZSh0KSwhMSk7fXNldEdyYXBoKHQsZSl7Y29uc3Qgbj10Lmxlbmd0aCxyPXRoaXMuaS5fbWFsbG9jKG4pO3RoaXMuaS5IRUFQVTguc2V0KHQsciksZT90aGlzLmkuX2NoYW5nZUJpbmFyeUdyYXBoKG4scik6dGhpcy5pLl9jaGFuZ2VUZXh0R3JhcGgobixyKSx0aGlzLmkuX2ZyZWUocik7fWNvbmZpZ3VyZUF1ZGlvKHQsZSxuLHIsaSl7dGhpcy5pLl9jb25maWd1cmVBdWRpb3x8Y29uc29sZS53YXJuKCdBdHRlbXB0aW5nIHRvIHVzZSBjb25maWd1cmVBdWRpbyB3aXRob3V0IHN1cHBvcnQgZm9yIGlucHV0IGF1ZGlvLiBJcyBidWlsZCBkZXAgIjpnbF9ncmFwaF9ydW5uZXJfYXVkaW8iIG1pc3Npbmc/Jyksam8odGhpcyxyfHwiaW5wdXRfYXVkaW8iLChyPT57am8odGhpcyxpPWl8fCJhdWRpb19oZWFkZXIiLChpPT57dGhpcy5pLl9jb25maWd1cmVBdWRpbyhyLGksdCxlLG4pO30pKTt9KSk7fXNldEF1dG9SZXNpemVDYW52YXModCl7dGhpcy5sPXQ7fXNldEF1dG9SZW5kZXJUb1NjcmVlbih0KXt0aGlzLmkuX3NldEF1dG9SZW5kZXJUb1NjcmVlbih0KTt9c2V0R3B1QnVmZmVyVmVydGljYWxGbGlwKHQpe3RoaXMuaS5ncHVPcmlnaW5Gb3JXZWJUZXh0dXJlc0lzQm90dG9tTGVmdD10O31mYSh0KXtIbyh0aGlzLCJfX2dyYXBoX2NvbmZpZ19fIiwoZT0+e3QoZSk7fSkpLGpvKHRoaXMsIl9fZ3JhcGhfY29uZmlnX18iLCh0PT57dGhpcy5pLl9nZXRHcmFwaENvbmZpZyh0LHZvaWQgMCk7fSkpLGRlbGV0ZSB0aGlzLmkuc2ltcGxlTGlzdGVuZXJzLl9fZ3JhcGhfY29uZmlnX187fWF0dGFjaEVycm9yTGlzdGVuZXIodCl7dGhpcy5pLmVycm9yTGlzdGVuZXI9dDt9YXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcih0LGUpe3RoaXMuaS5lbXB0eVBhY2tldExpc3RlbmVycz10aGlzLmkuZW1wdHlQYWNrZXRMaXN0ZW5lcnN8fHt9LHRoaXMuaS5lbXB0eVBhY2tldExpc3RlbmVyc1t0XT1lO31hZGRBdWRpb1RvU3RyZWFtKHQsZSxuKXt0aGlzLmFkZEF1ZGlvVG9TdHJlYW1XaXRoU2hhcGUodCwwLDAsZSxuKTt9YWRkQXVkaW9Ub1N0cmVhbVdpdGhTaGFwZSh0LGUsbixyLGkpe2NvbnN0IHM9NCp0Lmxlbmd0aDt0aGlzLmghPT1zJiYodGhpcy5nJiZ0aGlzLmkuX2ZyZWUodGhpcy5nKSx0aGlzLmc9dGhpcy5pLl9tYWxsb2MocyksdGhpcy5oPXMpLHRoaXMuaS5IRUFQRjMyLnNldCh0LHRoaXMuZy80KSxqbyh0aGlzLHIsKHQ9Pnt0aGlzLmkuX2FkZEF1ZGlvVG9JbnB1dFN0cmVhbSh0aGlzLmcsZSxuLHQsaSk7fSkpO31hZGRHcHVCdWZmZXJUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57Y29uc3RbcixpXT1Wbyh0aGlzLHQsZSk7dGhpcy5pLl9hZGRCb3VuZFRleHR1cmVUb1N0cmVhbShlLHIsaSxuKTt9KSk7fWFkZEJvb2xUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57dGhpcy5pLl9hZGRCb29sVG9JbnB1dFN0cmVhbSh0LGUsbik7fSkpO31hZGREb3VibGVUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57dGhpcy5pLl9hZGREb3VibGVUb0lucHV0U3RyZWFtKHQsZSxuKTt9KSk7fWFkZEZsb2F0VG9TdHJlYW0odCxlLG4pe2pvKHRoaXMsZSwoZT0+e3RoaXMuaS5fYWRkRmxvYXRUb0lucHV0U3RyZWFtKHQsZSxuKTt9KSk7fWFkZEludFRvU3RyZWFtKHQsZSxuKXtqbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZEludFRvSW5wdXRTdHJlYW0odCxlLG4pO30pKTt9YWRkVWludFRvU3RyZWFtKHQsZSxuKXtqbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZFVpbnRUb0lucHV0U3RyZWFtKHQsZSxuKTt9KSk7fWFkZFN0cmluZ1RvU3RyZWFtKHQsZSxuKXtqbyh0aGlzLGUsKGU9Pntqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2FkZFN0cmluZ1RvSW5wdXRTdHJlYW0odCxlLG4pO30pKTt9KSk7fWFkZFN0cmluZ1JlY29yZFRvU3RyZWFtKHQsZSxuKXtqbyh0aGlzLGUsKGU9PntYbyh0aGlzLE9iamVjdC5rZXlzKHQpLChyPT57WG8odGhpcyxPYmplY3QudmFsdWVzKHQpLChpPT57dGhpcy5pLl9hZGRGbGF0SGFzaE1hcFRvSW5wdXRTdHJlYW0ocixpLE9iamVjdC5rZXlzKHQpLmxlbmd0aCxlLG4pO30pKTt9KSk7fSkpO31hZGRQcm90b1RvU3RyZWFtKHQsZSxuLHIpe2pvKHRoaXMsbiwobj0+e2pvKHRoaXMsZSwoZT0+e2NvbnN0IGk9dGhpcy5pLl9tYWxsb2ModC5sZW5ndGgpO3RoaXMuaS5IRUFQVTguc2V0KHQsaSksdGhpcy5pLl9hZGRQcm90b1RvSW5wdXRTdHJlYW0oaSx0Lmxlbmd0aCxlLG4sciksdGhpcy5pLl9mcmVlKGkpO30pKTt9KSk7fWFkZEVtcHR5UGFja2V0VG9TdHJlYW0odCxlKXtqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2FkZEVtcHR5UGFja2V0VG9JbnB1dFN0cmVhbSh0LGUpO30pKTt9YWRkQm9vbFZlY3RvclRvU3RyZWFtKHQsZSxuKXtqbyh0aGlzLGUsKGU9Pntjb25zdCByPXRoaXMuaS5fYWxsb2NhdGVCb29sVmVjdG9yKHQubGVuZ3RoKTtpZighcil0aHJvdyBFcnJvcigiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyBib29sIHZlY3RvciBvbiBoZWFwLiIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRCb29sVmVjdG9yRW50cnkocixlKTt0aGlzLmkuX2FkZEJvb2xWZWN0b3JUb0lucHV0U3RyZWFtKHIsZSxuKTt9KSk7fWFkZERvdWJsZVZlY3RvclRvU3RyZWFtKHQsZSxuKXtqbyh0aGlzLGUsKGU9Pntjb25zdCByPXRoaXMuaS5fYWxsb2NhdGVEb3VibGVWZWN0b3IodC5sZW5ndGgpO2lmKCFyKXRocm93IEVycm9yKCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IGRvdWJsZSB2ZWN0b3Igb24gaGVhcC4iKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkRG91YmxlVmVjdG9yRW50cnkocixlKTt0aGlzLmkuX2FkZERvdWJsZVZlY3RvclRvSW5wdXRTdHJlYW0ocixlLG4pO30pKTt9YWRkRmxvYXRWZWN0b3JUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57Y29uc3Qgcj10aGlzLmkuX2FsbG9jYXRlRmxvYXRWZWN0b3IodC5sZW5ndGgpO2lmKCFyKXRocm93IEVycm9yKCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IGZsb2F0IHZlY3RvciBvbiBoZWFwLiIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRGbG9hdFZlY3RvckVudHJ5KHIsZSk7dGhpcy5pLl9hZGRGbG9hdFZlY3RvclRvSW5wdXRTdHJlYW0ocixlLG4pO30pKTt9YWRkSW50VmVjdG9yVG9TdHJlYW0odCxlLG4pe2pvKHRoaXMsZSwoZT0+e2NvbnN0IHI9dGhpcy5pLl9hbGxvY2F0ZUludFZlY3Rvcih0Lmxlbmd0aCk7aWYoIXIpdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgaW50IHZlY3RvciBvbiBoZWFwLiIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRJbnRWZWN0b3JFbnRyeShyLGUpO3RoaXMuaS5fYWRkSW50VmVjdG9yVG9JbnB1dFN0cmVhbShyLGUsbik7fSkpO31hZGRVaW50VmVjdG9yVG9TdHJlYW0odCxlLG4pe2pvKHRoaXMsZSwoZT0+e2NvbnN0IHI9dGhpcy5pLl9hbGxvY2F0ZVVpbnRWZWN0b3IodC5sZW5ndGgpO2lmKCFyKXRocm93IEVycm9yKCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IHVuc2lnbmVkIGludCB2ZWN0b3Igb24gaGVhcC4iKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkVWludFZlY3RvckVudHJ5KHIsZSk7dGhpcy5pLl9hZGRVaW50VmVjdG9yVG9JbnB1dFN0cmVhbShyLGUsbik7fSkpO31hZGRTdHJpbmdWZWN0b3JUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57Y29uc3Qgcj10aGlzLmkuX2FsbG9jYXRlU3RyaW5nVmVjdG9yKHQubGVuZ3RoKTtpZighcil0aHJvdyBFcnJvcigiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyBzdHJpbmcgdmVjdG9yIG9uIGhlYXAuIik7Zm9yKGNvbnN0IGUgb2YgdClqbyh0aGlzLGUsKHQ9Pnt0aGlzLmkuX2FkZFN0cmluZ1ZlY3RvckVudHJ5KHIsdCk7fSkpO3RoaXMuaS5fYWRkU3RyaW5nVmVjdG9yVG9JbnB1dFN0cmVhbShyLGUsbik7fSkpO31hZGRCb29sVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtqbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZEJvb2xUb0lucHV0U2lkZVBhY2tldCh0LGUpO30pKTt9YWRkRG91YmxlVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtqbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZERvdWJsZVRvSW5wdXRTaWRlUGFja2V0KHQsZSk7fSkpO31hZGRGbG9hdFRvSW5wdXRTaWRlUGFja2V0KHQsZSl7am8odGhpcyxlLChlPT57dGhpcy5pLl9hZGRGbG9hdFRvSW5wdXRTaWRlUGFja2V0KHQsZSk7fSkpO31hZGRJbnRUb0lucHV0U2lkZVBhY2tldCh0LGUpe2pvKHRoaXMsZSwoZT0+e3RoaXMuaS5fYWRkSW50VG9JbnB1dFNpZGVQYWNrZXQodCxlKTt9KSk7fWFkZFVpbnRUb0lucHV0U2lkZVBhY2tldCh0LGUpe2pvKHRoaXMsZSwoZT0+e3RoaXMuaS5fYWRkVWludFRvSW5wdXRTaWRlUGFja2V0KHQsZSk7fSkpO31hZGRTdHJpbmdUb0lucHV0U2lkZVBhY2tldCh0LGUpe2pvKHRoaXMsZSwoZT0+e2pvKHRoaXMsdCwodD0+e3RoaXMuaS5fYWRkU3RyaW5nVG9JbnB1dFNpZGVQYWNrZXQodCxlKTt9KSk7fSkpO31hZGRQcm90b1RvSW5wdXRTaWRlUGFja2V0KHQsZSxuKXtqbyh0aGlzLG4sKG49Pntqbyh0aGlzLGUsKGU9Pntjb25zdCByPXRoaXMuaS5fbWFsbG9jKHQubGVuZ3RoKTt0aGlzLmkuSEVBUFU4LnNldCh0LHIpLHRoaXMuaS5fYWRkUHJvdG9Ub0lucHV0U2lkZVBhY2tldChyLHQubGVuZ3RoLGUsbiksdGhpcy5pLl9mcmVlKHIpO30pKTt9KSk7fWFkZEJvb2xWZWN0b3JUb0lucHV0U2lkZVBhY2tldCh0LGUpe2pvKHRoaXMsZSwoZT0+e2NvbnN0IG49dGhpcy5pLl9hbGxvY2F0ZUJvb2xWZWN0b3IodC5sZW5ndGgpO2lmKCFuKXRocm93IEVycm9yKCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IGJvb2wgdmVjdG9yIG9uIGhlYXAuIik7Zm9yKGNvbnN0IGUgb2YgdCl0aGlzLmkuX2FkZEJvb2xWZWN0b3JFbnRyeShuLGUpO3RoaXMuaS5fYWRkQm9vbFZlY3RvclRvSW5wdXRTaWRlUGFja2V0KG4sZSk7fSkpO31hZGREb3VibGVWZWN0b3JUb0lucHV0U2lkZVBhY2tldCh0LGUpe2pvKHRoaXMsZSwoZT0+e2NvbnN0IG49dGhpcy5pLl9hbGxvY2F0ZURvdWJsZVZlY3Rvcih0Lmxlbmd0aCk7aWYoIW4pdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgZG91YmxlIHZlY3RvciBvbiBoZWFwLiIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGREb3VibGVWZWN0b3JFbnRyeShuLGUpO3RoaXMuaS5fYWRkRG91YmxlVmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQobixlKTt9KSk7fWFkZEZsb2F0VmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtqbyh0aGlzLGUsKGU9Pntjb25zdCBuPXRoaXMuaS5fYWxsb2NhdGVGbG9hdFZlY3Rvcih0Lmxlbmd0aCk7aWYoIW4pdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgZmxvYXQgdmVjdG9yIG9uIGhlYXAuIik7Zm9yKGNvbnN0IGUgb2YgdCl0aGlzLmkuX2FkZEZsb2F0VmVjdG9yRW50cnkobixlKTt0aGlzLmkuX2FkZEZsb2F0VmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQobixlKTt9KSk7fWFkZEludFZlY3RvclRvSW5wdXRTaWRlUGFja2V0KHQsZSl7am8odGhpcyxlLChlPT57Y29uc3Qgbj10aGlzLmkuX2FsbG9jYXRlSW50VmVjdG9yKHQubGVuZ3RoKTtpZighbil0aHJvdyBFcnJvcigiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyBpbnQgdmVjdG9yIG9uIGhlYXAuIik7Zm9yKGNvbnN0IGUgb2YgdCl0aGlzLmkuX2FkZEludFZlY3RvckVudHJ5KG4sZSk7dGhpcy5pLl9hZGRJbnRWZWN0b3JUb0lucHV0U2lkZVBhY2tldChuLGUpO30pKTt9YWRkVWludFZlY3RvclRvSW5wdXRTaWRlUGFja2V0KHQsZSl7am8odGhpcyxlLChlPT57Y29uc3Qgbj10aGlzLmkuX2FsbG9jYXRlVWludFZlY3Rvcih0Lmxlbmd0aCk7aWYoIW4pdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgdW5zaWduZWQgaW50IHZlY3RvciBvbiBoZWFwLiIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRVaW50VmVjdG9yRW50cnkobixlKTt0aGlzLmkuX2FkZFVpbnRWZWN0b3JUb0lucHV0U2lkZVBhY2tldChuLGUpO30pKTt9YWRkU3RyaW5nVmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtqbyh0aGlzLGUsKGU9Pntjb25zdCBuPXRoaXMuaS5fYWxsb2NhdGVTdHJpbmdWZWN0b3IodC5sZW5ndGgpO2lmKCFuKXRocm93IEVycm9yKCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IHN0cmluZyB2ZWN0b3Igb24gaGVhcC4iKTtmb3IoY29uc3QgZSBvZiB0KWpvKHRoaXMsZSwodD0+e3RoaXMuaS5fYWRkU3RyaW5nVmVjdG9yRW50cnkobix0KTt9KSk7dGhpcy5pLl9hZGRTdHJpbmdWZWN0b3JUb0lucHV0U2lkZVBhY2tldChuLGUpO30pKTt9YXR0YWNoQm9vbExpc3RlbmVyKHQsZSl7SG8odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoQm9vbExpc3RlbmVyKHQpO30pKTt9YXR0YWNoQm9vbFZlY3Rvckxpc3RlbmVyKHQsZSl7V28odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoQm9vbFZlY3Rvckxpc3RlbmVyKHQpO30pKTt9YXR0YWNoSW50TGlzdGVuZXIodCxlKXtIbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hJbnRMaXN0ZW5lcih0KTt9KSk7fWF0dGFjaEludFZlY3Rvckxpc3RlbmVyKHQsZSl7V28odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoSW50VmVjdG9yTGlzdGVuZXIodCk7fSkpO31hdHRhY2hVaW50TGlzdGVuZXIodCxlKXtIbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hVaW50TGlzdGVuZXIodCk7fSkpO31hdHRhY2hVaW50VmVjdG9yTGlzdGVuZXIodCxlKXtXbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hVaW50VmVjdG9yTGlzdGVuZXIodCk7fSkpO31hdHRhY2hEb3VibGVMaXN0ZW5lcih0LGUpe0hvKHRoaXMsdCxlKSxqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaERvdWJsZUxpc3RlbmVyKHQpO30pKTt9YXR0YWNoRG91YmxlVmVjdG9yTGlzdGVuZXIodCxlKXtXbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hEb3VibGVWZWN0b3JMaXN0ZW5lcih0KTt9KSk7fWF0dGFjaEZsb2F0TGlzdGVuZXIodCxlKXtIbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hGbG9hdExpc3RlbmVyKHQpO30pKTt9YXR0YWNoRmxvYXRWZWN0b3JMaXN0ZW5lcih0LGUpe1dvKHRoaXMsdCxlKSxqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaEZsb2F0VmVjdG9yTGlzdGVuZXIodCk7fSkpO31hdHRhY2hTdHJpbmdMaXN0ZW5lcih0LGUpe0hvKHRoaXMsdCxlKSxqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaFN0cmluZ0xpc3RlbmVyKHQpO30pKTt9YXR0YWNoU3RyaW5nVmVjdG9yTGlzdGVuZXIodCxlKXtXbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hTdHJpbmdWZWN0b3JMaXN0ZW5lcih0KTt9KSk7fWF0dGFjaFByb3RvTGlzdGVuZXIodCxlLG4pe0hvKHRoaXMsdCxlKSxqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaFByb3RvTGlzdGVuZXIodCxufHwhMSk7fSkpO31hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKHQsZSxuKXtXbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKHQsbnx8ITEpO30pKTt9YXR0YWNoQXVkaW9MaXN0ZW5lcih0LGUsbil7dGhpcy5pLl9hdHRhY2hBdWRpb0xpc3RlbmVyfHxjb25zb2xlLndhcm4oJ0F0dGVtcHRpbmcgdG8gdXNlIGF0dGFjaEF1ZGlvTGlzdGVuZXIgd2l0aG91dCBzdXBwb3J0IGZvciBvdXRwdXQgYXVkaW8uIElzIGJ1aWxkIGRlcCAiOmdsX2dyYXBoX3J1bm5lcl9hdWRpb19vdXQiIG1pc3Npbmc/JyksSG8odGhpcyx0LCgodCxuKT0+e3Q9bmV3IEZsb2F0MzJBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5sZW5ndGgvNCksZSh0LG4pO30pKSxqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaEF1ZGlvTGlzdGVuZXIodCxufHwhMSk7fSkpO31maW5pc2hQcm9jZXNzaW5nKCl7dGhpcy5pLl93YWl0VW50aWxJZGxlKCk7fWNsb3NlR3JhcGgoKXt0aGlzLmkuX2Nsb3NlR3JhcGgoKSx0aGlzLmkuc2ltcGxlTGlzdGVuZXJzPXZvaWQgMCx0aGlzLmkuZW1wdHlQYWNrZXRMaXN0ZW5lcnM9dm9pZCAwO319LGNsYXNzIGV4dGVuZHMgV2F7Z2V0IGhhKCl7cmV0dXJuIHRoaXMuaX1zYSh0LGUsbil7am8odGhpcyxlLChlPT57Y29uc3RbcixpXT1Wbyh0aGlzLHQsZSk7dGhpcy5oYS5fYWRkQm91bmRUZXh0dXJlQXNJbWFnZVRvU3RyZWFtKGUscixpLG4pO30pKTt9WCh0LGUpe0hvKHRoaXMsdCxlKSxqbyh0aGlzLHQsKHQ9Pnt0aGlzLmhhLl9hdHRhY2hJbWFnZUxpc3RlbmVyKHQpO30pKTt9ZWEodCxlKXtXbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5oYS5fYXR0YWNoSW1hZ2VWZWN0b3JMaXN0ZW5lcih0KTt9KSk7fX0pKTt2YXIgV2EsemE9Y2xhc3MgZXh0ZW5kcyBIYXt9O2FzeW5jIGZ1bmN0aW9uIEthKHQsZSxuKXtyZXR1cm4gYXN5bmMgZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHpvKHQsZSxuLHIpfSh0LG4uY2FudmFzPz8oRG8oKT92b2lkIDA6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikpLGUsbil9ZnVuY3Rpb24gWWEodCxlLG4scil7aWYodC5XKXtjb25zdCBzPW5ldyBmcztpZihuPy5yZWdpb25PZkludGVyZXN0KXtpZighdC5yYSl0aHJvdyBFcnJvcigiVGhpcyB0YXNrIGRvZXNuJ3Qgc3VwcG9ydCByZWdpb24tb2YtaW50ZXJlc3QuIik7dmFyIGk9bi5yZWdpb25PZkludGVyZXN0O2lmKGkubGVmdD49aS5yaWdodHx8aS50b3A+PWkuYm90dG9tKXRocm93IEVycm9yKCJFeHBlY3RlZCBSZWN0RiB3aXRoIGxlZnQgPCByaWdodCBhbmQgdG9wIDwgYm90dG9tLiIpO2lmKGkubGVmdDwwfHxpLnRvcDwwfHxpLnJpZ2h0PjF8fGkuYm90dG9tPjEpdGhyb3cgRXJyb3IoIkV4cGVjdGVkIFJlY3RGIHZhbHVlcyB0byBiZSBpbiBbMCwxXS4iKTt3bihzLDEsKGkubGVmdCtpLnJpZ2h0KS8yKSx3bihzLDIsKGkudG9wK2kuYm90dG9tKS8yKSx3bihzLDQsaS5yaWdodC1pLmxlZnQpLHduKHMsMyxpLmJvdHRvbS1pLnRvcCk7fWVsc2Ugd24ocywxLC41KSx3bihzLDIsLjUpLHduKHMsNCwxKSx3bihzLDMsMSk7aWYobj8ucm90YXRpb25EZWdyZWVzKXtpZihuPy5yb3RhdGlvbkRlZ3JlZXMlOTAhPTApdGhyb3cgRXJyb3IoIkV4cGVjdGVkIHJvdGF0aW9uIHRvIGJlIGEgbXVsdGlwbGUgb2YgOTDCsC4iKTtpZih3bihzLDUsLU1hdGguUEkqbi5yb3RhdGlvbkRlZ3JlZXMvMTgwKSxuPy5yb3RhdGlvbkRlZ3JlZXMlMTgwIT0wKXtjb25zdFt0LHJdPUdvKGUpO249eW4ocywzKSpyL3QsaT15bihzLDQpKnQvcix3bihzLDQsbiksd24ocywzLGkpO319dC5nLmFkZFByb3RvVG9TdHJlYW0ocy5nKCksIm1lZGlhcGlwZS5Ob3JtYWxpemVkUmVjdCIsdC5XLHIpO310Lmcuc2EoZSx0LmNhLHI/P3BlcmZvcm1hbmNlLm5vdygpKSx0LmZpbmlzaFByb2Nlc3NpbmcoKTt9ZnVuY3Rpb24gJGEodCxlLG4pe2lmKHQuYmFzZU9wdGlvbnM/LmcoKSl0aHJvdyBFcnJvcigiVGFzayBpcyBub3QgaW5pdGlhbGl6ZWQgd2l0aCBpbWFnZSBtb2RlLiAncnVubmluZ01vZGUnIG11c3QgYmUgc2V0IHRvICdJTUFHRScuIik7WWEodCxlLG4sdC5CKzEpO31mdW5jdGlvbiBxYSh0LGUsbixyKXtpZighdC5iYXNlT3B0aW9ucz8uZygpKXRocm93IEVycm9yKCJUYXNrIGlzIG5vdCBpbml0aWFsaXplZCB3aXRoIHZpZGVvIG1vZGUuICdydW5uaW5nTW9kZScgbXVzdCBiZSBzZXQgdG8gJ1ZJREVPJy4iKTtZYSh0LGUsbixyKTt9ZnVuY3Rpb24gSmEodCxlLG4scil7dmFyIGk9ZS5kYXRhO2NvbnN0IHM9ZS53aWR0aCxvPXMqKGU9ZS5oZWlnaHQpO2lmKChpIGluc3RhbmNlb2YgVWludDhBcnJheXx8aSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkmJmkubGVuZ3RoIT09byl0aHJvdyBFcnJvcigiVW5zdXBwb3J0ZWQgY2hhbm5lbCBjb3VudDogIitpLmxlbmd0aC9vKTtyZXR1cm4gdD1uZXcgd2EoW2ldLG4sITEsdC5nLmkuY2FudmFzLHQuUCxzLGUpLHI/dC5jbG9uZSgpOnR9dmFyIFphPWNsYXNzIGV4dGVuZHMgUW97Y29uc3RydWN0b3IodCxlLG4scil7c3VwZXIodCksdGhpcy5nPXQsdGhpcy5jYT1lLHRoaXMuVz1uLHRoaXMucmE9cix0aGlzLlA9bmV3IGNhO31sKHQsZT0hMCl7aWYoInJ1bm5pbmdNb2RlImluIHQmJnZuKHRoaXMuYmFzZU9wdGlvbnMsMiwhIXQucnVubmluZ01vZGUmJiJJTUFHRSIhPT10LnJ1bm5pbmdNb2RlKSx2b2lkIDAhPT10LmNhbnZhcyYmdGhpcy5nLmkuY2FudmFzIT09dC5jYW52YXMpdGhyb3cgRXJyb3IoIllvdSBtdXN0IGNyZWF0ZSBhIG5ldyB0YXNrIHRvIHJlc2V0IHRoZSBjYW52YXMuIik7cmV0dXJuIHN1cGVyLmwodCxlKX1jbG9zZSgpe3RoaXMuUC5jbG9zZSgpLHN1cGVyLmNsb3NlKCk7fX07WmEucHJvdG90eXBlLmNsb3NlPVphLnByb3RvdHlwZS5jbG9zZTt2YXIgUWE9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbWFnZV9pbiIsIm5vcm1fcmVjdF9pbiIsITEpLHRoaXMuaj17ZGV0ZWN0aW9uczpbXX0sdW4odD10aGlzLmg9bmV3IFJzLDAsMSxlPW5ldyB4cyksd24odGhpcy5oLDIsLjUpLHduKHRoaXMuaCwzLC4zKTt9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGFuKHRoaXMuaCx4cywxKX1zZXQgYmFzZU9wdGlvbnModCl7dW4odGhpcy5oLDAsMSx0KTt9byh0KXtyZXR1cm4gIm1pbkRldGVjdGlvbkNvbmZpZGVuY2UiaW4gdCYmd24odGhpcy5oLDIsdC5taW5EZXRlY3Rpb25Db25maWRlbmNlPz8uNSksIm1pblN1cHByZXNzaW9uVGhyZXNob2xkImluIHQmJnduKHRoaXMuaCwzLHQubWluU3VwcHJlc3Npb25UaHJlc2hvbGQ/Py4zKSx0aGlzLmwodCl9RCh0LGUpe3JldHVybiB0aGlzLmo9e2RldGVjdGlvbnM6W119LCRhKHRoaXMsdCxlKSx0aGlzLmp9Rih0LGUsbil7cmV0dXJuIHRoaXMuaj17ZGV0ZWN0aW9uczpbXX0scWEodGhpcyx0LG4sZSksdGhpcy5qfW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW1hZ2VfaW4iKSxLaSh0LCJub3JtX3JlY3RfaW4iKSxZaSh0LCJkZXRlY3Rpb25zIik7Y29uc3QgZT1uZXcgQ2k7S24oZSxJcyx0aGlzLmgpO2NvbnN0IG49bmV3IFZpO0JpKG4sIm1lZGlhcGlwZS50YXNrcy52aXNpb24uZmFjZV9kZXRlY3Rvci5GYWNlRGV0ZWN0b3JHcmFwaCIpLEdpKG4sIklNQUdFOmltYWdlX2luIiksR2kobiwiTk9STV9SRUNUOm5vcm1fcmVjdF9pbiIpLGppKG4sIkRFVEVDVElPTlM6ZGV0ZWN0aW9ucyIpLG4ubyhlKSx6aSh0LG4pLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJkZXRlY3Rpb25zIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXQ9c3MoZSksdGhpcy5qLmRldGVjdGlvbnMucHVzaChMbyh0KSk7JG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImRldGVjdGlvbnMiLCh0PT57JG8odGhpcyx0KTt9KSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKTt9fTtRYS5wcm90b3R5cGUuZGV0ZWN0Rm9yVmlkZW89UWEucHJvdG90eXBlLkYsUWEucHJvdG90eXBlLmRldGVjdD1RYS5wcm90b3R5cGUuRCxRYS5wcm90b3R5cGUuc2V0T3B0aW9ucz1RYS5wcm90b3R5cGUubyxRYS5jcmVhdGVGcm9tTW9kZWxQYXRoPWFzeW5jIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFFhLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSxRYS5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoUWEsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sUWEuY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoUWEsdCxlKX07dmFyIHRoPVhhKFs2MSwxNDZdLFsxNDYsOTFdLFs5MSwxODFdLFsxODEsODRdLFs4NCwxN10sWzE3LDMxNF0sWzMxNCw0MDVdLFs0MDUsMzIxXSxbMzIxLDM3NV0sWzM3NSwyOTFdLFs2MSwxODVdLFsxODUsNDBdLFs0MCwzOV0sWzM5LDM3XSxbMzcsMF0sWzAsMjY3XSxbMjY3LDI2OV0sWzI2OSwyNzBdLFsyNzAsNDA5XSxbNDA5LDI5MV0sWzc4LDk1XSxbOTUsODhdLFs4OCwxNzhdLFsxNzgsODddLFs4NywxNF0sWzE0LDMxN10sWzMxNyw0MDJdLFs0MDIsMzE4XSxbMzE4LDMyNF0sWzMyNCwzMDhdLFs3OCwxOTFdLFsxOTEsODBdLFs4MCw4MV0sWzgxLDgyXSxbODIsMTNdLFsxMywzMTJdLFszMTIsMzExXSxbMzExLDMxMF0sWzMxMCw0MTVdLFs0MTUsMzA4XSksZWg9WGEoWzI2MywyNDldLFsyNDksMzkwXSxbMzkwLDM3M10sWzM3MywzNzRdLFszNzQsMzgwXSxbMzgwLDM4MV0sWzM4MSwzODJdLFszODIsMzYyXSxbMjYzLDQ2Nl0sWzQ2NiwzODhdLFszODgsMzg3XSxbMzg3LDM4Nl0sWzM4NiwzODVdLFszODUsMzg0XSxbMzg0LDM5OF0sWzM5OCwzNjJdKSxuaD1YYShbMjc2LDI4M10sWzI4MywyODJdLFsyODIsMjk1XSxbMjk1LDI4NV0sWzMwMCwyOTNdLFsyOTMsMzM0XSxbMzM0LDI5Nl0sWzI5NiwzMzZdKSxyaD1YYShbNDc0LDQ3NV0sWzQ3NSw0NzZdLFs0NzYsNDc3XSxbNDc3LDQ3NF0pLGloPVhhKFszMyw3XSxbNywxNjNdLFsxNjMsMTQ0XSxbMTQ0LDE0NV0sWzE0NSwxNTNdLFsxNTMsMTU0XSxbMTU0LDE1NV0sWzE1NSwxMzNdLFszMywyNDZdLFsyNDYsMTYxXSxbMTYxLDE2MF0sWzE2MCwxNTldLFsxNTksMTU4XSxbMTU4LDE1N10sWzE1NywxNzNdLFsxNzMsMTMzXSksc2g9WGEoWzQ2LDUzXSxbNTMsNTJdLFs1Miw2NV0sWzY1LDU1XSxbNzAsNjNdLFs2MywxMDVdLFsxMDUsNjZdLFs2NiwxMDddKSxvaD1YYShbNDY5LDQ3MF0sWzQ3MCw0NzFdLFs0NzEsNDcyXSxbNDcyLDQ2OV0pLGFoPVhhKFsxMCwzMzhdLFszMzgsMjk3XSxbMjk3LDMzMl0sWzMzMiwyODRdLFsyODQsMjUxXSxbMjUxLDM4OV0sWzM4OSwzNTZdLFszNTYsNDU0XSxbNDU0LDMyM10sWzMyMywzNjFdLFszNjEsMjg4XSxbMjg4LDM5N10sWzM5NywzNjVdLFszNjUsMzc5XSxbMzc5LDM3OF0sWzM3OCw0MDBdLFs0MDAsMzc3XSxbMzc3LDE1Ml0sWzE1MiwxNDhdLFsxNDgsMTc2XSxbMTc2LDE0OV0sWzE0OSwxNTBdLFsxNTAsMTM2XSxbMTM2LDE3Ml0sWzE3Miw1OF0sWzU4LDEzMl0sWzEzMiw5M10sWzkzLDIzNF0sWzIzNCwxMjddLFsxMjcsMTYyXSxbMTYyLDIxXSxbMjEsNTRdLFs1NCwxMDNdLFsxMDMsNjddLFs2NywxMDldLFsxMDksMTBdKSxoaD1bLi4udGgsLi4uZWgsLi4ubmgsLi4uaWgsLi4uc2gsLi4uYWhdLGNoPVhhKFsxMjcsMzRdLFszNCwxMzldLFsxMzksMTI3XSxbMTEsMF0sWzAsMzddLFszNywxMV0sWzIzMiwyMzFdLFsyMzEsMTIwXSxbMTIwLDIzMl0sWzcyLDM3XSxbMzcsMzldLFszOSw3Ml0sWzEyOCwxMjFdLFsxMjEsNDddLFs0NywxMjhdLFsyMzIsMTIxXSxbMTIxLDEyOF0sWzEyOCwyMzJdLFsxMDQsNjldLFs2OSw2N10sWzY3LDEwNF0sWzE3NSwxNzFdLFsxNzEsMTQ4XSxbMTQ4LDE3NV0sWzExOCw1MF0sWzUwLDEwMV0sWzEwMSwxMThdLFs3MywzOV0sWzM5LDQwXSxbNDAsNzNdLFs5LDE1MV0sWzE1MSwxMDhdLFsxMDgsOV0sWzQ4LDExNV0sWzExNSwxMzFdLFsxMzEsNDhdLFsxOTQsMjA0XSxbMjA0LDIxMV0sWzIxMSwxOTRdLFs3NCw0MF0sWzQwLDE4NV0sWzE4NSw3NF0sWzgwLDQyXSxbNDIsMTgzXSxbMTgzLDgwXSxbNDAsOTJdLFs5MiwxODZdLFsxODYsNDBdLFsyMzAsMjI5XSxbMjI5LDExOF0sWzExOCwyMzBdLFsyMDIsMjEyXSxbMjEyLDIxNF0sWzIxNCwyMDJdLFs4MywxOF0sWzE4LDE3XSxbMTcsODNdLFs3Niw2MV0sWzYxLDE0Nl0sWzE0Niw3Nl0sWzE2MCwyOV0sWzI5LDMwXSxbMzAsMTYwXSxbNTYsMTU3XSxbMTU3LDE3M10sWzE3Myw1Nl0sWzEwNiwyMDRdLFsyMDQsMTk0XSxbMTk0LDEwNl0sWzEzNSwyMTRdLFsyMTQsMTkyXSxbMTkyLDEzNV0sWzIwMywxNjVdLFsxNjUsOThdLFs5OCwyMDNdLFsyMSw3MV0sWzcxLDY4XSxbNjgsMjFdLFs1MSw0NV0sWzQ1LDRdLFs0LDUxXSxbMTQ0LDI0XSxbMjQsMjNdLFsyMywxNDRdLFs3NywxNDZdLFsxNDYsOTFdLFs5MSw3N10sWzIwNSw1MF0sWzUwLDE4N10sWzE4NywyMDVdLFsyMDEsMjAwXSxbMjAwLDE4XSxbMTgsMjAxXSxbOTEsMTA2XSxbMTA2LDE4Ml0sWzE4Miw5MV0sWzkwLDkxXSxbOTEsMTgxXSxbMTgxLDkwXSxbODUsODRdLFs4NCwxN10sWzE3LDg1XSxbMjA2LDIwM10sWzIwMywzNl0sWzM2LDIwNl0sWzE0OCwxNzFdLFsxNzEsMTQwXSxbMTQwLDE0OF0sWzkyLDQwXSxbNDAsMzldLFszOSw5Ml0sWzE5MywxODldLFsxODksMjQ0XSxbMjQ0LDE5M10sWzE1OSwxNThdLFsxNTgsMjhdLFsyOCwxNTldLFsyNDcsMjQ2XSxbMjQ2LDE2MV0sWzE2MSwyNDddLFsyMzYsM10sWzMsMTk2XSxbMTk2LDIzNl0sWzU0LDY4XSxbNjgsMTA0XSxbMTA0LDU0XSxbMTkzLDE2OF0sWzE2OCw4XSxbOCwxOTNdLFsxMTcsMjI4XSxbMjI4LDMxXSxbMzEsMTE3XSxbMTg5LDE5M10sWzE5Myw1NV0sWzU1LDE4OV0sWzk4LDk3XSxbOTcsOTldLFs5OSw5OF0sWzEyNiw0N10sWzQ3LDEwMF0sWzEwMCwxMjZdLFsxNjYsNzldLFs3OSwyMThdLFsyMTgsMTY2XSxbMTU1LDE1NF0sWzE1NCwyNl0sWzI2LDE1NV0sWzIwOSw0OV0sWzQ5LDEzMV0sWzEzMSwyMDldLFsxMzUsMTM2XSxbMTM2LDE1MF0sWzE1MCwxMzVdLFs0NywxMjZdLFsxMjYsMjE3XSxbMjE3LDQ3XSxbMjIzLDUyXSxbNTIsNTNdLFs1MywyMjNdLFs0NSw1MV0sWzUxLDEzNF0sWzEzNCw0NV0sWzIxMSwxNzBdLFsxNzAsMTQwXSxbMTQwLDIxMV0sWzY3LDY5XSxbNjksMTA4XSxbMTA4LDY3XSxbNDMsMTA2XSxbMTA2LDkxXSxbOTEsNDNdLFsyMzAsMTE5XSxbMTE5LDEyMF0sWzEyMCwyMzBdLFsyMjYsMTMwXSxbMTMwLDI0N10sWzI0NywyMjZdLFs2Myw1M10sWzUzLDUyXSxbNTIsNjNdLFsyMzgsMjBdLFsyMCwyNDJdLFsyNDIsMjM4XSxbNDYsNzBdLFs3MCwxNTZdLFsxNTYsNDZdLFs3OCw2Ml0sWzYyLDk2XSxbOTYsNzhdLFs0Niw1M10sWzUzLDYzXSxbNjMsNDZdLFsxNDMsMzRdLFszNCwyMjddLFsyMjcsMTQzXSxbMTIzLDExN10sWzExNywxMTFdLFsxMTEsMTIzXSxbNDQsMTI1XSxbMTI1LDE5XSxbMTksNDRdLFsyMzYsMTM0XSxbMTM0LDUxXSxbNTEsMjM2XSxbMjE2LDIwNl0sWzIwNiwyMDVdLFsyMDUsMjE2XSxbMTU0LDE1M10sWzE1MywyMl0sWzIyLDE1NF0sWzM5LDM3XSxbMzcsMTY3XSxbMTY3LDM5XSxbMjAwLDIwMV0sWzIwMSwyMDhdLFsyMDgsMjAwXSxbMzYsMTQyXSxbMTQyLDEwMF0sWzEwMCwzNl0sWzU3LDIxMl0sWzIxMiwyMDJdLFsyMDIsNTddLFsyMCw2MF0sWzYwLDk5XSxbOTksMjBdLFsyOCwxNThdLFsxNTgsMTU3XSxbMTU3LDI4XSxbMzUsMjI2XSxbMjI2LDExM10sWzExMywzNV0sWzE2MCwxNTldLFsxNTksMjddLFsyNywxNjBdLFsyMDQsMjAyXSxbMjAyLDIxMF0sWzIxMCwyMDRdLFsxMTMsMjI1XSxbMjI1LDQ2XSxbNDYsMTEzXSxbNDMsMjAyXSxbMjAyLDIwNF0sWzIwNCw0M10sWzYyLDc2XSxbNzYsNzddLFs3Nyw2Ml0sWzEzNywxMjNdLFsxMjMsMTE2XSxbMTE2LDEzN10sWzQxLDM4XSxbMzgsNzJdLFs3Miw0MV0sWzIwMywxMjldLFsxMjksMTQyXSxbMTQyLDIwM10sWzY0LDk4XSxbOTgsMjQwXSxbMjQwLDY0XSxbNDksMTAyXSxbMTAyLDY0XSxbNjQsNDldLFs0MSw3M10sWzczLDc0XSxbNzQsNDFdLFsyMTIsMjE2XSxbMjE2LDIwN10sWzIwNywyMTJdLFs0Miw3NF0sWzc0LDE4NF0sWzE4NCw0Ml0sWzE2OSwxNzBdLFsxNzAsMjExXSxbMjExLDE2OV0sWzE3MCwxNDldLFsxNDksMTc2XSxbMTc2LDE3MF0sWzEwNSw2Nl0sWzY2LDY5XSxbNjksMTA1XSxbMTIyLDZdLFs2LDE2OF0sWzE2OCwxMjJdLFsxMjMsMTQ3XSxbMTQ3LDE4N10sWzE4NywxMjNdLFs5Niw3N10sWzc3LDkwXSxbOTAsOTZdLFs2NSw1NV0sWzU1LDEwN10sWzEwNyw2NV0sWzg5LDkwXSxbOTAsMTgwXSxbMTgwLDg5XSxbMTAxLDEwMF0sWzEwMCwxMjBdLFsxMjAsMTAxXSxbNjMsMTA1XSxbMTA1LDEwNF0sWzEwNCw2M10sWzkzLDEzN10sWzEzNywyMjddLFsyMjcsOTNdLFsxNSw4Nl0sWzg2LDg1XSxbODUsMTVdLFsxMjksMTAyXSxbMTAyLDQ5XSxbNDksMTI5XSxbMTQsODddLFs4Nyw4Nl0sWzg2LDE0XSxbNTUsOF0sWzgsOV0sWzksNTVdLFsxMDAsNDddLFs0NywxMjFdLFsxMjEsMTAwXSxbMTQ1LDIzXSxbMjMsMjJdLFsyMiwxNDVdLFs4OCw4OV0sWzg5LDE3OV0sWzE3OSw4OF0sWzYsMTIyXSxbMTIyLDE5Nl0sWzE5Niw2XSxbODgsOTVdLFs5NSw5Nl0sWzk2LDg4XSxbMTM4LDE3Ml0sWzE3MiwxMzZdLFsxMzYsMTM4XSxbMjE1LDU4XSxbNTgsMTcyXSxbMTcyLDIxNV0sWzExNSw0OF0sWzQ4LDIxOV0sWzIxOSwxMTVdLFs0Miw4MF0sWzgwLDgxXSxbODEsNDJdLFsxOTUsM10sWzMsNTFdLFs1MSwxOTVdLFs0MywxNDZdLFsxNDYsNjFdLFs2MSw0M10sWzE3MSwxNzVdLFsxNzUsMTk5XSxbMTk5LDE3MV0sWzgxLDgyXSxbODIsMzhdLFszOCw4MV0sWzUzLDQ2XSxbNDYsMjI1XSxbMjI1LDUzXSxbMTQ0LDE2M10sWzE2MywxMTBdLFsxMTAsMTQ0XSxbNTIsNjVdLFs2NSw2Nl0sWzY2LDUyXSxbMjI5LDIyOF0sWzIyOCwxMTddLFsxMTcsMjI5XSxbMzQsMTI3XSxbMTI3LDIzNF0sWzIzNCwzNF0sWzEwNywxMDhdLFsxMDgsNjldLFs2OSwxMDddLFsxMDksMTA4XSxbMTA4LDE1MV0sWzE1MSwxMDldLFs0OCw2NF0sWzY0LDIzNV0sWzIzNSw0OF0sWzYyLDc4XSxbNzgsMTkxXSxbMTkxLDYyXSxbMTI5LDIwOV0sWzIwOSwxMjZdLFsxMjYsMTI5XSxbMTExLDM1XSxbMzUsMTQzXSxbMTQzLDExMV0sWzExNywxMjNdLFsxMjMsNTBdLFs1MCwxMTddLFsyMjIsNjVdLFs2NSw1Ml0sWzUyLDIyMl0sWzE5LDEyNV0sWzEyNSwxNDFdLFsxNDEsMTldLFsyMjEsNTVdLFs1NSw2NV0sWzY1LDIyMV0sWzMsMTk1XSxbMTk1LDE5N10sWzE5NywzXSxbMjUsN10sWzcsMzNdLFszMywyNV0sWzIyMCwyMzddLFsyMzcsNDRdLFs0NCwyMjBdLFs3MCw3MV0sWzcxLDEzOV0sWzEzOSw3MF0sWzEyMiwxOTNdLFsxOTMsMjQ1XSxbMjQ1LDEyMl0sWzI0NywxMzBdLFsxMzAsMzNdLFszMywyNDddLFs3MSwyMV0sWzIxLDE2Ml0sWzE2Miw3MV0sWzE3MCwxNjldLFsxNjksMTUwXSxbMTUwLDE3MF0sWzE4OCwxNzRdLFsxNzQsMTk2XSxbMTk2LDE4OF0sWzIxNiwxODZdLFsxODYsOTJdLFs5MiwyMTZdLFsyLDk3XSxbOTcsMTY3XSxbMTY3LDJdLFsxNDEsMTI1XSxbMTI1LDI0MV0sWzI0MSwxNDFdLFsxNjQsMTY3XSxbMTY3LDM3XSxbMzcsMTY0XSxbNzIsMzhdLFszOCwxMl0sWzEyLDcyXSxbMzgsODJdLFs4MiwxM10sWzEzLDM4XSxbNjMsNjhdLFs2OCw3MV0sWzcxLDYzXSxbMjI2LDM1XSxbMzUsMTExXSxbMTExLDIyNl0sWzEwMSw1MF0sWzUwLDIwNV0sWzIwNSwxMDFdLFsyMDYsOTJdLFs5MiwxNjVdLFsxNjUsMjA2XSxbMjA5LDE5OF0sWzE5OCwyMTddLFsyMTcsMjA5XSxbMTY1LDE2N10sWzE2Nyw5N10sWzk3LDE2NV0sWzIyMCwxMTVdLFsxMTUsMjE4XSxbMjE4LDIyMF0sWzEzMywxMTJdLFsxMTIsMjQzXSxbMjQzLDEzM10sWzIzOSwyMzhdLFsyMzgsMjQxXSxbMjQxLDIzOV0sWzIxNCwxMzVdLFsxMzUsMTY5XSxbMTY5LDIxNF0sWzE5MCwxNzNdLFsxNzMsMTMzXSxbMTMzLDE5MF0sWzE3MSwyMDhdLFsyMDgsMzJdLFszMiwxNzFdLFsxMjUsNDRdLFs0NCwyMzddLFsyMzcsMTI1XSxbODYsODddLFs4NywxNzhdLFsxNzgsODZdLFs4NSw4Nl0sWzg2LDE3OV0sWzE3OSw4NV0sWzg0LDg1XSxbODUsMTgwXSxbMTgwLDg0XSxbODMsODRdLFs4NCwxODFdLFsxODEsODNdLFsyMDEsODNdLFs4MywxODJdLFsxODIsMjAxXSxbMTM3LDkzXSxbOTMsMTMyXSxbMTMyLDEzN10sWzc2LDYyXSxbNjIsMTgzXSxbMTgzLDc2XSxbNjEsNzZdLFs3NiwxODRdLFsxODQsNjFdLFs1Nyw2MV0sWzYxLDE4NV0sWzE4NSw1N10sWzIxMiw1N10sWzU3LDE4Nl0sWzE4NiwyMTJdLFsyMTQsMjA3XSxbMjA3LDE4N10sWzE4NywyMTRdLFszNCwxNDNdLFsxNDMsMTU2XSxbMTU2LDM0XSxbNzksMjM5XSxbMjM5LDIzN10sWzIzNyw3OV0sWzEyMywxMzddLFsxMzcsMTc3XSxbMTc3LDEyM10sWzQ0LDFdLFsxLDRdLFs0LDQ0XSxbMjAxLDE5NF0sWzE5NCwzMl0sWzMyLDIwMV0sWzY0LDEwMl0sWzEwMiwxMjldLFsxMjksNjRdLFsyMTMsMjE1XSxbMjE1LDEzOF0sWzEzOCwyMTNdLFs1OSwxNjZdLFsxNjYsMjE5XSxbMjE5LDU5XSxbMjQyLDk5XSxbOTksOTddLFs5NywyNDJdLFsyLDk0XSxbOTQsMTQxXSxbMTQxLDJdLFs3NSw1OV0sWzU5LDIzNV0sWzIzNSw3NV0sWzI0LDExMF0sWzExMCwyMjhdLFsyMjgsMjRdLFsyNSwxMzBdLFsxMzAsMjI2XSxbMjI2LDI1XSxbMjMsMjRdLFsyNCwyMjldLFsyMjksMjNdLFsyMiwyM10sWzIzLDIzMF0sWzIzMCwyMl0sWzI2LDIyXSxbMjIsMjMxXSxbMjMxLDI2XSxbMTEyLDI2XSxbMjYsMjMyXSxbMjMyLDExMl0sWzE4OSwxOTBdLFsxOTAsMjQzXSxbMjQzLDE4OV0sWzIyMSw1Nl0sWzU2LDE5MF0sWzE5MCwyMjFdLFsyOCw1Nl0sWzU2LDIyMV0sWzIyMSwyOF0sWzI3LDI4XSxbMjgsMjIyXSxbMjIyLDI3XSxbMjksMjddLFsyNywyMjNdLFsyMjMsMjldLFszMCwyOV0sWzI5LDIyNF0sWzIyNCwzMF0sWzI0NywzMF0sWzMwLDIyNV0sWzIyNSwyNDddLFsyMzgsNzldLFs3OSwyMF0sWzIwLDIzOF0sWzE2Niw1OV0sWzU5LDc1XSxbNzUsMTY2XSxbNjAsNzVdLFs3NSwyNDBdLFsyNDAsNjBdLFsxNDcsMTc3XSxbMTc3LDIxNV0sWzIxNSwxNDddLFsyMCw3OV0sWzc5LDE2Nl0sWzE2NiwyMF0sWzE4NywxNDddLFsxNDcsMjEzXSxbMjEzLDE4N10sWzExMiwyMzNdLFsyMzMsMjQ0XSxbMjQ0LDExMl0sWzIzMywxMjhdLFsxMjgsMjQ1XSxbMjQ1LDIzM10sWzEyOCwxMTRdLFsxMTQsMTg4XSxbMTg4LDEyOF0sWzExNCwyMTddLFsyMTcsMTc0XSxbMTc0LDExNF0sWzEzMSwxMTVdLFsxMTUsMjIwXSxbMjIwLDEzMV0sWzIxNywxOThdLFsxOTgsMjM2XSxbMjM2LDIxN10sWzE5OCwxMzFdLFsxMzEsMTM0XSxbMTM0LDE5OF0sWzE3NywxMzJdLFsxMzIsNThdLFs1OCwxNzddLFsxNDMsMzVdLFszNSwxMjRdLFsxMjQsMTQzXSxbMTEwLDE2M10sWzE2Myw3XSxbNywxMTBdLFsyMjgsMTEwXSxbMTEwLDI1XSxbMjUsMjI4XSxbMzU2LDM4OV0sWzM4OSwzNjhdLFszNjgsMzU2XSxbMTEsMzAyXSxbMzAyLDI2N10sWzI2NywxMV0sWzQ1MiwzNTBdLFszNTAsMzQ5XSxbMzQ5LDQ1Ml0sWzMwMiwzMDNdLFszMDMsMjY5XSxbMjY5LDMwMl0sWzM1NywzNDNdLFszNDMsMjc3XSxbMjc3LDM1N10sWzQ1Miw0NTNdLFs0NTMsMzU3XSxbMzU3LDQ1Ml0sWzMzMywzMzJdLFszMzIsMjk3XSxbMjk3LDMzM10sWzE3NSwxNTJdLFsxNTIsMzc3XSxbMzc3LDE3NV0sWzM0NywzNDhdLFszNDgsMzMwXSxbMzMwLDM0N10sWzMwMywzMDRdLFszMDQsMjcwXSxbMjcwLDMwM10sWzksMzM2XSxbMzM2LDMzN10sWzMzNyw5XSxbMjc4LDI3OV0sWzI3OSwzNjBdLFszNjAsMjc4XSxbNDE4LDI2Ml0sWzI2Miw0MzFdLFs0MzEsNDE4XSxbMzA0LDQwOF0sWzQwOCw0MDldLFs0MDksMzA0XSxbMzEwLDQxNV0sWzQxNSw0MDddLFs0MDcsMzEwXSxbMjcwLDQwOV0sWzQwOSw0MTBdLFs0MTAsMjcwXSxbNDUwLDM0OF0sWzM0OCwzNDddLFszNDcsNDUwXSxbNDIyLDQzMF0sWzQzMCw0MzRdLFs0MzQsNDIyXSxbMzEzLDMxNF0sWzMxNCwxN10sWzE3LDMxM10sWzMwNiwzMDddLFszMDcsMzc1XSxbMzc1LDMwNl0sWzM4NywzODhdLFszODgsMjYwXSxbMjYwLDM4N10sWzI4Niw0MTRdLFs0MTQsMzk4XSxbMzk4LDI4Nl0sWzMzNSw0MDZdLFs0MDYsNDE4XSxbNDE4LDMzNV0sWzM2NCwzNjddLFszNjcsNDE2XSxbNDE2LDM2NF0sWzQyMywzNThdLFszNTgsMzI3XSxbMzI3LDQyM10sWzI1MSwyODRdLFsyODQsMjk4XSxbMjk4LDI1MV0sWzI4MSw1XSxbNSw0XSxbNCwyODFdLFszNzMsMzc0XSxbMzc0LDI1M10sWzI1MywzNzNdLFszMDcsMzIwXSxbMzIwLDMyMV0sWzMyMSwzMDddLFs0MjUsNDI3XSxbNDI3LDQxMV0sWzQxMSw0MjVdLFs0MjEsMzEzXSxbMzEzLDE4XSxbMTgsNDIxXSxbMzIxLDQwNV0sWzQwNSw0MDZdLFs0MDYsMzIxXSxbMzIwLDQwNF0sWzQwNCw0MDVdLFs0MDUsMzIwXSxbMzE1LDE2XSxbMTYsMTddLFsxNywzMTVdLFs0MjYsNDI1XSxbNDI1LDI2Nl0sWzI2Niw0MjZdLFszNzcsNDAwXSxbNDAwLDM2OV0sWzM2OSwzNzddLFszMjIsMzkxXSxbMzkxLDI2OV0sWzI2OSwzMjJdLFs0MTcsNDY1XSxbNDY1LDQ2NF0sWzQ2NCw0MTddLFszODYsMjU3XSxbMjU3LDI1OF0sWzI1OCwzODZdLFs0NjYsMjYwXSxbMjYwLDM4OF0sWzM4OCw0NjZdLFs0NTYsMzk5XSxbMzk5LDQxOV0sWzQxOSw0NTZdLFsyODQsMzMyXSxbMzMyLDMzM10sWzMzMywyODRdLFs0MTcsMjg1XSxbMjg1LDhdLFs4LDQxN10sWzM0NiwzNDBdLFszNDAsMjYxXSxbMjYxLDM0Nl0sWzQxMyw0NDFdLFs0NDEsMjg1XSxbMjg1LDQxM10sWzMyNyw0NjBdLFs0NjAsMzI4XSxbMzI4LDMyN10sWzM1NSwzNzFdLFszNzEsMzI5XSxbMzI5LDM1NV0sWzM5Miw0MzldLFs0MzksNDM4XSxbNDM4LDM5Ml0sWzM4MiwzNDFdLFszNDEsMjU2XSxbMjU2LDM4Ml0sWzQyOSw0MjBdLFs0MjAsMzYwXSxbMzYwLDQyOV0sWzM2NCwzOTRdLFszOTQsMzc5XSxbMzc5LDM2NF0sWzI3NywzNDNdLFszNDMsNDM3XSxbNDM3LDI3N10sWzQ0Myw0NDRdLFs0NDQsMjgzXSxbMjgzLDQ0M10sWzI3NSw0NDBdLFs0NDAsMzYzXSxbMzYzLDI3NV0sWzQzMSwyNjJdLFsyNjIsMzY5XSxbMzY5LDQzMV0sWzI5NywzMzhdLFszMzgsMzM3XSxbMzM3LDI5N10sWzI3MywzNzVdLFszNzUsMzIxXSxbMzIxLDI3M10sWzQ1MCw0NTFdLFs0NTEsMzQ5XSxbMzQ5LDQ1MF0sWzQ0NiwzNDJdLFszNDIsNDY3XSxbNDY3LDQ0Nl0sWzI5MywzMzRdLFszMzQsMjgyXSxbMjgyLDI5M10sWzQ1OCw0NjFdLFs0NjEsNDYyXSxbNDYyLDQ1OF0sWzI3NiwzNTNdLFszNTMsMzgzXSxbMzgzLDI3Nl0sWzMwOCwzMjRdLFszMjQsMzI1XSxbMzI1LDMwOF0sWzI3NiwzMDBdLFszMDAsMjkzXSxbMjkzLDI3Nl0sWzM3MiwzNDVdLFszNDUsNDQ3XSxbNDQ3LDM3Ml0sWzM1MiwzNDVdLFszNDUsMzQwXSxbMzQwLDM1Ml0sWzI3NCwxXSxbMSwxOV0sWzE5LDI3NF0sWzQ1NiwyNDhdLFsyNDgsMjgxXSxbMjgxLDQ1Nl0sWzQzNiw0MjddLFs0MjcsNDI1XSxbNDI1LDQzNl0sWzM4MSwyNTZdLFsyNTYsMjUyXSxbMjUyLDM4MV0sWzI2OSwzOTFdLFszOTEsMzkzXSxbMzkzLDI2OV0sWzIwMCwxOTldLFsxOTksNDI4XSxbNDI4LDIwMF0sWzI2NiwzMzBdLFszMzAsMzI5XSxbMzI5LDI2Nl0sWzI4NywyNzNdLFsyNzMsNDIyXSxbNDIyLDI4N10sWzI1MCw0NjJdLFs0NjIsMzI4XSxbMzI4LDI1MF0sWzI1OCwyODZdLFsyODYsMzg0XSxbMzg0LDI1OF0sWzI2NSwzNTNdLFszNTMsMzQyXSxbMzQyLDI2NV0sWzM4NywyNTldLFsyNTksMjU3XSxbMjU3LDM4N10sWzQyNCw0MzFdLFs0MzEsNDMwXSxbNDMwLDQyNF0sWzM0MiwzNTNdLFszNTMsMjc2XSxbMjc2LDM0Ml0sWzI3MywzMzVdLFszMzUsNDI0XSxbNDI0LDI3M10sWzI5MiwzMjVdLFszMjUsMzA3XSxbMzA3LDI5Ml0sWzM2Niw0NDddLFs0NDcsMzQ1XSxbMzQ1LDM2Nl0sWzI3MSwzMDNdLFszMDMsMzAyXSxbMzAyLDI3MV0sWzQyMywyNjZdLFsyNjYsMzcxXSxbMzcxLDQyM10sWzI5NCw0NTVdLFs0NTUsNDYwXSxbNDYwLDI5NF0sWzI3OSwyNzhdLFsyNzgsMjk0XSxbMjk0LDI3OV0sWzI3MSwyNzJdLFsyNzIsMzA0XSxbMzA0LDI3MV0sWzQzMiw0MzRdLFs0MzQsNDI3XSxbNDI3LDQzMl0sWzI3Miw0MDddLFs0MDcsNDA4XSxbNDA4LDI3Ml0sWzM5NCw0MzBdLFs0MzAsNDMxXSxbNDMxLDM5NF0sWzM5NSwzNjldLFszNjksNDAwXSxbNDAwLDM5NV0sWzMzNCwzMzNdLFszMzMsMjk5XSxbMjk5LDMzNF0sWzM1MSw0MTddLFs0MTcsMTY4XSxbMTY4LDM1MV0sWzM1MiwyODBdLFsyODAsNDExXSxbNDExLDM1Ml0sWzMyNSwzMTldLFszMTksMzIwXSxbMzIwLDMyNV0sWzI5NSwyOTZdLFsyOTYsMzM2XSxbMzM2LDI5NV0sWzMxOSw0MDNdLFs0MDMsNDA0XSxbNDA0LDMxOV0sWzMzMCwzNDhdLFszNDgsMzQ5XSxbMzQ5LDMzMF0sWzI5MywyOThdLFsyOTgsMzMzXSxbMzMzLDI5M10sWzMyMyw0NTRdLFs0NTQsNDQ3XSxbNDQ3LDMyM10sWzE1LDE2XSxbMTYsMzE1XSxbMzE1LDE1XSxbMzU4LDQyOV0sWzQyOSwyNzldLFsyNzksMzU4XSxbMTQsMTVdLFsxNSwzMTZdLFszMTYsMTRdLFsyODUsMzM2XSxbMzM2LDldLFs5LDI4NV0sWzMyOSwzNDldLFszNDksMzUwXSxbMzUwLDMyOV0sWzM3NCwzODBdLFszODAsMjUyXSxbMjUyLDM3NF0sWzMxOCw0MDJdLFs0MDIsNDAzXSxbNDAzLDMxOF0sWzYsMTk3XSxbMTk3LDQxOV0sWzQxOSw2XSxbMzE4LDMxOV0sWzMxOSwzMjVdLFszMjUsMzE4XSxbMzY3LDM2NF0sWzM2NCwzNjVdLFszNjUsMzY3XSxbNDM1LDM2N10sWzM2NywzOTddLFszOTcsNDM1XSxbMzQ0LDQzOF0sWzQzOCw0MzldLFs0MzksMzQ0XSxbMjcyLDI3MV0sWzI3MSwzMTFdLFszMTEsMjcyXSxbMTk1LDVdLFs1LDI4MV0sWzI4MSwxOTVdLFsyNzMsMjg3XSxbMjg3LDI5MV0sWzI5MSwyNzNdLFszOTYsNDI4XSxbNDI4LDE5OV0sWzE5OSwzOTZdLFszMTEsMjcxXSxbMjcxLDI2OF0sWzI2OCwzMTFdLFsyODMsNDQ0XSxbNDQ0LDQ0NV0sWzQ0NSwyODNdLFszNzMsMjU0XSxbMjU0LDMzOV0sWzMzOSwzNzNdLFsyODIsMzM0XSxbMzM0LDI5Nl0sWzI5NiwyODJdLFs0NDksMzQ3XSxbMzQ3LDM0Nl0sWzM0Niw0NDldLFsyNjQsNDQ3XSxbNDQ3LDQ1NF0sWzQ1NCwyNjRdLFszMzYsMjk2XSxbMjk2LDI5OV0sWzI5OSwzMzZdLFszMzgsMTBdLFsxMCwxNTFdLFsxNTEsMzM4XSxbMjc4LDQzOV0sWzQzOSw0NTVdLFs0NTUsMjc4XSxbMjkyLDQwN10sWzQwNyw0MTVdLFs0MTUsMjkyXSxbMzU4LDM3MV0sWzM3MSwzNTVdLFszNTUsMzU4XSxbMzQwLDM0NV0sWzM0NSwzNzJdLFszNzIsMzQwXSxbMzQ2LDM0N10sWzM0NywyODBdLFsyODAsMzQ2XSxbNDQyLDQ0M10sWzQ0MywyODJdLFsyODIsNDQyXSxbMTksOTRdLFs5NCwzNzBdLFszNzAsMTldLFs0NDEsNDQyXSxbNDQyLDI5NV0sWzI5NSw0NDFdLFsyNDgsNDE5XSxbNDE5LDE5N10sWzE5NywyNDhdLFsyNjMsMjU1XSxbMjU1LDM1OV0sWzM1OSwyNjNdLFs0NDAsMjc1XSxbMjc1LDI3NF0sWzI3NCw0NDBdLFszMDAsMzgzXSxbMzgzLDM2OF0sWzM2OCwzMDBdLFszNTEsNDEyXSxbNDEyLDQ2NV0sWzQ2NSwzNTFdLFsyNjMsNDY3XSxbNDY3LDQ2Nl0sWzQ2NiwyNjNdLFszMDEsMzY4XSxbMzY4LDM4OV0sWzM4OSwzMDFdLFszOTUsMzc4XSxbMzc4LDM3OV0sWzM3OSwzOTVdLFs0MTIsMzUxXSxbMzUxLDQxOV0sWzQxOSw0MTJdLFs0MzYsNDI2XSxbNDI2LDMyMl0sWzMyMiw0MzZdLFsyLDE2NF0sWzE2NCwzOTNdLFszOTMsMl0sWzM3MCw0NjJdLFs0NjIsNDYxXSxbNDYxLDM3MF0sWzE2NCwwXSxbMCwyNjddLFsyNjcsMTY0XSxbMzAyLDExXSxbMTEsMTJdLFsxMiwzMDJdLFsyNjgsMTJdLFsxMiwxM10sWzEzLDI2OF0sWzI5MywzMDBdLFszMDAsMzAxXSxbMzAxLDI5M10sWzQ0NiwyNjFdLFsyNjEsMzQwXSxbMzQwLDQ0Nl0sWzMzMCwyNjZdLFsyNjYsNDI1XSxbNDI1LDMzMF0sWzQyNiw0MjNdLFs0MjMsMzkxXSxbMzkxLDQyNl0sWzQyOSwzNTVdLFszNTUsNDM3XSxbNDM3LDQyOV0sWzM5MSwzMjddLFszMjcsMzI2XSxbMzI2LDM5MV0sWzQ0MCw0NTddLFs0NTcsNDM4XSxbNDM4LDQ0MF0sWzM0MSwzODJdLFszODIsMzYyXSxbMzYyLDM0MV0sWzQ1OSw0NTddLFs0NTcsNDYxXSxbNDYxLDQ1OV0sWzQzNCw0MzBdLFs0MzAsMzk0XSxbMzk0LDQzNF0sWzQxNCw0NjNdLFs0NjMsMzYyXSxbMzYyLDQxNF0sWzM5NiwzNjldLFszNjksMjYyXSxbMjYyLDM5Nl0sWzM1NCw0NjFdLFs0NjEsNDU3XSxbNDU3LDM1NF0sWzMxNiw0MDNdLFs0MDMsNDAyXSxbNDAyLDMxNl0sWzMxNSw0MDRdLFs0MDQsNDAzXSxbNDAzLDMxNV0sWzMxNCw0MDVdLFs0MDUsNDA0XSxbNDA0LDMxNF0sWzMxMyw0MDZdLFs0MDYsNDA1XSxbNDA1LDMxM10sWzQyMSw0MThdLFs0MTgsNDA2XSxbNDA2LDQyMV0sWzM2Niw0MDFdLFs0MDEsMzYxXSxbMzYxLDM2Nl0sWzMwNiw0MDhdLFs0MDgsNDA3XSxbNDA3LDMwNl0sWzI5MSw0MDldLFs0MDksNDA4XSxbNDA4LDI5MV0sWzI4Nyw0MTBdLFs0MTAsNDA5XSxbNDA5LDI4N10sWzQzMiw0MzZdLFs0MzYsNDEwXSxbNDEwLDQzMl0sWzQzNCw0MTZdLFs0MTYsNDExXSxbNDExLDQzNF0sWzI2NCwzNjhdLFszNjgsMzgzXSxbMzgzLDI2NF0sWzMwOSw0MzhdLFs0MzgsNDU3XSxbNDU3LDMwOV0sWzM1MiwzNzZdLFszNzYsNDAxXSxbNDAxLDM1Ml0sWzI3NCwyNzVdLFsyNzUsNF0sWzQsMjc0XSxbNDIxLDQyOF0sWzQyOCwyNjJdLFsyNjIsNDIxXSxbMjk0LDMyN10sWzMyNywzNThdLFszNTgsMjk0XSxbNDMzLDQxNl0sWzQxNiwzNjddLFszNjcsNDMzXSxbMjg5LDQ1NV0sWzQ1NSw0MzldLFs0MzksMjg5XSxbNDYyLDM3MF0sWzM3MCwzMjZdLFszMjYsNDYyXSxbMiwzMjZdLFszMjYsMzcwXSxbMzcwLDJdLFszMDUsNDYwXSxbNDYwLDQ1NV0sWzQ1NSwzMDVdLFsyNTQsNDQ5XSxbNDQ5LDQ0OF0sWzQ0OCwyNTRdLFsyNTUsMjYxXSxbMjYxLDQ0Nl0sWzQ0NiwyNTVdLFsyNTMsNDUwXSxbNDUwLDQ0OV0sWzQ0OSwyNTNdLFsyNTIsNDUxXSxbNDUxLDQ1MF0sWzQ1MCwyNTJdLFsyNTYsNDUyXSxbNDUyLDQ1MV0sWzQ1MSwyNTZdLFszNDEsNDUzXSxbNDUzLDQ1Ml0sWzQ1MiwzNDFdLFs0MTMsNDY0XSxbNDY0LDQ2M10sWzQ2Myw0MTNdLFs0NDEsNDEzXSxbNDEzLDQxNF0sWzQxNCw0NDFdLFsyNTgsNDQyXSxbNDQyLDQ0MV0sWzQ0MSwyNThdLFsyNTcsNDQzXSxbNDQzLDQ0Ml0sWzQ0MiwyNTddLFsyNTksNDQ0XSxbNDQ0LDQ0M10sWzQ0MywyNTldLFsyNjAsNDQ1XSxbNDQ1LDQ0NF0sWzQ0NCwyNjBdLFs0NjcsMzQyXSxbMzQyLDQ0NV0sWzQ0NSw0NjddLFs0NTksNDU4XSxbNDU4LDI1MF0sWzI1MCw0NTldLFsyODksMzkyXSxbMzkyLDI5MF0sWzI5MCwyODldLFsyOTAsMzI4XSxbMzI4LDQ2MF0sWzQ2MCwyOTBdLFszNzYsNDMzXSxbNDMzLDQzNV0sWzQzNSwzNzZdLFsyNTAsMjkwXSxbMjkwLDM5Ml0sWzM5MiwyNTBdLFs0MTEsNDE2XSxbNDE2LDQzM10sWzQzMyw0MTFdLFszNDEsNDYzXSxbNDYzLDQ2NF0sWzQ2NCwzNDFdLFs0NTMsNDY0XSxbNDY0LDQ2NV0sWzQ2NSw0NTNdLFszNTcsNDY1XSxbNDY1LDQxMl0sWzQxMiwzNTddLFszNDMsNDEyXSxbNDEyLDM5OV0sWzM5OSwzNDNdLFszNjAsMzYzXSxbMzYzLDQ0MF0sWzQ0MCwzNjBdLFs0MzcsMzk5XSxbMzk5LDQ1Nl0sWzQ1Niw0MzddLFs0MjAsNDU2XSxbNDU2LDM2M10sWzM2Myw0MjBdLFs0MDEsNDM1XSxbNDM1LDI4OF0sWzI4OCw0MDFdLFszNzIsMzgzXSxbMzgzLDM1M10sWzM1MywzNzJdLFszMzksMjU1XSxbMjU1LDI0OV0sWzI0OSwzMzldLFs0NDgsMjYxXSxbMjYxLDI1NV0sWzI1NSw0NDhdLFsxMzMsMjQzXSxbMjQzLDE5MF0sWzE5MCwxMzNdLFsxMzMsMTU1XSxbMTU1LDExMl0sWzExMiwxMzNdLFszMywyNDZdLFsyNDYsMjQ3XSxbMjQ3LDMzXSxbMzMsMTMwXSxbMTMwLDI1XSxbMjUsMzNdLFszOTgsMzg0XSxbMzg0LDI4Nl0sWzI4NiwzOThdLFszNjIsMzk4XSxbMzk4LDQxNF0sWzQxNCwzNjJdLFszNjIsNDYzXSxbNDYzLDM0MV0sWzM0MSwzNjJdLFsyNjMsMzU5XSxbMzU5LDQ2N10sWzQ2NywyNjNdLFsyNjMsMjQ5XSxbMjQ5LDI1NV0sWzI1NSwyNjNdLFs0NjYsNDY3XSxbNDY3LDI2MF0sWzI2MCw0NjZdLFs3NSw2MF0sWzYwLDE2Nl0sWzE2Niw3NV0sWzIzOCwyMzldLFsyMzksNzldLFs3OSwyMzhdLFsxNjIsMTI3XSxbMTI3LDEzOV0sWzEzOSwxNjJdLFs3MiwxMV0sWzExLDM3XSxbMzcsNzJdLFsxMjEsMjMyXSxbMjMyLDEyMF0sWzEyMCwxMjFdLFs3Myw3Ml0sWzcyLDM5XSxbMzksNzNdLFsxMTQsMTI4XSxbMTI4LDQ3XSxbNDcsMTE0XSxbMjMzLDIzMl0sWzIzMiwxMjhdLFsxMjgsMjMzXSxbMTAzLDEwNF0sWzEwNCw2N10sWzY3LDEwM10sWzE1MiwxNzVdLFsxNzUsMTQ4XSxbMTQ4LDE1Ml0sWzExOSwxMThdLFsxMTgsMTAxXSxbMTAxLDExOV0sWzc0LDczXSxbNzMsNDBdLFs0MCw3NF0sWzEwNyw5XSxbOSwxMDhdLFsxMDgsMTA3XSxbNDksNDhdLFs0OCwxMzFdLFsxMzEsNDldLFszMiwxOTRdLFsxOTQsMjExXSxbMjExLDMyXSxbMTg0LDc0XSxbNzQsMTg1XSxbMTg1LDE4NF0sWzE5MSw4MF0sWzgwLDE4M10sWzE4MywxOTFdLFsxODUsNDBdLFs0MCwxODZdLFsxODYsMTg1XSxbMTE5LDIzMF0sWzIzMCwxMThdLFsxMTgsMTE5XSxbMjEwLDIwMl0sWzIwMiwyMTRdLFsyMTQsMjEwXSxbODQsODNdLFs4MywxN10sWzE3LDg0XSxbNzcsNzZdLFs3NiwxNDZdLFsxNDYsNzddLFsxNjEsMTYwXSxbMTYwLDMwXSxbMzAsMTYxXSxbMTkwLDU2XSxbNTYsMTczXSxbMTczLDE5MF0sWzE4MiwxMDZdLFsxMDYsMTk0XSxbMTk0LDE4Ml0sWzEzOCwxMzVdLFsxMzUsMTkyXSxbMTkyLDEzOF0sWzEyOSwyMDNdLFsyMDMsOThdLFs5OCwxMjldLFs1NCwyMV0sWzIxLDY4XSxbNjgsNTRdLFs1LDUxXSxbNTEsNF0sWzQsNV0sWzE0NSwxNDRdLFsxNDQsMjNdLFsyMywxNDVdLFs5MCw3N10sWzc3LDkxXSxbOTEsOTBdLFsyMDcsMjA1XSxbMjA1LDE4N10sWzE4NywyMDddLFs4MywyMDFdLFsyMDEsMThdLFsxOCw4M10sWzE4MSw5MV0sWzkxLDE4Ml0sWzE4MiwxODFdLFsxODAsOTBdLFs5MCwxODFdLFsxODEsMTgwXSxbMTYsODVdLFs4NSwxN10sWzE3LDE2XSxbMjA1LDIwNl0sWzIwNiwzNl0sWzM2LDIwNV0sWzE3NiwxNDhdLFsxNDgsMTQwXSxbMTQwLDE3Nl0sWzE2NSw5Ml0sWzkyLDM5XSxbMzksMTY1XSxbMjQ1LDE5M10sWzE5MywyNDRdLFsyNDQsMjQ1XSxbMjcsMTU5XSxbMTU5LDI4XSxbMjgsMjddLFszMCwyNDddLFsyNDcsMTYxXSxbMTYxLDMwXSxbMTc0LDIzNl0sWzIzNiwxOTZdLFsxOTYsMTc0XSxbMTAzLDU0XSxbNTQsMTA0XSxbMTA0LDEwM10sWzU1LDE5M10sWzE5Myw4XSxbOCw1NV0sWzExMSwxMTddLFsxMTcsMzFdLFszMSwxMTFdLFsyMjEsMTg5XSxbMTg5LDU1XSxbNTUsMjIxXSxbMjQwLDk4XSxbOTgsOTldLFs5OSwyNDBdLFsxNDIsMTI2XSxbMTI2LDEwMF0sWzEwMCwxNDJdLFsyMTksMTY2XSxbMTY2LDIxOF0sWzIxOCwyMTldLFsxMTIsMTU1XSxbMTU1LDI2XSxbMjYsMTEyXSxbMTk4LDIwOV0sWzIwOSwxMzFdLFsxMzEsMTk4XSxbMTY5LDEzNV0sWzEzNSwxNTBdLFsxNTAsMTY5XSxbMTE0LDQ3XSxbNDcsMjE3XSxbMjE3LDExNF0sWzIyNCwyMjNdLFsyMjMsNTNdLFs1MywyMjRdLFsyMjAsNDVdLFs0NSwxMzRdLFsxMzQsMjIwXSxbMzIsMjExXSxbMjExLDE0MF0sWzE0MCwzMl0sWzEwOSw2N10sWzY3LDEwOF0sWzEwOCwxMDldLFsxNDYsNDNdLFs0Myw5MV0sWzkxLDE0Nl0sWzIzMSwyMzBdLFsyMzAsMTIwXSxbMTIwLDIzMV0sWzExMywyMjZdLFsyMjYsMjQ3XSxbMjQ3LDExM10sWzEwNSw2M10sWzYzLDUyXSxbNTIsMTA1XSxbMjQxLDIzOF0sWzIzOCwyNDJdLFsyNDIsMjQxXSxbMTI0LDQ2XSxbNDYsMTU2XSxbMTU2LDEyNF0sWzk1LDc4XSxbNzgsOTZdLFs5Niw5NV0sWzcwLDQ2XSxbNDYsNjNdLFs2Myw3MF0sWzExNiwxNDNdLFsxNDMsMjI3XSxbMjI3LDExNl0sWzExNiwxMjNdLFsxMjMsMTExXSxbMTExLDExNl0sWzEsNDRdLFs0NCwxOV0sWzE5LDFdLFszLDIzNl0sWzIzNiw1MV0sWzUxLDNdLFsyMDcsMjE2XSxbMjE2LDIwNV0sWzIwNSwyMDddLFsyNiwxNTRdLFsxNTQsMjJdLFsyMiwyNl0sWzE2NSwzOV0sWzM5LDE2N10sWzE2NywxNjVdLFsxOTksMjAwXSxbMjAwLDIwOF0sWzIwOCwxOTldLFsxMDEsMzZdLFszNiwxMDBdLFsxMDAsMTAxXSxbNDMsNTddLFs1NywyMDJdLFsyMDIsNDNdLFsyNDIsMjBdLFsyMCw5OV0sWzk5LDI0Ml0sWzU2LDI4XSxbMjgsMTU3XSxbMTU3LDU2XSxbMTI0LDM1XSxbMzUsMTEzXSxbMTEzLDEyNF0sWzI5LDE2MF0sWzE2MCwyN10sWzI3LDI5XSxbMjExLDIwNF0sWzIwNCwyMTBdLFsyMTAsMjExXSxbMTI0LDExM10sWzExMyw0Nl0sWzQ2LDEyNF0sWzEwNiw0M10sWzQzLDIwNF0sWzIwNCwxMDZdLFs5Niw2Ml0sWzYyLDc3XSxbNzcsOTZdLFsyMjcsMTM3XSxbMTM3LDExNl0sWzExNiwyMjddLFs3Myw0MV0sWzQxLDcyXSxbNzIsNzNdLFszNiwyMDNdLFsyMDMsMTQyXSxbMTQyLDM2XSxbMjM1LDY0XSxbNjQsMjQwXSxbMjQwLDIzNV0sWzQ4LDQ5XSxbNDksNjRdLFs2NCw0OF0sWzQyLDQxXSxbNDEsNzRdLFs3NCw0Ml0sWzIxNCwyMTJdLFsyMTIsMjA3XSxbMjA3LDIxNF0sWzE4Myw0Ml0sWzQyLDE4NF0sWzE4NCwxODNdLFsyMTAsMTY5XSxbMTY5LDIxMV0sWzIxMSwyMTBdLFsxNDAsMTcwXSxbMTcwLDE3Nl0sWzE3NiwxNDBdLFsxMDQsMTA1XSxbMTA1LDY5XSxbNjksMTA0XSxbMTkzLDEyMl0sWzEyMiwxNjhdLFsxNjgsMTkzXSxbNTAsMTIzXSxbMTIzLDE4N10sWzE4Nyw1MF0sWzg5LDk2XSxbOTYsOTBdLFs5MCw4OV0sWzY2LDY1XSxbNjUsMTA3XSxbMTA3LDY2XSxbMTc5LDg5XSxbODksMTgwXSxbMTgwLDE3OV0sWzExOSwxMDFdLFsxMDEsMTIwXSxbMTIwLDExOV0sWzY4LDYzXSxbNjMsMTA0XSxbMTA0LDY4XSxbMjM0LDkzXSxbOTMsMjI3XSxbMjI3LDIzNF0sWzE2LDE1XSxbMTUsODVdLFs4NSwxNl0sWzIwOSwxMjldLFsxMjksNDldLFs0OSwyMDldLFsxNSwxNF0sWzE0LDg2XSxbODYsMTVdLFsxMDcsNTVdLFs1NSw5XSxbOSwxMDddLFsxMjAsMTAwXSxbMTAwLDEyMV0sWzEyMSwxMjBdLFsxNTMsMTQ1XSxbMTQ1LDIyXSxbMjIsMTUzXSxbMTc4LDg4XSxbODgsMTc5XSxbMTc5LDE3OF0sWzE5Nyw2XSxbNiwxOTZdLFsxOTYsMTk3XSxbODksODhdLFs4OCw5Nl0sWzk2LDg5XSxbMTM1LDEzOF0sWzEzOCwxMzZdLFsxMzYsMTM1XSxbMTM4LDIxNV0sWzIxNSwxNzJdLFsxNzIsMTM4XSxbMjE4LDExNV0sWzExNSwyMTldLFsyMTksMjE4XSxbNDEsNDJdLFs0Miw4MV0sWzgxLDQxXSxbNSwxOTVdLFsxOTUsNTFdLFs1MSw1XSxbNTcsNDNdLFs0Myw2MV0sWzYxLDU3XSxbMjA4LDE3MV0sWzE3MSwxOTldLFsxOTksMjA4XSxbNDEsODFdLFs4MSwzOF0sWzM4LDQxXSxbMjI0LDUzXSxbNTMsMjI1XSxbMjI1LDIyNF0sWzI0LDE0NF0sWzE0NCwxMTBdLFsxMTAsMjRdLFsxMDUsNTJdLFs1Miw2Nl0sWzY2LDEwNV0sWzExOCwyMjldLFsyMjksMTE3XSxbMTE3LDExOF0sWzIyNywzNF0sWzM0LDIzNF0sWzIzNCwyMjddLFs2NiwxMDddLFsxMDcsNjldLFs2OSw2Nl0sWzEwLDEwOV0sWzEwOSwxNTFdLFsxNTEsMTBdLFsyMTksNDhdLFs0OCwyMzVdLFsyMzUsMjE5XSxbMTgzLDYyXSxbNjIsMTkxXSxbMTkxLDE4M10sWzE0MiwxMjldLFsxMjksMTI2XSxbMTI2LDE0Ml0sWzExNiwxMTFdLFsxMTEsMTQzXSxbMTQzLDExNl0sWzExOCwxMTddLFsxMTcsNTBdLFs1MCwxMThdLFsyMjMsMjIyXSxbMjIyLDUyXSxbNTIsMjIzXSxbOTQsMTldLFsxOSwxNDFdLFsxNDEsOTRdLFsyMjIsMjIxXSxbMjIxLDY1XSxbNjUsMjIyXSxbMTk2LDNdLFszLDE5N10sWzE5NywxOTZdLFs0NSwyMjBdLFsyMjAsNDRdLFs0NCw0NV0sWzE1Niw3MF0sWzcwLDEzOV0sWzEzOSwxNTZdLFsxODgsMTIyXSxbMTIyLDI0NV0sWzI0NSwxODhdLFsxMzksNzFdLFs3MSwxNjJdLFsxNjIsMTM5XSxbMTQ5LDE3MF0sWzE3MCwxNTBdLFsxNTAsMTQ5XSxbMTIyLDE4OF0sWzE4OCwxOTZdLFsxOTYsMTIyXSxbMjA2LDIxNl0sWzIxNiw5Ml0sWzkyLDIwNl0sWzE2NCwyXSxbMiwxNjddLFsxNjcsMTY0XSxbMjQyLDE0MV0sWzE0MSwyNDFdLFsyNDEsMjQyXSxbMCwxNjRdLFsxNjQsMzddLFszNywwXSxbMTEsNzJdLFs3MiwxMl0sWzEyLDExXSxbMTIsMzhdLFszOCwxM10sWzEzLDEyXSxbNzAsNjNdLFs2Myw3MV0sWzcxLDcwXSxbMzEsMjI2XSxbMjI2LDExMV0sWzExMSwzMV0sWzM2LDEwMV0sWzEwMSwyMDVdLFsyMDUsMzZdLFsyMDMsMjA2XSxbMjA2LDE2NV0sWzE2NSwyMDNdLFsxMjYsMjA5XSxbMjA5LDIxN10sWzIxNywxMjZdLFs5OCwxNjVdLFsxNjUsOTddLFs5Nyw5OF0sWzIzNywyMjBdLFsyMjAsMjE4XSxbMjE4LDIzN10sWzIzNywyMzldLFsyMzksMjQxXSxbMjQxLDIzN10sWzIxMCwyMTRdLFsyMTQsMTY5XSxbMTY5LDIxMF0sWzE0MCwxNzFdLFsxNzEsMzJdLFszMiwxNDBdLFsyNDEsMTI1XSxbMTI1LDIzN10sWzIzNywyNDFdLFsxNzksODZdLFs4NiwxNzhdLFsxNzgsMTc5XSxbMTgwLDg1XSxbODUsMTc5XSxbMTc5LDE4MF0sWzE4MSw4NF0sWzg0LDE4MF0sWzE4MCwxODFdLFsxODIsODNdLFs4MywxODFdLFsxODEsMTgyXSxbMTk0LDIwMV0sWzIwMSwxODJdLFsxODIsMTk0XSxbMTc3LDEzN10sWzEzNywxMzJdLFsxMzIsMTc3XSxbMTg0LDc2XSxbNzYsMTgzXSxbMTgzLDE4NF0sWzE4NSw2MV0sWzYxLDE4NF0sWzE4NCwxODVdLFsxODYsNTddLFs1NywxODVdLFsxODUsMTg2XSxbMjE2LDIxMl0sWzIxMiwxODZdLFsxODYsMjE2XSxbMTkyLDIxNF0sWzIxNCwxODddLFsxODcsMTkyXSxbMTM5LDM0XSxbMzQsMTU2XSxbMTU2LDEzOV0sWzIxOCw3OV0sWzc5LDIzN10sWzIzNywyMThdLFsxNDcsMTIzXSxbMTIzLDE3N10sWzE3NywxNDddLFs0NSw0NF0sWzQ0LDRdLFs0LDQ1XSxbMjA4LDIwMV0sWzIwMSwzMl0sWzMyLDIwOF0sWzk4LDY0XSxbNjQsMTI5XSxbMTI5LDk4XSxbMTkyLDIxM10sWzIxMywxMzhdLFsxMzgsMTkyXSxbMjM1LDU5XSxbNTksMjE5XSxbMjE5LDIzNV0sWzE0MSwyNDJdLFsyNDIsOTddLFs5NywxNDFdLFs5NywyXSxbMiwxNDFdLFsxNDEsOTddLFsyNDAsNzVdLFs3NSwyMzVdLFsyMzUsMjQwXSxbMjI5LDI0XSxbMjQsMjI4XSxbMjI4LDIyOV0sWzMxLDI1XSxbMjUsMjI2XSxbMjI2LDMxXSxbMjMwLDIzXSxbMjMsMjI5XSxbMjI5LDIzMF0sWzIzMSwyMl0sWzIyLDIzMF0sWzIzMCwyMzFdLFsyMzIsMjZdLFsyNiwyMzFdLFsyMzEsMjMyXSxbMjMzLDExMl0sWzExMiwyMzJdLFsyMzIsMjMzXSxbMjQ0LDE4OV0sWzE4OSwyNDNdLFsyNDMsMjQ0XSxbMTg5LDIyMV0sWzIyMSwxOTBdLFsxOTAsMTg5XSxbMjIyLDI4XSxbMjgsMjIxXSxbMjIxLDIyMl0sWzIyMywyN10sWzI3LDIyMl0sWzIyMiwyMjNdLFsyMjQsMjldLFsyOSwyMjNdLFsyMjMsMjI0XSxbMjI1LDMwXSxbMzAsMjI0XSxbMjI0LDIyNV0sWzExMywyNDddLFsyNDcsMjI1XSxbMjI1LDExM10sWzk5LDYwXSxbNjAsMjQwXSxbMjQwLDk5XSxbMjEzLDE0N10sWzE0NywyMTVdLFsyMTUsMjEzXSxbNjAsMjBdLFsyMCwxNjZdLFsxNjYsNjBdLFsxOTIsMTg3XSxbMTg3LDIxM10sWzIxMywxOTJdLFsyNDMsMTEyXSxbMTEyLDI0NF0sWzI0NCwyNDNdLFsyNDQsMjMzXSxbMjMzLDI0NV0sWzI0NSwyNDRdLFsyNDUsMTI4XSxbMTI4LDE4OF0sWzE4OCwyNDVdLFsxODgsMTE0XSxbMTE0LDE3NF0sWzE3NCwxODhdLFsxMzQsMTMxXSxbMTMxLDIyMF0sWzIyMCwxMzRdLFsxNzQsMjE3XSxbMjE3LDIzNl0sWzIzNiwxNzRdLFsyMzYsMTk4XSxbMTk4LDEzNF0sWzEzNCwyMzZdLFsyMTUsMTc3XSxbMTc3LDU4XSxbNTgsMjE1XSxbMTU2LDE0M10sWzE0MywxMjRdLFsxMjQsMTU2XSxbMjUsMTEwXSxbMTEwLDddLFs3LDI1XSxbMzEsMjI4XSxbMjI4LDI1XSxbMjUsMzFdLFsyNjQsMzU2XSxbMzU2LDM2OF0sWzM2OCwyNjRdLFswLDExXSxbMTEsMjY3XSxbMjY3LDBdLFs0NTEsNDUyXSxbNDUyLDM0OV0sWzM0OSw0NTFdLFsyNjcsMzAyXSxbMzAyLDI2OV0sWzI2OSwyNjddLFszNTAsMzU3XSxbMzU3LDI3N10sWzI3NywzNTBdLFszNTAsNDUyXSxbNDUyLDM1N10sWzM1NywzNTBdLFsyOTksMzMzXSxbMzMzLDI5N10sWzI5NywyOTldLFszOTYsMTc1XSxbMTc1LDM3N10sWzM3NywzOTZdLFsyODAsMzQ3XSxbMzQ3LDMzMF0sWzMzMCwyODBdLFsyNjksMzAzXSxbMzAzLDI3MF0sWzI3MCwyNjldLFsxNTEsOV0sWzksMzM3XSxbMzM3LDE1MV0sWzM0NCwyNzhdLFsyNzgsMzYwXSxbMzYwLDM0NF0sWzQyNCw0MThdLFs0MTgsNDMxXSxbNDMxLDQyNF0sWzI3MCwzMDRdLFszMDQsNDA5XSxbNDA5LDI3MF0sWzI3MiwzMTBdLFszMTAsNDA3XSxbNDA3LDI3Ml0sWzMyMiwyNzBdLFsyNzAsNDEwXSxbNDEwLDMyMl0sWzQ0OSw0NTBdLFs0NTAsMzQ3XSxbMzQ3LDQ0OV0sWzQzMiw0MjJdLFs0MjIsNDM0XSxbNDM0LDQzMl0sWzE4LDMxM10sWzMxMywxN10sWzE3LDE4XSxbMjkxLDMwNl0sWzMwNiwzNzVdLFszNzUsMjkxXSxbMjU5LDM4N10sWzM4NywyNjBdLFsyNjAsMjU5XSxbNDI0LDMzNV0sWzMzNSw0MThdLFs0MTgsNDI0XSxbNDM0LDM2NF0sWzM2NCw0MTZdLFs0MTYsNDM0XSxbMzkxLDQyM10sWzQyMywzMjddLFszMjcsMzkxXSxbMzAxLDI1MV0sWzI1MSwyOThdLFsyOTgsMzAxXSxbMjc1LDI4MV0sWzI4MSw0XSxbNCwyNzVdLFsyNTQsMzczXSxbMzczLDI1M10sWzI1MywyNTRdLFszNzUsMzA3XSxbMzA3LDMyMV0sWzMyMSwzNzVdLFsyODAsNDI1XSxbNDI1LDQxMV0sWzQxMSwyODBdLFsyMDAsNDIxXSxbNDIxLDE4XSxbMTgsMjAwXSxbMzM1LDMyMV0sWzMyMSw0MDZdLFs0MDYsMzM1XSxbMzIxLDMyMF0sWzMyMCw0MDVdLFs0MDUsMzIxXSxbMzE0LDMxNV0sWzMxNSwxN10sWzE3LDMxNF0sWzQyMyw0MjZdLFs0MjYsMjY2XSxbMjY2LDQyM10sWzM5NiwzNzddLFszNzcsMzY5XSxbMzY5LDM5Nl0sWzI3MCwzMjJdLFszMjIsMjY5XSxbMjY5LDI3MF0sWzQxMyw0MTddLFs0MTcsNDY0XSxbNDY0LDQxM10sWzM4NSwzODZdLFszODYsMjU4XSxbMjU4LDM4NV0sWzI0OCw0NTZdLFs0NTYsNDE5XSxbNDE5LDI0OF0sWzI5OCwyODRdLFsyODQsMzMzXSxbMzMzLDI5OF0sWzE2OCw0MTddLFs0MTcsOF0sWzgsMTY4XSxbNDQ4LDM0Nl0sWzM0NiwyNjFdLFsyNjEsNDQ4XSxbNDE3LDQxM10sWzQxMywyODVdLFsyODUsNDE3XSxbMzI2LDMyN10sWzMyNywzMjhdLFszMjgsMzI2XSxbMjc3LDM1NV0sWzM1NSwzMjldLFszMjksMjc3XSxbMzA5LDM5Ml0sWzM5Miw0MzhdLFs0MzgsMzA5XSxbMzgxLDM4Ml0sWzM4MiwyNTZdLFsyNTYsMzgxXSxbMjc5LDQyOV0sWzQyOSwzNjBdLFszNjAsMjc5XSxbMzY1LDM2NF0sWzM2NCwzNzldLFszNzksMzY1XSxbMzU1LDI3N10sWzI3Nyw0MzddLFs0MzcsMzU1XSxbMjgyLDQ0M10sWzQ0MywyODNdLFsyODMsMjgyXSxbMjgxLDI3NV0sWzI3NSwzNjNdLFszNjMsMjgxXSxbMzk1LDQzMV0sWzQzMSwzNjldLFszNjksMzk1XSxbMjk5LDI5N10sWzI5NywzMzddLFszMzcsMjk5XSxbMzM1LDI3M10sWzI3MywzMjFdLFszMjEsMzM1XSxbMzQ4LDQ1MF0sWzQ1MCwzNDldLFszNDksMzQ4XSxbMzU5LDQ0Nl0sWzQ0Niw0NjddLFs0NjcsMzU5XSxbMjgzLDI5M10sWzI5MywyODJdLFsyODIsMjgzXSxbMjUwLDQ1OF0sWzQ1OCw0NjJdLFs0NjIsMjUwXSxbMzAwLDI3Nl0sWzI3NiwzODNdLFszODMsMzAwXSxbMjkyLDMwOF0sWzMwOCwzMjVdLFszMjUsMjkyXSxbMjgzLDI3Nl0sWzI3NiwyOTNdLFsyOTMsMjgzXSxbMjY0LDM3Ml0sWzM3Miw0NDddLFs0NDcsMjY0XSxbMzQ2LDM1Ml0sWzM1MiwzNDBdLFszNDAsMzQ2XSxbMzU0LDI3NF0sWzI3NCwxOV0sWzE5LDM1NF0sWzM2Myw0NTZdLFs0NTYsMjgxXSxbMjgxLDM2M10sWzQyNiw0MzZdLFs0MzYsNDI1XSxbNDI1LDQyNl0sWzM4MCwzODFdLFszODEsMjUyXSxbMjUyLDM4MF0sWzI2NywyNjldLFsyNjksMzkzXSxbMzkzLDI2N10sWzQyMSwyMDBdLFsyMDAsNDI4XSxbNDI4LDQyMV0sWzM3MSwyNjZdLFsyNjYsMzI5XSxbMzI5LDM3MV0sWzQzMiwyODddLFsyODcsNDIyXSxbNDIyLDQzMl0sWzI5MCwyNTBdLFsyNTAsMzI4XSxbMzI4LDI5MF0sWzM4NSwyNThdLFsyNTgsMzg0XSxbMzg0LDM4NV0sWzQ0NiwyNjVdLFsyNjUsMzQyXSxbMzQyLDQ0Nl0sWzM4NiwzODddLFszODcsMjU3XSxbMjU3LDM4Nl0sWzQyMiw0MjRdLFs0MjQsNDMwXSxbNDMwLDQyMl0sWzQ0NSwzNDJdLFszNDIsMjc2XSxbMjc2LDQ0NV0sWzQyMiwyNzNdLFsyNzMsNDI0XSxbNDI0LDQyMl0sWzMwNiwyOTJdLFsyOTIsMzA3XSxbMzA3LDMwNl0sWzM1MiwzNjZdLFszNjYsMzQ1XSxbMzQ1LDM1Ml0sWzI2OCwyNzFdLFsyNzEsMzAyXSxbMzAyLDI2OF0sWzM1OCw0MjNdLFs0MjMsMzcxXSxbMzcxLDM1OF0sWzMyNywyOTRdLFsyOTQsNDYwXSxbNDYwLDMyN10sWzMzMSwyNzldLFsyNzksMjk0XSxbMjk0LDMzMV0sWzMwMywyNzFdLFsyNzEsMzA0XSxbMzA0LDMwM10sWzQzNiw0MzJdLFs0MzIsNDI3XSxbNDI3LDQzNl0sWzMwNCwyNzJdLFsyNzIsNDA4XSxbNDA4LDMwNF0sWzM5NSwzOTRdLFszOTQsNDMxXSxbNDMxLDM5NV0sWzM3OCwzOTVdLFszOTUsNDAwXSxbNDAwLDM3OF0sWzI5NiwzMzRdLFszMzQsMjk5XSxbMjk5LDI5Nl0sWzYsMzUxXSxbMzUxLDE2OF0sWzE2OCw2XSxbMzc2LDM1Ml0sWzM1Miw0MTFdLFs0MTEsMzc2XSxbMzA3LDMyNV0sWzMyNSwzMjBdLFszMjAsMzA3XSxbMjg1LDI5NV0sWzI5NSwzMzZdLFszMzYsMjg1XSxbMzIwLDMxOV0sWzMxOSw0MDRdLFs0MDQsMzIwXSxbMzI5LDMzMF0sWzMzMCwzNDldLFszNDksMzI5XSxbMzM0LDI5M10sWzI5MywzMzNdLFszMzMsMzM0XSxbMzY2LDMyM10sWzMyMyw0NDddLFs0NDcsMzY2XSxbMzE2LDE1XSxbMTUsMzE1XSxbMzE1LDMxNl0sWzMzMSwzNThdLFszNTgsMjc5XSxbMjc5LDMzMV0sWzMxNywxNF0sWzE0LDMxNl0sWzMxNiwzMTddLFs4LDI4NV0sWzI4NSw5XSxbOSw4XSxbMjc3LDMyOV0sWzMyOSwzNTBdLFszNTAsMjc3XSxbMjUzLDM3NF0sWzM3NCwyNTJdLFsyNTIsMjUzXSxbMzE5LDMxOF0sWzMxOCw0MDNdLFs0MDMsMzE5XSxbMzUxLDZdLFs2LDQxOV0sWzQxOSwzNTFdLFszMjQsMzE4XSxbMzE4LDMyNV0sWzMyNSwzMjRdLFszOTcsMzY3XSxbMzY3LDM2NV0sWzM2NSwzOTddLFsyODgsNDM1XSxbNDM1LDM5N10sWzM5NywyODhdLFsyNzgsMzQ0XSxbMzQ0LDQzOV0sWzQzOSwyNzhdLFszMTAsMjcyXSxbMjcyLDMxMV0sWzMxMSwzMTBdLFsyNDgsMTk1XSxbMTk1LDI4MV0sWzI4MSwyNDhdLFszNzUsMjczXSxbMjczLDI5MV0sWzI5MSwzNzVdLFsxNzUsMzk2XSxbMzk2LDE5OV0sWzE5OSwxNzVdLFszMTIsMzExXSxbMzExLDI2OF0sWzI2OCwzMTJdLFsyNzYsMjgzXSxbMjgzLDQ0NV0sWzQ0NSwyNzZdLFszOTAsMzczXSxbMzczLDMzOV0sWzMzOSwzOTBdLFsyOTUsMjgyXSxbMjgyLDI5Nl0sWzI5NiwyOTVdLFs0NDgsNDQ5XSxbNDQ5LDM0Nl0sWzM0Niw0NDhdLFszNTYsMjY0XSxbMjY0LDQ1NF0sWzQ1NCwzNTZdLFszMzcsMzM2XSxbMzM2LDI5OV0sWzI5OSwzMzddLFszMzcsMzM4XSxbMzM4LDE1MV0sWzE1MSwzMzddLFsyOTQsMjc4XSxbMjc4LDQ1NV0sWzQ1NSwyOTRdLFszMDgsMjkyXSxbMjkyLDQxNV0sWzQxNSwzMDhdLFs0MjksMzU4XSxbMzU4LDM1NV0sWzM1NSw0MjldLFsyNjUsMzQwXSxbMzQwLDM3Ml0sWzM3MiwyNjVdLFszNTIsMzQ2XSxbMzQ2LDI4MF0sWzI4MCwzNTJdLFsyOTUsNDQyXSxbNDQyLDI4Ml0sWzI4MiwyOTVdLFszNTQsMTldLFsxOSwzNzBdLFszNzAsMzU0XSxbMjg1LDQ0MV0sWzQ0MSwyOTVdLFsyOTUsMjg1XSxbMTk1LDI0OF0sWzI0OCwxOTddLFsxOTcsMTk1XSxbNDU3LDQ0MF0sWzQ0MCwyNzRdLFsyNzQsNDU3XSxbMzAxLDMwMF0sWzMwMCwzNjhdLFszNjgsMzAxXSxbNDE3LDM1MV0sWzM1MSw0NjVdLFs0NjUsNDE3XSxbMjUxLDMwMV0sWzMwMSwzODldLFszODksMjUxXSxbMzk0LDM5NV0sWzM5NSwzNzldLFszNzksMzk0XSxbMzk5LDQxMl0sWzQxMiw0MTldLFs0MTksMzk5XSxbNDEwLDQzNl0sWzQzNiwzMjJdLFszMjIsNDEwXSxbMzI2LDJdLFsyLDM5M10sWzM5MywzMjZdLFszNTQsMzcwXSxbMzcwLDQ2MV0sWzQ2MSwzNTRdLFszOTMsMTY0XSxbMTY0LDI2N10sWzI2NywzOTNdLFsyNjgsMzAyXSxbMzAyLDEyXSxbMTIsMjY4XSxbMzEyLDI2OF0sWzI2OCwxM10sWzEzLDMxMl0sWzI5OCwyOTNdLFsyOTMsMzAxXSxbMzAxLDI5OF0sWzI2NSw0NDZdLFs0NDYsMzQwXSxbMzQwLDI2NV0sWzI4MCwzMzBdLFszMzAsNDI1XSxbNDI1LDI4MF0sWzMyMiw0MjZdLFs0MjYsMzkxXSxbMzkxLDMyMl0sWzQyMCw0MjldLFs0MjksNDM3XSxbNDM3LDQyMF0sWzM5MywzOTFdLFszOTEsMzI2XSxbMzI2LDM5M10sWzM0NCw0NDBdLFs0NDAsNDM4XSxbNDM4LDM0NF0sWzQ1OCw0NTldLFs0NTksNDYxXSxbNDYxLDQ1OF0sWzM2NCw0MzRdLFs0MzQsMzk0XSxbMzk0LDM2NF0sWzQyOCwzOTZdLFszOTYsMjYyXSxbMjYyLDQyOF0sWzI3NCwzNTRdLFszNTQsNDU3XSxbNDU3LDI3NF0sWzMxNywzMTZdLFszMTYsNDAyXSxbNDAyLDMxN10sWzMxNiwzMTVdLFszMTUsNDAzXSxbNDAzLDMxNl0sWzMxNSwzMTRdLFszMTQsNDA0XSxbNDA0LDMxNV0sWzMxNCwzMTNdLFszMTMsNDA1XSxbNDA1LDMxNF0sWzMxMyw0MjFdLFs0MjEsNDA2XSxbNDA2LDMxM10sWzMyMywzNjZdLFszNjYsMzYxXSxbMzYxLDMyM10sWzI5MiwzMDZdLFszMDYsNDA3XSxbNDA3LDI5Ml0sWzMwNiwyOTFdLFsyOTEsNDA4XSxbNDA4LDMwNl0sWzI5MSwyODddLFsyODcsNDA5XSxbNDA5LDI5MV0sWzI4Nyw0MzJdLFs0MzIsNDEwXSxbNDEwLDI4N10sWzQyNyw0MzRdLFs0MzQsNDExXSxbNDExLDQyN10sWzM3MiwyNjRdLFsyNjQsMzgzXSxbMzgzLDM3Ml0sWzQ1OSwzMDldLFszMDksNDU3XSxbNDU3LDQ1OV0sWzM2NiwzNTJdLFszNTIsNDAxXSxbNDAxLDM2Nl0sWzEsMjc0XSxbMjc0LDRdLFs0LDFdLFs0MTgsNDIxXSxbNDIxLDI2Ml0sWzI2Miw0MThdLFszMzEsMjk0XSxbMjk0LDM1OF0sWzM1OCwzMzFdLFs0MzUsNDMzXSxbNDMzLDM2N10sWzM2Nyw0MzVdLFszOTIsMjg5XSxbMjg5LDQzOV0sWzQzOSwzOTJdLFszMjgsNDYyXSxbNDYyLDMyNl0sWzMyNiwzMjhdLFs5NCwyXSxbMiwzNzBdLFszNzAsOTRdLFsyODksMzA1XSxbMzA1LDQ1NV0sWzQ1NSwyODldLFszMzksMjU0XSxbMjU0LDQ0OF0sWzQ0OCwzMzldLFszNTksMjU1XSxbMjU1LDQ0Nl0sWzQ0NiwzNTldLFsyNTQsMjUzXSxbMjUzLDQ0OV0sWzQ0OSwyNTRdLFsyNTMsMjUyXSxbMjUyLDQ1MF0sWzQ1MCwyNTNdLFsyNTIsMjU2XSxbMjU2LDQ1MV0sWzQ1MSwyNTJdLFsyNTYsMzQxXSxbMzQxLDQ1Ml0sWzQ1MiwyNTZdLFs0MTQsNDEzXSxbNDEzLDQ2M10sWzQ2Myw0MTRdLFsyODYsNDQxXSxbNDQxLDQxNF0sWzQxNCwyODZdLFsyODYsMjU4XSxbMjU4LDQ0MV0sWzQ0MSwyODZdLFsyNTgsMjU3XSxbMjU3LDQ0Ml0sWzQ0MiwyNThdLFsyNTcsMjU5XSxbMjU5LDQ0M10sWzQ0MywyNTddLFsyNTksMjYwXSxbMjYwLDQ0NF0sWzQ0NCwyNTldLFsyNjAsNDY3XSxbNDY3LDQ0NV0sWzQ0NSwyNjBdLFszMDksNDU5XSxbNDU5LDI1MF0sWzI1MCwzMDldLFszMDUsMjg5XSxbMjg5LDI5MF0sWzI5MCwzMDVdLFszMDUsMjkwXSxbMjkwLDQ2MF0sWzQ2MCwzMDVdLFs0MDEsMzc2XSxbMzc2LDQzNV0sWzQzNSw0MDFdLFszMDksMjUwXSxbMjUwLDM5Ml0sWzM5MiwzMDldLFszNzYsNDExXSxbNDExLDQzM10sWzQzMywzNzZdLFs0NTMsMzQxXSxbMzQxLDQ2NF0sWzQ2NCw0NTNdLFszNTcsNDUzXSxbNDUzLDQ2NV0sWzQ2NSwzNTddLFszNDMsMzU3XSxbMzU3LDQxMl0sWzQxMiwzNDNdLFs0MzcsMzQzXSxbMzQzLDM5OV0sWzM5OSw0MzddLFszNDQsMzYwXSxbMzYwLDQ0MF0sWzQ0MCwzNDRdLFs0MjAsNDM3XSxbNDM3LDQ1Nl0sWzQ1Niw0MjBdLFszNjAsNDIwXSxbNDIwLDM2M10sWzM2MywzNjBdLFszNjEsNDAxXSxbNDAxLDI4OF0sWzI4OCwzNjFdLFsyNjUsMzcyXSxbMzcyLDM1M10sWzM1MywyNjVdLFszOTAsMzM5XSxbMzM5LDI0OV0sWzI0OSwzOTBdLFszMzksNDQ4XSxbNDQ4LDI1NV0sWzI1NSwzMzldKTtmdW5jdGlvbiB1aCh0KXt0Lmo9e2ZhY2VMYW5kbWFya3M6W10sZmFjZUJsZW5kc2hhcGVzOltdLGZhY2lhbFRyYW5zZm9ybWF0aW9uTWF0cml4ZXM6W119O312YXIgbGg9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbWFnZV9pbiIsIm5vcm1fcmVjdCIsITEpLHRoaXMuaj17ZmFjZUxhbmRtYXJrczpbXSxmYWNlQmxlbmRzaGFwZXM6W10sZmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlczpbXX0sdGhpcy5vdXRwdXRGYWNpYWxUcmFuc2Zvcm1hdGlvbk1hdHJpeGVzPXRoaXMub3V0cHV0RmFjZUJsZW5kc2hhcGVzPSExLHVuKHQ9dGhpcy5oPW5ldyBEcywwLDEsZT1uZXcgeHMpLHRoaXMudj1uZXcgTnMsdW4odGhpcy5oLDAsMyx0aGlzLnYpLHRoaXMucz1uZXcgUnMsdW4odGhpcy5oLDAsMix0aGlzLnMpLEVuKHRoaXMucyw0LDEpLHduKHRoaXMucywyLC41KSx3bih0aGlzLnYsMiwuNSksd24odGhpcy5oLDQsLjUpO31nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gYW4odGhpcy5oLHhzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXt1bih0aGlzLmgsMCwxLHQpO31vKHQpe3JldHVybiAibnVtRmFjZXMiaW4gdCYmRW4odGhpcy5zLDQsdC5udW1GYWNlcz8/MSksIm1pbkZhY2VEZXRlY3Rpb25Db25maWRlbmNlImluIHQmJnduKHRoaXMucywyLHQubWluRmFjZURldGVjdGlvbkNvbmZpZGVuY2U/Py41KSwibWluVHJhY2tpbmdDb25maWRlbmNlImluIHQmJnduKHRoaXMuaCw0LHQubWluVHJhY2tpbmdDb25maWRlbmNlPz8uNSksIm1pbkZhY2VQcmVzZW5jZUNvbmZpZGVuY2UiaW4gdCYmd24odGhpcy52LDIsdC5taW5GYWNlUHJlc2VuY2VDb25maWRlbmNlPz8uNSksIm91dHB1dEZhY2VCbGVuZHNoYXBlcyJpbiB0JiYodGhpcy5vdXRwdXRGYWNlQmxlbmRzaGFwZXM9ISF0Lm91dHB1dEZhY2VCbGVuZHNoYXBlcyksIm91dHB1dEZhY2lhbFRyYW5zZm9ybWF0aW9uTWF0cml4ZXMiaW4gdCYmKHRoaXMub3V0cHV0RmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlcz0hIXQub3V0cHV0RmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlcyksdGhpcy5sKHQpfUQodCxlKXtyZXR1cm4gdWgodGhpcyksJGEodGhpcyx0LGUpLHRoaXMuan1GKHQsZSxuKXtyZXR1cm4gdWgodGhpcykscWEodGhpcyx0LG4sZSksdGhpcy5qfW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW1hZ2VfaW4iKSxLaSh0LCJub3JtX3JlY3QiKSxZaSh0LCJmYWNlX2xhbmRtYXJrcyIpO2NvbnN0IGU9bmV3IENpO0tuKGUsanMsdGhpcy5oKTtjb25zdCBuPW5ldyBWaTtCaShuLCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmZhY2VfbGFuZG1hcmtlci5GYWNlTGFuZG1hcmtlckdyYXBoIiksR2kobiwiSU1BR0U6aW1hZ2VfaW4iKSxHaShuLCJOT1JNX1JFQ1Q6bm9ybV9yZWN0IiksamkobiwiTk9STV9MQU5ETUFSS1M6ZmFjZV9sYW5kbWFya3MiKSxuLm8oZSksemkodCxuKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigiZmFjZV9sYW5kbWFya3MiLCgodCxlKT0+e2Zvcihjb25zdCBlIG9mIHQpdD1jcyhlKSx0aGlzLmouZmFjZUxhbmRtYXJrcy5wdXNoKEZvKHQpKTskbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiZmFjZV9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdGhpcy5vdXRwdXRGYWNlQmxlbmRzaGFwZXMmJihZaSh0LCJibGVuZHNoYXBlcyIpLGppKG4sIkJMRU5EU0hBUEVTOmJsZW5kc2hhcGVzIiksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoImJsZW5kc2hhcGVzIiwoKHQsZSk9PntpZih0aGlzLm91dHB1dEZhY2VCbGVuZHNoYXBlcylmb3IoY29uc3QgZSBvZiB0KXQ9ZXMoZSksdGhpcy5qLmZhY2VCbGVuZHNoYXBlcy5wdXNoKHhvKHQuZygpPz9bXSkpOyRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJibGVuZHNoYXBlcyIsKHQ9Pnskbyh0aGlzLHQpO30pKSksdGhpcy5vdXRwdXRGYWNpYWxUcmFuc2Zvcm1hdGlvbk1hdHJpeGVzJiYoWWkodCwiZmFjZV9nZW9tZXRyeSIpLGppKG4sIkZBQ0VfR0VPTUVUUlk6ZmFjZV9nZW9tZXRyeSIpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJmYWNlX2dlb21ldHJ5IiwoKHQsZSk9PntpZih0aGlzLm91dHB1dEZhY2lhbFRyYW5zZm9ybWF0aW9uTWF0cml4ZXMpZm9yKGNvbnN0IGUgb2YgdCkodD1hbihDcyhlKSx1cywyKSkmJnRoaXMuai5mYWNpYWxUcmFuc2Zvcm1hdGlvbk1hdHJpeGVzLnB1c2goe3Jvd3M6Z24obW4odCwxKSwwKT8/MCxjb2x1bW5zOmduKG1uKHQsMiksMCk/PzAsZGF0YTp6ZSh0LDMsV3QpLnNsaWNlKCk/P1tdfSk7JG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImZhY2VfZ2VvbWV0cnkiLCh0PT57JG8odGhpcyx0KTt9KSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07bGgucHJvdG90eXBlLmRldGVjdEZvclZpZGVvPWxoLnByb3RvdHlwZS5GLGxoLnByb3RvdHlwZS5kZXRlY3Q9bGgucHJvdG90eXBlLkQsbGgucHJvdG90eXBlLnNldE9wdGlvbnM9bGgucHJvdG90eXBlLm8sbGguY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBLYShsaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sbGguY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKGxoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LGxoLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKGxoLHQsZSl9LGxoLkZBQ0VfTEFORE1BUktTX0xJUFM9dGgsbGguRkFDRV9MQU5ETUFSS1NfTEVGVF9FWUU9ZWgsbGguRkFDRV9MQU5ETUFSS1NfTEVGVF9FWUVCUk9XPW5oLGxoLkZBQ0VfTEFORE1BUktTX0xFRlRfSVJJUz1yaCxsaC5GQUNFX0xBTkRNQVJLU19SSUdIVF9FWUU9aWgsbGguRkFDRV9MQU5ETUFSS1NfUklHSFRfRVlFQlJPVz1zaCxsaC5GQUNFX0xBTkRNQVJLU19SSUdIVF9JUklTPW9oLGxoLkZBQ0VfTEFORE1BUktTX0ZBQ0VfT1ZBTD1haCxsaC5GQUNFX0xBTkRNQVJLU19DT05UT1VSUz1oaCxsaC5GQUNFX0xBTkRNQVJLU19URVNTRUxBVElPTj1jaDt2YXIgZmg9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbWFnZV9pbiIsIm5vcm1fcmVjdCIsITApLHVuKHQ9dGhpcy5qPW5ldyBWcywwLDEsZT1uZXcgeHMpO31nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gYW4odGhpcy5qLHhzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXt1bih0aGlzLmosMCwxLHQpO31vKHQpe3JldHVybiBzdXBlci5sKHQpfVBhKHQsZSxuKXtjb25zdCByPSJmdW5jdGlvbiIhPXR5cGVvZiBlP2U6e307aWYodGhpcy5oPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6biwkYSh0aGlzLHQscj8/e30pLCF0aGlzLmgpcmV0dXJuIHRoaXMuc31tKCl7dmFyIHQ9bmV3ICRpO0tpKHQsImltYWdlX2luIiksS2kodCwibm9ybV9yZWN0IiksWWkodCwic3R5bGl6ZWRfaW1hZ2UiKTtjb25zdCBlPW5ldyBDaTtLbihlLFhzLHRoaXMuaik7Y29uc3Qgbj1uZXcgVmk7QmkobiwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5mYWNlX3N0eWxpemVyLkZhY2VTdHlsaXplckdyYXBoIiksR2kobiwiSU1BR0U6aW1hZ2VfaW4iKSxHaShuLCJOT1JNX1JFQ1Q6bm9ybV9yZWN0IiksamkobiwiU1RZTElaRURfSU1BR0U6c3R5bGl6ZWRfaW1hZ2UiKSxuLm8oZSksemkodCxuKSx0aGlzLmcuWCgic3R5bGl6ZWRfaW1hZ2UiLCgodCxlKT0+e3ZhciBuPSF0aGlzLmgscj10LmRhdGEsaT10LndpZHRoO2NvbnN0IHM9aSoodD10LmhlaWdodCk7aWYociBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpaWYoci5sZW5ndGg9PT0zKnMpe2NvbnN0IGU9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KDQqcyk7Zm9yKGxldCB0PTA7dDxzOysrdCllWzQqdF09clszKnRdLGVbNCp0KzFdPXJbMyp0KzFdLGVbNCp0KzJdPXJbMyp0KzJdLGVbNCp0KzNdPTI1NTtyPW5ldyBJbWFnZURhdGEoZSxpLHQpO31lbHNlIHtpZihyLmxlbmd0aCE9PTQqcyl0aHJvdyBFcnJvcigiVW5zdXBwb3J0ZWQgY2hhbm5lbCBjb3VudDogIityLmxlbmd0aC9zKTtyPW5ldyBJbWFnZURhdGEobmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHIuYnVmZmVyLHIuYnl0ZU9mZnNldCxyLmxlbmd0aCksaSx0KTt9ZWxzZSBpZighKHIgaW5zdGFuY2VvZiBXZWJHTFRleHR1cmUpKXRocm93IEVycm9yKGBVbnN1cHBvcnRlZCBmb3JtYXQ6ICR7ci5jb25zdHJ1Y3Rvci5uYW1lfWApO2k9bmV3IGphKFtyXSwhMSwhMSx0aGlzLmcuaS5jYW52YXMsdGhpcy5QLGksdCksdGhpcy5zPW49bj9pLmNsb25lKCk6aSx0aGlzLmgmJnRoaXMuaChuKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigic3R5bGl6ZWRfaW1hZ2UiLCh0PT57dGhpcy5zPW51bGwsdGhpcy5oJiZ0aGlzLmgobnVsbCksJG8odGhpcyx0KTt9KSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKTt9fTtmaC5wcm90b3R5cGUuc3R5bGl6ZT1maC5wcm90b3R5cGUuUGEsZmgucHJvdG90eXBlLnNldE9wdGlvbnM9ZmgucHJvdG90eXBlLm8sZmguY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBLYShmaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sZmguY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKGZoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LGZoLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKGZoLHQsZSl9O3ZhciBkaD1YYShbMCwxXSxbMSwyXSxbMiwzXSxbMyw0XSxbMCw1XSxbNSw2XSxbNiw3XSxbNyw4XSxbNSw5XSxbOSwxMF0sWzEwLDExXSxbMTEsMTJdLFs5LDEzXSxbMTMsMTRdLFsxNCwxNV0sWzE1LDE2XSxbMTMsMTddLFswLDE3XSxbMTcsMThdLFsxOCwxOV0sWzE5LDIwXSk7ZnVuY3Rpb24gcGgodCl7dC5nZXN0dXJlcz1bXSx0LmxhbmRtYXJrcz1bXSx0LndvcmxkTGFuZG1hcmtzPVtdLHQuaGFuZGVkbmVzcz1bXTt9ZnVuY3Rpb24gZ2godCl7cmV0dXJuIDA9PT10Lmdlc3R1cmVzLmxlbmd0aD97Z2VzdHVyZXM6W10sbGFuZG1hcmtzOltdLHdvcmxkTGFuZG1hcmtzOltdLGhhbmRlZG5lc3M6W10saGFuZGVkbmVzc2VzOltdfTp7Z2VzdHVyZXM6dC5nZXN0dXJlcyxsYW5kbWFya3M6dC5sYW5kbWFya3Msd29ybGRMYW5kbWFya3M6dC53b3JsZExhbmRtYXJrcyxoYW5kZWRuZXNzOnQuaGFuZGVkbmVzcyxoYW5kZWRuZXNzZXM6dC5oYW5kZWRuZXNzfX1mdW5jdGlvbiBtaCh0LGU9ITApe2NvbnN0IG49W107Zm9yKGNvbnN0IGkgb2YgdCl7dmFyIHI9ZXMoaSk7dD1bXTtmb3IoY29uc3QgbiBvZiByLmcoKSlyPWUmJm51bGwhPW1uKG4sMSk/Z24obW4obiwxKSwwKTotMSx0LnB1c2goe3Njb3JlOnluKG4sMik/PzAsaW5kZXg6cixjYXRlZ29yeU5hbWU6X24obiwzKT8/IiIsZGlzcGxheU5hbWU6X24obiw0KT8/IiJ9KTtuLnB1c2godCk7fXJldHVybiBufXZhciB5aD1jbGFzcyBleHRlbmRzIFphe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IHphKHQsZSksImltYWdlX2luIiwibm9ybV9yZWN0IiwhMSksdGhpcy5nZXN0dXJlcz1bXSx0aGlzLmxhbmRtYXJrcz1bXSx0aGlzLndvcmxkTGFuZG1hcmtzPVtdLHRoaXMuaGFuZGVkbmVzcz1bXSx1bih0PXRoaXMuaj1uZXcgSnMsMCwxLGU9bmV3IHhzKSx0aGlzLnM9bmV3IHFzLHVuKHRoaXMuaiwwLDIsdGhpcy5zKSx0aGlzLkM9bmV3ICRzLHVuKHRoaXMucywwLDMsdGhpcy5DKSx0aGlzLnY9bmV3IFlzLHVuKHRoaXMucywwLDIsdGhpcy52KSx0aGlzLmg9bmV3IEtzLHVuKHRoaXMuaiwwLDMsdGhpcy5oKSx3bih0aGlzLnYsMiwuNSksd24odGhpcy5zLDQsLjUpLHduKHRoaXMuQywyLC41KTt9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGFuKHRoaXMuaix4cywxKX1zZXQgYmFzZU9wdGlvbnModCl7dW4odGhpcy5qLDAsMSx0KTt9byh0KXtpZihFbih0aGlzLnYsMyx0Lm51bUhhbmRzPz8xKSwibWluSGFuZERldGVjdGlvbkNvbmZpZGVuY2UiaW4gdCYmd24odGhpcy52LDIsdC5taW5IYW5kRGV0ZWN0aW9uQ29uZmlkZW5jZT8/LjUpLCJtaW5UcmFja2luZ0NvbmZpZGVuY2UiaW4gdCYmd24odGhpcy5zLDQsdC5taW5UcmFja2luZ0NvbmZpZGVuY2U/Py41KSwibWluSGFuZFByZXNlbmNlQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLkMsMix0Lm1pbkhhbmRQcmVzZW5jZUNvbmZpZGVuY2U/Py41KSx0LmNhbm5lZEdlc3R1cmVzQ2xhc3NpZmllck9wdGlvbnMpe3ZhciBlPW5ldyBIcyxuPWUscj1Tbyh0LmNhbm5lZEdlc3R1cmVzQ2xhc3NpZmllck9wdGlvbnMsYW4odGhpcy5oLEhzLDMpPy5oKCkpO3VuKG4sMCwyLHIpLHVuKHRoaXMuaCwwLDMsZSk7fWVsc2Ugdm9pZCAwPT09dC5jYW5uZWRHZXN0dXJlc0NsYXNzaWZpZXJPcHRpb25zJiZhbih0aGlzLmgsSHMsMyk/LmcoKTtyZXR1cm4gdC5jdXN0b21HZXN0dXJlc0NsYXNzaWZpZXJPcHRpb25zPyh1bihuPWU9bmV3IEhzLDAsMixyPVNvKHQuY3VzdG9tR2VzdHVyZXNDbGFzc2lmaWVyT3B0aW9ucyxhbih0aGlzLmgsSHMsNCk/LmgoKSkpLHVuKHRoaXMuaCwwLDQsZSkpOnZvaWQgMD09PXQuY3VzdG9tR2VzdHVyZXNDbGFzc2lmaWVyT3B0aW9ucyYmYW4odGhpcy5oLEhzLDQpPy5nKCksdGhpcy5sKHQpfUthKHQsZSl7cmV0dXJuIHBoKHRoaXMpLCRhKHRoaXMsdCxlKSxnaCh0aGlzKX1MYSh0LGUsbil7cmV0dXJuIHBoKHRoaXMpLHFhKHRoaXMsdCxuLGUpLGdoKHRoaXMpfW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW1hZ2VfaW4iKSxLaSh0LCJub3JtX3JlY3QiKSxZaSh0LCJoYW5kX2dlc3R1cmVzIiksWWkodCwiaGFuZF9sYW5kbWFya3MiKSxZaSh0LCJ3b3JsZF9oYW5kX2xhbmRtYXJrcyIpLFlpKHQsImhhbmRlZG5lc3MiKTtjb25zdCBlPW5ldyBDaTtLbihlLGlvLHRoaXMuaik7Y29uc3Qgbj1uZXcgVmk7QmkobiwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5nZXN0dXJlX3JlY29nbml6ZXIuR2VzdHVyZVJlY29nbml6ZXJHcmFwaCIpLEdpKG4sIklNQUdFOmltYWdlX2luIiksR2kobiwiTk9STV9SRUNUOm5vcm1fcmVjdCIpLGppKG4sIkhBTkRfR0VTVFVSRVM6aGFuZF9nZXN0dXJlcyIpLGppKG4sIkxBTkRNQVJLUzpoYW5kX2xhbmRtYXJrcyIpLGppKG4sIldPUkxEX0xBTkRNQVJLUzp3b3JsZF9oYW5kX2xhbmRtYXJrcyIpLGppKG4sIkhBTkRFRE5FU1M6aGFuZGVkbmVzcyIpLG4ubyhlKSx6aSh0LG4pLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJoYW5kX2xhbmRtYXJrcyIsKCh0LGUpPT57Zm9yKGNvbnN0IGUgb2YgdCl7dD1jcyhlKTtjb25zdCBuPVtdO2Zvcihjb25zdCBlIG9mIGNuKHQsaHMsMSkpbi5wdXNoKHt4OnluKGUsMSk/PzAseTp5bihlLDIpPz8wLHo6eW4oZSwzKT8/MCx2aXNpYmlsaXR5OnluKGUsNCk/PzB9KTt0aGlzLmxhbmRtYXJrcy5wdXNoKG4pO30kbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiaGFuZF9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoIndvcmxkX2hhbmRfbGFuZG1hcmtzIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXt0PWFzKGUpO2NvbnN0IG49W107Zm9yKGNvbnN0IGUgb2YgY24odCxvcywxKSluLnB1c2goe3g6eW4oZSwxKT8/MCx5OnluKGUsMik/PzAsejp5bihlLDMpPz8wLHZpc2liaWxpdHk6eW4oZSw0KT8/MH0pO3RoaXMud29ybGRMYW5kbWFya3MucHVzaChuKTt9JG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoIndvcmxkX2hhbmRfbGFuZG1hcmtzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJoYW5kX2dlc3R1cmVzIiwoKHQsZSk9Pnt0aGlzLmdlc3R1cmVzLnB1c2goLi4ubWgodCwhMSkpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJoYW5kX2dlc3R1cmVzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJoYW5kZWRuZXNzIiwoKHQsZSk9Pnt0aGlzLmhhbmRlZG5lc3MucHVzaCguLi5taCh0KSksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImhhbmRlZG5lc3MiLCh0PT57JG8odGhpcyx0KTt9KSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKTt9fTtmdW5jdGlvbiBfaCh0KXtyZXR1cm4ge2xhbmRtYXJrczp0LmxhbmRtYXJrcyx3b3JsZExhbmRtYXJrczp0LndvcmxkTGFuZG1hcmtzLGhhbmRlZG5lc3Nlczp0LmhhbmRlZG5lc3MsaGFuZGVkbmVzczp0LmhhbmRlZG5lc3N9fXloLnByb3RvdHlwZS5yZWNvZ25pemVGb3JWaWRlbz15aC5wcm90b3R5cGUuTGEseWgucHJvdG90eXBlLnJlY29nbml6ZT15aC5wcm90b3R5cGUuS2EseWgucHJvdG90eXBlLnNldE9wdGlvbnM9eWgucHJvdG90eXBlLm8seWguY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBLYSh5aCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0seWguY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKHloLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LHloLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKHloLHQsZSl9LHloLkhBTkRfQ09OTkVDVElPTlM9ZGg7dmFyIHZoPWNsYXNzIGV4dGVuZHMgWmF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgemEodCxlKSwiaW1hZ2VfaW4iLCJub3JtX3JlY3QiLCExKSx0aGlzLmxhbmRtYXJrcz1bXSx0aGlzLndvcmxkTGFuZG1hcmtzPVtdLHRoaXMuaGFuZGVkbmVzcz1bXSx1bih0PXRoaXMuaD1uZXcgcXMsMCwxLGU9bmV3IHhzKSx0aGlzLnM9bmV3ICRzLHVuKHRoaXMuaCwwLDMsdGhpcy5zKSx0aGlzLmo9bmV3IFlzLHVuKHRoaXMuaCwwLDIsdGhpcy5qKSxFbih0aGlzLmosMywxKSx3bih0aGlzLmosMiwuNSksd24odGhpcy5zLDIsLjUpLHduKHRoaXMuaCw0LC41KTt9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGFuKHRoaXMuaCx4cywxKX1zZXQgYmFzZU9wdGlvbnModCl7dW4odGhpcy5oLDAsMSx0KTt9byh0KXtyZXR1cm4gIm51bUhhbmRzImluIHQmJkVuKHRoaXMuaiwzLHQubnVtSGFuZHM/PzEpLCJtaW5IYW5kRGV0ZWN0aW9uQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLmosMix0Lm1pbkhhbmREZXRlY3Rpb25Db25maWRlbmNlPz8uNSksIm1pblRyYWNraW5nQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLmgsNCx0Lm1pblRyYWNraW5nQ29uZmlkZW5jZT8/LjUpLCJtaW5IYW5kUHJlc2VuY2VDb25maWRlbmNlImluIHQmJnduKHRoaXMucywyLHQubWluSGFuZFByZXNlbmNlQ29uZmlkZW5jZT8/LjUpLHRoaXMubCh0KX1EKHQsZSl7cmV0dXJuIHRoaXMubGFuZG1hcmtzPVtdLHRoaXMud29ybGRMYW5kbWFya3M9W10sdGhpcy5oYW5kZWRuZXNzPVtdLCRhKHRoaXMsdCxlKSxfaCh0aGlzKX1GKHQsZSxuKXtyZXR1cm4gdGhpcy5sYW5kbWFya3M9W10sdGhpcy53b3JsZExhbmRtYXJrcz1bXSx0aGlzLmhhbmRlZG5lc3M9W10scWEodGhpcyx0LG4sZSksX2godGhpcyl9bSgpe3ZhciB0PW5ldyAkaTtLaSh0LCJpbWFnZV9pbiIpLEtpKHQsIm5vcm1fcmVjdCIpLFlpKHQsImhhbmRfbGFuZG1hcmtzIiksWWkodCwid29ybGRfaGFuZF9sYW5kbWFya3MiKSxZaSh0LCJoYW5kZWRuZXNzIik7Y29uc3QgZT1uZXcgQ2k7S24oZSxybyx0aGlzLmgpO2NvbnN0IG49bmV3IFZpO0JpKG4sIm1lZGlhcGlwZS50YXNrcy52aXNpb24uaGFuZF9sYW5kbWFya2VyLkhhbmRMYW5kbWFya2VyR3JhcGgiKSxHaShuLCJJTUFHRTppbWFnZV9pbiIpLEdpKG4sIk5PUk1fUkVDVDpub3JtX3JlY3QiKSxqaShuLCJMQU5ETUFSS1M6aGFuZF9sYW5kbWFya3MiKSxqaShuLCJXT1JMRF9MQU5ETUFSS1M6d29ybGRfaGFuZF9sYW5kbWFya3MiKSxqaShuLCJIQU5ERURORVNTOmhhbmRlZG5lc3MiKSxuLm8oZSksemkodCxuKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigiaGFuZF9sYW5kbWFya3MiLCgodCxlKT0+e2Zvcihjb25zdCBlIG9mIHQpdD1jcyhlKSx0aGlzLmxhbmRtYXJrcy5wdXNoKEZvKHQpKTskbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiaGFuZF9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoIndvcmxkX2hhbmRfbGFuZG1hcmtzIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXQ9YXMoZSksdGhpcy53b3JsZExhbmRtYXJrcy5wdXNoKFJvKHQpKTskbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigid29ybGRfaGFuZF9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoImhhbmRlZG5lc3MiLCgodCxlKT0+e3ZhciBuPXRoaXMuaGFuZGVkbmVzcyxyPW4ucHVzaDtjb25zdCBpPVtdO2Zvcihjb25zdCBlIG9mIHQpe3Q9ZXMoZSk7Y29uc3Qgbj1bXTtmb3IoY29uc3QgZSBvZiB0LmcoKSluLnB1c2goe3Njb3JlOnluKGUsMik/PzAsaW5kZXg6Z24obW4oZSwxKSwwKT8/LTEsY2F0ZWdvcnlOYW1lOl9uKGUsMyk/PyIiLGRpc3BsYXlOYW1lOl9uKGUsNCk/PyIifSk7aS5wdXNoKG4pO31yLmNhbGwobiwuLi5pKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiaGFuZGVkbmVzcyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApO319O3ZoLnByb3RvdHlwZS5kZXRlY3RGb3JWaWRlbz12aC5wcm90b3R5cGUuRix2aC5wcm90b3R5cGUuZGV0ZWN0PXZoLnByb3RvdHlwZS5ELHZoLnByb3RvdHlwZS5zZXRPcHRpb25zPXZoLnByb3RvdHlwZS5vLHZoLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EodmgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LHZoLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBLYSh2aCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSx2aC5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBLYSh2aCx0LGUpfSx2aC5IQU5EX0NPTk5FQ1RJT05TPWRoO3ZhciBFaD1YYShbMCwxXSxbMSwyXSxbMiwzXSxbMyw3XSxbMCw0XSxbNCw1XSxbNSw2XSxbNiw4XSxbOSwxMF0sWzExLDEyXSxbMTEsMTNdLFsxMywxNV0sWzE1LDE3XSxbMTUsMTldLFsxNSwyMV0sWzE3LDE5XSxbMTIsMTRdLFsxNCwxNl0sWzE2LDE4XSxbMTYsMjBdLFsxNiwyMl0sWzE4LDIwXSxbMTEsMjNdLFsxMiwyNF0sWzIzLDI0XSxbMjMsMjVdLFsyNCwyNl0sWzI1LDI3XSxbMjYsMjhdLFsyNywyOV0sWzI4LDMwXSxbMjksMzFdLFszMCwzMl0sWzI3LDMxXSxbMjgsMzJdKTtmdW5jdGlvbiB3aCh0KXt0Lmg9e2ZhY2VMYW5kbWFya3M6W10sZmFjZUJsZW5kc2hhcGVzOltdLHBvc2VMYW5kbWFya3M6W10scG9zZVdvcmxkTGFuZG1hcmtzOltdLHBvc2VTZWdtZW50YXRpb25NYXNrczpbXSxsZWZ0SGFuZExhbmRtYXJrczpbXSxsZWZ0SGFuZFdvcmxkTGFuZG1hcmtzOltdLHJpZ2h0SGFuZExhbmRtYXJrczpbXSxyaWdodEhhbmRXb3JsZExhbmRtYXJrczpbXX07fWZ1bmN0aW9uIFRoKHQpe3RyeXtpZighdC5DKXJldHVybiB0Lmg7dC5DKHQuaCk7fWZpbmFsbHl7Wm8odCk7fX1mdW5jdGlvbiBBaCh0LGUpe3Q9Y3ModCksZS5wdXNoKEZvKHQpKTt9dmFyIGJoPWNsYXNzIGV4dGVuZHMgWmF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgemEodCxlKSwiaW5wdXRfZnJhbWVzX2ltYWdlIixudWxsLCExKSx0aGlzLmg9e2ZhY2VMYW5kbWFya3M6W10sZmFjZUJsZW5kc2hhcGVzOltdLHBvc2VMYW5kbWFya3M6W10scG9zZVdvcmxkTGFuZG1hcmtzOltdLHBvc2VTZWdtZW50YXRpb25NYXNrczpbXSxsZWZ0SGFuZExhbmRtYXJrczpbXSxsZWZ0SGFuZFdvcmxkTGFuZG1hcmtzOltdLHJpZ2h0SGFuZExhbmRtYXJrczpbXSxyaWdodEhhbmRXb3JsZExhbmRtYXJrczpbXX0sdGhpcy5vdXRwdXRQb3NlU2VnbWVudGF0aW9uTWFza3M9dGhpcy5vdXRwdXRGYWNlQmxlbmRzaGFwZXM9ITEsdW4odD10aGlzLmo9bmV3IGhvLDAsMSxlPW5ldyB4cyksdGhpcy5KPW5ldyAkcyx1bih0aGlzLmosMCwyLHRoaXMuSiksdGhpcy5iYT1uZXcgc28sdW4odGhpcy5qLDAsMyx0aGlzLmJhKSx0aGlzLnM9bmV3IFJzLHVuKHRoaXMuaiwwLDQsdGhpcy5zKSx0aGlzLkg9bmV3IE5zLHVuKHRoaXMuaiwwLDUsdGhpcy5IKSx0aGlzLnY9bmV3IG9vLHVuKHRoaXMuaiwwLDYsdGhpcy52KSx0aGlzLks9bmV3IGFvLHVuKHRoaXMuaiwwLDcsdGhpcy5LKSx3bih0aGlzLnMsMiwuNSksd24odGhpcy5zLDMsLjMpLHduKHRoaXMuSCwyLC41KSx3bih0aGlzLnYsMiwuNSksd24odGhpcy52LDMsLjMpLHduKHRoaXMuSywyLC41KSx3bih0aGlzLkosMiwuNSk7fWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBhbih0aGlzLmoseHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3VuKHRoaXMuaiwwLDEsdCk7fW8odCl7cmV0dXJuICJtaW5GYWNlRGV0ZWN0aW9uQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLnMsMix0Lm1pbkZhY2VEZXRlY3Rpb25Db25maWRlbmNlPz8uNSksIm1pbkZhY2VTdXBwcmVzc2lvblRocmVzaG9sZCJpbiB0JiZ3bih0aGlzLnMsMyx0Lm1pbkZhY2VTdXBwcmVzc2lvblRocmVzaG9sZD8/LjMpLCJtaW5GYWNlUHJlc2VuY2VDb25maWRlbmNlImluIHQmJnduKHRoaXMuSCwyLHQubWluRmFjZVByZXNlbmNlQ29uZmlkZW5jZT8/LjUpLCJvdXRwdXRGYWNlQmxlbmRzaGFwZXMiaW4gdCYmKHRoaXMub3V0cHV0RmFjZUJsZW5kc2hhcGVzPSEhdC5vdXRwdXRGYWNlQmxlbmRzaGFwZXMpLCJtaW5Qb3NlRGV0ZWN0aW9uQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLnYsMix0Lm1pblBvc2VEZXRlY3Rpb25Db25maWRlbmNlPz8uNSksIm1pblBvc2VTdXBwcmVzc2lvblRocmVzaG9sZCJpbiB0JiZ3bih0aGlzLnYsMyx0Lm1pblBvc2VTdXBwcmVzc2lvblRocmVzaG9sZD8/LjMpLCJtaW5Qb3NlUHJlc2VuY2VDb25maWRlbmNlImluIHQmJnduKHRoaXMuSywyLHQubWluUG9zZVByZXNlbmNlQ29uZmlkZW5jZT8/LjUpLCJvdXRwdXRQb3NlU2VnbWVudGF0aW9uTWFza3MiaW4gdCYmKHRoaXMub3V0cHV0UG9zZVNlZ21lbnRhdGlvbk1hc2tzPSEhdC5vdXRwdXRQb3NlU2VnbWVudGF0aW9uTWFza3MpLCJtaW5IYW5kTGFuZG1hcmtzQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLkosMix0Lm1pbkhhbmRMYW5kbWFya3NDb25maWRlbmNlPz8uNSksdGhpcy5sKHQpfUQodCxlLG4pe2NvbnN0IHI9ImZ1bmN0aW9uIiE9dHlwZW9mIGU/ZTp7fTtyZXR1cm4gdGhpcy5DPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6bix3aCh0aGlzKSwkYSh0aGlzLHQsciksVGgodGhpcyl9Rih0LGUsbixyKXtjb25zdCBpPSJmdW5jdGlvbiIhPXR5cGVvZiBuP246e307cmV0dXJuIHRoaXMuQz0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uOnIsd2godGhpcykscWEodGhpcyx0LGksZSksVGgodGhpcyl9bSgpe3ZhciB0PW5ldyAkaTtLaSh0LCJpbnB1dF9mcmFtZXNfaW1hZ2UiKSxZaSh0LCJwb3NlX2xhbmRtYXJrcyIpLFlpKHQsInBvc2Vfd29ybGRfbGFuZG1hcmtzIiksWWkodCwiZmFjZV9sYW5kbWFya3MiKSxZaSh0LCJsZWZ0X2hhbmRfbGFuZG1hcmtzIiksWWkodCwibGVmdF9oYW5kX3dvcmxkX2xhbmRtYXJrcyIpLFlpKHQsInJpZ2h0X2hhbmRfbGFuZG1hcmtzIiksWWkodCwicmlnaHRfaGFuZF93b3JsZF9sYW5kbWFya3MiKTtjb25zdCBlPW5ldyBDaSxuPW5ldyBraTtKZShuLDEscmUoInR5cGUuZ29vZ2xlYXBpcy5jb20vbWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5ob2xpc3RpY19sYW5kbWFya2VyLnByb3RvLkhvbGlzdGljTGFuZG1hcmtlckdyYXBoT3B0aW9ucyIpLCIiKSxmdW5jdGlvbih0LGUpe2lmKG51bGwhPWUpaWYoQXJyYXkuaXNBcnJheShlKSlqZSh0LDIsUmUoZSxJZSx2b2lkIDAsdm9pZCAwLCExKSk7ZWxzZSB7aWYoISgic3RyaW5nIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBEfHxJKGUpKSl0aHJvdyBFcnJvcigiaW52YWxpZCB2YWx1ZSBpbiBBbnkudmFsdWUgZmllbGQ6ICIrZSsiIGV4cGVjdGVkIGEgQnl0ZVN0cmluZywgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcsIGEgVWludDhBcnJheSBvciBhIGpzcGIgYXJyYXkiKTtKZSh0LDIsbHQoZSwhMSwhMSksVSgpKTt9fShuLHRoaXMuai5nKCkpO2NvbnN0IHI9bmV3IFZpO0JpKHIsIm1lZGlhcGlwZS50YXNrcy52aXNpb24uaG9saXN0aWNfbGFuZG1hcmtlci5Ib2xpc3RpY0xhbmRtYXJrZXJHcmFwaCIpLHBuKHIsOCxraSxuKSxHaShyLCJJTUFHRTppbnB1dF9mcmFtZXNfaW1hZ2UiKSxqaShyLCJQT1NFX0xBTkRNQVJLUzpwb3NlX2xhbmRtYXJrcyIpLGppKHIsIlBPU0VfV09STERfTEFORE1BUktTOnBvc2Vfd29ybGRfbGFuZG1hcmtzIiksamkociwiRkFDRV9MQU5ETUFSS1M6ZmFjZV9sYW5kbWFya3MiKSxqaShyLCJMRUZUX0hBTkRfTEFORE1BUktTOmxlZnRfaGFuZF9sYW5kbWFya3MiKSxqaShyLCJMRUZUX0hBTkRfV09STERfTEFORE1BUktTOmxlZnRfaGFuZF93b3JsZF9sYW5kbWFya3MiKSxqaShyLCJSSUdIVF9IQU5EX0xBTkRNQVJLUzpyaWdodF9oYW5kX2xhbmRtYXJrcyIpLGppKHIsIlJJR0hUX0hBTkRfV09STERfTEFORE1BUktTOnJpZ2h0X2hhbmRfd29ybGRfbGFuZG1hcmtzIiksci5vKGUpLHppKHQscikscW8odGhpcyx0KSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcigicG9zZV9sYW5kbWFya3MiLCgodCxlKT0+e0FoKHQsdGhpcy5oLnBvc2VMYW5kbWFya3MpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJwb3NlX2xhbmRtYXJrcyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcigicG9zZV93b3JsZF9sYW5kbWFya3MiLCgodCxlKT0+e3ZhciBuPXRoaXMuaC5wb3NlV29ybGRMYW5kbWFya3M7dD1hcyh0KSxuLnB1c2goUm8odCkpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJwb3NlX3dvcmxkX2xhbmRtYXJrcyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0aGlzLm91dHB1dFBvc2VTZWdtZW50YXRpb25NYXNrcyYmKGppKHIsIlBPU0VfU0VHTUVOVEFUSU9OX01BU0s6cG9zZV9zZWdtZW50YXRpb25fbWFzayIpLEpvKHRoaXMsInBvc2Vfc2VnbWVudGF0aW9uX21hc2siKSx0aGlzLmcuWCgicG9zZV9zZWdtZW50YXRpb25fbWFzayIsKCh0LGUpPT57dGhpcy5oLnBvc2VTZWdtZW50YXRpb25NYXNrcz1bSmEodGhpcyx0LCEwLCF0aGlzLkMpXSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigicG9zZV9zZWdtZW50YXRpb25fbWFzayIsKHQ9Pnt0aGlzLmgucG9zZVNlZ21lbnRhdGlvbk1hc2tzPVtdLCRvKHRoaXMsdCk7fSkpKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcigiZmFjZV9sYW5kbWFya3MiLCgodCxlKT0+e0FoKHQsdGhpcy5oLmZhY2VMYW5kbWFya3MpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJmYWNlX2xhbmRtYXJrcyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0aGlzLm91dHB1dEZhY2VCbGVuZHNoYXBlcyYmKFlpKHQsImV4dHJhX2JsZW5kc2hhcGVzIiksamkociwiRkFDRV9CTEVORFNIQVBFUzpleHRyYV9ibGVuZHNoYXBlcyIpLHRoaXMuZy5hdHRhY2hQcm90b0xpc3RlbmVyKCJleHRyYV9ibGVuZHNoYXBlcyIsKCh0LGUpPT57dmFyIG49dGhpcy5oLmZhY2VCbGVuZHNoYXBlczt0aGlzLm91dHB1dEZhY2VCbGVuZHNoYXBlcyYmKHQ9ZXModCksbi5wdXNoKHhvKHQuZygpPz9bXSkpKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiZXh0cmFfYmxlbmRzaGFwZXMiLCh0PT57JG8odGhpcyx0KTt9KSkpLHRoaXMuZy5hdHRhY2hQcm90b0xpc3RlbmVyKCJsZWZ0X2hhbmRfbGFuZG1hcmtzIiwoKHQsZSk9PntBaCh0LHRoaXMuaC5sZWZ0SGFuZExhbmRtYXJrcyksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImxlZnRfaGFuZF9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdGhpcy5nLmF0dGFjaFByb3RvTGlzdGVuZXIoImxlZnRfaGFuZF93b3JsZF9sYW5kbWFya3MiLCgodCxlKT0+e3ZhciBuPXRoaXMuaC5sZWZ0SGFuZFdvcmxkTGFuZG1hcmtzO3Q9YXModCksbi5wdXNoKFJvKHQpKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigibGVmdF9oYW5kX3dvcmxkX2xhbmRtYXJrcyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcigicmlnaHRfaGFuZF9sYW5kbWFya3MiLCgodCxlKT0+e0FoKHQsdGhpcy5oLnJpZ2h0SGFuZExhbmRtYXJrcyksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoInJpZ2h0X2hhbmRfbGFuZG1hcmtzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHRoaXMuZy5hdHRhY2hQcm90b0xpc3RlbmVyKCJyaWdodF9oYW5kX3dvcmxkX2xhbmRtYXJrcyIsKCh0LGUpPT57dmFyIG49dGhpcy5oLnJpZ2h0SGFuZFdvcmxkTGFuZG1hcmtzO3Q9YXModCksbi5wdXNoKFJvKHQpKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigicmlnaHRfaGFuZF93b3JsZF9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKTt9fTtiaC5wcm90b3R5cGUuZGV0ZWN0Rm9yVmlkZW89YmgucHJvdG90eXBlLkYsYmgucHJvdG90eXBlLmRldGVjdD1iaC5wcm90b3R5cGUuRCxiaC5wcm90b3R5cGUuc2V0T3B0aW9ucz1iaC5wcm90b3R5cGUubyxiaC5jcmVhdGVGcm9tTW9kZWxQYXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKGJoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSxiaC5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoYmgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sYmguY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoYmgsdCxlKX0sYmguSEFORF9DT05ORUNUSU9OUz1kaCxiaC5QT1NFX0NPTk5FQ1RJT05TPUVoLGJoLkZBQ0VfTEFORE1BUktTX0xJUFM9dGgsYmguRkFDRV9MQU5ETUFSS1NfTEVGVF9FWUU9ZWgsYmguRkFDRV9MQU5ETUFSS1NfTEVGVF9FWUVCUk9XPW5oLGJoLkZBQ0VfTEFORE1BUktTX0xFRlRfSVJJUz1yaCxiaC5GQUNFX0xBTkRNQVJLU19SSUdIVF9FWUU9aWgsYmguRkFDRV9MQU5ETUFSS1NfUklHSFRfRVlFQlJPVz1zaCxiaC5GQUNFX0xBTkRNQVJLU19SSUdIVF9JUklTPW9oLGJoLkZBQ0VfTEFORE1BUktTX0ZBQ0VfT1ZBTD1haCxiaC5GQUNFX0xBTkRNQVJLU19DT05UT1VSUz1oaCxiaC5GQUNFX0xBTkRNQVJLU19URVNTRUxBVElPTj1jaDt2YXIga2g9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbnB1dF9pbWFnZSIsIm5vcm1fcmVjdCIsITApLHRoaXMuaj17Y2xhc3NpZmljYXRpb25zOltdfSx1bih0PXRoaXMuaD1uZXcgbG8sMCwxLGU9bmV3IHhzKTt9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGFuKHRoaXMuaCx4cywxKX1zZXQgYmFzZU9wdGlvbnModCl7dW4odGhpcy5oLDAsMSx0KTt9byh0KXtyZXR1cm4gdW4odGhpcy5oLDAsMixTbyh0LGFuKHRoaXMuaCxFcywyKSkpLHRoaXMubCh0KX11YSh0LGUpe3JldHVybiB0aGlzLmo9e2NsYXNzaWZpY2F0aW9uczpbXX0sJGEodGhpcyx0LGUpLHRoaXMuan12YSh0LGUsbil7cmV0dXJuIHRoaXMuaj17Y2xhc3NpZmljYXRpb25zOltdfSxxYSh0aGlzLHQsbixlKSx0aGlzLmp9bSgpe3ZhciB0PW5ldyAkaTtLaSh0LCJpbnB1dF9pbWFnZSIpLEtpKHQsIm5vcm1fcmVjdCIpLFlpKHQsImNsYXNzaWZpY2F0aW9ucyIpO2NvbnN0IGU9bmV3IENpO0tuKGUsZm8sdGhpcy5oKTtjb25zdCBuPW5ldyBWaTtCaShuLCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmltYWdlX2NsYXNzaWZpZXIuSW1hZ2VDbGFzc2lmaWVyR3JhcGgiKSxHaShuLCJJTUFHRTppbnB1dF9pbWFnZSIpLEdpKG4sIk5PUk1fUkVDVDpub3JtX3JlY3QiKSxqaShuLCJDTEFTU0lGSUNBVElPTlM6Y2xhc3NpZmljYXRpb25zIiksbi5vKGUpLHppKHQsbiksdGhpcy5nLmF0dGFjaFByb3RvTGlzdGVuZXIoImNsYXNzaWZpY2F0aW9ucyIsKCh0LGUpPT57dGhpcy5qPWZ1bmN0aW9uKHQpe2NvbnN0IGU9e2NsYXNzaWZpY2F0aW9uczpjbih0LGRzLDEpLm1hcCgodD0+eG8oYW4odCxRaSw0KT8uZygpPz9bXSxnbihtbih0LDIpLDApLF9uKHQsMykpKSl9O3JldHVybiBudWxsIT10ZShEZSh0LDIpKSYmKGUudGltZXN0YW1wTXM9Z24odGUoRGUodCwyKSksMCkpLGV9KHBzKHQpKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiY2xhc3NpZmljYXRpb25zIiwodD0+eyRvKHRoaXMsdCk7fSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07a2gucHJvdG90eXBlLmNsYXNzaWZ5Rm9yVmlkZW89a2gucHJvdG90eXBlLnZhLGtoLnByb3RvdHlwZS5jbGFzc2lmeT1raC5wcm90b3R5cGUudWEsa2gucHJvdG90eXBlLnNldE9wdGlvbnM9a2gucHJvdG90eXBlLm8sa2guY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBLYShraCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sa2guY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKGtoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LGtoLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKGtoLHQsZSl9O3ZhciBTaD1jbGFzcyBleHRlbmRzIFphe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IHphKHQsZSksImltYWdlX2luIiwibm9ybV9yZWN0IiwhMCksdGhpcy5oPW5ldyBwbyx0aGlzLmVtYmVkZGluZ3M9e2VtYmVkZGluZ3M6W119LHVuKHQ9dGhpcy5oLDAsMSxlPW5ldyB4cyk7fWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBhbih0aGlzLmgseHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3VuKHRoaXMuaCwwLDEsdCk7fW8odCl7dmFyIGU9dGhpcy5oLG49YW4odGhpcy5oLFRzLDIpO3JldHVybiBuPW4/bi5jbG9uZSgpOm5ldyBUcyx2b2lkIDAhPT10LmwyTm9ybWFsaXplP3ZuKG4sMSx0LmwyTm9ybWFsaXplKToibDJOb3JtYWxpemUiaW4gdCYmamUobiwxKSx2b2lkIDAhPT10LnF1YW50aXplP3ZuKG4sMix0LnF1YW50aXplKToicXVhbnRpemUiaW4gdCYmamUobiwyKSx1bihlLDAsMixuKSx0aGlzLmwodCl9QmEodCxlKXtyZXR1cm4gJGEodGhpcyx0LGUpLHRoaXMuZW1iZWRkaW5nc31DYSh0LGUsbil7cmV0dXJuIHFhKHRoaXMsdCxuLGUpLHRoaXMuZW1iZWRkaW5nc31tKCl7dmFyIHQ9bmV3ICRpO0tpKHQsImltYWdlX2luIiksS2kodCwibm9ybV9yZWN0IiksWWkodCwiZW1iZWRkaW5nc19vdXQiKTtjb25zdCBlPW5ldyBDaTtLbihlLGdvLHRoaXMuaCk7Y29uc3Qgbj1uZXcgVmk7QmkobiwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5pbWFnZV9lbWJlZGRlci5JbWFnZUVtYmVkZGVyR3JhcGgiKSxHaShuLCJJTUFHRTppbWFnZV9pbiIpLEdpKG4sIk5PUk1fUkVDVDpub3JtX3JlY3QiKSxqaShuLCJFTUJFRERJTkdTOmVtYmVkZGluZ3Nfb3V0Iiksbi5vKGUpLHppKHQsbiksdGhpcy5nLmF0dGFjaFByb3RvTGlzdGVuZXIoImVtYmVkZGluZ3Nfb3V0IiwoKHQsZSk9Pnt0PXZzKHQpLHRoaXMuZW1iZWRkaW5ncz1mdW5jdGlvbih0KXtyZXR1cm4ge2VtYmVkZGluZ3M6Y24odCx5cywxKS5tYXAoKHQ9Pntjb25zdCBlPXtoZWFkSW5kZXg6Z24obW4odCwzKSwwKT8/LTEsaGVhZE5hbWU6X24odCw0KT8/IiJ9O2lmKHZvaWQgMCE9PW9uKHQsZ3MsdG4odCwxKSkpdD16ZSh0PWFuKHQsZ3MsdG4odCwxKSksMSxXdCksZS5mbG9hdEVtYmVkZGluZz10LnNsaWNlKCk7ZWxzZSB7Y29uc3Qgbj1uZXcgVWludDhBcnJheSgwKTtlLnF1YW50aXplZEVtYmVkZGluZz1hbih0LG1zLHRuKHQsMikpPy5xYSgpPy5oKCk/P247fXJldHVybiBlfSkpLHRpbWVzdGFtcE1zOmduKHRlKERlKHQsMikpLDApfX0odCksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImVtYmVkZGluZ3Nfb3V0IiwodD0+eyRvKHRoaXMsdCk7fSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07U2guY29zaW5lU2ltaWxhcml0eT1mdW5jdGlvbih0LGUpe2lmKHQuZmxvYXRFbWJlZGRpbmcmJmUuZmxvYXRFbWJlZGRpbmcpdD1Jbyh0LmZsb2F0RW1iZWRkaW5nLGUuZmxvYXRFbWJlZGRpbmcpO2Vsc2Uge2lmKCF0LnF1YW50aXplZEVtYmVkZGluZ3x8IWUucXVhbnRpemVkRW1iZWRkaW5nKXRocm93IEVycm9yKCJDYW5ub3QgY29tcHV0ZSBjb3NpbmUgc2ltaWxhcml0eSBiZXR3ZWVuIHF1YW50aXplZCBhbmQgZmxvYXQgZW1iZWRkaW5ncy4iKTt0PUlvKE1vKHQucXVhbnRpemVkRW1iZWRkaW5nKSxNbyhlLnF1YW50aXplZEVtYmVkZGluZykpO31yZXR1cm4gdH0sU2gucHJvdG90eXBlLmVtYmVkRm9yVmlkZW89U2gucHJvdG90eXBlLkNhLFNoLnByb3RvdHlwZS5lbWJlZD1TaC5wcm90b3R5cGUuQmEsU2gucHJvdG90eXBlLnNldE9wdGlvbnM9U2gucHJvdG90eXBlLm8sU2guY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBLYShTaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sU2guY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFNoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LFNoLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFNoLHQsZSl9O3ZhciB4aD1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUsbil7dGhpcy5jb25maWRlbmNlTWFza3M9dCx0aGlzLmNhdGVnb3J5TWFzaz1lLHRoaXMucXVhbGl0eVNjb3Jlcz1uO31jbG9zZSgpe3RoaXMuY29uZmlkZW5jZU1hc2tzPy5mb3JFYWNoKCh0PT57dC5jbG9zZSgpO30pKSx0aGlzLmNhdGVnb3J5TWFzaz8uY2xvc2UoKTt9fTtmdW5jdGlvbiBMaCh0KXt0LmNhdGVnb3J5TWFzaz12b2lkIDAsdC5jb25maWRlbmNlTWFza3M9dm9pZCAwLHQucXVhbGl0eVNjb3Jlcz12b2lkIDA7fWZ1bmN0aW9uIEZoKHQpe3RyeXtjb25zdCBlPW5ldyB4aCh0LmNvbmZpZGVuY2VNYXNrcyx0LmNhdGVnb3J5TWFzayx0LnF1YWxpdHlTY29yZXMpO2lmKCF0LmopcmV0dXJuIGU7dC5qKGUpO31maW5hbGx5e1pvKHQpO319eGgucHJvdG90eXBlLmNsb3NlPXhoLnByb3RvdHlwZS5jbG9zZTt2YXIgUmg9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbWFnZV9pbiIsIm5vcm1fcmVjdCIsITEpLHRoaXMucz1bXSx0aGlzLm91dHB1dENhdGVnb3J5TWFzaz0hMSx0aGlzLm91dHB1dENvbmZpZGVuY2VNYXNrcz0hMCx0aGlzLmg9bmV3IEVvLHRoaXMudj1uZXcgbW8sdW4odGhpcy5oLDAsMyx0aGlzLnYpLHVuKHQ9dGhpcy5oLDAsMSxlPW5ldyB4cyk7fWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBhbih0aGlzLmgseHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3VuKHRoaXMuaCwwLDEsdCk7fW8odCl7cmV0dXJuIHZvaWQgMCE9PXQuZGlzcGxheU5hbWVzTG9jYWxlP2plKHRoaXMuaCwyLHJlKHQuZGlzcGxheU5hbWVzTG9jYWxlKSk6ImRpc3BsYXlOYW1lc0xvY2FsZSJpbiB0JiZqZSh0aGlzLmgsMiksIm91dHB1dENhdGVnb3J5TWFzayJpbiB0JiYodGhpcy5vdXRwdXRDYXRlZ29yeU1hc2s9dC5vdXRwdXRDYXRlZ29yeU1hc2s/PyExKSwib3V0cHV0Q29uZmlkZW5jZU1hc2tzImluIHQmJih0aGlzLm91dHB1dENvbmZpZGVuY2VNYXNrcz10Lm91dHB1dENvbmZpZGVuY2VNYXNrcz8/ITApLHN1cGVyLmwodCl9SSgpeyFmdW5jdGlvbih0KXtjb25zdCBlPWNuKHQuZmEoKSxWaSwxKS5maWx0ZXIoKHQ9Pl9uKHQsMSkuaW5jbHVkZXMoIm1lZGlhcGlwZS50YXNrcy5UZW5zb3JzVG9TZWdtZW50YXRpb25DYWxjdWxhdG9yIikpKTtpZih0LnM9W10sZS5sZW5ndGg+MSl0aHJvdyBFcnJvcigiVGhlIGdyYXBoIGhhcyBtb3JlIHRoYW4gb25lIG1lZGlhcGlwZS50YXNrcy5UZW5zb3JzVG9TZWdtZW50YXRpb25DYWxjdWxhdG9yLiIpOzE9PT1lLmxlbmd0aCYmKGFuKGVbMF0sQ2ksNyk/LmwoKT8uZygpPz9uZXcgTWFwKS5mb3JFYWNoKCgoZSxuKT0+e3Quc1tOdW1iZXIobildPV9uKGUsMSk7fSkpO30odGhpcyk7fWdhKHQsZSxuKXtjb25zdCByPSJmdW5jdGlvbiIhPXR5cGVvZiBlP2U6e307cmV0dXJuIHRoaXMuaj0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOm4sTGgodGhpcyksJGEodGhpcyx0LHIpLEZoKHRoaXMpfU5hKHQsZSxuLHIpe2NvbnN0IGk9ImZ1bmN0aW9uIiE9dHlwZW9mIG4/bjp7fTtyZXR1cm4gdGhpcy5qPSJmdW5jdGlvbiI9PXR5cGVvZiBuP246cixMaCh0aGlzKSxxYSh0aGlzLHQsaSxlKSxGaCh0aGlzKX1GYSgpe3JldHVybiB0aGlzLnN9bSgpe3ZhciB0PW5ldyAkaTtLaSh0LCJpbWFnZV9pbiIpLEtpKHQsIm5vcm1fcmVjdCIpO2NvbnN0IGU9bmV3IENpO0tuKGUsd28sdGhpcy5oKTtjb25zdCBuPW5ldyBWaTtCaShuLCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmltYWdlX3NlZ21lbnRlci5JbWFnZVNlZ21lbnRlckdyYXBoIiksR2kobiwiSU1BR0U6aW1hZ2VfaW4iKSxHaShuLCJOT1JNX1JFQ1Q6bm9ybV9yZWN0Iiksbi5vKGUpLHppKHQsbikscW8odGhpcyx0KSx0aGlzLm91dHB1dENvbmZpZGVuY2VNYXNrcyYmKFlpKHQsImNvbmZpZGVuY2VfbWFza3MiKSxqaShuLCJDT05GSURFTkNFX01BU0tTOmNvbmZpZGVuY2VfbWFza3MiKSxKbyh0aGlzLCJjb25maWRlbmNlX21hc2tzIiksdGhpcy5nLmVhKCJjb25maWRlbmNlX21hc2tzIiwoKHQsZSk9Pnt0aGlzLmNvbmZpZGVuY2VNYXNrcz10Lm1hcCgodD0+SmEodGhpcyx0LCEwLCF0aGlzLmopKSksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImNvbmZpZGVuY2VfbWFza3MiLCh0PT57dGhpcy5jb25maWRlbmNlTWFza3M9W10sJG8odGhpcyx0KTt9KSkpLHRoaXMub3V0cHV0Q2F0ZWdvcnlNYXNrJiYoWWkodCwiY2F0ZWdvcnlfbWFzayIpLGppKG4sIkNBVEVHT1JZX01BU0s6Y2F0ZWdvcnlfbWFzayIpLEpvKHRoaXMsImNhdGVnb3J5X21hc2siKSx0aGlzLmcuWCgiY2F0ZWdvcnlfbWFzayIsKCh0LGUpPT57dGhpcy5jYXRlZ29yeU1hc2s9SmEodGhpcyx0LCExLCF0aGlzLmopLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJjYXRlZ29yeV9tYXNrIiwodD0+e3RoaXMuY2F0ZWdvcnlNYXNrPXZvaWQgMCwkbyh0aGlzLHQpO30pKSksWWkodCwicXVhbGl0eV9zY29yZXMiKSxqaShuLCJRVUFMSVRZX1NDT1JFUzpxdWFsaXR5X3Njb3JlcyIpLHRoaXMuZy5hdHRhY2hGbG9hdFZlY3Rvckxpc3RlbmVyKCJxdWFsaXR5X3Njb3JlcyIsKCh0LGUpPT57dGhpcy5xdWFsaXR5U2NvcmVzPXQsJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoInF1YWxpdHlfc2NvcmVzIiwodD0+e3RoaXMuY2F0ZWdvcnlNYXNrPXZvaWQgMCwkbyh0aGlzLHQpO30pKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApO319O1JoLnByb3RvdHlwZS5nZXRMYWJlbHM9UmgucHJvdG90eXBlLkZhLFJoLnByb3RvdHlwZS5zZWdtZW50Rm9yVmlkZW89UmgucHJvdG90eXBlLk5hLFJoLnByb3RvdHlwZS5zZWdtZW50PVJoLnByb3RvdHlwZS5nYSxSaC5wcm90b3R5cGUuc2V0T3B0aW9ucz1SaC5wcm90b3R5cGUubyxSaC5jcmVhdGVGcm9tTW9kZWxQYXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFJoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSxSaC5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoUmgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sUmguY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoUmgsdCxlKX07dmFyIE1oPWNsYXNze2NvbnN0cnVjdG9yKHQsZSxuKXt0aGlzLmNvbmZpZGVuY2VNYXNrcz10LHRoaXMuY2F0ZWdvcnlNYXNrPWUsdGhpcy5xdWFsaXR5U2NvcmVzPW47fWNsb3NlKCl7dGhpcy5jb25maWRlbmNlTWFza3M/LmZvckVhY2goKHQ9Pnt0LmNsb3NlKCk7fSkpLHRoaXMuY2F0ZWdvcnlNYXNrPy5jbG9zZSgpO319O01oLnByb3RvdHlwZS5jbG9zZT1NaC5wcm90b3R5cGUuY2xvc2U7dmFyIEloPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sUGg9WzAsYWksLTJdLE9oPVswLHRpLC0zLHVpLHRpLC0xXSxDaD1bMCxPaF0sVWg9WzAsT2gsYWksLTFdLE5oPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sRGg9WzAsdGksLTEsdWldLEJoPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IoKXtzdXBlcigpO319LEdoPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0samg9WzEsMiwzLDQsNSw2LDcsOCw5LDEwLDE0LDE1XSxWaD1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt9fTtWaC5wcm90b3R5cGUuZz1iaShbMCxRcixbMCxqaCx5aSxPaCx5aSxbMCxPaCxQaF0seWksQ2gseWksWzAsQ2gsUGhdLHlpLERoLHlpLFswLHRpLC0zLHVpLEVpXSx5aSxbMCx0aSwtMyx1aV0seWksWzAscGksdGksLTIsdWksYWksdWksLTEsMix0aSxQaF0seWksVWgseWksWzAsVWgsUGhdLHRpLFBoLHBpLHlpLFswLHRpLC0zLHVpLFBoLC0xXSx5aSxbMCxRcixEaF1dLHBpLFswLHBpLGFpLC0xLHVpXV0pO3ZhciBYaD1jbGFzcyBleHRlbmRzIFphe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IHphKHQsZSksImltYWdlX2luIiwibm9ybV9yZWN0X2luIiwhMSksdGhpcy5vdXRwdXRDYXRlZ29yeU1hc2s9ITEsdGhpcy5vdXRwdXRDb25maWRlbmNlTWFza3M9ITAsdGhpcy5oPW5ldyBFbyx0aGlzLnM9bmV3IG1vLHVuKHRoaXMuaCwwLDMsdGhpcy5zKSx1bih0PXRoaXMuaCwwLDEsZT1uZXcgeHMpO31nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gYW4odGhpcy5oLHhzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXt1bih0aGlzLmgsMCwxLHQpO31vKHQpe3JldHVybiAib3V0cHV0Q2F0ZWdvcnlNYXNrImluIHQmJih0aGlzLm91dHB1dENhdGVnb3J5TWFzaz10Lm91dHB1dENhdGVnb3J5TWFzaz8/ITEpLCJvdXRwdXRDb25maWRlbmNlTWFza3MiaW4gdCYmKHRoaXMub3V0cHV0Q29uZmlkZW5jZU1hc2tzPXQub3V0cHV0Q29uZmlkZW5jZU1hc2tzPz8hMCksc3VwZXIubCh0KX1nYSh0LGUsbixyKXtjb25zdCBpPSJmdW5jdGlvbiIhPXR5cGVvZiBuP246e307dGhpcy5qPSJmdW5jdGlvbiI9PXR5cGVvZiBuP246cix0aGlzLnF1YWxpdHlTY29yZXM9dGhpcy5jYXRlZ29yeU1hc2s9dGhpcy5jb25maWRlbmNlTWFza3M9dm9pZCAwLG49dGhpcy5CKzEscj1uZXcgVmg7Y29uc3Qgcz1uZXcgR2g7dmFyIG89bmV3IEloO2lmKEVuKG8sMSwyNTUpLHVuKHMsMCwxMixvKSxlLmtleXBvaW50JiZlLnNjcmliYmxlKXRocm93IEVycm9yKCJDYW5ub3QgcHJvdmlkZSBib3RoIGtleXBvaW50IGFuZCBzY3JpYmJsZS4iKTtpZihlLmtleXBvaW50KXt2YXIgYT1uZXcgTmg7dm4oYSwzLCEwKSx3bihhLDEsZS5rZXlwb2ludC54KSx3bihhLDIsZS5rZXlwb2ludC55KSxsbihzLDUsamgsYSk7fWVsc2Uge2lmKCFlLnNjcmliYmxlKXRocm93IEVycm9yKCJNdXN0IHByb3ZpZGUgZWl0aGVyIGEga2V5cG9pbnQgb3IgYSBzY3JpYmJsZS4iKTtmb3IoYSBvZihvPW5ldyBCaCxlLnNjcmliYmxlKSl2bihlPW5ldyBOaCwzLCEwKSx3bihlLDEsYS54KSx3bihlLDIsYS55KSxwbihvLDEsTmgsZSk7bG4ocywxNSxqaCxvKTt9cG4ociwxLEdoLHMpLHRoaXMuZy5hZGRQcm90b1RvU3RyZWFtKHIuZygpLCJkcmlzaHRpLlJlbmRlckRhdGEiLCJyb2lfaW4iLG4pLCRhKHRoaXMsdCxpKTt0Ont0cnl7Y29uc3QgdD1uZXcgTWgodGhpcy5jb25maWRlbmNlTWFza3MsdGhpcy5jYXRlZ29yeU1hc2ssdGhpcy5xdWFsaXR5U2NvcmVzKTtpZighdGhpcy5qKXt2YXIgaD10O2JyZWFrIHR9dGhpcy5qKHQpO31maW5hbGx5e1pvKHRoaXMpO31oPXZvaWQgMDt9cmV0dXJuIGh9bSgpe3ZhciB0PW5ldyAkaTtLaSh0LCJpbWFnZV9pbiIpLEtpKHQsInJvaV9pbiIpLEtpKHQsIm5vcm1fcmVjdF9pbiIpO2NvbnN0IGU9bmV3IENpO0tuKGUsd28sdGhpcy5oKTtjb25zdCBuPW5ldyBWaTtCaShuLCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmludGVyYWN0aXZlX3NlZ21lbnRlci5JbnRlcmFjdGl2ZVNlZ21lbnRlckdyYXBoIiksR2kobiwiSU1BR0U6aW1hZ2VfaW4iKSxHaShuLCJST0k6cm9pX2luIiksR2kobiwiTk9STV9SRUNUOm5vcm1fcmVjdF9pbiIpLG4ubyhlKSx6aSh0LG4pLHFvKHRoaXMsdCksdGhpcy5vdXRwdXRDb25maWRlbmNlTWFza3MmJihZaSh0LCJjb25maWRlbmNlX21hc2tzIiksamkobiwiQ09ORklERU5DRV9NQVNLUzpjb25maWRlbmNlX21hc2tzIiksSm8odGhpcywiY29uZmlkZW5jZV9tYXNrcyIpLHRoaXMuZy5lYSgiY29uZmlkZW5jZV9tYXNrcyIsKCh0LGUpPT57dGhpcy5jb25maWRlbmNlTWFza3M9dC5tYXAoKHQ9PkphKHRoaXMsdCwhMCwhdGhpcy5qKSkpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJjb25maWRlbmNlX21hc2tzIiwodD0+e3RoaXMuY29uZmlkZW5jZU1hc2tzPVtdLCRvKHRoaXMsdCk7fSkpKSx0aGlzLm91dHB1dENhdGVnb3J5TWFzayYmKFlpKHQsImNhdGVnb3J5X21hc2siKSxqaShuLCJDQVRFR09SWV9NQVNLOmNhdGVnb3J5X21hc2siKSxKbyh0aGlzLCJjYXRlZ29yeV9tYXNrIiksdGhpcy5nLlgoImNhdGVnb3J5X21hc2siLCgodCxlKT0+e3RoaXMuY2F0ZWdvcnlNYXNrPUphKHRoaXMsdCwhMSwhdGhpcy5qKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiY2F0ZWdvcnlfbWFzayIsKHQ9Pnt0aGlzLmNhdGVnb3J5TWFzaz12b2lkIDAsJG8odGhpcyx0KTt9KSkpLFlpKHQsInF1YWxpdHlfc2NvcmVzIiksamkobiwiUVVBTElUWV9TQ09SRVM6cXVhbGl0eV9zY29yZXMiKSx0aGlzLmcuYXR0YWNoRmxvYXRWZWN0b3JMaXN0ZW5lcigicXVhbGl0eV9zY29yZXMiLCgodCxlKT0+e3RoaXMucXVhbGl0eVNjb3Jlcz10LCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJxdWFsaXR5X3Njb3JlcyIsKHQ9Pnt0aGlzLmNhdGVnb3J5TWFzaz12b2lkIDAsJG8odGhpcyx0KTt9KSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKTt9fTtYaC5wcm90b3R5cGUuc2VnbWVudD1YaC5wcm90b3R5cGUuZ2EsWGgucHJvdG90eXBlLnNldE9wdGlvbnM9WGgucHJvdG90eXBlLm8sWGguY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBLYShYaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sWGguY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFhoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LFhoLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFhoLHQsZSl9O3ZhciBIaD1jbGFzcyBleHRlbmRzIFphe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IHphKHQsZSksImlucHV0X2ZyYW1lX2dwdSIsIm5vcm1fcmVjdCIsITEpLHRoaXMuaj17ZGV0ZWN0aW9uczpbXX0sdW4odD10aGlzLmg9bmV3IFRvLDAsMSxlPW5ldyB4cyk7fWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBhbih0aGlzLmgseHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3VuKHRoaXMuaCwwLDEsdCk7fW8odCl7cmV0dXJuIHZvaWQgMCE9PXQuZGlzcGxheU5hbWVzTG9jYWxlP2plKHRoaXMuaCwyLHJlKHQuZGlzcGxheU5hbWVzTG9jYWxlKSk6ImRpc3BsYXlOYW1lc0xvY2FsZSJpbiB0JiZqZSh0aGlzLmgsMiksdm9pZCAwIT09dC5tYXhSZXN1bHRzP0VuKHRoaXMuaCwzLHQubWF4UmVzdWx0cyk6Im1heFJlc3VsdHMiaW4gdCYmamUodGhpcy5oLDMpLHZvaWQgMCE9PXQuc2NvcmVUaHJlc2hvbGQ/d24odGhpcy5oLDQsdC5zY29yZVRocmVzaG9sZCk6InNjb3JlVGhyZXNob2xkImluIHQmJmplKHRoaXMuaCw0KSx2b2lkIDAhPT10LmNhdGVnb3J5QWxsb3dsaXN0P1RuKHRoaXMuaCw1LHQuY2F0ZWdvcnlBbGxvd2xpc3QpOiJjYXRlZ29yeUFsbG93bGlzdCJpbiB0JiZqZSh0aGlzLmgsNSksdm9pZCAwIT09dC5jYXRlZ29yeURlbnlsaXN0P1RuKHRoaXMuaCw2LHQuY2F0ZWdvcnlEZW55bGlzdCk6ImNhdGVnb3J5RGVueWxpc3QiaW4gdCYmamUodGhpcy5oLDYpLHRoaXMubCh0KX1EKHQsZSl7cmV0dXJuIHRoaXMuaj17ZGV0ZWN0aW9uczpbXX0sJGEodGhpcyx0LGUpLHRoaXMuan1GKHQsZSxuKXtyZXR1cm4gdGhpcy5qPXtkZXRlY3Rpb25zOltdfSxxYSh0aGlzLHQsbixlKSx0aGlzLmp9bSgpe3ZhciB0PW5ldyAkaTtLaSh0LCJpbnB1dF9mcmFtZV9ncHUiKSxLaSh0LCJub3JtX3JlY3QiKSxZaSh0LCJkZXRlY3Rpb25zIik7Y29uc3QgZT1uZXcgQ2k7S24oZSxBbyx0aGlzLmgpO2NvbnN0IG49bmV3IFZpO0JpKG4sIm1lZGlhcGlwZS50YXNrcy52aXNpb24uT2JqZWN0RGV0ZWN0b3JHcmFwaCIpLEdpKG4sIklNQUdFOmlucHV0X2ZyYW1lX2dwdSIpLEdpKG4sIk5PUk1fUkVDVDpub3JtX3JlY3QiKSxqaShuLCJERVRFQ1RJT05TOmRldGVjdGlvbnMiKSxuLm8oZSksemkodCxuKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigiZGV0ZWN0aW9ucyIsKCh0LGUpPT57Zm9yKGNvbnN0IGUgb2YgdCl0PXNzKGUpLHRoaXMuai5kZXRlY3Rpb25zLnB1c2goTG8odCkpOyRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJkZXRlY3Rpb25zIiwodD0+eyRvKHRoaXMsdCk7fSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07SGgucHJvdG90eXBlLmRldGVjdEZvclZpZGVvPUhoLnByb3RvdHlwZS5GLEhoLnByb3RvdHlwZS5kZXRlY3Q9SGgucHJvdG90eXBlLkQsSGgucHJvdG90eXBlLnNldE9wdGlvbnM9SGgucHJvdG90eXBlLm8sSGguY3JlYXRlRnJvbU1vZGVsUGF0aD1hc3luYyBmdW5jdGlvbih0LGUpe3JldHVybiBLYShIaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sSGguY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKEhoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LEhoLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKEhoLHQsZSl9O3ZhciBXaD1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUsbil7dGhpcy5sYW5kbWFya3M9dCx0aGlzLndvcmxkTGFuZG1hcmtzPWUsdGhpcy5zZWdtZW50YXRpb25NYXNrcz1uO31jbG9zZSgpe3RoaXMuc2VnbWVudGF0aW9uTWFza3M/LmZvckVhY2goKHQ9Pnt0LmNsb3NlKCk7fSkpO319O2Z1bmN0aW9uIHpoKHQpe3QubGFuZG1hcmtzPVtdLHQud29ybGRMYW5kbWFya3M9W10sdC5zZWdtZW50YXRpb25NYXNrcz12b2lkIDA7fWZ1bmN0aW9uIEtoKHQpe3RyeXtjb25zdCBlPW5ldyBXaCh0LmxhbmRtYXJrcyx0LndvcmxkTGFuZG1hcmtzLHQuc2VnbWVudGF0aW9uTWFza3MpO2lmKCF0LnMpcmV0dXJuIGU7dC5zKGUpO31maW5hbGx5e1pvKHQpO319V2gucHJvdG90eXBlLmNsb3NlPVdoLnByb3RvdHlwZS5jbG9zZTt2YXIgWWg9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbWFnZV9pbiIsIm5vcm1fcmVjdCIsITEpLHRoaXMubGFuZG1hcmtzPVtdLHRoaXMud29ybGRMYW5kbWFya3M9W10sdGhpcy5vdXRwdXRTZWdtZW50YXRpb25NYXNrcz0hMSx1bih0PXRoaXMuaD1uZXcgYm8sMCwxLGU9bmV3IHhzKSx0aGlzLnY9bmV3IGFvLHVuKHRoaXMuaCwwLDMsdGhpcy52KSx0aGlzLmo9bmV3IG9vLHVuKHRoaXMuaCwwLDIsdGhpcy5qKSxFbih0aGlzLmosNCwxKSx3bih0aGlzLmosMiwuNSksd24odGhpcy52LDIsLjUpLHduKHRoaXMuaCw0LC41KTt9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGFuKHRoaXMuaCx4cywxKX1zZXQgYmFzZU9wdGlvbnModCl7dW4odGhpcy5oLDAsMSx0KTt9byh0KXtyZXR1cm4gIm51bVBvc2VzImluIHQmJkVuKHRoaXMuaiw0LHQubnVtUG9zZXM/PzEpLCJtaW5Qb3NlRGV0ZWN0aW9uQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLmosMix0Lm1pblBvc2VEZXRlY3Rpb25Db25maWRlbmNlPz8uNSksIm1pblRyYWNraW5nQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLmgsNCx0Lm1pblRyYWNraW5nQ29uZmlkZW5jZT8/LjUpLCJtaW5Qb3NlUHJlc2VuY2VDb25maWRlbmNlImluIHQmJnduKHRoaXMudiwyLHQubWluUG9zZVByZXNlbmNlQ29uZmlkZW5jZT8/LjUpLCJvdXRwdXRTZWdtZW50YXRpb25NYXNrcyJpbiB0JiYodGhpcy5vdXRwdXRTZWdtZW50YXRpb25NYXNrcz10Lm91dHB1dFNlZ21lbnRhdGlvbk1hc2tzPz8hMSksdGhpcy5sKHQpfUQodCxlLG4pe2NvbnN0IHI9ImZ1bmN0aW9uIiE9dHlwZW9mIGU/ZTp7fTtyZXR1cm4gdGhpcy5zPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6bix6aCh0aGlzKSwkYSh0aGlzLHQsciksS2godGhpcyl9Rih0LGUsbixyKXtjb25zdCBpPSJmdW5jdGlvbiIhPXR5cGVvZiBuP246e307cmV0dXJuIHRoaXMucz0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uOnIsemgodGhpcykscWEodGhpcyx0LGksZSksS2godGhpcyl9bSgpe3ZhciB0PW5ldyAkaTtLaSh0LCJpbWFnZV9pbiIpLEtpKHQsIm5vcm1fcmVjdCIpLFlpKHQsIm5vcm1hbGl6ZWRfbGFuZG1hcmtzIiksWWkodCwid29ybGRfbGFuZG1hcmtzIiksWWkodCwic2VnbWVudGF0aW9uX21hc2tzIik7Y29uc3QgZT1uZXcgQ2k7S24oZSxrbyx0aGlzLmgpO2NvbnN0IG49bmV3IFZpO0JpKG4sIm1lZGlhcGlwZS50YXNrcy52aXNpb24ucG9zZV9sYW5kbWFya2VyLlBvc2VMYW5kbWFya2VyR3JhcGgiKSxHaShuLCJJTUFHRTppbWFnZV9pbiIpLEdpKG4sIk5PUk1fUkVDVDpub3JtX3JlY3QiKSxqaShuLCJOT1JNX0xBTkRNQVJLUzpub3JtYWxpemVkX2xhbmRtYXJrcyIpLGppKG4sIldPUkxEX0xBTkRNQVJLUzp3b3JsZF9sYW5kbWFya3MiKSxuLm8oZSksemkodCxuKSxxbyh0aGlzLHQpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJub3JtYWxpemVkX2xhbmRtYXJrcyIsKCh0LGUpPT57dGhpcy5sYW5kbWFya3M9W107Zm9yKGNvbnN0IGUgb2YgdCl0PWNzKGUpLHRoaXMubGFuZG1hcmtzLnB1c2goRm8odCkpOyRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJub3JtYWxpemVkX2xhbmRtYXJrcyIsKHQ9Pnt0aGlzLmxhbmRtYXJrcz1bXSwkbyh0aGlzLHQpO30pKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigid29ybGRfbGFuZG1hcmtzIiwoKHQsZSk9Pnt0aGlzLndvcmxkTGFuZG1hcmtzPVtdO2Zvcihjb25zdCBlIG9mIHQpdD1hcyhlKSx0aGlzLndvcmxkTGFuZG1hcmtzLnB1c2goUm8odCkpOyRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJ3b3JsZF9sYW5kbWFya3MiLCh0PT57dGhpcy53b3JsZExhbmRtYXJrcz1bXSwkbyh0aGlzLHQpO30pKSx0aGlzLm91dHB1dFNlZ21lbnRhdGlvbk1hc2tzJiYoamkobiwiU0VHTUVOVEFUSU9OX01BU0s6c2VnbWVudGF0aW9uX21hc2tzIiksSm8odGhpcywic2VnbWVudGF0aW9uX21hc2tzIiksdGhpcy5nLmVhKCJzZWdtZW50YXRpb25fbWFza3MiLCgodCxlKT0+e3RoaXMuc2VnbWVudGF0aW9uTWFza3M9dC5tYXAoKHQ9PkphKHRoaXMsdCwhMCwhdGhpcy5zKSkpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJzZWdtZW50YXRpb25fbWFza3MiLCh0PT57dGhpcy5zZWdtZW50YXRpb25NYXNrcz1bXSwkbyh0aGlzLHQpO30pKSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKTt9fTtZaC5wcm90b3R5cGUuZGV0ZWN0Rm9yVmlkZW89WWgucHJvdG90eXBlLkYsWWgucHJvdG90eXBlLmRldGVjdD1ZaC5wcm90b3R5cGUuRCxZaC5wcm90b3R5cGUuc2V0T3B0aW9ucz1ZaC5wcm90b3R5cGUubyxZaC5jcmVhdGVGcm9tTW9kZWxQYXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFloLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSxZaC5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoWWgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sWWguY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoWWgsdCxlKX0sWWguUE9TRV9DT05ORUNUSU9OUz1FaDsKCiAgY29uc3QgTUlOX01BU0tfVEhSRVNIT0xEID0gMC4zOwogIGNsYXNzIFZvbmFnZVNlbGZpZVNlZ21lbnRhdGlvbiB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5jYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKDAsIDApOwogICAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KAogICAgICAgICIyZCIsCiAgICAgICAgewogICAgICAgICAgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlCiAgICAgICAgfQogICAgICApOwogICAgICB0aGlzLnBpeGVsQ291bnQgPSAwOwogICAgICB0aGlzLmlucHV0T2Zmc2V0ID0gMDsKICAgICAgdGhpcy5vdXRwdXRPZmZzZXQgPSAwOwogICAgfQogICAgYXN5bmMgaW5pdCh3YXNtQXNzZXRVcmlQYXRoLCB0ZmxpdGVBc3NldFVyaVBhdGgpIHsKICAgICAgYXdhaXQgdGhpcy5pbml0V2FzbSh3YXNtQXNzZXRVcmlQYXRoLCB0ZmxpdGVBc3NldFVyaVBhdGgpOwogICAgICBpZiAodGhpcy5pbmZvcykgewogICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5pbmZvcy5pbnB1dFdpZHRoOwogICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaW5mb3MuaW5wdXRIZWlnaHQ7CiAgICAgICAgdGhpcy5waXhlbENvdW50ID0gdGhpcy5pbmZvcy5pbnB1dFdpZHRoICogdGhpcy5pbmZvcy5pbnB1dEhlaWdodDsKICAgICAgICB0aGlzLm1hc2sgPSBuZXcgSW1hZ2VEYXRhKAogICAgICAgICAgdGhpcy5pbmZvcy5pbnB1dFdpZHRoLAogICAgICAgICAgdGhpcy5pbmZvcy5pbnB1dEhlaWdodAogICAgICAgICk7CiAgICAgICAgdGhpcy5pbnB1dE9mZnNldCA9IHRoaXMuaW5mb3MuaW5wdXRNZW1vcnlPZmZzZXQgLyA0OwogICAgICAgIHRoaXMub3V0cHV0T2Zmc2V0ID0gdGhpcy5pbmZvcy5vdXRwdXRNZW1vcnlPZmZzZXQgLyA0OwogICAgICB9CiAgICB9CiAgICBhc3luYyBpbml0V2FzbSh3YXNtQXNzZXRVcmlQYXRoLCB0ZmxpdGVBc3NldFVyaVBhdGgpIHsKICAgICAgdGhpcy5pbmZvcyA9IGF3YWl0IGxvYWRTZWxmaWVTZWdtZW50YXRpb24oCiAgICAgICAgd2FzbUFzc2V0VXJpUGF0aCwKICAgICAgICB0ZmxpdGVBc3NldFVyaVBhdGgKICAgICAgKTsKICAgIH0KICAgIGFzeW5jIHByb2Nlc3MoaW5wdXQsIGZyYW1lKSB7CiAgICAgIGlmICghdGhpcy5tYXNrIHx8ICF0aGlzLmluZm9zKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5pbmZvcy5pbnB1dFdpZHRoOwogICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmluZm9zLmlucHV0SGVpZ2h0OwogICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKAogICAgICAgIGlucHV0LAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICBpbnB1dC53aWR0aCwKICAgICAgICBpbnB1dC5oZWlnaHQsCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodAogICAgICApOwogICAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBoZWFwID0gdGhpcy5pbmZvcy5zZWxlY3RlZFRGTGl0ZS5IRUFQRjMyOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGl4ZWxDb3VudDsgaSsrKSB7CiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5pbnB1dE9mZnNldCArIGkgKiAzOwogICAgICAgIGhlYXBbb2Zmc2V0XSA9IGltYWdlRGF0YS5kYXRhW2kgKiA0XSAvIDI1NTsKICAgICAgICBoZWFwW29mZnNldCArIDFdID0gaW1hZ2VEYXRhLmRhdGFbaSAqIDQgKyAxXSAvIDI1NTsKICAgICAgICBoZWFwW29mZnNldCArIDJdID0gaW1hZ2VEYXRhLmRhdGFbaSAqIDQgKyAyXSAvIDI1NTsKICAgICAgfQogICAgICB0aGlzLmluZm9zLnNlbGVjdGVkVEZMaXRlLl9ydW5JbmZlcmVuY2UoKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBpeGVsQ291bnQ7IGkrKykgewogICAgICAgIGNvbnN0IHBlcnNvbiA9IHRoaXMuaW5mb3Muc2VsZWN0ZWRURkxpdGUuSEVBUEYzMlt0aGlzLm91dHB1dE9mZnNldCArIGldOwogICAgICAgIHRoaXMubWFzay5kYXRhW2kgKiA0XSA9IHRoaXMubWFzay5kYXRhW2kgKiA0ICsgM10gPSAyNTUgKiBwZXJzb247CiAgICAgIH0KICAgICAgcmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKHRoaXMubWFzayk7CiAgICB9CiAgICBpc0dwdVN1cHBvcnRlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5mb3M/LnNlbGVjdGVkVEZMaXRlPy5faXNHUFVFbmFibGVkKCkgPz8gZmFsc2U7CiAgICB9CiAgfQogIGNsYXNzIE1lZGlhcGlwZVNlbGZpZVNlZ21lbnRhdGlvbiB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5jYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKDAsIDApOwogICAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KAogICAgICAgICIyZCIsCiAgICAgICAgewogICAgICAgICAgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlCiAgICAgICAgfQogICAgICApOwogICAgICB0aGlzLndpZHRoID0gMDsKICAgICAgdGhpcy5oZWlnaHQgPSAwOwogICAgfQogICAgYXN5bmMgaW5pdCh3YXNtQXNzZXRVcmlQYXRoLCB0ZmxpdGVBc3NldFVyaVBhdGgpIHsKICAgICAgZ2xvYmFsVGhpcy5kb2N1bWVudCA9IHt9OwogICAgICBjb25zdCBydW5uaW5nTW9kZSA9ICJWSURFTyI7CiAgICAgIGNvbnN0IGNyZWF0ZUltYWdlU2VnbWVudGVyID0gYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IGF1ZGlvID0gYXdhaXQgTm8uZm9yVmlzaW9uVGFza3MoCiAgICAgICAgICAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9AbWVkaWFwaXBlL3Rhc2tzLXZpc2lvbkAwLjEwLjE1L3dhc20iCiAgICAgICAgKTsKICAgICAgICB0aGlzLmltYWdlU2VnbWVudGVyID0gYXdhaXQgUmguY3JlYXRlRnJvbU9wdGlvbnMoYXVkaW8sIHsKICAgICAgICAgIGJhc2VPcHRpb25zOiB7CiAgICAgICAgICAgIC8vIFRPRE86IFdlIG1pZ2h0IG5lZWQgdG8gaG9zdCB0aGUgbmV3IHZlcnNpb24gb2YgdGhpcyBtb2RlbC4KICAgICAgICAgICAgbW9kZWxBc3NldFBhdGg6ICJodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vbWVkaWFwaXBlLW1vZGVscy9pbWFnZV9zZWdtZW50ZXIvc2VsZmllX3NlZ21lbnRlcl9sYW5kc2NhcGUvZmxvYXQxNi9sYXRlc3Qvc2VsZmllX3NlZ21lbnRlcl9sYW5kc2NhcGUudGZsaXRlIiwKICAgICAgICAgICAgZGVsZWdhdGU6ICJHUFUiCiAgICAgICAgICB9LAogICAgICAgICAgcnVubmluZ01vZGUsCiAgICAgICAgICBvdXRwdXRDYXRlZ29yeU1hc2s6IHRydWUsCiAgICAgICAgICBvdXRwdXRDb25maWRlbmNlTWFza3M6IHRydWUKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgY3JlYXRlSW1hZ2VTZWdtZW50ZXIoKTsKICAgIH0KICAgIGFzeW5jIHByb2Nlc3MoaW5wdXQsIGZyYW1lKSB7CiAgICAgIGlmICghdGhpcy5pbWFnZVNlZ21lbnRlcikgewogICAgICAgIGNvbnNvbGUud2FybigiSW1hZ2VTZWdtZW50ZXIgaW5zdGFuY2Ugbm90IGF2YWlsYWJsZSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy53aWR0aCAhPT0gaW5wdXQud2lkdGggfHwgdGhpcy5oZWlnaHQgIT09IGlucHV0LmhlaWdodCkgewogICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy53aWR0aCA9IGlucHV0LndpZHRoOwogICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0ID0gaW5wdXQuaGVpZ2h0OwogICAgICAgIGlmICh0aGlzLm1hc2spIHsKICAgICAgICAgIHRoaXMubWFzayA9IG5ldyBJbWFnZURhdGEoCiAgICAgICAgICAgIHRoaXMud2lkdGgsCiAgICAgICAgICAgIHRoaXMuaGVpZ2h0CiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIXRoaXMubWFzaykgewogICAgICAgIHRoaXMubWFzayA9IG5ldyBJbWFnZURhdGEoCiAgICAgICAgICB0aGlzLndpZHRoLAogICAgICAgICAgdGhpcy5oZWlnaHQKICAgICAgICApOwogICAgICB9CiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoCiAgICAgICAgaW5wdXQsCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIGlucHV0LndpZHRoLAogICAgICAgIGlucHV0LmhlaWdodAogICAgICApOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiB7CiAgICAgICAgdGhpcy5pbWFnZVNlZ21lbnRlcj8uc2VnbWVudEZvclZpZGVvKHRoaXMuY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgaW5wdXQud2lkdGgsIGlucHV0LmhlaWdodCksIGZyYW1lLnRpbWVzdGFtcCwgKHJlc3VsdDIpID0+IHJlcyhyZXN1bHQyKSk7CiAgICAgIH0pOwogICAgICBjb25zdCBjb25maWRlbmNlTWFza3MgPSByZXN1bHQuY29uZmlkZW5jZU1hc2tzPy5bMF07CiAgICAgIGNvbnN0IGNvbmZpZGVuY2VNYXNrID0gY29uZmlkZW5jZU1hc2tzPy5nZXRBc0Zsb2F0MzJBcnJheSgpOwogICAgICBpZiAoIWNvbmZpZGVuY2VNYXNrKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghdGhpcy5wcmV2aW91c0NvbmZpZGVuY2VNYXNrKSB7CiAgICAgICAgdGhpcy5wcmV2aW91c0NvbmZpZGVuY2VNYXNrID0gY29uZmlkZW5jZU1hc2suc2xpY2UoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgYmxlbmRlZENvbmZpZGVuY2VNYXNrID0gY29uZmlkZW5jZU1hc2subWFwKChjb25maWRlbmNlTWFza0VsZW1lbnQsIGluZGV4KSA9PiB7CiAgICAgICAgY29uc3QgcHJldmlvdXNDb25maWRlbmNlTWFza0VsZW1lbnQgPSB0aGlzLnByZXZpb3VzQ29uZmlkZW5jZU1hc2s/LltpbmRleF07CiAgICAgICAgaWYgKHByZXZpb3VzQ29uZmlkZW5jZU1hc2tFbGVtZW50ICE9PSB2b2lkIDApIHsKICAgICAgICAgIHJldHVybiB0aGlzLmJsZW5kKHByZXZpb3VzQ29uZmlkZW5jZU1hc2tFbGVtZW50LCBjb25maWRlbmNlTWFza0VsZW1lbnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gY29uZmlkZW5jZU1hc2tFbGVtZW50OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGNvbnN0IG1hc2tDb2xvciA9IFsyNTUsIDAsIDBdOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsZW5kZWRDb25maWRlbmNlTWFzaz8ubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoYmxlbmRlZENvbmZpZGVuY2VNYXNrW2ldID4gTUlOX01BU0tfVEhSRVNIT0xEKSB7CiAgICAgICAgICB0aGlzLm1hc2suZGF0YVtpICogNF0gPSBtYXNrQ29sb3JbMF07CiAgICAgICAgICB0aGlzLm1hc2suZGF0YVtpICogNCArIDFdID0gbWFza0NvbG9yWzFdOwogICAgICAgICAgdGhpcy5tYXNrLmRhdGFbaSAqIDQgKyAyXSA9IG1hc2tDb2xvclsyXTsKICAgICAgICAgIHRoaXMubWFzay5kYXRhW2kgKiA0ICsgM10gPSAyNTU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubWFzay5kYXRhW2kgKiA0XSA9IHRoaXMubWFzay5kYXRhW2kgKiA0ICsgMV0gPSB0aGlzLm1hc2suZGF0YVtpICogNCArIDJdID0gdGhpcy5tYXNrLmRhdGFbaSAqIDQgKyAzXSA9IDA7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMucHJldmlvdXNDb25maWRlbmNlTWFzayA9IGNvbmZpZGVuY2VNYXNrLnNsaWNlKCk7CiAgICAgIHJldHVybiBjcmVhdGVJbWFnZUJpdG1hcCh0aGlzLm1hc2spOwogICAgfQogICAgaXNHcHVTdXBwb3J0ZWQoKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLy8gVHlwZXNjcmlwdCB2ZXJzaW9uIG9mIGh0dHBzOi8vY3Mub3BlbnNvdXJjZS5nb29nbGUvbWVkaWFwaXBlL21lZGlhcGlwZS8rL3JlZnMvdGFncy92MC44LjExOm1lZGlhcGlwZS9jYWxjdWxhdG9ycy9pbWFnZS9zZWdtZW50YXRpb25fc21vb3RoaW5nX2NhbGN1bGF0b3IuY2M7bD0yMTQKICAgIGJsZW5kKHByZXZpb3VzTWFzaywgY3VycmVudE1hc2spIHsKICAgICAgY29uc3QgYzEgPSA1LjY4ODQyOwogICAgICBjb25zdCBjMiA9IC0wLjc0ODY5OTsKICAgICAgY29uc3QgYzMgPSAtNTcuODA1MTsKICAgICAgY29uc3QgYzQgPSAyOTEuMzA5OwogICAgICBjb25zdCBjNSA9IC02MjQuNzE3OwogICAgICBjb25zdCB0ID0gY3VycmVudE1hc2sgLSAwLjU7CiAgICAgIGNvbnN0IHggPSB0ICogdDsKICAgICAgY29uc3QgdW5jZXJ0YWludHkgPSAxIC0gTWF0aC5taW4oMSwgeCAqIChjMSArIHggKiAoYzIgKyB4ICogKGMzICsgeCAqIChjNCArIHggKiBjNSkpKSkpOwogICAgICByZXR1cm4gY3VycmVudE1hc2sgKyAocHJldmlvdXNNYXNrIC0gY3VycmVudE1hc2spICogKHVuY2VydGFpbnR5ICogMC45KTsKICAgIH0KICB9CgogIGNsYXNzIEJhY2tncm91bmRUcmFuc2Zvcm1lciB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5yZXBvcnRlciA9IG5ldyBxJDEoKTsKICAgICAgdGhpcy5pc0VuYWJsZWQgPSB0cnVlOwogICAgfQogICAgYXN5bmMgaW5pdChpZCwgY29uZmlnKSB7CiAgICAgIGlmIChjb25maWcudm9uYWdlU2VsZmllU2VnbWVudGF0aW9uRW5naW5lICE9PSB2b2lkIDAgJiYgY29uZmlnLnZvbmFnZVNlbGZpZVNlZ21lbnRhdGlvbkVuZ2luZSA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLnNlbGZpZVNlZ21lbnRhdGlvbiA9IG5ldyBNZWRpYXBpcGVTZWxmaWVTZWdtZW50YXRpb24oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlbGZpZVNlZ21lbnRhdGlvbiA9IG5ldyBWb25hZ2VTZWxmaWVTZWdtZW50YXRpb24oKTsKICAgICAgfQogICAgICBhd2FpdCB0aGlzLnNlbGZpZVNlZ21lbnRhdGlvbj8uaW5pdCgKICAgICAgICBjb25maWcud2FzbUFzc2V0VXJpUGF0aCwKICAgICAgICBjb25maWcudGZsaXRlQXNzZXRVcmlQYXRoCiAgICAgICk7CiAgICAgIHRoaXMuYmFja2dyb3VuZEZpbHRlciA9IG5ldyBCYWNrZ3JvdW5kRmlsdGVyKCk7CiAgICAgIHRoaXMucmVwb3J0KHsKICAgICAgICB2YXJpYXRpb246ICJDcmVhdGUiCiAgICAgIH0pOwogICAgfQogICAgYXN5bmMgdHJhbnNmb3JtKGZyYW1lLCBjb250cm9sbGVyKSB7CiAgICAgIGlmICghdGhpcy5pc0VuYWJsZWQpIHsKICAgICAgICByZXR1cm4gY29udHJvbGxlci5lbnF1ZXVlKGZyYW1lKTsKICAgICAgfQogICAgICBsZXQgY2FudmFzOwogICAgICBjb25zdCB0aW1lc3RhbXAgPSBmcmFtZS50aW1lc3RhbXAgPz8gMDsKICAgICAgY29uc3QgaW5wdXQgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChmcmFtZSk7CiAgICAgIGNvbnN0IG1hc2sgPSBhd2FpdCB0aGlzLnNlbGZpZVNlZ21lbnRhdGlvbj8ucHJvY2VzcyhpbnB1dCwgZnJhbWUpOwogICAgICBpZiAobWFzaykgewogICAgICAgIGNhbnZhcyA9IGF3YWl0IHRoaXMuYmFja2dyb3VuZEZpbHRlcj8ucHJvY2VzcyhpbnB1dCwgbWFzayk7CiAgICAgIH0KICAgICAgaWYgKGNhbnZhcykgewogICAgICAgIGZyYW1lLmNsb3NlKCk7CiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKAogICAgICAgICAgbmV3IFZpZGVvRnJhbWUoY2FudmFzLCB7CiAgICAgICAgICAgIHRpbWVzdGFtcCwKICAgICAgICAgICAgYWxwaGE6ICJkaXNjYXJkIgogICAgICAgICAgfSkKICAgICAgICApOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShmcmFtZSk7CiAgICAgIH0KICAgIH0KICAgIGFzeW5jIHNldEJhY2tncm91bmRPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgdGhpcy5iYWNrZ3JvdW5kT3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgIGF3YWl0IHRoaXMuYmFja2dyb3VuZEZpbHRlcj8uc2V0QmFja2dyb3VuZE9wdGlvbnMob3B0aW9ucyk7CiAgICAgIHRoaXMucmVwb3J0KHsKICAgICAgICB2YXJpYXRpb246ICJVcGRhdGUiCiAgICAgIH0pOwogICAgfQogICAgYXN5bmMgc2V0VmlkZW9CR1JlYWRhYmxlKHN0cmVhbSkgewogICAgICBhd2FpdCB0aGlzLmJhY2tncm91bmRGaWx0ZXI/LnNldFZpZGVvQkdSZWFkYWJsZShzdHJlYW0pOwogICAgfQogICAgYXN5bmMgc2V0VmlydHVhbEJHSW1hZ2UoaW1hZ2UpIHsKICAgICAgYXdhaXQgdGhpcy5iYWNrZ3JvdW5kRmlsdGVyPy5zZXRWaXJ0dWFsQkdJbWFnZShpbWFnZSk7CiAgICB9CiAgICBzZXRGbGlja2VyaW5nT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHRoaXMuYmFja2dyb3VuZEZpbHRlcj8uc2V0RmxpY2tlcmluZ09wdGlvbnMob3B0aW9ucyk7CiAgICAgIHRoaXMucmVwb3J0KHsKICAgICAgICB2YXJpYXRpb246ICJVcGRhdGUiCiAgICAgIH0pOwogICAgfQogICAgYXN5bmMgcHJvZmlsZShkdXJhdGlvbikgewogICAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kRmlsdGVyPy5wcm9maWxlKGR1cmF0aW9uKSA/PyBbXTsKICAgIH0KICAgIGdldFRyYW5zZm9ybWVyVHlwZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZE9wdGlvbnM/LnRyYW5zZm9ybWVyVHlwZSA/PyAiVW5kZWZpbmVkIjsKICAgIH0KICAgIGVuYWJsZSgpIHsKICAgICAgdGhpcy5pc0VuYWJsZWQgPSB0cnVlOwogICAgfQogICAgZGlzYWJsZSgpIHsKICAgICAgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTsKICAgIH0KICAgIHJlcG9ydChyZXBvcnQpIHsKICAgICAgdGhpcy5yZXBvcnRlci5zZW5kKHsKICAgICAgICB2ZXJzaW9uLAogICAgICAgIGFjdGlvbjogIk1sVHJhbnNmb3JtZXJzIiwKICAgICAgICB0cmFuc2Zvcm1lclR5cGU6IHRoaXMuYmFja2dyb3VuZE9wdGlvbnM/LnRyYW5zZm9ybWVyVHlwZSwKICAgICAgICBjb25maWc6IEpTT04uc3RyaW5naWZ5KHRoaXMuYmFja2dyb3VuZE9wdGlvbnMpLAogICAgICAgIC4uLnJlcG9ydAogICAgICB9KTsKICAgIH0KICB9CgogIGNvbnN0IF9Qcm9jZXNzb3JXb3JrZXIgPSBjbGFzcyBfUHJvY2Vzc29yV29ya2VyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lciA9IG5ldyBCYWNrZ3JvdW5kVHJhbnNmb3JtZXIoKTsKICAgICAgdGhpcy5tZWRpYVByb2Nlc3NvciA9IG5ldyBDZSQxKCk7CiAgICAgIHRoaXMucmF0ZSA9IDMwOwogICAgICB0aGlzLmV2ZW50c1F1ZXVlID0gW107CiAgICAgIHRoaXMuZnJhbWVUcmFuc2Zvcm1MYXRlbmN5TXMgPSBbXTsKICAgIH0KICAgIGFzeW5jIGluaXQoaWQsIGNvbmZpZykgewogICAgICB0aGlzLmZyYW1lVHJhbnNmb3JtTGF0ZW5jeU1zID0gW107CiAgICAgIGF3YWl0IHRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyLmluaXQoaWQsIGNvbmZpZyk7CiAgICAgIGF3YWl0IHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhbnNmb3JtZXJzKFt0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lcl0pOwogICAgICB0aGlzLm1lZGlhUHJvY2Vzc29yLnNldFRyYWNrRXhwZWN0ZWRSYXRlKHRoaXMucmF0ZSk7CiAgICAgIHRoaXMubWVkaWFQcm9jZXNzb3Iub25BbnkoKG5hbWUsIGRhdGEpID0+IHsKICAgICAgICBpZiAodGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3NvcikgewogICAgICAgICAgdGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcih7IG5hbWUsIGRhdGEgfSk7CiAgICAgICAgICB0aGlzLnJlc29sdmVPbk1lZGlhUHJvY2Vzc29yID0gdm9pZCAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmV2ZW50c1F1ZXVlLnB1c2goeyBuYW1lLCBkYXRhIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICBlbmFibGUoKSB7CiAgICAgIHRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyLmVuYWJsZSgpOwogICAgfQogICAgZGlzYWJsZSgpIHsKICAgICAgdGhpcy5iYWNrZ3JvdW5kVHJhbnNmb3JtZXIuZGlzYWJsZSgpOwogICAgfQogICAgYXN5bmMgb25NZWRpYVByb2Nlc3NvckV2ZW50KCkgewogICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICBpZiAodGhpcy5ldmVudHNRdWV1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICByZXNvbHZlKHRoaXMuZXZlbnRzUXVldWUuc2hpZnQoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucmVzb2x2ZU9uTWVkaWFQcm9jZXNzb3IgPSByZXNvbHZlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICBhc3luYyBzZXRUcmFja0V4cGVjdGVkUmF0ZShyYXRlKSB7CiAgICAgIHRoaXMucmF0ZSA9IHJhdGU7CiAgICAgIHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhY2tFeHBlY3RlZFJhdGUocmF0ZSk7CiAgICB9CiAgICBhc3luYyB0cmFuc2Zvcm0ocmVhZGFibGUsIHdyaXRhYmxlKSB7CiAgICAgIGxldCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB0aGlzLm1lZGlhUHJvY2Vzc29yLnRyYW5zZm9ybShyZWFkYWJsZSwgd3JpdGFibGUpOwogICAgICB0aGlzLmZyYW1lVHJhbnNmb3JtTGF0ZW5jeU1zLnB1c2gocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCk7CiAgICB9CiAgICBhc3luYyBzZXRCYWNrZ3JvdW5kT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIGF3YWl0IHRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyPy5zZXRCYWNrZ3JvdW5kT3B0aW9ucyhvcHRpb25zKTsKICAgIH0KICAgIHNldFZpZGVvQkdSZWFkYWJsZShzdHJlYW0pIHsKICAgICAgdGhpcy5iYWNrZ3JvdW5kVHJhbnNmb3JtZXIuc2V0VmlkZW9CR1JlYWRhYmxlKHN0cmVhbSk7CiAgICB9CiAgICBhc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShpbWFnZSkgewogICAgICBhd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5zZXRWaXJ0dWFsQkdJbWFnZShpbWFnZSk7CiAgICB9CiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7CiAgICAgIGF3YWl0IHRoaXMubWVkaWFQcm9jZXNzb3IuZGVzdHJveSgpOwogICAgICBjb25zdCBzdW0gPSB0aGlzLmZyYW1lVHJhbnNmb3JtTGF0ZW5jeU1zLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApOwogICAgICBjb25zdCBhdmcgPSBzdW0gLyB0aGlzLmZyYW1lVHJhbnNmb3JtTGF0ZW5jeU1zLmxlbmd0aCB8fCAwOwogICAgICBjb25zb2xlLmxvZyhgVHJhbnNmb3JtIGxhdGVuY3kgYXZlcmFnZSBpczogJHthdmd9IG1zYCk7CiAgICB9CiAgICBzZXRGbGlja2VyaW5nT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyLnNldEZsaWNrZXJpbmdPcHRpb25zKG9wdGlvbnMpOwogICAgfQogICAgc2V0Vm9uYWdlTWV0YWRhdGEobWV0YWRhdGEpIHsKICAgICAgeGUkMShtZXRhZGF0YSk7CiAgICB9CiAgICBhc3luYyBwcm9maWxlKGR1cmF0aW9uKSB7CiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSgKICAgICAgICBhd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5wcm9maWxlKGR1cmF0aW9uKQogICAgICApOwogICAgfQogIH07CiAgcmVnaXN0ZXJXb3JrZXIoIlByb2Nlc3NvcldvcmtlciIsIF9Qcm9jZXNzb3JXb3JrZXIpOwoKfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzc29yLXdvcmtlci1jOWJkYzgzNy5qcy5tYXAK",Pm=typeof window!="undefined"&&window.Blob&&new Blob([atob(Pp)],{type:"text/javascript;charset=utf-8"});function X9(){let e;try{if(e=Pm&&(window.URL||window.webkitURL).createObjectURL(Pm),!e)throw"";return new Worker(e)}catch{return new Worker("data:application/javascript;base64,"+Pp)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const qp=class $p extends Ac{constructor(t){super(),this.rate=30,this.isEnabled=!0,this.config=t}async setTrackExpectedRate(t){var i;await this.startWorker(),await((i=this.worker)==null?void 0:i.setTrackExpectedRate(t))}async setBackgroundOptions(t){this.backgroundOptions=t,await this.updateBackgroundOptions(t)}async transform(t,i){var n;await this.startWorker(),await((n=this.worker)==null?void 0:n.transform(t,i))}async destroy(){var t;await((t=this.worker)==null?void 0:t.terminate()),this.worker=void 0}async setFlickeringOptions(t){var i;await this.startWorker(),await((i=this.worker)==null?void 0:i.setFlickeringOptions(t))}async profile(t){var n;const i=await((n=this.worker)==null?void 0:n.profile(t));return JSON.parse(i!=null?i:"[]")}async enable(){var t;this.isEnabled=!0,await((t=this.worker)==null?void 0:t.enable())}async disable(){var t;this.isEnabled=!1,await((t=this.worker)==null?void 0:t.disable())}async listenWorker(){var t,i;for(;(t=this.worker)!=null&&t.workerContext.worker;){const{name:n,data:o}=await((i=this.worker)==null?void 0:i.onMediaProcessorEvent());switch(n){case"error":case"warn":this.emit(n,o);break;case"pipelineInfo":switch(this.emit(n,o),o){case"pipeline_ended":case"pipeline_ended_with_error":await this.destroy();return}break}}}async startWorker(){!this.config||this.worker||(this.worker=await b3(B9,X9),this.isEnabled||await this.worker.disable(),await this.worker.init(`worker_${$p.initCount++}`,this.config),this.backgroundOptions&&await this.updateBackgroundOptions(this.backgroundOptions),await this.worker.setVonageMetadata(gg()),await this.setBackgroundOptions(this.config),this.listenWorker())}async updateBackgroundOptions(t){var n,o,l;await this.startWorker();const{transformerType:i}=t;switch(i){case"VideoBackground":await((n=this.worker)==null?void 0:n.setVideoBGReadable(await V0.createVideoReadable(t.backgroundAssetUri)));break;case"VirtualBackground":await((o=this.worker)==null?void 0:o.setVirtualBGImage(await V0.createImageCanvas(t.backgroundAssetUri)));break}await((l=this.worker)==null?void 0:l.setBackgroundOptions(t))}};qp.initCount=0;let R9=qp;class v9{constructor(t){this.queries=t}async downloadSpeedscope(){this.download(await this.convertToSpeedscope())}download(t){const i=document.createElement("a");i.href=URL.createObjectURL(new Blob([t],{type:"application/json"})),i.download=`profile-${+new Date}.speedscope.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}convertToSpeedscope(){const t=[],i={},n=[];let o=0;for(const I of this.queries){const m=[];for(const Z of I)i[Z.name]===void 0&&(i[Z.name]=t.length,t.push({name:Z.name})),m.push({type:Z.action==i2.PUSH?"O":"C",frame:i[Z.name],at:Z.timestamp}),o=Math.max(o,Z.timestamp+Z.duration);n.push({events:m,type:"evented",name:"GPU Profile",unit:"nanoseconds",startValue:0,endValue:o})}const l={$schema:"https://www.speedscope.app/file-format-schema.json",shared:{frames:t},profiles:n};return JSON.stringify(l,null,2)}}class t1 extends Ac{constructor(t){super(),this.worker=new R9(t),this.connector=new _Z(this.worker),this.worker.onAny((i,n)=>this.emit(i,n))}async setBackgroundOptions(t){await this.worker.setBackgroundOptions(t)}async enable(){await this.worker.enable()}async disable(){await this.worker.disable()}setTrackExpectedRate(t){this.worker.setTrackExpectedRate(t)}getConnector(){return this.connector}async profile(t){return this.worker.profile(t)}static async profile(t){const i=await Promise.all(this.instances.map(n=>n.profile(t)));return new v9(i)}static async create(t){const i=new this(t);return this.instances.push(i),i}}t1.instances=[];async function S9(e){return await t1.create(e)}const Ws=new WeakMap,Ag=new WeakMap,Ol=new WeakMap,FI=Symbol("anyProducer"),qm=Promise.resolve(),cd=Symbol("listenerAdded"),gd=Symbol("listenerRemoved");let Xa=!1;function kr(e){if(typeof e!="string"&&typeof e!="symbol")throw new TypeError("eventName must be a string or a symbol")}function og(e){if(typeof e!="function")throw new TypeError("listener must be a function")}function zr(e,t){const i=Ag.get(e);return i.has(t)||i.set(t,new Set),i.get(t)}function jl(e,t){const i=typeof t=="string"||typeof t=="symbol"?t:FI,n=Ol.get(e);return n.has(i)||n.set(i,new Set),n.get(i)}function w9(e,t,i){const n=Ol.get(e);if(n.has(t))for(const o of n.get(t))o.enqueue(i);if(n.has(FI)){const o=Promise.all([t,i]);for(const l of n.get(FI))l.enqueue(o)}}function $m(e,t){t=Array.isArray(t)?t:[t];let i=!1,n=()=>{},o=[];const l={enqueue(I){o.push(I),n()},finish(){i=!0,n()}};for(const I of t)jl(e,I).add(l);return{async next(){return o?o.length===0?i?(o=void 0,this.next()):(await new Promise(I=>{n=I}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(I){o=void 0;for(const m of t)jl(e,m).delete(l);return n(),arguments.length>0?{done:!0,value:await I}:{done:!0}},[Symbol.asyncIterator](){return this}}}function th(e){if(e===void 0)return eh;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!eh.includes(t))throw typeof t!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${t} is not Emittery method`);return e}const Ra=e=>e===cd||e===gd;class ul{static mixin(t,i){return i=th(i),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const I of i)if(n.prototype[I]!==void 0)throw new Error(`The property \`${I}\` already exists on \`target\``);function o(){return Object.defineProperty(this,t,{enumerable:!1,value:new ul}),this[t]}Object.defineProperty(n.prototype,t,{enumerable:!1,get:o});const l=I=>function(...m){return this[t][I](...m)};for(const I of i)Object.defineProperty(n.prototype,I,{enumerable:!1,value:l(I)});return n}}static get isDebugEnabled(){if(typeof process!="object")return Xa;const{env:t}=process||{env:{}};return t.DEBUG==="emittery"||t.DEBUG==="*"||Xa}static set isDebugEnabled(t){Xa=t}constructor(t={}){Ws.set(this,new Set),Ag.set(this,new Map),Ol.set(this,new Map),this.debug=t.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(i,n,o,l)=>{try{l=JSON.stringify(l)}catch{l=`Object with the following keys failed to stringify: ${Object.keys(l).join(",")}`}typeof o=="symbol"&&(o=o.toString());const I=new Date,m=`${I.getHours()}:${I.getMinutes()}:${I.getSeconds()}.${I.getMilliseconds()}`;console.log(`[${m}][emittery:${i}][${n}] Event Name: ${o}
	data: ${l}`)})}logIfDebugEnabled(t,i,n){(ul.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,i,n)}on(t,i){og(i),t=Array.isArray(t)?t:[t];for(const n of t)kr(n),zr(this,n).add(i),this.logIfDebugEnabled("subscribe",n,void 0),Ra(n)||this.emit(cd,{eventName:n,listener:i});return this.off.bind(this,t,i)}off(t,i){og(i),t=Array.isArray(t)?t:[t];for(const n of t)kr(n),zr(this,n).delete(i),this.logIfDebugEnabled("unsubscribe",n,void 0),Ra(n)||this.emit(gd,{eventName:n,listener:i})}once(t){return new Promise(i=>{const n=this.on(t,o=>{n(),i(o)})})}events(t){t=Array.isArray(t)?t:[t];for(const i of t)kr(i);return $m(this,t)}async emit(t,i){kr(t),this.logIfDebugEnabled("emit",t,i),w9(this,t,i);const n=zr(this,t),o=Ws.get(this),l=[...n],I=Ra(t)?[]:[...o];await qm,await Promise.all([...l.map(async m=>{if(n.has(m))return m(i)}),...I.map(async m=>{if(o.has(m))return m(t,i)})])}async emitSerial(t,i){kr(t),this.logIfDebugEnabled("emitSerial",t,i);const n=zr(this,t),o=Ws.get(this),l=[...n],I=[...o];await qm;for(const m of l)n.has(m)&&await m(i);for(const m of I)o.has(m)&&await m(t,i)}onAny(t){return og(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Ws.get(this).add(t),this.emit(cd,{listener:t}),this.offAny.bind(this,t)}anyEvent(){return $m(this)}offAny(t){og(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(gd,{listener:t}),Ws.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(const i of t)if(this.logIfDebugEnabled("clear",i,void 0),typeof i=="string"||typeof i=="symbol"){zr(this,i).clear();const n=jl(this,i);for(const o of n)o.finish();n.clear()}else{Ws.get(this).clear();for(const n of Ag.get(this).values())n.clear();for(const n of Ol.get(this).values()){for(const o of n)o.finish();n.clear()}}}listenerCount(t){t=Array.isArray(t)?t:[t];let i=0;for(const n of t){if(typeof n=="string"){i+=Ws.get(this).size+zr(this,n).size+jl(this,n).size+jl(this).size;continue}typeof n<"u"&&kr(n),i+=Ws.get(this).size;for(const o of Ag.get(this).values())i+=o.size;for(const o of Ol.get(this).values())i+=o.size}return i}bindMethods(t,i){if(typeof t!="object"||t===null)throw new TypeError("`target` must be an object");i=th(i);for(const n of i){if(t[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(t,n,{enumerable:!1,value:this[n].bind(this)})}}}const eh=Object.getOwnPropertyNames(ul.prototype).filter(e=>e!=="constructor");Object.defineProperty(ul,"listenerAdded",{value:cd,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(ul,"listenerRemoved",{value:gd,writable:!1,enumerable:!0,configurable:!1});const F9=[];for(let e=0;e<256;++e)F9.push((e+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);function BC(e,t){globalThis.vonage||(globalThis.vonage={}),globalThis.vonage.workerizer||(globalThis.vonage.workerizer={});let i=globalThis.vonage.workerizer;return i[e]||(i[e]=t),i[e]}const Hs=BC("globals",{});var cr=(e=>(e.INIT="INIT",e.FORWARD="FORWARD",e.TERMINATE="TERMINATE",e.GLOBALS_SYNC="GLOBALS_SYNC",e))(cr||{});function e1(e){return[ImageBitmap,ReadableStream,WritableStream].some(t=>e instanceof t)}let H9=0;function x9(e,t,i,n,o){const l=H9++;return e.postMessage({id:l,type:t,functionName:i,args:n},n.filter(I=>e1(I))),new Promise(I=>{o==null||o.set(l,I)})}function Hc(e,t){const{id:i,type:n}=e,o=Array.isArray(t)?t:[t];postMessage({id:i,type:n,result:t},o.filter(l=>e1(l)))}const ih=BC("workerized",{});function i1(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}async function N9(){if(i1())Hc({type:cr.GLOBALS_SYNC},Hs);else{const e=[];for(const t in ih){const{worker:i,resolvers:n}=ih[t].workerContext;i&&e.push(x9(i,cr.GLOBALS_SYNC,"",[Hs],n))}await Promise.all(e)}}function dd(e,t){if(Array.isArray(t))t.splice(0,t.length);else if(typeof t=="object")for(const i in t)delete t[i];for(const i in e)Array.isArray(e[i])?(t[i]=[],dd(e[i],t[i])):typeof e[i]=="object"?(t[i]={},dd(e[i],t[i])):t[i]=e[i]}async function Y9(e,t){const{functionName:i,args:n}=e;if(!t.instance)throw"instance not initialized";if(!i)throw"missing function name to call";if(!t.instance[i])throw`undefined function [${i}] in class ${t.instance.constructor.workerId}`;Hc(e,await t.instance[i](...n!=null?n:[]))}const M9=BC("registeredWorkers",{});function L9(e,t){if(!e.args)throw"Missing className while initializing worker";const[i,n]=e.args,o=M9[i];if(o)t.instance=new o(e.args.slice(1));else throw`unknown worker class ${i}`;dd(n,Hs),Hc(e,typeof t.instance!==void 0)}async function J9(e,t){const{args:i}=e;if(!t.instance)throw"instance not initialized";let n;t.instance.terminate&&(n=await t.instance.terminate(...i!=null?i:[])),Hc(e,n)}function T9(e){if(!e.args)throw"Missing globals while syncing";dd(e.args[0],Hs),Hc(e,{})}function k9(){const e={};onmessage=async t=>{const i=t.data;switch(i.type){case cr.INIT:L9(i,e);break;case cr.FORWARD:Y9(i,e);break;case cr.TERMINATE:J9(i,e);break;case cr.GLOBALS_SYNC:T9(i);break}}}i1()&&k9();function z9(e,t){return Hs[e]||(Hs[e]=t),[()=>Hs[e],async i=>{Hs[e]=i,await N9()}]}function K9(e,t){return z9(e,t)}const[YX,U9]=K9("metadata");function E9(e){U9(e)}const Q9="background-enchantments",D9="5.2.0-alpha.1",O9={dev:"vite",build:"tsc && vite build",preview:"vite preview",buildToDocs:"npm run build && node copyToDocs.js"},j9={"@vonage/ml-transformers":"5.2.0-alpha.1","@vonage/vivid":"2.36.0"},_9={typescript:"^4.5.4",vite:"^2.9.9"};var P9={name:Q9,private:!0,version:D9,scripts:O9,dependencies:j9,devDependencies:_9};const nh="media/",oh={blurLow:{transformerType:er.BackgroundBlur,radius:ws.Low},blurHigh:{transformerType:er.BackgroundBlur,radius:ws.High},virtual:{transformerType:er.VirtualBackground,backgroundAssetUri:`${nh}virtual.jpeg`},video:{transformerType:er.VideoBackground,backgroundAssetUri:`${nh}bbb.mp4`},silhouetteLow:{transformerType:er.SilhouetteBlur,radius:ws.Low},silhouetteHigh:{transformerType:er.SilhouetteBlur,radius:ws.High}};function Kr(e){const t=document.getElementById(e);if(!t)throw`Unable to find element #${e}`;return t}async function q9(){let e=new aZ,t;async function i(){try{await qZ()}catch(P){alert("Something bad happened: "+P)}E9({appId:"test_app_id",sourceType:"video"});try{await e.init()}catch(P){alert("An error happen while initializing camera "+P)}}async function n(){const P=I();return P&&(t=await S9(P),t.on("error",ct=>console.error("error",ct)),t.on("warn",ct=>console.warn("warn",ct)),t.setTrackExpectedRate(30),await e.setMediaProcessorConnector(t.getConnector()),console.log("all done and running")),P!==void 0}async function o(){e.stopMediaProcessorConnector()}function l(){switch(st.value){case"canvas":return{type:gr.CANVAS};case"fast":return{type:gr.WEBGL,selfieSegmentationType:oc.FAST};case"precise":return{type:gr.WEBGL,selfieSegmentationType:oc.PRECISE}}}function I(){const P=K.value,ct=oh[P];if(!oh[P])throw`Undefined type [${P}]`;return{...ct,vonageSelfieSegmentationEngine:!1,renderingOptions:l()}}async function m(){const P=I();P&&t&&t.setBackgroundOptions(P)}const Z=Kr("cameraswitch"),x=Kr("githubButton"),L=Kr("vividButton"),K=Kr("typeSelector"),st=Kr("renderingSelector"),ut=Kr("version_tag");ut.innerText=`@vonage/ml-transformers version: ${P9.dependencies["@vonage/ml-transformers"]}`,Z.addEventListener("change",async()=>{Z.checked?await n()||(Z.checked=!1):o()}),K.addEventListener("change",()=>{m()}),st.addEventListener("change",()=>{m()}),x.addEventListener("click",()=>{var P;(P=window.open("https://github.com/Vonage/vonage-media-transformers-samples/tree/main/examples/mediapipe/BackgroundEnchantments","_blank"))==null||P.focus()}),L.addEventListener("click",()=>{var P;(P=window.open("https://vivid.vonage.com/?path=/story/introduction-meet-vivid--meet-vivid","_blank"))==null||P.focus()}),await i()}window.onload=q9;export{bi as c};
