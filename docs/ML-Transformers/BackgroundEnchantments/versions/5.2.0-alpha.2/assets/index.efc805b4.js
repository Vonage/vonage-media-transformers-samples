const CA=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const I of l.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&n(I)}).observe(document,{childList:!0,subtree:!0});function i(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=i(o);fetch(o.href,l)}};CA();var Fa=function(e,t){return Fa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},Fa(e,t)};function xo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Fa(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var on=function(){return on=Object.assign||function(t){for(var i,n=1,o=arguments.length;n<o;n++){i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(t[l]=i[l])}return t},on.apply(this,arguments)};function z(e,t,i,n){var o=arguments.length,l=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,i,n);else for(var m=e.length-1;m>=0;m--)(I=e[m])&&(l=(o<3?I(l):o>3?I(t,i,l):I(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l}function Fl(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yo(e,t,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(e):n?n.value:t.get(e)}function Ah(e,t,i,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,i):o?o.value=i:t.set(e,i),i}const uA="modulepreload",ku={},mA="",Ha=function(t,i){return!i||i.length===0?t():Promise.all(i.map(n=>{if(n=`${mA}${n}`,n in ku)return;ku[n]=!0;const o=n.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${l}`))return;const I=document.createElement("link");if(I.rel=o?"stylesheet":uA,o||(I.as="script",I.crossOrigin=""),I.href=n,document.head.appendChild(I),o)return new Promise((m,y)=>{I.addEventListener("load",m),I.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};function Er(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function tl(e){return function t(i){return arguments.length===0||Er(i)?t:e.apply(this,arguments)}}function hA(e){return function t(i,n){switch(arguments.length){case 0:return t;case 1:return Er(i)?t:tl(function(o){return e(i,o)});default:return Er(i)&&Er(n)?t:Er(i)?tl(function(o){return e(o,n)}):Er(n)?tl(function(o){return e(i,o)}):e(i,n)}}}function Zh(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(i){return t.apply(this,arguments)};case 2:return function(i,n){return t.apply(this,arguments)};case 3:return function(i,n,o){return t.apply(this,arguments)};case 4:return function(i,n,o,l){return t.apply(this,arguments)};case 5:return function(i,n,o,l,I){return t.apply(this,arguments)};case 6:return function(i,n,o,l,I,m){return t.apply(this,arguments)};case 7:return function(i,n,o,l,I,m,y){return t.apply(this,arguments)};case 8:return function(i,n,o,l,I,m,y,H){return t.apply(this,arguments)};case 9:return function(i,n,o,l,I,m,y,H,L){return t.apply(this,arguments)};case 10:return function(i,n,o,l,I,m,y,H,L,K){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function bA(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var pA=tl(function(t){return function(){return t}}),yh=pA;function AA(e){return e}var ZA=tl(AA),yA=ZA,fA=hA(function(t,i){var n={};return Zh(i.length,function(){var o=t.apply(this,arguments);return bA(o,n)||(n[o]=i.apply(this,arguments)),n[o]})}),GA=fA,VA=tl(function(t){var i=!1,n;return Zh(t.length,function(){return i||(i=!0,n=t.apply(this,arguments)),n})}),WA=VA;const BA=WA(function(){return Ha(()=>import("./vvd-fonts.css.50cf0e09.js"),[]).then(({style:{cssText:e}})=>{document.querySelectorAll("head").forEach(t=>{t.appendChild(function(){const i=document.createElement("style");return i.innerHTML=e,i}())})}).then(yh(!0))});var mr;(function(e){e.LIGHT="light",e.DARK="dark"})(mr||(mr={}));var xa;(function(e){e.SYNC_WITH_OS_SETTINGS="syncWithOsSettings"})(xa||(xa={}));const XA=e=>{switch(e){case mr.DARK:return Ha(()=>import("./scheme.dark.css.0b8f785a.js"),[]);case mr.LIGHT:default:return Ha(()=>import("./scheme.light.css.ea2c9855.js"),[])}},fh="vvd-scheme-style",RA=vA(fh);function vA(e){let t;const i=document.querySelectorAll(`.${e}`);return i.length?(console.error(`found ${i.length} scheme styles upon init while expected for 1, check your dependencies configuration`),t=i[0]):(t=document.createElement("style"),t.className=fh,document.head.appendChild(t)),t}async function Gh(e){const t=await XA(e),i=t==null?void 0:t.style;i&&(RA.innerHTML=i.cssText||"")}const Ya=window.matchMedia("(prefers-color-scheme: dark)");function Vh(){return Ya.matches?mr.DARK:mr.LIGHT}var Hl;class SA{constructor(){Hl.set(this,document.createDocumentFragment())}addEventListener(t,i,n){yo(this,Hl,"f").addEventListener(t,i,n)}dispatchEvent(t){yo(this,Hl,"f").dispatchEvent(t)}removeEventListener(t,i,n){yo(this,Hl,"f").removeEventListener(t,i,n)}}Hl=new WeakMap;function Wh(e){if(!e||!e.hasAttribute){console.error(`HTMLElement target expected, got '${e}'`);return}e.hasAttribute("autofocus")&&!document.body.matches(":focus-within")&&e.focus()}function wA(e,t){t.has("dense")&&e.dense&&e.enlarged&&(e.enlarged=!1),t.has("enlarged")&&e.enlarged&&e.dense&&(e.removeAttribute("dense"),e.dense=!1)}const Bh=new SA;let Qr;function FA(){return Qr}let jr;function HA(){return jr}function xA(){return mr.LIGHT}function YA(e=null){return e||jr||xA()}async function zu(){Gh(Vh())}function NA(e){let t;return e===xa.SYNC_WITH_OS_SETTINGS?(Ya.addListener(zu),t=Vh()):(Ya.removeListener(zu),t=e),t}let xc=null;async function MA(e=null){const t=YA(e);if(t===jr&&xc)return xc;jr=t;let i;const n=NA(jr);return n!==Qr?(Qr=n,i=Gh(Qr)):i=Promise.resolve(),xc=i.then(()=>(LA(Qr),{option:jr,scheme:Qr})),xc}function LA(e){const t=new CustomEvent("vvd-scheme-select",{detail:{scheme:e}});Bh.dispatchEvent(t)}var JA=Object.freeze({set:MA,eventBus:Bh,getSelectedScheme:FA,getSelectedSchemeOption:HA});const TA="data-vvd-context",Xh="none",Ku=["scheme"];let Na;const Uu=zA();Uu.autoInit?Na=Rh(Uu):Na=Promise.reject(`auto-init unavailable when '${Xh}' used`);Object.freeze({set:kA,settled:Na});async function kA(e){return KA(e),Rh(e)}async function Rh(e){const t=await Promise.all([BA(),JA.set(e.scheme)]);return Object.freeze({fonts:t[0],scheme:t[1]})}function zA(){const e={autoInit:!0},t=document.documentElement.getAttribute(TA);if(t===Xh)e.autoInit=!1;else if(t){const i=UA(t);Object.assign(e,i)}return e}function KA(e){const t=Object.keys(e).filter(i=>!Ku.includes(i));t.length&&console.warn(`unexpected configuration part/s '${t}',	only some of '${Ku}' expected`)}function UA(e){return e.trim().split(/\s+/).reduce((i,n)=>(/^theme:/.test(n)?i.scheme?console.error(`theme vivid context defined multiple times, only the first (${i.scheme}) will be effective`):i.scheme=n.replace(/^theme:/,""):console.warn(`unsupported token '${n}' in vivid context`),i),{})}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Eu=typeof window!="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,EA=(e,t,i=null,n=null)=>{for(;t!==i;){const o=t.nextSibling;e.insertBefore(t,n),t=o}},QI=(e,t,i=null)=>{for(;t!==i;){const n=t.nextSibling;e.removeChild(t),t=n}};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Cs=`{{lit-${String(Math.random()).slice(2)}}}`,vh=`<!--${Cs}-->`,Qu=new RegExp(`${Cs}|${vh}`),xl="$lit$";class Sh{constructor(t,i){this.parts=[],this.element=i;const n=[],o=[],l=document.createTreeWalker(i.content,133,null,!1);let I=0,m=-1,y=0;const{strings:H,values:{length:L}}=t;for(;y<L;){const K=l.nextNode();if(K===null){l.currentNode=o.pop();continue}if(m++,K.nodeType===1){if(K.hasAttributes()){const nt=K.attributes,{length:dt}=nt;let P=0;for(let rt=0;rt<dt;rt++)Du(nt[rt].name,xl)&&P++;for(;P-- >0;){const rt=H[y],Xt=Ma.exec(rt)[2],Wt=Xt.toLowerCase()+xl,xt=K.getAttribute(Wt);K.removeAttribute(Wt);const _=xt.split(Qu);this.parts.push({type:"attribute",index:m,name:Xt,strings:_}),y+=_.length-1}}K.tagName==="TEMPLATE"&&(o.push(K),l.currentNode=K.content)}else if(K.nodeType===3){const nt=K.data;if(nt.indexOf(Cs)>=0){const dt=K.parentNode,P=nt.split(Qu),rt=P.length-1;for(let Xt=0;Xt<rt;Xt++){let Wt,xt=P[Xt];if(xt==="")Wt=Xs();else{const _=Ma.exec(xt);_!==null&&Du(_[2],xl)&&(xt=xt.slice(0,_.index)+_[1]+_[2].slice(0,-xl.length)+_[3]),Wt=document.createTextNode(xt)}dt.insertBefore(Wt,K),this.parts.push({type:"node",index:++m})}P[rt]===""?(dt.insertBefore(Xs(),K),n.push(K)):K.data=P[rt],y+=rt}}else if(K.nodeType===8)if(K.data===Cs){const nt=K.parentNode;(K.previousSibling===null||m===I)&&(m++,nt.insertBefore(Xs(),K)),I=m,this.parts.push({type:"node",index:m}),K.nextSibling===null?K.data="":(n.push(K),m--),y++}else{let nt=-1;for(;(nt=K.data.indexOf(Cs,nt+1))!==-1;)this.parts.push({type:"node",index:-1}),y++}}for(const K of n)K.parentNode.removeChild(K)}}const Du=(e,t)=>{const i=e.length-t.length;return i>=0&&e.slice(i)===t},wh=e=>e.index!==-1,Xs=()=>document.createComment(""),Ma=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const DI=133;function Fh(e,t){const{element:{content:i},parts:n}=e,o=document.createTreeWalker(i,DI,null,!1);let l=Ml(n),I=n[l],m=-1,y=0;const H=[];let L=null;for(;o.nextNode();){m++;const K=o.currentNode;for(K.previousSibling===L&&(L=null),t.has(K)&&(H.push(K),L===null&&(L=K)),L!==null&&y++;I!==void 0&&I.index===m;)I.index=L!==null?-1:I.index-y,l=Ml(n,l),I=n[l]}H.forEach(K=>K.parentNode.removeChild(K))}const QA=e=>{let t=e.nodeType===11?0:1;const i=document.createTreeWalker(e,DI,null,!1);for(;i.nextNode();)t++;return t},Ml=(e,t=-1)=>{for(let i=t+1;i<e.length;i++){const n=e[i];if(wh(n))return i}return-1};function DA(e,t,i=null){const{element:{content:n},parts:o}=e;if(i==null){n.appendChild(t);return}const l=document.createTreeWalker(n,DI,null,!1);let I=Ml(o),m=0,y=-1;for(;l.nextNode();)for(y++,l.currentNode===i&&(m=QA(t),i.parentNode.insertBefore(t,i));I!==-1&&o[I].index===y;){if(m>0){for(;I!==-1;)o[I].index+=m,I=Ml(o,I);return}I=Ml(o,I)}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Hh=new WeakMap,ul=e=>(...t)=>{const i=e(...t);return Hh.set(i,!0),i},_l=e=>typeof e=="function"&&Hh.has(e);/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const So={},Eo={};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class La{constructor(t,i,n){this.__parts=[],this.template=t,this.processor=i,this.options=n}update(t){let i=0;for(const n of this.__parts)n!==void 0&&n.setValue(t[i]),i++;for(const n of this.__parts)n!==void 0&&n.commit()}_clone(){const t=Eu?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),i=[],n=this.template.parts,o=document.createTreeWalker(t,133,null,!1);let l=0,I=0,m,y=o.nextNode();for(;l<n.length;){if(m=n[l],!wh(m)){this.__parts.push(void 0),l++;continue}for(;I<m.index;)I++,y.nodeName==="TEMPLATE"&&(i.push(y),o.currentNode=y.content),(y=o.nextNode())===null&&(o.currentNode=i.pop(),y=o.nextNode());if(m.type==="node"){const H=this.processor.handleTextExpression(this.options);H.insertAfterNode(y.previousSibling),this.__parts.push(H)}else this.__parts.push(...this.processor.handleAttributeExpressions(y,m.name,m.strings,this.options));l++}return Eu&&(document.adoptNode(t),customElements.upgrade(t)),t}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Ou=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),OA=` ${Cs} `;class xh{constructor(t,i,n,o){this.strings=t,this.values=i,this.type=n,this.processor=o}getHTML(){const t=this.strings.length-1;let i="",n=!1;for(let o=0;o<t;o++){const l=this.strings[o],I=l.lastIndexOf("<!--");n=(I>-1||n)&&l.indexOf("-->",I+1)===-1;const m=Ma.exec(l);m===null?i+=l+(n?OA:vh):i+=l.substr(0,m.index)+m[1]+m[2]+xl+m[3]+Cs}return i+=this.strings[t],i}getTemplateElement(){const t=document.createElement("template");let i=this.getHTML();return Ou!==void 0&&(i=Ou.createHTML(i)),t.innerHTML=i,t}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Cc=e=>e===null||!(typeof e=="object"||typeof e=="function"),Ja=e=>Array.isArray(e)||!!(e&&e[Symbol.iterator]);class Yh{constructor(t,i,n){this.dirty=!0,this.element=t,this.name=i,this.strings=n,this.parts=[];for(let o=0;o<n.length-1;o++)this.parts[o]=this._createPart()}_createPart(){return new Br(this)}_getValue(){const t=this.strings,i=t.length-1,n=this.parts;if(i===1&&t[0]===""&&t[1]===""){const l=n[0].value;if(typeof l=="symbol")return String(l);if(typeof l=="string"||!Ja(l))return l}let o="";for(let l=0;l<i;l++){o+=t[l];const I=n[l];if(I!==void 0){const m=I.value;if(Cc(m)||!Ja(m))o+=typeof m=="string"?m:String(m);else for(const y of m)o+=typeof y=="string"?y:String(y)}}return o+=t[i],o}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Br{constructor(t){this.value=void 0,this.committer=t}setValue(t){t!==So&&(!Cc(t)||t!==this.value)&&(this.value=t,_l(t)||(this.committer.dirty=!0))}commit(){for(;_l(this.value);){const t=this.value;this.value=So,t(this)}this.value!==So&&this.committer.commit()}}class Xr{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(Xs()),this.endNode=t.appendChild(Xs())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=Xs()),t.__insert(this.endNode=Xs())}insertAfterPart(t){t.__insert(this.startNode=Xs()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(this.startNode.parentNode===null)return;for(;_l(this.__pendingValue);){const i=this.__pendingValue;this.__pendingValue=So,i(this)}const t=this.__pendingValue;t!==So&&(Cc(t)?t!==this.value&&this.__commitText(t):t instanceof xh?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):Ja(t)?this.__commitIterable(t):t===Eo?(this.value=Eo,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const i=this.startNode.nextSibling;t=t==null?"":t;const n=typeof t=="string"?t:String(t);i===this.endNode.previousSibling&&i.nodeType===3?i.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}__commitTemplateResult(t){const i=this.options.templateFactory(t);if(this.value instanceof La&&this.value.template===i)this.value.update(t.values);else{const n=new La(i,t.processor,this.options),o=n._clone();n.update(t.values),this.__commitNode(o),this.value=n}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const i=this.value;let n=0,o;for(const l of t)o=i[n],o===void 0&&(o=new Xr(this.options),i.push(o),n===0?o.appendIntoPart(this):o.insertAfterPart(i[n-1])),o.setValue(l),o.commit(),n++;n<i.length&&(i.length=n,this.clear(o&&o.endNode))}clear(t=this.startNode){QI(this.startNode.parentNode,t.nextSibling,this.endNode)}}class OI{constructor(t,i,n){if(this.value=void 0,this.__pendingValue=void 0,n.length!==2||n[0]!==""||n[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=i,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;_l(this.__pendingValue);){const i=this.__pendingValue;this.__pendingValue=So,i(this)}if(this.__pendingValue===So)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=So}}class jA extends Yh{constructor(t,i,n){super(t,i,n),this.single=n.length===2&&n[0]===""&&n[1]===""}_createPart(){return new ml(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class ml extends Br{}let Nh=!1;(()=>{try{const e={get capture(){return Nh=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{}})();class jI{constructor(t,i,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=i,this.eventContext=n,this.__boundHandleEvent=o=>this.handleEvent(o)}setValue(t){this.__pendingValue=t}commit(){for(;_l(this.__pendingValue);){const l=this.__pendingValue;this.__pendingValue=So,l(this)}if(this.__pendingValue===So)return;const t=this.__pendingValue,i=this.value,n=t==null||i!=null&&(t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive),o=t!=null&&(i==null||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),o&&(this.__options=_A(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=So}handleEvent(t){typeof this.value=="function"?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const _A=e=>e&&(Nh?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function PA(e){let t=Pl.get(e.type);t===void 0&&(t={stringsArray:new WeakMap,keyString:new Map},Pl.set(e.type,t));let i=t.stringsArray.get(e.strings);if(i!==void 0)return i;const n=e.strings.join(Cs);return i=t.keyString.get(n),i===void 0&&(i=new Sh(e,e.getTemplateElement()),t.keyString.set(n,i)),t.stringsArray.set(e.strings,i),i}const Pl=new Map;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const _r=new WeakMap,Zg=(e,t,i)=>{let n=_r.get(t);n===void 0&&(QI(t,t.firstChild),_r.set(t,n=new Xr(Object.assign({templateFactory:PA},i))),n.appendInto(t)),n.setValue(e),n.commit()};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class qA{handleAttributeExpressions(t,i,n,o){const l=i[0];return l==="."?new jA(t,i.slice(1),n).parts:l==="@"?[new jI(t,i.slice(1),o.eventContext)]:l==="?"?[new OI(t,i.slice(1),n)]:new Yh(t,i,n).parts}handleTextExpression(t){return new Xr(t)}}const $A=new qA;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const Lt=(e,...t)=>new xh(e,t,"html",$A);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Mh=(e,t)=>`${e}--${t}`;let yg=!0;typeof window.ShadyCSS=="undefined"?yg=!1:typeof window.ShadyCSS.prepareTemplateDom=="undefined"&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),yg=!1);const t1=e=>t=>{const i=Mh(t.type,e);let n=Pl.get(i);n===void 0&&(n={stringsArray:new WeakMap,keyString:new Map},Pl.set(i,n));let o=n.stringsArray.get(t.strings);if(o!==void 0)return o;const l=t.strings.join(Cs);if(o=n.keyString.get(l),o===void 0){const I=t.getTemplateElement();yg&&window.ShadyCSS.prepareTemplateDom(I,e),o=new Sh(t,I),n.keyString.set(l,o)}return n.stringsArray.set(t.strings,o),o},e1=["html","svg"],i1=e=>{e1.forEach(t=>{const i=Pl.get(Mh(t,e));i!==void 0&&i.keyString.forEach(n=>{const{element:{content:o}}=n,l=new Set;Array.from(o.querySelectorAll("style")).forEach(I=>{l.add(I)}),Fh(n,l)})})},Lh=new Set,n1=(e,t,i)=>{Lh.add(e);const n=i?i.element:document.createElement("template"),o=t.querySelectorAll("style"),{length:l}=o;if(l===0){window.ShadyCSS.prepareTemplateStyles(n,e);return}const I=document.createElement("style");for(let H=0;H<l;H++){const L=o[H];L.parentNode.removeChild(L),I.textContent+=L.textContent}i1(e);const m=n.content;i?DA(i,I,m.firstChild):m.insertBefore(I,m.firstChild),window.ShadyCSS.prepareTemplateStyles(n,e);const y=m.querySelector("style");if(window.ShadyCSS.nativeShadow&&y!==null)t.insertBefore(y.cloneNode(!0),t.firstChild);else if(i){m.insertBefore(I,m.firstChild);const H=new Set;H.add(I),Fh(i,H)}},o1=(e,t,i)=>{if(!i||typeof i!="object"||!i.scopeName)throw new Error("The `scopeName` option is required.");const n=i.scopeName,o=_r.has(t),l=yg&&t.nodeType===11&&!!t.host,I=l&&!Lh.has(n),m=I?document.createDocumentFragment():t;if(Zg(e,m,Object.assign({templateFactory:t1(n)},i)),I){const y=_r.get(m);_r.delete(m);const H=y.value instanceof La?y.value.template:void 0;n1(n,m,H),QI(t,t.firstChild),t.appendChild(m),_r.set(t,y)}!o&&l&&window.ShadyCSS.styleElement(t.host)};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */var Jh;window.JSCompiler_renameProperty=(e,t)=>e;const Ta={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return e!==null;case Number:return e===null?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},Th=(e,t)=>t!==e&&(t===t||e===e),qd={attribute:!0,type:String,converter:Ta,reflect:!1,hasChanged:Th},$d=1,ta=1<<2,ea=1<<3,ia=1<<4,ka="finalized";class kh extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((i,n)=>{const o=this._attributeNameForProperty(n,i);o!==void 0&&(this._attributeToPropertyMap.set(o,n),t.push(o))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;t!==void 0&&t.forEach((i,n)=>this._classProperties.set(n,i))}}static createProperty(t,i=qd){if(this._ensureClassProperties(),this._classProperties.set(t,i),i.noAccessor||this.prototype.hasOwnProperty(t))return;const n=typeof t=="symbol"?Symbol():`__${t}`,o=this.getPropertyDescriptor(t,n,i);o!==void 0&&Object.defineProperty(this.prototype,t,o)}static getPropertyDescriptor(t,i,n){return{get(){return this[i]},set(o){const l=this[t];this[i]=o,this.requestUpdateInternal(t,l,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||qd}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty(ka)||t.finalize(),this[ka]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const i=this.properties,n=[...Object.getOwnPropertyNames(i),...typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(i):[]];for(const o of n)this.createProperty(o,i[o])}}static _attributeNameForProperty(t,i){const n=i.attribute;return n===!1?void 0:typeof n=="string"?n:typeof t=="string"?t.toLowerCase():void 0}static _valueHasChanged(t,i,n=Th){return n(t,i)}static _propertyValueFromAttribute(t,i){const n=i.type,o=i.converter||Ta,l=typeof o=="function"?o:o.fromAttribute;return l?l(t,n):t}static _propertyValueToAttribute(t,i){if(i.reflect===void 0)return;const n=i.type,o=i.converter;return(o&&o.toAttribute||Ta.toAttribute)(t,n)}initialize(){this._updateState=0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,i)=>{if(this.hasOwnProperty(i)){const n=this[i];delete this[i],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(i,n)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,i)=>this[i]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,i,n){i!==n&&this._attributeToProperty(t,n)}_propertyToAttribute(t,i,n=qd){const o=this.constructor,l=o._attributeNameForProperty(t,n);if(l!==void 0){const I=o._propertyValueToAttribute(i,n);if(I===void 0)return;this._updateState=this._updateState|ea,I==null?this.removeAttribute(l):this.setAttribute(l,I),this._updateState=this._updateState&~ea}}_attributeToProperty(t,i){if(this._updateState&ea)return;const n=this.constructor,o=n._attributeToPropertyMap.get(t);if(o!==void 0){const l=n.getPropertyOptions(o);this._updateState=this._updateState|ia,this[o]=n._propertyValueFromAttribute(i,l),this._updateState=this._updateState&~ia}}requestUpdateInternal(t,i,n){let o=!0;if(t!==void 0){const l=this.constructor;n=n||l.getPropertyOptions(t),l._valueHasChanged(this[t],i,n.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,i),n.reflect===!0&&!(this._updateState&ia)&&(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,n))):o=!1}!this._hasRequestedUpdate&&o&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,i){return this.requestUpdateInternal(t,i),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|ta;try{await this._updatePromise}catch{}const t=this.performUpdate();return t!=null&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&ta}get hasUpdated(){return this._updateState&$d}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const i=this._changedProperties;try{t=this.shouldUpdate(i),t?this.update(i):this._markUpdated()}catch(n){throw t=!1,this._markUpdated(),n}t&&(this._updateState&$d||(this._updateState=this._updateState|$d,this.firstUpdated(i)),this.updated(i))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~ta}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((i,n)=>this._propertyToAttribute(n,this[n],i)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}Jh=ka;kh[Jh]=!0;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const s1=(e,t)=>(window.customElements.define(e,t),t),r1=(e,t)=>{const{kind:i,elements:n}=t;return{kind:i,elements:n,finisher(o){window.customElements.define(e,o)}}},Yi=e=>t=>typeof t=="function"?s1(e,t):r1(e,t),l1=(e,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(i){i.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}},c1=(e,t,i)=>{t.constructor.createProperty(i,e)};function ct(e){return(t,i)=>i!==void 0?c1(e,t,i):l1(e,t)}function g1(e){return ct({attribute:!1,hasChanged:e==null?void 0:e.hasChanged})}const Ri=e=>g1(e);function vi(e,t){return(i,n)=>{const o={get(){return this.renderRoot.querySelector(e)},enumerable:!0,configurable:!0};if(t){const l=n!==void 0?n:i.key,I=typeof l=="symbol"?Symbol():`__${l}`;o.get=function(){return this[I]===void 0&&(this[I]=this.renderRoot.querySelector(e)),this[I]}}return n!==void 0?_I(o,i,n):PI(o,i)}}function Id(e){return(t,i)=>{const n={async get(){return await this.updateComplete,this.renderRoot.querySelector(e)},enumerable:!0,configurable:!0};return i!==void 0?_I(n,t,i):PI(n,t)}}const _I=(e,t,i)=>{Object.defineProperty(t,i,e)},PI=(e,t)=>({kind:"method",placement:"prototype",key:t.key,descriptor:e}),d1=(e,t)=>Object.assign(Object.assign({},t),{finisher(i){Object.assign(i.prototype[t.key],e)}}),a1=(e,t,i)=>{Object.assign(t[i],e)};function hl(e){return(t,i)=>i!==void 0?a1(e,t,i):d1(e,t)}const ju=Element.prototype,I1=ju.msMatchesSelector||ju.webkitMatchesSelector;function zh(e="",t=!1,i=""){return(n,o)=>{const l={get(){const I=`slot${e?`[name=${e}]`:":not([name])"}`,m=this.renderRoot.querySelector(I);let y=m&&m.assignedNodes({flatten:t});return y&&i&&(y=y.filter(H=>H.nodeType===Node.ELEMENT_NODE&&(H.matches?H.matches(i):I1.call(H,i)))),y},enumerable:!0,configurable:!0};return o!==void 0?_I(l,n,o):PI(l,n)}}/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const za=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,qI=Symbol();class $I{constructor(t,i){if(i!==qI)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return this._styleSheet===void 0&&(za?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const C1=e=>new $I(String(e),qI),u1=e=>{if(e instanceof $I)return e.cssText;if(typeof e=="number")return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but
            take care to ensure page security.`)},bi=(e,...t)=>{const i=t.reduce((n,o,l)=>n+u1(o)+e[l+1],e[0]);return new $I(i,qI)};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const _u={};class jn extends kh{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const i=(l,I)=>l.reduceRight((m,y)=>Array.isArray(y)?i(y,m):(m.add(y),m),I),n=i(t,new Set),o=[];n.forEach(l=>o.unshift(l)),this._styles=o}else this._styles=t===void 0?[]:[t];this._styles=this._styles.map(i=>{if(i instanceof CSSStyleSheet&&!za){const n=Array.prototype.slice.call(i.cssRules).reduce((o,l)=>o+l.cssText,"");return C1(n)}return i})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const t=this.constructor._styles;t.length!==0&&(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow?window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(i=>i.cssText),this.localName):za?this.renderRoot.adoptedStyleSheets=t.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet):this._needsShimAdoptedStyleSheets=!0)}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(t){const i=this.render();super.update(t),i!==_u&&this.constructor.render(i,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(n=>{const o=document.createElement("style");o.textContent=n.cssText,this.renderRoot.appendChild(o)}))}render(){return _u}}jn.finalized=!0;jn.render=o1;jn.shadowRootOptions={mode:"open"};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pi=e=>(t,i)=>{if(t.constructor._observers){if(!t.constructor.hasOwnProperty("_observers")){const n=t.constructor._observers;t.constructor._observers=new Map,n.forEach((o,l)=>t.constructor._observers.set(l,o))}}else{t.constructor._observers=new Map;const n=t.updated;t.updated=function(o){n.call(this,o),o.forEach((l,I)=>{const y=this.constructor._observers.get(I);y!==void 0&&y.call(this,this[I],l)})}}t.constructor._observers.set(i,e)};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var m1={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},sg={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},Kh={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Yo=function(){function e(t){t===void 0&&(t={}),this.adapter=t}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var h1=function(e){xo(t,e);function t(i){return e.call(this,on(on({},t.defaultAdapter),i))||this}return Object.defineProperty(t,"strings",{get:function(){return Kh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return m1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return sg},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!1,configurable:!0}),t.prototype.handleTargetScroll=function(){},t.prototype.handleWindowResize=function(){},t.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},t}(Yo);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Yc=0,b1=function(e){xo(t,e);function t(i){var n=e.call(this,i)||this;return n.wasDocked=!0,n.isDockedShowing=!0,n.currentAppBarOffsetTop=0,n.isCurrentlyBeingResized=!1,n.resizeThrottleId=Yc,n.resizeDebounceId=Yc,n.lastScrollPosition=n.adapter.getViewportScrollY(),n.topAppBarHeight=n.adapter.getTopAppBarHeight(),n}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.adapter.setStyle("top","")},t.prototype.handleTargetScroll=function(){var i=Math.max(this.adapter.getViewportScrollY(),0),n=i-this.lastScrollPosition;this.lastScrollPosition=i,this.isCurrentlyBeingResized||(this.currentAppBarOffsetTop-=n,this.currentAppBarOffsetTop>0?this.currentAppBarOffsetTop=0:Math.abs(this.currentAppBarOffsetTop)>this.topAppBarHeight&&(this.currentAppBarOffsetTop=-this.topAppBarHeight),this.moveTopAppBar())},t.prototype.handleWindowResize=function(){var i=this;this.resizeThrottleId||(this.resizeThrottleId=setTimeout(function(){i.resizeThrottleId=Yc,i.throttledResizeHandler()},sg.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized=!0,this.resizeDebounceId&&clearTimeout(this.resizeDebounceId),this.resizeDebounceId=setTimeout(function(){i.handleTargetScroll(),i.isCurrentlyBeingResized=!1,i.resizeDebounceId=Yc},sg.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},t.prototype.checkForUpdate=function(){var i=-this.topAppBarHeight,n=this.currentAppBarOffsetTop<0,o=this.currentAppBarOffsetTop>i,l=n&&o;if(l)this.wasDocked=!1;else if(this.wasDocked){if(this.isDockedShowing!==o)return this.isDockedShowing=o,!0}else return this.wasDocked=!0,!0;return l},t.prototype.moveTopAppBar=function(){if(this.checkForUpdate()){var i=this.currentAppBarOffsetTop;Math.abs(i)>=this.topAppBarHeight&&(i=-sg.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",i+"px")}},t.prototype.throttledResizeHandler=function(){var i=this.adapter.getTopAppBarHeight();this.topAppBarHeight!==i&&(this.wasDocked=!1,this.currentAppBarOffsetTop-=this.topAppBarHeight-i,this.topAppBarHeight=i),this.handleTargetScroll()},t}(h1),p1=b1;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uh=e=>e.nodeType===Node.ELEMENT_NODE;function uc(e){return{addClass:t=>{e.classList.add(t)},removeClass:t=>{e.classList.remove(t)},hasClass:t=>e.classList.contains(t)}}let Eh=!1;const Qh=()=>{},A1={get passive(){return Eh=!0,!1}};document.addEventListener("x",Qh,A1);document.removeEventListener("x",Qh);const Z1=Eh,tC=(e=window.document)=>{let t=e.activeElement;const i=[];if(!t)return i;for(;t&&(i.push(t),t.shadowRoot);)t=t.shadowRoot.activeElement;return i},Dh=e=>{const t=tC();if(!t.length)return!1;const i=t[t.length-1],n=new Event("check-if-focused",{bubbles:!0,composed:!0});let o=[];const l=I=>{o=I.composedPath()};return document.body.addEventListener("check-if-focused",l),i.dispatchEvent(n),document.body.removeEventListener("check-if-focused",l),o.indexOf(e)!==-1};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ks extends jn{click(){if(this.mdcRoot){this.mdcRoot.focus(),this.mdcRoot.click();return}super.click()}createFoundation(){this.mdcFoundation!==void 0&&this.mdcFoundation.destroy(),this.mdcFoundationClass&&(this.mdcFoundation=new this.mdcFoundationClass(this.createAdapter()),this.mdcFoundation.init())}firstUpdated(){this.createFoundation()}}/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class y1{constructor(t){this.classes=new Set,this.changed=!1,this.element=t;const i=(t.getAttribute("class")||"").split(/\s+/);for(const n of i)this.classes.add(n)}add(t){this.classes.add(t),this.changed=!0}remove(t){this.classes.delete(t),this.changed=!0}commit(){if(this.changed){let t="";this.classes.forEach(i=>t+=i+" "),this.element.setAttribute("class",t)}}}const Pu=new WeakMap,In=ul(e=>t=>{if(!(t instanceof Br)||t instanceof ml||t.committer.name!=="class"||t.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:i}=t,{element:n}=i;let o=Pu.get(t);o===void 0&&(n.setAttribute("class",i.strings.join(" ")),Pu.set(t,o=new Set));const l=n.classList||new y1(n);o.forEach(I=>{I in e||(l.remove(I),o.delete(I))});for(const I in e){const m=e[I];m!=o.has(I)&&(m?(l.add(I),o.add(I)):(l.remove(I),o.delete(I)))}typeof l.commit=="function"&&l.commit()}),Oh=Z1?{passive:!0}:void 0;class mc extends Ks{constructor(){super(...arguments),this.centerTitle=!1,this.handleTargetScroll=()=>{this.mdcFoundation.handleTargetScroll()},this.handleNavigationClick=()=>{this.mdcFoundation.handleNavigationClick()}}get scrollTarget(){return this._scrollTarget||window}set scrollTarget(t){this.unregisterScrollListener();const i=this.scrollTarget;this._scrollTarget=t,this.updateRootPosition(),this.requestUpdate("scrollTarget",i),this.registerScrollListener()}updateRootPosition(){if(this.mdcRoot){const t=this.scrollTarget===window;this.mdcRoot.style.position=t?"":"absolute"}}render(){let t=Lt`<span class="mdc-top-app-bar__title"><slot name="title"></slot></span>`;return this.centerTitle&&(t=Lt`<section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-center">${t}</section>`),Lt`
      <header class="mdc-top-app-bar ${In(this.barClasses())}">
      <div class="mdc-top-app-bar__row">
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start" id="navigation">
          <slot name="navigationIcon"
            @click=${this.handleNavigationClick}></slot>
          ${this.centerTitle?null:t}
        </section>
        ${this.centerTitle?t:null}
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" id="actions" role="toolbar">
          <slot name="actionItems"></slot>
        </section>
      </div>
    </header>
    <div class="${In(this.contentClasses())}">
      <slot></slot>
    </div>
    `}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{setStyle:(t,i)=>this.mdcRoot.style.setProperty(t,i),getTopAppBarHeight:()=>this.mdcRoot.clientHeight,notifyNavigationIconClicked:()=>{this.dispatchEvent(new Event(Kh.NAVIGATION_EVENT,{bubbles:!0,cancelable:!0}))},getViewportScrollY:()=>this.scrollTarget instanceof Window?this.scrollTarget.pageYOffset:this.scrollTarget.scrollTop,getTotalActionItems:()=>this._actionItemsSlot.assignedNodes({flatten:!0}).length})}registerListeners(){this.registerScrollListener()}unregisterListeners(){this.unregisterScrollListener()}registerScrollListener(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,Oh)}unregisterScrollListener(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}firstUpdated(){super.firstUpdated(),this.updateRootPosition(),this.registerListeners()}disconnectedCallback(){super.disconnectedCallback(),this.unregisterListeners()}}z([vi(".mdc-top-app-bar")],mc.prototype,"mdcRoot",void 0);z([vi('slot[name="actionItems"]')],mc.prototype,"_actionItemsSlot",void 0);z([ct({type:Boolean})],mc.prototype,"centerTitle",void 0);z([ct({type:Object})],mc.prototype,"scrollTarget",null);class eC extends mc{constructor(){super(...arguments),this.mdcFoundationClass=p1,this.prominent=!1,this.dense=!1,this.handleResize=()=>{this.mdcFoundation.handleWindowResize()}}barClasses(){return{"mdc-top-app-bar--dense":this.dense,"mdc-top-app-bar--prominent":this.prominent,"center-title":this.centerTitle}}contentClasses(){return{"mdc-top-app-bar--fixed-adjust":!this.dense&&!this.prominent,"mdc-top-app-bar--dense-fixed-adjust":this.dense&&!this.prominent,"mdc-top-app-bar--prominent-fixed-adjust":!this.dense&&this.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":this.dense&&this.prominent}}registerListeners(){super.registerListeners(),window.addEventListener("resize",this.handleResize,Oh)}unregisterListeners(){super.unregisterListeners(),window.removeEventListener("resize",this.handleResize)}}z([ct({type:Boolean,reflect:!0})],eC.prototype,"prominent",void 0);z([ct({type:Boolean,reflect:!0})],eC.prototype,"dense",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const f1=bi`.mdc-top-app-bar{background-color:#6200ee;background-color:var(--mdc-theme-primary, #6200ee);color:white;display:flex;position:fixed;flex-direction:column;justify-content:space-between;box-sizing:border-box;width:100%;z-index:4}.mdc-top-app-bar .mdc-top-app-bar__action-item,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon{color:#fff;color:var(--mdc-theme-on-primary, #fff)}.mdc-top-app-bar .mdc-top-app-bar__action-item::before,.mdc-top-app-bar .mdc-top-app-bar__action-item::after,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon::after{background-color:#fff;background-color:var(--mdc-ripple-color, var(--mdc-theme-on-primary, #fff))}.mdc-top-app-bar .mdc-top-app-bar__action-item:hover::before,.mdc-top-app-bar .mdc-top-app-bar__action-item.mdc-ripple-surface--hover::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon:hover::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon.mdc-ripple-surface--hover::before{opacity:0.08;opacity:var(--mdc-ripple-hover-opacity, 0.08)}.mdc-top-app-bar .mdc-top-app-bar__action-item.mdc-ripple-upgraded--background-focused::before,.mdc-top-app-bar .mdc-top-app-bar__action-item:not(.mdc-ripple-upgraded):focus::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon.mdc-ripple-upgraded--background-focused::before,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-top-app-bar .mdc-top-app-bar__action-item:not(.mdc-ripple-upgraded)::after,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-top-app-bar .mdc-top-app-bar__action-item:not(.mdc-ripple-upgraded):active::after,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-top-app-bar .mdc-top-app-bar__action-item.mdc-ripple-upgraded,.mdc-top-app-bar .mdc-top-app-bar__navigation-icon.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-top-app-bar__row{display:flex;position:relative;box-sizing:border-box;width:100%;height:64px}.mdc-top-app-bar__section{display:inline-flex;flex:1 1 auto;align-items:center;min-width:0;padding:8px 12px;z-index:1}.mdc-top-app-bar__section--align-start{justify-content:flex-start;order:-1}.mdc-top-app-bar__section--align-end{justify-content:flex-end;order:1}.mdc-top-app-bar__title{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-headline6-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1.25rem;font-size:var(--mdc-typography-headline6-font-size, 1.25rem);line-height:2rem;line-height:var(--mdc-typography-headline6-line-height, 2rem);font-weight:500;font-weight:var(--mdc-typography-headline6-font-weight, 500);letter-spacing:0.0125em;letter-spacing:var(--mdc-typography-headline6-letter-spacing, 0.0125em);text-decoration:inherit;text-decoration:var(--mdc-typography-headline6-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-headline6-text-transform, inherit);padding-left:20px;padding-right:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;z-index:1}[dir=rtl] .mdc-top-app-bar__title,.mdc-top-app-bar__title[dir=rtl]{padding-left:0;padding-right:20px}.mdc-top-app-bar--short-collapsed{border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:24px;border-bottom-left-radius:0}[dir=rtl] .mdc-top-app-bar--short-collapsed,.mdc-top-app-bar--short-collapsed[dir=rtl]{border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:24px}.mdc-top-app-bar--short{top:0;right:auto;left:0;width:100%;transition:width 250ms cubic-bezier(0.4, 0, 0.2, 1)}[dir=rtl] .mdc-top-app-bar--short,.mdc-top-app-bar--short[dir=rtl]{right:0;left:auto}.mdc-top-app-bar--short .mdc-top-app-bar__row{height:56px}.mdc-top-app-bar--short .mdc-top-app-bar__section{padding:4px}.mdc-top-app-bar--short .mdc-top-app-bar__title{transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.mdc-top-app-bar--short-collapsed{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0,0,0,.12);width:56px;transition:width 300ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar--short-collapsed .mdc-top-app-bar__title{display:none}.mdc-top-app-bar--short-collapsed .mdc-top-app-bar__action-item{transition:padding 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar--short-collapsed.mdc-top-app-bar--short-has-action-item{width:112px}.mdc-top-app-bar--short-collapsed.mdc-top-app-bar--short-has-action-item .mdc-top-app-bar__section--align-end{padding-left:0;padding-right:12px}[dir=rtl] .mdc-top-app-bar--short-collapsed.mdc-top-app-bar--short-has-action-item .mdc-top-app-bar__section--align-end,.mdc-top-app-bar--short-collapsed.mdc-top-app-bar--short-has-action-item .mdc-top-app-bar__section--align-end[dir=rtl]{padding-left:12px;padding-right:0}.mdc-top-app-bar--dense .mdc-top-app-bar__row{height:48px}.mdc-top-app-bar--dense .mdc-top-app-bar__section{padding:0 4px}.mdc-top-app-bar--dense .mdc-top-app-bar__title{padding-left:12px;padding-right:0}[dir=rtl] .mdc-top-app-bar--dense .mdc-top-app-bar__title,.mdc-top-app-bar--dense .mdc-top-app-bar__title[dir=rtl]{padding-left:0;padding-right:12px}.mdc-top-app-bar--prominent .mdc-top-app-bar__row{height:128px}.mdc-top-app-bar--prominent .mdc-top-app-bar__title{align-self:flex-end;padding-bottom:2px}.mdc-top-app-bar--prominent .mdc-top-app-bar__action-item,.mdc-top-app-bar--prominent .mdc-top-app-bar__navigation-icon{align-self:flex-start}.mdc-top-app-bar--fixed{transition:box-shadow 200ms linear}.mdc-top-app-bar--fixed-scrolled{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0,0,0,.12);transition:box-shadow 200ms linear}.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__row{height:96px}.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__section{padding:0 12px}.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__title{padding-left:20px;padding-right:0;padding-bottom:9px}[dir=rtl] .mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__title,.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__title[dir=rtl]{padding-left:0;padding-right:20px}.mdc-top-app-bar--fixed-adjust{padding-top:64px}.mdc-top-app-bar--dense-fixed-adjust{padding-top:48px}.mdc-top-app-bar--short-fixed-adjust{padding-top:56px}.mdc-top-app-bar--prominent-fixed-adjust{padding-top:128px}.mdc-top-app-bar--dense-prominent-fixed-adjust{padding-top:96px}@media(max-width: 599px){.mdc-top-app-bar__row{height:56px}.mdc-top-app-bar__section{padding:4px}.mdc-top-app-bar--short{transition:width 200ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar--short-collapsed{transition:width 250ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar--short-collapsed .mdc-top-app-bar__section--align-end{padding-left:0;padding-right:12px}[dir=rtl] .mdc-top-app-bar--short-collapsed .mdc-top-app-bar__section--align-end,.mdc-top-app-bar--short-collapsed .mdc-top-app-bar__section--align-end[dir=rtl]{padding-left:12px;padding-right:0}.mdc-top-app-bar--prominent .mdc-top-app-bar__title{padding-bottom:6px}.mdc-top-app-bar--fixed-adjust{padding-top:56px}}:host{display:block}.mdc-top-app-bar{color:#fff;color:var(--mdc-theme-on-primary, #fff);width:100%;width:var(--mdc-top-app-bar-width, 100%)}.mdc-top-app-bar--prominent #navigation ::slotted(*),.mdc-top-app-bar--prominent #actions ::slotted(*){align-self:flex-start}#navigation ::slotted(*),#actions ::slotted(*){--mdc-icon-button-ripple-opacity: 0.24}.mdc-top-app-bar--short-collapsed #actions ::slotted(*){transition:padding 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-top-app-bar__section--align-center{justify-content:center}.mdc-top-app-bar__section--align-center .mdc-top-app-bar__title{padding-left:0;padding-right:0}.center-title .mdc-top-app-bar__section--align-start,.center-title .mdc-top-app-bar__section--align-end{flex-basis:0}.mdc-top-app-bar--dense.mdc-top-app-bar--prominent .mdc-top-app-bar__section--align-center .mdc-top-app-bar__title{padding-left:0;padding-right:0}.mdc-top-app-bar--fixed-scrolled{box-shadow:var(--mdc-top-app-bar-fixed-box-shadow, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}`,G1=bi`.mdc-top-app-bar{--mdc-theme-primary: var(--vvd-color-canvas);--mdc-theme-on-primary: var(--vvd-color-on-canvas);--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 20px;--vvd-typography-font-stretch: 75%;--vvd-typography-font-weight: 500;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 28px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-headline6-font-family: var(--vvd-typography-font-family);--mdc-typography-headline6-font-size: var(--vvd-typography-font-size);--mdc-typography-headline6-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-headline6-font-weight: var(--vvd-typography-font-weight);--mdc-typography-headline6-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-headline6-line-height: var(--vvd-typography-line-height);--mdc-typography-headline6-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-headline6-text-transform: var(--vvd-typography-text-transform)}.mdc-top-app-bar--fixed{transition:filter 200ms linear 0s}.mdc-top-app-bar--fixed-scrolled{box-shadow:unset;filter:var(--vvd-shadow-surface-4dp)}`;let fg=class extends eC{constructor(){super(...arguments),this.alternate=!1}};fg.styles=[f1,G1];z([ct({type:Boolean}),pi(function(e){e?this.mdcRoot.setAttribute("part","vvd-scheme-alternate"):this.mdcRoot.removeAttribute("part")})],fg.prototype,"alternate",void 0);fg=z([Yi("vwc-top-app-bar")],fg);var Rs;(function(e){e.Primary="primary",e.CTA="cta",e.Success="success",e.Alert="alert",e.Warning="warning",e.Info="info",e.Announcement="announcement"})(Rs||(Rs={}));var qu;(function(e){e.Pacific="pacific"})(qu||(qu={}));var $u;(function(e){e.Rounded="rounded",e.Pill="pill",e.Circled="circled"})($u||($u={}));var Gg;(function(e){e.xxx_Small="xxxs",e.xx_Small="xxs",e.x_Small="xs",e.Small="sm",e.Medium="md",e.Large="lg",e.x_Large="xl",e.xx_Large="xxl",e.xxx_Large="xxxl"})(Gg||(Gg={}));var t0;(function(e){e.Text="text",e.Filled="filled",e.Outlined="outlined",e.Soft="soft",e.Ghost="ghost"})(t0||(t0={}));var e0;(function(e){e.Small="small",e.Medium="medium",e.Large="large"})(e0||(e0={}));var ls;(function(e){e.Top="TOP",e.Bottom="BOTTOM",e.Start="START",e.Center="CENTER",e.End="END"})(ls||(ls={}));var Ka;(function(e){e.Status="status",e.Alert="alert"})(Ka||(Ka={}));var Ua;(function(e){e.Polite="polite",e.Assertive="assertive"})(Ua||(Ua={}));const V1=bi`.layout{display:grid;grid-auto-rows:min-content}.layout.layout-column-basis-sm{grid-template-columns:var(--layout-grid-template-columns, repeat(var(--layout-auto-sizing), minmax(10rem, 1fr)))}.layout:not(.layout-column-basis-sm):not(.layout-column-basis-md):not(.layout-column-basis-lg):not(.layout-column-basis-block),.layout.layout-column-basis-md{grid-template-columns:var(--layout-grid-template-columns, repeat(var(--layout-auto-sizing), minmax(20rem, 1fr)))}.layout.layout-column-basis-lg{grid-template-columns:var(--layout-grid-template-columns, repeat(var(--layout-auto-sizing), minmax(30rem, 1fr)))}.layout.layout-column-basis-block{grid-template-columns:var(--layout-grid-template-columns, repeat(var(--layout-auto-sizing), minmax(1fr, 1fr)))}.layout.layout-column-spacing-xs{gap:16px}.layout:not(.layout-column-spacing-xs):not(.layout-column-spacing-md):not(.layout-column-spacing-xl),.layout.layout-column-spacing-md{gap:24px}.layout.layout-column-spacing-xl{gap:32px}.layout.layout-gutters-xs{margin:16px}.layout.layout-gutters-md{margin:24px}.layout.layout-gutters-xl{margin:32px}.layout.layout-auto-sizing-fill{--layout-auto-sizing:auto-fill}.layout:not(.layout-auto-sizing-fill):not(.layout-auto-sizing-fit),.layout.layout-auto-sizing-fit{--layout-auto-sizing:auto-fit}`;var i0;(function(e){e.Fit="fit",e.Fill="fill"})(i0||(i0={}));let hr=class extends jn{constructor(){super(...arguments),this.columnBasis=Gg.Small,this.columnSpacing=Gg.Medium}getRenderClasses(){return{[`layout-column-basis-${this.columnBasis}`]:!!this.columnBasis,[`layout-gutters-${this.gutters}`]:!!this.gutters,[`layout-column-spacing-${this.columnSpacing}`]:!!this.columnSpacing,[`layout-auto-sizing-${this.autoSizing}`]:!!this.autoSizing}}render(){return Lt`<div class="layout ${In(this.getRenderClasses())}">
			<slot></slot>
		</div>`}};hr.styles=V1;z([ct({type:String,reflect:!0,attribute:"gutters"})],hr.prototype,"gutters",void 0);z([ct({type:String,reflect:!0,attribute:"column-basis"})],hr.prototype,"columnBasis",void 0);z([ct({type:String,reflect:!0,attribute:"column-spacing"})],hr.prototype,"columnSpacing",void 0);z([ct({type:String,reflect:!0,attribute:"auto-sizing"})],hr.prototype,"autoSizing",void 0);hr=z([Yi("vwc-layout")],hr);class Cd extends jn{constructor(){super(...arguments),this.tight=!1}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation,[`font-face-${this.fontFace}`]:!!this.fontFace,tight:this.tight}}render(){return Lt`<slot class="vwc-text ${In(this.getRenderClasses())}"></slot>`}}z([ct({type:String,reflect:!0,attribute:"font-face"})],Cd.prototype,"fontFace",void 0);z([ct({type:String,reflect:!0})],Cd.prototype,"connotation",void 0);z([ct({type:Boolean,reflect:!0})],Cd.prototype,"tight",void 0);const W1=bi`.vwc-text{font:400 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;color:var(--connotation)}.vwc-text.connotation-primary,.vwc-text:not(.connotation-cta):not(.connotation-announcement):not(.connotation-info):not(.connotation-success):not(.connotation-alert){--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary)}.vwc-text.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta)}.vwc-text.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement)}.vwc-text.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info)}.vwc-text.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}.vwc-text.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}.vwc-text.font-face-body-1{font:400 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-1-bold{font:600 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-1-code{font:400 ultra-condensed 16px / 24px SpeziaMonoWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-1-link{font:400 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:underline;text-transform:none}.vwc-text.font-face-body-2{font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-2-bold{font:600 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-2-code{font:400 ultra-condensed 14px / 20px SpeziaMonoWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-body-2-link{font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:underline;text-transform:none}.vwc-text.font-face-button{font:600 ultra-condensed 14px / 100% SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-button-dense{font:600 ultra-condensed 12px / 100% SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-button-enlarge{font:600 ultra-condensed 16px / 100% SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-caption{font:400 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-caption-bold{font:600 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-caption-code{font:400 ultra-condensed 12px / 16px SpeziaMonoWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-caption-link{font:400 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:underline;text-transform:none}.vwc-text.font-face-headline-1{font:500 condensed 66px / 88px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-headline-2{font:500 condensed 52px / 68px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-subtitle-1{font:500 condensed 26px / 36px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-subtitle-2{font:500 condensed 20px / 28px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-title-1{font:500 condensed 40px / 52px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-title-2{font:500 condensed 32px / 44px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-text.font-face-headline-1,.vwc-text.font-face-headline-2{--font-face-margin: 2.5rem 0}.vwc-text.font-face-title-1,.vwc-text.font-face-title-2{--font-face-margin: 2rem 0}.vwc-text.font-face-subtitle-1,.vwc-text.font-face-subtitle-2{--font-face-margin: 1.5rem 0}.vwc-text.font-face-body-1,.vwc-text.font-face-body-2{--font-face-margin: 1rem 0}.vwc-text:not(.tight):where(.font-face-headline-1, .font-face-headline-2, .font-face-title-1, .font-face-title-2, .font-face-subtitle-1, .font-face-subtitle-2, .font-face-body-1, .font-face-body-2){display:block;margin:var(--font-face-margin, 0)}::slotted(:where(h1, h2, h3, h4, h5, h6, p)){margin:initial}::slotted(*){color:inherit;font:inherit}`;let Ea=class extends Cd{};Ea.styles=W1;Ea=z([Yi("vwc-text")],Ea);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const n0=new WeakMap,B1=window.navigator.userAgent.indexOf("Trident/")>0,o0=ul(e=>t=>{if(!(t instanceof Xr))throw new Error("unsafeSVG can only be used in text bindings");const i=n0.get(t);if(i!==void 0&&Cc(e)&&e===i.value&&t.value===i.fragment)return;const n=document.createElement("template"),o=n.content;let l;B1?(n.innerHTML=`<svg>${e}</svg>`,l=o.firstChild):(l=document.createElementNS("http://www.w3.org/2000/svg","svg"),o.appendChild(l),l.innerHTML=e),o.removeChild(l),EA(o,l.firstChild);const I=document.importNode(o,!0);t.setValue(I),n0.set(t,{value:e,fragment:I})});/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const s0=new WeakMap,r0=2147483647,X1=ul((...e)=>t=>{let i=s0.get(t);i===void 0&&(i={lastRenderedIndex:r0,values:[]},s0.set(t,i));const n=i.values;let o=n.length;i.values=e;for(let l=0;l<e.length&&!(l>i.lastRenderedIndex);l++){const I=e[l];if(Cc(I)||typeof I.then!="function"){t.setValue(I),i.lastRenderedIndex=l;break}l<o&&I===n[l]||(i.lastRenderedIndex=r0,o=0,Promise.resolve(I).then(m=>{const y=i.values.indexOf(I);y>-1&&y<i.lastRenderedIndex&&(i.lastRenderedIndex=y,t.setValue(m),t.commit())}))}});/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const na=new WeakMap,Oo=ul(e=>t=>{const i=na.get(t);if(e===void 0&&t instanceof Br){if(i!==void 0||!na.has(t)){const n=t.committer.name;t.committer.element.removeAttribute(n)}}else e!==i&&t.setValue(e);na.set(t,e)});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R1(e,t,i){const n=e.constructor;if(!i){const m=`__${t}`;if(i=n.getPropertyDescriptor(t,m),!i)throw new Error("@ariaProperty must be used after a @property decorator")}const o=i;let l="";if(!o.set)throw new Error(`@ariaProperty requires a setter for ${t}`);const I={configurable:!0,enumerable:!0,set(m){l===""&&(l=n.getPropertyOptions(t).attribute),this.hasAttribute(l)&&this.removeAttribute(l),o.set.call(this,m)}};return o.get&&(I.get=function(){return o.get.call(this)}),I}function hc(e,t,i){if(t!==void 0)return R1(e,t,i);throw new Error("@ariaProperty only supports TypeScript Decorators")}const v1=bi`.icon{color:var(--connotation, currentColor)}.icon.connotation-primary{--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary)}.icon.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta)}.icon.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement)}.icon.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}.icon.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}.icon.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info)}:host([size=small]){--vvd-icon-size:16px}:host,:host([size=medium]){--vvd-icon-size:24px}:host([size=large]){--vvd-icon-size:32px}:host([inline]){--vvd-icon-size:1em;line-height:1;vertical-align:middle}:host{display:inline-block;width:var(--icon-size, var(--vvd-icon-size));height:var(--icon-size, var(--vvd-icon-size));block-size:var(--icon-size, var(--vvd-icon-size));inline-size:var(--icon-size, var(--vvd-icon-size));line-height:1;vertical-align:middle}.icon{display:contents}.icon>svg{block-size:100%;fill:currentColor;inline-size:100%;vertical-align:super}`,S1="https://icon.resources.vonage.com",w1="4.0.29",F1='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><style>@keyframes rotation { from { transform: rotate(0deg) } to { transform: rotate(360deg) } } g#circle { transform-origin: center center; animation: 1s rotation 0s linear infinite; } path { fill: currentColor }</style> <g id="circle"> <path d="M7.5 2C3.91014 2 1 4.91014 1 8.5C1 12.0899 3.91014 15 7.5 15C11.0899 15 14 12.0899 14 8.5C14 8.22386 14.2239 8 14.5 8C14.7761 8 15 8.22386 15 8.5C15 12.6421 11.6421 16 7.5 16C3.35786 16 0 12.6421 0 8.5C0 4.35786 3.35786 1 7.5 1C10.3622 1 12.7088 2.78366 13.9478 5.27753C14.0706 5.52484 13.9698 5.82492 13.7225 5.94778C13.4752 6.07065 13.1751 5.96977 13.0522 5.72247C11.9472 3.49834 9.90985 2 7.5 2Z"/><path d="M13.5 0C13.7761 0 14 0.223858 14 0.5V5.5C14 5.77614 13.7761 6 13.5 6H8.5C8.22386 6 8 5.77614 8 5.5C8 5.22386 8.22386 5 8.5 5H13V0.5C13 0.223858 13.2239 0 13.5 0Z"/></g></svg>',H1=500,x1=2e3,l0=e=>new Promise(t=>setTimeout(t,e)),Y1=(e,t)=>[S1,`v${t}`,e].join("/"),N1=GA(yA,(e="")=>e.trim()?fetch(Y1([e,"svg"].join("."),w1)).then(t=>t.headers.get("content-type")==="image/svg+xml"?t.text():""):Promise.resolve("")),M1=(e,t)=>(i="")=>i.replace(/<svg[^>]*>/,n=>n.replace(/<svg[^>]+/,o=>o.split(" ").concat([e,t].filter(Boolean).join("=")).join(" ")));let br=class extends jn{constructor(){super(...arguments),this.ariaLabel=""}static get styles(){return v1}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation}}render(){return Lt`<figure class="icon ${In(this.getRenderClasses())}" aria-label="${Oo(this.ariaLabel)}">${X1(N1(this.type).then(M1("aria-hidden","true")).then(o0),l0(x1),l0(H1).then(yh(o0(F1))))}</figure>`}};z([ct({type:String,reflect:!0})],br.prototype,"connotation",void 0);z([ct({attribute:!0,type:String,reflect:!0})],br.prototype,"type",void 0);z([ct({attribute:!0,type:Boolean,reflect:!0})],br.prototype,"inline",void 0);z([ct({attribute:!0,type:String,reflect:!0})],br.prototype,"size",void 0);z([hc,ct({attribute:"aria-label",type:String})],br.prototype,"ariaLabel",void 0);br=z([Yi("vwc-icon")],br);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function L1(e,t){var i=e.matches||e.webkitMatchesSelector||e.msMatchesSelector;return i.call(e,t)}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var J1={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},T1={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},c0={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};function k1(e,t,i){if(!e)return{x:0,y:0};var n=t.x,o=t.y,l=n+i.left,I=o+i.top,m,y;if(e.type==="touchstart"){var H=e;m=H.changedTouches[0].pageX-l,y=H.changedTouches[0].pageY-I}else{var L=e;m=L.pageX-l,y=L.pageY-I}return{x:m,y}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var g0=["touchstart","pointerdown","mousedown","keydown"],d0=["touchend","pointerup","mouseup","contextmenu"],Nc=[],z1=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.activationAnimationHasEnded=!1,n.activationTimer=0,n.fgDeactivationRemovalTimer=0,n.fgScale="0",n.frame={width:0,height:0},n.initialSize=0,n.layoutFrame=0,n.maxRadius=0,n.unboundedCoords={left:0,top:0},n.activationState=n.defaultActivationState(),n.activationTimerCallback=function(){n.activationAnimationHasEnded=!0,n.runDeactivationUXLogicIfReady()},n.activateHandler=function(o){n.activateImpl(o)},n.deactivateHandler=function(){n.deactivateImpl()},n.focusHandler=function(){n.handleFocus()},n.blurHandler=function(){n.handleBlur()},n.resizeHandler=function(){n.layout()},n}return Object.defineProperty(t,"cssClasses",{get:function(){return J1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return T1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return c0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var i=this,n=this.supportsPressRipple();if(this.registerRootHandlers(n),n){var o=t.cssClasses,l=o.ROOT,I=o.UNBOUNDED;requestAnimationFrame(function(){i.adapter.addClass(l),i.adapter.isUnbounded()&&(i.adapter.addClass(I),i.layoutInternal())})}},t.prototype.destroy=function(){var i=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,o=n.ROOT,l=n.UNBOUNDED;requestAnimationFrame(function(){i.adapter.removeClass(o),i.adapter.removeClass(l),i.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},t.prototype.activate=function(i){this.activateImpl(i)},t.prototype.deactivate=function(){this.deactivateImpl()},t.prototype.layout=function(){var i=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){i.layoutInternal(),i.layoutFrame=0})},t.prototype.setUnbounded=function(i){var n=t.cssClasses.UNBOUNDED;i?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var i=this;requestAnimationFrame(function(){return i.adapter.addClass(t.cssClasses.BG_FOCUSED)})},t.prototype.handleBlur=function(){var i=this;requestAnimationFrame(function(){return i.adapter.removeClass(t.cssClasses.BG_FOCUSED)})},t.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers=function(i){var n,o;if(i){try{for(var l=Fl(g0),I=l.next();!I.done;I=l.next()){var m=I.value;this.adapter.registerInteractionHandler(m,this.activateHandler)}}catch(y){n={error:y}}finally{try{I&&!I.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},t.prototype.registerDeactivationHandlers=function(i){var n,o;if(i.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var l=Fl(d0),I=l.next();!I.done;I=l.next()){var m=I.value;this.adapter.registerDocumentInteractionHandler(m,this.deactivateHandler)}}catch(y){n={error:y}}finally{try{I&&!I.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}},t.prototype.deregisterRootHandlers=function(){var i,n;try{for(var o=Fl(g0),l=o.next();!l.done;l=o.next()){var I=l.value;this.adapter.deregisterInteractionHandler(I,this.activateHandler)}}catch(m){i={error:m}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},t.prototype.deregisterDeactivationHandlers=function(){var i,n;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var o=Fl(d0),l=o.next();!l.done;l=o.next()){var I=l.value;this.adapter.deregisterDocumentInteractionHandler(I,this.deactivateHandler)}}catch(m){i={error:m}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}},t.prototype.removeCssVars=function(){var i=this,n=t.strings,o=Object.keys(n);o.forEach(function(l){l.indexOf("VAR_")===0&&i.adapter.updateCssVariable(n[l],null)})},t.prototype.activateImpl=function(i){var n=this;if(!this.adapter.isSurfaceDisabled()){var o=this.activationState;if(!o.isActivated){var l=this.previousActivationEvent,I=l&&i!==void 0&&l.type!==i.type;if(!I){o.isActivated=!0,o.isProgrammatic=i===void 0,o.activationEvent=i,o.wasActivatedByPointer=o.isProgrammatic?!1:i!==void 0&&(i.type==="mousedown"||i.type==="touchstart"||i.type==="pointerdown");var m=i!==void 0&&Nc.length>0&&Nc.some(function(y){return n.adapter.containsEventTarget(y)});if(m){this.resetActivationState();return}i!==void 0&&(Nc.push(i.target),this.registerDeactivationHandlers(i)),o.wasElementMadeActive=this.checkElementMadeActive(i),o.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Nc=[],!o.wasElementMadeActive&&i!==void 0&&(i.key===" "||i.keyCode===32)&&(o.wasElementMadeActive=n.checkElementMadeActive(i),o.wasElementMadeActive&&n.animateActivation()),o.wasElementMadeActive||(n.activationState=n.defaultActivationState())})}}}},t.prototype.checkElementMadeActive=function(i){return i!==void 0&&i.type==="keydown"?this.adapter.isSurfaceActive():!0},t.prototype.animateActivation=function(){var i=this,n=t.strings,o=n.VAR_FG_TRANSLATE_START,l=n.VAR_FG_TRANSLATE_END,I=t.cssClasses,m=I.FG_DEACTIVATION,y=I.FG_ACTIVATION,H=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var L="",K="";if(!this.adapter.isUnbounded()){var nt=this.getFgTranslationCoordinates(),dt=nt.startPoint,P=nt.endPoint;L=dt.x+"px, "+dt.y+"px",K=P.x+"px, "+P.y+"px"}this.adapter.updateCssVariable(o,L),this.adapter.updateCssVariable(l,K),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(m),this.adapter.computeBoundingRect(),this.adapter.addClass(y),this.activationTimer=setTimeout(function(){i.activationTimerCallback()},H)},t.prototype.getFgTranslationCoordinates=function(){var i=this.activationState,n=i.activationEvent,o=i.wasActivatedByPointer,l;o?l=k1(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):l={x:this.frame.width/2,y:this.frame.height/2},l={x:l.x-this.initialSize/2,y:l.y-this.initialSize/2};var I={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:l,endPoint:I}},t.prototype.runDeactivationUXLogicIfReady=function(){var i=this,n=t.cssClasses.FG_DEACTIVATION,o=this.activationState,l=o.hasDeactivationUXRun,I=o.isActivated,m=l||!I;m&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer=setTimeout(function(){i.adapter.removeClass(n)},c0.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses=function(){var i=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(i),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState=function(){var i=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return i.previousActivationEvent=void 0},t.numbers.TAP_DELAY_MS)},t.prototype.deactivateImpl=function(){var i=this,n=this.activationState;if(!!n.isActivated){var o=on({},n);n.isProgrammatic?(requestAnimationFrame(function(){i.animateDeactivation(o)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){i.activationState.hasDeactivationUXRun=!0,i.animateDeactivation(o),i.resetActivationState()}))}},t.prototype.animateDeactivation=function(i){var n=i.wasActivatedByPointer,o=i.wasElementMadeActive;(n||o)&&this.runDeactivationUXLogicIfReady()},t.prototype.layoutInternal=function(){var i=this;this.frame=this.adapter.computeBoundingRect();var n=Math.max(this.frame.height,this.frame.width),o=function(){var I=Math.sqrt(Math.pow(i.frame.width,2)+Math.pow(i.frame.height,2));return I+t.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?n:o();var l=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&l%2!==0?this.initialSize=l-1:this.initialSize=l,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},t.prototype.updateLayoutCssVars=function(){var i=t.strings,n=i.VAR_FG_SIZE,o=i.VAR_LEFT,l=i.VAR_TOP,I=i.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize+"px"),this.adapter.updateCssVariable(I,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(o,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(l,this.unboundedCoords.top+"px"))},t}(Yo),K1=z1;/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const a0=new WeakMap,jh=ul(e=>t=>{if(!(t instanceof Br)||t instanceof ml||t.committer.name!=="style"||t.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");const{committer:i}=t,{style:n}=i.element;let o=a0.get(t);o===void 0&&(n.cssText=i.strings.join(" "),a0.set(t,o=new Set)),o.forEach(l=>{l in e||(o.delete(l),l.indexOf("-")===-1?n[l]=null:n.removeProperty(l))});for(const l in e)o.add(l),l.indexOf("-")===-1?n[l]=e[l]:n.setProperty(l,e[l])});class wn extends Ks{constructor(){super(...arguments),this.primary=!1,this.accent=!1,this.unbounded=!1,this.disabled=!1,this.activated=!1,this.selected=!1,this.internalUseStateLayerCustomProperties=!1,this.hovering=!1,this.bgFocused=!1,this.fgActivation=!1,this.fgDeactivation=!1,this.fgScale="",this.fgSize="",this.translateStart="",this.translateEnd="",this.leftPos="",this.topPos="",this.mdcFoundationClass=K1}get isActive(){return L1(this.parentElement||this,":active")}createAdapter(){return{browserSupportsCssVars:()=>!0,isUnbounded:()=>this.unbounded,isSurfaceActive:()=>this.isActive,isSurfaceDisabled:()=>this.disabled,addClass:t=>{switch(t){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!0;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!0;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!0;break}},removeClass:t=>{switch(t){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!1;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!1;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!1;break}},containsEventTarget:()=>!0,registerInteractionHandler:()=>{},deregisterInteractionHandler:()=>{},registerDocumentInteractionHandler:()=>{},deregisterDocumentInteractionHandler:()=>{},registerResizeHandler:()=>{},deregisterResizeHandler:()=>{},updateCssVariable:(t,i)=>{switch(t){case"--mdc-ripple-fg-scale":this.fgScale=i;break;case"--mdc-ripple-fg-size":this.fgSize=i;break;case"--mdc-ripple-fg-translate-end":this.translateEnd=i;break;case"--mdc-ripple-fg-translate-start":this.translateStart=i;break;case"--mdc-ripple-left":this.leftPos=i;break;case"--mdc-ripple-top":this.topPos=i;break}},computeBoundingRect:()=>(this.parentElement||this).getBoundingClientRect(),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset})}}startPress(t){this.waitForFoundation(()=>{this.mdcFoundation.activate(t)})}endPress(){this.waitForFoundation(()=>{this.mdcFoundation.deactivate()})}startFocus(){this.waitForFoundation(()=>{this.mdcFoundation.handleFocus()})}endFocus(){this.waitForFoundation(()=>{this.mdcFoundation.handleBlur()})}startHover(){this.hovering=!0}endHover(){this.hovering=!1}waitForFoundation(t){this.mdcFoundation?t():this.updateComplete.then(t)}update(t){t.has("disabled")&&this.disabled&&this.endHover(),super.update(t)}render(){const t=this.activated&&(this.primary||!this.accent),i=this.selected&&(this.primary||!this.accent),n={"mdc-ripple-surface--accent":this.accent,"mdc-ripple-surface--primary--activated":t,"mdc-ripple-surface--accent--activated":this.accent&&this.activated,"mdc-ripple-surface--primary--selected":i,"mdc-ripple-surface--accent--selected":this.accent&&this.selected,"mdc-ripple-surface--disabled":this.disabled,"mdc-ripple-surface--hover":this.hovering,"mdc-ripple-surface--primary":this.primary,"mdc-ripple-surface--selected":this.selected,"mdc-ripple-upgraded--background-focused":this.bgFocused,"mdc-ripple-upgraded--foreground-activation":this.fgActivation,"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation,"mdc-ripple-upgraded--unbounded":this.unbounded,"mdc-ripple-surface--internal-use-state-layer-custom-properties":this.internalUseStateLayerCustomProperties};return Lt`
        <div class="mdc-ripple-surface mdc-ripple-upgraded ${In(n)}"
          style="${jh({"--mdc-ripple-fg-scale":this.fgScale,"--mdc-ripple-fg-size":this.fgSize,"--mdc-ripple-fg-translate-end":this.translateEnd,"--mdc-ripple-fg-translate-start":this.translateStart,"--mdc-ripple-left":this.leftPos,"--mdc-ripple-top":this.topPos})}"></div>`}}z([vi(".mdc-ripple-surface")],wn.prototype,"mdcRoot",void 0);z([ct({type:Boolean})],wn.prototype,"primary",void 0);z([ct({type:Boolean})],wn.prototype,"accent",void 0);z([ct({type:Boolean})],wn.prototype,"unbounded",void 0);z([ct({type:Boolean})],wn.prototype,"disabled",void 0);z([ct({type:Boolean})],wn.prototype,"activated",void 0);z([ct({type:Boolean})],wn.prototype,"selected",void 0);z([ct({type:Boolean})],wn.prototype,"internalUseStateLayerCustomProperties",void 0);z([Ri()],wn.prototype,"hovering",void 0);z([Ri()],wn.prototype,"bgFocused",void 0);z([Ri()],wn.prototype,"fgActivation",void 0);z([Ri()],wn.prototype,"fgDeactivation",void 0);z([Ri()],wn.prototype,"fgScale",void 0);z([Ri()],wn.prototype,"fgSize",void 0);z([Ri()],wn.prototype,"translateStart",void 0);z([Ri()],wn.prototype,"translateEnd",void 0);z([Ri()],wn.prototype,"leftPos",void 0);z([Ri()],wn.prototype,"topPos",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const U1=bi`.mdc-ripple-surface{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0);will-change:transform,opacity;position:relative;outline:none;overflow:hidden}.mdc-ripple-surface::before,.mdc-ripple-surface::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-ripple-surface::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index, 1)}.mdc-ripple-surface::after{z-index:0;z-index:var(--mdc-ripple-z-index, 0)}.mdc-ripple-surface.mdc-ripple-upgraded::before{transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-ripple-surface.mdc-ripple-upgraded::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-ripple-surface.mdc-ripple-upgraded--unbounded::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-activation::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-deactivation::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-ripple-surface::before,.mdc-ripple-surface::after{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-ripple-surface.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded],.mdc-ripple-upgraded--unbounded{overflow:visible}.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::before,.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::after,.mdc-ripple-upgraded--unbounded::before,.mdc-ripple-upgraded--unbounded::after{top:calc(50% - 50%);left:calc(50% - 50%);width:100%;height:100%}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::before,.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::before,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after{top:var(--mdc-ripple-top, calc(50% - 50%));left:var(--mdc-ripple-left, calc(50% - 50%));width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface::before,.mdc-ripple-surface::after{background-color:#000;background-color:var(--mdc-ripple-color, #000)}.mdc-ripple-surface:hover::before,.mdc-ripple-surface.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}:host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:block}:host .mdc-ripple-surface{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;will-change:unset}.mdc-ripple-surface--primary::before,.mdc-ripple-surface--primary::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary:hover::before,.mdc-ripple-surface--primary.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface--primary.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--primary.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--primary--activated::before{opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12)}.mdc-ripple-surface--primary--activated::before,.mdc-ripple-surface--primary--activated::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary--activated:hover::before,.mdc-ripple-surface--primary--activated.mdc-ripple-surface--hover::before{opacity:0.16;opacity:var(--mdc-ripple-hover-opacity, 0.16)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--primary--selected::before{opacity:0.08;opacity:var(--mdc-ripple-selected-opacity, 0.08)}.mdc-ripple-surface--primary--selected::before,.mdc-ripple-surface--primary--selected::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary--selected:hover::before,.mdc-ripple-surface--primary--selected.mdc-ripple-surface--hover::before{opacity:0.12;opacity:var(--mdc-ripple-hover-opacity, 0.12)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-focus-opacity, 0.2)}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--accent::before,.mdc-ripple-surface--accent::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent:hover::before,.mdc-ripple-surface--accent.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface--accent.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--accent.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--accent--activated::before{opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12)}.mdc-ripple-surface--accent--activated::before,.mdc-ripple-surface--accent--activated::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent--activated:hover::before,.mdc-ripple-surface--accent--activated.mdc-ripple-surface--hover::before{opacity:0.16;opacity:var(--mdc-ripple-hover-opacity, 0.16)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--accent--selected::before{opacity:0.08;opacity:var(--mdc-ripple-selected-opacity, 0.08)}.mdc-ripple-surface--accent--selected::before,.mdc-ripple-surface--accent--selected::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent--selected:hover::before,.mdc-ripple-surface--accent--selected.mdc-ripple-surface--hover::before{opacity:0.12;opacity:var(--mdc-ripple-hover-opacity, 0.12)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-focus-opacity, 0.2)}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--disabled{opacity:0}.mdc-ripple-surface--internal-use-state-layer-custom-properties::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties::after{background-color:#000;background-color:var(--mdc-ripple-hover-state-layer-color, #000)}.mdc-ripple-surface--internal-use-state-layer-custom-properties:hover::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-state-layer-opacity, 0.04)}.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-state-layer-opacity, 0.12)}.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-pressed-state-layer-opacity, 0.12)}.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-pressed-state-layer-opacity, 0.12)}`;let Qa=class extends wn{};Qa.styles=[U1];Qa=z([Yi("mwc-ripple")],Qa);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ud{constructor(t){this.startPress=i=>{t().then(n=>{n&&n.startPress(i)})},this.endPress=()=>{t().then(i=>{i&&i.endPress()})},this.startFocus=()=>{t().then(i=>{i&&i.startFocus()})},this.endFocus=()=>{t().then(i=>{i&&i.endFocus()})},this.startHover=()=>{t().then(i=>{i&&i.startHover()})},this.endHover=()=>{t().then(i=>{i&&i.endHover()})}}}class ps extends jn{constructor(){super(...arguments),this.disabled=!1,this.icon="",this.shouldRenderRipple=!1,this.rippleHandlers=new ud(()=>(this.shouldRenderRipple=!0,this.ripple))}renderRipple(){return this.shouldRenderRipple?Lt`
            <mwc-ripple
                .disabled="${this.disabled}"
                unbounded>
            </mwc-ripple>`:""}focus(){const t=this.buttonElement;t&&(this.rippleHandlers.startFocus(),t.focus())}blur(){const t=this.buttonElement;t&&(this.rippleHandlers.endFocus(),t.blur())}render(){return Lt`<button
        class="mdc-icon-button"
        aria-label="${this.ariaLabel||this.icon}"
        ?disabled="${this.disabled}"
        @focus="${this.handleRippleFocus}"
        @blur="${this.handleRippleBlur}"
        @mousedown="${this.handleRippleMouseDown}"
        @mouseenter="${this.handleRippleMouseEnter}"
        @mouseleave="${this.handleRippleMouseLeave}"
        @touchstart="${this.handleRippleTouchStart}"
        @touchend="${this.handleRippleDeactivate}"
        @touchcancel="${this.handleRippleDeactivate}"
    >${this.renderRipple()}
    <i class="material-icons">${this.icon}</i>
    <span
      ><slot></slot
    ></span>
  </button>`}handleRippleMouseDown(t){const i=()=>{window.removeEventListener("mouseup",i),this.handleRippleDeactivate()};window.addEventListener("mouseup",i),this.rippleHandlers.startPress(t)}handleRippleTouchStart(t){this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}z([ct({type:Boolean,reflect:!0})],ps.prototype,"disabled",void 0);z([ct({type:String})],ps.prototype,"icon",void 0);z([hc,ct({type:String,attribute:"aria-label"})],ps.prototype,"ariaLabel",void 0);z([vi("button")],ps.prototype,"buttonElement",void 0);z([Id("mwc-ripple")],ps.prototype,"ripple",void 0);z([Ri()],ps.prototype,"shouldRenderRipple",void 0);z([hl({passive:!0})],ps.prototype,"handleRippleMouseDown",null);z([hl({passive:!0})],ps.prototype,"handleRippleTouchStart",null);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const _h=bi`.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:transparent;fill:currentColor;color:inherit;font-size:24px;text-decoration:none;cursor:pointer;user-select:none;width:48px;height:48px;padding:12px}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button:disabled{color:rgba(0, 0, 0, 0.38);color:var(--mdc-theme-text-disabled-on-light, rgba(0, 0, 0, 0.38))}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button--touch{margin-top:0px;margin-bottom:0px}:host{display:inline-block;outline:none;--mdc-ripple-color: currentcolor;-webkit-tap-highlight-color:transparent}:host([disabled]){pointer-events:none}:host,.mdc-icon-button{vertical-align:top}.mdc-icon-button{width:var(--mdc-icon-button-size, 48px);height:var(--mdc-icon-button-size, 48px);padding:calc( (var(--mdc-icon-button-size, 48px) - var(--mdc-icon-size, 24px)) / 2 )}.mdc-icon-button>i{position:absolute;top:0;padding-top:inherit}.mdc-icon-button i,.mdc-icon-button svg,.mdc-icon-button img,.mdc-icon-button ::slotted(*){display:block;width:var(--mdc-icon-size, 24px);height:var(--mdc-icon-size, 24px)}`;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ql=class extends ps{};ql.styles=[_h];ql=z([Yi("mwc-icon-button")],ql);const E1=bi`.mdc-icon-button.layout-filled{--layout-color-fill:var(--connotation);--layout-color-text:var(--on-connotation)}.mdc-icon-button.layout-outlined{--layout-color-fill:transparent;--layout-color-outline:var(--connotation-diverse);--layout-color-text:var(--connotation-diverse)}.mdc-icon-button.layout-ghost,.mdc-icon-button:not(.layout-filled):not(.layout-outlined){--layout-color-fill:transparent;--layout-color-text:var(--connotation-diverse)}:host(:not([shape=circled i])),:host([shape=rounded i]){--vvd-icon-button-shape:6px}:host([shape=circled i]){--vvd-icon-button-shape:50%}:host{--mdc-icon-button-size: var(--vvd-icon-button-block-size, 40px)}.mdc-icon-button{--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);display:inline-flex;overflow:hidden;align-items:center;justify-content:center;border:1px solid var(--layout-color-outline);background-color:var(--vvd-icon-button-color, var(--layout-color-fill));border-radius:var(--vvd-icon-button-shape);color:var(--vvd-icon-button-on-color, var(--layout-color-text));font-size:inherit}.mdc-icon-button.connotation-primary,.mdc-icon-button:not(.connotation-cta):not(.connotation-success):not(.connotation-alert):not(.connotation-info):not(.connotation-announcement){--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary);--connotation-diverse:var(--vvd-color-primary)}.mdc-icon-button.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta);--connotation-diverse:var(--vvd-color-cta-70)}.mdc-icon-button.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success);--connotation-diverse:var(--vvd-color-success-70)}.mdc-icon-button.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert);--connotation-diverse:var(--vvd-color-alert-70)}.mdc-icon-button.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info);--connotation-diverse:var(--vvd-color-info-70)}.mdc-icon-button.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement);--connotation-diverse:var(--vvd-color-announcement-70)}.mdc-icon-button:disabled{color:var(--vvd-formfield-disabled-ink)}:host([layout=filled i]) .mdc-icon-button:disabled{background-color:var(--vvd-color-neutral-30)}:host([layout=outlined i]) .mdc-icon-button:disabled{border-color:var(--vvd-formfield-disabled-ink)}:host([dense]){--mdc-icon-button-size: var(--vvd-icon-button-block-size, 32px)}:host([enlarged]){--mdc-icon-button-size: var(--vvd-icon-button-block-size, 48px)}vwc-icon{--connotation:initial}:host vwc-icon{--vvd-icon-size:var(--vvd-icon-button-icon-size, 20px)}:host([dense]) vwc-icon{--vvd-icon-size:var(--vvd-icon-button-icon-size, 16px)}:host([enlarged]) vwc-icon{--vvd-icon-size:var(--vvd-icon-button-icon-size, 24px)}`,bc=bi`:host{--mdc-theme-primary: var(--vvd-color-primary);--mdc-theme-on-primary: var(--vvd-color-on-primary);--mdc-theme-text-primary-on-background: var(--vvd-color-on-canvas);--mdc-theme-secondary: var(--vvd-color-primary);--mdc-theme-on-secondary: var(--vvd-color-on-primary);--mdc-theme-surface: var(--vvd-color-canvas);--mdc-theme-on-surface: var(--vvd-color-on-canvas);--mdc-theme-error: var(--vvd-color-alert)}`;ql.styles=[bc,_h,E1];let pr=class extends ql{constructor(){super(...arguments),this.dense=!1,this.enlarged=!1}updated(t){wA(this,t)}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation,[`layout-${this.layout}`]:!!this.layout}}render(){return Lt`<button
			class="mdc-icon-button ${In(this.getRenderClasses())}"
			aria-label="${this.ariaLabel||this.icon}"
			?disabled="${this.disabled}"
			@focus="${this.handleRippleFocus}"
			@blur="${this.handleRippleBlur}"
			@mousedown="${this.handleRippleMouseDown}"
			@mouseenter="${this.handleRippleMouseEnter}"
			@mouseleave="${this.handleRippleMouseLeave}"
			@touchstart="${this.handleRippleTouchStart}"
			@touchend="${this.handleRippleDeactivate}"
			@touchcancel="${this.handleRippleDeactivate}"
		>
			${this.renderRipple()}
			${this.renderIcon()}
			<span>
				<slot></slot>
			</span>
		</button>`}renderIcon(){return Lt`<vwc-icon	type="${this.icon}"></vwc-icon>`}renderRipple(){return this.shouldRenderRipple?Lt` <mwc-ripple .disabled="${this.disabled}"></mwc-ripple>`:""}};z([ct({type:String,reflect:!0})],pr.prototype,"layout",void 0);z([ct({type:String,reflect:!0})],pr.prototype,"connotation",void 0);z([ct({type:String,reflect:!0})],pr.prototype,"shape",void 0);z([ct({type:Boolean,reflect:!0})],pr.prototype,"dense",void 0);z([ct({type:Boolean,reflect:!0})],pr.prototype,"enlarged",void 0);pr=z([Yi("vwc-icon-button")],pr);const Q1=bi`:host>.banner{overflow:hidden;max-height:0;transition:max-height var(--transition-delay, 200ms)}:host>.banner.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}:host>.banner.connotation-info,:host>.banner:not(.connotation-success):not(.connotation-alert):not(.connotation-announcement):not(.connotation-warning){--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info)}:host>.banner.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}:host>.banner.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement)}:host>.banner.connotation-warning{--connotation:var(--vvd-color-warning);--on-connotation:var(--vvd-color-on-warning)}:host>.banner>.header{font:600 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;display:flex;min-height:60px;align-items:center;justify-content:flex-start;background-color:var(--connotation);color:var(--on-connotation)}:host>.banner>.header>.user-content{display:flex;flex:1 0;align-items:center;justify-content:center;padding-inline:16px}:host>.banner>.header>.user-content>.icon{--connotation:initial;--icon-size: var(--vvd-banner-icon-size, 20px);flex:0 0 auto;padding-inline-end:15px}:host>.banner>.header>.user-content>.action-items{display:inline-block;flex:0 0 auto;padding-inline-start:15px}:host>.banner>.header>.user-content>.message{padding:20px 0}:host>.banner>.header>.dismiss-button{--vvd-icon-button-color: inherit;flex:0 0 auto;padding-inline-end:8px}.banner.banner-open{max-height:10rem}`;/**
 * @license
 * Copyright (c) 2021 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const wo={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6};class D1{constructor(t){this.type=wo.CHILD,this.options=t.options,this.legacyPart=t}get parentNode(){return this.legacyPart.startNode.parentNode}get startNode(){return this.legacyPart.startNode}get endNode(){return this.legacyPart.endNode}}class O1{constructor(t){this.legacyPart=t,this.type=t instanceof ml?wo.PROPERTY:wo.ATTRIBUTE}get options(){}get name(){return this.legacyPart.committer.name}get element(){return this.legacyPart.committer.element}get strings(){return this.legacyPart.committer.strings}get tagName(){return this.element.tagName}}class j1{constructor(t){this.type=wo.BOOLEAN_ATTRIBUTE,this.legacyPart=t}get options(){}get name(){return this.legacyPart.name}get element(){return this.legacyPart.element}get strings(){return this.legacyPart.strings}get tagName(){return this.element.tagName}}class _1{constructor(t){this.type=wo.EVENT,this.legacyPart=t}get options(){}get name(){return this.legacyPart.eventName}get element(){return this.legacyPart.element}get strings(){}get tagName(){return this.element.tagName}handleEvent(t){this.legacyPart.handleEvent(t)}}function P1(e){if(e instanceof Xr)return new D1(e);if(e instanceof jI)return new _1(e);if(e instanceof OI)return new j1(e);if(e instanceof ml||e instanceof Br)return new O1(e);throw new Error("Unknown part type")}class iC{constructor(t){}update(t,i){return this.render(...i)}}function md(e){const t=new WeakMap;return ul((...n)=>o=>{const l=t.get(o);let I,m;l===void 0?(I=P1(o),m=new e(I),t.set(o,[I,m])):(I=l[0],m=l[1]),o.setValue(m.update(I,n)),o.commit()})}/**
 * @license
 * Copyright (c) 2021 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class Ph extends iC{constructor(t){super(t),this._renderedYet=!1,this._legacyPart=t.legacyPart}_legacyGetNode(){if(this._legacyPart instanceof Xr)return this._legacyPart.startNode;if(this._legacyPart instanceof jI)return this._legacyPart.element;if(this._legacyPart instanceof OI)return this._legacyPart.element;if(this._legacyPart instanceof ml||this._legacyPart instanceof Br)return this._legacyPart.committer.element}_shouldRender(){if(!this._renderedYet)return this._renderedYet=!0,!0;const t=this._legacyGetNode();return!!(t!=null&&t.isConnected)}setValue(t){!this._shouldRender()||(this._legacyPart.setValue(t),this._legacyPart.commit())}disconnected(){}reconnected(){}}class q1 extends Ph{constructor(t){if(super(t),this.labelEl=null,this.timerId=null,this.previousPart=null,t.type!==wo.CHILD)throw new Error("AccessibleBannerDirective only supports child parts.")}update(t,[i,n,o,l]){var I;if(!n)return;if(this.labelEl===null){const H=document.createElement("div"),L=Lt`<div class="banner--message" role=${o} aria-live=${l}></div>`;Zg(L,H);const K=H.firstElementChild;return K.textContent=i,(I=t.endNode)===null||I===void 0||I.parentNode.insertBefore(K,t.endNode),this.labelEl=K,K}const m=this.labelEl;m.setAttribute("role",""),m.setAttribute("aria-live","off"),m.textContent="";const y=document.createElement("span");return y.style.display="inline-block",y.style.width="0",y.style.height="1px",y.textContent="\xA0",m.appendChild(y),m.setAttribute("message-text",i),this.timerId!==null&&clearTimeout(this.timerId),this.timerId=window.setTimeout(()=>{this.timerId=null,m.setAttribute("role",o),m.setAttribute("aria-live",l),m.removeAttribute("message-text"),m.textContent=i,this.setValue(this.labelEl)},1e3),m}render(t,i,n,o){return i?Lt`
	  <div class="banner--message" role=${n} aria-live=${o}>${t}</div>`:Lt``}}const $1=md(q1);var rg;const I0=100,tZ="Escape",eZ=new Map([[Rs.Info,"info-solid"],[Rs.Announcement,"megaphone-solid"],[Rs.Success,"check-circle-solid"],[Rs.Warning,"warning-solid"],[Rs.Alert,"error-solid"]]),C0=function(e,t={}){return new CustomEvent(e,Object.assign({bubbles:!0,composed:!0,cancelable:!1},t))};let jo=class extends jn{constructor(){super(...arguments),this.message="",this.dismissible=!1,this.open=!1,this.role=Ka.Status,this.ariaLive=Ua.Polite,rg.set(this,void 0)}clickCloseHandler(){this.open=!1}firstUpdated(){var t;((t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector(".banner")).style.setProperty("--transition-delay",`${I0}ms`)}updated(t){t.has("open")&&(clearTimeout(yo(this,rg,"f")),this.dispatchEvent(C0(this.open?"opening":"closing")),Ah(this,rg,setTimeout(()=>{this.dispatchEvent(C0(this.open?"opened":"closed"))},I0),"f"))}renderDismissButton(){return this.dismissible?Lt`<vwc-icon-button
								class="dismiss-button"
								icon="close-line"
								@click="${this.clickCloseHandler}"
								dense></vwc-icon-button>`:Eo}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation,"banner-open":this.open}}renderIcon(t){if(!t){const i=this.connotation||Rs.Info;t=eZ.get(i)}return Lt`<vwc-icon class="icon" .type="${t}"></vwc-icon>`}handleKeyDown(t){this.open=!(t.key===tZ&&this.dismissible)}render(){return Lt`
      <div class="banner ${In(this.getRenderClasses())}" tabindex="0" @keydown=${this.handleKeyDown}>
				<header class="header">
					<span class="user-content">
						${this.renderIcon(this.icon)}
						${$1(this.message,this.open,this.role,this.ariaLive)}
						<slot class="action-items" name="actionItems"></slot>
					</span>
					${this.renderDismissButton()}
				</header>
			</div>
		`}};rg=new WeakMap;jo.styles=[Q1];z([ct({type:String,reflect:!0})],jo.prototype,"message",void 0);z([ct({type:Boolean,reflect:!0})],jo.prototype,"dismissible",void 0);z([ct({type:String,reflect:!0})],jo.prototype,"connotation",void 0);z([ct({type:String,reflect:!0})],jo.prototype,"icon",void 0);z([ct({type:Boolean,reflect:!0})],jo.prototype,"open",void 0);z([ct({type:String,reflect:!0,attribute:"role"})],jo.prototype,"role",void 0);z([hc,ct({type:String,reflect:!0,attribute:"aria-live"})],jo.prototype,"ariaLive",void 0);jo=z([Yi("vwc-banner")],jo);const iZ=bi`.vwc-card{block-size:100%;border-radius:6px}.vwc-card-container{display:flex;overflow:hidden;flex-flow:column;block-size:inherit;border-radius:inherit;color:var(--vvd-color-on-canvas)}.vwc-card-content{display:flex;flex-flow:column;padding:24px}.vwc-card-wrapper{display:flex;width:100%;column-gap:8px}:host([text]) .vwc-card-wrapper{margin-bottom:12px}.vwc-card-header{display:inline-flex;align-items:flex-start;justify-content:space-between;column-gap:8px}.vwc-card-title,.vwc-card-subtitle{display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical}.vwc-card-title{font:500 condensed 20px / 28px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;-webkit-line-clamp:var(--title-line-clamp)}.vwc-card-subtitle{-webkit-line-clamp:var(--subtitle-line-clamp)}.vwc-card-subtitle,.vwc-card-text{font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;color:var(--vvd-color-neutral-70)}.vwc-card-text{padding-right:8px}.vwc-card-footer{display:inline-flex;flex-direction:column;align-items:flex-end;padding-bottom:24px;margin-top:auto;padding-inline:24px}::slotted([slot=graphic i]),.icon{flex-shrink:0;align-self:baseline;margin:4px 2px 0 0}.icon{width:20px;height:20px}::slotted([slot=meta i]){flex-shrink:0;align-self:flex-start;margin-block-start:-8px;margin-inline-end:-8px;margin-inline-start:auto}.no-content{display:none}vwc-elevation{block-size:inherit}vwc-elevation::part(base){block-size:inherit}`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const nZ=bi`:host{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}`;let Da=class extends jn{render(){return Lt`<slot></slot>`}};Da.styles=[nZ];Da=z([Yi("mwc-icon")],Da);class Kn extends jn{constructor(){super(...arguments),this.raised=!1,this.unelevated=!1,this.outlined=!1,this.dense=!1,this.disabled=!1,this.trailingIcon=!1,this.fullwidth=!1,this.icon="",this.label="",this.expandContent=!1,this.shouldRenderRipple=!1,this.rippleHandlers=new ud(()=>(this.shouldRenderRipple=!0,this.ripple))}renderOverlay(){return Lt``}renderRipple(){const t=this.raised||this.unelevated;return this.shouldRenderRipple?Lt`<mwc-ripple class="ripple" .primary="${!t}" .disabled="${this.disabled}"></mwc-ripple>`:""}focus(){const t=this.buttonElement;t&&(this.rippleHandlers.startFocus(),t.focus())}blur(){const t=this.buttonElement;t&&(this.rippleHandlers.endFocus(),t.blur())}getRenderClasses(){return In({"mdc-button--raised":this.raised,"mdc-button--unelevated":this.unelevated,"mdc-button--outlined":this.outlined,"mdc-button--dense":this.dense})}render(){return Lt`
      <button
          id="button"
          class="mdc-button ${this.getRenderClasses()}"
          ?disabled="${this.disabled}"
          aria-label="${this.label||this.icon}"
          @focus="${this.handleRippleFocus}"
          @blur="${this.handleRippleBlur}"
          @mousedown="${this.handleRippleActivate}"
          @mouseenter="${this.handleRippleMouseEnter}"
          @mouseleave="${this.handleRippleMouseLeave}"
          @touchstart="${this.handleRippleActivate}"
          @touchend="${this.handleRippleDeactivate}"
          @touchcancel="${this.handleRippleDeactivate}">
        ${this.renderOverlay()}
        ${this.renderRipple()}
        <span class="leading-icon">
          <slot name="icon">
            ${this.icon&&!this.trailingIcon?this.renderIcon():""}
          </slot>
        </span>
        <span class="mdc-button__label">${this.label}</span>
        <span class="slot-container ${In({flex:this.expandContent})}">
          <slot></slot>
        </span>
        <span class="trailing-icon">
          <slot name="trailingIcon">
            ${this.icon&&this.trailingIcon?this.renderIcon():""}
          </slot>
        </span>
      </button>`}renderIcon(){return Lt`
    <mwc-icon class="mdc-button__icon">
      ${this.icon}
    </mwc-icon>`}handleRippleActivate(t){const i=()=>{window.removeEventListener("mouseup",i),this.handleRippleDeactivate()};window.addEventListener("mouseup",i),this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}Kn.shadowRootOptions={mode:"open",delegatesFocus:!0};z([ct({type:Boolean,reflect:!0})],Kn.prototype,"raised",void 0);z([ct({type:Boolean,reflect:!0})],Kn.prototype,"unelevated",void 0);z([ct({type:Boolean,reflect:!0})],Kn.prototype,"outlined",void 0);z([ct({type:Boolean})],Kn.prototype,"dense",void 0);z([ct({type:Boolean,reflect:!0})],Kn.prototype,"disabled",void 0);z([ct({type:Boolean,attribute:"trailingicon"})],Kn.prototype,"trailingIcon",void 0);z([ct({type:Boolean,reflect:!0})],Kn.prototype,"fullwidth",void 0);z([ct({type:String})],Kn.prototype,"icon",void 0);z([ct({type:String})],Kn.prototype,"label",void 0);z([ct({type:Boolean})],Kn.prototype,"expandContent",void 0);z([vi("#button")],Kn.prototype,"buttonElement",void 0);z([Id("mwc-ripple")],Kn.prototype,"ripple",void 0);z([Ri()],Kn.prototype,"shouldRenderRipple",void 0);z([hl({passive:!0})],Kn.prototype,"handleRippleActivate",null);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const qh=bi`.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:0;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:#fff;background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-button{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-button-font-size, 0.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height, 2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight, 500);letter-spacing:0.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing, 0.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration, none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform, uppercase);position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:transparent}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;font-size:1.125rem;height:1.125rem;vertical-align:top;width:1.125rem}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--raised .mdc-button__icon,.mdc-button--unelevated .mdc-button__icon,.mdc-button--outlined .mdc-button__icon{margin-left:-4px;margin-right:8px}[dir=rtl] .mdc-button--raised .mdc-button__icon,[dir=rtl] .mdc-button--unelevated .mdc-button__icon,[dir=rtl] .mdc-button--outlined .mdc-button__icon,.mdc-button--raised .mdc-button__icon[dir=rtl],.mdc-button--unelevated .mdc-button__icon[dir=rtl],.mdc-button--outlined .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mdc-button--raised .mdc-button__label+.mdc-button__icon,.mdc-button--unelevated .mdc-button__label+.mdc-button__icon,.mdc-button--outlined .mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mdc-button--raised .mdc-button__label+.mdc-button__icon,[dir=rtl] .mdc-button--unelevated .mdc-button__label+.mdc-button__icon,[dir=rtl] .mdc-button--outlined .mdc-button__label+.mdc-button__icon,.mdc-button--raised .mdc-button__label+.mdc-button__icon[dir=rtl],.mdc-button--unelevated .mdc-button__label+.mdc-button__icon[dir=rtl],.mdc-button--outlined .mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button--raised{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0,0,0,.12);transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--raised:hover,.mdc-button--raised:focus{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0,0,0,.12)}.mdc-button--raised:active{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}.mdc-button--raised:disabled{box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2),0px 0px 0px 0px rgba(0, 0, 0, 0.14),0px 0px 0px 0px rgba(0,0,0,.12)}.mdc-button--outlined{border-style:solid}.mdc-button{height:36px;border-radius:4px;border-radius:var(--mdc-shape-small, 4px);padding:0 8px 0 8px}.mdc-button:not(:disabled){color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}.mdc-button:disabled{color:rgba(0, 0, 0, 0.38)}.mdc-button .mdc-button__ripple{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-button--raised,.mdc-button--unelevated{padding:0 16px 0 16px;height:36px;border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-button--raised:not(:disabled),.mdc-button--unelevated:not(:disabled){background-color:#6200ee;background-color:var(--mdc-theme-primary, #6200ee)}.mdc-button--raised:disabled,.mdc-button--unelevated:disabled{background-color:rgba(0, 0, 0, 0.12)}.mdc-button--raised:not(:disabled),.mdc-button--unelevated:not(:disabled){color:#fff;color:var(--mdc-theme-on-primary, #fff)}.mdc-button--raised:disabled,.mdc-button--unelevated:disabled{color:rgba(0, 0, 0, 0.38)}.mdc-button--raised .mdc-button__ripple,.mdc-button--unelevated .mdc-button__ripple{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-button--outlined{height:36px;border-radius:4px;border-radius:var(--mdc-shape-small, 4px);padding:0 15px 0 15px;border-width:1px}.mdc-button--outlined:not(:disabled){color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}.mdc-button--outlined:disabled{color:rgba(0, 0, 0, 0.38)}.mdc-button--outlined .mdc-button__ripple{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-button--outlined:not(:disabled){border-color:rgba(0, 0, 0, 0.12)}.mdc-button--outlined:disabled{border-color:rgba(0, 0, 0, 0.12)}.mdc-button--outlined.mdc-button--icon-trailing{padding:0 11px 0 15px}.mdc-button--outlined.mdc-button--icon-leading{padding:0 15px 0 11px}.mdc-button--outlined .mdc-button__ripple{top:-1px;left:-1px;border:1px solid transparent}.mdc-button--outlined .mdc-button__touch{left:-1px;width:calc(100% + 2 * 1px)}:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:transparent;vertical-align:top}:host([fullwidth]){width:100%}:host([raised]),:host([unelevated]){--mdc-ripple-color:#fff;--mdc-ripple-focus-opacity:0.24;--mdc-ripple-hover-opacity:0.08;--mdc-ripple-press-opacity:0.24}.trailing-icon ::slotted(*),.trailing-icon .mdc-button__icon,.leading-icon ::slotted(*),.leading-icon .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;font-size:1.125rem;height:1.125rem;vertical-align:top;width:1.125rem}[dir=rtl] .trailing-icon ::slotted(*),[dir=rtl] .trailing-icon .mdc-button__icon,[dir=rtl] .leading-icon ::slotted(*),[dir=rtl] .leading-icon .mdc-button__icon,.trailing-icon ::slotted(*[dir=rtl]),.trailing-icon .mdc-button__icon[dir=rtl],.leading-icon ::slotted(*[dir=rtl]),.leading-icon .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.trailing-icon ::slotted(*),.trailing-icon .mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .trailing-icon ::slotted(*),[dir=rtl] .trailing-icon .mdc-button__icon,.trailing-icon ::slotted(*[dir=rtl]),.trailing-icon .mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}.slot-container{display:inline-flex;align-items:center;justify-content:center}.slot-container.flex{flex:auto}.mdc-button{flex:auto;overflow:hidden;padding-left:8px;padding-left:var(--mdc-button-horizontal-padding, 8px);padding-right:8px;padding-right:var(--mdc-button-horizontal-padding, 8px)}.mdc-button--raised{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mdc-button--raised:focus{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow-focus, var(--mdc-button-raised-box-shadow-hover, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)))}.mdc-button--raised:hover{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow-hover, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mdc-button--raised:active{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow-active, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mdc-button--raised:disabled{box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-button-raised-box-shadow-disabled, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mdc-button--raised,.mdc-button--unelevated{padding-left:16px;padding-left:var(--mdc-button-horizontal-padding, 16px);padding-right:16px;padding-right:var(--mdc-button-horizontal-padding, 16px)}.mdc-button--outlined{border-width:1px;border-width:var(--mdc-button-outline-width, 1px);padding-left:calc(16px - 1px);padding-left:calc(var(--mdc-button-horizontal-padding, 16px) - var(--mdc-button-outline-width, 1px));padding-right:calc(16px - 1px);padding-right:calc(var(--mdc-button-horizontal-padding, 16px) - var(--mdc-button-outline-width, 1px))}.mdc-button--outlined:not(:disabled){border-color:rgba(0, 0, 0, 0.12);border-color:var(--mdc-button-outline-color, rgba(0, 0, 0, 0.12))}.mdc-button--outlined .ripple{top:calc(-1 * 1px);top:calc(-1 * var(--mdc-button-outline-width, 1px));left:calc(-1 * 1px);left:calc(-1 * var(--mdc-button-outline-width, 1px));right:initial;right:initial;border-width:1px;border-width:var(--mdc-button-outline-width, 1px);border-style:solid;border-color:transparent}[dir=rtl] .mdc-button--outlined .ripple,.mdc-button--outlined .ripple[dir=rtl]{left:initial;left:initial;right:calc(-1 * 1px);right:calc(-1 * var(--mdc-button-outline-width, 1px))}.mdc-button--dense{height:28px;margin-top:0;margin-bottom:0}.mdc-button--dense .mdc-button__touch{display:none}:host([disabled]){pointer-events:none}:host([disabled]) .mdc-button{color:rgba(0, 0, 0, 0.38);color:var(--mdc-button-disabled-ink-color, rgba(0, 0, 0, 0.38))}:host([disabled]) .mdc-button--raised,:host([disabled]) .mdc-button--unelevated{background-color:rgba(0, 0, 0, 0.12);background-color:var(--mdc-button-disabled-fill-color, rgba(0, 0, 0, 0.12))}:host([disabled]) .mdc-button--outlined{border-color:rgba(0, 0, 0, 0.12);border-color:var(--mdc-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}`;let $l=class extends Kn{};$l.styles=[qh];$l=z([Yi("mwc-button")],$l);const oZ=bi`:host{--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 14px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 600;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 100%;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-button-font-family: var(--vvd-typography-font-family);--mdc-typography-button-font-size: var(--vvd-typography-font-size);--mdc-typography-button-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-button-font-weight: var(--vvd-typography-font-weight);--mdc-typography-button-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-button-line-height: var(--vvd-typography-line-height);--mdc-typography-button-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-button-text-transform: var(--vvd-typography-text-transform)}:host([dense]){--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 12px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 600;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 16px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-button-font-family: var(--vvd-typography-font-family);--mdc-typography-button-font-size: var(--vvd-typography-font-size);--mdc-typography-button-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-button-font-weight: var(--vvd-typography-font-weight);--mdc-typography-button-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-button-line-height: var(--vvd-typography-line-height);--mdc-typography-button-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-button-text-transform: var(--vvd-typography-text-transform)}:host([enlarged]){--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 16px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 600;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 24px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-button-font-family: var(--vvd-typography-font-family);--mdc-typography-button-font-size: var(--vvd-typography-font-size);--mdc-typography-button-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-button-font-weight: var(--vvd-typography-font-weight);--mdc-typography-button-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-button-line-height: var(--vvd-typography-line-height);--mdc-typography-button-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-button-text-transform: var(--vvd-typography-text-transform)}.mdc-button.layout-filled{--layout-color-fill:var(--connotation);--layout-color-text:var(--on-connotation)}.mdc-button.layout-outlined{--layout-color-fill:transparent;--layout-color-outline:var(--connotation-diverse);--layout-color-text:var(--connotation-diverse)}.mdc-button.layout-ghost,.mdc-button:not(.layout-filled):not(.layout-outlined){--layout-color-fill:transparent;--layout-color-text:var(--connotation-diverse)}.mdc-button{--mdc-button-disabled-ink-color: var(--vvd-formfield-disabled-ink);--mdc-button-disabled-fill-color: var(--vvd-color-neutral-30);--mdc-button-disabled-outline-color: var(--vvd-formfield-disabled-ink);--mdc-button-outline-color: var(--layout-color-outline, var(--mdc-theme-primary));--mdc-button-horizontal-padding: 16px;--button-block-size: 40px;--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);height:var(--vvd-button-block-size, var(--button-block-size));border-radius:var(--vvd-button-shape);font-stretch:var(--mdc-typography-button-font-stretch);letter-spacing:normal}.mdc-button.connotation-primary,.mdc-button:not(.connotation-cta):not(.connotation-success):not(.connotation-alert):not(.connotation-info):not(.connotation-announcement){--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary);--connotation-diverse:var(--vvd-color-primary)}.mdc-button.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta);--connotation-diverse:var(--vvd-color-cta-70)}.mdc-button.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success);--connotation-diverse:var(--vvd-color-success-70)}.mdc-button.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert);--connotation-diverse:var(--vvd-color-alert-70)}.mdc-button.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info);--connotation-diverse:var(--vvd-color-info-70)}.mdc-button.connotation-announcement{--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement);--connotation-diverse:var(--vvd-color-announcement-70)}.mdc-button:not(.mdc-button--dense) vwc-icon{--vvd-icon-size:var(--vvd-button-icon-size, 20px)}.mdc-button .leading-icon,.mdc-button .trailing-icon{--connotation:currentColor;display:flex}.mdc-button>.trailing-icon vwc-icon,.mdc-button>.leading-icon vwc-icon{--gutter: 8px}:host([enlarged]) .mdc-button>.trailing-icon vwc-icon,:host([enlarged]) .mdc-button>.leading-icon vwc-icon{--gutter: 10px}:host([stacked]) .mdc-button>.trailing-icon vwc-icon,:host([stacked]) .mdc-button>.leading-icon vwc-icon{--gutter: 0}.mdc-button>.trailing-icon vwc-icon{margin-inline-start:var(--gutter)}.mdc-button>.leading-icon vwc-icon{margin-inline-end:var(--gutter)}:host([dense]) .mdc-button{--button-block-size: 32px}:host([dense]) .mdc-button vwc-icon{--vvd-icon-size:var(--vvd-button-icon-size, 16px)}:host([enlarged]) .mdc-button{--button-block-size: 48px}:host([enlarged]) .mdc-button vwc-icon{--vvd-icon-size:var(--vvd-button-icon-size, 24px)}:host([raised]) .mdc-button,:host([unelevated]) .mdc-button{--mdc-ripple-color: var(--vvd-button-on-color, var(--layout-color-text))}:host([unelevated]) .mdc-button{--mdc-theme-primary: var(--vvd-button-color, var(--layout-color-fill));--mdc-theme-on-primary: var(--vvd-button-on-color, var(--layout-color-text))}.mdc-button:not(.layout-filled){--mdc-theme-primary: var(--vvd-button-color, var(--layout-color-text));--mdc-theme-on-primary: var(--vvd-button-on-color, var(--layout-color-fill))}:host([dense]) .mdc-button{--mdc-button-horizontal-padding: 12px}:host([enlarged]) .mdc-button{--mdc-button-horizontal-padding: 20px}.mdc-button.button-stacked{--button-block-size: 68px;flex-direction:column;line-height:normal}:host([enlarged]) .mdc-button.button-stacked{--button-block-size: 80px}:host([dense]) .mdc-button.button-stacked{--button-block-size: 56px}.mdc-button.button-stacked>.leading-icon vwc-icon,.mdc-button.button-stacked .leading-icon ::slotted(*){margin-block-end:8px}.mdc-button.button-stacked>.trailing-icon vwc-icon,.mdc-button.button-stacked .trailing-icon ::slotted(*){margin-block-start:8px}.mdc-button.button-stacked .trailing-icon ::slotted(*),.mdc-button.button-stacked .leading-icon ::slotted(*){margin-inline-end:0;margin-inline-start:0}:host(:not([shape=pill i])),:host([shape=rounded i]){--vvd-button-shape:6px}:host([shape=pill i]){--vvd-button-shape:24px}`;var os,Oa;$l.styles=[bc,qh,oZ];let Vo=Oa=class extends $l{constructor(){super(...arguments),this.dense=!1,this.enlarged=!1,this.type="submit",this.formId=null,this.stacked=!1,os.set(this,Oa.createHiddenButton())}updateFormAndButton(){var t;const i=this.getAttribute("form");i!==null&&((t=yo(this,os,"f"))===null||t===void 0||t.setAttribute("form",i))}attributeChangedCallback(t,i,n){var o;t==="form"&&n&&n!==i?(o=yo(this,os,"f"))===null||o===void 0||o.setAttribute("form",n):super.attributeChangedCallback(t,i,n)}update(t){super.update(t),[...t.keys()].filter(i=>["name","value"].includes(i)).forEach(i=>{yo(this,os,"f").setAttribute(i,this[i])})}updated(t){var i,n;t.has("type")&&((i=yo(this,os,"f"))===null||i===void 0||i.setAttribute("type",(n=this.getAttribute("type"))!==null&&n!==void 0?n:"")),this.toggleAttribute("outlined",this.layout==="outlined"),this.toggleAttribute("unelevated",this.layout==="filled"),t.has("dense")&&this.dense&&this.enlarged&&(this.enlarged=!1),t.has("enlarged")&&this.enlarged&&this.dense&&(this.removeAttribute("dense"),this.dense=!1)}get form(){return yo(this,os,"f").form}set form(t){}_handleClick(t){if(this.form)switch(this.getAttribute("type")){case"reset":this.form.reset();break;case"button":break;default:t.target===this?yo(this,os,"f").click():t.stopImmediatePropagation();break}}renderIcon(){return Lt`<vwc-icon	type="${this.icon}"></vwc-icon>`}getRenderClasses(){return In({"mdc-button--raised":this.raised,"mdc-button--unelevated":this.unelevated,"mdc-button--outlined":this.outlined,"mdc-button--dense":this.dense,[`connotation-${this.connotation}`]:!!this.connotation,[`layout-${this.layout}`]:!!this.layout,"button-stacked":this.stacked})}static createHiddenButton(){const t=document.createElement("button");return t.style.display="none",t}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this._handleClick),this.appendChild(yo(this,os,"f"))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._handleClick)}};os=new WeakMap;z([ct({type:String,reflect:!0})],Vo.prototype,"name",void 0);z([ct({type:String,reflect:!0})],Vo.prototype,"value",void 0);z([ct({type:Boolean,reflect:!0})],Vo.prototype,"dense",void 0);z([ct({type:Boolean,reflect:!0})],Vo.prototype,"enlarged",void 0);z([ct({type:String,reflect:!0})],Vo.prototype,"layout",void 0);z([ct({type:String,reflect:!0})],Vo.prototype,"connotation",void 0);z([ct({type:String,reflect:!0})],Vo.prototype,"shape",void 0);z([ct({type:String,reflect:!0})],Vo.prototype,"type",void 0);z([ct({attribute:"form",reflect:!0})],Vo.prototype,"formId",void 0);z([ct({type:Boolean,reflect:!0})],Vo.prototype,"stacked",void 0);Vo=Oa=z([Yi("vwc-button")],Vo);const sZ=bi`.vwc-elevation-dp-0:not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-0dp);filter:var(--vvd-shadow-surface-0dp)}.vwc-elevation-dp-2:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-2dp);filter:var(--vvd-shadow-surface-2dp)}.vwc-elevation-dp-4:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-4dp);filter:var(--vvd-shadow-surface-4dp)}.vwc-elevation-dp-8:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-8dp);filter:var(--vvd-shadow-surface-8dp)}.vwc-elevation-dp-12:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-16):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-12dp);filter:var(--vvd-shadow-surface-12dp)}.vwc-elevation-dp-16:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-24) ::slotted(*){background-color:var(--vvd-color-surface-16dp);filter:var(--vvd-shadow-surface-16dp)}.vwc-elevation-dp-24:not(.vwc-elevation-dp-0):not(.vwc-elevation-dp-2):not(.vwc-elevation-dp-4):not(.vwc-elevation-dp-8):not(.vwc-elevation-dp-12):not(.vwc-elevation-dp-16) ::slotted(*){background-color:var(--vvd-color-surface-24dp);filter:var(--vvd-shadow-surface-24dp)}`;let Vg=class extends jn{constructor(){super(...arguments),this.dp=2}render(){const t={[`vwc-elevation-dp-${this.dp}`]:!0};return Lt`
			<div class="vwc-elevation ${In(t)}" part="base">
				<slot></slot>
			</div>
		`}};Vg.styles=sZ;z([ct({type:Number,reflect:!1})],Vg.prototype,"dp",void 0);Vg=z([Yi("vwc-elevation")],Vg);var lg;let Ms=class extends jn{constructor(){super(...arguments),this.icon=null,this.elevation="4",lg.set(this,void 0)}get headerContentExists(){var t;return Boolean(this.heading||this.subtitle||this.icon||((t=this.IconSlottedItems)===null||t===void 0?void 0:t.length))}get headerClass(){return this.headerContentExists?"":"no-content"}render(){const t={"no-content":!yo(this,lg,"f")};return Lt`
			<vwc-elevation .dp=${this.elevation}>
			<!-- there are 2 wrapper due to a safari bug failing 'filter: drop-shadow'
			from rendering shadow on an element with 'overflow: hidden' -->
				<div class="vwc-card">
					<div class="vwc-card-container">
						<div class="vwc-card-media">
							<slot name="media"></slot>
						</div>
						<slot name="main">
							<div class="vwc-card-content">
								<div class="vwc-card-wrapper">
									${this.renderHeader()}
									<slot name="meta"></slot>
								</div>
								<div class="vwc-card-text">
									${this.text?this.text:Eo}
								</div>
							</div>
						</slot>
						<div class="vwc-card-footer ${In(t)}">
							<slot name="footer" @slotchange="${this.footerSlotChanged}"></slot>
						</div>
					</div>
				</div>
			</vwc-elevation>
		`}renderHeader(){return Lt`
			<header class="vwc-card-header ${this.headerClass}">
				<slot name="graphic" @slotchange="${this.graphicSlotChanged}">
					${this.icon?this.renderIcon():""}
				</slot>
				<div>
					<div class="vwc-card-title">${this.heading}</div>
					<div class="vwc-card-subtitle">${this.subtitle}</div>
				</div>
			</header>`}renderIcon(){return Lt`<vwc-icon class="icon" inline type="${this.icon}"></vwc-icon>`}graphicSlotChanged(){var t;const i=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector("header"),n=i==null?void 0:i.querySelector('slot[name="graphic"]');this.IconSlottedItems=n.assignedNodes(),this.headerContentExists?i==null||i.classList.remove("no-content"):i==null||i.classList.add("no-content")}footerSlotChanged(){var t;const i=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector('slot[name="footer"]');Ah(this,lg,Boolean(i.assignedNodes().length),"f"),this.requestUpdate()}};lg=new WeakMap;Ms.styles=iZ;z([ct({reflect:!0,type:String})],Ms.prototype,"heading",void 0);z([ct({reflect:!0,type:String})],Ms.prototype,"subtitle",void 0);z([ct({reflect:!0,attribute:"icon",type:String})],Ms.prototype,"icon",void 0);z([ct({reflect:!0,attribute:"text",type:String})],Ms.prototype,"text",void 0);z([ct({reflect:!1,attribute:"elevation",type:String})],Ms.prototype,"elevation",void 0);Ms=z([Yi("vwc-card")],Ms);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nC extends Ks{click(){this.formElement&&(this.formElement.focus(),this.formElement.click())}setAriaLabel(t){this.formElement&&this.formElement.setAttribute("aria-label",t)}firstUpdated(){super.firstUpdated(),this.shadowRoot&&this.mdcRoot.addEventListener("change",t=>{this.dispatchEvent(new Event("change",t))})}}nC.shadowRootOptions={mode:"open",delegatesFocus:!0};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Wl={CHECKED:"mdc-switch--checked",DISABLED:"mdc-switch--disabled"},u0={ARIA_CHECKED_ATTR:"aria-checked",NATIVE_CONTROL_SELECTOR:".mdc-switch__native-control",RIPPLE_SURFACE_SELECTOR:".mdc-switch__thumb-underlay"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var rZ=function(e){xo(t,e);function t(i){return e.call(this,on(on({},t.defaultAdapter),i))||this}return Object.defineProperty(t,"strings",{get:function(){return u0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return Wl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlChecked:function(){},setNativeControlDisabled:function(){},setNativeControlAttr:function(){}}},enumerable:!1,configurable:!0}),t.prototype.setChecked=function(i){this.adapter.setNativeControlChecked(i),this.updateAriaChecked(i),this.updateCheckedStyling(i)},t.prototype.setDisabled=function(i){this.adapter.setNativeControlDisabled(i),i?this.adapter.addClass(Wl.DISABLED):this.adapter.removeClass(Wl.DISABLED)},t.prototype.handleChange=function(i){var n=i.target;this.updateAriaChecked(n.checked),this.updateCheckedStyling(n.checked)},t.prototype.updateCheckedStyling=function(i){i?this.adapter.addClass(Wl.CHECKED):this.adapter.removeClass(Wl.CHECKED)},t.prototype.updateAriaChecked=function(i){this.adapter.setNativeControlAttr(u0.ARIA_CHECKED_ATTR,""+!!i)},t}(Yo),lZ=rZ;class No extends nC{constructor(){super(...arguments),this.checked=!1,this.disabled=!1,this.shouldRenderRipple=!1,this.mdcFoundationClass=lZ,this.rippleHandlers=new ud(()=>(this.shouldRenderRipple=!0,this.ripple))}changeHandler(t){this.mdcFoundation.handleChange(t),this.checked=this.formElement.checked}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{setNativeControlChecked:t=>{this.formElement.checked=t},setNativeControlDisabled:t=>{this.formElement.disabled=t},setNativeControlAttr:(t,i)=>{this.formElement.setAttribute(t,i)}})}renderRipple(){return this.shouldRenderRipple?Lt`
        <mwc-ripple
          .accent="${this.checked}"
          .disabled="${this.disabled}"
          unbounded>
        </mwc-ripple>`:""}focus(){const t=this.formElement;t&&(this.rippleHandlers.startFocus(),t.focus())}blur(){const t=this.formElement;t&&(this.rippleHandlers.endFocus(),t.blur())}render(){return Lt`
      <div class="mdc-switch">
        <div class="mdc-switch__track"></div>
        <div class="mdc-switch__thumb-underlay">
          ${this.renderRipple()}
          <div class="mdc-switch__thumb">
            <input
              type="checkbox"
              id="basic-switch"
              class="mdc-switch__native-control"
              role="switch"
              aria-label="${Oo(this.ariaLabel)}"
              aria-labelledby="${Oo(this.ariaLabelledBy)}"
              @change="${this.changeHandler}"
              @focus="${this.handleRippleFocus}"
              @blur="${this.handleRippleBlur}"
              @mousedown="${this.handleRippleMouseDown}"
              @mouseenter="${this.handleRippleMouseEnter}"
              @mouseleave="${this.handleRippleMouseLeave}"
              @touchstart="${this.handleRippleTouchStart}"
              @touchend="${this.handleRippleDeactivate}"
              @touchcancel="${this.handleRippleDeactivate}">
          </div>
        </div>
      </div>`}handleRippleMouseDown(t){const i=()=>{window.removeEventListener("mouseup",i),this.handleRippleDeactivate()};window.addEventListener("mouseup",i),this.rippleHandlers.startPress(t)}handleRippleTouchStart(t){this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}z([ct({type:Boolean}),pi(function(e){this.mdcFoundation.setChecked(e)})],No.prototype,"checked",void 0);z([ct({type:Boolean}),pi(function(e){this.mdcFoundation.setDisabled(e)})],No.prototype,"disabled",void 0);z([hc,ct({attribute:"aria-label"})],No.prototype,"ariaLabel",void 0);z([hc,ct({attribute:"aria-labelledby"})],No.prototype,"ariaLabelledBy",void 0);z([vi(".mdc-switch")],No.prototype,"mdcRoot",void 0);z([vi("input")],No.prototype,"formElement",void 0);z([Id("mwc-ripple")],No.prototype,"ripple",void 0);z([Ri()],No.prototype,"shouldRenderRipple",void 0);z([hl({passive:!0})],No.prototype,"handleRippleMouseDown",null);z([hl({passive:!0})],No.prototype,"handleRippleTouchStart",null);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const $h=bi`.mdc-switch__thumb-underlay{left:-14px;right:initial;top:-17px;width:48px;height:48px}[dir=rtl] .mdc-switch__thumb-underlay,.mdc-switch__thumb-underlay[dir=rtl]{left:initial;right:-14px}.mdc-switch__native-control{width:64px;height:48px}.mdc-switch{display:inline-block;position:relative;outline:none;user-select:none}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:#018786;background-color:var(--mdc-theme-secondary, #018786)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:#018786;background-color:var(--mdc-theme-secondary, #018786);border-color:#018786;border-color:var(--mdc-theme-secondary, #018786)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:#000;background-color:var(--mdc-theme-on-surface, #000)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:#fff;background-color:var(--mdc-theme-surface, #fff);border-color:#fff;border-color:var(--mdc-theme-surface, #fff)}.mdc-switch__native-control{left:0;right:initial;position:absolute;top:0;margin:0;opacity:0;cursor:pointer;pointer-events:auto;transition:transform 90ms cubic-bezier(0.4, 0, 0.2, 1)}[dir=rtl] .mdc-switch__native-control,.mdc-switch__native-control[dir=rtl]{left:initial;right:0}.mdc-switch__track{box-sizing:border-box;width:36px;height:14px;border:1px solid transparent;border-radius:7px;opacity:.38;transition:opacity 90ms cubic-bezier(0.4, 0, 0.2, 1),background-color 90ms cubic-bezier(0.4, 0, 0.2, 1),border-color 90ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-switch__thumb-underlay{display:flex;position:absolute;align-items:center;justify-content:center;transform:translateX(0);transition:transform 90ms cubic-bezier(0.4, 0, 0.2, 1),background-color 90ms cubic-bezier(0.4, 0, 0.2, 1),border-color 90ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-switch__thumb{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0,0,0,.12);box-sizing:border-box;width:20px;height:20px;border:10px solid;border-radius:50%;pointer-events:none;z-index:1}.mdc-switch--checked .mdc-switch__track{opacity:.54}.mdc-switch--checked .mdc-switch__thumb-underlay{transform:translateX(16px)}[dir=rtl] .mdc-switch--checked .mdc-switch__thumb-underlay,.mdc-switch--checked .mdc-switch__thumb-underlay[dir=rtl]{transform:translateX(-16px)}.mdc-switch--checked .mdc-switch__native-control{transform:translateX(-16px)}[dir=rtl] .mdc-switch--checked .mdc-switch__native-control,.mdc-switch--checked .mdc-switch__native-control[dir=rtl]{transform:translateX(16px)}.mdc-switch--disabled{opacity:.38;pointer-events:none}.mdc-switch--disabled .mdc-switch__thumb{border-width:1px}.mdc-switch--disabled .mdc-switch__native-control{cursor:default;pointer-events:none}:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:transparent}`;let tc=class extends No{};tc.styles=[$h];tc=z([Yi("mwc-switch")],tc);const cZ=bi`:host{--knob-size:12px;--knob-translate-x:16px;contain:content}.mdc-switch{--mdc-theme-secondary: var(--connotation);--vvd-switch-unchecked-background: trasparent;--vvd-switch-unchecked-background-hover: var(--vvd-color-neutral);--vvd-switch-unchecked-background-focus: var(--vvd-color-neutral);--vvd-switch-disabled-background: var(--vvd-color-neutral-30);--mdc-theme-surface: var(--vvd-color-neutral-10);--mdc-theme-on-surface: var(--vvd-switch-unchecked-background)}.mdc-switch.connotation-primary,.mdc-switch:not(.connotation-cta):not(.connotation-success):not(.connotation-alert){--connotation:var(--vvd-color-primary);--on-connotation:var(--vvd-color-on-primary)}.mdc-switch.connotation-cta{--connotation:var(--vvd-color-cta);--on-connotation:var(--vvd-color-on-cta)}.mdc-switch.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}.mdc-switch.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{--knob-size:14px;background-color:#f2f2f2}.mdc-switch.mdc-switch--checked .mdc-switch__thumb-underlay{transform:translateX(var(--knob-translate-x))}.mdc-switch.mdc-switch--checked .mdc-switch__native-control{transform:translateX(calc(var(--knob-translate-x) * -1))}.mdc-switch.mdc-switch--checked:hover .mdc-switch__thumb,.mdc-switch.mdc-switch--checked:hover .mdc-switch__track{filter:brightness(90%)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{border:1px solid #757575}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:#757575}.mdc-switch:not(.mdc-switch--checked):hover .mdc-switch__thumb{background-color:var(--vvd-color-neutral-70)}.mdc-switch:not(.mdc-switch--checked):hover .mdc-switch__track{border-color:var(--vvd-color-neutral-70)}.mdc-switch:not(.connotation-cta,.connotation-success,.connotation-alert,.mdc-switch--disabled).mdc-switch--checked .mdc-switch__thumb{background-color:var(--vvd-color-neutral-20)}.mdc-switch .mdc-switch__track,.mdc-switch.mdc-switch--checked .mdc-switch__track{opacity:initial}.mdc-switch.mdc-switch--disabled{opacity:initial}.mdc-switch.mdc-switch--disabled .mdc-switch__track{opacity:initial}.mdc-switch.mdc-switch--disabled.mdc-switch--checked .mdc-switch__track{background-color:var(--vvd-switch-disabled-background)}.mdc-switch.mdc-switch--disabled.mdc-switch--checked .mdc-switch__thumb{background-color:var(--vvd-color-neutral-20)}.mdc-switch.mdc-switch--disabled:not(.mdc-switch--checked) .mdc-switch__track{border-color:var(--vvd-switch-disabled-background)}.mdc-switch.mdc-switch--disabled:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:var(--vvd-switch-disabled-background)}.mdc-switch,.mdc-switch__native-control{width:36px;height:20px}.mdc-switch__track{width:100%;height:100%;border-width:0;border-radius:16px}.mdc-switch__thumb-underlay{top:0;left:0;width:20px;height:100%}.mdc-switch__thumb-underlay .mdc-switch__thumb{width:var(--knob-size);height:var(--knob-size);border:0;box-shadow:none}:host([enlarged]){--knob-size:24px;--knob-translate-x:28px}:host([enlarged]) .mdc-switch,:host([enlarged]) .mdc-switch__native-control{width:60px;height:32px}:host([enlarged]) .mdc-switch__thumb-underlay{width:32px}:host([enlarged]) .mdc-switch.mdc-switch--checked .mdc-switch__thumb{--knob-size:26px}`;tc.styles=[bc,$h,cZ];let Wg=class extends tc{constructor(){super(...arguments),this.enlarged=!1}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation}}render(){return Lt`
      <div class="mdc-switch ${In(this.getRenderClasses())}">
        <div class="mdc-switch__track"></div>
        <div class="mdc-switch__thumb-underlay">
          ${this.renderRipple()}
          <div class="mdc-switch__thumb">
            <input
              type="checkbox"
              id="basic-switch"
              class="mdc-switch__native-control"
              role="switch"
              aria-label="${Oo(this.ariaLabel)}"
							aria-checked="${this.checked}"
              aria-labelledby="${Oo(this.ariaLabelledBy)}"
              @change="${this.changeHandler}"
              @focus="${this.handleRippleFocus}"
              @blur="${this.handleRippleBlur}"
              @mousedown="${this.handleRippleMouseDown}"
              @mouseenter="${this.handleRippleMouseEnter}"
              @mouseleave="${this.handleRippleMouseLeave}"
              @touchstart="${this.handleRippleTouchStart}"
              @touchend="${this.handleRippleDeactivate}"
              @touchcancel="${this.handleRippleDeactivate}">
          </div>
        </div>
      </div>`}async firstUpdated(){await super.firstUpdated(),Wh(this)}renderRipple(){return Lt``}};z([ct({type:String,reflect:!0})],Wg.prototype,"connotation",void 0);z([ct({type:Boolean,reflect:!0})],Wg.prototype,"enlarged",void 0);Wg=z([Yi("vwc-switch")],Wg);const gZ=bi`:host{font:400 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);display:flex;align-items:center;color:var(--vvd-formfield-label-idle-ink);margin-block-start:4px;min-block-size:16px}:host .helper-icon{display:none;color:var(--vvd-formfield-label-error-ink)}:host .helper-text{overflow:hidden;margin-inline-start:16px;text-overflow:ellipsis;white-space:nowrap}:host([is-error]){color:var(--vvd-color-on-canvas)}:host([is-error]) .helper-icon{display:flex;flex-shrink:0}:host([is-error]) .helper-text{margin-inline-start:4px}:host([disabled]){color:var(--vvd-formfield-disabled-ink)}`;let Bg=class extends jn{constructor(){super(...arguments),this.isError=!1}render(){return Lt`
			<vwc-icon class="helper-icon" type="info-negative" size="small"></vwc-icon>
			<span class="helper-text"><slot></slot></span>
		`}};Bg.styles=[gZ];z([ct({attribute:"is-error",type:Boolean,reflect:!0})],Bg.prototype,"isError",void 0);Bg=z([Yi("vwc-helper-message")],Bg);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var dZ={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},m0={NOTCH_ELEMENT_PADDING:8},aZ={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var IZ=function(e){xo(t,e);function t(i){return e.call(this,on(on({},t.defaultAdapter),i))||this}return Object.defineProperty(t,"strings",{get:function(){return dZ},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return aZ},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return m0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),t.prototype.notch=function(i){var n=t.cssClasses.OUTLINE_NOTCHED;i>0&&(i+=m0.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(i),this.adapter.addClass(n)},t.prototype.closeNotch=function(){var i=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(i),this.adapter.removeNotchWidthProperty()},t}(Yo);class pc extends Ks{constructor(){super(...arguments),this.mdcFoundationClass=IZ,this.width=0,this.open=!1,this.lastOpen=this.open}createAdapter(){return{addClass:t=>this.mdcRoot.classList.add(t),removeClass:t=>this.mdcRoot.classList.remove(t),setNotchWidthProperty:t=>this.notchElement.style.setProperty("width",`${t}px`),removeNotchWidthProperty:()=>this.notchElement.style.removeProperty("width")}}openOrClose(t,i){!this.mdcFoundation||(t&&i!==void 0?this.mdcFoundation.notch(i):this.mdcFoundation.closeNotch())}render(){this.openOrClose(this.open,this.width);const t=In({"mdc-notched-outline--notched":this.open});return Lt`
      <span class="mdc-notched-outline ${t}">
        <span class="mdc-notched-outline__leading"></span>
        <span class="mdc-notched-outline__notch">
          <slot></slot>
        </span>
        <span class="mdc-notched-outline__trailing"></span>
      </span>`}}z([vi(".mdc-notched-outline")],pc.prototype,"mdcRoot",void 0);z([ct({type:Number})],pc.prototype,"width",void 0);z([ct({type:Boolean,reflect:!0})],pc.prototype,"open",void 0);z([vi(".mdc-notched-outline__notch")],pc.prototype,"notchElement",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const tb=bi`.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(100% / 0.75)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}:host{display:block;position:absolute;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] :host,:host([dir=rtl]){text-align:right}::slotted(.mdc-floating-label){display:inline-block;position:relative;top:17px;bottom:auto;max-width:100%}::slotted(.mdc-floating-label--float-above){text-overflow:clip}.mdc-notched-outline--upgraded ::slotted(.mdc-floating-label--float-above){max-width:calc(100% / 0.75)}.mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-notched-outline .mdc-notched-outline__leading,.mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px)) * 2)}}.mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-color:var(--mdc-notched-outline-border-color, var(--mdc-theme-primary, #6200ee));border-width:1px;border-width:var(--mdc-notched-outline-stroke-width, 1px)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0;padding-top:var(--mdc-notched-outline-notch-offset, 0)}`;let ec=class extends pc{};ec.styles=[tb];ec=z([Yi("mwc-notched-outline")],ec);ec.styles=[tb];let h0=class extends ec{};h0=z([Yi("vwc-notched-outline")],h0);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Un extends jn{constructor(){super(...arguments),this.value="",this.group=null,this.tabindex=-1,this.disabled=!1,this.twoline=!1,this.activated=!1,this.graphic=null,this.multipleGraphics=!1,this.hasMeta=!1,this.noninteractive=!1,this.selected=!1,this.shouldRenderRipple=!1,this._managingList=null,this.boundOnClick=this.onClick.bind(this),this._firstChanged=!0,this._skipPropRequest=!1,this.rippleHandlers=new ud(()=>(this.shouldRenderRipple=!0,this.ripple)),this.listeners=[{target:this,eventNames:["click"],cb:()=>{this.onClick()}},{target:this,eventNames:["mouseenter"],cb:this.rippleHandlers.startHover},{target:this,eventNames:["mouseleave"],cb:this.rippleHandlers.endHover},{target:this,eventNames:["focus"],cb:this.rippleHandlers.startFocus},{target:this,eventNames:["blur"],cb:this.rippleHandlers.endFocus},{target:this,eventNames:["mousedown","touchstart"],cb:t=>{const i=t.type;this.onDown(i==="mousedown"?"mouseup":"touchend",t)}}]}get text(){const t=this.textContent;return t?t.trim():""}render(){const t=this.renderText(),i=this.graphic?this.renderGraphic():Lt``,n=this.hasMeta?this.renderMeta():Lt``;return Lt`
      ${this.renderRipple()}
      ${i}
      ${t}
      ${n}`}renderRipple(){return this.shouldRenderRipple?Lt`
      <mwc-ripple
        .activated=${this.activated}>
      </mwc-ripple>`:this.activated?Lt`<div class="fake-activated-ripple"></div>`:""}renderGraphic(){const t={multi:this.multipleGraphics};return Lt`
      <span class="mdc-deprecated-list-item__graphic material-icons ${In(t)}">
        <slot name="graphic"></slot>
      </span>`}renderMeta(){return Lt`
      <span class="mdc-deprecated-list-item__meta material-icons">
        <slot name="meta"></slot>
      </span>`}renderText(){const t=this.twoline?this.renderTwoline():this.renderSingleLine();return Lt`
      <span class="mdc-deprecated-list-item__text">
        ${t}
      </span>`}renderSingleLine(){return Lt`<slot></slot>`}renderTwoline(){return Lt`
      <span class="mdc-deprecated-list-item__primary-text">
        <slot></slot>
      </span>
      <span class="mdc-deprecated-list-item__secondary-text">
        <slot name="secondary"></slot>
      </span>
    `}onClick(){this.fireRequestSelected(!this.selected,"interaction")}onDown(t,i){const n=()=>{window.removeEventListener(t,n),this.rippleHandlers.endPress()};window.addEventListener(t,n),this.rippleHandlers.startPress(i)}fireRequestSelected(t,i){if(this.noninteractive)return;const n=new CustomEvent("request-selected",{bubbles:!0,composed:!0,detail:{source:i,selected:t}});this.dispatchEvent(n)}connectedCallback(){super.connectedCallback(),this.noninteractive||this.setAttribute("mwc-list-item","");for(const t of this.listeners)for(const i of t.eventNames)t.target.addEventListener(i,t.cb,{passive:!0})}disconnectedCallback(){super.disconnectedCallback();for(const t of this.listeners)for(const i of t.eventNames)t.target.removeEventListener(i,t.cb);this._managingList&&(this._managingList.debouncedLayout?this._managingList.debouncedLayout(!0):this._managingList.layout(!0))}firstUpdated(){const t=new Event("list-item-rendered",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}z([vi("slot")],Un.prototype,"slotElement",void 0);z([Id("mwc-ripple")],Un.prototype,"ripple",void 0);z([ct({type:String})],Un.prototype,"value",void 0);z([ct({type:String,reflect:!0})],Un.prototype,"group",void 0);z([ct({type:Number,reflect:!0})],Un.prototype,"tabindex",void 0);z([ct({type:Boolean,reflect:!0}),pi(function(e){e?this.setAttribute("aria-disabled","true"):this.setAttribute("aria-disabled","false")})],Un.prototype,"disabled",void 0);z([ct({type:Boolean,reflect:!0})],Un.prototype,"twoline",void 0);z([ct({type:Boolean,reflect:!0})],Un.prototype,"activated",void 0);z([ct({type:String,reflect:!0})],Un.prototype,"graphic",void 0);z([ct({type:Boolean})],Un.prototype,"multipleGraphics",void 0);z([ct({type:Boolean})],Un.prototype,"hasMeta",void 0);z([ct({type:Boolean,reflect:!0}),pi(function(e){e?(this.removeAttribute("aria-checked"),this.removeAttribute("mwc-list-item"),this.selected=!1,this.activated=!1,this.tabIndex=-1):this.setAttribute("mwc-list-item","")})],Un.prototype,"noninteractive",void 0);z([ct({type:Boolean,reflect:!0}),pi(function(e){const t=this.getAttribute("role"),i=t==="gridcell"||t==="option"||t==="row"||t==="tab";if(i&&e?this.setAttribute("aria-selected","true"):i&&this.setAttribute("aria-selected","false"),this._firstChanged){this._firstChanged=!1;return}this._skipPropRequest||this.fireRequestSelected(e,"property")})],Un.prototype,"selected",void 0);z([Ri()],Un.prototype,"shouldRenderRipple",void 0);z([Ri()],Un.prototype,"_managingList",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const eb=bi`:host{cursor:pointer;user-select:none;-webkit-tap-highlight-color:transparent;height:48px;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mdc-list-side-padding, 16px);padding-right:var(--mdc-list-side-padding, 16px);outline:none;height:48px;color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87))}:host:focus{outline:none}:host([activated]){color:#6200ee;color:var(--mdc-theme-primary, #6200ee);--mdc-ripple-color: var( --mdc-theme-primary, #6200ee )}:host([activated]) .mdc-deprecated-list-item__graphic{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}:host([activated]) .fake-activated-ripple::before{position:absolute;display:block;top:0;bottom:0;left:0;right:0;width:100%;height:100%;pointer-events:none;z-index:1;content:"";opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12);background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-deprecated-list-item__graphic{flex-shrink:0;align-items:center;justify-content:center;fill:currentColor;display:inline-flex}.mdc-deprecated-list-item__graphic ::slotted(*){flex-shrink:0;align-items:center;justify-content:center;fill:currentColor;width:100%;height:100%;text-align:center}.mdc-deprecated-list-item__meta{width:var(--mdc-list-item-meta-size, 24px);height:var(--mdc-list-item-meta-size, 24px);margin-left:auto;margin-right:0;color:rgba(0, 0, 0, 0.38);color:var(--mdc-theme-text-hint-on-background, rgba(0, 0, 0, 0.38))}.mdc-deprecated-list-item__meta.multi{width:auto}.mdc-deprecated-list-item__meta ::slotted(*){width:var(--mdc-list-item-meta-size, 24px);line-height:var(--mdc-list-item-meta-size, 24px)}.mdc-deprecated-list-item__meta ::slotted(.material-icons),.mdc-deprecated-list-item__meta ::slotted(mwc-icon){line-height:var(--mdc-list-item-meta-size, 24px) !important}.mdc-deprecated-list-item__meta ::slotted(:not(.material-icons):not(mwc-icon)){-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-caption-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.75rem;font-size:var(--mdc-typography-caption-font-size, 0.75rem);line-height:1.25rem;line-height:var(--mdc-typography-caption-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-caption-font-weight, 400);letter-spacing:0.0333333333em;letter-spacing:var(--mdc-typography-caption-letter-spacing, 0.0333333333em);text-decoration:inherit;text-decoration:var(--mdc-typography-caption-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-caption-text-transform, inherit)}[dir=rtl] .mdc-deprecated-list-item__meta,.mdc-deprecated-list-item__meta[dir=rtl]{margin-left:0;margin-right:auto}.mdc-deprecated-list-item__meta ::slotted(*){width:100%;height:100%}.mdc-deprecated-list-item__text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-deprecated-list-item__text ::slotted([for]),.mdc-deprecated-list-item__text[for]{pointer-events:none}.mdc-deprecated-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal;margin-bottom:-20px;display:block}.mdc-deprecated-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-deprecated-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-deprecated-list-item__secondary-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-body2-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-body2-font-size, 0.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight, 400);letter-spacing:0.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing, 0.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform, inherit);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal;display:block}.mdc-deprecated-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-deprecated-list--dense .mdc-deprecated-list-item__secondary-text{font-size:inherit}* ::slotted(a),a{color:inherit;text-decoration:none}:host([twoline]){height:72px}:host([twoline]) .mdc-deprecated-list-item__text{align-self:flex-start}:host([disabled]),:host([noninteractive]){cursor:default;pointer-events:none}:host([disabled]) .mdc-deprecated-list-item__text ::slotted(*){opacity:.38}:host([disabled]) .mdc-deprecated-list-item__text ::slotted(*),:host([disabled]) .mdc-deprecated-list-item__primary-text ::slotted(*),:host([disabled]) .mdc-deprecated-list-item__secondary-text ::slotted(*){color:#000;color:var(--mdc-theme-on-surface, #000)}.mdc-deprecated-list-item__secondary-text ::slotted(*){color:rgba(0, 0, 0, 0.54);color:var(--mdc-theme-text-secondary-on-background, rgba(0, 0, 0, 0.54))}.mdc-deprecated-list-item__graphic ::slotted(*){background-color:transparent;color:rgba(0, 0, 0, 0.38);color:var(--mdc-theme-text-icon-on-background, rgba(0, 0, 0, 0.38))}.mdc-deprecated-list-group__subheader ::slotted(*){color:rgba(0, 0, 0, 0.87);color:var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87))}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic{width:var(--mdc-list-item-graphic-size, 40px);height:var(--mdc-list-item-graphic-size, 40px)}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic.multi{width:auto}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic ::slotted(*){width:var(--mdc-list-item-graphic-size, 40px);line-height:var(--mdc-list-item-graphic-size, 40px)}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic ::slotted(.material-icons),:host([graphic=avatar]) .mdc-deprecated-list-item__graphic ::slotted(mwc-icon){line-height:var(--mdc-list-item-graphic-size, 40px) !important}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic ::slotted(*){border-radius:50%}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic,:host([graphic=medium]) .mdc-deprecated-list-item__graphic,:host([graphic=large]) .mdc-deprecated-list-item__graphic,:host([graphic=control]) .mdc-deprecated-list-item__graphic{margin-left:0;margin-right:var(--mdc-list-item-graphic-margin, 16px)}[dir=rtl] :host([graphic=avatar]) .mdc-deprecated-list-item__graphic,[dir=rtl] :host([graphic=medium]) .mdc-deprecated-list-item__graphic,[dir=rtl] :host([graphic=large]) .mdc-deprecated-list-item__graphic,[dir=rtl] :host([graphic=control]) .mdc-deprecated-list-item__graphic,:host([graphic=avatar]) .mdc-deprecated-list-item__graphic[dir=rtl],:host([graphic=medium]) .mdc-deprecated-list-item__graphic[dir=rtl],:host([graphic=large]) .mdc-deprecated-list-item__graphic[dir=rtl],:host([graphic=control]) .mdc-deprecated-list-item__graphic[dir=rtl]{margin-left:var(--mdc-list-item-graphic-margin, 16px);margin-right:0}:host([graphic=icon]) .mdc-deprecated-list-item__graphic{width:var(--mdc-list-item-graphic-size, 24px);height:var(--mdc-list-item-graphic-size, 24px);margin-left:0;margin-right:var(--mdc-list-item-graphic-margin, 32px)}:host([graphic=icon]) .mdc-deprecated-list-item__graphic.multi{width:auto}:host([graphic=icon]) .mdc-deprecated-list-item__graphic ::slotted(*){width:var(--mdc-list-item-graphic-size, 24px);line-height:var(--mdc-list-item-graphic-size, 24px)}:host([graphic=icon]) .mdc-deprecated-list-item__graphic ::slotted(.material-icons),:host([graphic=icon]) .mdc-deprecated-list-item__graphic ::slotted(mwc-icon){line-height:var(--mdc-list-item-graphic-size, 24px) !important}[dir=rtl] :host([graphic=icon]) .mdc-deprecated-list-item__graphic,:host([graphic=icon]) .mdc-deprecated-list-item__graphic[dir=rtl]{margin-left:var(--mdc-list-item-graphic-margin, 32px);margin-right:0}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:56px}:host([graphic=medium]:not([twoLine])),:host([graphic=large]:not([twoLine])){height:72px}:host([graphic=medium]) .mdc-deprecated-list-item__graphic,:host([graphic=large]) .mdc-deprecated-list-item__graphic{width:var(--mdc-list-item-graphic-size, 56px);height:var(--mdc-list-item-graphic-size, 56px)}:host([graphic=medium]) .mdc-deprecated-list-item__graphic.multi,:host([graphic=large]) .mdc-deprecated-list-item__graphic.multi{width:auto}:host([graphic=medium]) .mdc-deprecated-list-item__graphic ::slotted(*),:host([graphic=large]) .mdc-deprecated-list-item__graphic ::slotted(*){width:var(--mdc-list-item-graphic-size, 56px);line-height:var(--mdc-list-item-graphic-size, 56px)}:host([graphic=medium]) .mdc-deprecated-list-item__graphic ::slotted(.material-icons),:host([graphic=medium]) .mdc-deprecated-list-item__graphic ::slotted(mwc-icon),:host([graphic=large]) .mdc-deprecated-list-item__graphic ::slotted(.material-icons),:host([graphic=large]) .mdc-deprecated-list-item__graphic ::slotted(mwc-icon){line-height:var(--mdc-list-item-graphic-size, 56px) !important}:host([graphic=large]){padding-left:0px}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ic=class extends Un{};ic.styles=[eb];ic=z([Yi("mwc-list-item")],ic);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var We={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},_n=new Set;_n.add(We.BACKSPACE);_n.add(We.ENTER);_n.add(We.SPACEBAR);_n.add(We.PAGE_UP);_n.add(We.PAGE_DOWN);_n.add(We.END);_n.add(We.HOME);_n.add(We.ARROW_LEFT);_n.add(We.ARROW_UP);_n.add(We.ARROW_RIGHT);_n.add(We.ARROW_DOWN);_n.add(We.DELETE);_n.add(We.ESCAPE);_n.add(We.TAB);var no={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Pn=new Map;Pn.set(no.BACKSPACE,We.BACKSPACE);Pn.set(no.ENTER,We.ENTER);Pn.set(no.SPACEBAR,We.SPACEBAR);Pn.set(no.PAGE_UP,We.PAGE_UP);Pn.set(no.PAGE_DOWN,We.PAGE_DOWN);Pn.set(no.END,We.END);Pn.set(no.HOME,We.HOME);Pn.set(no.ARROW_LEFT,We.ARROW_LEFT);Pn.set(no.ARROW_UP,We.ARROW_UP);Pn.set(no.ARROW_RIGHT,We.ARROW_RIGHT);Pn.set(no.ARROW_DOWN,We.ARROW_DOWN);Pn.set(no.DELETE,We.DELETE);Pn.set(no.ESCAPE,We.ESCAPE);Pn.set(no.TAB,We.TAB);var Us=new Set;Us.add(We.PAGE_UP);Us.add(We.PAGE_DOWN);Us.add(We.END);Us.add(We.HOME);Us.add(We.ARROW_LEFT);Us.add(We.ARROW_UP);Us.add(We.ARROW_RIGHT);Us.add(We.ARROW_DOWN);function gn(e){var t=e.key;if(_n.has(t))return t;var i=Pn.get(e.keyCode);return i||We.UNKNOWN}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Zs,is,Wi={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};Zs={},Zs[""+Wi.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",Zs[""+Wi.LIST_ITEM_CLASS]="mdc-list-item",Zs[""+Wi.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",Zs[""+Wi.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",Zs[""+Wi.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",Zs[""+Wi.ROOT]="mdc-list";var vr=(is={},is[""+Wi.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",is[""+Wi.LIST_ITEM_CLASS]="mdc-deprecated-list-item",is[""+Wi.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",is[""+Wi.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",is[""+Wi.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",is[""+Wi.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",is[""+Wi.ROOT]="mdc-deprecated-list",is),Mc={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+Wi.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Wi.LIST_ITEM_CLASS+` a,
    .`+vr[Wi.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+vr[Wi.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+Wi.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Wi.LIST_ITEM_CLASS+` a,
    .`+Wi.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+Wi.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+vr[Wi.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+vr[Wi.LIST_ITEM_CLASS]+` a,
    .`+vr[Wi.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+vr[Wi.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},Qn={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ja=(e,t)=>e-t,CZ=(e,t)=>{const i=Array.from(e),n=Array.from(t),o={added:[],removed:[]},l=i.sort(ja),I=n.sort(ja);let m=0,y=0;for(;m<l.length||y<I.length;){const H=l[m],L=I[y];if(H===L){m++,y++;continue}if(H!==void 0&&(L===void 0||H<L)){o.removed.push(H),m++;continue}if(L!==void 0&&(H===void 0||L<H)){o.added.push(L),y++;continue}}return o},uZ=["input","button","textarea","select"];function Ll(e){return e instanceof Set}const oa=e=>{const t=e===Qn.UNSET_INDEX?new Set:e;return Ll(t)?new Set(t):new Set([t])};class oC extends Yo{constructor(t){super(Object.assign(Object.assign({},oC.defaultAdapter),t)),this.isMulti_=!1,this.wrapFocus_=!1,this.isVertical_=!0,this.selectedIndex_=Qn.UNSET_INDEX,this.focusedItemIndex_=Qn.UNSET_INDEX,this.useActivatedClass_=!1,this.ariaCurrentAttrValue_=null}static get strings(){return Mc}static get numbers(){return Qn}static get defaultAdapter(){return{focusItemAtIndex:()=>{},getFocusedElementIndex:()=>0,getListItemCount:()=>0,isFocusInsideList:()=>!1,isRootFocused:()=>!1,notifyAction:()=>{},notifySelected:()=>{},getSelectedStateForElementIndex:()=>!1,setDisabledStateForElementIndex:()=>{},getDisabledStateForElementIndex:()=>!1,setSelectedStateForElementIndex:()=>{},setActivatedStateForElementIndex:()=>{},setTabIndexForElementIndex:()=>{},setAttributeForElementIndex:()=>{},getAttributeForElementIndex:()=>null}}setWrapFocus(t){this.wrapFocus_=t}setMulti(t){this.isMulti_=t;const i=this.selectedIndex_;if(t){if(!Ll(i)){const n=i===Qn.UNSET_INDEX;this.selectedIndex_=n?new Set:new Set([i])}}else if(Ll(i))if(i.size){const n=Array.from(i).sort(ja);this.selectedIndex_=n[0]}else this.selectedIndex_=Qn.UNSET_INDEX}setVerticalOrientation(t){this.isVertical_=t}setUseActivatedClass(t){this.useActivatedClass_=t}getSelectedIndex(){return this.selectedIndex_}setSelectedIndex(t){!this.isIndexValid_(t)||(this.isMulti_?this.setMultiSelectionAtIndex_(oa(t)):this.setSingleSelectionAtIndex_(t))}handleFocusIn(t,i){i>=0&&this.adapter.setTabIndexForElementIndex(i,0)}handleFocusOut(t,i){i>=0&&this.adapter.setTabIndexForElementIndex(i,-1),setTimeout(()=>{this.adapter.isFocusInsideList()||this.setTabindexToFirstSelectedItem_()},0)}handleKeydown(t,i,n){const o=gn(t)==="ArrowLeft",l=gn(t)==="ArrowUp",I=gn(t)==="ArrowRight",m=gn(t)==="ArrowDown",y=gn(t)==="Home",H=gn(t)==="End",L=gn(t)==="Enter",K=gn(t)==="Spacebar";if(this.adapter.isRootFocused()){l||H?(t.preventDefault(),this.focusLastElement()):(m||y)&&(t.preventDefault(),this.focusFirstElement());return}let nt=this.adapter.getFocusedElementIndex();if(nt===-1&&(nt=n,nt<0))return;let dt;if(this.isVertical_&&m||!this.isVertical_&&I)this.preventDefaultEvent(t),dt=this.focusNextElement(nt);else if(this.isVertical_&&l||!this.isVertical_&&o)this.preventDefaultEvent(t),dt=this.focusPrevElement(nt);else if(y)this.preventDefaultEvent(t),dt=this.focusFirstElement();else if(H)this.preventDefaultEvent(t),dt=this.focusLastElement();else if((L||K)&&i){const P=t.target;if(P&&P.tagName==="A"&&L)return;this.preventDefaultEvent(t),this.setSelectedIndexOnAction_(nt,!0)}this.focusedItemIndex_=nt,dt!==void 0&&(this.setTabindexAtIndex_(dt),this.focusedItemIndex_=dt)}handleSingleSelection(t,i,n){t!==Qn.UNSET_INDEX&&(this.setSelectedIndexOnAction_(t,i,n),this.setTabindexAtIndex_(t),this.focusedItemIndex_=t)}focusNextElement(t){const i=this.adapter.getListItemCount();let n=t+1;if(n>=i)if(this.wrapFocus_)n=0;else return t;return this.adapter.focusItemAtIndex(n),n}focusPrevElement(t){let i=t-1;if(i<0)if(this.wrapFocus_)i=this.adapter.getListItemCount()-1;else return t;return this.adapter.focusItemAtIndex(i),i}focusFirstElement(){return this.adapter.focusItemAtIndex(0),0}focusLastElement(){const t=this.adapter.getListItemCount()-1;return this.adapter.focusItemAtIndex(t),t}setEnabled(t,i){!this.isIndexValid_(t)||this.adapter.setDisabledStateForElementIndex(t,!i)}preventDefaultEvent(t){const n=`${t.target.tagName}`.toLowerCase();uZ.indexOf(n)===-1&&t.preventDefault()}setSingleSelectionAtIndex_(t,i=!0){this.selectedIndex_!==t&&(this.selectedIndex_!==Qn.UNSET_INDEX&&(this.adapter.setSelectedStateForElementIndex(this.selectedIndex_,!1),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(this.selectedIndex_,!1)),i&&this.adapter.setSelectedStateForElementIndex(t,!0),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(t,!0),this.setAriaForSingleSelectionAtIndex_(t),this.selectedIndex_=t,this.adapter.notifySelected(t))}setMultiSelectionAtIndex_(t,i=!0){const n=oa(this.selectedIndex_),o=CZ(n,t);if(!(!o.removed.length&&!o.added.length)){for(const l of o.removed)i&&this.adapter.setSelectedStateForElementIndex(l,!1),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(l,!1);for(const l of o.added)i&&this.adapter.setSelectedStateForElementIndex(l,!0),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(l,!0);this.selectedIndex_=t,this.adapter.notifySelected(t,o)}}setAriaForSingleSelectionAtIndex_(t){this.selectedIndex_===Qn.UNSET_INDEX&&(this.ariaCurrentAttrValue_=this.adapter.getAttributeForElementIndex(t,Mc.ARIA_CURRENT));const i=this.ariaCurrentAttrValue_!==null,n=i?Mc.ARIA_CURRENT:Mc.ARIA_SELECTED;this.selectedIndex_!==Qn.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex_,n,"false");const o=i?this.ariaCurrentAttrValue_:"true";this.adapter.setAttributeForElementIndex(t,n,o)}setTabindexAtIndex_(t){this.focusedItemIndex_===Qn.UNSET_INDEX&&t!==0?this.adapter.setTabIndexForElementIndex(0,-1):this.focusedItemIndex_>=0&&this.focusedItemIndex_!==t&&this.adapter.setTabIndexForElementIndex(this.focusedItemIndex_,-1),this.adapter.setTabIndexForElementIndex(t,0)}setTabindexToFirstSelectedItem_(){let t=0;typeof this.selectedIndex_=="number"&&this.selectedIndex_!==Qn.UNSET_INDEX?t=this.selectedIndex_:Ll(this.selectedIndex_)&&this.selectedIndex_.size>0&&(t=Math.min(...this.selectedIndex_)),this.setTabindexAtIndex_(t)}isIndexValid_(t){if(t instanceof Set){if(!this.isMulti_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");if(t.size===0)return!0;{let i=!1;for(const n of t)if(i=this.isIndexInRange_(n),i)break;return i}}else if(typeof t=="number"){if(this.isMulti_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+t);return t===Qn.UNSET_INDEX||this.isIndexInRange_(t)}else return!1}isIndexInRange_(t){const i=this.adapter.getListItemCount();return t>=0&&t<i}setSelectedIndexOnAction_(t,i,n){if(this.adapter.getDisabledStateForElementIndex(t))return;let o=t;this.isMulti_&&(o=new Set([t])),this.isIndexValid_(o)&&(this.isMulti_?this.toggleMultiAtIndex(t,n,i):i||n?this.setSingleSelectionAtIndex_(t,i):this.selectedIndex_===t&&this.setSingleSelectionAtIndex_(Qn.UNSET_INDEX),i&&this.adapter.notifyAction(t))}toggleMultiAtIndex(t,i,n=!0){let o=!1;i===void 0?o=!this.adapter.getSelectedStateForElementIndex(t):o=i;const l=oa(this.selectedIndex_);o?l.add(t):l.delete(t),this.setMultiSelectionAtIndex_(l,n)}}function mZ(e,t=50){let i;return function(n=!0){clearTimeout(i),i=setTimeout(()=>{e(n)},t)}}const Lc=e=>e.hasAttribute("mwc-list-item");function hZ(){const e=this.itemsReadyResolver;this.itemsReady=new Promise(t=>this.itemsReadyResolver=t),e()}class mo extends Ks{constructor(){super(),this.mdcAdapter=null,this.mdcFoundationClass=oC,this.activatable=!1,this.multi=!1,this.wrapFocus=!1,this.itemRoles=null,this.innerRole=null,this.innerAriaLabel=null,this.rootTabbable=!1,this.previousTabindex=null,this.noninteractive=!1,this.itemsReadyResolver=()=>{},this.itemsReady=Promise.resolve([]),this.items_=[];const t=mZ(this.layout.bind(this));this.debouncedLayout=(i=!0)=>{hZ.call(this),t(i)}}async getUpdateComplete(){const t=await super.getUpdateComplete();return await this.itemsReady,t}get items(){return this.items_}updateItems(){var t;const i=(t=this.assignedElements)!==null&&t!==void 0?t:[],n=[];for(const I of i)Lc(I)&&(n.push(I),I._managingList=this),I.hasAttribute("divider")&&!I.hasAttribute("role")&&I.setAttribute("role","separator");this.items_=n;const o=new Set;if(this.items_.forEach((I,m)=>{this.itemRoles?I.setAttribute("role",this.itemRoles):I.removeAttribute("role"),I.selected&&o.add(m)}),this.multi)this.select(o);else{const I=o.size?o.entries().next().value[1]:-1;this.select(I)}const l=new Event("items-updated",{bubbles:!0,composed:!0});this.dispatchEvent(l)}get selected(){const t=this.index;if(!Ll(t))return t===-1?null:this.items[t];const i=[];for(const n of t)i.push(this.items[n]);return i}get index(){return this.mdcFoundation?this.mdcFoundation.getSelectedIndex():-1}render(){const t=this.innerRole===null?void 0:this.innerRole,i=this.innerAriaLabel===null?void 0:this.innerAriaLabel,n=this.rootTabbable?"0":"-1";return Lt`
      <!-- @ts-ignore -->
      <ul
          tabindex=${n}
          role="${Oo(t)}"
          aria-label="${Oo(i)}"
          class="mdc-deprecated-list"
          @keydown=${this.onKeydown}
          @focusin=${this.onFocusIn}
          @focusout=${this.onFocusOut}
          @request-selected=${this.onRequestSelected}
          @list-item-rendered=${this.onListItemConnected}>
        <slot></slot>
        ${this.renderPlaceholder()}
      </ul>
    `}renderPlaceholder(){var t;const i=(t=this.assignedElements)!==null&&t!==void 0?t:[];return this.emptyMessage!==void 0&&i.length===0?Lt`
        <mwc-list-item noninteractive>${this.emptyMessage}</mwc-list-item>
      `:null}firstUpdated(){super.firstUpdated(),this.items.length||(this.mdcFoundation.setMulti(this.multi),this.layout())}onFocusIn(t){if(this.mdcFoundation&&this.mdcRoot){const i=this.getIndexOfTarget(t);this.mdcFoundation.handleFocusIn(t,i)}}onFocusOut(t){if(this.mdcFoundation&&this.mdcRoot){const i=this.getIndexOfTarget(t);this.mdcFoundation.handleFocusOut(t,i)}}onKeydown(t){if(this.mdcFoundation&&this.mdcRoot){const i=this.getIndexOfTarget(t),n=t.target,o=Lc(n);this.mdcFoundation.handleKeydown(t,o,i)}}onRequestSelected(t){if(this.mdcFoundation){let i=this.getIndexOfTarget(t);if(i===-1&&(this.layout(),i=this.getIndexOfTarget(t),i===-1)||this.items[i].disabled)return;const o=t.detail.selected,l=t.detail.source;this.mdcFoundation.handleSingleSelection(i,l==="interaction",o),t.stopPropagation()}}getIndexOfTarget(t){const i=this.items,n=t.composedPath();for(const o of n){let l=-1;if(Uh(o)&&Lc(o)&&(l=i.indexOf(o)),l!==-1)return l}return-1}createAdapter(){return this.mdcAdapter={getListItemCount:()=>this.mdcRoot?this.items.length:0,getFocusedElementIndex:this.getFocusedItemIndex,getAttributeForElementIndex:(t,i)=>{if(!this.mdcRoot)return"";const o=this.items[t];return o?o.getAttribute(i):""},setAttributeForElementIndex:(t,i,n)=>{if(!this.mdcRoot)return;const o=this.items[t];o&&o.setAttribute(i,n)},focusItemAtIndex:t=>{const i=this.items[t];i&&i.focus()},setTabIndexForElementIndex:(t,i)=>{const n=this.items[t];n&&(n.tabindex=i)},notifyAction:t=>{const i={bubbles:!0,composed:!0};i.detail={index:t};const n=new CustomEvent("action",i);this.dispatchEvent(n)},notifySelected:(t,i)=>{const n={bubbles:!0,composed:!0};n.detail={index:t,diff:i};const o=new CustomEvent("selected",n);this.dispatchEvent(o)},isFocusInsideList:()=>Dh(this),isRootFocused:()=>{const t=this.mdcRoot;return t.getRootNode().activeElement===t},setDisabledStateForElementIndex:(t,i)=>{const n=this.items[t];!n||(n.disabled=i)},getDisabledStateForElementIndex:t=>{const i=this.items[t];return i?i.disabled:!1},setSelectedStateForElementIndex:(t,i)=>{const n=this.items[t];!n||(n.selected=i)},getSelectedStateForElementIndex:t=>{const i=this.items[t];return i?i.selected:!1},setActivatedStateForElementIndex:(t,i)=>{const n=this.items[t];!n||(n.activated=i)}},this.mdcAdapter}selectUi(t,i=!1){const n=this.items[t];n&&(n.selected=!0,n.activated=i)}deselectUi(t){const i=this.items[t];i&&(i.selected=!1,i.activated=!1)}select(t){!this.mdcFoundation||this.mdcFoundation.setSelectedIndex(t)}toggle(t,i){this.multi&&this.mdcFoundation.toggleMultiAtIndex(t,i)}onListItemConnected(t){const i=t.target;this.layout(this.items.indexOf(i)===-1)}layout(t=!0){t&&this.updateItems();const i=this.items[0];for(const n of this.items)n.tabindex=-1;i&&(this.noninteractive?this.previousTabindex||(this.previousTabindex=i):i.tabindex=0),this.itemsReadyResolver()}getFocusedItemIndex(){if(!this.mdcRoot||!this.items.length)return-1;const t=tC();if(!t.length)return-1;for(let i=t.length-1;i>=0;i--){const n=t[i];if(Lc(n))return this.items.indexOf(n)}return-1}focusItemAtIndex(t){for(const i of this.items)if(i.tabindex===0){i.tabindex=-1;break}this.items[t].tabindex=0,this.items[t].focus()}focus(){const t=this.mdcRoot;t&&t.focus()}blur(){const t=this.mdcRoot;t&&t.blur()}}z([ct({type:String})],mo.prototype,"emptyMessage",void 0);z([vi(".mdc-deprecated-list")],mo.prototype,"mdcRoot",void 0);z([zh("",!0,"*")],mo.prototype,"assignedElements",void 0);z([zh("",!0,'[tabindex="0"]')],mo.prototype,"tabbableElements",void 0);z([ct({type:Boolean}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setUseActivatedClass(e)})],mo.prototype,"activatable",void 0);z([ct({type:Boolean}),pi(function(e,t){this.mdcFoundation&&this.mdcFoundation.setMulti(e),t!==void 0&&this.layout()})],mo.prototype,"multi",void 0);z([ct({type:Boolean}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setWrapFocus(e)})],mo.prototype,"wrapFocus",void 0);z([ct({type:String}),pi(function(e,t){t!==void 0&&this.updateItems()})],mo.prototype,"itemRoles",void 0);z([ct({type:String})],mo.prototype,"innerRole",void 0);z([ct({type:String})],mo.prototype,"innerAriaLabel",void 0);z([ct({type:Boolean})],mo.prototype,"rootTabbable",void 0);z([ct({type:Boolean,reflect:!0}),pi(function(e){var t,i;if(e){const n=(i=(t=this.tabbableElements)===null||t===void 0?void 0:t[0])!==null&&i!==void 0?i:null;this.previousTabindex=n,n&&n.setAttribute("tabindex","-1")}else!e&&this.previousTabindex&&(this.previousTabindex.setAttribute("tabindex","0"),this.previousTabindex=null)})],mo.prototype,"noninteractive",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const bZ=bi`@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}:host{display:block}.mdc-deprecated-list{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-subtitle1-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size, 1rem);line-height:1.75rem;line-height:var(--mdc-typography-subtitle1-line-height, 1.75rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight, 400);letter-spacing:0.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing, 0.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform, inherit);line-height:1.5rem;margin:0;padding:8px 0;list-style-type:none;color:rgba(0, 0, 0, 0.87);color:var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87));padding:var(--mdc-list-vertical-padding, 8px) 0}.mdc-deprecated-list:focus{outline:none}.mdc-deprecated-list-item{height:48px}.mdc-deprecated-list--dense{padding-top:4px;padding-bottom:4px;font-size:.812rem}.mdc-deprecated-list ::slotted([divider]){height:0;margin:0;border:none;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgba(0, 0, 0, 0.12)}.mdc-deprecated-list ::slotted([divider][padded]){margin:0 var(--mdc-list-side-padding, 16px)}.mdc-deprecated-list ::slotted([divider][inset]){margin-left:var(--mdc-list-inset-margin, 72px);margin-right:0;width:calc( 100% - var(--mdc-list-inset-margin, 72px) )}[dir=rtl] .mdc-deprecated-list ::slotted([divider][inset]),.mdc-deprecated-list ::slotted([divider][inset][dir=rtl]){margin-left:0;margin-right:var(--mdc-list-inset-margin, 72px)}.mdc-deprecated-list ::slotted([divider][inset][padded]){width:calc( 100% - var(--mdc-list-inset-margin, 72px) - var(--mdc-list-side-padding, 16px) )}.mdc-deprecated-list--dense ::slotted([mwc-list-item]){height:40px}.mdc-deprecated-list--dense ::slotted([mwc-list]){--mdc-list-item-graphic-size: 20px}.mdc-deprecated-list--two-line.mdc-deprecated-list--dense ::slotted([mwc-list-item]),.mdc-deprecated-list--avatar-list.mdc-deprecated-list--dense ::slotted([mwc-list-item]){height:60px}.mdc-deprecated-list--avatar-list.mdc-deprecated-list--dense ::slotted([mwc-list]){--mdc-list-item-graphic-size: 36px}:host([noninteractive]){pointer-events:none;cursor:default}.mdc-deprecated-list--dense ::slotted(.mdc-deprecated-list-item__primary-text){display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-deprecated-list--dense ::slotted(.mdc-deprecated-list-item__primary-text)::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-deprecated-list--dense ::slotted(.mdc-deprecated-list-item__primary-text)::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _a=class extends mo{};_a.styles=[bZ];_a=z([Yi("mwc-list")],_a);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var pZ={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},AZ={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},Jc={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67},$i;(function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"})($i||($i={}));var Dn;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"})(Dn||(Dn={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ib=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.isSurfaceOpen=!1,n.isQuickOpen=!1,n.isHoistedElement=!1,n.isFixedPosition=!1,n.isHorizontallyCenteredOnViewport=!1,n.maxHeight=0,n.openAnimationEndTimerId=0,n.closeAnimationEndTimerId=0,n.animationRequestId=0,n.anchorCorner=Dn.TOP_START,n.originCorner=Dn.TOP_START,n.anchorMargin={top:0,right:0,bottom:0,left:0},n.position={x:0,y:0},n}return Object.defineProperty(t,"cssClasses",{get:function(){return pZ},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return AZ},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Jc},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return Dn},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var i=t.cssClasses,n=i.ROOT,o=i.OPEN;if(!this.adapter.hasClass(n))throw new Error(n+" class required in root element.");this.adapter.hasClass(o)&&(this.isSurfaceOpen=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},t.prototype.setAnchorCorner=function(i){this.anchorCorner=i},t.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^$i.RIGHT},t.prototype.setAnchorMargin=function(i){this.anchorMargin.top=i.top||0,this.anchorMargin.right=i.right||0,this.anchorMargin.bottom=i.bottom||0,this.anchorMargin.left=i.left||0},t.prototype.setIsHoisted=function(i){this.isHoistedElement=i},t.prototype.setFixedPosition=function(i){this.isFixedPosition=i},t.prototype.setAbsolutePosition=function(i,n){this.position.x=this.isFinite(i)?i:0,this.position.y=this.isFinite(n)?n:0},t.prototype.setIsHorizontallyCenteredOnViewport=function(i){this.isHorizontallyCenteredOnViewport=i},t.prototype.setQuickOpen=function(i){this.isQuickOpen=i},t.prototype.setMaxHeight=function(i){this.maxHeight=i},t.prototype.isOpen=function(){return this.isSurfaceOpen},t.prototype.open=function(){var i=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(t.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){i.dimensions=i.adapter.getInnerDimensions(),i.autoposition(),i.adapter.addClass(t.cssClasses.OPEN),i.openAnimationEndTimerId=setTimeout(function(){i.openAnimationEndTimerId=0,i.adapter.removeClass(t.cssClasses.ANIMATING_OPEN),i.adapter.notifyOpen()},Jc.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},t.prototype.close=function(i){var n=this;if(i===void 0&&(i=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,i||this.maybeRestoreFocus(),this.adapter.removeClass(t.cssClasses.OPEN),this.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){n.adapter.removeClass(t.cssClasses.OPEN),n.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),n.closeAnimationEndTimerId=setTimeout(function(){n.closeAnimationEndTimerId=0,n.adapter.removeClass(t.cssClasses.ANIMATING_CLOSED),n.adapter.notifyClose()},Jc.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,i||this.maybeRestoreFocus()}},t.prototype.handleBodyClick=function(i){var n=i.target;this.adapter.isElementInContainer(n)||this.close()},t.prototype.handleKeydown=function(i){var n=i.keyCode,o=i.key,l=o==="Escape"||n===27;l&&this.close()},t.prototype.autoposition=function(){var i;this.measurements=this.getAutoLayoutmeasurements();var n=this.getoriginCorner(),o=this.getMenuSurfaceMaxHeight(n),l=this.hasBit(n,$i.BOTTOM)?"bottom":"top",I=this.hasBit(n,$i.RIGHT)?"right":"left",m=this.getHorizontalOriginOffset(n),y=this.getVerticalOriginOffset(n),H=this.measurements,L=H.anchorSize,K=H.surfaceSize,nt=(i={},i[I]=m,i[l]=y,i);L.width/K.width>Jc.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(I="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(nt),this.adapter.setTransformOrigin(I+" "+l),this.adapter.setPosition(nt),this.adapter.setMaxHeight(o?o+"px":""),this.hasBit(n,$i.BOTTOM)||this.adapter.addClass(t.cssClasses.IS_OPEN_BELOW)},t.prototype.getAutoLayoutmeasurements=function(){var i=this.adapter.getAnchorDimensions(),n=this.adapter.getBodyDimensions(),o=this.adapter.getWindowDimensions(),l=this.adapter.getWindowScroll();return i||(i={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:i,bodySize:n,surfaceSize:this.dimensions,viewportDistance:{top:i.top,right:o.width-i.right,bottom:o.height-i.bottom,left:i.left},viewportSize:o,windowScroll:l}},t.prototype.getoriginCorner=function(){var i=this.originCorner,n=this.measurements,o=n.viewportDistance,l=n.anchorSize,I=n.surfaceSize,m=t.numbers.MARGIN_TO_EDGE,y=this.hasBit(this.anchorCorner,$i.BOTTOM),H,L;y?(H=o.top-m+this.anchorMargin.bottom,L=o.bottom-m-this.anchorMargin.bottom):(H=o.top-m+this.anchorMargin.top,L=o.bottom-m+l.height-this.anchorMargin.top);var K=L-I.height>0;!K&&H>L&&(i=this.setBit(i,$i.BOTTOM));var nt=this.adapter.isRtl(),dt=this.hasBit(this.anchorCorner,$i.FLIP_RTL),P=this.hasBit(this.anchorCorner,$i.RIGHT)||this.hasBit(i,$i.RIGHT),rt=!1;nt&&dt?rt=!P:rt=P;var Xt,Wt;rt?(Xt=o.left+l.width+this.anchorMargin.right,Wt=o.right-this.anchorMargin.right):(Xt=o.left+this.anchorMargin.left,Wt=o.right+l.width-this.anchorMargin.left);var xt=Xt-I.width>0,_=Wt-I.width>0,qe=this.hasBit(i,$i.FLIP_RTL)&&this.hasBit(i,$i.RIGHT);return _&&qe&&nt||!xt&&qe?i=this.unsetBit(i,$i.RIGHT):(xt&&rt&&nt||xt&&!rt&&P||!_&&Xt>=Wt)&&(i=this.setBit(i,$i.RIGHT)),i},t.prototype.getMenuSurfaceMaxHeight=function(i){if(this.maxHeight>0)return this.maxHeight;var n=this.measurements.viewportDistance,o=0,l=this.hasBit(i,$i.BOTTOM),I=this.hasBit(this.anchorCorner,$i.BOTTOM),m=t.numbers.MARGIN_TO_EDGE;return l?(o=n.top+this.anchorMargin.top-m,I||(o+=this.measurements.anchorSize.height)):(o=n.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-m,I&&(o-=this.measurements.anchorSize.height)),o},t.prototype.getHorizontalOriginOffset=function(i){var n=this.measurements.anchorSize,o=this.hasBit(i,$i.RIGHT),l=this.hasBit(this.anchorCorner,$i.RIGHT);if(o){var I=l?n.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?I-(this.measurements.viewportSize.width-this.measurements.bodySize.width):I}return l?n.width-this.anchorMargin.right:this.anchorMargin.left},t.prototype.getVerticalOriginOffset=function(i){var n=this.measurements.anchorSize,o=this.hasBit(i,$i.BOTTOM),l=this.hasBit(this.anchorCorner,$i.BOTTOM),I=0;return o?I=l?n.height-this.anchorMargin.top:-this.anchorMargin.bottom:I=l?n.height+this.anchorMargin.bottom:this.anchorMargin.top,I},t.prototype.adjustPositionForHoistedElement=function(i){var n,o,l=this.measurements,I=l.windowScroll,m=l.viewportDistance,y=l.surfaceSize,H=l.viewportSize,L=Object.keys(i);try{for(var K=Fl(L),nt=K.next();!nt.done;nt=K.next()){var dt=nt.value,P=i[dt]||0;if(this.isHorizontallyCenteredOnViewport&&(dt==="left"||dt==="right")){i[dt]=(H.width-y.width)/2;continue}P+=m[dt],this.isFixedPosition||(dt==="top"?P+=I.y:dt==="bottom"?P-=I.y:dt==="left"?P+=I.x:P-=I.x),i[dt]=P}}catch(rt){n={error:rt}}finally{try{nt&&!nt.done&&(o=K.return)&&o.call(K)}finally{if(n)throw n.error}}},t.prototype.maybeRestoreFocus=function(){var i=this.adapter.isFocused(),n=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(i||n)&&this.adapter.restoreFocus()},t.prototype.hasBit=function(i,n){return Boolean(i&n)},t.prototype.setBit=function(i,n){return i|n},t.prototype.unsetBit=function(i,n){return i^n},t.prototype.isFinite=function(i){return typeof i=="number"&&isFinite(i)},t}(Yo),ZZ=ib;const yZ={TOP_LEFT:Dn.TOP_LEFT,TOP_RIGHT:Dn.TOP_RIGHT,BOTTOM_LEFT:Dn.BOTTOM_LEFT,BOTTOM_RIGHT:Dn.BOTTOM_RIGHT,TOP_START:Dn.TOP_START,TOP_END:Dn.TOP_END,BOTTOM_START:Dn.BOTTOM_START,BOTTOM_END:Dn.BOTTOM_END};class Gn extends Ks{constructor(){super(...arguments),this.mdcFoundationClass=ZZ,this.absolute=!1,this.fullwidth=!1,this.fixed=!1,this.x=null,this.y=null,this.quick=!1,this.open=!1,this.stayOpenOnBodyClick=!1,this.bitwiseCorner=Dn.TOP_START,this.previousMenuCorner=null,this.menuCorner="START",this.corner="TOP_START",this.styleTop="",this.styleLeft="",this.styleRight="",this.styleBottom="",this.styleMaxHeight="",this.styleTransformOrigin="",this.anchor=null,this.previouslyFocused=null,this.previousAnchor=null,this.onBodyClickBound=()=>{}}render(){const t={"mdc-menu-surface--fixed":this.fixed,"mdc-menu-surface--fullwidth":this.fullwidth},i={top:this.styleTop,left:this.styleLeft,right:this.styleRight,bottom:this.styleBottom,"max-height":this.styleMaxHeight,"transform-origin":this.styleTransformOrigin};return Lt`
      <div
          class="mdc-menu-surface ${In(t)}"
          style="${jh(i)}"
          @keydown=${this.onKeydown}
          @opened=${this.registerBodyClick}
          @closed=${this.deregisterBodyClick}>
        <slot></slot>
      </div>`}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{hasAnchor:()=>!!this.anchor,notifyClose:()=>{const t={bubbles:!0,composed:!0},i=new CustomEvent("closed",t);this.open=!1,this.mdcRoot.dispatchEvent(i)},notifyClosing:()=>{const t={bubbles:!0,composed:!0},i=new CustomEvent("closing",t);this.mdcRoot.dispatchEvent(i)},notifyOpen:()=>{const t={bubbles:!0,composed:!0},i=new CustomEvent("opened",t);this.open=!0,this.mdcRoot.dispatchEvent(i)},isElementInContainer:()=>!1,isRtl:()=>this.mdcRoot?getComputedStyle(this.mdcRoot).direction==="rtl":!1,setTransformOrigin:t=>{!this.mdcRoot||(this.styleTransformOrigin=t)},isFocused:()=>Dh(this),saveFocus:()=>{const t=tC(),i=t.length;i||(this.previouslyFocused=null),this.previouslyFocused=t[i-1]},restoreFocus:()=>{!this.previouslyFocused||"focus"in this.previouslyFocused&&this.previouslyFocused.focus()},getInnerDimensions:()=>{const t=this.mdcRoot;return t?{width:t.offsetWidth,height:t.offsetHeight}:{width:0,height:0}},getAnchorDimensions:()=>{const t=this.anchor;return t?t.getBoundingClientRect():null},getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:t=>{!this.mdcRoot||(this.styleLeft="left"in t?`${t.left}px`:"",this.styleRight="right"in t?`${t.right}px`:"",this.styleTop="top"in t?`${t.top}px`:"",this.styleBottom="bottom"in t?`${t.bottom}px`:"")},setMaxHeight:async t=>{!this.mdcRoot||(this.styleMaxHeight=t,await this.updateComplete,this.styleMaxHeight=`var(--mdc-menu-max-height, ${t})`)}})}onKeydown(t){this.mdcFoundation&&this.mdcFoundation.handleKeydown(t)}onBodyClick(t){if(this.stayOpenOnBodyClick)return;t.composedPath().indexOf(this)===-1&&this.close()}registerBodyClick(){this.onBodyClickBound=this.onBodyClick.bind(this),document.body.addEventListener("click",this.onBodyClickBound,{passive:!0,capture:!0})}deregisterBodyClick(){document.body.removeEventListener("click",this.onBodyClickBound,{capture:!0})}close(){this.open=!1}show(){this.open=!0}}z([vi(".mdc-menu-surface")],Gn.prototype,"mdcRoot",void 0);z([vi("slot")],Gn.prototype,"slotElement",void 0);z([ct({type:Boolean}),pi(function(e){this.mdcFoundation&&!this.fixed&&this.mdcFoundation.setIsHoisted(e)})],Gn.prototype,"absolute",void 0);z([ct({type:Boolean})],Gn.prototype,"fullwidth",void 0);z([ct({type:Boolean}),pi(function(e){this.mdcFoundation&&!this.absolute&&this.mdcFoundation.setFixedPosition(e)})],Gn.prototype,"fixed",void 0);z([ct({type:Number}),pi(function(e){this.mdcFoundation&&this.y!==null&&e!==null&&(this.mdcFoundation.setAbsolutePosition(e,this.y),this.mdcFoundation.setAnchorMargin({left:e,top:this.y,right:-e,bottom:this.y}))})],Gn.prototype,"x",void 0);z([ct({type:Number}),pi(function(e){this.mdcFoundation&&this.x!==null&&e!==null&&(this.mdcFoundation.setAbsolutePosition(this.x,e),this.mdcFoundation.setAnchorMargin({left:this.x,top:e,right:-this.x,bottom:e}))})],Gn.prototype,"y",void 0);z([ct({type:Boolean}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setQuickOpen(e)})],Gn.prototype,"quick",void 0);z([ct({type:Boolean,reflect:!0}),pi(function(e,t){this.mdcFoundation&&(e?this.mdcFoundation.open():t!==void 0&&this.mdcFoundation.close())})],Gn.prototype,"open",void 0);z([ct({type:Boolean})],Gn.prototype,"stayOpenOnBodyClick",void 0);z([Ri(),pi(function(e){this.mdcFoundation&&(e?this.mdcFoundation.setAnchorCorner(e):this.mdcFoundation.setAnchorCorner(e))})],Gn.prototype,"bitwiseCorner",void 0);z([ct({type:String}),pi(function(e){if(this.mdcFoundation){const t=e==="START"||e==="END",i=this.previousMenuCorner===null,n=!i&&e!==this.previousMenuCorner;t&&(n||i&&e==="END")&&(this.bitwiseCorner=this.bitwiseCorner^$i.RIGHT,this.mdcFoundation.flipCornerHorizontally(),this.previousMenuCorner=e)}})],Gn.prototype,"menuCorner",void 0);z([ct({type:String}),pi(function(e){if(this.mdcFoundation&&e){let t=yZ[e];this.menuCorner==="END"&&(t=t^$i.RIGHT),this.bitwiseCorner=t}})],Gn.prototype,"corner",void 0);z([Ri()],Gn.prototype,"styleTop",void 0);z([Ri()],Gn.prototype,"styleLeft",void 0);z([Ri()],Gn.prototype,"styleRight",void 0);z([Ri()],Gn.prototype,"styleBottom",void 0);z([Ri()],Gn.prototype,"styleMaxHeight",void 0);z([Ri()],Gn.prototype,"styleTransformOrigin",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const fZ=bi`.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;transition:opacity .03s linear,transform .12s cubic-bezier(0, 0, 0.2, 1),height 250ms cubic-bezier(0, 0, 0.2, 1);box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12);background-color:#fff;background-color:var(--mdc-theme-surface, #fff);color:#000;color:var(--mdc-theme-on-surface, #000);border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0;transition:opacity .075s linear}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}:host(:not([open])){display:none}.mdc-menu-surface{z-index:8;z-index:var(--mdc-menu-z-index, 8);min-width:112px;min-width:var(--mdc-menu-min-width, 112px)}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Pa=class extends Gn{};Pa.styles=[fZ];Pa=z([Yi("mwc-menu-surface")],Pa);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sa={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},Bl={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected"},GZ={FOCUS_ROOT_INDEX:-1},lr;(function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"})(lr||(lr={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var VZ=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.closeAnimationEndTimerId=0,n.defaultFocusState=lr.LIST_ROOT,n.selectedIndex=-1,n}return Object.defineProperty(t,"cssClasses",{get:function(){return sa},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Bl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return GZ},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},t.prototype.handleKeydown=function(i){var n=i.key,o=i.keyCode,l=n==="Tab"||o===9;l&&this.adapter.closeSurface(!0)},t.prototype.handleItemAction=function(i){var n=this,o=this.adapter.getElementIndex(i);o<0||(this.adapter.notifySelected({index:o}),this.adapter.closeSurface(),this.closeAnimationEndTimerId=setTimeout(function(){var l=n.adapter.getElementIndex(i);l>=0&&n.adapter.isSelectableItemAtIndex(l)&&n.setSelectedIndex(l)},ib.numbers.TRANSITION_CLOSE_DURATION))},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case lr.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case lr.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case lr.NONE:break;default:this.adapter.focusListRoot();break}},t.prototype.setDefaultFocusState=function(i){this.defaultFocusState=i},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(i){if(this.validatedIndex(i),!this.adapter.isSelectableItemAtIndex(i))throw new Error("MDCMenuFoundation: No selection group at specified index.");var n=this.adapter.getSelectedSiblingOfItemAtIndex(i);n>=0&&(this.adapter.removeAttributeFromElementAtIndex(n,Bl.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(n,sa.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(i,sa.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(i,Bl.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=i},t.prototype.setEnabled=function(i,n){this.validatedIndex(i),n?(this.adapter.removeClassFromElementAtIndex(i,Wi.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(i,Bl.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(i,Wi.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(i,Bl.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex=function(i){var n=this.adapter.getMenuItemCount(),o=i>=0&&i<n;if(!o)throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(Yo),WZ=VZ;class Vn extends Ks{constructor(){super(...arguments),this.mdcFoundationClass=WZ,this.listElement_=null,this.anchor=null,this.open=!1,this.quick=!1,this.wrapFocus=!1,this.innerRole="menu",this.corner="TOP_START",this.x=null,this.y=null,this.absolute=!1,this.multi=!1,this.activatable=!1,this.fixed=!1,this.forceGroupSelection=!1,this.fullwidth=!1,this.menuCorner="START",this.stayOpenOnBodyClick=!1,this.defaultFocus="LIST_ROOT",this._listUpdateComplete=null}get listElement(){return this.listElement_?this.listElement_:(this.listElement_=this.renderRoot.querySelector("mwc-list"),this.listElement_)}get items(){const t=this.listElement;return t?t.items:[]}get index(){const t=this.listElement;return t?t.index:-1}get selected(){const t=this.listElement;return t?t.selected:null}render(){const t=this.innerRole==="menu"?"menuitem":"option";return Lt`
      <mwc-menu-surface
          ?hidden=${!this.open}
          .anchor=${this.anchor}
          .open=${this.open}
          .quick=${this.quick}
          .corner=${this.corner}
          .x=${this.x}
          .y=${this.y}
          .absolute=${this.absolute}
          .fixed=${this.fixed}
          .fullwidth=${this.fullwidth}
          .menuCorner=${this.menuCorner}
          ?stayOpenOnBodyClick=${this.stayOpenOnBodyClick}
          class="mdc-menu mdc-menu-surface"
          @closed=${this.onClosed}
          @opened=${this.onOpened}
          @keydown=${this.onKeydown}>
        <mwc-list
          rootTabbable
          .innerRole=${this.innerRole}
          .multi=${this.multi}
          class="mdc-deprecated-list"
          .itemRoles=${t}
          .wrapFocus=${this.wrapFocus}
          .activatable=${this.activatable}
          @action=${this.onAction}>
        <slot></slot>
      </mwc-list>
    </mwc-menu-surface>`}createAdapter(){return{addClassToElementAtIndex:(t,i)=>{const n=this.listElement;if(!n)return;const o=n.items[t];!o||(i==="mdc-menu-item--selected"?this.forceGroupSelection&&!o.selected&&n.toggle(t,!0):o.classList.add(i))},removeClassFromElementAtIndex:(t,i)=>{const n=this.listElement;if(!n)return;const o=n.items[t];!o||(i==="mdc-menu-item--selected"?o.selected&&n.toggle(t,!1):o.classList.remove(i))},addAttributeToElementAtIndex:(t,i,n)=>{const o=this.listElement;if(!o)return;const l=o.items[t];!l||l.setAttribute(i,n)},removeAttributeFromElementAtIndex:(t,i)=>{const n=this.listElement;if(!n)return;const o=n.items[t];!o||o.removeAttribute(i)},elementContainsClass:(t,i)=>t.classList.contains(i),closeSurface:()=>{this.open=!1},getElementIndex:t=>{const i=this.listElement;return i?i.items.indexOf(t):-1},notifySelected:()=>{},getMenuItemCount:()=>{const t=this.listElement;return t?t.items.length:0},focusItemAtIndex:t=>{const i=this.listElement;if(!i)return;const n=i.items[t];n&&n.focus()},focusListRoot:()=>{this.listElement&&this.listElement.focus()},getSelectedSiblingOfItemAtIndex:t=>{const i=this.listElement;if(!i)return-1;const n=i.items[t];if(!n||!n.group)return-1;for(let o=0;o<i.items.length;o++){if(o===t)continue;const l=i.items[o];if(l.selected&&l.group===n.group)return o}return-1},isSelectableItemAtIndex:t=>{const i=this.listElement;if(!i)return!1;const n=i.items[t];return n?n.hasAttribute("group"):!1}}}onKeydown(t){this.mdcFoundation&&this.mdcFoundation.handleKeydown(t)}onAction(t){const i=this.listElement;if(this.mdcFoundation&&i){const n=t.detail.index,o=i.items[n];o&&this.mdcFoundation.handleItemAction(o)}}onOpened(){this.open=!0,this.mdcFoundation&&this.mdcFoundation.handleMenuSurfaceOpened()}onClosed(){this.open=!1}async getUpdateComplete(){return await this._listUpdateComplete,await super.getUpdateComplete()}async firstUpdated(){super.firstUpdated();const t=this.listElement;t&&(this._listUpdateComplete=t.updateComplete,await this._listUpdateComplete)}select(t){const i=this.listElement;i&&i.select(t)}close(){this.open=!1}show(){this.open=!0}getFocusedItemIndex(){const t=this.listElement;return t?t.getFocusedItemIndex():-1}focusItemAtIndex(t){const i=this.listElement;i&&i.focusItemAtIndex(t)}layout(t=!0){const i=this.listElement;i&&i.layout(t)}}z([vi(".mdc-menu")],Vn.prototype,"mdcRoot",void 0);z([vi("slot")],Vn.prototype,"slotElement",void 0);z([ct({type:Object})],Vn.prototype,"anchor",void 0);z([ct({type:Boolean,reflect:!0})],Vn.prototype,"open",void 0);z([ct({type:Boolean})],Vn.prototype,"quick",void 0);z([ct({type:Boolean})],Vn.prototype,"wrapFocus",void 0);z([ct({type:String})],Vn.prototype,"innerRole",void 0);z([ct({type:String})],Vn.prototype,"corner",void 0);z([ct({type:Number})],Vn.prototype,"x",void 0);z([ct({type:Number})],Vn.prototype,"y",void 0);z([ct({type:Boolean})],Vn.prototype,"absolute",void 0);z([ct({type:Boolean})],Vn.prototype,"multi",void 0);z([ct({type:Boolean})],Vn.prototype,"activatable",void 0);z([ct({type:Boolean})],Vn.prototype,"fixed",void 0);z([ct({type:Boolean})],Vn.prototype,"forceGroupSelection",void 0);z([ct({type:Boolean})],Vn.prototype,"fullwidth",void 0);z([ct({type:String})],Vn.prototype,"menuCorner",void 0);z([ct({type:Boolean})],Vn.prototype,"stayOpenOnBodyClick",void 0);z([ct({type:String}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setDefaultFocusState(lr[e])})],Vn.prototype,"defaultFocus",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const BZ=bi`mwc-list ::slotted([mwc-list-item]:not([twoline])){height:var(--mdc-menu-item-height, 48px)}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let qa=class extends Vn{};qa.styles=[BZ];qa=z([Yi("mwc-menu")],qa);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var XZ=["input","button","textarea","select"],b0=function(e){var t=e.target;if(!!t){var i=(""+t.tagName).toLowerCase();XZ.indexOf(i)===-1&&e.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function RZ(){var e={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return e}function p0(e,t){for(var i=new Map,n=0;n<e;n++){var o=t(n).trim();if(!!o){var l=o[0].toLowerCase();i.has(l)||i.set(l,[]),i.get(l).push({text:o.toLowerCase(),index:n})}}return i.forEach(function(I){I.sort(function(m,y){return m.index-y.index})}),i}function $a(e,t){var i=e.nextChar,n=e.focusItemAtIndex,o=e.sortedIndexByFirstChar,l=e.focusedItemIndex,I=e.skipFocus,m=e.isItemAtIndexDisabled;clearTimeout(t.bufferClearTimeout),t.bufferClearTimeout=setTimeout(function(){wZ(t)},Qn.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),t.typeaheadBuffer=t.typeaheadBuffer+i;var y;return t.typeaheadBuffer.length===1?y=vZ(o,l,m,t):y=SZ(o,m,t),y!==-1&&!I&&n(y),y}function vZ(e,t,i,n){var o=n.typeaheadBuffer[0],l=e.get(o);if(!l)return-1;if(o===n.currentFirstChar&&l[n.sortedIndexCursor].index===t){n.sortedIndexCursor=(n.sortedIndexCursor+1)%l.length;var I=l[n.sortedIndexCursor].index;if(!i(I))return I}n.currentFirstChar=o;var m=-1,y;for(y=0;y<l.length;y++)if(!i(l[y].index)){m=y;break}for(;y<l.length;y++)if(l[y].index>t&&!i(l[y].index)){m=y;break}return m!==-1?(n.sortedIndexCursor=m,l[n.sortedIndexCursor].index):-1}function SZ(e,t,i){var n=i.typeaheadBuffer[0],o=e.get(n);if(!o)return-1;var l=o[i.sortedIndexCursor];if(l.text.lastIndexOf(i.typeaheadBuffer,0)===0&&!t(l.index))return l.index;for(var I=(i.sortedIndexCursor+1)%o.length,m=-1;I!==i.sortedIndexCursor;){var y=o[I],H=y.text.lastIndexOf(i.typeaheadBuffer,0)===0,L=!t(y.index);if(H&&L){m=I;break}I=(I+1)%o.length}return m!==-1?(i.sortedIndexCursor=m,o[i.sortedIndexCursor].index):-1}function nb(e){return e.typeaheadBuffer.length>0}function wZ(e){e.typeaheadBuffer=""}function FZ(e,t){var i=e.event,n=e.isTargetListItem,o=e.focusedItemIndex,l=e.focusItemAtIndex,I=e.sortedIndexByFirstChar,m=e.isItemAtIndexDisabled,y=gn(i)==="ArrowLeft",H=gn(i)==="ArrowUp",L=gn(i)==="ArrowRight",K=gn(i)==="ArrowDown",nt=gn(i)==="Home",dt=gn(i)==="End",P=gn(i)==="Enter",rt=gn(i)==="Spacebar";if(i.ctrlKey||i.metaKey||y||H||L||K||nt||dt||P)return-1;var Xt=!rt&&i.key.length===1;if(Xt){b0(i);var Wt={focusItemAtIndex:l,focusedItemIndex:o,nextChar:i.key.toLowerCase(),sortedIndexByFirstChar:I,skipFocus:!1,isItemAtIndexDisabled:m};return $a(Wt,t)}if(!rt)return-1;n&&b0(i);var xt=n&&nb(t);if(xt){var Wt={focusItemAtIndex:l,focusedItemIndex:o,nextChar:" ",sortedIndexByFirstChar:I,skipFocus:!1,isItemAtIndexDisabled:m};return $a(Wt,t)}return-1}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var HZ={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var xZ=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.shakeAnimationEndHandler=function(){n.handleShakeAnimationEnd()},n}return Object.defineProperty(t,"cssClasses",{get:function(){return HZ},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(i){var n=t.cssClasses.LABEL_SHAKE;i?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.float=function(i){var n=t.cssClasses,o=n.LABEL_FLOAT_ABOVE,l=n.LABEL_SHAKE;i?this.adapter.addClass(o):(this.adapter.removeClass(o),this.adapter.removeClass(l))},t.prototype.setRequired=function(i){var n=t.cssClasses.LABEL_REQUIRED;i?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleShakeAnimationEnd=function(){var i=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(i)},t}(Yo);const YZ=e=>({addClass:t=>e.classList.add(t),removeClass:t=>e.classList.remove(t),getWidth:()=>e.scrollWidth,registerInteractionHandler:(t,i)=>{e.addEventListener(t,i)},deregisterInteractionHandler:(t,i)=>{e.removeEventListener(t,i)}});class NZ extends iC{constructor(t){switch(super(t),this.foundation=null,this.previousPart=null,t.type){case wo.ATTRIBUTE:case wo.PROPERTY:break;default:throw new Error("FloatingLabel directive only support attribute and property parts")}}update(t,[i]){if(t!==this.previousPart){this.foundation&&this.foundation.destroy(),this.previousPart=t;const n=t.element;n.classList.add("mdc-floating-label");const o=YZ(n);this.foundation=new xZ(o),this.foundation.init()}return this.render(i)}render(t){return this.foundation}}const MZ=md(NZ);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var qs={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var LZ=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.transitionEndHandler=function(o){n.handleTransitionEnd(o)},n}return Object.defineProperty(t,"cssClasses",{get:function(){return qs},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},t.prototype.activate=function(){this.adapter.removeClass(qs.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(qs.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(i){this.adapter.setStyle("transform-origin",i+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(qs.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(i){var n=this.adapter.hasClass(qs.LINE_RIPPLE_DEACTIVATING);i.propertyName==="opacity"&&n&&(this.adapter.removeClass(qs.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(qs.LINE_RIPPLE_DEACTIVATING))},t}(Yo);const JZ=e=>({addClass:t=>e.classList.add(t),removeClass:t=>e.classList.remove(t),hasClass:t=>e.classList.contains(t),setStyle:(t,i)=>e.style.setProperty(t,i),registerEventHandler:(t,i)=>{e.addEventListener(t,i)},deregisterEventHandler:(t,i)=>{e.removeEventListener(t,i)}});class TZ extends iC{constructor(t){switch(super(t),this.previousPart=null,this.foundation=null,t.type){case wo.ATTRIBUTE:case wo.PROPERTY:return;default:throw new Error("LineRipple only support attribute and property parts.")}}update(t,i){if(this.previousPart!==t){this.foundation&&this.foundation.destroy(),this.previousPart=t;const n=t.element;n.classList.add("mdc-line-ripple");const o=JZ(n);this.foundation=new LZ(o),this.foundation.init()}return this.render()}render(){return this.foundation}}const kZ=md(TZ);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var qi={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},ra={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},$s={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var zZ=function(e){xo(t,e);function t(i,n){n===void 0&&(n={});var o=e.call(this,on(on({},t.defaultAdapter),i))||this;return o.disabled=!1,o.isMenuOpen=!1,o.useDefaultValidation=!0,o.customValidity=!0,o.lastSelectedIndex=$s.UNSET_INDEX,o.clickDebounceTimeout=0,o.recentlyClicked=!1,o.leadingIcon=n.leadingIcon,o.helperText=n.helperText,o}return Object.defineProperty(t,"cssClasses",{get:function(){return qi},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return $s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return ra},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),t.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},t.prototype.setSelectedIndex=function(i,n,o){n===void 0&&(n=!1),o===void 0&&(o=!1),!(i>=this.adapter.getMenuItemCount())&&(i===$s.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(i).trim()),this.adapter.setSelectedIndex(i),n&&this.adapter.closeMenu(),!o&&this.lastSelectedIndex!==i&&this.handleChange(),this.lastSelectedIndex=i)},t.prototype.setValue=function(i,n){n===void 0&&(n=!1);var o=this.adapter.getMenuItemValues().indexOf(i);this.setSelectedIndex(o,!1,n)},t.prototype.getValue=function(){var i=this.adapter.getSelectedIndex(),n=this.adapter.getMenuItemValues();return i!==$s.UNSET_INDEX?n[i]:""},t.prototype.getDisabled=function(){return this.disabled},t.prototype.setDisabled=function(i){this.disabled=i,this.disabled?(this.adapter.addClass(qi.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(qi.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},t.prototype.openMenu=function(){this.adapter.addClass(qi.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},t.prototype.setHelperTextContent=function(i){this.helperText&&this.helperText.setContent(i)},t.prototype.layout=function(){if(this.adapter.hasLabel()){var i=this.getValue().length>0,n=this.adapter.hasClass(qi.FOCUSED),o=i||n,l=this.adapter.hasClass(qi.REQUIRED);this.notchOutline(o),this.adapter.floatLabel(o),this.adapter.setLabelRequired(l)}},t.prototype.layoutOptions=function(){var i=this.adapter.getMenuItemValues(),n=i.indexOf(this.getValue());this.setSelectedIndex(n,!1,!0)},t.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var i=this.getSelectedIndex(),n=i>=0?i:0;this.adapter.focusMenuItemAtIndex(n)}},t.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},t.prototype.handleMenuClosed=function(){this.adapter.removeClass(qi.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},t.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var i=this.adapter.hasClass(qi.REQUIRED);i&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.handleMenuItemAction=function(i){this.setSelectedIndex(i,!0)},t.prototype.handleFocus=function(){this.adapter.addClass(qi.FOCUSED),this.layout(),this.adapter.activateBottomLine()},t.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},t.prototype.handleClick=function(i){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(i),this.openMenu()}},t.prototype.handleKeydown=function(i){if(!(this.isMenuOpen||!this.adapter.hasClass(qi.FOCUSED))){var n=gn(i)===We.ENTER,o=gn(i)===We.SPACEBAR,l=gn(i)===We.ARROW_UP,I=gn(i)===We.ARROW_DOWN,m=i.ctrlKey||i.metaKey;if(!m&&(!o&&i.key&&i.key.length===1||o&&this.adapter.isTypeaheadInProgress())){var y=o?" ":i.key,H=this.adapter.typeaheadMatchItem(y,this.getSelectedIndex());H>=0&&this.setSelectedIndex(H),i.preventDefault();return}!n&&!o&&!l&&!I||(l&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):I&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),i.preventDefault())}},t.prototype.notchOutline=function(i){if(!!this.adapter.hasOutline()){var n=this.adapter.hasClass(qi.FOCUSED);if(i){var o=$s.LABEL_SCALE,l=this.adapter.getLabelWidth()*o;this.adapter.notchOutline(l)}else n||this.adapter.closeOutline()}},t.prototype.setLeadingIconAriaLabel=function(i){this.leadingIcon&&this.leadingIcon.setAriaLabel(i)},t.prototype.setLeadingIconContent=function(i){this.leadingIcon&&this.leadingIcon.setContent(i)},t.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},t.prototype.setUseDefaultValidation=function(i){this.useDefaultValidation=i},t.prototype.setValid=function(i){this.useDefaultValidation||(this.customValidity=i),this.adapter.setSelectAnchorAttr("aria-invalid",(!i).toString()),i?(this.adapter.removeClass(qi.INVALID),this.adapter.removeMenuClass(qi.MENU_INVALID)):(this.adapter.addClass(qi.INVALID),this.adapter.addMenuClass(qi.MENU_INVALID)),this.syncHelperTextValidity(i)},t.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(qi.REQUIRED)&&!this.adapter.hasClass(qi.DISABLED)?this.getSelectedIndex()!==$s.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},t.prototype.setRequired=function(i){i?this.adapter.addClass(qi.REQUIRED):this.adapter.removeClass(qi.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",i.toString()),this.adapter.setLabelRequired(i)},t.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},t.prototype.init=function(){var i=this.adapter.getAnchorElement();i&&(this.adapter.setMenuAnchorElement(i),this.adapter.setMenuAnchorCorner(Dn.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(qi.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(qi.INVALID)),this.layout(),this.layoutOptions()},t.prototype.blur=function(){this.adapter.removeClass(qi.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var i=this.adapter.hasClass(qi.REQUIRED);i&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.syncHelperTextValidity=function(i){if(!!this.helperText){this.helperText.setValidity(i);var n=this.helperText.isVisible(),o=this.helperText.getId();n&&o?this.adapter.setSelectAnchorAttr(ra.ARIA_DESCRIBEDBY,o):this.adapter.removeSelectAnchorAttr(ra.ARIA_DESCRIBEDBY)}},t.prototype.setClickDebounceTimeout=function(){var i=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){i.recentlyClicked=!1},$s.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},t}(Yo),KZ=zZ;const A0=(e={})=>{const t={};for(const i in e)t[i]=e[i];return Object.assign({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1},t)};class Ai extends nC{constructor(){super(...arguments),this.mdcFoundationClass=KZ,this.disabled=!1,this.outlined=!1,this.label="",this.outlineOpen=!1,this.outlineWidth=0,this.value="",this.selectedText="",this.icon="",this.menuOpen=!1,this.helper="",this.validateOnInitialRender=!1,this.validationMessage="",this.required=!1,this.naturalMenuWidth=!1,this.isUiValid=!0,this.fixedMenuPosition=!1,this.typeaheadState=RZ(),this.sortedIndexByFirstChar=new Map,this.menuElement_=null,this.listeners=[],this.onBodyClickBound=()=>{},this._menuUpdateComplete=null,this.valueSetDirectly=!1,this.validityTransform=null,this._validity=A0()}get items(){return this.menuElement_||(this.menuElement_=this.menuElement),this.menuElement_?this.menuElement_.items:[]}get selected(){const t=this.menuElement;return t?t.selected:null}get index(){const t=this.menuElement;return t?t.index:-1}get shouldRenderHelperText(){return!!this.helper||!!this.validationMessage}get validity(){return this._checkValidity(this.value),this._validity}render(){const t={"mdc-select--disabled":this.disabled,"mdc-select--no-label":!this.label,"mdc-select--filled":!this.outlined,"mdc-select--outlined":this.outlined,"mdc-select--with-leading-icon":!!this.icon,"mdc-select--required":this.required,"mdc-select--invalid":!this.isUiValid},i={"mdc-select__menu--invalid":!this.isUiValid},n=this.label?"label":void 0,o=this.shouldRenderHelperText?"helper-text":void 0;return Lt`
      <div
          class="mdc-select ${In(t)}">
        <input
            class="formElement"
            .value=${this.value}
            hidden
            ?required=${this.required}>
        <!-- @ts-ignore -->
        <div class="mdc-select__anchor"
            aria-autocomplete="none"
            role="combobox"
            aria-expanded=${this.menuOpen}
            aria-invalid=${!this.isUiValid}
            aria-haspopup="listbox"
            aria-labelledby=${Oo(n)}
            aria-required=${this.required}
            aria-describedby=${Oo(o)}
            @click=${this.onClick}
            @focus=${this.onFocus}
            @blur=${this.onBlur}
            @keydown=${this.onKeydown}>
          ${this.renderRipple()}
          ${this.outlined?this.renderOutline():this.renderLabel()}
          ${this.renderLeadingIcon()}
          <span class="mdc-select__selected-text-container">
            <span class="mdc-select__selected-text">${this.selectedText}</span>
          </span>
          <span class="mdc-select__dropdown-icon">
            <svg
                class="mdc-select__dropdown-icon-graphic"
                viewBox="7 10 10 5"
                focusable="false">
              <polygon
                  class="mdc-select__dropdown-icon-inactive"
                  stroke="none"
                  fill-rule="evenodd"
                  points="7 10 12 15 17 10">
              </polygon>
              <polygon
                  class="mdc-select__dropdown-icon-active"
                  stroke="none"
                  fill-rule="evenodd"
                  points="7 15 12 10 17 15">
              </polygon>
            </svg>
          </span>
          ${this.renderLineRipple()}
        </div>
        <mwc-menu
            innerRole="listbox"
            wrapFocus
            class="mdc-select__menu mdc-menu mdc-menu-surface ${In(i)}"
            activatable
            .fullwidth=${this.fixedMenuPosition?!1:!this.naturalMenuWidth}
            .open=${this.menuOpen}
            .anchor=${this.anchorElement}
            .fixed=${this.fixedMenuPosition}
            @selected=${this.onSelected}
            @opened=${this.onOpened}
            @closed=${this.onClosed}
            @items-updated=${this.onItemsUpdated}
            @keydown=${this.handleTypeahead}>
          <slot></slot>
        </mwc-menu>
      </div>
      ${this.renderHelperText()}`}renderRipple(){return this.outlined?Eo:Lt`
      <span class="mdc-select__ripple"></span>
    `}renderOutline(){return this.outlined?Lt`
      <mwc-notched-outline
          .width=${this.outlineWidth}
          .open=${this.outlineOpen}
          class="mdc-notched-outline">
        ${this.renderLabel()}
      </mwc-notched-outline>`:Eo}renderLabel(){return this.label?Lt`
      <span
          .floatingLabelFoundation=${MZ(this.label)}
          id="label">${this.label}</span>
    `:Eo}renderLeadingIcon(){return this.icon?Lt`<mwc-icon class="mdc-select__icon"><div>${this.icon}</div></mwc-icon>`:Eo}renderLineRipple(){return this.outlined?Eo:Lt`
      <span .lineRippleFoundation=${kZ()}></span>
    `}renderHelperText(){if(!this.shouldRenderHelperText)return Eo;const t=this.validationMessage&&!this.isUiValid;return Lt`
        <p
          class="mdc-select-helper-text ${In({"mdc-select-helper-text--validation-msg":t})}"
          id="helper-text">${t?this.validationMessage:this.helper}</p>`}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{activateBottomLine:()=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.activate()},deactivateBottomLine:()=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.deactivate()},hasLabel:()=>!!this.label,floatLabel:t=>{this.labelElement&&this.labelElement.floatingLabelFoundation.float(t)},getLabelWidth:()=>this.labelElement?this.labelElement.floatingLabelFoundation.getWidth():0,setLabelRequired:t=>{this.labelElement&&this.labelElement.floatingLabelFoundation.setRequired(t)},hasOutline:()=>this.outlined,notchOutline:t=>{this.outlineElement&&!this.outlineOpen&&(this.outlineWidth=t,this.outlineOpen=!0)},closeOutline:()=>{this.outlineElement&&(this.outlineOpen=!1)},setRippleCenter:t=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.setRippleCenter(t)},notifyChange:async t=>{if(!this.valueSetDirectly&&t===this.value)return;this.valueSetDirectly=!1,this.value=t,await this.updateComplete;const i=new Event("change",{bubbles:!0});this.dispatchEvent(i)},setSelectedText:t=>this.selectedText=t,isSelectAnchorFocused:()=>{const t=this.anchorElement;return t?t.getRootNode().activeElement===t:!1},getSelectAnchorAttr:t=>{const i=this.anchorElement;return i?i.getAttribute(t):null},setSelectAnchorAttr:(t,i)=>{const n=this.anchorElement;!n||n.setAttribute(t,i)},removeSelectAnchorAttr:t=>{const i=this.anchorElement;!i||i.removeAttribute(t)},openMenu:()=>{this.menuOpen=!0},closeMenu:()=>{this.menuOpen=!1},addMenuClass:()=>{},removeMenuClass:()=>{},getAnchorElement:()=>this.anchorElement,setMenuAnchorElement:()=>{},setMenuAnchorCorner:()=>{const t=this.menuElement;t&&(t.corner="BOTTOM_START")},setMenuWrapFocus:t=>{const i=this.menuElement;i&&(i.wrapFocus=t)},focusMenuItemAtIndex:t=>{const i=this.menuElement;if(!i)return;const n=i.items[t];!n||n.focus()},getMenuItemCount:()=>{const t=this.menuElement;return t?t.items.length:0},getMenuItemValues:()=>{const t=this.menuElement;return t?t.items.map(n=>n.value):[]},getMenuItemTextAtIndex:t=>{const i=this.menuElement;if(!i)return"";const n=i.items[t];return n?n.text:""},getSelectedIndex:()=>this.index,setSelectedIndex:()=>{},isTypeaheadInProgress:()=>nb(this.typeaheadState),typeaheadMatchItem:(t,i)=>{if(!this.menuElement)return-1;const n={focusItemAtIndex:l=>{this.menuElement.focusItemAtIndex(l)},focusedItemIndex:i||this.menuElement.getFocusedItemIndex(),nextChar:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:!1,isItemAtIndexDisabled:l=>this.items[l].disabled},o=$a(n,this.typeaheadState);return o!==-1&&this.select(o),o}})}checkValidity(){const t=this._checkValidity(this.value);if(!t){const i=new Event("invalid",{bubbles:!1,cancelable:!0});this.dispatchEvent(i)}return t}reportValidity(){const t=this.checkValidity();return this.isUiValid=t,t}_checkValidity(t){const i=this.formElement.validity;let n=A0(i);if(this.validityTransform){const o=this.validityTransform(t,n);n=Object.assign(Object.assign({},n),o)}return this._validity=n,this._validity.valid}setCustomValidity(t){this.validationMessage=t,this.formElement.setCustomValidity(t)}async getUpdateComplete(){return await this._menuUpdateComplete,await super.getUpdateComplete()}async firstUpdated(){const t=this.menuElement;if(t&&(this._menuUpdateComplete=t.updateComplete,await this._menuUpdateComplete),super.firstUpdated(),this.mdcFoundation.isValid=()=>!0,this.mdcFoundation.setValid=()=>{},this.mdcFoundation.setDisabled(this.disabled),this.validateOnInitialRender&&this.reportValidity(),!this.selected){!this.items.length&&this.slotElement&&this.slotElement.assignedNodes({flatten:!0}).length&&(await new Promise(n=>requestAnimationFrame(n)),await this.layout());const i=this.items.length&&this.items[0].value==="";if(!this.value&&i){this.select(0);return}this.selectByValue(this.value)}this.sortedIndexByFirstChar=p0(this.items.length,i=>this.items[i].text)}onItemsUpdated(){this.sortedIndexByFirstChar=p0(this.items.length,t=>this.items[t].text)}select(t){const i=this.menuElement;i&&i.select(t)}selectByValue(t){let i=-1;for(let n=0;n<this.items.length;n++)if(this.items[n].value===t){i=n;break}this.valueSetDirectly=!0,this.select(i),this.mdcFoundation.handleChange()}disconnectedCallback(){super.disconnectedCallback();for(const t of this.listeners)t.target.removeEventListener(t.name,t.cb)}focus(){const t=new CustomEvent("focus"),i=this.anchorElement;i&&(i.dispatchEvent(t),i.focus())}blur(){const t=new CustomEvent("blur"),i=this.anchorElement;i&&(i.dispatchEvent(t),i.blur())}onFocus(){this.mdcFoundation&&this.mdcFoundation.handleFocus()}onBlur(){this.mdcFoundation&&this.mdcFoundation.handleBlur();const t=this.menuElement;t&&!t.open&&this.reportValidity()}onClick(t){if(this.mdcFoundation){this.focus();const i=t.target.getBoundingClientRect();let n=0;"touches"in t?n=t.touches[0].clientX:n=t.clientX;const o=n-i.left;this.mdcFoundation.handleClick(o)}}onKeydown(t){const i=gn(t)===We.ARROW_UP,n=gn(t)===We.ARROW_DOWN;if(n||i){const o=i&&this.index>0,l=n&&this.index<this.items.length-1;o?this.select(this.index-1):l&&this.select(this.index+1),t.preventDefault(),this.mdcFoundation.openMenu();return}this.mdcFoundation.handleKeydown(t)}handleTypeahead(t){if(!this.menuElement)return;const i=this.menuElement.getFocusedItemIndex(),n=Uh(t.target)?t.target:null,o=n?n.hasAttribute("mwc-list-item"):!1,l={event:t,focusItemAtIndex:I=>{this.menuElement.focusItemAtIndex(I)},focusedItemIndex:i,isTargetListItem:o,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:I=>this.items[I].disabled};FZ(l,this.typeaheadState)}async onSelected(t){this.mdcFoundation||await this.updateComplete,this.mdcFoundation.handleMenuItemAction(t.detail.index);const i=this.items[t.detail.index];i&&(this.value=i.value)}onOpened(){this.mdcFoundation&&(this.menuOpen=!0,this.mdcFoundation.handleMenuOpened())}onClosed(){this.mdcFoundation&&(this.menuOpen=!1,this.mdcFoundation.handleMenuClosed())}async layout(t=!0){this.mdcFoundation&&this.mdcFoundation.layout(),await this.updateComplete;const i=this.menuElement;i&&i.layout(t);const n=this.labelElement;if(!n){this.outlineOpen=!1;return}const o=!!this.label&&!!this.value;if(n.floatingLabelFoundation.float(o),!this.outlined)return;this.outlineOpen=o,await this.updateComplete;const l=n.floatingLabelFoundation.getWidth();this.outlineOpen&&(this.outlineWidth=l)}async layoutOptions(){!this.mdcFoundation||this.mdcFoundation.layoutOptions()}}z([vi(".mdc-select")],Ai.prototype,"mdcRoot",void 0);z([vi(".formElement")],Ai.prototype,"formElement",void 0);z([vi("slot")],Ai.prototype,"slotElement",void 0);z([vi("select")],Ai.prototype,"nativeSelectElement",void 0);z([vi("input")],Ai.prototype,"nativeInputElement",void 0);z([vi(".mdc-line-ripple")],Ai.prototype,"lineRippleElement",void 0);z([vi(".mdc-floating-label")],Ai.prototype,"labelElement",void 0);z([vi("mwc-notched-outline")],Ai.prototype,"outlineElement",void 0);z([vi(".mdc-menu")],Ai.prototype,"menuElement",void 0);z([vi(".mdc-select__anchor")],Ai.prototype,"anchorElement",void 0);z([ct({type:Boolean,attribute:"disabled",reflect:!0}),pi(function(e){this.mdcFoundation&&this.mdcFoundation.setDisabled(e)})],Ai.prototype,"disabled",void 0);z([ct({type:Boolean}),pi(function(e,t){t!==void 0&&this.outlined!==t&&this.layout(!1)})],Ai.prototype,"outlined",void 0);z([ct({type:String}),pi(function(e,t){t!==void 0&&this.label!==t&&this.layout(!1)})],Ai.prototype,"label",void 0);z([Ri()],Ai.prototype,"outlineOpen",void 0);z([Ri()],Ai.prototype,"outlineWidth",void 0);z([ct({type:String}),pi(function(e){if(this.mdcFoundation){const t=this.selected===null&&!!e,i=this.selected&&this.selected.value!==e;(t||i)&&this.selectByValue(e),this.reportValidity()}})],Ai.prototype,"value",void 0);z([Ri()],Ai.prototype,"selectedText",void 0);z([ct({type:String})],Ai.prototype,"icon",void 0);z([Ri()],Ai.prototype,"menuOpen",void 0);z([ct({type:String})],Ai.prototype,"helper",void 0);z([ct({type:Boolean})],Ai.prototype,"validateOnInitialRender",void 0);z([ct({type:String})],Ai.prototype,"validationMessage",void 0);z([ct({type:Boolean})],Ai.prototype,"required",void 0);z([ct({type:Boolean})],Ai.prototype,"naturalMenuWidth",void 0);z([Ri()],Ai.prototype,"isUiValid",void 0);z([ct({type:Boolean})],Ai.prototype,"fixedMenuPosition",void 0);z([hl({capture:!0})],Ai.prototype,"handleTypeahead",null);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const ob=bi`.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-subtitle1-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size, 1rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight, 400);letter-spacing:0.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing, 0.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform, inherit);position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform;transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required::after,.mdc-floating-label--required[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px;z-index:1}.mdc-line-ripple::after{transform:scaleX(0);border-bottom-width:2px;opacity:0;z-index:2}.mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(100% / 0.75)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-select{display:inline-flex;position:relative}.mdc-select:not(.mdc-select--disabled) .mdc-select__selected-text{color:rgba(0, 0, 0, 0.87)}.mdc-select.mdc-select--disabled .mdc-select__selected-text{color:rgba(0, 0, 0, 0.38)}.mdc-select:not(.mdc-select--disabled) .mdc-floating-label{color:rgba(0, 0, 0, 0.6)}.mdc-select:not(.mdc-select--disabled).mdc-select--focused .mdc-floating-label{color:rgba(98, 0, 238, 0.87)}.mdc-select.mdc-select--disabled .mdc-floating-label{color:rgba(0, 0, 0, 0.38)}.mdc-select:not(.mdc-select--disabled) .mdc-select__dropdown-icon{fill:rgba(0, 0, 0, 0.54)}.mdc-select:not(.mdc-select--disabled).mdc-select--focused .mdc-select__dropdown-icon{fill:#6200ee;fill:var(--mdc-theme-primary, #6200ee)}.mdc-select.mdc-select--disabled .mdc-select__dropdown-icon{fill:rgba(0, 0, 0, 0.38)}.mdc-select:not(.mdc-select--disabled)+.mdc-select-helper-text{color:rgba(0, 0, 0, 0.6)}.mdc-select.mdc-select--disabled+.mdc-select-helper-text{color:rgba(0, 0, 0, 0.38)}.mdc-select:not(.mdc-select--disabled) .mdc-select__icon{color:rgba(0, 0, 0, 0.54)}.mdc-select.mdc-select--disabled .mdc-select__icon{color:rgba(0, 0, 0, 0.38)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-select.mdc-select--disabled .mdc-select__selected-text{color:GrayText}.mdc-select.mdc-select--disabled .mdc-select__dropdown-icon{fill:red}.mdc-select.mdc-select--disabled .mdc-floating-label{color:GrayText}.mdc-select.mdc-select--disabled .mdc-line-ripple::before{border-bottom-color:GrayText}.mdc-select.mdc-select--disabled .mdc-notched-outline__leading,.mdc-select.mdc-select--disabled .mdc-notched-outline__notch,.mdc-select.mdc-select--disabled .mdc-notched-outline__trailing{border-color:GrayText}.mdc-select.mdc-select--disabled .mdc-select__icon{color:GrayText}.mdc-select.mdc-select--disabled+.mdc-select-helper-text{color:GrayText}}.mdc-select .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-select .mdc-select__anchor{padding-left:16px;padding-right:0}[dir=rtl] .mdc-select .mdc-select__anchor,.mdc-select .mdc-select__anchor[dir=rtl]{padding-left:0;padding-right:16px}.mdc-select.mdc-select--with-leading-icon .mdc-select__anchor{padding-left:0;padding-right:0}[dir=rtl] .mdc-select.mdc-select--with-leading-icon .mdc-select__anchor,.mdc-select.mdc-select--with-leading-icon .mdc-select__anchor[dir=rtl]{padding-left:0;padding-right:0}.mdc-select .mdc-select__icon{width:24px;height:24px;font-size:24px}.mdc-select .mdc-select__dropdown-icon{width:24px;height:24px}.mdc-select .mdc-select__menu .mdc-deprecated-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-select .mdc-select__menu .mdc-deprecated-list-item,.mdc-select .mdc-select__menu .mdc-deprecated-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-select .mdc-select__menu .mdc-deprecated-list-item__graphic{margin-left:0;margin-right:12px}[dir=rtl] .mdc-select .mdc-select__menu .mdc-deprecated-list-item__graphic,.mdc-select .mdc-select__menu .mdc-deprecated-list-item__graphic[dir=rtl]{margin-left:12px;margin-right:0}.mdc-select__dropdown-icon{margin-left:12px;margin-right:12px;display:inline-flex;position:relative;align-self:center;align-items:center;justify-content:center;flex-shrink:0;pointer-events:none}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-active,.mdc-select__dropdown-icon .mdc-select__dropdown-icon-inactive{position:absolute;top:0;left:0}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-graphic{width:41.6666666667%;height:20.8333333333%}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-inactive{opacity:1;transition:opacity 75ms linear 75ms}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-active{opacity:0;transition:opacity 75ms linear}[dir=rtl] .mdc-select__dropdown-icon,.mdc-select__dropdown-icon[dir=rtl]{margin-left:12px;margin-right:12px}.mdc-select--activated .mdc-select__dropdown-icon .mdc-select__dropdown-icon-inactive{opacity:0;transition:opacity 49.5ms linear}.mdc-select--activated .mdc-select__dropdown-icon .mdc-select__dropdown-icon-active{opacity:1;transition:opacity 100.5ms linear 49.5ms}.mdc-select__anchor{width:200px;min-width:0;flex:1 1 auto;position:relative;box-sizing:border-box;overflow:hidden;outline:none;cursor:pointer}.mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-select__selected-text-container{display:flex;appearance:none;pointer-events:none;box-sizing:border-box;width:auto;min-width:0;flex-grow:1;height:28px;border:none;outline:none;padding:0;background-color:transparent;color:inherit}.mdc-select__selected-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-subtitle1-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size, 1rem);line-height:1.75rem;line-height:var(--mdc-typography-subtitle1-line-height, 1.75rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight, 400);letter-spacing:0.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing, 0.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform, inherit);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;width:100%;text-align:left}[dir=rtl] .mdc-select__selected-text,.mdc-select__selected-text[dir=rtl]{text-align:right}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-floating-label{color:#b00020;color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-floating-label{color:#b00020;color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--invalid+.mdc-select-helper-text--validation-msg{color:#b00020;color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-select__dropdown-icon{fill:#b00020;fill:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-select__dropdown-icon{fill:#b00020;fill:var(--mdc-theme-error, #b00020)}.mdc-select--disabled{cursor:default;pointer-events:none}.mdc-select--with-leading-icon .mdc-select__menu .mdc-deprecated-list-item{padding-left:12px;padding-right:12px}[dir=rtl] .mdc-select--with-leading-icon .mdc-select__menu .mdc-deprecated-list-item,.mdc-select--with-leading-icon .mdc-select__menu .mdc-deprecated-list-item[dir=rtl]{padding-left:12px;padding-right:12px}.mdc-select__menu .mdc-deprecated-list .mdc-select__icon{margin-left:0;margin-right:0}[dir=rtl] .mdc-select__menu .mdc-deprecated-list .mdc-select__icon,.mdc-select__menu .mdc-deprecated-list .mdc-select__icon[dir=rtl]{margin-left:0;margin-right:0}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--activated{color:#000;color:var(--mdc-theme-on-surface, #000)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-deprecated-list-item__graphic,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--activated .mdc-deprecated-list-item__graphic{color:#000;color:var(--mdc-theme-on-surface, #000)}.mdc-select--filled .mdc-select__anchor{height:56px;display:flex;align-items:baseline}.mdc-select--filled .mdc-select__anchor::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-select--filled.mdc-select--no-label .mdc-select__anchor .mdc-select__selected-text::before{content:"​"}.mdc-select--filled.mdc-select--no-label .mdc-select__anchor .mdc-select__selected-text-container{height:100%;display:inline-flex;align-items:center}.mdc-select--filled.mdc-select--no-label .mdc-select__anchor::before{display:none}.mdc-select--filled .mdc-select__anchor{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-select--filled:not(.mdc-select--disabled) .mdc-select__anchor{background-color:whitesmoke}.mdc-select--filled.mdc-select--disabled .mdc-select__anchor{background-color:#fafafa}.mdc-select--filled:not(.mdc-select--disabled) .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.42)}.mdc-select--filled:not(.mdc-select--disabled):hover .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.87)}.mdc-select--filled:not(.mdc-select--disabled) .mdc-line-ripple::after{border-bottom-color:#6200ee;border-bottom-color:var(--mdc-theme-primary, #6200ee)}.mdc-select--filled.mdc-select--disabled .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.06)}.mdc-select--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-select--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-select--filled .mdc-menu-surface--is-open-below{border-top-left-radius:0px;border-top-right-radius:0px}.mdc-select--filled.mdc-select--focused.mdc-line-ripple::after{transform:scale(1, 2);opacity:1}.mdc-select--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-select--filled .mdc-floating-label,.mdc-select--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label{left:48px;right:initial}[dir=rtl] .mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label,.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-line-ripple::before{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled):hover .mdc-line-ripple::before{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error, #b00020)}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-line-ripple::after{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error, #b00020)}.mdc-select--outlined{border:none}.mdc-select--outlined .mdc-select__anchor{height:56px}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined-56px 250ms 1}@keyframes mdc-floating-label-shake-float-above-select-outlined-56px{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px)) * 2)}}.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-select--outlined .mdc-select__anchor{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-select--outlined .mdc-select__anchor,.mdc-select--outlined .mdc-select__anchor[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-select--outlined .mdc-select__anchor,.mdc-select--outlined .mdc-select__anchor[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-select--outlined+.mdc-select-helper-text{margin-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-select--outlined+.mdc-select-helper-text,.mdc-select--outlined+.mdc-select-helper-text[dir=rtl]{margin-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-select--outlined+.mdc-select-helper-text,.mdc-select--outlined+.mdc-select-helper-text[dir=rtl]{margin-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-select--outlined:not(.mdc-select--disabled) .mdc-select__anchor{background-color:transparent}.mdc-select--outlined.mdc-select--disabled .mdc-select__anchor{background-color:transparent}.mdc-select--outlined:not(.mdc-select--disabled) .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled) .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled) .mdc-notched-outline__trailing{border-color:rgba(0, 0, 0, 0.38)}.mdc-select--outlined:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:rgba(0, 0, 0, 0.87)}.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:2px}.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#6200ee;border-color:var(--mdc-theme-primary, #6200ee)}.mdc-select--outlined.mdc-select--disabled .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--disabled .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--disabled .mdc-notched-outline__trailing{border-color:rgba(0, 0, 0, 0.06)}.mdc-select--outlined .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-select--outlined .mdc-select__anchor{display:flex;align-items:baseline;overflow:visible}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined 250ms 1}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-select--outlined .mdc-select__anchor .mdc-select__selected-text::before{content:"​"}.mdc-select--outlined .mdc-select__anchor .mdc-select__selected-text-container{height:100%;display:inline-flex;align-items:center}.mdc-select--outlined .mdc-select__anchor::before{display:none}.mdc-select--outlined .mdc-select__selected-text-container{display:flex;border:none;z-index:1;background-color:transparent}.mdc-select--outlined .mdc-select__icon{z-index:2}.mdc-select--outlined .mdc-floating-label{line-height:1.15rem;left:4px;right:initial}[dir=rtl] .mdc-select--outlined .mdc-floating-label,.mdc-select--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-select--outlined.mdc-select--focused .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled) .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled) .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled) .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error, #b00020)}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error, #b00020)}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:2px}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error, #b00020)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label,.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above{font-size:.75rem}.mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px 250ms 1}@keyframes mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--shake,.mdc-select--outlined.mdc-select--with-leading-icon[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px 250ms 1}@keyframes mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 96px)}.mdc-select--outlined .mdc-menu-surface{margin-bottom:8px}.mdc-select--outlined.mdc-select--no-label .mdc-menu-surface,.mdc-select--outlined .mdc-menu-surface--is-open-below{margin-bottom:0}.mdc-select__anchor{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0);will-change:transform,opacity}.mdc-select__anchor .mdc-select__ripple::before,.mdc-select__anchor .mdc-select__ripple::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-select__anchor .mdc-select__ripple::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index, 1)}.mdc-select__anchor .mdc-select__ripple::after{z-index:0;z-index:var(--mdc-ripple-z-index, 0)}.mdc-select__anchor.mdc-ripple-upgraded .mdc-select__ripple::before{transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-select__anchor.mdc-ripple-upgraded .mdc-select__ripple::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-select__anchor.mdc-ripple-upgraded--unbounded .mdc-select__ripple::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-select__anchor.mdc-ripple-upgraded--foreground-activation .mdc-select__ripple::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-select__anchor.mdc-ripple-upgraded--foreground-deactivation .mdc-select__ripple::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-select__anchor .mdc-select__ripple::before,.mdc-select__anchor .mdc-select__ripple::after{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-select__anchor.mdc-ripple-upgraded .mdc-select__ripple::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-select__anchor .mdc-select__ripple::before,.mdc-select__anchor .mdc-select__ripple::after{background-color:rgba(0, 0, 0, 0.87);background-color:var(--mdc-ripple-color, rgba(0, 0, 0, 0.87))}.mdc-select__anchor:hover .mdc-select__ripple::before,.mdc-select__anchor.mdc-ripple-surface--hover .mdc-select__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-select__anchor.mdc-ripple-upgraded--background-focused .mdc-select__ripple::before,.mdc-select__anchor:not(.mdc-ripple-upgraded):focus .mdc-select__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-select__anchor .mdc-select__ripple{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-deprecated-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-deprecated-list-item__ripple::after{background-color:#000;background-color:var(--mdc-ripple-color, var(--mdc-theme-on-surface, #000))}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:hover .mdc-deprecated-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-surface--hover .mdc-deprecated-list-item__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-upgraded--background-focused .mdc-deprecated-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded):focus .mdc-deprecated-list-item__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded) .mdc-deprecated-list-item__ripple::after{transition:opacity 150ms linear}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded):active .mdc-deprecated-list-item__ripple::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected .mdc-list-item__ripple::after{background-color:#000;background-color:var(--mdc-ripple-color, var(--mdc-theme-on-surface, #000))}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:hover .mdc-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-surface--hover .mdc-list-item__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-upgraded--background-focused .mdc-list-item__ripple::before,.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded):focus .mdc-list-item__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded) .mdc-list-item__ripple::after{transition:opacity 150ms linear}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected:not(.mdc-ripple-upgraded):active .mdc-list-item__ripple::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-select__menu .mdc-deprecated-list .mdc-deprecated-list-item--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-select-helper-text{margin:0;margin-left:16px;margin-right:16px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-caption-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.75rem;font-size:var(--mdc-typography-caption-font-size, 0.75rem);line-height:1.25rem;line-height:var(--mdc-typography-caption-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-caption-font-weight, 400);letter-spacing:0.0333333333em;letter-spacing:var(--mdc-typography-caption-letter-spacing, 0.0333333333em);text-decoration:inherit;text-decoration:var(--mdc-typography-caption-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-caption-text-transform, inherit);display:block;margin-top:0;line-height:normal}[dir=rtl] .mdc-select-helper-text,.mdc-select-helper-text[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-select-helper-text::before{display:inline-block;width:0;height:16px;content:"";vertical-align:0}.mdc-select-helper-text--validation-msg{opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-select--invalid+.mdc-select-helper-text--validation-msg,.mdc-select-helper-text--validation-msg-persistent{opacity:1}.mdc-select--with-leading-icon .mdc-select__icon{display:inline-block;box-sizing:border-box;border:none;text-decoration:none;cursor:pointer;user-select:none;flex-shrink:0;align-self:center;background-color:transparent;fill:currentColor}.mdc-select--with-leading-icon .mdc-select__icon{margin-left:12px;margin-right:12px}[dir=rtl] .mdc-select--with-leading-icon .mdc-select__icon,.mdc-select--with-leading-icon .mdc-select__icon[dir=rtl]{margin-left:12px;margin-right:12px}.mdc-select__icon:not([tabindex]),.mdc-select__icon[tabindex="-1"]{cursor:default;pointer-events:none}.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}:host{display:inline-block;vertical-align:top;outline:none}.mdc-select{width:100%}[hidden]{display:none}.mdc-select__icon{z-index:2}.mdc-select--with-leading-icon{--mdc-list-item-graphic-margin: calc( 48px - var(--mdc-list-item-graphic-size, 24px) - var(--mdc-list-side-padding, 16px) )}.mdc-select .mdc-select__anchor .mdc-select__selected-text{overflow:hidden}.mdc-select .mdc-select__anchor *{display:inline-flex}.mdc-select .mdc-select__anchor .mdc-floating-label{display:inline-block}mwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-idle-border-color, rgba(0, 0, 0, 0.38) );--mdc-notched-outline-notch-offset: 1px}:host(:not([disabled]):hover) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) mwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-hover-border-color, rgba(0, 0, 0, 0.87) )}:host(:not([disabled])) .mdc-select:not(.mdc-select--disabled) .mdc-select__selected-text{color:rgba(0, 0, 0, 0.87);color:var(--mdc-select-ink-color, rgba(0, 0, 0, 0.87))}:host(:not([disabled])) .mdc-select:not(.mdc-select--disabled) .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.42);border-bottom-color:var(--mdc-select-idle-line-color, rgba(0, 0, 0, 0.42))}:host(:not([disabled])) .mdc-select:not(.mdc-select--disabled):hover .mdc-line-ripple::before{border-bottom-color:rgba(0, 0, 0, 0.87);border-bottom-color:var(--mdc-select-hover-line-color, rgba(0, 0, 0, 0.87))}:host(:not([disabled])) .mdc-select:not(.mdc-select--outlined):not(.mdc-select--disabled) .mdc-select__anchor{background-color:whitesmoke;background-color:var(--mdc-select-fill-color, whitesmoke)}:host(:not([disabled])) .mdc-select.mdc-select--invalid .mdc-select__dropdown-icon{fill:var(--mdc-select-error-dropdown-icon-color, var(--mdc-select-error-color, var(--mdc-theme-error, #b00020)))}:host(:not([disabled])) .mdc-select.mdc-select--invalid .mdc-floating-label,:host(:not([disabled])) .mdc-select.mdc-select--invalid .mdc-floating-label::after{color:var(--mdc-select-error-color, var(--mdc-theme-error, #b00020))}:host(:not([disabled])) .mdc-select.mdc-select--invalid mwc-notched-outline{--mdc-notched-outline-border-color: var(--mdc-select-error-color, var(--mdc-theme-error, #b00020))}.mdc-select__menu--invalid{--mdc-theme-primary: var(--mdc-select-error-color, var(--mdc-theme-error, #b00020))}:host(:not([disabled])) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label,:host(:not([disabled])) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label::after{color:rgba(0, 0, 0, 0.6);color:var(--mdc-select-label-ink-color, rgba(0, 0, 0, 0.6))}:host(:not([disabled])) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-select__dropdown-icon{fill:rgba(0, 0, 0, 0.54);fill:var(--mdc-select-dropdown-icon-color, rgba(0, 0, 0, 0.54))}:host(:not([disabled])) .mdc-select.mdc-select--focused mwc-notched-outline{--mdc-notched-outline-stroke-width: 2px;--mdc-notched-outline-notch-offset: 2px}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) mwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-focused-label-color, var(--mdc-theme-primary, rgba(98, 0, 238, 0.87)) )}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-select__dropdown-icon{fill:rgba(98,0,238,.87);fill:var(--mdc-select-focused-dropdown-icon-color, var(--mdc-theme-primary, rgba(98, 0, 238, 0.87)))}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-floating-label{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-floating-label::after{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}:host(:not([disabled])) .mdc-select-helper-text:not(.mdc-select-helper-text--validation-msg){color:var(--mdc-select-label-ink-color, rgba(0, 0, 0, 0.6))}:host([disabled]){pointer-events:none}:host([disabled]) .mdc-select:not(.mdc-select--outlined).mdc-select--disabled .mdc-select__anchor{background-color:#fafafa;background-color:var(--mdc-select-disabled-fill-color, #fafafa)}:host([disabled]) .mdc-select.mdc-select--outlined mwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-disabled-border-color, rgba(0, 0, 0, 0.06) )}:host([disabled]) .mdc-select .mdc-select__dropdown-icon{fill:rgba(0, 0, 0, 0.38);fill:var(--mdc-select-disabled-dropdown-icon-color, rgba(0, 0, 0, 0.38))}:host([disabled]) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label,:host([disabled]) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label::after{color:rgba(0, 0, 0, 0.38);color:var(--mdc-select-disabled-ink-color, rgba(0, 0, 0, 0.38))}:host([disabled]) .mdc-select-helper-text{color:rgba(0, 0, 0, 0.38);color:var(--mdc-select-disabled-ink-color, rgba(0, 0, 0, 0.38))}:host([disabled]) .mdc-select__selected-text{color:rgba(0, 0, 0, 0.38);color:var(--mdc-select-disabled-ink-color, rgba(0, 0, 0, 0.38))}`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nc=class extends Ai{};nc.styles=[ob];nc=z([Yi("mwc-select")],nc);const UZ=bi`:host{--mdc-shape-medium: 6px;--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 14px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 400;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 20px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-subtitle1-font-family: var(--vvd-typography-font-family);--mdc-typography-subtitle1-font-size: var(--vvd-typography-font-size);--mdc-typography-subtitle1-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-subtitle1-font-weight: var(--vvd-typography-font-weight);--mdc-typography-subtitle1-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-subtitle1-line-height: var(--vvd-typography-line-height);--mdc-typography-subtitle1-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-subtitle1-text-transform: var(--vvd-typography-text-transform)}:host .mdc-floating-label{--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 16px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 400;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 24px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-subtitle1-font-family: var(--vvd-typography-font-family);--mdc-typography-subtitle1-font-size: var(--vvd-typography-font-size);--mdc-typography-subtitle1-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-subtitle1-font-weight: var(--vvd-typography-font-weight);--mdc-typography-subtitle1-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-subtitle1-line-height: var(--vvd-typography-line-height);--mdc-typography-subtitle1-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-subtitle1-text-transform: var(--vvd-typography-text-transform)}:host .mdc-floating-label--float-above{--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 12px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 400;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 16px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-subtitle1-font-family: var(--vvd-typography-font-family);--mdc-typography-subtitle1-font-size: var(--vvd-typography-font-size);--mdc-typography-subtitle1-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-subtitle1-font-weight: var(--vvd-typography-font-weight);--mdc-typography-subtitle1-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-subtitle1-line-height: var(--vvd-typography-line-height);--mdc-typography-subtitle1-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-subtitle1-text-transform: var(--vvd-typography-text-transform)}:host([dense]) .mdc-floating-label{--vvd-typography-font-family: SpeziaWebVariable;--vvd-typography-font-size: 14px;--vvd-typography-font-stretch: 50%;--vvd-typography-font-weight: 400;--vvd-typography-letter-spacing: 0px;--vvd-typography-line-height: 20px;--vvd-typography-text-decoration: none;--vvd-typography-text-transform: none;--mdc-typography-subtitle1-font-family: var(--vvd-typography-font-family);--mdc-typography-subtitle1-font-size: var(--vvd-typography-font-size);--mdc-typography-subtitle1-font-stretch: var(--vvd-typography-font-stretch);--mdc-typography-subtitle1-font-weight: var(--vvd-typography-font-weight);--mdc-typography-subtitle1-letter-spacing: var(--vvd-typography-letter-spacing);--mdc-typography-subtitle1-line-height: var(--vvd-typography-line-height);--mdc-typography-subtitle1-text-decoration: var(--vvd-typography-text-decoration);--mdc-typography-subtitle1-text-transform: var(--vvd-typography-text-transform)}:host{--mdc-select-fill-color: var(--vvd-color-canvas);--mdc-select-ink-color: var(--vvd-color-on-canvas);--mdc-select-label-ink-color: var(--vvd-formfield-label-idle-ink);--mdc-select-disabled-ink-color: var( --vvd-formfield-disabled-ink );--mdc-select-disabled-fill-color: var( --vvd-formfield-disabled-fill );--mdc-select-dropdown-icon-color: var(--mdc-select-ink-color);--mdc-select-focused-dropdown-icon-color: var(--mdc-select-ink-color);--mdc-select-disabled-dropdown-icon-color: var( --mdc-select-disabled-ink-color );--mdc-select-outlined-idle-border-color: var( --vvd-formfield-border-idle );--mdc-select-outlined-hover-border-color: var( --vvd-formfield-border-hover );--mdc-select-outlined-disabled-border-color: var( --vvd-formfield-border-disabled );--mdc-select-error-color: var(--vvd-formfield-label-error-ink);--mdc-select-error-fill-color: var(--vvd-formfield-error-fill);--mdc-select-error-dropdown-icon-color: var(--mdc-select-error-color);--mdc-shape-small: var(--border-radius);--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);display:inline-flex;flex-direction:column;font-stretch:var(--mdc-typography-subtitle1-font-stretch);--vvd-select-size-block:48px}:host .mdc-select__selected-text{padding:22px 0 6px}:host .vvd-select-dropdown-icon,:host .vvd-select-icon{--icon-size: 20px;display:inline-flex;align-self:center;margin:0 16px;color:var(--mdc-select-label-ink-color)}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-floating-label{color:var(--mdc-select-label-ink-color)}:host([disabled]) .mdc-select{background-color:var(--mdc-select-disabled-fill-color)}:host([disabled]) .mdc-select vwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-disabled-border-color )}:host([disabled]) .mdc-select .mdc-select__selected-text{color:var(--mdc-select-disabled-ink-color)}:host([disabled]) .mdc-select .vvd-select-icon{color:var(--mdc-select-disabled-ink-color)}:host([disabled]) .mdc-select .mdc-notched-outline .mdc-floating-label--float-above{--mdc-theme-primary: var(--mdc-select-label-ink-color)}:host([disabled]) .mdc-select .vvd-select-dropdown-icon{color:var(--mdc-select-disabled-dropdown-icon-color)}:host([dense]){--vvd-select-size-block:40px}:host([dense]) .mdc-select__selected-text{padding:0}:host([dense]) .mdc-select .mdc-floating-label{--mdc-select-label-ink-color: var(--vvd-color-on-canvas);--mdc-select-error-color: var(--vvd-color-on-canvas);top:-24px;left:-12px;transform:none}:host([dense]) .mdc-select:not(.mdc-select--no-label){margin-top:24px}.mdc-select{border-radius:var(--mdc-shape-small)}.mdc-select .vvd-select-dropdown-icon{transition:transform 200ms}.mdc-select.mdc-select--activated .vvd-select-dropdown-icon{transform:rotateX(180deg)}.mdc-select--outlined{background-color:var(--mdc-select-fill-color)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label{left:calc(20px + 16px * 2 - 12px)}.mdc-select--outlined .mdc-select__anchor{height:var(--vvd-select-size-block);padding-inline-start:16px}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label{padding-right:8px;line-height:var(--mdc-typography-subtitle1-line-height);transition:transform .15s,font-size .15s}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{color:var(--mdc-select-label-ink-color);font-size:var(--mdc-typography-subtitle1-font-size);transform:translateY(-100%)}@media screen and (prefers-reduced-motion: reduce){.mdc-select--outlined .mdc-select__anchor .mdc-floating-label{padding-right:8px;line-height:var(--mdc-typography-subtitle1-line-height);transition:none}}.mdc-select--invalid.mdc-select--outlined{background-color:var(--mdc-select-error-fill-color)}.mdc-select--invalid.mdc-select--outlined vwc-notched-outline{--mdc-notched-outline-border-color: var(--mdc-select-error-color)}.mdc-select--invalid.mdc-select--outlined .mdc-floating-label{color:var(--mdc-select-error-color)}@media screen and (prefers-reduced-motion: reduce){.mdc-select .vvd-select-dropdown-icon{transition:none}}vwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-idle-border-color )}:host(:not([disabled])) .mdc-select.mdc-select--focused vwc-notched-outline,:host(:not([disabled]):hover) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) vwc-notched-outline{--mdc-notched-outline-border-color: var( --mdc-select-outlined-hover-border-color )}:host(:not([shape=pill i])),:host([shape=rounded i]){--mdc-shape-small:6px}:host([shape=pill i]){--mdc-shape-small:24px}:host([appearance=ghost i][dense]) .mdc-select .mdc-floating-label{left:0}:host([appearance=ghost i][dense]) vwc-notched-outline{--mdc-notched-outline-stroke-width: 0}:host([appearance=ghost i][dense]) .mdc-select__anchor{display:block}:host([appearance=ghost i][dense]) .mdc-select--outlined{--mdc-select-fill-color: transparent}:host([appearance=ghost i][dense][disabled]) .mdc-select.mdc-select--outlined{background-color:transparent}:host(:not([dense])) .mdc-select--no-label .mdc-select__selected-text{padding-top:8px}mwc-menu{--mdc-theme-surface: var(--vvd-color-surface-8dp)}`;function EZ(e){for(;e;){const t=e.closest("form");if(t)return t;const i=e.getRootNode();if(!i)return null;e=i.host}return null}function QZ(e){const t=e.getAttribute("form"),i=t?document.getElementById(t):EZ(e);return i instanceof HTMLFormElement?i:null}class DZ extends HTMLElement{disconnectedCallback(){this.dispatchEvent(new Event("disconnected"))}}window.customElements.define("form-association-disconnection",DZ);function OZ(e,{name:t,type:i,value:n}){e.style.display="none",t&&e.setAttribute("name",t),i&&e.setAttribute("type",i),e.defaultValue=n}function jZ(e,t){const i=document.createElement(t);return e.appendChild(i),i}function sC(e,t,i=""){!e||(e.value=t,e.setCustomValidity(i))}function _Z(e,t,i){return()=>{var n;e.value=t.value=(n=i==null?void 0:i.defaultValue)!==null&&n!==void 0?n:"",sC(i,e.value,t.validationMessage)}}function PZ(e){e.addEventListener("invalid",t=>{t.stopPropagation(),t.preventDefault()})}function qZ(e,t,i){["input","change"].forEach(o=>{e.addEventListener(o,()=>{sC(i,e.value,t.validationMessage)})})}function $Z(e,t){const i=document.createElement("form-association-disconnection");i.addEventListener("disconnected",()=>{t()}),e.appendChild(i)}function ty(e,t,i){return()=>{e.remove(),t.removeEventListener("reset",i)}}function ey(e,t){const i=QZ(e);if(!i)return;const n=jZ(i,t.nodeName);OZ(n,e),PZ(n);const o=_Z(e,t,n),l=ty(n,i,o);sC(n,e.value,t.validationMessage),i.addEventListener("reset",o),$Z(e,l),qZ(e,t,n)}const iy="vvd-select-dropdown-icon";nc.styles=[bc,ob,UZ];let Ar=class extends nc{constructor(){super(...arguments),this.dense=!1}connectedCallback(){super.connectedCallback(),this.hasAttribute("outlined")||(this.outlined=!0)}async firstUpdated(){await super.firstUpdated(),this.replaceDropDownIcon(),ey(this,this.formElement),Wh(this)}update(t){super.update(t),(this.shape==="pill"||this.appearance==="ghost")&&(this.dense=!0)}updated(t){var i;super.updated(t);const n=(i=this.shadowRoot)===null||i===void 0?void 0:i.querySelector(".mdc-select__selected-text");n&&(n.setAttribute("aria-label","current selection"),n.setAttribute("role","textbox"))}renderHelperText(){if(!this.shouldRenderHelperText)return"";const t=this.validationMessage&&!this.isUiValid,i=t?this.validationMessage:this.helper;return Lt`<vwc-helper-message
			id="helper-text"
			class="helper-message"
			?disabled="${this.disabled}"
			?is-error="${t}"
			>${i}</vwc-helper-message
		>`}renderLeadingIcon(){return this.icon?Lt`<vwc-icon class="vvd-select-icon" type="${this.icon}"></vwc-icon>`:""}renderOutline(){return this.outlined?Lt`<vwc-notched-outline class="mdc-notched-outline vvd-notch">
			${this.renderLabel()}
		</vwc-notched-outline>`:{}}replaceDropDownIcon(){var t,i;const n=document.createElement("vwc-icon");n.classList.add(iy),n.setAttribute("type","down"),(i=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector(".mdc-select__dropdown-icon"))===null||i===void 0||i.replaceWith(n)}};z([ct({type:Boolean,reflect:!0})],Ar.prototype,"dense",void 0);z([ct({type:String,reflect:!0})],Ar.prototype,"shape",void 0);z([ct({type:String,reflect:!0})],Ar.prototype,"form",void 0);z([ct({type:String,reflect:!0})],Ar.prototype,"name",void 0);z([ct({type:String,reflect:!0})],Ar.prototype,"appearance",void 0);Ar=z([Yi("vwc-select")],Ar);const ny=bi`:host{--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert)}:host .mdc-deprecated-list-item__text,:host([twoline]) .mdc-deprecated-list-item__text{align-self:center;margin-inline-end:4px}:host([twoline]) .mdc-deprecated-list-item__primary-text{font:600 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;margin-bottom:4px}:host([twoline]) .mdc-deprecated-list-item__primary-text::before,:host([twoline]) .mdc-deprecated-list-item__primary-text::after{display:none}:host([twoline]) .mdc-deprecated-list-item__secondary-text{font:400 ultra-condensed 12px / 16px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}:host([twoline]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([disabled]) .mdc-deprecated-list-item__text{color:var(--vvd-formfield-disabled-ink)}:host([shape=rounded i]){--vvd-list-item-shape:6px}:host{--mdc-list-side-padding: var(--vvd-list-item-side-padding);--mdc-list-item-graphic-margin: var(--vvd-list-item-graphic-margin);--mdc-list-item-graphic-size: 20px;--mdc-list-item-meta-size: 20px;--mdc-theme-text-icon-on-background: var( --vvd-color-on-canvas );--mdc-theme-text-hint-on-background: var( --vvd-color-on-canvas );font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;--vvd-formfield-disabled-ink:var(--vvd-color-neutral-50);--vvd-formfield-disabled-fill:var(--vvd-color-neutral-20);--vvd-formfield-label-idle-ink:var(--vvd-color-neutral-70);--vvd-formfield-border-idle:var(--vvd-color-neutral-50);--vvd-formfield-border-hover:var(--vvd-color-on-canvas);--vvd-formfield-border-disabled:var(--vvd-color-neutral-50);--vvd-formfield-error-fill:var(--vvd-color-alert-20);--vvd-formfield-label-error-ink:var(--vvd-color-alert);position:relative;height:var(--vvd-list-item-block-size);border-radius:var(--vvd-list-item-shape);--vvd-list-item-block-size:40px;--vvd-list-item-side-padding:16px;--vvd-list-item-graphic-margin:16px}:host:host([connotation=primary i]){--list-item-connotation:var(--vvd-color-primary);--list-item-on-connotation:var(--vvd-color-on-primary)}:host([activated]){--mdc-ripple-focus-opacity: 0;--mdc-ripple-hover-opacity: 0;z-index:0}:host([activated]) mwc-ripple,:host([activated]) .fake-activated-ripple{--mdc-ripple-activated-opacity: 0;z-index:-1}:host([activated][connotation=primary]) .mdc-deprecated-list-item__secondary-text ::slotted(*){--mdc-theme-text-secondary-on-background: var(--vvd-color-neutral-40)}:host([activated][twoline][connotation=primary]:not([disabled]))::after{--vvd-list-divider--color:var(--vvd-color-neutral-80)}:host([activated]:not([disabled])){--mdc-theme-text-icon-on-background: var( --list-item-on-connotation, var(--vvd-color-on-canvas) );--mdc-theme-text-hint-on-background: var( --list-item-on-connotation, var(--vvd-color-on-canvas) );--mdc-ripple-color: var( --list-item-on-connotation, var(--vvd-color-on-canvas) );color:var(--list-item-on-connotation, var(--vvd-color-on-canvas))}:host([activated]:not([disabled])) .fake-activated-ripple{--mdc-ripple-activated-opacity: 1;--mdc-ripple-color: var( --list-item-connotation, var(--vvd-color-neutral-30) )}:host([activated]:not([disabled])) mwc-ripple{background-color:var(--list-item-connotation, var(--vvd-color-neutral-30))}:host([graphic=icon]:not([twoline])){height:var(--vvd-list-item-block-size)}:host([twoline]){height:auto;min-block-size:var(--vvd-list-item-block-size);--vvd-list-item-block-size:64px;--vvd-list-item-side-padding:16px;--vvd-list-item-graphic-margin:12px}:host([twoline])::after{position:absolute;right:var(--vvd-list-item-side-padding);bottom:0;left:var(--vvd-list-item-side-padding);height:1px;border-bottom:1px solid var(--vvd-list-divider--color);content:""}:host([twoline]) .mdc-deprecated-list-item__meta{flex-shrink:0}:host([disabled]){--mdc-theme-text-icon-on-background: var(--vvd-formfield-disabled-ink);--mdc-theme-text-hint-on-background: var(--vvd-formfield-disabled-ink)}.mdc-deprecated-list-item__meta{display:flex}:host(:not([disabled])) .mdc-deprecated-list-item__graphic ::slotted(*),:host(:not([disabled])) .mdc-deprecated-list-item__meta ::slotted(*){color:var(--vvd-color-neutral-70)}:host([activated][connotation=primary]):host(:not([disabled])) .mdc-deprecated-list-item__graphic ::slotted(*),:host([activated][connotation=primary]):host(:not([disabled])) .mdc-deprecated-list-item__meta ::slotted(*){color:var(--list-item-on-connotation)}`;ic.styles=[bc,eb,ny];let Xg=class extends ic{};z([ct({type:String,reflect:!0})],Xg.prototype,"connotation",void 0);z([ct({type:String,reflect:!0})],Xg.prototype,"shape",void 0);Xg=z([Yi("vwc-list-item")],Xg);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ss={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},rC={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},ns={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Z0=ss.OPENING,y0=ss.OPEN,f0=ss.CLOSING,oy=rC.REASON_ACTION,la=rC.REASON_DISMISS,sy=function(e){xo(t,e);function t(i){var n=e.call(this,on(on({},t.defaultAdapter),i))||this;return n.opened=!1,n.animationFrame=0,n.animationTimer=0,n.autoDismissTimer=0,n.autoDismissTimeoutMs=ns.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,n.closeOnEscape=!0,n}return Object.defineProperty(t,"cssClasses",{get:function(){return ss},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return rC},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ns},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer(),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=0,this.adapter.removeClass(Z0),this.adapter.removeClass(y0),this.adapter.removeClass(f0)},t.prototype.open=function(){var i=this;this.clearAutoDismissTimer(),this.opened=!0,this.adapter.notifyOpening(),this.adapter.removeClass(f0),this.adapter.addClass(Z0),this.adapter.announce(),this.runNextAnimationFrame(function(){i.adapter.addClass(y0),i.animationTimer=setTimeout(function(){var n=i.getTimeoutMs();i.handleAnimationTimerEnd(),i.adapter.notifyOpened(),n!==ns.INDETERMINATE&&(i.autoDismissTimer=setTimeout(function(){i.close(la)},n))},ns.SNACKBAR_ANIMATION_OPEN_TIME_MS)})},t.prototype.close=function(i){var n=this;i===void 0&&(i=""),this.opened&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=0,this.clearAutoDismissTimer(),this.opened=!1,this.adapter.notifyClosing(i),this.adapter.addClass(ss.CLOSING),this.adapter.removeClass(ss.OPEN),this.adapter.removeClass(ss.OPENING),clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){n.handleAnimationTimerEnd(),n.adapter.notifyClosed(i)},ns.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.opened},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs},t.prototype.setTimeoutMs=function(i){var n=ns.MIN_AUTO_DISMISS_TIMEOUT_MS,o=ns.MAX_AUTO_DISMISS_TIMEOUT_MS,l=ns.INDETERMINATE;if(i===ns.INDETERMINATE||i<=o&&i>=n)this.autoDismissTimeoutMs=i;else throw new Error(`
        timeoutMs must be an integer in the range `+n+"\u2013"+o+`
        (or `+l+" to disable), but got '"+i+"'")},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape},t.prototype.setCloseOnEscape=function(i){this.closeOnEscape=i},t.prototype.handleKeyDown=function(i){var n=i.key==="Escape"||i.keyCode===27;n&&this.getCloseOnEscape()&&this.close(la)},t.prototype.handleActionButtonClick=function(i){this.close(oy)},t.prototype.handleActionIconClick=function(i){this.close(la)},t.prototype.clearAutoDismissTimer=function(){clearTimeout(this.autoDismissTimer),this.autoDismissTimer=0},t.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(ss.OPENING),this.adapter.removeClass(ss.CLOSING)},t.prototype.runNextAnimationFrame=function(i){var n=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){n.animationFrame=0,clearTimeout(n.animationTimer),n.animationTimer=setTimeout(i,0)})},t}(Yo),lC=sy;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const{ARIA_LIVE_DELAY_MS:ry}=lC.numbers;class ly extends Ph{constructor(t){if(super(t),this.labelEl=null,this.timerId=null,this.previousPart=null,t.type!==wo.CHILD)throw new Error("AccessibleSnackbarLabel only supports child parts.")}update(t,[i,n]){var o;if(!n)return;if(this.labelEl===null){const m=document.createElement("div"),y=Lt`<div class="mdc-snackbar__label" role="status" aria-live="polite">${i}</div>`;Zg(y,m);const H=m.firstElementChild;return(o=t.endNode)===null||o===void 0||o.parentNode.insertBefore(H,t.endNode),this.labelEl=H,H}const l=this.labelEl;l.setAttribute("aria-live","off"),l.textContent="";const I=Lt`<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>`;return Zg(I,l),l.setAttribute("data-mdc-snackbar-label-text",i),this.timerId!==null&&clearTimeout(this.timerId),this.timerId=window.setTimeout(()=>{this.timerId=null,l.setAttribute("aria-live","polite"),l.removeAttribute("data-mdc-snackbar-label-text"),l.textContent=i,this.setValue(this.labelEl)},ry),l}render(t,i){return i?Lt`
      <div class="mdc-snackbar__label" role="status" aria-live="polite">${t}</div>`:Lt``}}const tI=md(ly),{OPENING_EVENT:cy,OPENED_EVENT:gy,CLOSING_EVENT:dy,CLOSED_EVENT:ay}=lC.strings;class $o extends Ks{constructor(){super(...arguments),this.mdcFoundationClass=lC,this.open=!1,this.timeoutMs=5e3,this.closeOnEscape=!1,this.labelText="",this.stacked=!1,this.leading=!1,this.reason=""}render(){const t={"mdc-snackbar--stacked":this.stacked,"mdc-snackbar--leading":this.leading};return Lt`
      <div class="mdc-snackbar ${In(t)}" @keydown="${this._handleKeydown}">
        <div class="mdc-snackbar__surface">
          ${tI(this.labelText,this.open)}
          <div class="mdc-snackbar__actions">
            <slot name="action" @click="${this._handleActionClick}"></slot>
            <slot name="dismiss" @click="${this._handleDismissClick}"></slot>
          </div>
        </div>
      </div>`}createAdapter(){return Object.assign(Object.assign({},uc(this.mdcRoot)),{announce:()=>{},notifyClosed:t=>{this.dispatchEvent(new CustomEvent(ay,{bubbles:!0,cancelable:!0,detail:{reason:t}}))},notifyClosing:t=>{this.open=!1,this.dispatchEvent(new CustomEvent(dy,{bubbles:!0,cancelable:!0,detail:{reason:t}}))},notifyOpened:()=>{this.dispatchEvent(new CustomEvent(gy,{bubbles:!0,cancelable:!0}))},notifyOpening:()=>{this.open=!0,this.dispatchEvent(new CustomEvent(cy,{bubbles:!0,cancelable:!0}))}})}show(){this.open=!0}close(t=""){this.reason=t,this.open=!1}firstUpdated(){super.firstUpdated(),this.open&&this.mdcFoundation.open()}_handleKeydown(t){this.mdcFoundation.handleKeyDown(t)}_handleActionClick(t){this.mdcFoundation.handleActionButtonClick(t)}_handleDismissClick(t){this.mdcFoundation.handleActionIconClick(t)}}z([vi(".mdc-snackbar")],$o.prototype,"mdcRoot",void 0);z([vi(".mdc-snackbar__label")],$o.prototype,"labelElement",void 0);z([ct({type:Boolean,reflect:!0}),pi(function(e){this.mdcFoundation&&(e?this.mdcFoundation.open():(this.mdcFoundation.close(this.reason),this.reason=""))})],$o.prototype,"open",void 0);z([pi(function(e){this.mdcFoundation.setTimeoutMs(e)}),ct({type:Number})],$o.prototype,"timeoutMs",void 0);z([pi(function(e){this.mdcFoundation.setCloseOnEscape(e)}),ct({type:Boolean})],$o.prototype,"closeOnEscape",void 0);z([ct({type:String})],$o.prototype,"labelText",void 0);z([ct({type:Boolean})],$o.prototype,"stacked",void 0);z([ct({type:Boolean})],$o.prototype,"leading",void 0);const Iy=bi`.mdc-snackbar.connotation-success{--connotation:var(--vvd-color-success);--on-connotation:var(--vvd-color-on-success)}.mdc-snackbar.connotation-alert{--connotation:var(--vvd-color-alert);--on-connotation:var(--vvd-color-on-alert)}.mdc-snackbar.connotation-warning{--connotation:var(--vvd-color-warning);--on-connotation:var(--vvd-color-on-warning)}.mdc-snackbar.connotation-info{--connotation:var(--vvd-color-info);--on-connotation:var(--vvd-color-on-info)}.mdc-snackbar.connotation-announcement,.mdc-snackbar:not(.connotation-success):not(.connotation-alert):not(.connotation-warning):not(.connotation-info){--connotation:var(--vvd-color-announcement);--on-connotation:var(--vvd-color-on-announcement)}.mdc-snackbar[position^=TOP]{top:0;bottom:initial}.mdc-snackbar[position$=START]{justify-content:flex-start}.mdc-snackbar[position$=END]{justify-content:flex-end}.mdc-snackbar__surface{padding-right:initial;background-color:var(--vvd-color-canvas);border-radius:6px;box-shadow:0 6px 8px rgba(0,0,0,.05),0 12px 16px rgba(0,0,0,.05),0 4px 24px rgba(0,0,0,.1)}.mdc-snackbar__label{font:400 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;padding:22px 16px;color:var(--vvd-color-on-canvas);-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}.icon{flex-shrink:0;margin-block-end:auto;margin-block-start:16px;margin-inline-start:16px}.vwc-snackbar-legacy .icon{--connotation:initial;color:var(--vvd-color-on-canvas);margin-block-start:20px}.dismiss-container{display:flex;align-items:center;align-self:stretch;margin-inline-end:16px}.dismiss-container::before{align-self:stretch;border-left:1px solid var(--vvd-color-neutral-30);content:"";margin-inline-end:16px}.vwc-snackbar-legacy ::slotted([slot=action]){margin-block-start:16px}:not(.vwc-snackbar-legacy) ::slotted([slot=action]:last-child){margin-inline-end:16px}.vwc-snackbar-legacy .mdc-snackbar__surface{padding-inline-start:8px}.vwc-snackbar-legacy .mdc-snackbar__surface::before{border:1px solid var(--vvd-color-neutral-40);border-inline-start:8px solid var(--connotation)}.vwc-snackbar-legacy .header-and-label{padding:22px 16px}.vwc-snackbar-legacy .header-and-label>.heading{font:600 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.vwc-snackbar-legacy .mdc-snackbar__label{font:400 ultra-condensed 14px / 20px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none}.header-and-label{padding:16px 16px}.header-and-label>.heading{font:600 ultra-condensed 16px / 24px SpeziaWebVariable;letter-spacing:0px;text-decoration:none;text-transform:none;color:var(--vvd-color-on-canvas);margin-block-end:4px;margin-block-start:0}.header-and-label>.mdc-snackbar__label{padding:0}.vwc-snackbar-legacy .mdc-snackbar__actions{align-items:baseline;margin-block-end:auto;margin-block-start:20px}.vwc-snackbar-legacy .mdc-snackbar__actions .dismiss-container::before{content:initial}`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */const Cy=bi`.mdc-snackbar{z-index:8;margin:8px;display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar__surface{background-color:#333333}.mdc-snackbar__label{color:rgba(255, 255, 255, 0.87)}.mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mdc-snackbar__surface{min-width:100%}}.mdc-snackbar__surface{max-width:672px}.mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0,0,0,.12)}.mdc-snackbar__surface{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar--leading{justify-content:flex-start}.mdc-snackbar--stacked .mdc-snackbar__label{padding-left:16px;padding-right:8px;padding-bottom:12px}[dir=rtl] .mdc-snackbar--stacked .mdc-snackbar__label,.mdc-snackbar--stacked .mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar--stacked .mdc-snackbar__surface{flex-direction:column;align-items:flex-start}.mdc-snackbar--stacked .mdc-snackbar__actions{align-self:flex-end;margin-bottom:8px}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto;transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1);transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-snackbar__label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-body2-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-body2-font-size, 0.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight, 400);letter-spacing:0.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing, 0.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform, inherit);padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action:not(:disabled){color:#bb86fc}.mdc-snackbar__action::before,.mdc-snackbar__action::after{background-color:#bb86fc;background-color:var(--mdc-ripple-color, #bb86fc)}.mdc-snackbar__action:hover::before,.mdc-snackbar__action.mdc-ripple-surface--hover::before{opacity:0.08;opacity:var(--mdc-ripple-hover-opacity, 0.08)}.mdc-snackbar__action.mdc-ripple-upgraded--background-focused::before,.mdc-snackbar__action:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-snackbar__action:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-snackbar__action:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__action.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss{color:rgba(255, 255, 255, 0.87)}.mdc-snackbar__dismiss .mdc-icon-button__ripple::before,.mdc-snackbar__dismiss .mdc-icon-button__ripple::after{background-color:rgba(255, 255, 255, 0.87);background-color:var(--mdc-ripple-color, rgba(255, 255, 255, 0.87))}.mdc-snackbar__dismiss:hover .mdc-icon-button__ripple::before,.mdc-snackbar__dismiss.mdc-ripple-surface--hover .mdc-icon-button__ripple::before{opacity:0.08;opacity:var(--mdc-ripple-hover-opacity, 0.08)}.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__ripple::before,.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__ripple::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded) .mdc-icon-button__ripple::after{transition:opacity 150ms linear}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):active .mdc-icon-button__ripple::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss.mdc-snackbar__dismiss{width:36px;height:36px;padding:6px;font-size:18px}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}slot[name=action]::slotted(mwc-button){--mdc-theme-primary: var( --mdc-snackbar-action-color, #bb86fc )}slot[name=dismiss]::slotted(mwc-icon-button){--mdc-icon-size: 18px;--mdc-icon-button-size: 36px;color:rgba(255, 255, 255, 0.87);margin-left:8px;margin-right:0}[dir=rtl] slot[name=dismiss]::slotted(mwc-icon-button),::slotted(mwc-icon-buttonslot[name=dismiss][dir=rtl]){margin-left:0;margin-right:8px}`;var eI;const uy="opening",my="opened",hy="closing",by="closed";$o.styles=[Cy,Iy];const G0=`${ls.Bottom}-${ls.Center}`,py=new RegExp(`^(${ls.Top}|${ls.Bottom})-(${ls.Start}|${ls.Center}|${ls.End})$`);let hs=eI=class extends $o{constructor(){super(...arguments),this.legacy=!1,this.position=G0,this.message=""}connectedCallback(){super.connectedCallback(),this.setupEventListeners()}setupEventListeners(){const t="MDCSnackbar";for(const i of[uy,my,hy,by])this.addEventListener(`${t}:${i}`,this.getEventHandler(i))}getEventHandler(t){return i=>{const n=t,o=i.detail,l=o?Object.assign({},o):null,I=new CustomEvent(n,{bubbles:!0,composed:!0,detail:l});this.dispatchEvent(I)}}getRenderClasses(){return{[`connotation-${this.connotation}`]:!!this.connotation,"vwc-snackbar-legacy":this.legacy}}render(){const t=eI.preprocessPositionConfig(this.position),i=this.legacy?void 0:"vvd-scheme-alternate";return Lt`
			<div
				class="mdc-snackbar ${In(this.getRenderClasses())}"
				position="${t}"
				part="${Oo(i)}"
				@keydown="${this._handleKeydown}">
				<div class="mdc-snackbar__surface">
					${this.icon?this.renderIcon():""}
					${this.legacy?this.renderLegacyUi():this.renderContent()}
					<div class="mdc-snackbar__actions">
            ${this.legacy?"":Lt`<slot name="action" @click="${this._handleActionClick}"></slot>`}
						${this.renderDismissAction()}
          </div>
				</div>
			</div>
		`}renderHeading(){return Lt`<h3 class="heading" aria-hidden="true">
					${this.header}
				</h3>`}renderLegacyUi(){return Lt`
			<div class="header-and-label">
				${this.header?this.renderHeading():""}
				${tI(this.message,this.open)}
				<slot name="action" @click="${this._handleActionClick}"></slot>
			</div>`}renderContent(){return Lt`
			<div class="header-and-label">
				${this.header?this.renderHeading():""}
				${tI(this.message,this.open)}
			</div>`}renderIcon(){return Lt`
    <vwc-icon class="icon" type="${this.icon}"></vwc-icon>`}renderDismissAction(){return this.dismissible?Lt`
			<div class="dismiss-container">
				<vwc-icon-button
					class="dismiss-button"
					icon="close-line"
					layout="ghost"
					dense
					@click="${this._handleDismissClick}"
				>
				</vwc-icon-button>
			</div>
		`:""}static preprocessPositionConfig(t){let i=G0;return typeof t=="string"&&py.test(t)&&(i=t),i}};z([ct({type:Boolean,reflect:!0})],hs.prototype,"legacy",void 0);z([ct({reflect:!0})],hs.prototype,"position",void 0);z([ct({type:String,reflect:!0})],hs.prototype,"connotation",void 0);z([ct({type:String,reflect:!0})],hs.prototype,"icon",void 0);z([ct({type:String,reflect:!0})],hs.prototype,"header",void 0);z([ct({type:String,reflect:!0})],hs.prototype,"message",void 0);z([ct({type:Boolean,reflect:!0})],hs.prototype,"dismissible",void 0);hs=eI=z([Yi("vwc-snackbar")],hs);class Ay{constructor(){this.video_=document.getElementById("source_video")}setStream(t){this.stream_=t,this.maybeAddVideoElement_()}maybeAddVideoElement_(){this.stream_&&this.video_&&(this.video_.srcObject=this.stream_,this.video_.play())}}class Zy{constructor(){this.video_=document.getElementById("priview_video")}setMediaStream(t){this.video_&&t!=null&&(this.video_.srcObject=t,this.video_.play())}destroy(){this.video_&&(this.video_.pause(),this.video_.srcObject=null)}}class yy{constructor(){this.videoMirrorHelper_=new Ay,this.sink_=new Zy}init(){return new Promise((t,i)=>{navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(n=>{this.stream_=n,this.videoTrack_=this.stream_.getVideoTracks()[0],this.videoMirrorHelper_.setStream(this.stream_),t()}).catch(n=>{i(n)})})}setMediaProcessorConnector(t){return new Promise(async(i,n)=>{this.mediaProcessorConnector_=t,this.stream_||(console.log("[CameraSource] Requesting camera."),n("no stream")),this.mediaProcessorConnector_.setTrack(this.videoTrack_).then(o=>{let l=new MediaStream;l.addTrack(o),this.sink_.setMediaStream(l),i()}).catch(o=>{n(o)})})}async stopMediaProcessorConnector(){this.mediaProcessorConnector_&&this.mediaProcessorConnector_.destroy().then(()=>{this.sink_.destroy()}).catch(t=>{console.log(t)})}}function fy(){return new Promise((e,t)=>{typeof MediaStreamTrackProcessor>"u"||typeof MediaStreamTrackGenerator>"u"?t("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):e()})}let Is=class{};Is.updates={transformer_new:"New transformer",transformer_null:"Null transformer"};Is.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer",readable_null:"Readable is null",writable_null:"Writable is null"};function Gy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const ys=new WeakMap,cg=new WeakMap,Jl=new WeakMap,iI=Symbol("anyProducer"),V0=Promise.resolve(),Rg=Symbol("listenerAdded"),vg=Symbol("listenerRemoved");let ca=!1;function Sr(e){if(typeof e!="string"&&typeof e!="symbol")throw new TypeError("eventName must be a string or a symbol")}function Tc(e){if(typeof e!="function")throw new TypeError("listener must be a function")}function wr(e,t){const i=cg.get(e);return i.has(t)||i.set(t,new Set),i.get(t)}function Tl(e,t){const i=typeof t=="string"||typeof t=="symbol"?t:iI,n=Jl.get(e);return n.has(i)||n.set(i,new Set),n.get(i)}function Vy(e,t,i){const n=Jl.get(e);if(n.has(t))for(const o of n.get(t))o.enqueue(i);if(n.has(iI)){const o=Promise.all([t,i]);for(const l of n.get(iI))l.enqueue(o)}}function W0(e,t){t=Array.isArray(t)?t:[t];let i=!1,n=()=>{},o=[];const l={enqueue(I){o.push(I),n()},finish(){i=!0,n()}};for(const I of t)Tl(e,I).add(l);return{async next(){return o?o.length===0?i?(o=void 0,this.next()):(await new Promise(I=>{n=I}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(I){o=void 0;for(const m of t)Tl(e,m).delete(l);return n(),arguments.length>0?{done:!0,value:await I}:{done:!0}},[Symbol.asyncIterator](){return this}}}function B0(e){if(e===void 0)return X0;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!X0.includes(t))throw typeof t!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${t} is not Emittery method`);return e}const ga=e=>e===Rg||e===vg;let hd=class nI{static mixin(t,i){return i=B0(i),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const I of i)if(n.prototype[I]!==void 0)throw new Error(`The property \`${I}\` already exists on \`target\``);function o(){return Object.defineProperty(this,t,{enumerable:!1,value:new nI}),this[t]}Object.defineProperty(n.prototype,t,{enumerable:!1,get:o});const l=I=>function(...m){return this[t][I](...m)};for(const I of i)Object.defineProperty(n.prototype,I,{enumerable:!1,value:l(I)});return n}}static get isDebugEnabled(){if(typeof process!="object")return ca;const{env:t}=process||{env:{}};return t.DEBUG==="emittery"||t.DEBUG==="*"||ca}static set isDebugEnabled(t){ca=t}constructor(t={}){ys.set(this,new Set),cg.set(this,new Map),Jl.set(this,new Map),this.debug=t.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(i,n,o,l)=>{try{l=JSON.stringify(l)}catch{l=`Object with the following keys failed to stringify: ${Object.keys(l).join(",")}`}typeof o=="symbol"&&(o=o.toString());const I=new Date,m=`${I.getHours()}:${I.getMinutes()}:${I.getSeconds()}.${I.getMilliseconds()}`;console.log(`[${m}][emittery:${i}][${n}] Event Name: ${o}
	data: ${l}`)})}logIfDebugEnabled(t,i,n){(nI.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,i,n)}on(t,i){Tc(i),t=Array.isArray(t)?t:[t];for(const n of t)Sr(n),wr(this,n).add(i),this.logIfDebugEnabled("subscribe",n,void 0),ga(n)||this.emit(Rg,{eventName:n,listener:i});return this.off.bind(this,t,i)}off(t,i){Tc(i),t=Array.isArray(t)?t:[t];for(const n of t)Sr(n),wr(this,n).delete(i),this.logIfDebugEnabled("unsubscribe",n,void 0),ga(n)||this.emit(vg,{eventName:n,listener:i})}once(t){return new Promise(i=>{const n=this.on(t,o=>{n(),i(o)})})}events(t){t=Array.isArray(t)?t:[t];for(const i of t)Sr(i);return W0(this,t)}async emit(t,i){Sr(t),this.logIfDebugEnabled("emit",t,i),Vy(this,t,i);const n=wr(this,t),o=ys.get(this),l=[...n],I=ga(t)?[]:[...o];await V0,await Promise.all([...l.map(async m=>{if(n.has(m))return m(i)}),...I.map(async m=>{if(o.has(m))return m(t,i)})])}async emitSerial(t,i){Sr(t),this.logIfDebugEnabled("emitSerial",t,i);const n=wr(this,t),o=ys.get(this),l=[...n],I=[...o];await V0;for(const m of l)n.has(m)&&await m(i);for(const m of I)o.has(m)&&await m(t,i)}onAny(t){return Tc(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),ys.get(this).add(t),this.emit(Rg,{listener:t}),this.offAny.bind(this,t)}anyEvent(){return W0(this)}offAny(t){Tc(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(vg,{listener:t}),ys.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(const i of t)if(this.logIfDebugEnabled("clear",i,void 0),typeof i=="string"||typeof i=="symbol"){wr(this,i).clear();const n=Tl(this,i);for(const o of n)o.finish();n.clear()}else{ys.get(this).clear();for(const n of cg.get(this).values())n.clear();for(const n of Jl.get(this).values()){for(const o of n)o.finish();n.clear()}}}listenerCount(t){t=Array.isArray(t)?t:[t];let i=0;for(const n of t){if(typeof n=="string"){i+=ys.get(this).size+wr(this,n).size+Tl(this,n).size+Tl(this).size;continue}typeof n<"u"&&Sr(n),i+=ys.get(this).size;for(const o of cg.get(this).values())i+=o.size;for(const o of Jl.get(this).values())i+=o.size}return i}bindMethods(t,i){if(typeof t!="object"||t===null)throw new TypeError("`target` must be an object");i=B0(i);for(const n of i){if(t[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(t,n,{enumerable:!1,value:this[n].bind(this)})}}};const X0=Object.getOwnPropertyNames(hd.prototype).filter(e=>e!=="constructor");Object.defineProperty(hd,"listenerAdded",{value:Rg,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(hd,"listenerRemoved",{value:vg,writable:!1,enumerable:!0,configurable:!1});var Wy=hd;const cC=Gy(Wy);function By(e){return typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"}function Xy(e){if(By(e))return e;try{return new Error(JSON.stringify(e))}catch{return new Error(String(e))}}function da(e){return Xy(e).message}var Ry=Object.defineProperty,vy=(e,t,i)=>t in e?Ry(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Sy=(e,t,i)=>(vy(e,t+"",i),i);const wy="hlg.tokbox.com/prod/logging/vcp_webrtc",Fy="https://",Hy=1e4;let kc;const xy=new Uint8Array(16);function Yy(){if(!kc&&(kc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!kc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kc(xy)}const Mn=[];for(let e=0;e<256;++e)Mn.push((e+256).toString(16).slice(1));function Ny(e,t=0){return(Mn[e[t+0]]+Mn[e[t+1]]+Mn[e[t+2]]+Mn[e[t+3]]+"-"+Mn[e[t+4]]+Mn[e[t+5]]+"-"+Mn[e[t+6]]+Mn[e[t+7]]+"-"+Mn[e[t+8]]+Mn[e[t+9]]+"-"+Mn[e[t+10]]+Mn[e[t+11]]+Mn[e[t+12]]+Mn[e[t+13]]+Mn[e[t+14]]+Mn[e[t+15]]).toLowerCase()}const My=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),R0={randomUUID:My};function Ly(e,t,i){if(R0.randomUUID&&!t&&!e)return R0.randomUUID();e=e||{};const n=e.random||(e.rng||Yy)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Ny(n)}function gC(e,t){globalThis.vonage||(globalThis.vonage={}),globalThis.vonage.workerizer||(globalThis.vonage.workerizer={});let i=globalThis.vonage.workerizer;return i[e]||(i[e]=t),i[e]}const ws=gC("globals",{});var cr=(e=>(e.INIT="INIT",e.FORWARD="FORWARD",e.TERMINATE="TERMINATE",e.GLOBALS_SYNC="GLOBALS_SYNC",e))(cr||{});function sb(e){return[ImageBitmap,ReadableStream,WritableStream].some(t=>e instanceof t)}let Jy=0;function Ty(e,t,i,n,o){const l=Jy++;return e.postMessage({id:l,type:t,functionName:i,args:n},n.filter(I=>sb(I))),new Promise(I=>{o==null||o.set(l,I)})}function Ac(e,t){const{id:i,type:n}=e,o=Array.isArray(t)?t:[t];postMessage({id:i,type:n,result:t},o.filter(l=>sb(l)))}const v0=gC("workerized",{});function rb(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}async function ky(){if(rb())Ac({type:cr.GLOBALS_SYNC},ws);else{const e=[];for(const t in v0){const{worker:i,resolvers:n}=v0[t].workerContext;i&&e.push(Ty(i,cr.GLOBALS_SYNC,"",[ws],n))}await Promise.all(e)}}function Sg(e,t){if(Array.isArray(t))t.splice(0,t.length);else if(typeof t=="object")for(const i in t)delete t[i];for(const i in e)Array.isArray(e[i])?(t[i]=[],Sg(e[i],t[i])):typeof e[i]=="object"?(t[i]={},Sg(e[i],t[i])):t[i]=e[i]}async function zy(e,t){const{functionName:i,args:n}=e;if(!t.instance)throw"instance not initialized";if(!i)throw"missing function name to call";if(!t.instance[i])throw`undefined function [${i}] in class ${t.instance.constructor.workerId}`;Ac(e,await t.instance[i](...n!=null?n:[]))}const Ky=gC("registeredWorkers",{});function Uy(e,t){if(!e.args)throw"Missing className while initializing worker";const[i,n]=e.args,o=Ky[i];if(o)t.instance=new o(e.args.slice(1));else throw`unknown worker class ${i}`;Sg(n,ws),Ac(e,typeof t.instance!==void 0)}async function Ey(e,t){const{args:i}=e;if(!t.instance)throw"instance not initialized";let n;t.instance.terminate&&(n=await t.instance.terminate(...i!=null?i:[])),Ac(e,n)}function Qy(e){if(!e.args)throw"Missing globals while syncing";Sg(e.args[0],ws),Ac(e,{})}function Dy(){const e={};onmessage=async t=>{const i=t.data;switch(i.type){case cr.INIT:Uy(i,e);break;case cr.FORWARD:zy(i,e);break;case cr.TERMINATE:Ey(i,e);break;case cr.GLOBALS_SYNC:Qy(i);break}}}rb()&&Dy();function Oy(e,t){return ws[e]||(ws[e]=t),[()=>ws[e],async i=>{ws[e]=i,await ky()}]}function jy(e,t){return Oy(e,t)}const[_y,Py]=jy("metadata");function qy(e){Py(e)}function gg(){return _y()}let dC=class{constructor(t,i){Sy(this,"uuid"),this.config=t,this.uuid=i!=null?i:Ly()}async send(t){var i,n,o;const{appId:l,sourceType:I}=(i=gg())!=null?i:{};if(!l||!I)return"metadata missing";const m=new AbortController,y=setTimeout(()=>m.abort(),Hy);return await((o=(n=this.config)==null?void 0:n.fetch)!=null?o:fetch)(this.getUrl(),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(this.buildReport(t)),signal:m.signal}),clearTimeout(y),"success"}getUrl(){var t;let i=(t=gg().proxyUrl)!=null?t:Fy;return i+=(i.at(-1)==="/"?"":"/")+wy,i}getHeaders(){return{"Content-Type":"application/json"}}buildReport(t){const i=gg();return{guid:this.uuid,...t,applicationId:i.appId,timestamp:Date.now(),proxyUrl:i.proxyUrl,source:i.sourceType}}};const dg="2.0.4";let $y=class{constructor(t,i){this.config=t,this.frameTransformedCount=0,this.frameFromSourceCount=0,this.startAt=0,this.reporter=new dC(t,i)}async onFrameFromSource(){this.frameFromSourceCount++}get fps(){const{startAt:t,frameFromSourceCount:i}=this,n=(Date.now()-t)/1e3;return i/n}async onFrameTransformed(t={},i=!1){this.startAt===0&&(this.startAt=Date.now()),this.frameTransformedCount++;const{startAt:n,frameTransformedCount:o,frameFromSourceCount:l}=this,I=Date.now(),m=(I-n)/1e3,y=o/m,H=l/m;return i||this.frameTransformedCount>=this.config.loggingIntervalFrameCount?(this.frameFromSourceCount=0,this.frameTransformedCount=0,this.startAt=I,this.reporter.config=this.config,this.reporter.send({...this.config.report,variation:"QoS",fps:H,transformedFps:y,framesTransformed:o,...t})):"success"}};var oI=(e=>(e.pipeline_ended="pipeline_ended",e.pipeline_ended_with_error="pipeline_ended_with_error",e.pipeline_started="pipeline_started",e.pipeline_started_with_error="pipeline_started_with_error",e.pipeline_restarted="pipeline_restarted",e.pipeline_restarted_with_error="pipeline_restarted_with_error",e))(oI||{});const t3=500,e3=.8;let i3=class extends cC{constructor(t,i){super(),this.reporter_=new dC,this.reporterQos_=new $y({loggingIntervalFrameCount:t3,report:{version:dg}}),this.index_=i,this.transformer_=t,this.shouldStop_=!1,this.isFlashed_=!1,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in t&&(this.transformerType_=t.getTransformerType()),this.report({variation:"Create"})}setTrackExpectedRate(t){this.trackExpectedRate_=t}async start(t){if(this.controller_=t,this.transformer_&&typeof this.transformer_.start=="function")try{await this.transformer_.start(t)}catch(i){this.report({message:Is.errors.transformer_start,variation:"Error",error:da(i)});const n={eventMetaData:{transformerIndex:this.index_},error:i,function:"start"};this.emit("error",n)}}async transform(t,i){var l,I;var n,o;if(this.mediaTransformerQosReportStartTimestamp_===0&&(this.mediaTransformerQosReportStartTimestamp_=Date.now()),t instanceof VideoFrame&&(this.videoHeight_=(l=t==null?void 0:t.displayHeight)!=null?l:0,this.videoWidth_=(I=t==null?void 0:t.displayWidth)!=null?I:0),this.reporterQos_.onFrameFromSource(),this.transformer_)if(this.shouldStop_)console.warn("[Pipeline] flush from transform"),t.close(),this.flush(i),i.terminate();else{try{await((o=(n=this.transformer_).transform)==null?void 0:o.call(n,t,i)),this.reportQos()}catch(m){this.report({message:Is.errors.transformer_transform,variation:"Error",error:da(m)});const y={eventMetaData:{transformerIndex:this.index_},error:m,function:"transform"};this.emit("error",y)}if(this.trackExpectedRate_!=-1&&this.trackExpectedRate_*e3>this.reporterQos_.fps){const m={eventMetaData:{transformerIndex:this.index_},warningType:"fps_drop",dropInfo:{requested:this.trackExpectedRate_,current:this.reporterQos_.fps}};this.emit("warn",m)}}}async flush(t){if(this.transformer_&&typeof this.transformer_.flush=="function"&&!this.isFlashed_){this.isFlashed_=!0;try{await this.transformer_.flush(t)}catch(i){this.report({message:Is.errors.transformer_flush,variation:"Error",error:da(i)});const n={eventMetaData:{transformerIndex:this.index_},error:i,function:"flush"};this.emit("error",n)}}this.reportQos(!0),this.report({variation:"Delete"})}stop(){console.log("[Pipeline] Stop stream."),this.controller_&&(this.flush(this.controller_),this.controller_.terminate()),this.shouldStop_=!0}report(t){this.reporter_.send({version:dg,action:"MediaTransformer",transformerType:this.transformerType_,...t})}reportQos(t=!1){this.reporterQos_.config={...this.reporterQos_.config},this.reporterQos_.onFrameTransformed({version:dg,action:"MediaTransformer",transformerType:this.transformerType_,videoWidth:this.videoWidth_,videoHeight:this.videoHeight_},t)}},n3=class extends cC{constructor(t){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let i=0;i<t.length;i++){let n=new i3(t[i],i);n.on("error",o=>{this.emit("error",o)}),n.on("warn",o=>{this.emit("warn",o)}),this.transformers_.push(n)}}setTrackExpectedRate(t){this.trackExpectedRate_=t;for(let i of this.transformers_)i.setTrackExpectedRate(this.trackExpectedRate_)}async start(t,i){if(!this.transformers_||this.transformers_.length===0){console.log("[Pipeline] No transformers.");return}try{let n=t;for(let o of this.transformers_)t=t.pipeThrough(new TransformStream(o));t.pipeTo(i).then(async()=>{console.log("[Pipeline] Setup."),await i.abort(),await n.cancel(),this.emit("pipelineInfo","pipeline_ended")}).catch(async o=>{t.cancel().then(()=>{console.log("[Pipeline] Shutting down streams after abort.")}).catch(l=>{console.error("[Pipeline] Error from stream transform:",l)}),await i.abort(o),await n.cancel(o),this.emit("pipelineInfo","pipeline_ended_with_error")})}catch{this.emit("pipelineInfo","pipeline_started_with_error"),this.destroy();return}this.emit("pipelineInfo","pipeline_started"),console.log("[Pipeline] Pipeline started.")}async destroy(){console.log("[Pipeline] Destroying Pipeline.");for(let t of this.transformers_)t.stop()}},o3=class extends cC{constructor(){super(),this.reporter_=new dC,this.trackExpectedRate_=-1,this.report({variation:"Create"})}setTrackExpectedRate(t){this.trackExpectedRate_=t,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(t,i){return this.readable_=t,this.writable_=i,this.transformInternal()}transformInternal(){return new Promise(async(t,i)=>{if(!this.transformers_||this.transformers_.length===0){this.report({message:Is.errors.transformer_none,variation:"Error"}),i("[MediaProcessor] Need to set transformers.");return}if(!this.readable_){this.report({variation:"Error",message:Is.errors.readable_null}),i("[MediaProcessor] Readable is null.");return}if(!this.writable_){this.report({variation:"Error",message:Is.errors.writable_null}),i("[MediaProcessor] Writable is null.");return}let n=!1;this.pipeline_&&(n=!0,this.pipeline_.clearListeners(),this.pipeline_.destroy()),this.pipeline_=new n3(this.transformers_),this.pipeline_.on("warn",o=>{this.emit("warn",o)}),this.pipeline_.on("error",o=>{this.emit("error",o)}),this.pipeline_.on("pipelineInfo",o=>{n&&(o==="pipeline_started"?o=oI.pipeline_restarted:o==="pipeline_started_with_error"&&(o=oI.pipeline_restarted_with_error)),this.emit("pipelineInfo",o)}),this.trackExpectedRate_!=-1&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then(()=>{t()}).catch(o=>{i(o)})})}setTransformers(t){return this.report({variation:"Update",message:Is.updates.transformer_new}),this.transformers_=t,this.readable_&&this.writable_?this.transformInternal():Promise.resolve()}destroy(){return new Promise(async t=>{this.pipeline_&&this.pipeline_.destroy(),this.report({variation:"Delete"}),t()})}report(t){this.reporter_.send({version:dg,action:"MediaProcessor",...t})}},s3=class{constructor(){this.processor_=null,this.generator_=null}init(t){return new Promise((i,n)=>{try{this.processor_=new MediaStreamTrackProcessor(t)}catch(o){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${o}`),n(o)}try{t.kind==="audio"?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):t.kind==="video"?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):n("kind not supported")}catch(o){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${o}`),n(o)}i()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}},r3=class{constructor(t){this.insertableStreamHelper_=new s3,this.mediaProcessor_=t}setTrack(t){return new Promise((i,n)=>{this.insertableStreamHelper_.init(t).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{i(this.insertableStreamHelper_.getProccesorTrack())}).catch(o=>{n(o)})}).catch(o=>{n(o)})})}destroy(){return new Promise((t,i)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{t()}).catch(n=>{i(n)}):i("no processor")})}};var Fs=(e=>(e.Low="Low",e.High="High",e))(Fs||{}),nr=(e=>(e.BackgroundBlur="BackgroundBlur",e.VirtualBackground="VirtualBackground",e.VideoBackground="VideoBackground",e.SilhouetteBlur="SilhouetteBlur",e))(nr||{}),oc=(e=>(e.FAST="FAST",e.PRECISE="PRECISE",e))(oc||{}),Ys=(e=>(e.CANVAS="CANVAS",e.WEBGL="WEBGL",e))(Ys||{});const l3=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));async function c3(e,t){const{wasm:i,insertableStreams:n,simd:o,webgl:l}=await g3();if(!i.supported)throw i.message;if(!n.supported)throw n.message;if(!o.supported)throw o.message;if(!l.supported)throw l.message}async function g3(e,t){const i={wasm:{supported:typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function",message:"Your browser does not support WebAssembly features."},simd:{supported:await l3(),message:"Your browser does not support simd features."},insertableStreams:{supported:!0},gpu:{message:"Your browser does not support gpu features.",supported:!0},webgl:d3(),performance:lb()};try{await fy()}catch(n){i.insertableStreams.supported=!1,i.insertableStreams.message=n}return i}function d3(){return OffscreenCanvas?new OffscreenCanvas(0,0).getContext("webgl2")?{supported:!0}:{supported:!1,message:"Your browser does not support webgl 2"}:{supported:!1,message:"Your browser does not support offscreen canvas"}}function lb(){return new OffscreenCanvas(0,0).getContext("webgl2",{failIfMajorPerformanceCaveat:!0})?{supported:!0}:{supported:!1,message:"Your hardware does not perform good enough to run the library efficiently"}}const sI={};(function(){var e;function t(A){var X=0;return function(){return X<A.length?{done:!1,value:A[X++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,X,R){return A==Array.prototype||A==Object.prototype||(A[X]=R.value),A};function n(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var X=0;X<A.length;++X){var R=A[X];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var o=n(this);function l(A,X){if(X)t:{var R=o;A=A.split(".");for(var k=0;k<A.length-1;k++){var $=A[k];if(!($ in R))break t;R=R[$]}A=A[A.length-1],k=R[A],X=X(k),X!=k&&X!=null&&i(R,A,{configurable:!0,writable:!0,value:X})}}l("Symbol",function(A){function X(Ct){if(this instanceof X)throw new TypeError("Symbol is not a constructor");return new R(k+(Ct||"")+"_"+$++,Ct)}function R(Ct,q){this.g=Ct,i(this,"description",{configurable:!0,writable:!0,value:q})}if(A)return A;R.prototype.toString=function(){return this.g};var k="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",$=0;return X}),l("Symbol.iterator",function(A){if(A)return A;A=Symbol("Symbol.iterator");for(var X="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),R=0;R<X.length;R++){var k=o[X[R]];typeof k=="function"&&typeof k.prototype[A]!="function"&&i(k.prototype,A,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return A});function I(A){return A={next:A},A[Symbol.iterator]=function(){return this},A}function m(A){var X=typeof Symbol!="undefined"&&Symbol.iterator&&A[Symbol.iterator];return X?X.call(A):{next:t(A)}}function y(A){if(!(A instanceof Array)){A=m(A);for(var X,R=[];!(X=A.next()).done;)R.push(X.value);A=R}return A}var H=typeof Object.create=="function"?Object.create:function(A){function X(){}return X.prototype=A,new X},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var nt={a:!0},dt={};try{dt.__proto__=nt,K=dt.a;break t}catch{}K=!1}L=K?function(A,X){if(A.__proto__=X,A.__proto__!==X)throw new TypeError(A+" is not extensible");return A}:null}var P=L;function rt(A,X){if(A.prototype=H(X.prototype),A.prototype.constructor=A,P)P(A,X);else for(var R in X)if(R!="prototype")if(Object.defineProperties){var k=Object.getOwnPropertyDescriptor(X,R);k&&Object.defineProperty(A,R,k)}else A[R]=X[R];A.ea=X.prototype}function Xt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Wt(A){if(A.l)throw new TypeError("Generator is already running");A.l=!0}Xt.prototype.o=function(A){this.h=A};function xt(A,X){A.j={U:X,V:!0},A.g=A.m||A.s}Xt.prototype.return=function(A){this.j={return:A},this.g=this.s};function _(A,X,R){return A.g=R,{value:X}}function qe(A){this.g=new Xt,this.h=A}function ni(A,X){Wt(A.g);var R=A.g.i;return R?we(A,"return"in R?R.return:function(k){return{value:k,done:!0}},X,A.g.return):(A.g.return(X),qt(A))}function we(A,X,R,k){try{var $=X.call(A.g.i,R);if(!($ instanceof Object))throw new TypeError("Iterator result "+$+" is not an object");if(!$.done)return A.g.l=!1,$;var Ct=$.value}catch(q){return A.g.i=null,xt(A.g,q),qt(A)}return A.g.i=null,k.call(A.g,Ct),qt(A)}function qt(A){for(;A.g.g;)try{var X=A.h(A.g);if(X)return A.g.l=!1,{value:X.value,done:!1}}catch(R){A.g.h=void 0,xt(A.g,R)}if(A.g.l=!1,A.g.j){if(X=A.g.j,A.g.j=null,X.V)throw X.U;return{value:X.return,done:!0}}return{value:void 0,done:!0}}function Bn(A){this.next=function(X){return Wt(A.g),A.g.i?X=we(A,A.g.i.next,X,A.g.o):(A.g.o(X),X=qt(A)),X},this.throw=function(X){return Wt(A.g),A.g.i?X=we(A,A.g.i.throw,X,A.g.o):(xt(A.g,X),X=qt(A)),X},this.return=function(X){return ni(A,X)},this[Symbol.iterator]=function(){return this}}function ge(A,X){return X=new Bn(new qe(X)),P&&A.prototype&&P(X,A.prototype),X}function ft(A,X){A instanceof String&&(A+="");var R=0,k=!1,$={next:function(){if(!k&&R<A.length){var Ct=R++;return{value:X(Ct,A[Ct]),done:!1}}return k=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}var Ni=typeof Object.assign=="function"?Object.assign:function(A,X){for(var R=1;R<arguments.length;R++){var k=arguments[R];if(k)for(var $ in k)Object.prototype.hasOwnProperty.call(k,$)&&(A[$]=k[$])}return A};l("Object.assign",function(A){return A||Ni}),l("Promise",function(A){function X(q){this.h=0,this.i=void 0,this.g=[],this.o=!1;var at=this.j();try{q(at.resolve,at.reject)}catch(Zt){at.reject(Zt)}}function R(){this.g=null}function k(q){return q instanceof X?q:new X(function(at){at(q)})}if(A)return A;R.prototype.h=function(q){if(this.g==null){this.g=[];var at=this;this.i(function(){at.l()})}this.g.push(q)};var $=o.setTimeout;R.prototype.i=function(q){$(q,0)},R.prototype.l=function(){for(;this.g&&this.g.length;){var q=this.g;this.g=[];for(var at=0;at<q.length;++at){var Zt=q[at];q[at]=null;try{Zt()}catch(St){this.j(St)}}}this.g=null},R.prototype.j=function(q){this.i(function(){throw q})},X.prototype.j=function(){function q(St){return function(Et){Zt||(Zt=!0,St.call(at,Et))}}var at=this,Zt=!1;return{resolve:q(this.C),reject:q(this.l)}},X.prototype.C=function(q){if(q===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(q instanceof X)this.F(q);else{t:switch(typeof q){case"object":var at=q!=null;break t;case"function":at=!0;break t;default:at=!1}at?this.u(q):this.m(q)}},X.prototype.u=function(q){var at=void 0;try{at=q.then}catch(Zt){this.l(Zt);return}typeof at=="function"?this.G(at,q):this.m(q)},X.prototype.l=function(q){this.s(2,q)},X.prototype.m=function(q){this.s(1,q)},X.prototype.s=function(q,at){if(this.h!=0)throw Error("Cannot settle("+q+", "+at+"): Promise already settled in state"+this.h);this.h=q,this.i=at,this.h===2&&this.D(),this.A()},X.prototype.D=function(){var q=this;$(function(){if(q.B()){var at=o.console;typeof at!="undefined"&&at.error(q.i)}},1)},X.prototype.B=function(){if(this.o)return!1;var q=o.CustomEvent,at=o.Event,Zt=o.dispatchEvent;return typeof Zt=="undefined"?!0:(typeof q=="function"?q=new q("unhandledrejection",{cancelable:!0}):typeof at=="function"?q=new at("unhandledrejection",{cancelable:!0}):(q=o.document.createEvent("CustomEvent"),q.initCustomEvent("unhandledrejection",!1,!0,q)),q.promise=this,q.reason=this.i,Zt(q))},X.prototype.A=function(){if(this.g!=null){for(var q=0;q<this.g.length;++q)Ct.h(this.g[q]);this.g=null}};var Ct=new R;return X.prototype.F=function(q){var at=this.j();q.J(at.resolve,at.reject)},X.prototype.G=function(q,at){var Zt=this.j();try{q.call(at,Zt.resolve,Zt.reject)}catch(St){Zt.reject(St)}},X.prototype.then=function(q,at){function Zt(re,zt){return typeof re=="function"?function(Yt){try{St(re(Yt))}catch(Ut){Et(Ut)}}:zt}var St,Et,kt=new X(function(re,zt){St=re,Et=zt});return this.J(Zt(q,St),Zt(at,Et)),kt},X.prototype.catch=function(q){return this.then(void 0,q)},X.prototype.J=function(q,at){function Zt(){switch(St.h){case 1:q(St.i);break;case 2:at(St.i);break;default:throw Error("Unexpected state: "+St.h)}}var St=this;this.g==null?Ct.h(Zt):this.g.push(Zt),this.o=!0},X.resolve=k,X.reject=function(q){return new X(function(at,Zt){Zt(q)})},X.race=function(q){return new X(function(at,Zt){for(var St=m(q),Et=St.next();!Et.done;Et=St.next())k(Et.value).J(at,Zt)})},X.all=function(q){var at=m(q),Zt=at.next();return Zt.done?k([]):new X(function(St,Et){function kt(Yt){return function(Ut){re[Yt]=Ut,zt--,zt==0&&St(re)}}var re=[],zt=0;do re.push(void 0),zt++,k(Zt.value).J(kt(re.length-1),Et),Zt=at.next();while(!Zt.done)})},X}),l("Object.is",function(A){return A||function(X,R){return X===R?X!==0||1/X===1/R:X!==X&&R!==R}}),l("Array.prototype.includes",function(A){return A||function(X,R){var k=this;k instanceof String&&(k=String(k));var $=k.length;for(R=R||0,0>R&&(R=Math.max(R+$,0));R<$;R++){var Ct=k[R];if(Ct===X||Object.is(Ct,X))return!0}return!1}}),l("String.prototype.includes",function(A){return A||function(X,R){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(X instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(X,R||0)!==-1}}),l("Array.prototype.keys",function(A){return A||function(){return ft(this,function(X){return X})}});var Jn=this||self;function He(A,X){A=A.split(".");var R=Jn;A[0]in R||typeof R.execScript=="undefined"||R.execScript("var "+A[0]);for(var k;A.length&&(k=A.shift());)A.length||X===void 0?R[k]&&R[k]!==Object.prototype[k]?R=R[k]:R=R[k]={}:R[k]=X}function Tt(A,X){return X=String.fromCharCode.apply(null,X),A==null?X:A+X}var Je,Zi=typeof TextDecoder!="undefined",Oi,An=typeof TextEncoder!="undefined";function sn(A){if(An)A=(Oi||(Oi=new TextEncoder)).encode(A);else{var X=void 0;X=X===void 0?!1:X;for(var R=0,k=new Uint8Array(3*A.length),$=0;$<A.length;$++){var Ct=A.charCodeAt($);if(128>Ct)k[R++]=Ct;else{if(2048>Ct)k[R++]=Ct>>6|192;else{if(55296<=Ct&&57343>=Ct){if(56319>=Ct&&$<A.length){var q=A.charCodeAt(++$);if(56320<=q&&57343>=q){Ct=1024*(Ct-55296)+q-56320+65536,k[R++]=Ct>>18|240,k[R++]=Ct>>12&63|128,k[R++]=Ct>>6&63|128,k[R++]=Ct&63|128;continue}else $--}if(X)throw Error("Found an unpaired surrogate");Ct=65533}k[R++]=Ct>>12|224,k[R++]=Ct>>6&63|128}k[R++]=Ct&63|128}}A=k.subarray(0,R)}return A}var Xn={},Si=null;function Mi(A,X){X===void 0&&(X=0),oi(),X=Xn[X];for(var R=Array(Math.floor(A.length/3)),k=X[64]||"",$=0,Ct=0;$<A.length-2;$+=3){var q=A[$],at=A[$+1],Zt=A[$+2],St=X[q>>2];q=X[(q&3)<<4|at>>4],at=X[(at&15)<<2|Zt>>6],Zt=X[Zt&63],R[Ct++]=St+q+at+Zt}switch(St=0,Zt=k,A.length-$){case 2:St=A[$+1],Zt=X[(St&15)<<2]||k;case 1:A=A[$],R[Ct]=X[A>>2]+X[(A&3)<<4|St>>4]+Zt+k}return R.join("")}function Fn(A){var X=A.length,R=3*X/4;R%3?R=Math.floor(R):"=.".indexOf(A[X-1])!=-1&&(R="=.".indexOf(A[X-2])!=-1?R-2:R-1);var k=new Uint8Array(R),$=0;return Zn(A,function(Ct){k[$++]=Ct}),k.subarray(0,$)}function Zn(A,X){function R(Zt){for(;k<A.length;){var St=A.charAt(k++),Et=Si[St];if(Et!=null)return Et;if(!/^[\s\xa0]*$/.test(St))throw Error("Unknown base64 encoding at char: "+St)}return Zt}oi();for(var k=0;;){var $=R(-1),Ct=R(0),q=R(64),at=R(64);if(at===64&&$===-1)break;X($<<2|Ct>>4),q!=64&&(X(Ct<<4&240|q>>2),at!=64&&X(q<<6&192|at))}}function oi(){if(!Si){Si={};for(var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),X=["+/=","+/","-_=","-_.","-_"],R=0;5>R;R++){var k=A.concat(X[R].split(""));Xn[R]=k;for(var $=0;$<k.length;$++){var Ct=k[$];Si[Ct]===void 0&&(Si[Ct]=$)}}}}var ei=typeof Uint8Array.prototype.slice=="function",rn;function ji(A,X,R){return X===R?rn||(rn=new Uint8Array(0)):ei?A.slice(X,R):new Uint8Array(A.subarray(X,R))}var Ae=0,Me=0;function si(A,X){X=X===void 0?{}:X,X=X.v===void 0?!1:X.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=X,A&&de(this,A)}function de(A,X){X=X.constructor===Uint8Array?X:X.constructor===ArrayBuffer?new Uint8Array(X):X.constructor===Array?new Uint8Array(X):X.constructor===String?Fn(X):X instanceof Uint8Array?new Uint8Array(X.buffer,X.byteOffset,X.byteLength):new Uint8Array(0),A.h=X,A.j=0,A.i=A.h.length,A.g=A.j}si.prototype.reset=function(){this.g=this.j};function Fe(A){var X=A.h,R=X[A.g],k=R&127;return 128>R?(A.g+=1,k):(R=X[A.g+1],k|=(R&127)<<7,128>R?(A.g+=2,k):(R=X[A.g+2],k|=(R&127)<<14,128>R?(A.g+=3,k):(R=X[A.g+3],k|=(R&127)<<21,128>R?(A.g+=4,k):(R=X[A.g+4],k|=(R&15)<<28,128>R?(A.g+=5,k>>>0):(A.g+=5,128<=X[A.g++]&&128<=X[A.g++]&&128<=X[A.g++]&&128<=X[A.g++]&&A.g++,k)))))}function yi(A){var X=A.h[A.g],R=A.h[A.g+1],k=A.h[A.g+2],$=A.h[A.g+3];return A.g+=4,R=(X<<0|R<<8|k<<16|$<<24)>>>0,A=2*(R>>31)+1,X=R>>>23&255,R&=8388607,X==255?R?NaN:1/0*A:X==0?A*Math.pow(2,-149)*R:A*Math.pow(2,X-150)*(R+Math.pow(2,23))}var $e=[];function ne(){this.g=new Uint8Array(64),this.h=0}ne.prototype.push=function(A){if(!(this.h+1<this.g.length)){var X=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(X)}this.g[this.h++]=A},ne.prototype.length=function(){return this.h},ne.prototype.end=function(){var A=this.g,X=this.h;return this.h=0,ji(A,0,X)};function Xe(A,X){for(;127<X;)A.push(X&127|128),X>>>=7;A.push(X)}function Ue(A){var X={},R=X.N===void 0?!1:X.N;this.o={v:X.v===void 0?!1:X.v},this.N=R,X=this.o,$e.length?(R=$e.pop(),X&&(R.v=X.v),A&&de(R,A),A=R):A=new si(A,X),this.g=A,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Ue.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function Dt(A){var X=A.g;if((X=X.g==X.i)||(X=A.j)||(X=A.g,X=X.l||0>X.g||X.g>X.i),X)return!1;A.m=A.g.g,X=Fe(A.g);var R=X&7;return R!=0&&R!=5&&R!=1&&R!=2&&R!=3&&R!=4?(A.j=!0,!1):(A.i=X,A.l=X>>>3,A.h=R,!0)}function xe(A){switch(A.h){case 0:if(A.h!=0)xe(A);else{for(A=A.g;A.h[A.g]&128;)A.g++;A.g++}break;case 1:A.h!=1?xe(A):(A=A.g,A.g+=8);break;case 2:if(A.h!=2)xe(A);else{var X=Fe(A.g);A=A.g,A.g+=X}break;case 5:A.h!=5?xe(A):(A=A.g,A.g+=4);break;case 3:X=A.l;do{if(!Dt(A)){A.j=!0;break}if(A.h==4){A.l!=X&&(A.j=!0);break}xe(A)}while(1);break;default:A.j=!0}}function $t(A,X,R){var k=A.g.i,$=Fe(A.g);return $=A.g.g+$,A.g.i=$,R(X,A),A.g.g=$,A.g.i=k,X}function Ge(A){var X=Fe(A.g);A=A.g;var R=A.g;A.g+=X,A=A.h;var k;if(Zi)(k=Je)||(k=Je=new TextDecoder("utf-8",{fatal:!1})),k=k.decode(A.subarray(R,R+X));else{X=R+X;for(var $=[],Ct=null,q,at,Zt;R<X;)q=A[R++],128>q?$.push(q):224>q?R>=X?$.push(65533):(at=A[R++],194>q||(at&192)!==128?(R--,$.push(65533)):$.push((q&31)<<6|at&63)):240>q?R>=X-1?$.push(65533):(at=A[R++],(at&192)!==128||q===224&&160>at||q===237&&160<=at||((k=A[R++])&192)!==128?(R--,$.push(65533)):$.push((q&15)<<12|(at&63)<<6|k&63)):244>=q?R>=X-2?$.push(65533):(at=A[R++],(at&192)!==128||(q<<28)+(at-144)>>30!==0||((k=A[R++])&192)!==128||((Zt=A[R++])&192)!==128?(R--,$.push(65533)):(q=(q&7)<<18|(at&63)<<12|(k&63)<<6|Zt&63,q-=65536,$.push((q>>10&1023)+55296,(q&1023)+56320))):$.push(65533),8192<=$.length&&(Ct=Tt(Ct,$),$.length=0);k=Tt(Ct,$)}return k}function Te(){this.h=[],this.i=0,this.g=new ne}function di(A,X){X.length!==0&&(A.h.push(X),A.i+=X.length)}function Se(A){var X=A.i+A.g.length();if(X===0)return new Uint8Array(0);X=new Uint8Array(X);for(var R=A.h,k=R.length,$=0,Ct=0;Ct<k;Ct++){var q=R[Ct];q.length!==0&&(X.set(q,$),$+=q.length)}return R=A.g,k=R.h,k!==0&&(X.set(R.g.subarray(0,k),$),R.h=0),A.h=[X],X}function te(A,X,R){if(R!=null){Xe(A.g,8*X+5),A=A.g;var k=R;k=(R=0>k?1:0)?-k:k,k===0?0<1/k?Ae=Me=0:(Me=0,Ae=2147483648):isNaN(k)?(Me=0,Ae=2147483647):34028234663852886e22<k?(Me=0,Ae=(R<<31|2139095040)>>>0):11754943508222875e-54>k?(k=Math.round(k/Math.pow(2,-149)),Me=0,Ae=(R<<31|k)>>>0):(X=Math.floor(Math.log(k)/Math.LN2),k*=Math.pow(2,-X),k=Math.round(8388608*k)&8388607,Me=0,Ae=(R<<31|X+127<<23|k)>>>0),R=Ae,A.push(R>>>0&255),A.push(R>>>8&255),A.push(R>>>16&255),A.push(R>>>24&255)}}var ii=typeof Uint8Array=="function";function ri(A,X,R){if(A!=null)return typeof A=="object"?ii&&A instanceof Uint8Array?R(A):Ye(A,X,R):X(A)}function Ye(A,X,R){if(Array.isArray(A)){for(var k=Array(A.length),$=0;$<A.length;$++)k[$]=ri(A[$],X,R);return Array.isArray(A)&&A.W&&li(k),k}k={};for($ in A)k[$]=ri(A[$],X,R);return k}function _i(A){return typeof A=="number"?isFinite(A)?A:String(A):A}var fi={W:{value:!0,configurable:!0}};function li(A){return Array.isArray(A)&&!Object.isFrozen(A)&&Object.defineProperties(A,fi),A}var Gi;function Re(A,X,R){var k=Gi;Gi=null,A||(A=k),k=this.constructor.ca,A||(A=k?[k]:[]),this.j=k?0:-1,this.i=null,this.g=A;t:{if(k=this.g.length,A=k-1,k&&(k=this.g[A],k!==null&&typeof k=="object"&&k.constructor===Object)){this.l=A-this.j,this.h=k;break t}X!==void 0&&-1<X?(this.l=Math.max(X,A+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(R)for(X=0;X<R.length;X++)A=R[X],A<this.l?(A+=this.j,(k=this.g[A])?li(k):this.g[A]=ke):(ve(this),(k=this.h[A])?li(k):this.h[A]=ke)}var ke=Object.freeze(li([]));function ve(A){var X=A.l+A.j;A.g[X]||(A.h=A.g[X]={})}function ae(A,X,R){return X===-1?null:(R===void 0?0:R)||X>=A.l?A.h?A.h[X]:void 0:A.g[X+A.j]}function ci(A){var X=X===void 0?!1:X,R=ae(A,1,X);return R==null&&(R=ke),R===ke&&(R=li([]),ee(A,1,R,X)),R}function le(A,X,R){return A=ae(A,X),A=A==null?A:+A,A==null?R===void 0?0:R:A}function ee(A,X,R,k){(k===void 0?0:k)||X>=A.l?(ve(A),A.h[X]=R):A.g[X+A.j]=R}function wi(A,X){A.i||(A.i={});var R=A.i[1];if(!R){var k=ci(A);R=[];for(var $=0;$<k.length;$++)R[$]=new X(k[$]);A.i[1]=R}return R}function Ze(A,X,R,k){var $=wi(A,R);X=X||new R,A=ci(A),k!=null?($.splice(k,0,X),A.splice(k,0,Jt(X))):($.push(X),A.push(Jt(X)))}Re.prototype.toJSON=function(){var A=Jt(this);return Ye(A,_i,Mi)};function Jt(A,X){if(A.i)for(var R in A.i){var k=A.i[R];if(Array.isArray(k))for(var $=0;$<k.length;$++)k[$]&&Jt(k[$]);else k&&Jt(k)}return A.g}Re.prototype.toString=function(){return Jt(this).toString()};function vt(A,X){return A=ae(A,X),A==null?0:A}function Ie(A,X){return A=ae(A,X),A==null?"":A}function ze(A,X){if(A=A.m){di(X,X.g.end());for(var R=0;R<A.length;R++)di(X,A[R])}}function ce(A,X){if(X.h==4)return!1;var R=X.m;return xe(X),X.N||(X=ji(X.g.h,R,X.g.g),(R=A.m)?R.push(X):A.m=[X]),!0}function Ce(A,X){var R=void 0;return new(R||(R=Promise))(function(k,$){function Ct(Zt){try{at(X.next(Zt))}catch(St){$(St)}}function q(Zt){try{at(X.throw(Zt))}catch(St){$(St)}}function at(Zt){Zt.done?k(Zt.value):new R(function(St){St(Zt.value)}).then(Ct,q)}at((X=X.apply(A,void 0)).next())})}function lt(A){Re.call(this,A)}rt(lt,Re);function It(A,X){for(;Dt(X);)switch(X.i){case 8:var R=Fe(X.g);ee(A,1,R);break;case 21:R=yi(X.g),ee(A,2,R);break;case 26:R=Ge(X),ee(A,3,R);break;case 34:R=Ge(X),ee(A,4,R);break;default:if(!ce(A,X))return A}return A}function ht(A){Re.call(this,A,-1,ie)}rt(ht,Re),ht.prototype.addClassification=function(A,X){Ze(this,A,lt,X)};var ie=[1];function pe(A){Re.call(this,A)}rt(pe,Re);function he(A,X){for(;Dt(X);)switch(X.i){case 13:var R=yi(X.g);ee(A,1,R);break;case 21:R=yi(X.g),ee(A,2,R);break;case 29:R=yi(X.g),ee(A,3,R);break;case 37:R=yi(X.g),ee(A,4,R);break;case 45:R=yi(X.g),ee(A,5,R);break;default:if(!ce(A,X))return A}return A}function Ht(A){Re.call(this,A,-1,ye)}rt(Ht,Re);var ye=[1];function Ee(A){Re.call(this,A)}rt(Ee,Re);function ai(A,X,R){if(R=A.createShader(R===0?A.VERTEX_SHADER:A.FRAGMENT_SHADER),A.shaderSource(R,X),A.compileShader(R),!A.getShaderParameter(R,A.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+A.getShaderInfoLog(R));return R}function Ii(A){return wi(A,lt).map(function(X){return{index:vt(X,1),Y:le(X,2),label:ae(X,3)!=null?Ie(X,3):void 0,displayName:ae(X,4)!=null?Ie(X,4):void 0}})}function Fi(A){return{x:le(A,1),y:le(A,2),z:le(A,3),visibility:ae(A,4)!=null?le(A,4):void 0}}function Li(A,X){this.h=A,this.g=X,this.l=0}function Ke(A,X,R){return Ci(A,X),typeof A.g.canvas.transferToImageBitmap=="function"?Promise.resolve(A.g.canvas.transferToImageBitmap()):R?Promise.resolve(A.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(A.g.canvas):(A.i===void 0&&(A.i=document.createElement("canvas")),new Promise(function(k){A.i.height=A.g.canvas.height,A.i.width=A.g.canvas.width,A.i.getContext("2d",{}).drawImage(A.g.canvas,0,0,A.g.canvas.width,A.g.canvas.height),k(A.i)}))}function Ci(A,X){var R=A.g;if(A.m===void 0){var k=ai(R,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),$=ai(R,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Ct=R.createProgram();if(R.attachShader(Ct,k),R.attachShader(Ct,$),R.linkProgram(Ct),!R.getProgramParameter(Ct,R.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+R.getProgramInfoLog(Ct));k=A.m=Ct,R.useProgram(k),$=R.getUniformLocation(k,"sampler0"),A.j={I:R.getAttribLocation(k,"aVertex"),H:R.getAttribLocation(k,"aTex"),da:$},A.s=R.createBuffer(),R.bindBuffer(R.ARRAY_BUFFER,A.s),R.enableVertexAttribArray(A.j.I),R.vertexAttribPointer(A.j.I,2,R.FLOAT,!1,0,0),R.bufferData(R.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),R.STATIC_DRAW),R.bindBuffer(R.ARRAY_BUFFER,null),A.o=R.createBuffer(),R.bindBuffer(R.ARRAY_BUFFER,A.o),R.enableVertexAttribArray(A.j.H),R.vertexAttribPointer(A.j.H,2,R.FLOAT,!1,0,0),R.bufferData(R.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),R.STATIC_DRAW),R.bindBuffer(R.ARRAY_BUFFER,null),R.uniform1i($,0)}k=A.j,R.useProgram(A.m),R.canvas.width=X.width,R.canvas.height=X.height,R.viewport(0,0,X.width,X.height),R.activeTexture(R.TEXTURE0),A.h.bindTexture2d(X.glName),R.enableVertexAttribArray(k.I),R.bindBuffer(R.ARRAY_BUFFER,A.s),R.vertexAttribPointer(k.I,2,R.FLOAT,!1,0,0),R.enableVertexAttribArray(k.H),R.bindBuffer(R.ARRAY_BUFFER,A.o),R.vertexAttribPointer(k.H,2,R.FLOAT,!1,0,0),R.bindFramebuffer(R.DRAW_FRAMEBUFFER?R.DRAW_FRAMEBUFFER:R.FRAMEBUFFER,null),R.clearColor(0,0,0,0),R.clear(R.COLOR_BUFFER_BIT),R.colorMask(!0,!0,!0,!0),R.drawArrays(R.TRIANGLE_FAN,0,4),R.disableVertexAttribArray(k.I),R.disableVertexAttribArray(k.H),R.bindBuffer(R.ARRAY_BUFFER,null),A.h.bindTexture2d(0)}function Tn(A){this.g=A}var ui=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Qe(A,X){return X+A}function zi(A,X){window[A]=X}function ln(A){var X=document.createElement("script");return X.setAttribute("src",A),X.setAttribute("crossorigin","anonymous"),new Promise(function(R){X.addEventListener("load",function(){R()},!1),X.addEventListener("error",function(){R()},!1),document.body.appendChild(X)})}function ti(){return Ce(this,function A(){return ge(A,function(X){switch(X.g){case 1:return X.m=2,_(X,WebAssembly.instantiate(ui),4);case 4:X.g=3,X.m=0;break;case 2:return X.m=0,X.j=null,X.return(!1);case 3:return X.return(!0)}})})}function Hn(A){if(this.g=A,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=A&&A.locateFile||Qe,typeof window=="object")var X=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")X=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=X,A.options){X=m(Object.keys(A.options));for(var R=X.next();!R.done;R=X.next()){R=R.value;var k=A.options[R].default;k!==void 0&&(this.j[R]=typeof k=="function"?k():k)}}}e=Hn.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function mi(A,X){return A.g.files===void 0?[]:typeof A.g.files=="function"?A.g.files(X):A.g.files}function Ki(A){return Ce(A,function X(){var R=this,k,$,Ct,q,at,Zt,St,Et,kt,re,zt;return ge(X,function(Yt){switch(Yt.g){case 1:return k=R,R.R?($=mi(R,R.j),_(Yt,ti(),2)):Yt.return();case 2:if(Ct=Yt.h,typeof window=="object")return zi("createMediapipeSolutionsWasm",{locateFile:R.locateFile}),zi("createMediapipeSolutionsPackedAssets",{locateFile:R.locateFile}),Zt=$.filter(function(Ut){return Ut.data!==void 0}),St=$.filter(function(Ut){return Ut.data===void 0}),Et=Promise.all(Zt.map(function(Ut){var oe=Vi(k,Ut.url);if(Ut.path!==void 0){var be=Ut.path;oe=oe.then(function(fe){return k.overrideFile(be,fe),Promise.resolve(fe)})}return oe})),kt=Promise.all(St.map(function(Ut){return Ut.simd===void 0||Ut.simd&&Ct||!Ut.simd&&!Ct?ln(k.locateFile(Ut.url,k.S)):Promise.resolve()})).then(function(){return Ce(k,function Ut(){var oe,be,fe=this;return ge(Ut,function(Ve){if(Ve.g==1)return oe=window.createMediapipeSolutionsWasm,be=window.createMediapipeSolutionsPackedAssets,_(Ve,oe(be),2);fe.h=Ve.h,Ve.g=0})})}),re=function(){return Ce(k,function Ut(){var oe=this;return ge(Ut,function(be){return oe.g.graph&&oe.g.graph.url?be=_(be,Vi(oe,oe.g.graph.url),0):(be.g=0,be=void 0),be})})}(),_(Yt,Promise.all([kt,Et,re]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return q=$.filter(function(Ut){return Ut.simd===void 0||Ut.simd&&Ct||!Ut.simd&&!Ct}).map(function(Ut){return k.locateFile(Ut.url,k.S)}),importScripts.apply(null,y(q)),_(Yt,createMediapipeSolutionsWasm(Module),6);case 6:R.h=Yt.h,R.l=new OffscreenCanvas(1,1),R.h.canvas=R.l,at=R.h.GL.createContext(R.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext!="undefined"?2:1}),R.h.GL.makeContextCurrent(at),Yt.g=4;break;case 7:if(R.l=document.createElement("canvas"),zt=R.l.getContext("webgl2",{}),!zt&&(zt=R.l.getContext("webgl",{}),!zt))return alert("Failed to create WebGL canvas context when passing video frame."),Yt.return();R.D=zt,R.h.canvas=R.l,R.h.createContext(R.l,!0,!0,{});case 4:R.i=new R.h.SolutionWasm,R.R=!1,Yt.g=0}})})}function un(A){return Ce(A,function X(){var R=this,k,$,Ct,q,at,Zt,St,Et;return ge(X,function(kt){if(kt.g==1){if(R.g.graph&&R.g.graph.url&&R.P===R.g.graph.url)return kt.return();if(R.o=!0,!R.g.graph||!R.g.graph.url){kt.g=2;return}return R.P=R.g.graph.url,_(kt,Vi(R,R.g.graph.url),3)}for(kt.g!=2&&(k=kt.h,R.i.loadGraph(k)),$=m(Object.keys(R.B)),Ct=$.next();!Ct.done;Ct=$.next())q=Ct.value,R.i.overrideFile(q,R.B[q]);if(R.B={},R.g.listeners)for(at=m(R.g.listeners),Zt=at.next();!Zt.done;Zt=at.next())St=Zt.value,eo(R,St);Et=R.j,R.j={},R.setOptions(Et),kt.g=0})})}e.reset=function(){return Ce(this,function A(){var X=this;return ge(A,function(R){X.i&&(X.i.reset(),X.m={},X.s={}),R.g=0})})},e.setOptions=function(A,X){var R=this;if(X=X||this.g.options){for(var k=[],$=[],Ct={},q=m(Object.keys(A)),at=q.next();!at.done;Ct={K:Ct.K,L:Ct.L},at=q.next()){var Zt=at.value;Zt in this.j&&this.j[Zt]===A[Zt]||(this.j[Zt]=A[Zt],at=X[Zt],at!==void 0&&(at.onChange&&(Ct.K=at.onChange,Ct.L=A[Zt],k.push(function(St){return function(){return Ce(R,function Et(){var kt,re=this;return ge(Et,function(zt){if(zt.g==1)return _(zt,St.K(St.L),2);kt=zt.h,kt===!0&&(re.o=!0),zt.g=0})})}}(Ct))),at.graphOptionXref&&(Zt={valueNumber:at.type===1?A[Zt]:0,valueBoolean:at.type===0?A[Zt]:!1,valueString:at.type===2?A[Zt]:""},at=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),at.graphOptionXref),Zt),$.push(at))))}(k.length!==0||$.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat($),this.u=(this.u===void 0?[]:this.u).concat(k))}};function Nn(A){return Ce(A,function X(){var R=this,k,$,Ct,q,at,Zt,St;return ge(X,function(Et){switch(Et.g){case 1:if(!R.o)return Et.return();if(!R.u){Et.g=2;break}k=m(R.u),$=k.next();case 3:if($.done){Et.g=5;break}return Ct=$.value,_(Et,Ct(),4);case 4:$=k.next(),Et.g=3;break;case 5:R.u=void 0;case 2:if(R.A){for(q=new R.h.GraphOptionChangeRequestList,at=m(R.A),Zt=at.next();!Zt.done;Zt=at.next())St=Zt.value,q.push_back(St);R.i.changeOptions(q),q.delete(),R.A=void 0}R.o=!1,Et.g=0}})})}e.initialize=function(){return Ce(this,function A(){var X=this;return ge(A,function(R){return R.g==1?_(R,Ki(X),2):R.g!=3?_(R,un(X),3):_(R,Nn(X),0)})})};function Vi(A,X){return Ce(A,function R(){var k=this,$,Ct;return ge(R,function(q){return X in k.F?q.return(k.F[X]):($=k.locateFile(X,""),Ct=fetch($).then(function(at){return at.arrayBuffer()}),k.F[X]=Ct,q.return(Ct))})})}e.overrideFile=function(A,X){this.i?this.i.overrideFile(A,X):this.B[A]=X},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(A,X){return Ce(this,function R(){var k=this,$,Ct,q,at,Zt,St,Et,kt,re;return ge(R,function(zt){switch(zt.g){case 1:return k.g.inputs?($=1e3*(X==null?performance.now():X),_(zt,k.C,2)):zt.return();case 2:return _(zt,k.initialize(),3);case 3:for(Ct=new k.h.PacketDataList,q=m(Object.keys(A)),at=q.next();!at.done;at=q.next())if(Zt=at.value,St=k.g.inputs[Zt]){t:{var Yt=k,Ut=A[Zt];switch(St.type){case"video":var oe=Yt.m[St.stream];if(oe||(oe=new Li(Yt.h,Yt.D),Yt.m[St.stream]=oe),Yt=oe,Yt.l===0&&(Yt.l=Yt.h.createTexture()),typeof HTMLVideoElement!="undefined"&&Ut instanceof HTMLVideoElement){var be=Ut.videoWidth;oe=Ut.videoHeight}else typeof HTMLImageElement!="undefined"&&Ut instanceof HTMLImageElement?(be=Ut.naturalWidth,oe=Ut.naturalHeight):(be=Ut.width,oe=Ut.height);oe={glName:Yt.l,width:be,height:oe},be=Yt.g,be.canvas.width=oe.width,be.canvas.height=oe.height,be.activeTexture(be.TEXTURE0),Yt.h.bindTexture2d(Yt.l),be.texImage2D(be.TEXTURE_2D,0,be.RGBA,be.RGBA,be.UNSIGNED_BYTE,Ut),Yt.h.bindTexture2d(0),Yt=oe;break t;case"detections":for(oe=Yt.m[St.stream],oe||(oe=new Tn(Yt.h),Yt.m[St.stream]=oe),Yt=oe,Yt.data||(Yt.data=new Yt.g.DetectionListData),Yt.data.reset(Ut.length),oe=0;oe<Ut.length;++oe){be=Ut[oe];var fe=Yt.data,Ve=fe.setBoundingBox,De=oe,b=be.T,f=new Ee;ee(f,1,b.Z),ee(f,2,b.$),ee(f,3,b.height),ee(f,4,b.width),ee(f,5,b.rotation),ee(f,6,b.X);var W=b=new Te;te(W,1,ae(f,1)),te(W,2,ae(f,2)),te(W,3,ae(f,3)),te(W,4,ae(f,4)),te(W,5,ae(f,5));var M=ae(f,6);if(M!=null&&M!=null){Xe(W.g,48);var Q=W.g,tt=M;M=0>tt,tt=Math.abs(tt);var D=tt>>>0;for(tt=Math.floor((tt-D)/4294967296),tt>>>=0,M&&(tt=~tt>>>0,D=(~D>>>0)+1,4294967295<D&&(D=0,tt++,4294967295<tt&&(tt=0))),Ae=D,Me=tt,M=Ae,D=Me;0<D||127<M;)Q.push(M&127|128),M=(M>>>7|D<<25)>>>0,D>>>=7;Q.push(M)}if(ze(f,W),b=Se(b),Ve.call(fe,De,b),be.O)for(fe=0;fe<be.O.length;++fe)f=be.O[fe],W=!!f.visibility,Ve=Yt.data,De=Ve.addNormalizedLandmark,b=oe,f=Object.assign(Object.assign({},f),{visibility:W?f.visibility:0}),W=new pe,ee(W,1,f.x),ee(W,2,f.y),ee(W,3,f.z),f.visibility&&ee(W,4,f.visibility),Q=f=new Te,te(Q,1,ae(W,1)),te(Q,2,ae(W,2)),te(Q,3,ae(W,3)),te(Q,4,ae(W,4)),te(Q,5,ae(W,5)),ze(W,Q),f=Se(f),De.call(Ve,b,f);if(be.M)for(fe=0;fe<be.M.length;++fe){if(Ve=Yt.data,De=Ve.addClassification,b=oe,f=be.M[fe],W=new lt,ee(W,2,f.Y),f.index&&ee(W,1,f.index),f.label&&ee(W,3,f.label),f.displayName&&ee(W,4,f.displayName),Q=f=new Te,D=ae(W,1),D!=null&&D!=null)if(Xe(Q.g,8),M=Q.g,0<=D)Xe(M,D);else{for(tt=0;9>tt;tt++)M.push(D&127|128),D>>=7;M.push(1)}te(Q,2,ae(W,2)),M=ae(W,3),M!=null&&(M=sn(M),Xe(Q.g,26),Xe(Q.g,M.length),di(Q,Q.g.end()),di(Q,M)),M=ae(W,4),M!=null&&(M=sn(M),Xe(Q.g,34),Xe(Q.g,M.length),di(Q,Q.g.end()),di(Q,M)),ze(W,Q),f=Se(f),De.call(Ve,b,f)}}Yt=Yt.data;break t;default:Yt={}}}switch(Et=Yt,kt=St.stream,St.type){case"video":Ct.pushTexture2d(Object.assign(Object.assign({},Et),{stream:kt,timestamp:$}));break;case"detections":re=Et,re.stream=kt,re.timestamp=$,Ct.pushDetectionList(re);break;default:throw Error("Unknown input config type: '"+St.type+"'")}}return k.i.send(Ct),_(zt,k.C,4);case 4:Ct.delete(),zt.g=0}})})};function mn(A,X,R){return Ce(A,function k(){var $,Ct,q,at,Zt,St,Et=this,kt,re,zt,Yt,Ut,oe,be,fe;return ge(k,function(Ve){switch(Ve.g){case 1:if(!R)return Ve.return(X);for($={},Ct=0,q=m(Object.keys(R)),at=q.next();!at.done;at=q.next())Zt=at.value,St=R[Zt],typeof St!="string"&&St.type==="texture"&&X[St.stream]!==void 0&&++Ct;1<Ct&&(Et.G=!1),kt=m(Object.keys(R)),at=kt.next();case 2:if(at.done){Ve.g=4;break}if(re=at.value,zt=R[re],typeof zt=="string")return be=$,fe=re,_(Ve,to(Et,re,X[zt]),14);if(Yt=X[zt.stream],zt.type==="detection_list"){if(Yt){for(var De=Yt.getRectList(),b=Yt.getLandmarksList(),f=Yt.getClassificationsList(),W=[],M=0;M<De.size();++M){var Q=De.get(M);t:{var tt=new Ee;for(Q=new Ue(Q);Dt(Q);)switch(Q.i){case 13:var D=yi(Q.g);ee(tt,1,D);break;case 21:D=yi(Q.g),ee(tt,2,D);break;case 29:D=yi(Q.g),ee(tt,3,D);break;case 37:D=yi(Q.g),ee(tt,4,D);break;case 45:D=yi(Q.g),ee(tt,5,D);break;case 48:for(var st=Q.g,mt=128,g=0,B=D=0;4>B&&128<=mt;B++)mt=st.h[st.g++],g|=(mt&127)<<7*B;if(128<=mt&&(mt=st.h[st.g++],g|=(mt&127)<<28,D|=(mt&127)>>4),128<=mt)for(B=0;5>B&&128<=mt;B++)mt=st.h[st.g++],D|=(mt&127)<<7*B+3;128>mt?(st=g>>>0,mt=D>>>0,(D=mt&2147483648)&&(st=~st+1>>>0,mt=~mt>>>0,st==0&&(mt=mt+1>>>0)),st=4294967296*mt+(st>>>0),D=D?-st:st):(st.l=!0,D=void 0),ee(tt,6,D);break;default:if(!ce(tt,Q))break t}}tt={Z:le(tt,1),$:le(tt,2),height:le(tt,3),width:le(tt,4),rotation:le(tt,5,0),X:vt(tt,6)},D=b.get(M);t:for(Q=new Ht,D=new Ue(D);Dt(D);)switch(D.i){case 10:st=$t(D,new pe,he),Ze(Q,st,pe,void 0);break;default:if(!ce(Q,D))break t}Q=wi(Q,pe).map(Fi),st=f.get(M);t:for(D=new ht,st=new Ue(st);Dt(st);)switch(st.i){case 10:D.addClassification($t(st,new lt,It));break;default:if(!ce(D,st))break t}tt={T:tt,O:Q,M:Ii(D)},W.push(tt)}De=W}else De=[];$[re]=De,Ve.g=7;break}if(zt.type==="proto_list"){if(Yt){for(De=Array(Yt.size()),b=0;b<Yt.size();b++)De[b]=Yt.get(b);Yt.delete()}else De=[];$[re]=De,Ve.g=7;break}if(Yt===void 0){Ve.g=3;break}if(zt.type==="float_list"){$[re]=Yt,Ve.g=7;break}if(zt.type==="proto"){$[re]=Yt,Ve.g=7;break}if(zt.type!=="texture")throw Error("Unknown output config type: '"+zt.type+"'");return Ut=Et.s[re],Ut||(Ut=new Li(Et.h,Et.D),Et.s[re]=Ut),_(Ve,Ke(Ut,Yt,Et.G),13);case 13:oe=Ve.h,$[re]=oe;case 7:zt.transform&&$[re]&&($[re]=zt.transform($[re])),Ve.g=3;break;case 14:be[fe]=Ve.h;case 3:at=kt.next(),Ve.g=2;break;case 4:return Ve.return($)}})})}function to(A,X,R){return Ce(A,function k(){var $=this,Ct;return ge(k,function(q){return typeof R=="number"||R instanceof Uint8Array||R instanceof $.h.Uint8BlobList?q.return(R):R instanceof $.h.Texture2dDataOut?(Ct=$.s[X],Ct||(Ct=new Li($.h,$.D),$.s[X]=Ct),q.return(Ke(Ct,R,$.G))):q.return(void 0)})})}function eo(A,X){for(var R=X.name||"$",k=[].concat(y(X.wants)),$=new A.h.StringList,Ct=m(X.wants),q=Ct.next();!q.done;q=Ct.next())$.push_back(q.value);Ct=A.h.PacketListener.implement({onResults:function(at){for(var Zt={},St=0;St<X.wants.length;++St)Zt[k[St]]=at.get(St);var Et=A.listeners[R];Et&&(A.C=mn(A,Zt,X.outs).then(function(kt){kt=Et(kt);for(var re=0;re<X.wants.length;++re){var zt=Zt[k[re]];typeof zt=="object"&&zt.hasOwnProperty&&zt.hasOwnProperty("delete")&&zt.delete()}kt&&(A.C=kt)}))}}),A.i.attachMultiListener($,Ct),$.delete()}e.onResults=function(A,X){this.listeners[X||"$"]=A},He("Solution",Hn),He("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function hn(A){switch(A===void 0&&(A=0),A){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function yn(A){var X=this;A=A||{},this.g=new Hn({locateFile:A.locateFile,files:function(R){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:hn(R.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(R){return Ce(X,function k(){var $,Ct,q=this,at;return ge(k,function(Zt){return Zt.g==1?($=hn(R),Ct="third_party/mediapipe/modules/selfie_segmentation/"+$,_(Zt,Vi(q.g,$),2)):(at=Zt.h,q.g.overrideFile(Ct,at),Zt.return(!0))})})}}}})}e=yn.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(A){this.g.onResults(A)},e.initialize=function(){return Ce(this,function A(){var X=this;return ge(A,function(R){return _(R,X.g.initialize(),0)})})},e.reset=function(){this.g.reset()},e.send=function(A){return Ce(this,function X(){var R=this;return ge(X,function(k){return _(k,R.g.send(A),0)})})},e.setOptions=function(A){this.g.setOptions(A)},He("SelfieSegmentation",yn),He("VERSION","0.1.1632777926")}).call(sI);const rI={};(function(){var e;function t(d){var V=0;return function(){return V<d.length?{done:!1,value:d[V++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,V,S){return d==Array.prototype||d==Object.prototype||(d[V]=S.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var V=0;V<d.length;++V){var S=d[V];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var o=n(this);function l(d,V){if(V)t:{var S=o;d=d.split(".");for(var F=0;F<d.length-1;F++){var T=d[F];if(!(T in S))break t;S=S[T]}d=d[d.length-1],F=S[d],V=V(F),V!=F&&V!=null&&i(S,d,{configurable:!0,writable:!0,value:V})}}l("Symbol",function(d){function V(c){if(this instanceof V)throw new TypeError("Symbol is not a constructor");return new S(F+(c||"")+"_"+T++,c)}function S(c,h){this.g=c,i(this,"description",{configurable:!0,writable:!0,value:h})}if(d)return d;S.prototype.toString=function(){return this.g};var F="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",T=0;return V}),l("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var V="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),S=0;S<V.length;S++){var F=o[V[S]];typeof F=="function"&&typeof F.prototype[d]!="function"&&i(F.prototype,d,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return d});function I(d){return d={next:d},d[Symbol.iterator]=function(){return this},d}function m(d){var V=typeof Symbol!="undefined"&&Symbol.iterator&&d[Symbol.iterator];return V?V.call(d):{next:t(d)}}function y(d){if(!(d instanceof Array)){d=m(d);for(var V,S=[];!(V=d.next()).done;)S.push(V.value);d=S}return d}var H=typeof Object.create=="function"?Object.create:function(d){function V(){}return V.prototype=d,new V},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var nt={a:!0},dt={};try{dt.__proto__=nt,K=dt.a;break t}catch{}K=!1}L=K?function(d,V){if(d.__proto__=V,d.__proto__!==V)throw new TypeError(d+" is not extensible");return d}:null}var P=L;function rt(d,V){if(d.prototype=H(V.prototype),d.prototype.constructor=d,P)P(d,V);else for(var S in V)if(S!="prototype")if(Object.defineProperties){var F=Object.getOwnPropertyDescriptor(V,S);F&&Object.defineProperty(d,S,F)}else d[S]=V[S];d.ra=V.prototype}function Xt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Wt(d){if(d.l)throw new TypeError("Generator is already running");d.l=!0}Xt.prototype.s=function(d){this.h=d};function xt(d,V){d.j={fa:V,ga:!0},d.g=d.o||d.u}Xt.prototype.return=function(d){this.j={return:d},this.g=this.u};function _(d,V,S){return d.g=S,{value:V}}function qe(d){this.g=new Xt,this.h=d}function ni(d,V){Wt(d.g);var S=d.g.i;return S?we(d,"return"in S?S.return:function(F){return{value:F,done:!0}},V,d.g.return):(d.g.return(V),qt(d))}function we(d,V,S,F){try{var T=V.call(d.g.i,S);if(!(T instanceof Object))throw new TypeError("Iterator result "+T+" is not an object");if(!T.done)return d.g.l=!1,T;var c=T.value}catch(h){return d.g.i=null,xt(d.g,h),qt(d)}return d.g.i=null,F.call(d.g,c),qt(d)}function qt(d){for(;d.g.g;)try{var V=d.h(d.g);if(V)return d.g.l=!1,{value:V.value,done:!1}}catch(S){d.g.h=void 0,xt(d.g,S)}if(d.g.l=!1,d.g.j){if(V=d.g.j,d.g.j=null,V.ga)throw V.fa;return{value:V.return,done:!0}}return{value:void 0,done:!0}}function Bn(d){this.next=function(V){return Wt(d.g),d.g.i?V=we(d,d.g.i.next,V,d.g.s):(d.g.s(V),V=qt(d)),V},this.throw=function(V){return Wt(d.g),d.g.i?V=we(d,d.g.i.throw,V,d.g.s):(xt(d.g,V),V=qt(d)),V},this.return=function(V){return ni(d,V)},this[Symbol.iterator]=function(){return this}}function ge(d){function V(F){return d.next(F)}function S(F){return d.throw(F)}return new Promise(function(F,T){function c(h){h.done?F(h.value):Promise.resolve(h.value).then(V,S).then(c,T)}c(d.next())})}function ft(d){return ge(new Bn(new qe(d)))}l("Promise",function(d){function V(h){this.h=0,this.i=void 0,this.g=[],this.s=!1;var G=this.j();try{h(G.resolve,G.reject)}catch(r){G.reject(r)}}function S(){this.g=null}function F(h){return h instanceof V?h:new V(function(G){G(h)})}if(d)return d;S.prototype.h=function(h){if(this.g==null){this.g=[];var G=this;this.i(function(){G.l()})}this.g.push(h)};var T=o.setTimeout;S.prototype.i=function(h){T(h,0)},S.prototype.l=function(){for(;this.g&&this.g.length;){var h=this.g;this.g=[];for(var G=0;G<h.length;++G){var r=h[G];h[G]=null;try{r()}catch(C){this.j(C)}}}this.g=null},S.prototype.j=function(h){this.i(function(){throw h})},V.prototype.j=function(){function h(C){return function(p){r||(r=!0,C.call(G,p))}}var G=this,r=!1;return{resolve:h(this.D),reject:h(this.l)}},V.prototype.D=function(h){if(h===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(h instanceof V)this.H(h);else{t:switch(typeof h){case"object":var G=h!=null;break t;case"function":G=!0;break t;default:G=!1}G?this.A(h):this.o(h)}},V.prototype.A=function(h){var G=void 0;try{G=h.then}catch(r){this.l(r);return}typeof G=="function"?this.I(G,h):this.o(h)},V.prototype.l=function(h){this.u(2,h)},V.prototype.o=function(h){this.u(1,h)},V.prototype.u=function(h,G){if(this.h!=0)throw Error("Cannot settle("+h+", "+G+"): Promise already settled in state"+this.h);this.h=h,this.i=G,this.h===2&&this.G(),this.B()},V.prototype.G=function(){var h=this;T(function(){if(h.C()){var G=o.console;typeof G!="undefined"&&G.error(h.i)}},1)},V.prototype.C=function(){if(this.s)return!1;var h=o.CustomEvent,G=o.Event,r=o.dispatchEvent;return typeof r=="undefined"?!0:(typeof h=="function"?h=new h("unhandledrejection",{cancelable:!0}):typeof G=="function"?h=new G("unhandledrejection",{cancelable:!0}):(h=o.document.createEvent("CustomEvent"),h.initCustomEvent("unhandledrejection",!1,!0,h)),h.promise=this,h.reason=this.i,r(h))},V.prototype.B=function(){if(this.g!=null){for(var h=0;h<this.g.length;++h)c.h(this.g[h]);this.g=null}};var c=new S;return V.prototype.H=function(h){var G=this.j();h.M(G.resolve,G.reject)},V.prototype.I=function(h,G){var r=this.j();try{h.call(G,r.resolve,r.reject)}catch(C){r.reject(C)}},V.prototype.then=function(h,G){function r(a,u){return typeof a=="function"?function(Z){try{C(a(Z))}catch(w){p(w)}}:u}var C,p,s=new V(function(a,u){C=a,p=u});return this.M(r(h,C),r(G,p)),s},V.prototype.catch=function(h){return this.then(void 0,h)},V.prototype.M=function(h,G){function r(){switch(C.h){case 1:h(C.i);break;case 2:G(C.i);break;default:throw Error("Unexpected state: "+C.h)}}var C=this;this.g==null?c.h(r):this.g.push(r),this.s=!0},V.resolve=F,V.reject=function(h){return new V(function(G,r){r(h)})},V.race=function(h){return new V(function(G,r){for(var C=m(h),p=C.next();!p.done;p=C.next())F(p.value).M(G,r)})},V.all=function(h){var G=m(h),r=G.next();return r.done?F([]):new V(function(C,p){function s(Z){return function(w){a[Z]=w,u--,u==0&&C(a)}}var a=[],u=0;do a.push(void 0),u++,F(r.value).M(s(a.length-1),p),r=G.next();while(!r.done)})},V});function Ni(d,V){d instanceof String&&(d+="");var S=0,F=!1,T={next:function(){if(!F&&S<d.length){var c=S++;return{value:V(c,d[c]),done:!1}}return F=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}var Jn=typeof Object.assign=="function"?Object.assign:function(d,V){for(var S=1;S<arguments.length;S++){var F=arguments[S];if(F)for(var T in F)Object.prototype.hasOwnProperty.call(F,T)&&(d[T]=F[T])}return d};l("Object.assign",function(d){return d||Jn}),l("Object.is",function(d){return d||function(V,S){return V===S?V!==0||1/V===1/S:V!==V&&S!==S}}),l("Array.prototype.includes",function(d){return d||function(V,S){var F=this;F instanceof String&&(F=String(F));var T=F.length;for(S=S||0,0>S&&(S=Math.max(S+T,0));S<T;S++){var c=F[S];if(c===V||Object.is(c,V))return!0}return!1}}),l("String.prototype.includes",function(d){return d||function(V,S){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(V instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(V,S||0)!==-1}}),l("Array.prototype.keys",function(d){return d||function(){return Ni(this,function(V){return V})}});var He=this||self;function Tt(d,V){d=d.split(".");var S=He;d[0]in S||typeof S.execScript=="undefined"||S.execScript("var "+d[0]);for(var F;d.length&&(F=d.shift());)d.length||V===void 0?S[F]&&S[F]!==Object.prototype[F]?S=S[F]:S=S[F]={}:S[F]=V}function Je(){throw Error("Invalid UTF8")}function Zi(d,V){return V=String.fromCharCode.apply(null,V),d==null?V:d+V}var Oi,An=typeof TextDecoder!="undefined",sn,Xn=typeof TextEncoder!="undefined",Si={},Mi=null;function Fn(d){var V;V===void 0&&(V=0),ei(),V=Si[V];for(var S=Array(Math.floor(d.length/3)),F=V[64]||"",T=0,c=0;T<d.length-2;T+=3){var h=d[T],G=d[T+1],r=d[T+2],C=V[h>>2];h=V[(h&3)<<4|G>>4],G=V[(G&15)<<2|r>>6],r=V[r&63],S[c++]=C+h+G+r}switch(C=0,r=F,d.length-T){case 2:C=d[T+1],r=V[(C&15)<<2]||F;case 1:d=d[T],S[c]=V[d>>2]+V[(d&3)<<4|C>>4]+r+F}return S.join("")}function Zn(d){var V=d.length,S=3*V/4;S%3?S=Math.floor(S):"=.".indexOf(d[V-1])!=-1&&(S="=.".indexOf(d[V-2])!=-1?S-2:S-1);var F=new Uint8Array(S),T=0;return oi(d,function(c){F[T++]=c}),T!==S?F.subarray(0,T):F}function oi(d,V){function S(r){for(;F<d.length;){var C=d.charAt(F++),p=Mi[C];if(p!=null)return p;if(!/^[\s\xa0]*$/.test(C))throw Error("Unknown base64 encoding at char: "+C)}return r}ei();for(var F=0;;){var T=S(-1),c=S(0),h=S(64),G=S(64);if(G===64&&T===-1)break;V(T<<2|c>>4),h!=64&&(V(c<<4&240|h>>2),G!=64&&V(h<<6&192|G))}}function ei(){if(!Mi){Mi={};for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),V=["+/=","+/","-_=","-_.","-_"],S=0;5>S;S++){var F=d.concat(V[S].split(""));Si[S]=F;for(var T=0;T<F.length;T++){var c=F[T];Mi[c]===void 0&&(Mi[c]=T)}}}}var rn=typeof Uint8Array=="function";function ji(d){return rn&&d!=null&&d instanceof Uint8Array}var Ae;function Me(d){if(this.L=d,d!==null&&d.length===0)throw Error("ByteString should be constructed with non-empty values")}var si=typeof Uint8Array.prototype.slice=="function",de=0,Fe=0;function yi(d,V){if(d.constructor===Uint8Array)return d;if(d.constructor===ArrayBuffer)return new Uint8Array(d);if(d.constructor===Array)return new Uint8Array(d);if(d.constructor===String)return Zn(d);if(d.constructor===Me)return!V&&(V=d.L)&&V.constructor===Uint8Array?V:(V=d.L,V=V==null||ji(V)?V:typeof V=="string"?Zn(V):null,(d=d.L=V)?new Uint8Array(d):Ae||(Ae=new Uint8Array(0)));if(d instanceof Uint8Array)return new Uint8Array(d.buffer,d.byteOffset,d.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function $e(d,V){return Error("Invalid wire type: "+d+" (at position "+V+")")}function ne(){return Error("Failed to read varint, encoding is invalid.")}function Xe(d,V){V=V===void 0?{}:V,V=V.v===void 0?!1:V.v,this.h=null,this.g=this.i=this.j=0,this.v=V,d&&Ue(this,d)}function Ue(d,V){d.h=yi(V,d.v),d.j=0,d.i=d.h.length,d.g=d.j}Xe.prototype.reset=function(){this.g=this.j};function Dt(d){if(d.g>d.i)throw Error("Tried to read past the end of the data "+d.g+" > "+d.i)}function xe(d){var V=d.h,S=V[d.g],F=S&127;if(128>S)return d.g+=1,Dt(d),F;if(S=V[d.g+1],F|=(S&127)<<7,128>S)return d.g+=2,Dt(d),F;if(S=V[d.g+2],F|=(S&127)<<14,128>S)return d.g+=3,Dt(d),F;if(S=V[d.g+3],F|=(S&127)<<21,128>S)return d.g+=4,Dt(d),F;if(S=V[d.g+4],d.g+=5,F|=(S&15)<<28,128>S)return Dt(d),F;if(128<=V[d.g++]&&128<=V[d.g++]&&128<=V[d.g++]&&128<=V[d.g++]&&128<=V[d.g++])throw ne();return Dt(d),F}var $t=[];function Ge(){this.g=[]}Ge.prototype.length=function(){return this.g.length},Ge.prototype.end=function(){var d=this.g;return this.g=[],d};function Te(d,V){for(;127<V;)d.g.push(V&127|128),V>>>=7;d.g.push(V)}function di(d){var V={},S=V.W===void 0?!1:V.W;this.l={v:V.v===void 0?!1:V.v},this.W=S,V=this.l,$t.length?(S=$t.pop(),V&&(S.v=V.v),d&&Ue(S,d),d=S):d=new Xe(d,V),this.g=d,this.j=this.g.g,this.h=this.i=-1}di.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function Se(d){var V=d.g;if(V.g==V.i)return!1;d.j=d.g.g;var S=xe(d.g)>>>0;if(V=S>>>3,S&=7,!(0<=S&&5>=S))throw $e(S,d.j);if(1>V)throw Error("Invalid field number: "+V+" (at position "+d.j+")");return d.i=V,d.h=S,!0}function te(d){switch(d.h){case 0:if(d.h!=0)te(d);else t:{d=d.g;for(var V=d.g,S=V+10;V<S;)if((d.h[V++]&128)===0){d.g=V,Dt(d);break t}throw ne()}break;case 1:d=d.g,d.g+=8,Dt(d);break;case 2:d.h!=2?te(d):(V=xe(d.g)>>>0,d=d.g,d.g+=V,Dt(d));break;case 5:d=d.g,d.g+=4,Dt(d);break;case 3:V=d.i;do{if(!Se(d))throw Error("Unmatched start-group tag: stream EOF");if(d.h==4){if(d.i!=V)throw Error("Unmatched end-group tag");break}te(d)}while(1);break;default:throw $e(d.h,d.j)}}var ii=[];function ri(){this.i=[],this.h=0,this.g=new Ge}function Ye(d,V){V.length!==0&&(d.i.push(V),d.h+=V.length)}function _i(d,V){if(V=V.ca){Ye(d,d.g.end());for(var S=0;S<V.length;S++)Ye(d,V[S])}}var fi=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function li(d,V){Object.isFrozen(d)||(fi?d[fi]|=V:d.N!==void 0?d.N|=V:Object.defineProperties(d,{N:{value:V,configurable:!0,writable:!0,enumerable:!1}}))}function Gi(d){var V;return fi?V=d[fi]:V=d.N,V==null?0:V}function Re(d){return li(d,1),d}function ke(d){return Array.isArray(d)?!!(Gi(d)&2):!1}function ve(d){if(!Array.isArray(d))throw Error("cannot mark non-array as immutable");li(d,2)}function ae(d){return d!==null&&typeof d=="object"&&!Array.isArray(d)&&d.constructor===Object}var ci=Object.freeze(Re([]));function le(d){if(ke(d.m))throw Error("Cannot mutate an immutable Message")}var ee=typeof Symbol!="undefined"&&typeof Symbol.hasInstance!="undefined";function wi(d){return{value:d,configurable:!1,writable:!1,enumerable:!1}}function Ze(d,V,S){return V===-1?null:V>=d.i?d.g?d.g[V]:void 0:(S===void 0?0:S)&&d.g&&(S=d.g[V],S!=null)?S:d.m[V+d.h]}function Jt(d,V,S,F){F=F===void 0?!1:F,le(d),V<d.i&&!F?d.m[V+d.h]=S:(d.g||(d.g=d.m[d.i+d.h]={}))[V]=S}function vt(d,V,S,F){S=S===void 0?!0:S,F=F===void 0?!1:F;var T=Ze(d,V,F);return T==null&&(T=ci),ke(d.m)?S&&(ve(T),Object.freeze(T)):(T===ci||ke(T))&&(T=Re(T.slice()),Jt(d,V,T,F)),T}function Ie(d,V,S){return d=Ze(d,V),d=d==null?d:+d,d==null?S===void 0?0:S:d}function ze(d,V,S,F){d.j||(d.j={});var T=ke(d.m),c=d.j[S];if(!c){F=vt(d,S,!0,F===void 0?!1:F),c=[],T=T||ke(F);for(var h=0;h<F.length;h++)c[h]=new V(F[h]),T&&ve(c[h].m);T&&(ve(c),Object.freeze(c)),d.j[S]=c}return c}function ce(d,V,S,F,T){var c=c===void 0?!1:c;return le(d),c=ze(d,S,V,c),S=F||new S,d=vt(d,V),T!=null?(c.splice(T,0,S),d.splice(T,0,S.m)):(c.push(S),d.push(S.m)),S}function Ce(d,V){return d=Ze(d,V),d==null?0:d}function lt(d,V){return d=Ze(d,V),d==null?"":d}function It(d){switch(typeof d){case"number":return isFinite(d)?d:String(d);case"object":if(d&&!Array.isArray(d)){if(ji(d))return Fn(d);if(d instanceof Me){var V=d.L;return V=V==null||typeof V=="string"?V:rn&&V instanceof Uint8Array?Fn(V):null,(d.L=V)||""}}}return d}function ht(d){var V=he;return V=V===void 0?Ht:V,pe(d,V)}function ie(d,V){if(d!=null){if(Array.isArray(d))d=pe(d,V);else if(ae(d)){var S={},F;for(F in d)S[F]=ie(d[F],V);d=S}else d=V(d);return d}}function pe(d,V){for(var S=d.slice(),F=0;F<S.length;F++)S[F]=ie(S[F],V);return Array.isArray(d)&&Gi(d)&1&&Re(S),S}function he(d){return d&&typeof d=="object"&&d.toJSON?d.toJSON():(d=It(d),Array.isArray(d)?ht(d):d)}function Ht(d){return ji(d)?new Uint8Array(d):d}function ye(d,V,S){d||(d=Ee),Ee=null;var F=this.constructor.h;d||(d=F?[F]:[]),this.h=(F?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=d;t:{if(F=this.m.length,d=F-1,F&&(F=this.m[d],ae(F))){this.i=d-this.h,this.g=F;break t}V!==void 0&&-1<V?(this.i=Math.max(V,d+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(S)for(V=0;V<S.length;V++)if(d=S[V],d<this.i)d+=this.h,(F=this.m[d])?Array.isArray(F)&&Re(F):this.m[d]=ci;else{F=this.g||(this.g=this.m[this.i+this.h]={});var T=F[d];T?Array.isArray(T)&&Re(T):F[d]=ci}}ye.prototype.toJSON=function(){return ht(this.m)},ye.prototype.toString=function(){return this.m.toString()};var Ee;function ai(){ye.apply(this,arguments)}if(rt(ai,ye),ee){var Ii={};Object.defineProperties(ai,(Ii[Symbol.hasInstance]=wi(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Ii))}function Fi(d,V,S){if(S){var F={},T;for(T in S){var c=S[T],h=c.ja;h||(F.F=c.pa||c.ha.P,c.ba?(F.U=ln(c.ba),h=function(G){return function(r,C,p){return G.F(r,C,p,G.U)}}(F)):c.da?(F.T=ti(c.X.g,c.da),h=function(G){return function(r,C,p){return G.F(r,C,p,G.T)}}(F)):h=F.F,c.ja=h),h(V,d,c.X),F={F:F.F,U:F.U,T:F.T}}}_i(V,d)}var Li=Symbol();function Ke(d,V,S){return d[Li]||(d[Li]=function(F,T){return V(F,T,S)})}function Ci(d){var V=d[Li];if(!V){var S=A(d);V=function(F,T){return X(F,T,S)},d[Li]=V}return V}function Tn(d){var V=d.ba;if(V)return Ci(V);if(V=d.oa)return Ke(d.X.g,V,d.da)}function ui(d){var V=Tn(d),S=d.X,F=d.ha.O;return V?function(T,c){return F(T,c,S,V)}:function(T,c){return F(T,c,S)}}function Qe(d,V,S,F,T,c){d=d();var h=0;for(d.length&&typeof d[0]!="number"&&(S(V,d[0]),h++);h<d.length;){S=d[h++];for(var G=h+1;G<d.length&&typeof d[G]!="number";)G++;var r=d[h++];switch(G-=h,G){case 0:F(V,S,r);break;case 1:F(V,S,r,d[h++]);break;case 2:T(V,S,r,d[h++],d[h++]);break;case 3:G=d[h++];var C=d[h++],p=d[h++];Array.isArray(p)?T(V,S,r,G,C,p):c(V,S,r,G,C,p);break;case 4:c(V,S,r,d[h++],d[h++],d[h++],d[h++]);break;default:throw Error("unexpected number of binary field arguments: "+G)}}return V}var zi=Symbol();function ln(d){var V=d[zi];if(!V){var S=Vi(d);V=function(F,T){return k(F,T,S)},d[zi]=V}return V}function ti(d,V){var S=d[zi];return S||(S=function(F,T){return Fi(F,T,V)},d[zi]=S),S}var Hn=Symbol();function mi(d,V){d.push(V)}function Ki(d,V,S){d.push(V,S.P)}function un(d,V,S,F,T){var c=ln(T),h=S.P;d.push(V,function(G,r,C){return h(G,r,C,F,c)})}function Nn(d,V,S,F,T,c){var h=ti(F,c),G=S.P;d.push(V,function(r,C,p){return G(r,C,p,F,h)})}function Vi(d){var V=d[Hn];return V||Qe(d,d[Hn]=[],mi,Ki,un,Nn)}var mn=Symbol();function to(d,V){d[0]=V}function eo(d,V,S,F){var T=S.O;d[V]=F?function(c,h,G){return T(c,h,G,F)}:T}function hn(d,V,S,F,T,c){var h=S.O,G=Ci(T);d[V]=function(r,C,p){return h(r,C,p,F,G,c)}}function yn(d,V,S,F,T,c,h){var G=S.O,r=Ke(F,T,c);d[V]=function(C,p,s){return G(C,p,s,F,r,h)}}function A(d){var V=d[mn];return V||Qe(d,d[mn]={},to,eo,hn,yn)}function X(d,V,S){for(;Se(V)&&V.h!=4;){var F=V.i,T=S[F];if(!T){var c=S[0];c&&(c=c[F])&&(T=S[F]=ui(c))}if((!T||!T(V,d,F))&&(T=V,F=d,c=T.j,te(T),!T.W)){var h=T.g.h;T=T.g.g,T=c===T?Ae||(Ae=new Uint8Array(0)):si?h.slice(c,T):new Uint8Array(h.subarray(c,T)),(c=F.ca)?c.push(T):F.ca=[T]}}return d}function R(d,V,S){if(ii.length){var F=ii.pop();d&&(Ue(F.g,d),F.i=-1,F.h=-1),d=F}else d=new di(d);try{return X(new V,d,A(S))}finally{V=d.g,V.h=null,V.j=0,V.i=0,V.g=0,V.v=!1,d.i=-1,d.h=-1,100>ii.length&&ii.push(d)}}function k(d,V,S){for(var F=S.length,T=F%2==1,c=T?1:0;c<F;c+=2)(0,S[c+1])(V,d,S[c]);Fi(d,V,T?S[0]:void 0)}function $(d,V){var S=new ri;k(d,S,Vi(V)),Ye(S,S.g.end()),d=new Uint8Array(S.h),V=S.i;for(var F=V.length,T=0,c=0;c<F;c++){var h=V[c];d.set(h,T),T+=h.length}return S.i=[d],d}function Ct(d,V){return{O:d,P:V}}var q=Ct(function(d,V,S){if(d.h!==5)return!1;d=d.g;var F=d.h[d.g],T=d.h[d.g+1],c=d.h[d.g+2],h=d.h[d.g+3];return d.g+=4,Dt(d),T=(F<<0|T<<8|c<<16|h<<24)>>>0,d=2*(T>>31)+1,F=T>>>23&255,T&=8388607,Jt(V,S,F==255?T?NaN:1/0*d:F==0?d*Math.pow(2,-149)*T:d*Math.pow(2,F-150)*(T+Math.pow(2,23))),!0},function(d,V,S){if(V=Ze(V,S),V!=null){Te(d.g,8*S+5),d=d.g;var F=V;F=(S=0>F?1:0)?-F:F,F===0?0<1/F?de=Fe=0:(Fe=0,de=2147483648):isNaN(F)?(Fe=0,de=2147483647):34028234663852886e22<F?(Fe=0,de=(S<<31|2139095040)>>>0):11754943508222875e-54>F?(F=Math.round(F/Math.pow(2,-149)),Fe=0,de=(S<<31|F)>>>0):(V=Math.floor(Math.log(F)/Math.LN2),F*=Math.pow(2,-V),F=Math.round(8388608*F),16777216<=F&&++V,Fe=0,de=(S<<31|V+127<<23|F&8388607)>>>0),S=de,d.g.push(S>>>0&255),d.g.push(S>>>8&255),d.g.push(S>>>16&255),d.g.push(S>>>24&255)}}),at=Ct(function(d,V,S){if(d.h!==0)return!1;for(var F=d.g,T=128,c=0,h=d=0;4>h&&128<=T;h++)T=F.h[F.g++],Dt(F),c|=(T&127)<<7*h;if(128<=T&&(T=F.h[F.g++],Dt(F),c|=(T&127)<<28,d|=(T&127)>>4),128<=T)for(h=0;5>h&&128<=T;h++)T=F.h[F.g++],Dt(F),d|=(T&127)<<7*h+3;if(128>T)F=c>>>0,T=d>>>0,(d=T&2147483648)&&(F=~F+1>>>0,T=~T>>>0,F==0&&(T=T+1>>>0)),F=4294967296*T+(F>>>0);else throw ne();return Jt(V,S,d?-F:F),!0},function(d,V,S){if(V=Ze(V,S),V!=null&&V!=null){Te(d.g,8*S),d=d.g;var F=V;for(S=0>F,F=Math.abs(F),V=F>>>0,F=Math.floor((F-V)/4294967296),F>>>=0,S&&(F=~F>>>0,V=(~V>>>0)+1,4294967295<V&&(V=0,F++,4294967295<F&&(F=0))),de=V,Fe=F,S=de,V=Fe;0<V||127<S;)d.g.push(S&127|128),S=(S>>>7|V<<25)>>>0,V>>>=7;d.g.push(S)}}),Zt=Ct(function(d,V,S){return d.h!==0?!1:(Jt(V,S,xe(d.g)),!0)},function(d,V,S){if(V=Ze(V,S),V!=null&&V!=null)if(Te(d.g,8*S),d=d.g,S=V,0<=S)Te(d,S);else{for(V=0;9>V;V++)d.g.push(S&127|128),S>>=7;d.g.push(1)}}),St=Ct(function(d,V,S){if(d.h!==2)return!1;var F=xe(d.g)>>>0;d=d.g;var T=d.g;d.g+=F,Dt(d),d=d.h;var c;if(An)(c=Oi)||(c=Oi=new TextDecoder("utf-8",{fatal:!0})),c=c.decode(d.subarray(T,T+F));else{F=T+F;for(var h=[],G=null,r,C,p;T<F;)r=d[T++],128>r?h.push(r):224>r?T>=F?Je():(C=d[T++],194>r||(C&192)!==128?(T--,Je()):h.push((r&31)<<6|C&63)):240>r?T>=F-1?Je():(C=d[T++],(C&192)!==128||r===224&&160>C||r===237&&160<=C||((c=d[T++])&192)!==128?(T--,Je()):h.push((r&15)<<12|(C&63)<<6|c&63)):244>=r?T>=F-2?Je():(C=d[T++],(C&192)!==128||(r<<28)+(C-144)>>30!==0||((c=d[T++])&192)!==128||((p=d[T++])&192)!==128?(T--,Je()):(r=(r&7)<<18|(C&63)<<12|(c&63)<<6|p&63,r-=65536,h.push((r>>10&1023)+55296,(r&1023)+56320))):Je(),8192<=h.length&&(G=Zi(G,h),h.length=0);c=Zi(G,h)}return Jt(V,S,c),!0},function(d,V,S){if(V=Ze(V,S),V!=null){var F=!1;if(F=F===void 0?!1:F,Xn){if(F&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(V))throw Error("Found an unpaired surrogate");V=(sn||(sn=new TextEncoder)).encode(V)}else{for(var T=0,c=new Uint8Array(3*V.length),h=0;h<V.length;h++){var G=V.charCodeAt(h);if(128>G)c[T++]=G;else{if(2048>G)c[T++]=G>>6|192;else{if(55296<=G&&57343>=G){if(56319>=G&&h<V.length){var r=V.charCodeAt(++h);if(56320<=r&&57343>=r){G=1024*(G-55296)+r-56320+65536,c[T++]=G>>18|240,c[T++]=G>>12&63|128,c[T++]=G>>6&63|128,c[T++]=G&63|128;continue}else h--}if(F)throw Error("Found an unpaired surrogate");G=65533}c[T++]=G>>12|224,c[T++]=G>>6&63|128}c[T++]=G&63|128}}V=c.subarray(0,T)}Te(d.g,8*S+2),Te(d.g,V.length),Ye(d,d.g.end()),Ye(d,V)}}),Et=Ct(function(d,V,S,F,T){if(d.h!==2)return!1;V=ce(V,S,F),S=d.g.i,F=xe(d.g)>>>0;var c=d.g.g+F,h=c-S;if(0>=h&&(d.g.i=c,T(V,d),h=c-d.g.g),h)throw Error("Message parsing ended unexpectedly. Expected to read "+(F+" bytes, instead read "+(F-h)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return d.g.g=c,d.g.i=S,!0},function(d,V,S,F,T){if(V=ze(V,F,S),V!=null)for(F=0;F<V.length;F++){var c=d;Te(c.g,8*S+2);var h=c.g.end();Ye(c,h),h.push(c.h),c=h,T(V[F],d),h=d;var G=c.pop();for(G=h.h+h.g.length()-G;127<G;)c.push(G&127|128),G>>>=7,h.h++;c.push(G),h.h++}});function kt(){ai.apply(this,arguments)}if(rt(kt,ai),ee){var re={};Object.defineProperties(kt,(re[Symbol.hasInstance]=wi(Object[Symbol.hasInstance]),re))}function zt(d){kt.call(this,d)}rt(zt,kt);function Yt(){return[1,Zt,2,q,3,St,4,St]}function Ut(d){kt.call(this,d,-1,be)}rt(Ut,kt),Ut.prototype.addClassification=function(d,V){return ce(this,1,zt,d,V),this};function oe(){return[1,Et,zt,Yt]}var be=[1];function fe(d){kt.call(this,d)}rt(fe,kt);function Ve(){return[1,q,2,q,3,q,4,q,5,q]}function De(d){kt.call(this,d,-1,f)}rt(De,kt);function b(){return[1,Et,fe,Ve]}var f=[1];function W(d){kt.call(this,d)}rt(W,kt);function M(){return[1,q,2,q,3,q,4,q,5,q,6,at]}function Q(d,V,S){if(S=d.createShader(S===0?d.VERTEX_SHADER:d.FRAGMENT_SHADER),d.shaderSource(S,V),d.compileShader(S),!d.getShaderParameter(S,d.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+d.getShaderInfoLog(S));return S}function tt(d){return ze(d,zt,1).map(function(V){return{index:Ce(V,1),score:Ie(V,2),label:Ze(V,3)!=null?lt(V,3):void 0,displayName:Ze(V,4)!=null?lt(V,4):void 0}})}function D(d){return{x:Ie(d,1),y:Ie(d,2),z:Ie(d,3),visibility:Ze(d,4)!=null?Ie(d,4):void 0}}function st(d){return d.map(function(V){return ze(R(V,De,b),fe,1).map(D)})}function mt(d,V){this.h=d,this.g=V,this.l=0}function g(d,V,S){return B(d,V),typeof d.g.canvas.transferToImageBitmap=="function"?Promise.resolve(d.g.canvas.transferToImageBitmap()):S?Promise.resolve(d.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(d.g.canvas):(d.i===void 0&&(d.i=document.createElement("canvas")),new Promise(function(F){d.i.height=d.g.canvas.height,d.i.width=d.g.canvas.width,d.i.getContext("2d",{}).drawImage(d.g.canvas,0,0,d.g.canvas.width,d.g.canvas.height),F(d.i)}))}function B(d,V){var S=d.g;if(d.o===void 0){var F=Q(S,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),T=Q(S,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),c=S.createProgram();if(S.attachShader(c,F),S.attachShader(c,T),S.linkProgram(c),!S.getProgramParameter(c,S.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+S.getProgramInfoLog(c));F=d.o=c,S.useProgram(F),T=S.getUniformLocation(F,"sampler0"),d.j={K:S.getAttribLocation(F,"aVertex"),J:S.getAttribLocation(F,"aTex"),qa:T},d.u=S.createBuffer(),S.bindBuffer(S.ARRAY_BUFFER,d.u),S.enableVertexAttribArray(d.j.K),S.vertexAttribPointer(d.j.K,2,S.FLOAT,!1,0,0),S.bufferData(S.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),S.STATIC_DRAW),S.bindBuffer(S.ARRAY_BUFFER,null),d.s=S.createBuffer(),S.bindBuffer(S.ARRAY_BUFFER,d.s),S.enableVertexAttribArray(d.j.J),S.vertexAttribPointer(d.j.J,2,S.FLOAT,!1,0,0),S.bufferData(S.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),S.STATIC_DRAW),S.bindBuffer(S.ARRAY_BUFFER,null),S.uniform1i(T,0)}F=d.j,S.useProgram(d.o),S.canvas.width=V.width,S.canvas.height=V.height,S.viewport(0,0,V.width,V.height),S.activeTexture(S.TEXTURE0),d.h.bindTexture2d(V.glName),S.enableVertexAttribArray(F.K),S.bindBuffer(S.ARRAY_BUFFER,d.u),S.vertexAttribPointer(F.K,2,S.FLOAT,!1,0,0),S.enableVertexAttribArray(F.J),S.bindBuffer(S.ARRAY_BUFFER,d.s),S.vertexAttribPointer(F.J,2,S.FLOAT,!1,0,0),S.bindFramebuffer(S.DRAW_FRAMEBUFFER?S.DRAW_FRAMEBUFFER:S.FRAMEBUFFER,null),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT),S.colorMask(!0,!0,!0,!0),S.drawArrays(S.TRIANGLE_FAN,0,4),S.disableVertexAttribArray(F.K),S.disableVertexAttribArray(F.J),S.bindBuffer(S.ARRAY_BUFFER,null),d.h.bindTexture2d(0)}function v(d){this.g=d}var x=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function J(d,V){return V+d}function O(d,V){window[d]=V}function E(d){var V=document.createElement("script");return V.setAttribute("src",d),V.setAttribute("crossorigin","anonymous"),new Promise(function(S){V.addEventListener("load",function(){S()},!1),V.addEventListener("error",function(){S()},!1),document.body.appendChild(V)})}function gt(){return ft(function(d){switch(d.g){case 1:return d.o=2,_(d,WebAssembly.instantiate(x),4);case 4:d.g=3,d.o=0;break;case 2:return d.o=0,d.j=null,d.return(!1);case 3:return d.return(!0)}})}function ot(d){if(this.g=d,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.$=!0,this.D=Promise.resolve(),this.Z="",this.C={},this.locateFile=d&&d.locateFile||J,typeof window=="object")var V=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")V=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.aa=V,d.options){V=m(Object.keys(d.options));for(var S=V.next();!S.done;S=V.next()){S=S.value;var F=d.options[S].default;F!==void 0&&(this.j[S]=typeof F=="function"?F():F)}}}e=ot.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function yt(d){var V,S,F,T,c,h,G,r,C,p,s;return ft(function(a){switch(a.g){case 1:return d.$?(V=d.g.files===void 0?[]:typeof d.g.files=="function"?d.g.files(d.j):d.g.files,_(a,gt(),2)):a.return();case 2:if(S=a.h,typeof window=="object")return O("createMediapipeSolutionsWasm",{locateFile:d.locateFile}),O("createMediapipeSolutionsPackedAssets",{locateFile:d.locateFile}),h=V.filter(function(u){return u.data!==void 0}),G=V.filter(function(u){return u.data===void 0}),r=Promise.all(h.map(function(u){var Z=wt(d,u.url);if(u.path!==void 0){var w=u.path;Z=Z.then(function(Y){return d.overrideFile(w,Y),Promise.resolve(Y)})}return Z})),C=Promise.all(G.map(function(u){return u.simd===void 0||u.simd&&S||!u.simd&&!S?E(d.locateFile(u.url,d.aa)):Promise.resolve()})).then(function(){var u,Z,w;return ft(function(Y){if(Y.g==1)return u=window.createMediapipeSolutionsWasm,Z=window.createMediapipeSolutionsPackedAssets,w=d,_(Y,u(Z),2);w.h=Y.h,Y.g=0})}),p=function(){return ft(function(u){return d.g.graph&&d.g.graph.url?u=_(u,wt(d,d.g.graph.url),0):(u.g=0,u=void 0),u})}(),_(a,Promise.all([C,r,p]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return F=V.filter(function(u){return u.simd===void 0||u.simd&&S||!u.simd&&!S}).map(function(u){return d.locateFile(u.url,d.aa)}),importScripts.apply(null,y(F)),T=d,_(a,createMediapipeSolutionsWasm(Module),6);case 6:T.h=a.h,d.l=new OffscreenCanvas(1,1),d.h.canvas=d.l,c=d.h.GL.createContext(d.l,{antialias:!1,alpha:!1,na:typeof WebGL2RenderingContext!="undefined"?2:1}),d.h.GL.makeContextCurrent(c),a.g=4;break;case 7:if(d.l=document.createElement("canvas"),s=d.l.getContext("webgl2",{}),!s&&(s=d.l.getContext("webgl",{}),!s))return alert("Failed to create WebGL canvas context when passing video frame."),a.return();d.G=s,d.h.canvas=d.l,d.h.createContext(d.l,!0,!0,{});case 4:d.i=new d.h.SolutionWasm,d.$=!1,a.g=0}})}function Bt(d){var V,S,F,T,c,h,G,r;return ft(function(C){if(C.g==1){if(d.g.graph&&d.g.graph.url&&d.Z===d.g.graph.url)return C.return();if(d.s=!0,!d.g.graph||!d.g.graph.url){C.g=2;return}return d.Z=d.g.graph.url,_(C,wt(d,d.g.graph.url),3)}for(C.g!=2&&(V=C.h,d.i.loadGraph(V)),S=m(Object.keys(d.C)),F=S.next();!F.done;F=S.next())T=F.value,d.i.overrideFile(T,d.C[T]);if(d.C={},d.g.listeners)for(c=m(d.g.listeners),h=c.next();!h.done;h=c.next())G=h.value,Ft(d,G);r=d.j,d.j={},d.setOptions(r),C.g=0})}e.reset=function(){var d=this;return ft(function(V){d.i&&(d.i.reset(),d.o={},d.u={}),V.g=0})},e.setOptions=function(d,V){var S=this;if(V=V||this.g.options){for(var F=[],T=[],c={},h=m(Object.keys(d)),G=h.next();!G.done;c={R:c.R,S:c.S},G=h.next()){var r=G.value;r in this.j&&this.j[r]===d[r]||(this.j[r]=d[r],G=V[r],G!==void 0&&(G.onChange&&(c.R=G.onChange,c.S=d[r],F.push(function(C){return function(){var p;return ft(function(s){if(s.g==1)return _(s,C.R(C.S),2);p=s.h,p===!0&&(S.s=!0),s.g=0})}}(c))),G.graphOptionXref&&(r={valueNumber:G.type===1?d[r]:0,valueBoolean:G.type===0?d[r]:!1,valueString:G.type===2?d[r]:""},G=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),G.graphOptionXref),r),T.push(G))))}(F.length!==0||T.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(T),this.A=(this.A===void 0?[]:this.A).concat(F))}};function Qt(d){var V,S,F,T,c,h,G;return ft(function(r){switch(r.g){case 1:if(!d.s)return r.return();if(!d.A){r.g=2;break}V=m(d.A),S=V.next();case 3:if(S.done){r.g=5;break}return F=S.value,_(r,F(),4);case 4:S=V.next(),r.g=3;break;case 5:d.A=void 0;case 2:if(d.B){for(T=new d.h.GraphOptionChangeRequestList,c=m(d.B),h=c.next();!h.done;h=c.next())G=h.value,T.push_back(G);d.i.changeOptions(T),T.delete(),d.B=void 0}d.s=!1,r.g=0}})}e.initialize=function(){var d=this;return ft(function(V){return V.g==1?_(V,yt(d),2):V.g!=3?_(V,Bt(d),3):_(V,Qt(d),0)})};function wt(d,V){var S,F;return ft(function(T){return V in d.H?T.return(d.H[V]):(S=d.locateFile(V,""),F=fetch(S).then(function(c){return c.arrayBuffer()}),d.H[V]=F,T.return(F))})}e.overrideFile=function(d,V){this.i?this.i.overrideFile(d,V):this.C[d]=V},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(d,V){var S=this,F,T,c,h,G,r,C,p,s;return ft(function(a){switch(a.g){case 1:return S.g.inputs?(F=1e3*(V==null?performance.now():V),_(a,S.D,2)):a.return();case 2:return _(a,S.initialize(),3);case 3:for(T=new S.h.PacketDataList,c=m(Object.keys(d)),h=c.next();!h.done;h=c.next())if(G=h.value,r=S.g.inputs[G]){t:{var u=d[G];switch(r.type){case"video":var Z=S.o[r.stream];if(Z||(Z=new mt(S.h,S.G),S.o[r.stream]=Z),Z.l===0&&(Z.l=Z.h.createTexture()),typeof HTMLVideoElement!="undefined"&&u instanceof HTMLVideoElement)var w=u.videoWidth,Y=u.videoHeight;else typeof HTMLImageElement!="undefined"&&u instanceof HTMLImageElement?(w=u.naturalWidth,Y=u.naturalHeight):(w=u.width,Y=u.height);Y={glName:Z.l,width:w,height:Y},w=Z.g,w.canvas.width=Y.width,w.canvas.height=Y.height,w.activeTexture(w.TEXTURE0),Z.h.bindTexture2d(Z.l),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,u),Z.h.bindTexture2d(0),Z=Y;break t;case"detections":for(Z=S.o[r.stream],Z||(Z=new v(S.h),S.o[r.stream]=Z),Z.data||(Z.data=new Z.g.DetectionListData),Z.data.reset(u.length),Y=0;Y<u.length;++Y){w=u[Y];var N=Z.data,U=N.setBoundingBox,j=Y,et=w.ea,it=new W;if(Jt(it,1,et.ka),Jt(it,2,et.la),Jt(it,3,et.height),Jt(it,4,et.width),Jt(it,5,et.rotation),Jt(it,6,et.ia),et=$(it,M),U.call(N,j,et),w.Y)for(N=0;N<w.Y.length;++N){it=w.Y[N];var ut=!!it.visibility;U=Z.data,j=U.addNormalizedLandmark,et=Y,it=Object.assign(Object.assign({},it),{visibility:ut?it.visibility:0}),ut=new fe,Jt(ut,1,it.x),Jt(ut,2,it.y),Jt(ut,3,it.z),it.visibility&&Jt(ut,4,it.visibility),it=$(ut,Ve),j.call(U,et,it)}if(w.V)for(N=0;N<w.V.length;++N)U=Z.data,j=U.addClassification,et=Y,it=w.V[N],ut=new zt,Jt(ut,2,it.score),it.index&&Jt(ut,1,it.index),it.label&&Jt(ut,3,it.label),it.displayName&&Jt(ut,4,it.displayName),it=$(ut,Yt),j.call(U,et,it)}Z=Z.data;break t;default:Z={}}}switch(C=Z,p=r.stream,r.type){case"video":T.pushTexture2d(Object.assign(Object.assign({},C),{stream:p,timestamp:F}));break;case"detections":s=C,s.stream=p,s.timestamp=F,T.pushDetectionList(s);break;default:throw Error("Unknown input config type: '"+r.type+"'")}}return S.i.send(T),_(a,S.D,4);case 4:T.delete(),a.g=0}})};function bt(d,V,S){var F,T,c,h,G,r,C,p,s,a,u,Z,w,Y;return ft(function(N){switch(N.g){case 1:if(!S)return N.return(V);for(F={},T=0,c=m(Object.keys(S)),h=c.next();!h.done;h=c.next())G=h.value,r=S[G],typeof r!="string"&&r.type==="texture"&&V[r.stream]!==void 0&&++T;1<T&&(d.I=!1),C=m(Object.keys(S)),h=C.next();case 2:if(h.done){N.g=4;break}if(p=h.value,s=S[p],typeof s=="string")return w=F,Y=p,_(N,Rt(d,p,V[s]),14);if(a=V[s.stream],s.type==="detection_list"){if(a){for(var U=a.getRectList(),j=a.getLandmarksList(),et=a.getClassificationsList(),it=[],ut=0;ut<U.size();++ut){var pt=R(U.get(ut),W,M);pt={ea:{ka:Ie(pt,1),la:Ie(pt,2),height:Ie(pt,3),width:Ie(pt,4),rotation:Ie(pt,5,0),ia:Ce(pt,6)},Y:ze(R(j.get(ut),De,b),fe,1).map(D),V:tt(R(et.get(ut),Ut,oe))},it.push(pt)}U=it}else U=[];F[p]=U,N.g=7;break}if(s.type==="proto_list"){if(a){for(U=Array(a.size()),j=0;j<a.size();j++)U[j]=a.get(j);a.delete()}else U=[];F[p]=U,N.g=7;break}if(a===void 0){N.g=3;break}if(s.type==="float_list"){F[p]=a,N.g=7;break}if(s.type==="proto"){F[p]=a,N.g=7;break}if(s.type!=="texture")throw Error("Unknown output config type: '"+s.type+"'");return u=d.u[p],u||(u=new mt(d.h,d.G),d.u[p]=u),_(N,g(u,a,d.I),13);case 13:Z=N.h,F[p]=Z;case 7:s.transform&&F[p]&&(F[p]=s.transform(F[p])),N.g=3;break;case 14:w[Y]=N.h;case 3:h=C.next(),N.g=2;break;case 4:return N.return(F)}})}function Rt(d,V,S){var F;return ft(function(T){return typeof S=="number"||S instanceof Uint8Array||S instanceof d.h.Uint8BlobList?T.return(S):S instanceof d.h.Texture2dDataOut?(F=d.u[V],F||(F=new mt(d.h,d.G),d.u[V]=F),T.return(g(F,S,d.I))):T.return(void 0)})}function Ft(d,V){for(var S=V.name||"$",F=[].concat(y(V.wants)),T=new d.h.StringList,c=m(V.wants),h=c.next();!h.done;h=c.next())T.push_back(h.value);c=d.h.PacketListener.implement({onResults:function(G){for(var r={},C=0;C<V.wants.length;++C)r[F[C]]=G.get(C);var p=d.listeners[S];p&&(d.D=bt(d,r,V.outs).then(function(s){s=p(s);for(var a=0;a<V.wants.length;++a){var u=r[F[a]];typeof u=="object"&&u.hasOwnProperty&&u.hasOwnProperty("delete")&&u.delete()}s&&(d.D=s)}))}}),d.i.attachMultiListener(T,c),T.delete()}e.onResults=function(d,V){this.listeners[V||"$"]=d},Tt("Solution",ot),Tt("OptionType",{BOOL:0,NUMBER:1,ma:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Nt(d){return d===void 0&&(d=0),d===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Mt(d){var V=this;d=d||{},this.g=new ot({locateFile:d.locateFile,files:function(S){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Nt(S.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:st},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:st},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(S){return S.map(function(F){return tt(R(F,Ut,oe))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(S){var F,T,c;return ft(function(h){return h.g==1?(F=Nt(S),T="third_party/mediapipe/modules/hand_landmark/"+F,_(h,wt(V.g,F),2)):(c=h.h,V.g.overrideFile(T,c),h.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=Mt.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(d){this.g.onResults(d)},e.initialize=function(){var d=this;return ft(function(V){return _(V,d.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(d){var V=this;return ft(function(S){return _(S,V.g.send(d),0)})},e.setOptions=function(d){this.g.setOptions(d)},Tt("Hands",Mt),Tt("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Tt("VERSION","0.4.1646424915")}).call(rI);var lI={};(function(){var e;function t(r){var C=0;return function(){return C<r.length?{done:!1,value:r[C++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,C,p){return r==Array.prototype||r==Object.prototype||(r[C]=p.value),r};function n(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var C=0;C<r.length;++C){var p=r[C];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var o=n(this);function l(r,C){if(C)t:{var p=o;r=r.split(".");for(var s=0;s<r.length-1;s++){var a=r[s];if(!(a in p))break t;p=p[a]}r=r[r.length-1],s=p[r],C=C(s),C!=s&&C!=null&&i(p,r,{configurable:!0,writable:!0,value:C})}}l("Symbol",function(r){function C(u){if(this instanceof C)throw new TypeError("Symbol is not a constructor");return new p(s+(u||"")+"_"+a++,u)}function p(u,Z){this.g=u,i(this,"description",{configurable:!0,writable:!0,value:Z})}if(r)return r;p.prototype.toString=function(){return this.g};var s="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return C}),l("Symbol.iterator",function(r){if(r)return r;r=Symbol("Symbol.iterator");for(var C="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),p=0;p<C.length;p++){var s=o[C[p]];typeof s=="function"&&typeof s.prototype[r]!="function"&&i(s.prototype,r,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return r});function I(r){return r={next:r},r[Symbol.iterator]=function(){return this},r}function m(r){var C=typeof Symbol!="undefined"&&Symbol.iterator&&r[Symbol.iterator];return C?C.call(r):{next:t(r)}}function y(r){if(!(r instanceof Array)){r=m(r);for(var C,p=[];!(C=r.next()).done;)p.push(C.value);r=p}return r}var H=typeof Object.create=="function"?Object.create:function(r){function C(){}return C.prototype=r,new C},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var nt={a:!0},dt={};try{dt.__proto__=nt,K=dt.a;break t}catch{}K=!1}L=K?function(r,C){if(r.__proto__=C,r.__proto__!==C)throw new TypeError(r+" is not extensible");return r}:null}var P=L;function rt(r,C){if(r.prototype=H(C.prototype),r.prototype.constructor=r,P)P(r,C);else for(var p in C)if(p!="prototype")if(Object.defineProperties){var s=Object.getOwnPropertyDescriptor(C,p);s&&Object.defineProperty(r,p,s)}else r[p]=C[p];r.da=C.prototype}function Xt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Wt(r){if(r.l)throw new TypeError("Generator is already running");r.l=!0}Xt.prototype.o=function(r){this.h=r};function xt(r,C){r.j={U:C,V:!0},r.g=r.m||r.s}Xt.prototype.return=function(r){this.j={return:r},this.g=this.s};function _(r,C,p){return r.g=p,{value:C}}function qe(r){this.g=new Xt,this.h=r}function ni(r,C){Wt(r.g);var p=r.g.i;return p?we(r,"return"in p?p.return:function(s){return{value:s,done:!0}},C,r.g.return):(r.g.return(C),qt(r))}function we(r,C,p,s){try{var a=C.call(r.g.i,p);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return r.g.l=!1,a;var u=a.value}catch(Z){return r.g.i=null,xt(r.g,Z),qt(r)}return r.g.i=null,s.call(r.g,u),qt(r)}function qt(r){for(;r.g.g;)try{var C=r.h(r.g);if(C)return r.g.l=!1,{value:C.value,done:!1}}catch(p){r.g.h=void 0,xt(r.g,p)}if(r.g.l=!1,r.g.j){if(C=r.g.j,r.g.j=null,C.V)throw C.U;return{value:C.return,done:!0}}return{value:void 0,done:!0}}function Bn(r){this.next=function(C){return Wt(r.g),r.g.i?C=we(r,r.g.i.next,C,r.g.o):(r.g.o(C),C=qt(r)),C},this.throw=function(C){return Wt(r.g),r.g.i?C=we(r,r.g.i.throw,C,r.g.o):(xt(r.g,C),C=qt(r)),C},this.return=function(C){return ni(r,C)},this[Symbol.iterator]=function(){return this}}function ge(r){function C(s){return r.next(s)}function p(s){return r.throw(s)}return new Promise(function(s,a){function u(Z){Z.done?s(Z.value):Promise.resolve(Z.value).then(C,p).then(u,a)}u(r.next())})}function ft(r){return ge(new Bn(new qe(r)))}l("Promise",function(r){function C(Z){this.h=0,this.i=void 0,this.g=[],this.o=!1;var w=this.j();try{Z(w.resolve,w.reject)}catch(Y){w.reject(Y)}}function p(){this.g=null}function s(Z){return Z instanceof C?Z:new C(function(w){w(Z)})}if(r)return r;p.prototype.h=function(Z){if(this.g==null){this.g=[];var w=this;this.i(function(){w.l()})}this.g.push(Z)};var a=o.setTimeout;p.prototype.i=function(Z){a(Z,0)},p.prototype.l=function(){for(;this.g&&this.g.length;){var Z=this.g;this.g=[];for(var w=0;w<Z.length;++w){var Y=Z[w];Z[w]=null;try{Y()}catch(N){this.j(N)}}}this.g=null},p.prototype.j=function(Z){this.i(function(){throw Z})},C.prototype.j=function(){function Z(N){return function(U){Y||(Y=!0,N.call(w,U))}}var w=this,Y=!1;return{resolve:Z(this.C),reject:Z(this.l)}},C.prototype.C=function(Z){if(Z===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Z instanceof C)this.F(Z);else{t:switch(typeof Z){case"object":var w=Z!=null;break t;case"function":w=!0;break t;default:w=!1}w?this.v(Z):this.m(Z)}},C.prototype.v=function(Z){var w=void 0;try{w=Z.then}catch(Y){this.l(Y);return}typeof w=="function"?this.G(w,Z):this.m(Z)},C.prototype.l=function(Z){this.s(2,Z)},C.prototype.m=function(Z){this.s(1,Z)},C.prototype.s=function(Z,w){if(this.h!=0)throw Error("Cannot settle("+Z+", "+w+"): Promise already settled in state"+this.h);this.h=Z,this.i=w,this.h===2&&this.D(),this.A()},C.prototype.D=function(){var Z=this;a(function(){if(Z.B()){var w=o.console;typeof w!="undefined"&&w.error(Z.i)}},1)},C.prototype.B=function(){if(this.o)return!1;var Z=o.CustomEvent,w=o.Event,Y=o.dispatchEvent;return typeof Y=="undefined"?!0:(typeof Z=="function"?Z=new Z("unhandledrejection",{cancelable:!0}):typeof w=="function"?Z=new w("unhandledrejection",{cancelable:!0}):(Z=o.document.createEvent("CustomEvent"),Z.initCustomEvent("unhandledrejection",!1,!0,Z)),Z.promise=this,Z.reason=this.i,Y(Z))},C.prototype.A=function(){if(this.g!=null){for(var Z=0;Z<this.g.length;++Z)u.h(this.g[Z]);this.g=null}};var u=new p;return C.prototype.F=function(Z){var w=this.j();Z.J(w.resolve,w.reject)},C.prototype.G=function(Z,w){var Y=this.j();try{Z.call(w,Y.resolve,Y.reject)}catch(N){Y.reject(N)}},C.prototype.then=function(Z,w){function Y(et,it){return typeof et=="function"?function(ut){try{N(et(ut))}catch(pt){U(pt)}}:it}var N,U,j=new C(function(et,it){N=et,U=it});return this.J(Y(Z,N),Y(w,U)),j},C.prototype.catch=function(Z){return this.then(void 0,Z)},C.prototype.J=function(Z,w){function Y(){switch(N.h){case 1:Z(N.i);break;case 2:w(N.i);break;default:throw Error("Unexpected state: "+N.h)}}var N=this;this.g==null?u.h(Y):this.g.push(Y),this.o=!0},C.resolve=s,C.reject=function(Z){return new C(function(w,Y){Y(Z)})},C.race=function(Z){return new C(function(w,Y){for(var N=m(Z),U=N.next();!U.done;U=N.next())s(U.value).J(w,Y)})},C.all=function(Z){var w=m(Z),Y=w.next();return Y.done?s([]):new C(function(N,U){function j(ut){return function(pt){et[ut]=pt,it--,it==0&&N(et)}}var et=[],it=0;do et.push(void 0),it++,s(Y.value).J(j(et.length-1),U),Y=w.next();while(!Y.done)})},C});function Ni(r,C){r instanceof String&&(r+="");var p=0,s=!1,a={next:function(){if(!s&&p<r.length){var u=p++;return{value:C(u,r[u]),done:!1}}return s=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}var Jn=typeof Object.assign=="function"?Object.assign:function(r,C){for(var p=1;p<arguments.length;p++){var s=arguments[p];if(s)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])}return r};l("Object.assign",function(r){return r||Jn}),l("Object.is",function(r){return r||function(C,p){return C===p?C!==0||1/C===1/p:C!==C&&p!==p}}),l("Array.prototype.includes",function(r){return r||function(C,p){var s=this;s instanceof String&&(s=String(s));var a=s.length;for(p=p||0,0>p&&(p=Math.max(p+a,0));p<a;p++){var u=s[p];if(u===C||Object.is(u,C))return!0}return!1}}),l("String.prototype.includes",function(r){return r||function(C,p){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(C instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(C,p||0)!==-1}}),l("Array.prototype.keys",function(r){return r||function(){return Ni(this,function(C){return C})}});var He=this||self;function Tt(r,C){r=r.split(".");var p=He;r[0]in p||typeof p.execScript=="undefined"||p.execScript("var "+r[0]);for(var s;r.length&&(s=r.shift());)r.length||C===void 0?p[s]&&p[s]!==Object.prototype[s]?p=p[s]:p=p[s]={}:p[s]=C}function Je(r){He.setTimeout(function(){throw r},0)}function Zi(r){Je(r)}function Oi(r,C){Zi(Error("Invalid wire type: "+r+" (at position "+C+")"))}function An(){Zi(Error("Failed to read varint, encoding is invalid."))}function sn(r,C){return C=String.fromCharCode.apply(null,C),r==null?C:r+C}var Xn,Si=typeof TextDecoder!="undefined",Mi,Fn=typeof TextEncoder!="undefined";function Zn(r){if(Fn)r=(Mi||(Mi=new TextEncoder)).encode(r);else{var C=void 0;C=C===void 0?!1:C;for(var p=0,s=new Uint8Array(3*r.length),a=0;a<r.length;a++){var u=r.charCodeAt(a);if(128>u)s[p++]=u;else{if(2048>u)s[p++]=u>>6|192;else{if(55296<=u&&57343>=u){if(56319>=u&&a<r.length){var Z=r.charCodeAt(++a);if(56320<=Z&&57343>=Z){u=1024*(u-55296)+Z-56320+65536,s[p++]=u>>18|240,s[p++]=u>>12&63|128,s[p++]=u>>6&63|128,s[p++]=u&63|128;continue}else a--}if(C)throw Error("Found an unpaired surrogate");u=65533}s[p++]=u>>12|224,s[p++]=u>>6&63|128}s[p++]=u&63|128}}r=s.subarray(0,p)}return r}var oi={},ei=null;function rn(r){var C;C===void 0&&(C=0),Me(),C=oi[C];for(var p=Array(Math.floor(r.length/3)),s=C[64]||"",a=0,u=0;a<r.length-2;a+=3){var Z=r[a],w=r[a+1],Y=r[a+2],N=C[Z>>2];Z=C[(Z&3)<<4|w>>4],w=C[(w&15)<<2|Y>>6],Y=C[Y&63],p[u++]=N+Z+w+Y}switch(N=0,Y=s,r.length-a){case 2:N=r[a+1],Y=C[(N&15)<<2]||s;case 1:r=r[a],p[u]=C[r>>2]+C[(r&3)<<4|N>>4]+Y+s}return p.join("")}function ji(r){var C=r.length,p=3*C/4;p%3?p=Math.floor(p):"=.".indexOf(r[C-1])!=-1&&(p="=.".indexOf(r[C-2])!=-1?p-2:p-1);var s=new Uint8Array(p),a=0;return Ae(r,function(u){s[a++]=u}),s.subarray(0,a)}function Ae(r,C){function p(Y){for(;s<r.length;){var N=r.charAt(s++),U=ei[N];if(U!=null)return U;if(!/^[\s\xa0]*$/.test(N))throw Error("Unknown base64 encoding at char: "+N)}return Y}Me();for(var s=0;;){var a=p(-1),u=p(0),Z=p(64),w=p(64);if(w===64&&a===-1)break;C(a<<2|u>>4),Z!=64&&(C(u<<4&240|Z>>2),w!=64&&C(Z<<6&192|w))}}function Me(){if(!ei){ei={};for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),C=["+/=","+/","-_=","-_.","-_"],p=0;5>p;p++){var s=r.concat(C[p].split(""));oi[p]=s;for(var a=0;a<s.length;a++){var u=s[a];ei[u]===void 0&&(ei[u]=a)}}}}var si=typeof Uint8Array=="function",de;function Fe(r){if(this.g=r,r!==null&&r.length===0)throw Error("ByteString should be constructed with non-empty values")}Fe.prototype.toJSON=function(){if(this.g==null)var r="";else r=this.g,r=this.g=r==null||typeof r=="string"?r:si&&r instanceof Uint8Array?rn(r):null;return r};var yi=typeof Uint8Array.prototype.slice=="function";function $e(r,C,p){return C===p?de||(de=new Uint8Array(0)):yi?r.slice(C,p):new Uint8Array(r.subarray(C,p))}var ne=0,Xe=0;function Ue(r){if(r.constructor===Uint8Array)return r;if(r.constructor===ArrayBuffer)return new Uint8Array(r);if(r.constructor===Array)return new Uint8Array(r);if(r.constructor===String)return ji(r);if(r.constructor===Fe){if(r.g==null)var C=de||(de=new Uint8Array(0));else{C=Uint8Array;var p=r.g;p=p==null||si&&p!=null&&p instanceof Uint8Array?p:typeof p=="string"?ji(p):null,r=r.g=p,C=new C(r)}return C}if(r instanceof Uint8Array)return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Dt(r,C){C=C===void 0?{}:C,C=C.u===void 0?!1:C.u,this.h=null,this.g=this.i=this.m=0,this.l=!1,this.u=C,r&&xe(this,r)}function xe(r,C){r.h=Ue(C),r.m=0,r.i=r.h.length,r.g=r.m}Dt.prototype.reset=function(){this.g=this.m};function $t(r){for(var C=128,p=0,s=0,a=0;4>a&&128<=C;a++)C=r.h[r.g++],p|=(C&127)<<7*a;if(128<=C&&(C=r.h[r.g++],p|=(C&127)<<28,s|=(C&127)>>4),128<=C)for(a=0;5>a&&128<=C;a++)C=r.h[r.g++],s|=(C&127)<<7*a+3;if(128>C)return r=p>>>0,C=s>>>0,(s=C&2147483648)&&(r=~r+1>>>0,C=~C>>>0,r==0&&(C=C+1>>>0)),r=4294967296*C+(r>>>0),s?-r:r;r.l=!0,An()}function Ge(r){r.g>r.i&&(r.l=!0,Zi(Error("Tried to read past the end of the data "+r.g+" > "+r.i)))}Dt.prototype.j=function(){var r=this.h,C=r[this.g],p=C&127;return 128>C?(this.g+=1,Ge(this),p):(C=r[this.g+1],p|=(C&127)<<7,128>C?(this.g+=2,Ge(this),p):(C=r[this.g+2],p|=(C&127)<<14,128>C?(this.g+=3,Ge(this),p):(C=r[this.g+3],p|=(C&127)<<21,128>C?(this.g+=4,Ge(this),p):(C=r[this.g+4],p|=(C&15)<<28,128>C?(this.g+=5,Ge(this),p>>>0):(this.g+=5,128<=r[this.g++]&&128<=r[this.g++]&&128<=r[this.g++]&&128<=r[this.g++]&&128<=r[this.g++]?(this.l=!0,An(),p):(Ge(this),p))))))},Dt.prototype.o=function(){var r=this.h[this.g],C=this.h[this.g+1],p=this.h[this.g+2],s=this.h[this.g+3];return this.g+=4,Ge(this),p=(r<<0|C<<8|p<<16|s<<24)>>>0,r=2*(p>>31)+1,C=p>>>23&255,p&=8388607,C==255?p?NaN:1/0*r:C==0?r*Math.pow(2,-149)*p:r*Math.pow(2,C-150)*(p+Math.pow(2,23))};var Te=[];function di(){this.g=new Uint8Array(64),this.h=0}function Se(r,C){if(!(r.h+1<r.g.length)){var p=r.g;r.g=new Uint8Array(Math.ceil(1+2*r.g.length)),r.g.set(p)}r.g[r.h++]=C}di.prototype.length=function(){return this.h},di.prototype.end=function(){var r=this.g,C=this.h;return this.h=0,$e(r,0,C)};function te(r,C){for(;127<C;)Se(r,C&127|128),C>>>=7;Se(r,C)}function ii(r){var C={},p=C.N===void 0?!1:C.N;this.m={u:C.u===void 0?!1:C.u},this.N=p,C=this.m,Te.length?(p=Te.pop(),C&&(p.u=C.u),r&&xe(p,r),r=p):r=new Dt(r,C),this.g=r,this.l=this.g.g,this.h=this.i=-1,this.j=!1}ii.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function ri(r){var C=r.g;if((C=C.g==C.i)||(C=r.j)||(C=r.g,C=C.l||0>C.g||C.g>C.i),C)return!1;r.l=r.g.g;var p=r.g.j();return C=p>>>3,p&=7,0<=p&&5>=p?(r.i=C,r.h=p,!0):(r.j=!0,Oi(p,r.l),!1)}function Ye(r){switch(r.h){case 0:if(r.h!=0)Ye(r);else t:{r=r.g;for(var C=r.g,p=0;10>p;p++){if((r.h[C]&128)===0){r.g=C+1,Ge(r);break t}C++}r.l=!0,An()}break;case 1:r=r.g,r.g+=8,Ge(r);break;case 2:r.h!=2?Ye(r):(C=r.g.j(),r=r.g,r.g+=C,Ge(r));break;case 5:r=r.g,r.g+=4,Ge(r);break;case 3:C=r.i;do{if(!ri(r)){r.j=!0,Zi(Error("Unmatched start-group tag: stream EOF"));break}if(r.h==4){r.i!=C&&(r.j=!0,Zi(Error("Unmatched end-group tag")));break}Ye(r)}while(1);break;default:r.j=!0,Oi(r.h,r.l)}}function _i(r,C,p){r.N||(r=$e(r.g.h,p,r.g.g),(p=C.o)?p.push(r):C.o=[r])}function fi(r,C,p){var s=r.g.i,a=r.g.j(),u=r.g.g+a;if(r.g.i=u,p(C,r),p=u-r.g.g,p!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(a+" bytes, instead read "+(a-p)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return r.g.g=u,r.g.i=s,C}function li(r,C,p){var s=r.g.j();for(s=r.g.g+s;r.g.g<s;)p.push(C.call(r.g))}var Gi=[];function Re(){this.h=[],this.i=0,this.g=new di}function ke(r,C){C.length!==0&&(r.h.push(C),r.i+=C.length)}function ve(r,C,p){te(r.g,8*C+2),te(r.g,p.length),ke(r,r.g.end()),ke(r,p)}var ae=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function ci(r,C){Object.isFrozen(r)||(ae?r[ae]|=C:r.g!==void 0?r.g|=C:Object.defineProperties(r,{g:{value:C,configurable:!0,writable:!0,enumerable:!1}}))}function le(r){if(!r)return 0;var C;return ae?C=r[ae]:C=r.g,C==null?0:C}function ee(r){return Array.isArray(r)&&ci(r,1),r}function wi(r){if(!Array.isArray(r))throw Error("cannot mark non-array as immutable");ci(r,2)}function Ze(r){return r!==null&&typeof r=="object"&&r.constructor===Object}function Jt(r){switch(typeof r){case"number":return isFinite(r)?r:String(r);case"object":return si&&r!=null&&r instanceof Uint8Array?rn(r):r;default:return r}}function vt(r,C){if(r!=null)return Array.isArray(r)||Ze(r)?Ie(r,C):C(r)}function Ie(r,C){if(Array.isArray(r)){for(var p=Array(r.length),s=0;s<r.length;s++)p[s]=vt(r[s],C);return le(r)&1&&ee(p),p}p={};for(s in r)p[s]=vt(r[s],C);return p}var ze;function ce(r,C,p){var s=ze;ze=null,r||(r=s),s=this.constructor.ba,r||(r=s?[s]:[]),this.j=(s?0:-1)-(this.constructor.$||0),this.m=this.g=null,this.h=r;t:{if(s=this.h.length,r=s-1,s&&(s=this.h[r],Ze(s))){this.l=r-this.j,this.i=s;break t}C!==void 0&&-1<C?(this.l=Math.max(C,r+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(p)for(C=0;C<p.length;C++)r=p[C],r<this.l?(r+=this.j,(s=this.h[r])?ee(s):this.h[r]=Ce):(lt(this),(s=this.i[r])?ee(s):this.i[r]=Ce)}var Ce=Object.freeze(ee([]));function lt(r){var C=r.l+r.j;r.h[C]||(r.i=r.h[C]={})}function It(r,C,p){return C===-1?null:(p===void 0?0:p)||C>=r.l?r.i?r.i[C]:void 0:r.h[C+r.j]}function ht(r,C,p){p=p===void 0?!0:p;var s=s===void 0?!1:s,a=It(r,C,s);return a==null&&(a=Ce),a===Ce?(a=ee([]),Ht(r,C,a,s)):p&&Array.isArray(a)&&le(a)&2&&(a=a.slice(),Ht(r,C,a,s)),a}function ie(r){var C=ht(r,3,!1);if(r.m||(r.m={}),!r.m[3]){for(var p=0;p<C.length;p++)C[p]=+C[p];r.m[3]=!0}return C}function pe(r,C,p){return r=It(r,C),r==null?p:r}function he(r,C,p){return r=It(r,C),r=r==null?r:+r,r==null?p===void 0?0:p:r}function Ht(r,C,p,s){(s===void 0?0:s)||C>=r.l?(lt(r),r.i[C]=p):r.h[C+r.j]=p}function ye(r,C,p){if(p===-1)return null;r.g||(r.g={});var s=r.g[p];if(s)return s;var a=It(r,p,!1);return a==null?s:(C=new C(a),r.g[p]=C)}function Ee(r,C,p){r.g||(r.g={});var s=r.g[p];if(!s){var a=ht(r,p,!1);s=[];for(var u=Array.isArray(a)?!!(le(a)&2):!1,Z=0;Z<a.length;Z++)s[Z]=new C(a[Z]),u&&wi(s[Z].h);u&&(wi(s),Object.freeze(s)),r.g[p]=s}return s}function ai(r,C,p,s,a){var u=Ee(r,s,C);p=p||new s,r=ht(r,C),a!=null?(u.splice(a,0,p),r.splice(a,0,Ii(p))):(u.push(p),r.push(Ii(p)))}ce.prototype.toJSON=function(){var r=Ii(this);return Ie(r,Jt)};function Ii(r){if(r.g)for(var C in r.g){var p=r.g[C];if(Array.isArray(p))for(var s=0;s<p.length;s++)p[s]&&Ii(p[s]);else p&&Ii(p)}return r.h}ce.prototype.toString=function(){return Ii(this).toString()};function Fi(r,C){if(r=r.o){ke(C,C.g.end());for(var p=0;p<r.length;p++)ke(C,r[p])}}function Li(r){var C=r[0];switch(r.length){case 2:var p=r[1];return function(Y,N,U){return C(Y,N,U,p)};case 3:var s=r[1],a=r[2];return function(Y,N,U){return C(Y,N,U,s,a)};case 4:var u=r[1],Z=r[2],w=r[3];return function(Y,N,U){return C(Y,N,U,u,Z,w)};default:throw Error("unsupported number of parameters, expected [2-4], got "+r.length)}}function Ke(r,C,p){for(;ri(C)&&C.h!=4;){var s=C.i,a=p[s];if(a){if(Array.isArray(a)&&(a=p[s]=Li(a)),!a(C,r,s)){s=C,a=r;var u=s.l;Ye(s),_i(s,a,u)}}else s=C,a=r,u=s.l,Ye(s),_i(s,a,u)}return r}function Ci(r,C){var p=new Re;if(C(r,p),r=p.i+p.g.length(),r===0)p=new Uint8Array(0);else{r=new Uint8Array(r);for(var s=p.h,a=s.length,u=C=0;u<a;u++){var Z=s[u];Z.length!==0&&(r.set(Z,C),C+=Z.length)}s=p.g,a=s.h,a!==0&&(r.set(s.g.subarray(0,a),C),s.h=0),p.h=[r],p=r}return p}function Tn(r,C,p){if(Gi.length){var s=Gi.pop();r&&(xe(s.g,r),s.i=-1,s.h=-1),r=s}else r=new ii(r);try{return p(new C,r)}finally{C=r.g,C.h=null,C.m=0,C.i=0,C.g=0,C.l=!1,C.u=!1,r.i=-1,r.h=-1,r.j=!1,100>Gi.length&&Gi.push(r)}}function ui(r,C,p){if(C=It(C,p),C!=null){te(r.g,8*p+5),r=r.g;var s=C;s=(p=0>s?1:0)?-s:s,s===0?0<1/s?ne=Xe=0:(Xe=0,ne=2147483648):isNaN(s)?(Xe=0,ne=2147483647):34028234663852886e22<s?(Xe=0,ne=(p<<31|2139095040)>>>0):11754943508222875e-54>s?(s=Math.round(s/Math.pow(2,-149)),Xe=0,ne=(p<<31|s)>>>0):(C=Math.floor(Math.log(s)/Math.LN2),s*=Math.pow(2,-C),s=Math.round(8388608*s),16777216<=s&&++C,Xe=0,ne=(p<<31|C+127<<23|s&8388607)>>>0),p=ne,Se(r,p>>>0&255),Se(r,p>>>8&255),Se(r,p>>>16&255),Se(r,p>>>24&255)}}function Qe(r,C,p){return r.h!==5?!1:(Ht(C,p,r.g.o()),!0)}function zi(r,C,p){return r.h!==5&&r.h!==2?!1:(C=ht(C,p),r.h==2?li(r,Dt.prototype.o,C):C.push(r.g.o()),!0)}function ln(r,C,p){return r.h!==0?!1:(Ht(C,p,$t(r.g)),!0)}function ti(r,C,p){return r.h!==0?!1:(Ht(C,p,r.g.j()),!0)}function Hn(r,C,p){if(r.h!==2)return!1;var s=r.g.j();r=r.g;var a=r.g;r.g+=s,Ge(r),r=r.h;var u;if(Si)(u=Xn)||(u=Xn=new TextDecoder("utf-8",{fatal:!1})),u=u.decode(r.subarray(a,a+s));else{s=a+s;for(var Z=[],w=null,Y,N,U;a<s;)Y=r[a++],128>Y?Z.push(Y):224>Y?a>=s?Z.push(65533):(N=r[a++],194>Y||(N&192)!==128?(a--,Z.push(65533)):Z.push((Y&31)<<6|N&63)):240>Y?a>=s-1?Z.push(65533):(N=r[a++],(N&192)!==128||Y===224&&160>N||Y===237&&160<=N||((u=r[a++])&192)!==128?(a--,Z.push(65533)):Z.push((Y&15)<<12|(N&63)<<6|u&63)):244>=Y?a>=s-2?Z.push(65533):(N=r[a++],(N&192)!==128||(Y<<28)+(N-144)>>30!==0||((u=r[a++])&192)!==128||((U=r[a++])&192)!==128?(a--,Z.push(65533)):(Y=(Y&7)<<18|(N&63)<<12|(u&63)<<6|U&63,Y-=65536,Z.push((Y>>10&1023)+55296,(Y&1023)+56320))):Z.push(65533),8192<=Z.length&&(w=sn(w,Z),Z.length=0);u=sn(w,Z)}return Ht(C,p,u),!0}function mi(r,C,p,s,a){if(r.h!==2)return!1;r=fi(r,new s,a);var u=u===void 0?!1:u;return C.g||(C.g={}),s=r&&Ii(r),C.g[p]=r,Ht(C,p,s,u),!0}function Ki(r,C,p,s,a){return r.h!==2?!1:(r=fi(r,new s,a),ai(C,p,r,s,void 0),!0)}function un(r,C,p){return r.h!==0&&r.h!==2?!1:(C=ht(C,p),r.h==2?li(r,Dt.prototype.j,C):C.push(r.g.j()),!0)}function Nn(r,C,p){return r.h!==0?!1:(Ht(C,p,$t(r.g)),!0)}function Vi(r){ce.call(this,r,-1,eo)}var mn;rt(Vi,ce),Vi.prototype.getRows=function(){return It(this,1)},Vi.prototype.getCols=function(){return It(this,2)},Vi.prototype.getPackedDataList=function(){return ie(this)},Vi.prototype.getLayout=function(){return pe(this,4,0)};function to(r,C){return Ke(r,C,mn||(mn={1:ti,2:ti,3:zi,4:Nn}))}var eo=[3];function hn(r){ce.call(this,r)}var yn;rt(hn,ce);function A(r,C){var p=It(r,1);if(p!=null&&p!=null){te(C.g,8);var s=C.g;if(0<=p)te(s,p);else{for(var a=0;9>a;a++)Se(s,p&127|128),p>>=7;Se(s,1)}}ui(C,r,2),s=It(r,3),s!=null&&ve(C,3,Zn(s)),s=It(r,4),s!=null&&ve(C,4,Zn(s)),Fi(r,C)}function X(r,C){return Ke(r,C,yn||(yn={1:ti,2:Qe,3:Hn,4:Hn}))}function R(r){ce.call(this,r,-1,Ct)}var k;rt(R,ce),R.prototype.addClassification=function(r,C){return ai(this,1,r,hn,C),this};function $(r,C){return Ke(r,C,k||(k={1:[Ki,hn,X]}))}var Ct=[1];function q(r){ce.call(this,r)}var at;rt(q,ce);function Zt(r,C){ui(C,r,1),ui(C,r,2),ui(C,r,3),ui(C,r,4),ui(C,r,5),Fi(r,C)}function St(r,C){return Ke(r,C,at||(at={1:Qe,2:Qe,3:Qe,4:Qe,5:Qe}))}function Et(r){ce.call(this,r,-1,zt)}var kt;rt(Et,ce);function re(r,C){return Ke(r,C,kt||(kt={1:[Ki,q,St]}))}var zt=[1];function Yt(r){ce.call(this,r)}var Ut;rt(Yt,ce);function oe(r,C){ui(C,r,1),ui(C,r,2),ui(C,r,3),ui(C,r,4),ui(C,r,5);var p=It(r,6);if(p!=null&&p!=null){te(C.g,48);var s=C.g,a=p;p=0>a,a=Math.abs(a);var u=a>>>0;for(a=Math.floor((a-u)/4294967296),a>>>=0,p&&(a=~a>>>0,u=(~u>>>0)+1,4294967295<u&&(u=0,a++,4294967295<a&&(a=0))),ne=u,Xe=a,p=ne,u=Xe;0<u||127<p;)Se(s,p&127|128),p=(p>>>7|u<<25)>>>0,u>>>=7;Se(s,p)}Fi(r,C)}function be(r,C){return Ke(r,C,Ut||(Ut={1:Qe,2:Qe,3:Qe,4:Qe,5:Qe,6:ln}))}function fe(r){ce.call(this,r,-1,b)}var Ve;rt(fe,ce),fe.prototype.getVertexType=function(){return pe(this,1,0)},fe.prototype.getPrimitiveType=function(){return pe(this,2,0)},fe.prototype.getVertexBufferList=function(){return ie(this)},fe.prototype.getIndexBufferList=function(){return ht(this,4)};function De(r,C){return Ke(r,C,Ve||(Ve={1:Nn,2:Nn,3:zi,4:un}))}var b=[3,4];function f(r){ce.call(this,r)}var W;rt(f,ce),f.prototype.getMesh=function(){return ye(this,fe,1)},f.prototype.getPoseTransformMatrix=function(){return ye(this,Vi,2)};function M(r,C){return Ke(r,C,W||(W={1:[mi,fe,De],2:[mi,Vi,to]}))}var Q=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],tt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],D=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],st=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],mt=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],g=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],B=[].concat(y(Q),y(tt),y(D),y(st),y(mt),y(g));function v(r,C,p){if(p=r.createShader(p===0?r.VERTEX_SHADER:r.FRAGMENT_SHADER),r.shaderSource(p,C),r.compileShader(p),!r.getShaderParameter(p,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+r.getShaderInfoLog(p));return p}function x(r){return Ee(r,hn,1).map(function(C){return{index:pe(C,1,0),score:he(C,2),label:It(C,3)!=null?pe(C,3,""):void 0,displayName:It(C,4)!=null?pe(C,4,""):void 0}})}function J(r){return{x:he(r,1),y:he(r,2),z:he(r,3),visibility:It(r,4)!=null?he(r,4):void 0}}function O(r){return Ee(Tn(r,Et,re),q,1).map(J)}function E(r,C){this.h=r,this.g=C,this.l=0}function gt(r,C,p){return ot(r,C),typeof r.g.canvas.transferToImageBitmap=="function"?Promise.resolve(r.g.canvas.transferToImageBitmap()):p?Promise.resolve(r.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(r.g.canvas):(r.i===void 0&&(r.i=document.createElement("canvas")),new Promise(function(s){r.i.height=r.g.canvas.height,r.i.width=r.g.canvas.width,r.i.getContext("2d",{}).drawImage(r.g.canvas,0,0,r.g.canvas.width,r.g.canvas.height),s(r.i)}))}function ot(r,C){var p=r.g;if(r.m===void 0){var s=v(p,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),a=v(p,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),u=p.createProgram();if(p.attachShader(u,s),p.attachShader(u,a),p.linkProgram(u),!p.getProgramParameter(u,p.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+p.getProgramInfoLog(u));s=r.m=u,p.useProgram(s),a=p.getUniformLocation(s,"sampler0"),r.j={I:p.getAttribLocation(s,"aVertex"),H:p.getAttribLocation(s,"aTex"),ca:a},r.s=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,r.s),p.enableVertexAttribArray(r.j.I),p.vertexAttribPointer(r.j.I,2,p.FLOAT,!1,0,0),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),p.STATIC_DRAW),p.bindBuffer(p.ARRAY_BUFFER,null),r.o=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,r.o),p.enableVertexAttribArray(r.j.H),p.vertexAttribPointer(r.j.H,2,p.FLOAT,!1,0,0),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),p.STATIC_DRAW),p.bindBuffer(p.ARRAY_BUFFER,null),p.uniform1i(a,0)}s=r.j,p.useProgram(r.m),p.canvas.width=C.width,p.canvas.height=C.height,p.viewport(0,0,C.width,C.height),p.activeTexture(p.TEXTURE0),r.h.bindTexture2d(C.glName),p.enableVertexAttribArray(s.I),p.bindBuffer(p.ARRAY_BUFFER,r.s),p.vertexAttribPointer(s.I,2,p.FLOAT,!1,0,0),p.enableVertexAttribArray(s.H),p.bindBuffer(p.ARRAY_BUFFER,r.o),p.vertexAttribPointer(s.H,2,p.FLOAT,!1,0,0),p.bindFramebuffer(p.DRAW_FRAMEBUFFER?p.DRAW_FRAMEBUFFER:p.FRAMEBUFFER,null),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.colorMask(!0,!0,!0,!0),p.drawArrays(p.TRIANGLE_FAN,0,4),p.disableVertexAttribArray(s.I),p.disableVertexAttribArray(s.H),p.bindBuffer(p.ARRAY_BUFFER,null),r.h.bindTexture2d(0)}function yt(r){this.g=r}var Bt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Qt(r,C){return C+r}function wt(r,C){window[r]=C}function bt(r){var C=document.createElement("script");return C.setAttribute("src",r),C.setAttribute("crossorigin","anonymous"),new Promise(function(p){C.addEventListener("load",function(){p()},!1),C.addEventListener("error",function(){p()},!1),document.body.appendChild(C)})}function Rt(){return ft(function(r){switch(r.g){case 1:return r.m=2,_(r,WebAssembly.instantiate(Bt),4);case 4:r.g=3,r.m=0;break;case 2:return r.m=0,r.j=null,r.return(!1);case 3:return r.return(!0)}})}function Ft(r){if(this.g=r,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=r&&r.locateFile||Qt,typeof window=="object")var C=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")C=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=C,r.options){C=m(Object.keys(r.options));for(var p=C.next();!p.done;p=C.next()){p=p.value;var s=r.options[p].default;s!==void 0&&(this.j[p]=typeof s=="function"?s():s)}}}e=Ft.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Nt(r){var C,p,s,a,u,Z,w,Y,N,U,j;return ft(function(et){switch(et.g){case 1:return r.R?(C=r.g.files===void 0?[]:typeof r.g.files=="function"?r.g.files(r.j):r.g.files,_(et,Rt(),2)):et.return();case 2:if(p=et.h,typeof window=="object")return wt("createMediapipeSolutionsWasm",{locateFile:r.locateFile}),wt("createMediapipeSolutionsPackedAssets",{locateFile:r.locateFile}),Z=C.filter(function(it){return it.data!==void 0}),w=C.filter(function(it){return it.data===void 0}),Y=Promise.all(Z.map(function(it){var ut=V(r,it.url);if(it.path!==void 0){var pt=it.path;ut=ut.then(function(At){return r.overrideFile(pt,At),Promise.resolve(At)})}return ut})),N=Promise.all(w.map(function(it){return it.simd===void 0||it.simd&&p||!it.simd&&!p?bt(r.locateFile(it.url,r.S)):Promise.resolve()})).then(function(){var it,ut,pt;return ft(function(At){if(At.g==1)return it=window.createMediapipeSolutionsWasm,ut=window.createMediapipeSolutionsPackedAssets,pt=r,_(At,it(ut),2);pt.h=At.h,At.g=0})}),U=function(){return ft(function(it){return r.g.graph&&r.g.graph.url?it=_(it,V(r,r.g.graph.url),0):(it.g=0,it=void 0),it})}(),_(et,Promise.all([N,Y,U]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return s=C.filter(function(it){return it.simd===void 0||it.simd&&p||!it.simd&&!p}).map(function(it){return r.locateFile(it.url,r.S)}),importScripts.apply(null,y(s)),a=r,_(et,createMediapipeSolutionsWasm(Module),6);case 6:a.h=et.h,r.l=new OffscreenCanvas(1,1),r.h.canvas=r.l,u=r.h.GL.createContext(r.l,{antialias:!1,alpha:!1,aa:typeof WebGL2RenderingContext!="undefined"?2:1}),r.h.GL.makeContextCurrent(u),et.g=4;break;case 7:if(r.l=document.createElement("canvas"),j=r.l.getContext("webgl2",{}),!j&&(j=r.l.getContext("webgl",{}),!j))return alert("Failed to create WebGL canvas context when passing video frame."),et.return();r.D=j,r.h.canvas=r.l,r.h.createContext(r.l,!0,!0,{});case 4:r.i=new r.h.SolutionWasm,r.R=!1,et.g=0}})}function Mt(r){var C,p,s,a,u,Z,w,Y;return ft(function(N){if(N.g==1){if(r.g.graph&&r.g.graph.url&&r.P===r.g.graph.url)return N.return();if(r.o=!0,!r.g.graph||!r.g.graph.url){N.g=2;return}return r.P=r.g.graph.url,_(N,V(r,r.g.graph.url),3)}for(N.g!=2&&(C=N.h,r.i.loadGraph(C)),p=m(Object.keys(r.B)),s=p.next();!s.done;s=p.next())a=s.value,r.i.overrideFile(a,r.B[a]);if(r.B={},r.g.listeners)for(u=m(r.g.listeners),Z=u.next();!Z.done;Z=u.next())w=Z.value,T(r,w);Y=r.j,r.j={},r.setOptions(Y),N.g=0})}e.reset=function(){var r=this;return ft(function(C){r.i&&(r.i.reset(),r.m={},r.s={}),C.g=0})},e.setOptions=function(r,C){var p=this;if(C=C||this.g.options){for(var s=[],a=[],u={},Z=m(Object.keys(r)),w=Z.next();!w.done;u={K:u.K,L:u.L},w=Z.next()){var Y=w.value;Y in this.j&&this.j[Y]===r[Y]||(this.j[Y]=r[Y],w=C[Y],w!==void 0&&(w.onChange&&(u.K=w.onChange,u.L=r[Y],s.push(function(N){return function(){var U;return ft(function(j){if(j.g==1)return _(j,N.K(N.L),2);U=j.h,U===!0&&(p.o=!0),j.g=0})}}(u))),w.graphOptionXref&&(Y={valueNumber:w.type===1?r[Y]:0,valueBoolean:w.type===0?r[Y]:!1,valueString:w.type===2?r[Y]:""},w=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),w.graphOptionXref),Y),a.push(w))))}(s.length!==0||a.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(a),this.v=(this.v===void 0?[]:this.v).concat(s))}};function d(r){var C,p,s,a,u,Z,w;return ft(function(Y){switch(Y.g){case 1:if(!r.o)return Y.return();if(!r.v){Y.g=2;break}C=m(r.v),p=C.next();case 3:if(p.done){Y.g=5;break}return s=p.value,_(Y,s(),4);case 4:p=C.next(),Y.g=3;break;case 5:r.v=void 0;case 2:if(r.A){for(a=new r.h.GraphOptionChangeRequestList,u=m(r.A),Z=u.next();!Z.done;Z=u.next())w=Z.value,a.push_back(w);r.i.changeOptions(a),a.delete(),r.A=void 0}r.o=!1,Y.g=0}})}e.initialize=function(){var r=this;return ft(function(C){return C.g==1?_(C,Nt(r),2):C.g!=3?_(C,Mt(r),3):_(C,d(r),0)})};function V(r,C){var p,s;return ft(function(a){return C in r.F?a.return(r.F[C]):(p=r.locateFile(C,""),s=fetch(p).then(function(u){return u.arrayBuffer()}),r.F[C]=s,a.return(s))})}e.overrideFile=function(r,C){this.i?this.i.overrideFile(r,C):this.B[r]=C},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(r,C){var p=this,s,a,u,Z,w,Y,N,U,j;return ft(function(et){switch(et.g){case 1:return p.g.inputs?(s=1e3*(C==null?performance.now():C),_(et,p.C,2)):et.return();case 2:return _(et,p.initialize(),3);case 3:for(a=new p.h.PacketDataList,u=m(Object.keys(r)),Z=u.next();!Z.done;Z=u.next())if(w=Z.value,Y=p.g.inputs[w]){t:{var it=r[w];switch(Y.type){case"video":var ut=p.m[Y.stream];if(ut||(ut=new E(p.h,p.D),p.m[Y.stream]=ut),ut.l===0&&(ut.l=ut.h.createTexture()),typeof HTMLVideoElement!="undefined"&&it instanceof HTMLVideoElement)var pt=it.videoWidth,At=it.videoHeight;else typeof HTMLImageElement!="undefined"&&it instanceof HTMLImageElement?(pt=it.naturalWidth,At=it.naturalHeight):(pt=it.width,At=it.height);At={glName:ut.l,width:pt,height:At},pt=ut.g,pt.canvas.width=At.width,pt.canvas.height=At.height,pt.activeTexture(pt.TEXTURE0),ut.h.bindTexture2d(ut.l),pt.texImage2D(pt.TEXTURE_2D,0,pt.RGBA,pt.RGBA,pt.UNSIGNED_BYTE,it),ut.h.bindTexture2d(0),ut=At;break t;case"detections":for(ut=p.m[Y.stream],ut||(ut=new yt(p.h),p.m[Y.stream]=ut),ut.data||(ut.data=new ut.g.DetectionListData),ut.data.reset(it.length),At=0;At<it.length;++At){pt=it[At];var Vt=ut.data,Gt=Vt.setBoundingBox,_t=At,ue=pt.T,me=new Yt;if(Ht(me,1,ue.X),Ht(me,2,ue.Y),Ht(me,3,ue.height),Ht(me,4,ue.width),Ht(me,5,ue.rotation),Ht(me,6,ue.W),ue=Ci(me,oe),Gt.call(Vt,_t,ue),pt.O)for(Vt=0;Vt<pt.O.length;++Vt){me=pt.O[Vt];var je=!!me.visibility;Gt=ut.data,_t=Gt.addNormalizedLandmark,ue=At,me=Object.assign(Object.assign({},me),{visibility:je?me.visibility:0}),je=new q,Ht(je,1,me.x),Ht(je,2,me.y),Ht(je,3,me.z),me.visibility&&Ht(je,4,me.visibility),me=Ci(je,Zt),_t.call(Gt,ue,me)}if(pt.M)for(Vt=0;Vt<pt.M.length;++Vt)Gt=ut.data,_t=Gt.addClassification,ue=At,me=pt.M[Vt],je=new hn,Ht(je,2,me.score),me.index&&Ht(je,1,me.index),me.label&&Ht(je,3,me.label),me.displayName&&Ht(je,4,me.displayName),me=Ci(je,A),_t.call(Gt,ue,me)}ut=ut.data;break t;default:ut={}}}switch(N=ut,U=Y.stream,Y.type){case"video":a.pushTexture2d(Object.assign(Object.assign({},N),{stream:U,timestamp:s}));break;case"detections":j=N,j.stream=U,j.timestamp=s,a.pushDetectionList(j);break;default:throw Error("Unknown input config type: '"+Y.type+"'")}}return p.i.send(a),_(et,p.C,4);case 4:a.delete(),et.g=0}})};function S(r,C,p){var s,a,u,Z,w,Y,N,U,j,et,it,ut,pt,At;return ft(function(Vt){switch(Vt.g){case 1:if(!p)return Vt.return(C);for(s={},a=0,u=m(Object.keys(p)),Z=u.next();!Z.done;Z=u.next())w=Z.value,Y=p[w],typeof Y!="string"&&Y.type==="texture"&&C[Y.stream]!==void 0&&++a;1<a&&(r.G=!1),N=m(Object.keys(p)),Z=N.next();case 2:if(Z.done){Vt.g=4;break}if(U=Z.value,j=p[U],typeof j=="string")return pt=s,At=U,_(Vt,F(r,U,C[j]),14);if(et=C[j.stream],j.type==="detection_list"){if(et){for(var Gt=et.getRectList(),_t=et.getLandmarksList(),ue=et.getClassificationsList(),me=[],je=0;je<Gt.size();++je){var Pi=Tn(Gt.get(je),Yt,be);Pi={T:{X:he(Pi,1),Y:he(Pi,2),height:he(Pi,3),width:he(Pi,4),rotation:he(Pi,5,0),W:pe(Pi,6,0)},O:O(_t.get(je)),M:x(Tn(ue.get(je),R,$))},me.push(Pi)}Gt=me}else Gt=[];s[U]=Gt,Vt.g=7;break}if(j.type==="proto_list"){if(et){for(Gt=Array(et.size()),_t=0;_t<et.size();_t++)Gt[_t]=et.get(_t);et.delete()}else Gt=[];s[U]=Gt,Vt.g=7;break}if(et===void 0){Vt.g=3;break}if(j.type==="float_list"){s[U]=et,Vt.g=7;break}if(j.type==="proto"){s[U]=et,Vt.g=7;break}if(j.type!=="texture")throw Error("Unknown output config type: '"+j.type+"'");return it=r.s[U],it||(it=new E(r.h,r.D),r.s[U]=it),_(Vt,gt(it,et,r.G),13);case 13:ut=Vt.h,s[U]=ut;case 7:j.transform&&s[U]&&(s[U]=j.transform(s[U])),Vt.g=3;break;case 14:pt[At]=Vt.h;case 3:Z=N.next(),Vt.g=2;break;case 4:return Vt.return(s)}})}function F(r,C,p){var s;return ft(function(a){return typeof p=="number"||p instanceof Uint8Array||p instanceof r.h.Uint8BlobList?a.return(p):p instanceof r.h.Texture2dDataOut?(s=r.s[C],s||(s=new E(r.h,r.D),r.s[C]=s),a.return(gt(s,p,r.G))):a.return(void 0)})}function T(r,C){for(var p=C.name||"$",s=[].concat(y(C.wants)),a=new r.h.StringList,u=m(C.wants),Z=u.next();!Z.done;Z=u.next())a.push_back(Z.value);u=r.h.PacketListener.implement({onResults:function(w){for(var Y={},N=0;N<C.wants.length;++N)Y[s[N]]=w.get(N);var U=r.listeners[p];U&&(r.C=S(r,Y,C.outs).then(function(j){j=U(j);for(var et=0;et<C.wants.length;++et){var it=Y[s[et]];typeof it=="object"&&it.hasOwnProperty&&it.hasOwnProperty("delete")&&it.delete()}j&&(r.C=j)}))}}),r.i.attachMultiListener(a,u),a.delete()}e.onResults=function(r,C){this.listeners[C||"$"]=r},Tt("Solution",Ft),Tt("OptionType",{BOOL:0,NUMBER:1,Z:2,0:"BOOL",1:"NUMBER",2:"STRING"});function c(r){return r.map(h)}function h(r){r=Tn(r,f,M);var C=r.getMesh();if(!C)return r;var p=new Float32Array(C.getVertexBufferList());C.getVertexBufferList=function(){return p};var s=new Uint32Array(C.getIndexBufferList());return C.getIndexBufferList=function(){return s},r}function G(r){var C=this;r=r||{},this.g=new Ft({locateFile:r.locateFile,files:[{url:"holistic_solution_packed_assets_loader.js"},{simd:!1,url:"holistic_solution_wasm_bin.js"},{simd:!0,url:"holistic_solution_simd_wasm_bin.js"}],graph:{url:"holistic.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:"left_hand_landmarks right_hand_landmarks face_landmarks pose_landmarks world_landmarks segmentation_mask image_transformed multi_face_geometry".split(" "),outs:{image:{type:"texture",stream:"image_transformed"},leftHandLandmarks:{type:"proto",stream:"left_hand_landmarks",transform:O},rightHandLandmarks:{type:"proto",stream:"right_hand_landmarks",transform:O},faceLandmarks:{type:"proto",stream:"face_landmarks",transform:O},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:O},ea:{type:"proto",stream:"world_landmarks",transform:O},segmentationMask:{type:"texture",stream:"segmentation_mask"},multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:c}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,default:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(p){var s,a,u,Z;return ft(function(w){if(w.g==1){switch(s="",p){case 1:s="pose_landmark_full.tflite";break;case 2:s="pose_landmark_heavy.tflite";break;default:s="pose_landmark_lite.tflite"}return a="third_party/mediapipe/modules/pose_landmark/"+s,u=C.g.locateFile(s,""),_(w,fetch(u),3)}return w.g!=2?_(w,w.h.arrayBuffer(),2):(Z=w.h,C.g.overrideFile(a,Z),_(w,C.g.reset(),0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},refineFaceLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineFaceLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}})}e=G.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(r){this.g.onResults(r)},e.initialize=function(){var r=this;return ft(function(C){return _(C,r.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(r){var C=this;return ft(function(p){return _(p,C.g.send(r),0)})},e.setOptions=function(r){this.g.setOptions(r)},Tt("Holistic",G),Tt("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),Tt("FACEMESH_LIPS",Q),Tt("FACEMESH_LEFT_EYE",tt),Tt("FACEMESH_LEFT_EYEBROW",D),Tt("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),Tt("FACEMESH_RIGHT_EYE",st),Tt("FACEMESH_RIGHT_EYEBROW",mt),Tt("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),Tt("FACEMESH_FACE_OVAL",g),Tt("FACEMESH_CONTOURS",B),Tt("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Tt("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Tt("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Tt("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Tt("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Tt("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Tt("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Tt("matrixDataToMatrix",function(r){for(var C=r.getCols(),p=r.getRows(),s=r.getPackedDataList(),a=[],u=0;u<p;u++)a.push(Array(C));for(u=0;u<p;u++)for(var Z=0;Z<C;Z++){var w=r.getLayout()===1?u*C+Z:Z*p+u;a[u][Z]=s[w]}return a}),Tt("VERSION","0.5.1635989137")}).call(lI);const cI={};(function(){var e;function t(c){var h=0;return function(){return h<c.length?{done:!1,value:c[h++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,G){return c==Array.prototype||c==Object.prototype||(c[h]=G.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var h=0;h<c.length;++h){var G=c[h];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var o=n(this);function l(c,h){if(h)t:{var G=o;c=c.split(".");for(var r=0;r<c.length-1;r++){var C=c[r];if(!(C in G))break t;G=G[C]}c=c[c.length-1],r=G[c],h=h(r),h!=r&&h!=null&&i(G,c,{configurable:!0,writable:!0,value:h})}}l("Symbol",function(c){function h(p){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return new G(r+(p||"")+"_"+C++,p)}function G(p,s){this.g=p,i(this,"description",{configurable:!0,writable:!0,value:s})}if(c)return c;G.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",C=0;return h}),l("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var h="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),G=0;G<h.length;G++){var r=o[h[G]];typeof r=="function"&&typeof r.prototype[c]!="function"&&i(r.prototype,c,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return c});function I(c){return c={next:c},c[Symbol.iterator]=function(){return this},c}function m(c){var h=typeof Symbol!="undefined"&&Symbol.iterator&&c[Symbol.iterator];return h?h.call(c):{next:t(c)}}function y(c){if(!(c instanceof Array)){c=m(c);for(var h,G=[];!(h=c.next()).done;)G.push(h.value);c=G}return c}var H=typeof Object.create=="function"?Object.create:function(c){function h(){}return h.prototype=c,new h},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var nt={a:!0},dt={};try{dt.__proto__=nt,K=dt.a;break t}catch{}K=!1}L=K?function(c,h){if(c.__proto__=h,c.__proto__!==h)throw new TypeError(c+" is not extensible");return c}:null}var P=L;function rt(c,h){if(c.prototype=H(h.prototype),c.prototype.constructor=c,P)P(c,h);else for(var G in h)if(G!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(h,G);r&&Object.defineProperty(c,G,r)}else c[G]=h[G];c.na=h.prototype}function Xt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Wt(c){if(c.l)throw new TypeError("Generator is already running");c.l=!0}Xt.prototype.s=function(c){this.h=c};function xt(c,h){c.j={da:h,ea:!0},c.g=c.o||c.u}Xt.prototype.return=function(c){this.j={return:c},this.g=this.u};function _(c,h,G){return c.g=G,{value:h}}function qe(c){this.g=new Xt,this.h=c}function ni(c,h){Wt(c.g);var G=c.g.i;return G?we(c,"return"in G?G.return:function(r){return{value:r,done:!0}},h,c.g.return):(c.g.return(h),qt(c))}function we(c,h,G,r){try{var C=h.call(c.g.i,G);if(!(C instanceof Object))throw new TypeError("Iterator result "+C+" is not an object");if(!C.done)return c.g.l=!1,C;var p=C.value}catch(s){return c.g.i=null,xt(c.g,s),qt(c)}return c.g.i=null,r.call(c.g,p),qt(c)}function qt(c){for(;c.g.g;)try{var h=c.h(c.g);if(h)return c.g.l=!1,{value:h.value,done:!1}}catch(G){c.g.h=void 0,xt(c.g,G)}if(c.g.l=!1,c.g.j){if(h=c.g.j,c.g.j=null,h.ea)throw h.da;return{value:h.return,done:!0}}return{value:void 0,done:!0}}function Bn(c){this.next=function(h){return Wt(c.g),c.g.i?h=we(c,c.g.i.next,h,c.g.s):(c.g.s(h),h=qt(c)),h},this.throw=function(h){return Wt(c.g),c.g.i?h=we(c,c.g.i.throw,h,c.g.s):(xt(c.g,h),h=qt(c)),h},this.return=function(h){return ni(c,h)},this[Symbol.iterator]=function(){return this}}function ge(c){function h(r){return c.next(r)}function G(r){return c.throw(r)}return new Promise(function(r,C){function p(s){s.done?r(s.value):Promise.resolve(s.value).then(h,G).then(p,C)}p(c.next())})}function ft(c){return ge(new Bn(new qe(c)))}l("Promise",function(c){function h(s){this.h=0,this.i=void 0,this.g=[],this.s=!1;var a=this.j();try{s(a.resolve,a.reject)}catch(u){a.reject(u)}}function G(){this.g=null}function r(s){return s instanceof h?s:new h(function(a){a(s)})}if(c)return c;G.prototype.h=function(s){if(this.g==null){this.g=[];var a=this;this.i(function(){a.l()})}this.g.push(s)};var C=o.setTimeout;G.prototype.i=function(s){C(s,0)},G.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var a=0;a<s.length;++a){var u=s[a];s[a]=null;try{u()}catch(Z){this.j(Z)}}}this.g=null},G.prototype.j=function(s){this.i(function(){throw s})},h.prototype.j=function(){function s(Z){return function(w){u||(u=!0,Z.call(a,w))}}var a=this,u=!1;return{resolve:s(this.D),reject:s(this.l)}},h.prototype.D=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof h)this.H(s);else{t:switch(typeof s){case"object":var a=s!=null;break t;case"function":a=!0;break t;default:a=!1}a?this.A(s):this.o(s)}},h.prototype.A=function(s){var a=void 0;try{a=s.then}catch(u){this.l(u);return}typeof a=="function"?this.I(a,s):this.o(s)},h.prototype.l=function(s){this.u(2,s)},h.prototype.o=function(s){this.u(1,s)},h.prototype.u=function(s,a){if(this.h!=0)throw Error("Cannot settle("+s+", "+a+"): Promise already settled in state"+this.h);this.h=s,this.i=a,this.h===2&&this.G(),this.B()},h.prototype.G=function(){var s=this;C(function(){if(s.C()){var a=o.console;typeof a!="undefined"&&a.error(s.i)}},1)},h.prototype.C=function(){if(this.s)return!1;var s=o.CustomEvent,a=o.Event,u=o.dispatchEvent;return typeof u=="undefined"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof a=="function"?s=new a("unhandledrejection",{cancelable:!0}):(s=o.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,u(s))},h.prototype.B=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)p.h(this.g[s]);this.g=null}};var p=new G;return h.prototype.H=function(s){var a=this.j();s.M(a.resolve,a.reject)},h.prototype.I=function(s,a){var u=this.j();try{s.call(a,u.resolve,u.reject)}catch(Z){u.reject(Z)}},h.prototype.then=function(s,a){function u(N,U){return typeof N=="function"?function(j){try{Z(N(j))}catch(et){w(et)}}:U}var Z,w,Y=new h(function(N,U){Z=N,w=U});return this.M(u(s,Z),u(a,w)),Y},h.prototype.catch=function(s){return this.then(void 0,s)},h.prototype.M=function(s,a){function u(){switch(Z.h){case 1:s(Z.i);break;case 2:a(Z.i);break;default:throw Error("Unexpected state: "+Z.h)}}var Z=this;this.g==null?p.h(u):this.g.push(u),this.s=!0},h.resolve=r,h.reject=function(s){return new h(function(a,u){u(s)})},h.race=function(s){return new h(function(a,u){for(var Z=m(s),w=Z.next();!w.done;w=Z.next())r(w.value).M(a,u)})},h.all=function(s){var a=m(s),u=a.next();return u.done?r([]):new h(function(Z,w){function Y(j){return function(et){N[j]=et,U--,U==0&&Z(N)}}var N=[],U=0;do N.push(void 0),U++,r(u.value).M(Y(N.length-1),w),u=a.next();while(!u.done)})},h});function Ni(c,h){c instanceof String&&(c+="");var G=0,r=!1,C={next:function(){if(!r&&G<c.length){var p=G++;return{value:h(p,c[p]),done:!1}}return r=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}var Jn=typeof Object.assign=="function"?Object.assign:function(c,h){for(var G=1;G<arguments.length;G++){var r=arguments[G];if(r)for(var C in r)Object.prototype.hasOwnProperty.call(r,C)&&(c[C]=r[C])}return c};l("Object.assign",function(c){return c||Jn}),l("Object.is",function(c){return c||function(h,G){return h===G?h!==0||1/h===1/G:h!==h&&G!==G}}),l("Array.prototype.includes",function(c){return c||function(h,G){var r=this;r instanceof String&&(r=String(r));var C=r.length;for(G=G||0,0>G&&(G=Math.max(G+C,0));G<C;G++){var p=r[G];if(p===h||Object.is(p,h))return!0}return!1}}),l("String.prototype.includes",function(c){return c||function(h,G){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(h,G||0)!==-1}}),l("Array.prototype.keys",function(c){return c||function(){return Ni(this,function(h){return h})}});var He=this||self;function Tt(c,h){c=c.split(".");var G=He;c[0]in G||typeof G.execScript=="undefined"||G.execScript("var "+c[0]);for(var r;c.length&&(r=c.shift());)c.length||h===void 0?G[r]&&G[r]!==Object.prototype[r]?G=G[r]:G=G[r]={}:G[r]=h}function Je(){throw Error("Invalid UTF8")}function Zi(c,h){return h=String.fromCharCode.apply(null,h),c==null?h:c+h}var Oi,An=typeof TextDecoder!="undefined",sn,Xn=typeof TextEncoder!="undefined",Si={},Mi=null;function Fn(c){var h;h===void 0&&(h=0),ei(),h=Si[h];for(var G=Array(Math.floor(c.length/3)),r=h[64]||"",C=0,p=0;C<c.length-2;C+=3){var s=c[C],a=c[C+1],u=c[C+2],Z=h[s>>2];s=h[(s&3)<<4|a>>4],a=h[(a&15)<<2|u>>6],u=h[u&63],G[p++]=Z+s+a+u}switch(Z=0,u=r,c.length-C){case 2:Z=c[C+1],u=h[(Z&15)<<2]||r;case 1:c=c[C],G[p]=h[c>>2]+h[(c&3)<<4|Z>>4]+u+r}return G.join("")}function Zn(c){var h=c.length,G=3*h/4;G%3?G=Math.floor(G):"=.".indexOf(c[h-1])!=-1&&(G="=.".indexOf(c[h-2])!=-1?G-2:G-1);var r=new Uint8Array(G),C=0;return oi(c,function(p){r[C++]=p}),C!==G?r.subarray(0,C):r}function oi(c,h){function G(u){for(;r<c.length;){var Z=c.charAt(r++),w=Mi[Z];if(w!=null)return w;if(!/^[\s\xa0]*$/.test(Z))throw Error("Unknown base64 encoding at char: "+Z)}return u}ei();for(var r=0;;){var C=G(-1),p=G(0),s=G(64),a=G(64);if(a===64&&C===-1)break;h(C<<2|p>>4),s!=64&&(h(p<<4&240|s>>2),a!=64&&h(s<<6&192|a))}}function ei(){if(!Mi){Mi={};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),h=["+/=","+/","-_=","-_.","-_"],G=0;5>G;G++){var r=c.concat(h[G].split(""));Si[G]=r;for(var C=0;C<r.length;C++){var p=r[C];Mi[p]===void 0&&(Mi[p]=C)}}}}var rn=typeof Uint8Array=="function";function ji(c){return rn&&c!=null&&c instanceof Uint8Array}var Ae;function Me(c){if(this.L=c,c!==null&&c.length===0)throw Error("ByteString should be constructed with non-empty values")}var si=typeof Uint8Array.prototype.slice=="function",de=0,Fe=0;function yi(c,h){if(c.constructor===Uint8Array)return c;if(c.constructor===ArrayBuffer)return new Uint8Array(c);if(c.constructor===Array)return new Uint8Array(c);if(c.constructor===String)return Zn(c);if(c.constructor===Me)return!h&&(h=c.L)&&h.constructor===Uint8Array?h:(h=c.L,h=h==null||ji(h)?h:typeof h=="string"?Zn(h):null,(c=c.L=h)?new Uint8Array(c):Ae||(Ae=new Uint8Array(0)));if(c instanceof Uint8Array)return new Uint8Array(c.buffer,c.byteOffset,c.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function $e(c,h){return Error("Invalid wire type: "+c+" (at position "+h+")")}function ne(){return Error("Failed to read varint, encoding is invalid.")}function Xe(c,h){h=h===void 0?{}:h,h=h.v===void 0?!1:h.v,this.h=null,this.g=this.i=this.j=0,this.v=h,c&&Ue(this,c)}function Ue(c,h){c.h=yi(h,c.v),c.j=0,c.i=c.h.length,c.g=c.j}Xe.prototype.reset=function(){this.g=this.j};function Dt(c){if(c.g>c.i)throw Error("Tried to read past the end of the data "+c.g+" > "+c.i)}function xe(c){var h=c.h,G=h[c.g],r=G&127;if(128>G)return c.g+=1,Dt(c),r;if(G=h[c.g+1],r|=(G&127)<<7,128>G)return c.g+=2,Dt(c),r;if(G=h[c.g+2],r|=(G&127)<<14,128>G)return c.g+=3,Dt(c),r;if(G=h[c.g+3],r|=(G&127)<<21,128>G)return c.g+=4,Dt(c),r;if(G=h[c.g+4],c.g+=5,r|=(G&15)<<28,128>G)return Dt(c),r;if(128<=h[c.g++]&&128<=h[c.g++]&&128<=h[c.g++]&&128<=h[c.g++]&&128<=h[c.g++])throw ne();return Dt(c),r}var $t=[];function Ge(){this.g=[]}Ge.prototype.length=function(){return this.g.length},Ge.prototype.end=function(){var c=this.g;return this.g=[],c};function Te(c,h){for(;127<h;)c.g.push(h&127|128),h>>>=7;c.g.push(h)}function di(c){var h={},G=h.W===void 0?!1:h.W;this.l={v:h.v===void 0?!1:h.v},this.W=G,h=this.l,$t.length?(G=$t.pop(),h&&(G.v=h.v),c&&Ue(G,c),c=G):c=new Xe(c,h),this.g=c,this.j=this.g.g,this.h=this.i=-1}di.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function Se(c){var h=c.g;if(h.g==h.i)return!1;c.j=c.g.g;var G=xe(c.g)>>>0;if(h=G>>>3,G&=7,!(0<=G&&5>=G))throw $e(G,c.j);if(1>h)throw Error("Invalid field number: "+h+" (at position "+c.j+")");return c.i=h,c.h=G,!0}function te(c){switch(c.h){case 0:if(c.h!=0)te(c);else t:{c=c.g;for(var h=c.g,G=h+10;h<G;)if((c.h[h++]&128)===0){c.g=h,Dt(c);break t}throw ne()}break;case 1:c=c.g,c.g+=8,Dt(c);break;case 2:c.h!=2?te(c):(h=xe(c.g)>>>0,c=c.g,c.g+=h,Dt(c));break;case 5:c=c.g,c.g+=4,Dt(c);break;case 3:h=c.i;do{if(!Se(c))throw Error("Unmatched start-group tag: stream EOF");if(c.h==4){if(c.i!=h)throw Error("Unmatched end-group tag");break}te(c)}while(1);break;default:throw $e(c.h,c.j)}}var ii=[];function ri(){this.i=[],this.h=0,this.g=new Ge}function Ye(c,h){h.length!==0&&(c.i.push(h),c.h+=h.length)}function _i(c,h){if(h=h.ba){Ye(c,c.g.end());for(var G=0;G<h.length;G++)Ye(c,h[G])}}var fi=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function li(c,h){Object.isFrozen(c)||(fi?c[fi]|=h:c.N!==void 0?c.N|=h:Object.defineProperties(c,{N:{value:h,configurable:!0,writable:!0,enumerable:!1}}))}function Gi(c){var h;return fi?h=c[fi]:h=c.N,h==null?0:h}function Re(c){return li(c,1),c}function ke(c){return Array.isArray(c)?!!(Gi(c)&2):!1}function ve(c){if(!Array.isArray(c))throw Error("cannot mark non-array as immutable");li(c,2)}function ae(c){return c!==null&&typeof c=="object"&&!Array.isArray(c)&&c.constructor===Object}var ci=Object.freeze(Re([]));function le(c){if(ke(c.m))throw Error("Cannot mutate an immutable Message")}var ee=typeof Symbol!="undefined"&&typeof Symbol.hasInstance!="undefined";function wi(c){return{value:c,configurable:!1,writable:!1,enumerable:!1}}function Ze(c,h,G){return h===-1?null:h>=c.i?c.g?c.g[h]:void 0:(G===void 0?0:G)&&c.g&&(G=c.g[h],G!=null)?G:c.m[h+c.h]}function Jt(c,h,G,r){r=r===void 0?!1:r,le(c),h<c.i&&!r?c.m[h+c.h]=G:(c.g||(c.g=c.m[c.i+c.h]={}))[h]=G}function vt(c,h,G,r){G=G===void 0?!0:G,r=r===void 0?!1:r;var C=Ze(c,h,r);return C==null&&(C=ci),ke(c.m)?G&&(ve(C),Object.freeze(C)):(C===ci||ke(C))&&(C=Re(C.slice()),Jt(c,h,C,r)),C}function Ie(c,h,G){return c=Ze(c,h),c=c==null?c:+c,c==null?G===void 0?0:G:c}function ze(c,h,G,r){c.j||(c.j={});var C=ke(c.m),p=c.j[G];if(!p){r=vt(c,G,!0,r===void 0?!1:r),p=[],C=C||ke(r);for(var s=0;s<r.length;s++)p[s]=new h(r[s]),C&&ve(p[s].m);C&&(ve(p),Object.freeze(p)),c.j[G]=p}return p}function ce(c,h,G,r,C){var p=p===void 0?!1:p;return le(c),p=ze(c,G,h,p),G=r||new G,c=vt(c,h),C!=null?(p.splice(C,0,G),c.splice(C,0,G.m)):(p.push(G),c.push(G.m)),G}function Ce(c,h){return c=Ze(c,h),c==null?0:c}function lt(c,h){return c=Ze(c,h),c==null?"":c}function It(c){switch(typeof c){case"number":return isFinite(c)?c:String(c);case"object":if(c&&!Array.isArray(c)){if(ji(c))return Fn(c);if(c instanceof Me){var h=c.L;return h=h==null||typeof h=="string"?h:rn&&h instanceof Uint8Array?Fn(h):null,(c.L=h)||""}}}return c}function ht(c){var h=he;return h=h===void 0?Ht:h,pe(c,h)}function ie(c,h){if(c!=null){if(Array.isArray(c))c=pe(c,h);else if(ae(c)){var G={},r;for(r in c)G[r]=ie(c[r],h);c=G}else c=h(c);return c}}function pe(c,h){for(var G=c.slice(),r=0;r<G.length;r++)G[r]=ie(G[r],h);return Array.isArray(c)&&Gi(c)&1&&Re(G),G}function he(c){return c&&typeof c=="object"&&c.toJSON?c.toJSON():(c=It(c),Array.isArray(c)?ht(c):c)}function Ht(c){return ji(c)?new Uint8Array(c):c}function ye(c,h,G){c||(c=Ee),Ee=null;var r=this.constructor.h;c||(c=r?[r]:[]),this.h=(r?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=c;t:{if(r=this.m.length,c=r-1,r&&(r=this.m[c],ae(r))){this.i=c-this.h,this.g=r;break t}h!==void 0&&-1<h?(this.i=Math.max(h,c+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(G)for(h=0;h<G.length;h++)if(c=G[h],c<this.i)c+=this.h,(r=this.m[c])?Array.isArray(r)&&Re(r):this.m[c]=ci;else{r=this.g||(this.g=this.m[this.i+this.h]={});var C=r[c];C?Array.isArray(C)&&Re(C):r[c]=ci}}ye.prototype.toJSON=function(){return ht(this.m)},ye.prototype.toString=function(){return this.m.toString()};var Ee;function ai(){ye.apply(this,arguments)}if(rt(ai,ye),ee){var Ii={};Object.defineProperties(ai,(Ii[Symbol.hasInstance]=wi(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Ii))}function Fi(c,h,G){if(G){var r={},C;for(C in G){var p=G[C],s=p.ha;s||(r.F=p.la||p.fa.P,p.aa?(r.U=ln(p.aa),s=function(a){return function(u,Z,w){return a.F(u,Z,w,a.U)}}(r)):p.ca?(r.T=ti(p.X.g,p.ca),s=function(a){return function(u,Z,w){return a.F(u,Z,w,a.T)}}(r)):s=r.F,p.ha=s),s(h,c,p.X),r={F:r.F,U:r.U,T:r.T}}}_i(h,c)}var Li=Symbol();function Ke(c,h,G){return c[Li]||(c[Li]=function(r,C){return h(r,C,G)})}function Ci(c){var h=c[Li];if(!h){var G=A(c);h=function(r,C){return X(r,C,G)},c[Li]=h}return h}function Tn(c){var h=c.aa;if(h)return Ci(h);if(h=c.ka)return Ke(c.X.g,h,c.ca)}function ui(c){var h=Tn(c),G=c.X,r=c.fa.O;return h?function(C,p){return r(C,p,G,h)}:function(C,p){return r(C,p,G)}}function Qe(c,h,G,r,C,p){c=c();var s=0;for(c.length&&typeof c[0]!="number"&&(G(h,c[0]),s++);s<c.length;){G=c[s++];for(var a=s+1;a<c.length&&typeof c[a]!="number";)a++;var u=c[s++];switch(a-=s,a){case 0:r(h,G,u);break;case 1:r(h,G,u,c[s++]);break;case 2:C(h,G,u,c[s++],c[s++]);break;case 3:a=c[s++];var Z=c[s++],w=c[s++];Array.isArray(w)?C(h,G,u,a,Z,w):p(h,G,u,a,Z,w);break;case 4:p(h,G,u,c[s++],c[s++],c[s++],c[s++]);break;default:throw Error("unexpected number of binary field arguments: "+a)}}return h}var zi=Symbol();function ln(c){var h=c[zi];if(!h){var G=Vi(c);h=function(r,C){return k(r,C,G)},c[zi]=h}return h}function ti(c,h){var G=c[zi];return G||(G=function(r,C){return Fi(r,C,h)},c[zi]=G),G}var Hn=Symbol();function mi(c,h){c.push(h)}function Ki(c,h,G){c.push(h,G.P)}function un(c,h,G,r,C){var p=ln(C),s=G.P;c.push(h,function(a,u,Z){return s(a,u,Z,r,p)})}function Nn(c,h,G,r,C,p){var s=ti(r,p),a=G.P;c.push(h,function(u,Z,w){return a(u,Z,w,r,s)})}function Vi(c){var h=c[Hn];return h||Qe(c,c[Hn]=[],mi,Ki,un,Nn)}var mn=Symbol();function to(c,h){c[0]=h}function eo(c,h,G,r){var C=G.O;c[h]=r?function(p,s,a){return C(p,s,a,r)}:C}function hn(c,h,G,r,C,p){var s=G.O,a=Ci(C);c[h]=function(u,Z,w){return s(u,Z,w,r,a,p)}}function yn(c,h,G,r,C,p,s){var a=G.O,u=Ke(r,C,p);c[h]=function(Z,w,Y){return a(Z,w,Y,r,u,s)}}function A(c){var h=c[mn];return h||Qe(c,c[mn]={},to,eo,hn,yn)}function X(c,h,G){for(;Se(h)&&h.h!=4;){var r=h.i,C=G[r];if(!C){var p=G[0];p&&(p=p[r])&&(C=G[r]=ui(p))}if((!C||!C(h,c,r))&&(C=h,r=c,p=C.j,te(C),!C.W)){var s=C.g.h;C=C.g.g,C=p===C?Ae||(Ae=new Uint8Array(0)):si?s.slice(p,C):new Uint8Array(s.subarray(p,C)),(p=r.ba)?p.push(C):r.ba=[C]}}return c}function R(c,h,G){if(ii.length){var r=ii.pop();c&&(Ue(r.g,c),r.i=-1,r.h=-1),c=r}else c=new di(c);try{return X(new h,c,A(G))}finally{h=c.g,h.h=null,h.j=0,h.i=0,h.g=0,h.v=!1,c.i=-1,c.h=-1,100>ii.length&&ii.push(c)}}function k(c,h,G){for(var r=G.length,C=r%2==1,p=C?1:0;p<r;p+=2)(0,G[p+1])(h,c,G[p]);Fi(c,h,C?G[0]:void 0)}function $(c,h){var G=new ri;k(c,G,Vi(h)),Ye(G,G.g.end()),c=new Uint8Array(G.h),h=G.i;for(var r=h.length,C=0,p=0;p<r;p++){var s=h[p];c.set(s,C),C+=s.length}return G.i=[c],c}function Ct(c,h){return{O:c,P:h}}var q=Ct(function(c,h,G){if(c.h!==5)return!1;c=c.g;var r=c.h[c.g],C=c.h[c.g+1],p=c.h[c.g+2],s=c.h[c.g+3];return c.g+=4,Dt(c),C=(r<<0|C<<8|p<<16|s<<24)>>>0,c=2*(C>>31)+1,r=C>>>23&255,C&=8388607,Jt(h,G,r==255?C?NaN:1/0*c:r==0?c*Math.pow(2,-149)*C:c*Math.pow(2,r-150)*(C+Math.pow(2,23))),!0},function(c,h,G){if(h=Ze(h,G),h!=null){Te(c.g,8*G+5),c=c.g;var r=h;r=(G=0>r?1:0)?-r:r,r===0?0<1/r?de=Fe=0:(Fe=0,de=2147483648):isNaN(r)?(Fe=0,de=2147483647):34028234663852886e22<r?(Fe=0,de=(G<<31|2139095040)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),Fe=0,de=(G<<31|r)>>>0):(h=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-h),r=Math.round(8388608*r),16777216<=r&&++h,Fe=0,de=(G<<31|h+127<<23|r&8388607)>>>0),G=de,c.g.push(G>>>0&255),c.g.push(G>>>8&255),c.g.push(G>>>16&255),c.g.push(G>>>24&255)}}),at=Ct(function(c,h,G){if(c.h!==0)return!1;for(var r=c.g,C=128,p=0,s=c=0;4>s&&128<=C;s++)C=r.h[r.g++],Dt(r),p|=(C&127)<<7*s;if(128<=C&&(C=r.h[r.g++],Dt(r),p|=(C&127)<<28,c|=(C&127)>>4),128<=C)for(s=0;5>s&&128<=C;s++)C=r.h[r.g++],Dt(r),c|=(C&127)<<7*s+3;if(128>C)r=p>>>0,C=c>>>0,(c=C&2147483648)&&(r=~r+1>>>0,C=~C>>>0,r==0&&(C=C+1>>>0)),r=4294967296*C+(r>>>0);else throw ne();return Jt(h,G,c?-r:r),!0},function(c,h,G){if(h=Ze(h,G),h!=null&&h!=null){Te(c.g,8*G),c=c.g;var r=h;for(G=0>r,r=Math.abs(r),h=r>>>0,r=Math.floor((r-h)/4294967296),r>>>=0,G&&(r=~r>>>0,h=(~h>>>0)+1,4294967295<h&&(h=0,r++,4294967295<r&&(r=0))),de=h,Fe=r,G=de,h=Fe;0<h||127<G;)c.g.push(G&127|128),G=(G>>>7|h<<25)>>>0,h>>>=7;c.g.push(G)}}),Zt=Ct(function(c,h,G){return c.h!==0?!1:(Jt(h,G,xe(c.g)),!0)},function(c,h,G){if(h=Ze(h,G),h!=null&&h!=null)if(Te(c.g,8*G),c=c.g,G=h,0<=G)Te(c,G);else{for(h=0;9>h;h++)c.g.push(G&127|128),G>>=7;c.g.push(1)}}),St=Ct(function(c,h,G){if(c.h!==2)return!1;var r=xe(c.g)>>>0;c=c.g;var C=c.g;c.g+=r,Dt(c),c=c.h;var p;if(An)(p=Oi)||(p=Oi=new TextDecoder("utf-8",{fatal:!0})),p=p.decode(c.subarray(C,C+r));else{r=C+r;for(var s=[],a=null,u,Z,w;C<r;)u=c[C++],128>u?s.push(u):224>u?C>=r?Je():(Z=c[C++],194>u||(Z&192)!==128?(C--,Je()):s.push((u&31)<<6|Z&63)):240>u?C>=r-1?Je():(Z=c[C++],(Z&192)!==128||u===224&&160>Z||u===237&&160<=Z||((p=c[C++])&192)!==128?(C--,Je()):s.push((u&15)<<12|(Z&63)<<6|p&63)):244>=u?C>=r-2?Je():(Z=c[C++],(Z&192)!==128||(u<<28)+(Z-144)>>30!==0||((p=c[C++])&192)!==128||((w=c[C++])&192)!==128?(C--,Je()):(u=(u&7)<<18|(Z&63)<<12|(p&63)<<6|w&63,u-=65536,s.push((u>>10&1023)+55296,(u&1023)+56320))):Je(),8192<=s.length&&(a=Zi(a,s),s.length=0);p=Zi(a,s)}return Jt(h,G,p),!0},function(c,h,G){if(h=Ze(h,G),h!=null){var r=!1;if(r=r===void 0?!1:r,Xn){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(h))throw Error("Found an unpaired surrogate");h=(sn||(sn=new TextEncoder)).encode(h)}else{for(var C=0,p=new Uint8Array(3*h.length),s=0;s<h.length;s++){var a=h.charCodeAt(s);if(128>a)p[C++]=a;else{if(2048>a)p[C++]=a>>6|192;else{if(55296<=a&&57343>=a){if(56319>=a&&s<h.length){var u=h.charCodeAt(++s);if(56320<=u&&57343>=u){a=1024*(a-55296)+u-56320+65536,p[C++]=a>>18|240,p[C++]=a>>12&63|128,p[C++]=a>>6&63|128,p[C++]=a&63|128;continue}else s--}if(r)throw Error("Found an unpaired surrogate");a=65533}p[C++]=a>>12|224,p[C++]=a>>6&63|128}p[C++]=a&63|128}}h=p.subarray(0,C)}Te(c.g,8*G+2),Te(c.g,h.length),Ye(c,c.g.end()),Ye(c,h)}}),Et=Ct(function(c,h,G,r,C){if(c.h!==2)return!1;h=ce(h,G,r),G=c.g.i,r=xe(c.g)>>>0;var p=c.g.g+r,s=p-G;if(0>=s&&(c.g.i=p,C(h,c),s=p-c.g.g),s)throw Error("Message parsing ended unexpectedly. Expected to read "+(r+" bytes, instead read "+(r-s)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return c.g.g=p,c.g.i=G,!0},function(c,h,G,r,C){if(h=ze(h,r,G),h!=null)for(r=0;r<h.length;r++){var p=c;Te(p.g,8*G+2);var s=p.g.end();Ye(p,s),s.push(p.h),p=s,C(h[r],c),s=c;var a=p.pop();for(a=s.h+s.g.length()-a;127<a;)p.push(a&127|128),a>>>=7,s.h++;p.push(a),s.h++}});function kt(){ai.apply(this,arguments)}if(rt(kt,ai),ee){var re={};Object.defineProperties(kt,(re[Symbol.hasInstance]=wi(Object[Symbol.hasInstance]),re))}function zt(c){kt.call(this,c)}rt(zt,kt);function Yt(){return[1,Zt,2,q,3,St,4,St]}function Ut(c){kt.call(this,c,-1,be)}rt(Ut,kt),Ut.prototype.addClassification=function(c,h){return ce(this,1,zt,c,h),this};function oe(){return[1,Et,zt,Yt]}var be=[1];function fe(c){kt.call(this,c)}rt(fe,kt);function Ve(){return[1,q,2,q,3,q,4,q,5,q]}function De(c){kt.call(this,c,-1,f)}rt(De,kt);function b(){return[1,Et,fe,Ve]}var f=[1];function W(c){kt.call(this,c)}rt(W,kt);function M(){return[1,q,2,q,3,q,4,q,5,q,6,at]}var Q=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],tt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],D=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],st=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],mt=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],g=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],B=[].concat(y(Q),y(tt),y(D),y(st),y(mt),y(g));function v(c,h,G){if(G=c.createShader(G===0?c.VERTEX_SHADER:c.FRAGMENT_SHADER),c.shaderSource(G,h),c.compileShader(G),!c.getShaderParameter(G,c.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+c.getShaderInfoLog(G));return G}function x(c){return ze(c,zt,1).map(function(h){return{index:Ce(h,1),ga:Ie(h,2),label:Ze(h,3)!=null?lt(h,3):void 0,displayName:Ze(h,4)!=null?lt(h,4):void 0}})}function J(c){return{x:Ie(c,1),y:Ie(c,2),z:Ie(c,3),visibility:Ze(c,4)!=null?Ie(c,4):void 0}}function O(c,h){this.h=c,this.g=h,this.l=0}function E(c,h,G){return gt(c,h),typeof c.g.canvas.transferToImageBitmap=="function"?Promise.resolve(c.g.canvas.transferToImageBitmap()):G?Promise.resolve(c.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(c.g.canvas):(c.i===void 0&&(c.i=document.createElement("canvas")),new Promise(function(r){c.i.height=c.g.canvas.height,c.i.width=c.g.canvas.width,c.i.getContext("2d",{}).drawImage(c.g.canvas,0,0,c.g.canvas.width,c.g.canvas.height),r(c.i)}))}function gt(c,h){var G=c.g;if(c.o===void 0){var r=v(G,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),C=v(G,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),p=G.createProgram();if(G.attachShader(p,r),G.attachShader(p,C),G.linkProgram(p),!G.getProgramParameter(p,G.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+G.getProgramInfoLog(p));r=c.o=p,G.useProgram(r),C=G.getUniformLocation(r,"sampler0"),c.j={K:G.getAttribLocation(r,"aVertex"),J:G.getAttribLocation(r,"aTex"),ma:C},c.u=G.createBuffer(),G.bindBuffer(G.ARRAY_BUFFER,c.u),G.enableVertexAttribArray(c.j.K),G.vertexAttribPointer(c.j.K,2,G.FLOAT,!1,0,0),G.bufferData(G.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),G.STATIC_DRAW),G.bindBuffer(G.ARRAY_BUFFER,null),c.s=G.createBuffer(),G.bindBuffer(G.ARRAY_BUFFER,c.s),G.enableVertexAttribArray(c.j.J),G.vertexAttribPointer(c.j.J,2,G.FLOAT,!1,0,0),G.bufferData(G.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),G.STATIC_DRAW),G.bindBuffer(G.ARRAY_BUFFER,null),G.uniform1i(C,0)}r=c.j,G.useProgram(c.o),G.canvas.width=h.width,G.canvas.height=h.height,G.viewport(0,0,h.width,h.height),G.activeTexture(G.TEXTURE0),c.h.bindTexture2d(h.glName),G.enableVertexAttribArray(r.K),G.bindBuffer(G.ARRAY_BUFFER,c.u),G.vertexAttribPointer(r.K,2,G.FLOAT,!1,0,0),G.enableVertexAttribArray(r.J),G.bindBuffer(G.ARRAY_BUFFER,c.s),G.vertexAttribPointer(r.J,2,G.FLOAT,!1,0,0),G.bindFramebuffer(G.DRAW_FRAMEBUFFER?G.DRAW_FRAMEBUFFER:G.FRAMEBUFFER,null),G.clearColor(0,0,0,0),G.clear(G.COLOR_BUFFER_BIT),G.colorMask(!0,!0,!0,!0),G.drawArrays(G.TRIANGLE_FAN,0,4),G.disableVertexAttribArray(r.K),G.disableVertexAttribArray(r.J),G.bindBuffer(G.ARRAY_BUFFER,null),c.h.bindTexture2d(0)}function ot(c){this.g=c}var yt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Bt(c,h){return h+c}function Qt(c,h){window[c]=h}function wt(c){var h=document.createElement("script");return h.setAttribute("src",c),h.setAttribute("crossorigin","anonymous"),new Promise(function(G){h.addEventListener("load",function(){G()},!1),h.addEventListener("error",function(){G()},!1),document.body.appendChild(h)})}function bt(){return ft(function(c){switch(c.g){case 1:return c.o=2,_(c,WebAssembly.instantiate(yt),4);case 4:c.g=3,c.o=0;break;case 2:return c.o=0,c.j=null,c.return(!1);case 3:return c.return(!0)}})}function Rt(c){if(this.g=c,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=c&&c.locateFile||Bt,typeof window=="object")var h=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")h=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.$=h,c.options){h=m(Object.keys(c.options));for(var G=h.next();!G.done;G=h.next()){G=G.value;var r=c.options[G].default;r!==void 0&&(this.j[G]=typeof r=="function"?r():r)}}}e=Rt.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Ft(c){var h,G,r,C,p,s,a,u,Z,w,Y;return ft(function(N){switch(N.g){case 1:return c.Z?(h=c.g.files===void 0?[]:typeof c.g.files=="function"?c.g.files(c.j):c.g.files,_(N,bt(),2)):N.return();case 2:if(G=N.h,typeof window=="object")return Qt("createMediapipeSolutionsWasm",{locateFile:c.locateFile}),Qt("createMediapipeSolutionsPackedAssets",{locateFile:c.locateFile}),s=h.filter(function(U){return U.data!==void 0}),a=h.filter(function(U){return U.data===void 0}),u=Promise.all(s.map(function(U){var j=d(c,U.url);if(U.path!==void 0){var et=U.path;j=j.then(function(it){return c.overrideFile(et,it),Promise.resolve(it)})}return j})),Z=Promise.all(a.map(function(U){return U.simd===void 0||U.simd&&G||!U.simd&&!G?wt(c.locateFile(U.url,c.$)):Promise.resolve()})).then(function(){var U,j,et;return ft(function(it){if(it.g==1)return U=window.createMediapipeSolutionsWasm,j=window.createMediapipeSolutionsPackedAssets,et=c,_(it,U(j),2);et.h=it.h,it.g=0})}),w=function(){return ft(function(U){return c.g.graph&&c.g.graph.url?U=_(U,d(c,c.g.graph.url),0):(U.g=0,U=void 0),U})}(),_(N,Promise.all([Z,u,w]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return r=h.filter(function(U){return U.simd===void 0||U.simd&&G||!U.simd&&!G}).map(function(U){return c.locateFile(U.url,c.$)}),importScripts.apply(null,y(r)),C=c,_(N,createMediapipeSolutionsWasm(Module),6);case 6:C.h=N.h,c.l=new OffscreenCanvas(1,1),c.h.canvas=c.l,p=c.h.GL.createContext(c.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext!="undefined"?2:1}),c.h.GL.makeContextCurrent(p),N.g=4;break;case 7:if(c.l=document.createElement("canvas"),Y=c.l.getContext("webgl2",{}),!Y&&(Y=c.l.getContext("webgl",{}),!Y))return alert("Failed to create WebGL canvas context when passing video frame."),N.return();c.G=Y,c.h.canvas=c.l,c.h.createContext(c.l,!0,!0,{});case 4:c.i=new c.h.SolutionWasm,c.Z=!1,N.g=0}})}function Nt(c){var h,G,r,C,p,s,a,u;return ft(function(Z){if(Z.g==1){if(c.g.graph&&c.g.graph.url&&c.Y===c.g.graph.url)return Z.return();if(c.s=!0,!c.g.graph||!c.g.graph.url){Z.g=2;return}return c.Y=c.g.graph.url,_(Z,d(c,c.g.graph.url),3)}for(Z.g!=2&&(h=Z.h,c.i.loadGraph(h)),G=m(Object.keys(c.C)),r=G.next();!r.done;r=G.next())C=r.value,c.i.overrideFile(C,c.C[C]);if(c.C={},c.g.listeners)for(p=m(c.g.listeners),s=p.next();!s.done;s=p.next())a=s.value,F(c,a);u=c.j,c.j={},c.setOptions(u),Z.g=0})}e.reset=function(){var c=this;return ft(function(h){c.i&&(c.i.reset(),c.o={},c.u={}),h.g=0})},e.setOptions=function(c,h){var G=this;if(h=h||this.g.options){for(var r=[],C=[],p={},s=m(Object.keys(c)),a=s.next();!a.done;p={R:p.R,S:p.S},a=s.next()){var u=a.value;u in this.j&&this.j[u]===c[u]||(this.j[u]=c[u],a=h[u],a!==void 0&&(a.onChange&&(p.R=a.onChange,p.S=c[u],r.push(function(Z){return function(){var w;return ft(function(Y){if(Y.g==1)return _(Y,Z.R(Z.S),2);w=Y.h,w===!0&&(G.s=!0),Y.g=0})}}(p))),a.graphOptionXref&&(u={valueNumber:a.type===1?c[u]:0,valueBoolean:a.type===0?c[u]:!1,valueString:a.type===2?c[u]:""},a=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),a.graphOptionXref),u),C.push(a))))}(r.length!==0||C.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(C),this.A=(this.A===void 0?[]:this.A).concat(r))}};function Mt(c){var h,G,r,C,p,s,a;return ft(function(u){switch(u.g){case 1:if(!c.s)return u.return();if(!c.A){u.g=2;break}h=m(c.A),G=h.next();case 3:if(G.done){u.g=5;break}return r=G.value,_(u,r(),4);case 4:G=h.next(),u.g=3;break;case 5:c.A=void 0;case 2:if(c.B){for(C=new c.h.GraphOptionChangeRequestList,p=m(c.B),s=p.next();!s.done;s=p.next())a=s.value,C.push_back(a);c.i.changeOptions(C),C.delete(),c.B=void 0}c.s=!1,u.g=0}})}e.initialize=function(){var c=this;return ft(function(h){return h.g==1?_(h,Ft(c),2):h.g!=3?_(h,Nt(c),3):_(h,Mt(c),0)})};function d(c,h){var G,r;return ft(function(C){return h in c.H?C.return(c.H[h]):(G=c.locateFile(h,""),r=fetch(G).then(function(p){return p.arrayBuffer()}),c.H[h]=r,C.return(r))})}e.overrideFile=function(c,h){this.i?this.i.overrideFile(c,h):this.C[c]=h},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(c,h){var G=this,r,C,p,s,a,u,Z,w,Y;return ft(function(N){switch(N.g){case 1:return G.g.inputs?(r=1e3*(h==null?performance.now():h),_(N,G.D,2)):N.return();case 2:return _(N,G.initialize(),3);case 3:for(C=new G.h.PacketDataList,p=m(Object.keys(c)),s=p.next();!s.done;s=p.next())if(a=s.value,u=G.g.inputs[a]){t:{var U=c[a];switch(u.type){case"video":var j=G.o[u.stream];if(j||(j=new O(G.h,G.G),G.o[u.stream]=j),j.l===0&&(j.l=j.h.createTexture()),typeof HTMLVideoElement!="undefined"&&U instanceof HTMLVideoElement)var et=U.videoWidth,it=U.videoHeight;else typeof HTMLImageElement!="undefined"&&U instanceof HTMLImageElement?(et=U.naturalWidth,it=U.naturalHeight):(et=U.width,it=U.height);it={glName:j.l,width:et,height:it},et=j.g,et.canvas.width=it.width,et.canvas.height=it.height,et.activeTexture(et.TEXTURE0),j.h.bindTexture2d(j.l),et.texImage2D(et.TEXTURE_2D,0,et.RGBA,et.RGBA,et.UNSIGNED_BYTE,U),j.h.bindTexture2d(0),j=it;break t;case"detections":for(j=G.o[u.stream],j||(j=new ot(G.h),G.o[u.stream]=j),j.data||(j.data=new j.g.DetectionListData),j.data.reset(U.length),it=0;it<U.length;++it){et=U[it];var ut=j.data,pt=ut.setBoundingBox,At=it,Vt=et.boundingBox,Gt=new W;if(Jt(Gt,1,Vt.xCenter),Jt(Gt,2,Vt.yCenter),Jt(Gt,3,Vt.height),Jt(Gt,4,Vt.width),Jt(Gt,5,Vt.rotation),Jt(Gt,6,Vt.rectId),Vt=$(Gt,M),pt.call(ut,At,Vt),et.landmarks)for(ut=0;ut<et.landmarks.length;++ut){Gt=et.landmarks[ut];var _t=!!Gt.visibility;pt=j.data,At=pt.addNormalizedLandmark,Vt=it,Gt=Object.assign(Object.assign({},Gt),{visibility:_t?Gt.visibility:0}),_t=new fe,Jt(_t,1,Gt.x),Jt(_t,2,Gt.y),Jt(_t,3,Gt.z),Gt.visibility&&Jt(_t,4,Gt.visibility),Gt=$(_t,Ve),At.call(pt,Vt,Gt)}if(et.V)for(ut=0;ut<et.V.length;++ut)pt=j.data,At=pt.addClassification,Vt=it,Gt=et.V[ut],_t=new zt,Jt(_t,2,Gt.ga),Gt.index&&Jt(_t,1,Gt.index),Gt.label&&Jt(_t,3,Gt.label),Gt.displayName&&Jt(_t,4,Gt.displayName),Gt=$(_t,Yt),At.call(pt,Vt,Gt)}j=j.data;break t;default:j={}}}switch(Z=j,w=u.stream,u.type){case"video":C.pushTexture2d(Object.assign(Object.assign({},Z),{stream:w,timestamp:r}));break;case"detections":Y=Z,Y.stream=w,Y.timestamp=r,C.pushDetectionList(Y);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return G.i.send(C),_(N,G.D,4);case 4:C.delete(),N.g=0}})};function V(c,h,G){var r,C,p,s,a,u,Z,w,Y,N,U,j,et,it;return ft(function(ut){switch(ut.g){case 1:if(!G)return ut.return(h);for(r={},C=0,p=m(Object.keys(G)),s=p.next();!s.done;s=p.next())a=s.value,u=G[a],typeof u!="string"&&u.type==="texture"&&h[u.stream]!==void 0&&++C;1<C&&(c.I=!1),Z=m(Object.keys(G)),s=Z.next();case 2:if(s.done){ut.g=4;break}if(w=s.value,Y=G[w],typeof Y=="string")return et=r,it=w,_(ut,S(c,w,h[Y]),14);if(N=h[Y.stream],Y.type==="detection_list"){if(N){for(var pt=N.getRectList(),At=N.getLandmarksList(),Vt=N.getClassificationsList(),Gt=[],_t=0;_t<pt.size();++_t){var ue=R(pt.get(_t),W,M);ue={boundingBox:{xCenter:Ie(ue,1),yCenter:Ie(ue,2),height:Ie(ue,3),width:Ie(ue,4),rotation:Ie(ue,5,0),rectId:Ce(ue,6)},landmarks:ze(R(At.get(_t),De,b),fe,1).map(J),V:x(R(Vt.get(_t),Ut,oe))},Gt.push(ue)}pt=Gt}else pt=[];r[w]=pt,ut.g=7;break}if(Y.type==="proto_list"){if(N){for(pt=Array(N.size()),At=0;At<N.size();At++)pt[At]=N.get(At);N.delete()}else pt=[];r[w]=pt,ut.g=7;break}if(N===void 0){ut.g=3;break}if(Y.type==="float_list"){r[w]=N,ut.g=7;break}if(Y.type==="proto"){r[w]=N,ut.g=7;break}if(Y.type!=="texture")throw Error("Unknown output config type: '"+Y.type+"'");return U=c.u[w],U||(U=new O(c.h,c.G),c.u[w]=U),_(ut,E(U,N,c.I),13);case 13:j=ut.h,r[w]=j;case 7:Y.transform&&r[w]&&(r[w]=Y.transform(r[w])),ut.g=3;break;case 14:et[it]=ut.h;case 3:s=Z.next(),ut.g=2;break;case 4:return ut.return(r)}})}function S(c,h,G){var r;return ft(function(C){return typeof G=="number"||G instanceof Uint8Array||G instanceof c.h.Uint8BlobList?C.return(G):G instanceof c.h.Texture2dDataOut?(r=c.u[h],r||(r=new O(c.h,c.G),c.u[h]=r),C.return(E(r,G,c.I))):C.return(void 0)})}function F(c,h){for(var G=h.name||"$",r=[].concat(y(h.wants)),C=new c.h.StringList,p=m(h.wants),s=p.next();!s.done;s=p.next())C.push_back(s.value);p=c.h.PacketListener.implement({onResults:function(a){for(var u={},Z=0;Z<h.wants.length;++Z)u[r[Z]]=a.get(Z);var w=c.listeners[G];w&&(c.D=V(c,u,h.outs).then(function(Y){Y=w(Y);for(var N=0;N<h.wants.length;++N){var U=u[r[N]];typeof U=="object"&&U.hasOwnProperty&&U.hasOwnProperty("delete")&&U.delete()}Y&&(c.D=Y)}))}}),c.i.attachMultiListener(C,p),C.delete()}e.onResults=function(c,h){this.listeners[h||"$"]=c},Tt("Solution",Rt),Tt("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"});function T(c){var h=this;c=c||{};var G={url:"face_detection_short.binarypb"},r={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Rt({locateFile:c.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:G,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(C){var p,s,a,u,Z,w;return ft(function(Y){switch(Y.g){case 1:p=C==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"],s=m(p),a=s.next();case 2:if(a.done){Y.g=4;break}return u=a.value,Z="third_party/mediapipe/modules/face_detection/"+u,_(Y,d(h.g,u),5);case 5:w=Y.h,h.g.overrideFile(Z,w),a=s.next(),Y.g=2;break;case 4:return G.url=C==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",r.graphOptionXref.calculatorName=C==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",Y.return(!0)}})}},minDetectionConfidence:r}})}e=T.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(c){this.g.onResults(c)},e.initialize=function(){var c=this;return ft(function(h){return _(h,c.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(c){var h=this;return ft(function(G){return _(G,h.g.send(c),0)})},e.setOptions=function(c){this.g.setOptions(c)},Tt("FaceDetection",T),Tt("FACEDETECTION_LIPS",Q),Tt("FACEDETECTION_LEFT_EYE",tt),Tt("FACEDETECTION_LEFT_EYEBROW",D),Tt("FACEDETECTION_RIGHT_EYE",st),Tt("FACEDETECTION_RIGHT_EYEBROW",mt),Tt("FACEDETECTION_FACE_OVAL",g),Tt("FACEDETECTION_CONTOURS",B),Tt("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Tt("VERSION","0.4.1646425229")}).call(cI);const gI={};(function(){var e;function t(b){var f=0;return function(){return f<b.length?{done:!1,value:b[f++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,f,W){return b==Array.prototype||b==Object.prototype||(b[f]=W.value),b};function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var f=0;f<b.length;++f){var W=b[f];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var o=n(this);function l(b,f){if(f)t:{var W=o;b=b.split(".");for(var M=0;M<b.length-1;M++){var Q=b[M];if(!(Q in W))break t;W=W[Q]}b=b[b.length-1],M=W[b],f=f(M),f!=M&&f!=null&&i(W,b,{configurable:!0,writable:!0,value:f})}}l("Symbol",function(b){function f(tt){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new W(M+(tt||"")+"_"+Q++,tt)}function W(tt,D){this.g=tt,i(this,"description",{configurable:!0,writable:!0,value:D})}if(b)return b;W.prototype.toString=function(){return this.g};var M="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Q=0;return f}),l("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var f="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),W=0;W<f.length;W++){var M=o[f[W]];typeof M=="function"&&typeof M.prototype[b]!="function"&&i(M.prototype,b,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return b});function I(b){return b={next:b},b[Symbol.iterator]=function(){return this},b}function m(b){var f=typeof Symbol!="undefined"&&Symbol.iterator&&b[Symbol.iterator];return f?f.call(b):{next:t(b)}}function y(b){if(!(b instanceof Array)){b=m(b);for(var f,W=[];!(f=b.next()).done;)W.push(f.value);b=W}return b}var H=typeof Object.create=="function"?Object.create:function(b){function f(){}return f.prototype=b,new f},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var nt={a:!0},dt={};try{dt.__proto__=nt,K=dt.a;break t}catch{}K=!1}L=K?function(b,f){if(b.__proto__=f,b.__proto__!==f)throw new TypeError(b+" is not extensible");return b}:null}var P=L;function rt(b,f){if(b.prototype=H(f.prototype),b.prototype.constructor=b,P)P(b,f);else for(var W in f)if(W!="prototype")if(Object.defineProperties){var M=Object.getOwnPropertyDescriptor(f,W);M&&Object.defineProperty(b,W,M)}else b[W]=f[W];b.ea=f.prototype}function Xt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Wt(b){if(b.l)throw new TypeError("Generator is already running");b.l=!0}Xt.prototype.o=function(b){this.h=b};function xt(b,f){b.j={U:f,V:!0},b.g=b.m||b.s}Xt.prototype.return=function(b){this.j={return:b},this.g=this.s};function _(b,f,W){return b.g=W,{value:f}}function qe(b){this.g=new Xt,this.h=b}function ni(b,f){Wt(b.g);var W=b.g.i;return W?we(b,"return"in W?W.return:function(M){return{value:M,done:!0}},f,b.g.return):(b.g.return(f),qt(b))}function we(b,f,W,M){try{var Q=f.call(b.g.i,W);if(!(Q instanceof Object))throw new TypeError("Iterator result "+Q+" is not an object");if(!Q.done)return b.g.l=!1,Q;var tt=Q.value}catch(D){return b.g.i=null,xt(b.g,D),qt(b)}return b.g.i=null,M.call(b.g,tt),qt(b)}function qt(b){for(;b.g.g;)try{var f=b.h(b.g);if(f)return b.g.l=!1,{value:f.value,done:!1}}catch(W){b.g.h=void 0,xt(b.g,W)}if(b.g.l=!1,b.g.j){if(f=b.g.j,b.g.j=null,f.V)throw f.U;return{value:f.return,done:!0}}return{value:void 0,done:!0}}function Bn(b){this.next=function(f){return Wt(b.g),b.g.i?f=we(b,b.g.i.next,f,b.g.o):(b.g.o(f),f=qt(b)),f},this.throw=function(f){return Wt(b.g),b.g.i?f=we(b,b.g.i.throw,f,b.g.o):(xt(b.g,f),f=qt(b)),f},this.return=function(f){return ni(b,f)},this[Symbol.iterator]=function(){return this}}function ge(b,f){return f=new Bn(new qe(f)),P&&b.prototype&&P(f,b.prototype),f}function ft(b,f){b instanceof String&&(b+="");var W=0,M=!1,Q={next:function(){if(!M&&W<b.length){var tt=W++;return{value:f(tt,b[tt]),done:!1}}return M=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}var Ni=typeof Object.assign=="function"?Object.assign:function(b,f){for(var W=1;W<arguments.length;W++){var M=arguments[W];if(M)for(var Q in M)Object.prototype.hasOwnProperty.call(M,Q)&&(b[Q]=M[Q])}return b};l("Object.assign",function(b){return b||Ni}),l("Promise",function(b){function f(D){this.h=0,this.i=void 0,this.g=[],this.o=!1;var st=this.j();try{D(st.resolve,st.reject)}catch(mt){st.reject(mt)}}function W(){this.g=null}function M(D){return D instanceof f?D:new f(function(st){st(D)})}if(b)return b;W.prototype.h=function(D){if(this.g==null){this.g=[];var st=this;this.i(function(){st.l()})}this.g.push(D)};var Q=o.setTimeout;W.prototype.i=function(D){Q(D,0)},W.prototype.l=function(){for(;this.g&&this.g.length;){var D=this.g;this.g=[];for(var st=0;st<D.length;++st){var mt=D[st];D[st]=null;try{mt()}catch(g){this.j(g)}}}this.g=null},W.prototype.j=function(D){this.i(function(){throw D})},f.prototype.j=function(){function D(g){return function(B){mt||(mt=!0,g.call(st,B))}}var st=this,mt=!1;return{resolve:D(this.C),reject:D(this.l)}},f.prototype.C=function(D){if(D===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(D instanceof f)this.F(D);else{t:switch(typeof D){case"object":var st=D!=null;break t;case"function":st=!0;break t;default:st=!1}st?this.u(D):this.m(D)}},f.prototype.u=function(D){var st=void 0;try{st=D.then}catch(mt){this.l(mt);return}typeof st=="function"?this.G(st,D):this.m(D)},f.prototype.l=function(D){this.s(2,D)},f.prototype.m=function(D){this.s(1,D)},f.prototype.s=function(D,st){if(this.h!=0)throw Error("Cannot settle("+D+", "+st+"): Promise already settled in state"+this.h);this.h=D,this.i=st,this.h===2&&this.D(),this.A()},f.prototype.D=function(){var D=this;Q(function(){if(D.B()){var st=o.console;typeof st!="undefined"&&st.error(D.i)}},1)},f.prototype.B=function(){if(this.o)return!1;var D=o.CustomEvent,st=o.Event,mt=o.dispatchEvent;return typeof mt=="undefined"?!0:(typeof D=="function"?D=new D("unhandledrejection",{cancelable:!0}):typeof st=="function"?D=new st("unhandledrejection",{cancelable:!0}):(D=o.document.createEvent("CustomEvent"),D.initCustomEvent("unhandledrejection",!1,!0,D)),D.promise=this,D.reason=this.i,mt(D))},f.prototype.A=function(){if(this.g!=null){for(var D=0;D<this.g.length;++D)tt.h(this.g[D]);this.g=null}};var tt=new W;return f.prototype.F=function(D){var st=this.j();D.J(st.resolve,st.reject)},f.prototype.G=function(D,st){var mt=this.j();try{D.call(st,mt.resolve,mt.reject)}catch(g){mt.reject(g)}},f.prototype.then=function(D,st){function mt(x,J){return typeof x=="function"?function(O){try{g(x(O))}catch(E){B(E)}}:J}var g,B,v=new f(function(x,J){g=x,B=J});return this.J(mt(D,g),mt(st,B)),v},f.prototype.catch=function(D){return this.then(void 0,D)},f.prototype.J=function(D,st){function mt(){switch(g.h){case 1:D(g.i);break;case 2:st(g.i);break;default:throw Error("Unexpected state: "+g.h)}}var g=this;this.g==null?tt.h(mt):this.g.push(mt),this.o=!0},f.resolve=M,f.reject=function(D){return new f(function(st,mt){mt(D)})},f.race=function(D){return new f(function(st,mt){for(var g=m(D),B=g.next();!B.done;B=g.next())M(B.value).J(st,mt)})},f.all=function(D){var st=m(D),mt=st.next();return mt.done?M([]):new f(function(g,B){function v(O){return function(E){x[O]=E,J--,J==0&&g(x)}}var x=[],J=0;do x.push(void 0),J++,M(mt.value).J(v(x.length-1),B),mt=st.next();while(!mt.done)})},f}),l("Object.is",function(b){return b||function(f,W){return f===W?f!==0||1/f===1/W:f!==f&&W!==W}}),l("Array.prototype.includes",function(b){return b||function(f,W){var M=this;M instanceof String&&(M=String(M));var Q=M.length;for(W=W||0,0>W&&(W=Math.max(W+Q,0));W<Q;W++){var tt=M[W];if(tt===f||Object.is(tt,f))return!0}return!1}}),l("String.prototype.includes",function(b){return b||function(f,W){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(f,W||0)!==-1}}),l("Array.prototype.keys",function(b){return b||function(){return ft(this,function(f){return f})}});var Jn=this||self;function He(b,f){b=b.split(".");var W=Jn;b[0]in W||typeof W.execScript=="undefined"||W.execScript("var "+b[0]);for(var M;b.length&&(M=b.shift());)b.length||f===void 0?W[M]&&W[M]!==Object.prototype[M]?W=W[M]:W=W[M]={}:W[M]=f}function Tt(b,f){return f=String.fromCharCode.apply(null,f),b==null?f:b+f}var Je,Zi=typeof TextDecoder!="undefined",Oi,An=typeof TextEncoder!="undefined";function sn(b){if(An)b=(Oi||(Oi=new TextEncoder)).encode(b);else{var f=void 0;f=f===void 0?!1:f;for(var W=0,M=new Uint8Array(3*b.length),Q=0;Q<b.length;Q++){var tt=b.charCodeAt(Q);if(128>tt)M[W++]=tt;else{if(2048>tt)M[W++]=tt>>6|192;else{if(55296<=tt&&57343>=tt){if(56319>=tt&&Q<b.length){var D=b.charCodeAt(++Q);if(56320<=D&&57343>=D){tt=1024*(tt-55296)+D-56320+65536,M[W++]=tt>>18|240,M[W++]=tt>>12&63|128,M[W++]=tt>>6&63|128,M[W++]=tt&63|128;continue}else Q--}if(f)throw Error("Found an unpaired surrogate");tt=65533}M[W++]=tt>>12|224,M[W++]=tt>>6&63|128}M[W++]=tt&63|128}}b=M.subarray(0,W)}return b}var Xn={},Si=null;function Mi(b,f){f===void 0&&(f=0),oi(),f=Xn[f];for(var W=Array(Math.floor(b.length/3)),M=f[64]||"",Q=0,tt=0;Q<b.length-2;Q+=3){var D=b[Q],st=b[Q+1],mt=b[Q+2],g=f[D>>2];D=f[(D&3)<<4|st>>4],st=f[(st&15)<<2|mt>>6],mt=f[mt&63],W[tt++]=g+D+st+mt}switch(g=0,mt=M,b.length-Q){case 2:g=b[Q+1],mt=f[(g&15)<<2]||M;case 1:b=b[Q],W[tt]=f[b>>2]+f[(b&3)<<4|g>>4]+mt+M}return W.join("")}function Fn(b){var f=b.length,W=3*f/4;W%3?W=Math.floor(W):"=.".indexOf(b[f-1])!=-1&&(W="=.".indexOf(b[f-2])!=-1?W-2:W-1);var M=new Uint8Array(W),Q=0;return Zn(b,function(tt){M[Q++]=tt}),M.subarray(0,Q)}function Zn(b,f){function W(mt){for(;M<b.length;){var g=b.charAt(M++),B=Si[g];if(B!=null)return B;if(!/^[\s\xa0]*$/.test(g))throw Error("Unknown base64 encoding at char: "+g)}return mt}oi();for(var M=0;;){var Q=W(-1),tt=W(0),D=W(64),st=W(64);if(st===64&&Q===-1)break;f(Q<<2|tt>>4),D!=64&&(f(tt<<4&240|D>>2),st!=64&&f(D<<6&192|st))}}function oi(){if(!Si){Si={};for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),f=["+/=","+/","-_=","-_.","-_"],W=0;5>W;W++){var M=b.concat(f[W].split(""));Xn[W]=M;for(var Q=0;Q<M.length;Q++){var tt=M[Q];Si[tt]===void 0&&(Si[tt]=Q)}}}}var ei=typeof Uint8Array.prototype.slice=="function",rn;function ji(b,f,W){return f===W?rn||(rn=new Uint8Array(0)):ei?b.slice(f,W):new Uint8Array(b.subarray(f,W))}var Ae=0,Me=0;function si(b,f){f=f===void 0?{}:f,f=f.v===void 0?!1:f.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=f,b&&de(this,b)}function de(b,f){f=f.constructor===Uint8Array?f:f.constructor===ArrayBuffer?new Uint8Array(f):f.constructor===Array?new Uint8Array(f):f.constructor===String?Fn(f):f instanceof Uint8Array?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(0),b.h=f,b.l=0,b.j=b.h.length,b.g=b.l}si.prototype.reset=function(){this.g=this.l};function Fe(b){for(var f=128,W=0,M=0,Q=0;4>Q&&128<=f;Q++)f=b.h[b.g++],W|=(f&127)<<7*Q;if(128<=f&&(f=b.h[b.g++],W|=(f&127)<<28,M|=(f&127)>>4),128<=f)for(Q=0;5>Q&&128<=f;Q++)f=b.h[b.g++],M|=(f&127)<<7*Q+3;if(128>f)return b=W>>>0,f=M>>>0,(M=f&2147483648)&&(b=~b+1>>>0,f=~f>>>0,b==0&&(f=f+1>>>0)),b=4294967296*f+(b>>>0),M?-b:b;b.m=!0}si.prototype.i=function(){var b=this.h,f=b[this.g],W=f&127;return 128>f?(this.g+=1,W):(f=b[this.g+1],W|=(f&127)<<7,128>f?(this.g+=2,W):(f=b[this.g+2],W|=(f&127)<<14,128>f?(this.g+=3,W):(f=b[this.g+3],W|=(f&127)<<21,128>f?(this.g+=4,W):(f=b[this.g+4],W|=(f&15)<<28,128>f?(this.g+=5,W>>>0):(this.g+=5,128<=b[this.g++]&&128<=b[this.g++]&&128<=b[this.g++]&&128<=b[this.g++]&&this.g++,W)))))},si.prototype.o=function(){var b=this.h[this.g],f=this.h[this.g+1],W=this.h[this.g+2],M=this.h[this.g+3];return this.g+=4,W=(b<<0|f<<8|W<<16|M<<24)>>>0,b=2*(W>>31)+1,f=W>>>23&255,W&=8388607,f==255?W?NaN:1/0*b:f==0?b*Math.pow(2,-149)*W:b*Math.pow(2,f-150)*(W+Math.pow(2,23))};var yi=[];function $e(){this.g=new Uint8Array(64),this.h=0}$e.prototype.push=function(b){if(!(this.h+1<this.g.length)){var f=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(f)}this.g[this.h++]=b},$e.prototype.length=function(){return this.h},$e.prototype.end=function(){var b=this.g,f=this.h;return this.h=0,ji(b,0,f)};function ne(b,f){for(;127<f;)b.push(f&127|128),f>>>=7;b.push(f)}function Xe(b){var f={},W=f.N===void 0?!1:f.N;this.o={v:f.v===void 0?!1:f.v},this.N=W,f=this.o,yi.length?(W=yi.pop(),f&&(W.v=f.v),b&&de(W,b),b=W):b=new si(b,f),this.g=b,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Xe.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function Ue(b){var f=b.g;if((f=f.g==f.j)||(f=b.j)||(f=b.g,f=f.m||0>f.g||f.g>f.j),f)return!1;b.m=b.g.g,f=b.g.i();var W=f&7;return W!=0&&W!=5&&W!=1&&W!=2&&W!=3&&W!=4?(b.j=!0,!1):(b.i=f,b.l=f>>>3,b.h=W,!0)}function Dt(b){switch(b.h){case 0:if(b.h!=0)Dt(b);else{for(b=b.g;b.h[b.g]&128;)b.g++;b.g++}break;case 1:b.h!=1?Dt(b):(b=b.g,b.g+=8);break;case 2:if(b.h!=2)Dt(b);else{var f=b.g.i();b=b.g,b.g+=f}break;case 5:b.h!=5?Dt(b):(b=b.g,b.g+=4);break;case 3:f=b.l;do{if(!Ue(b)){b.j=!0;break}if(b.h==4){b.l!=f&&(b.j=!0);break}Dt(b)}while(1);break;default:b.j=!0}}function xe(b,f,W){var M=b.g.j,Q=b.g.i(),tt=b.g.g+Q;if(b.g.j=tt,W(f,b),W=tt-b.g.g,W!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+Q+" bytes, instead read "+(Q-W)+" bytes, either the data ended unexpectedly or the message misreported its own length");return b.g.g=tt,b.g.j=M,f}function $t(b){return b.g.o()}function Ge(b){var f=b.g.i();b=b.g;var W=b.g;b.g+=f,b=b.h;var M;if(Zi)(M=Je)||(M=Je=new TextDecoder("utf-8",{fatal:!1})),M=M.decode(b.subarray(W,W+f));else{f=W+f;for(var Q=[],tt=null,D,st,mt;W<f;)D=b[W++],128>D?Q.push(D):224>D?W>=f?Q.push(65533):(st=b[W++],194>D||(st&192)!==128?(W--,Q.push(65533)):Q.push((D&31)<<6|st&63)):240>D?W>=f-1?Q.push(65533):(st=b[W++],(st&192)!==128||D===224&&160>st||D===237&&160<=st||((M=b[W++])&192)!==128?(W--,Q.push(65533)):Q.push((D&15)<<12|(st&63)<<6|M&63)):244>=D?W>=f-2?Q.push(65533):(st=b[W++],(st&192)!==128||(D<<28)+(st-144)>>30!==0||((M=b[W++])&192)!==128||((mt=b[W++])&192)!==128?(W--,Q.push(65533)):(D=(D&7)<<18|(st&63)<<12|(M&63)<<6|mt&63,D-=65536,Q.push((D>>10&1023)+55296,(D&1023)+56320))):Q.push(65533),8192<=Q.length&&(tt=Tt(tt,Q),Q.length=0);M=Tt(tt,Q)}return M}function Te(b,f,W){var M=b.g.i();for(M=b.g.g+M;b.g.g<M;)W.push(f.call(b.g))}function di(b,f){b.h==2?Te(b,si.prototype.o,f):f.push($t(b))}function Se(){this.h=[],this.i=0,this.g=new $e}function te(b,f){f.length!==0&&(b.h.push(f),b.i+=f.length)}function ii(b){var f=b.i+b.g.length();if(f===0)return new Uint8Array(0);f=new Uint8Array(f);for(var W=b.h,M=W.length,Q=0,tt=0;tt<M;tt++){var D=W[tt];D.length!==0&&(f.set(D,Q),Q+=D.length)}return W=b.g,M=W.h,M!==0&&(f.set(W.g.subarray(0,M),Q),W.h=0),b.h=[f],f}function ri(b,f,W){if(W!=null){ne(b.g,8*f+5),b=b.g;var M=W;M=(W=0>M?1:0)?-M:M,M===0?0<1/M?Ae=Me=0:(Me=0,Ae=2147483648):isNaN(M)?(Me=0,Ae=2147483647):34028234663852886e22<M?(Me=0,Ae=(W<<31|2139095040)>>>0):11754943508222875e-54>M?(M=Math.round(M/Math.pow(2,-149)),Me=0,Ae=(W<<31|M)>>>0):(f=Math.floor(Math.log(M)/Math.LN2),M*=Math.pow(2,-f),M=Math.round(8388608*M),16777216<=M&&++f,Me=0,Ae=(W<<31|f+127<<23|M&8388607)>>>0),W=Ae,b.push(W>>>0&255),b.push(W>>>8&255),b.push(W>>>16&255),b.push(W>>>24&255)}}var Ye=typeof Uint8Array=="function";function _i(b,f,W){if(b!=null)return typeof b=="object"?Ye&&b instanceof Uint8Array?W(b):fi(b,f,W):f(b)}function fi(b,f,W){if(Array.isArray(b)){for(var M=Array(b.length),Q=0;Q<b.length;Q++)M[Q]=_i(b[Q],f,W);return Array.isArray(b)&&b.W&&Re(M),M}M={};for(Q in b)M[Q]=_i(b[Q],f,W);return M}function li(b){return typeof b=="number"?isFinite(b)?b:String(b):b}var Gi={W:{value:!0,configurable:!0}};function Re(b){return Array.isArray(b)&&!Object.isFrozen(b)&&Object.defineProperties(b,Gi),b}var ke;function ve(b,f,W){var M=ke;ke=null,b||(b=M),M=this.constructor.ca,b||(b=M?[M]:[]),this.j=M?0:-1,this.m=this.g=null,this.h=b;t:{if(M=this.h.length,b=M-1,M&&(M=this.h[b],!(M===null||typeof M!="object"||Array.isArray(M)||Ye&&M instanceof Uint8Array))){this.l=b-this.j,this.i=M;break t}f!==void 0&&-1<f?(this.l=Math.max(f,b+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(W)for(f=0;f<W.length;f++)b=W[f],b<this.l?(b+=this.j,(M=this.h[b])?Re(M):this.h[b]=ae):(ci(this),(M=this.i[b])?Re(M):this.i[b]=ae)}var ae=Object.freeze(Re([]));function ci(b){var f=b.l+b.j;b.h[f]||(b.i=b.h[f]={})}function le(b,f,W){return f===-1?null:(W===void 0?0:W)||f>=b.l?b.i?b.i[f]:void 0:b.h[f+b.j]}function ee(b,f){var W=W===void 0?!1:W,M=le(b,f,W);return M==null&&(M=ae),M===ae&&(M=Re([]),vt(b,f,M,W)),M}function wi(b){var f=ee(b,3);if(b.m||(b.m={}),!b.m[3]){for(var W=0;W<f.length;W++)f[W]=+f[W];b.m[3]=!0}return f}function Ze(b,f,W){return b=le(b,f),b==null?W:b}function Jt(b,f,W){return b=le(b,f),b=b==null?b:+b,b==null?W===void 0?0:W:b}function vt(b,f,W,M){(M===void 0?0:M)||f>=b.l?(ci(b),b.i[f]=W):b.h[f+b.j]=W}function Ie(b,f,W){if(W===-1)return null;if(b.g||(b.g={}),!b.g[W]){var M=le(b,W,!1);M&&(b.g[W]=new f(M))}return b.g[W]}function ze(b,f){b.g||(b.g={});var W=b.g[1];if(!W){var M=ee(b,1);W=[];for(var Q=0;Q<M.length;Q++)W[Q]=new f(M[Q]);b.g[1]=W}return W}function ce(b,f,W){var M=M===void 0?!1:M;b.g||(b.g={});var Q=W&&lt(W);b.g[f]=W,vt(b,f,Q,M)}function Ce(b,f,W,M){var Q=ze(b,W);f=f||new W,b=ee(b,1),M!=null?(Q.splice(M,0,f),b.splice(M,0,lt(f))):(Q.push(f),b.push(lt(f)))}ve.prototype.toJSON=function(){var b=lt(this);return fi(b,li,Mi)};function lt(b,f){if(b.g)for(var W in b.g){var M=b.g[W];if(Array.isArray(M))for(var Q=0;Q<M.length;Q++)M[Q]&&lt(M[Q]);else M&&lt(M)}return b.h}ve.prototype.toString=function(){return lt(this).toString()};function It(b,f){if(b=b.o){te(f,f.g.end());for(var W=0;W<b.length;W++)te(f,b[W])}}function ht(b,f){if(f.h==4)return!1;var W=f.m;return Dt(f),f.N||(f=ji(f.g.h,W,f.g.g),(W=b.o)?W.push(f):b.o=[f]),!0}function ie(b){ve.call(this,b,-1,he)}rt(ie,ve),ie.prototype.getRows=function(){return le(this,1)},ie.prototype.getCols=function(){return le(this,2)},ie.prototype.getPackedDataList=function(){return wi(this)},ie.prototype.getLayout=function(){return Ze(this,4,0)};function pe(b,f){for(;Ue(f);)switch(f.i){case 8:var W=f.g.i();vt(b,1,W);break;case 16:W=f.g.i(),vt(b,2,W);break;case 29:case 26:di(f,b.getPackedDataList());break;case 32:W=Fe(f.g),vt(b,4,W);break;default:if(!ht(b,f))return b}return b}var he=[3];function Ht(b,f){var W=void 0;return new(W||(W=Promise))(function(M,Q){function tt(mt){try{st(f.next(mt))}catch(g){Q(g)}}function D(mt){try{st(f.throw(mt))}catch(g){Q(g)}}function st(mt){mt.done?M(mt.value):new W(function(g){g(mt.value)}).then(tt,D)}st((f=f.apply(b,void 0)).next())})}function ye(b){ve.call(this,b)}rt(ye,ve);function Ee(b,f){for(;Ue(f);)switch(f.i){case 8:var W=f.g.i();vt(b,1,W);break;case 21:W=$t(f),vt(b,2,W);break;case 26:W=Ge(f),vt(b,3,W);break;case 34:W=Ge(f),vt(b,4,W);break;default:if(!ht(b,f))return b}return b}function ai(b){ve.call(this,b,-1,Ii)}rt(ai,ve),ai.prototype.addClassification=function(b,f){return Ce(this,b,ye,f),this};var Ii=[1];function Fi(b){ve.call(this,b)}rt(Fi,ve);function Li(b,f){for(;Ue(f);)switch(f.i){case 13:var W=$t(f);vt(b,1,W);break;case 21:W=$t(f),vt(b,2,W);break;case 29:W=$t(f),vt(b,3,W);break;case 37:W=$t(f),vt(b,4,W);break;case 45:W=$t(f),vt(b,5,W);break;default:if(!ht(b,f))return b}return b}function Ke(b){ve.call(this,b,-1,Tn)}rt(Ke,ve);function Ci(b){t:{var f=new Ke;for(b=new Xe(b);Ue(b);)switch(b.i){case 10:var W=xe(b,new Fi,Li);Ce(f,W,Fi,void 0);break;default:if(!ht(f,b))break t}}return f}var Tn=[1];function ui(b){ve.call(this,b)}rt(ui,ve);function Qe(b){ve.call(this,b,-1,ln)}rt(Qe,ve),Qe.prototype.getVertexType=function(){return Ze(this,1,0)},Qe.prototype.getPrimitiveType=function(){return Ze(this,2,0)},Qe.prototype.getVertexBufferList=function(){return wi(this)},Qe.prototype.getIndexBufferList=function(){return ee(this,4)};function zi(b,f){for(;Ue(f);)switch(f.i){case 8:var W=Fe(f.g);vt(b,1,W);break;case 16:W=Fe(f.g),vt(b,2,W);break;case 29:case 26:di(f,b.getVertexBufferList());break;case 32:case 34:W=f;var M=b.getIndexBufferList();W.h==2?Te(W,si.prototype.i,M):M.push(W.g.i());break;default:if(!ht(b,f))return b}return b}var ln=[3,4];function ti(b){ve.call(this,b)}rt(ti,ve),ti.prototype.getMesh=function(){return Ie(this,Qe,1)},ti.prototype.getPoseTransformMatrix=function(){return Ie(this,ie,2)};function Hn(b){t:{var f=new ti;for(b=new Xe(b);Ue(b);)switch(b.i){case 10:var W=xe(b,new Qe,zi);ce(f,1,W);break;case 18:W=xe(b,new ie,pe),ce(f,2,W);break;default:if(!ht(f,b))break t}}return f}function mi(b,f,W){if(W=b.createShader(W===0?b.VERTEX_SHADER:b.FRAGMENT_SHADER),b.shaderSource(W,f),b.compileShader(W),!b.getShaderParameter(W,b.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+b.getShaderInfoLog(W));return W}function Ki(b){return ze(b,ye).map(function(f){return{index:Ze(f,1,0),Y:Jt(f,2),label:le(f,3)!=null?Ze(f,3,""):void 0,displayName:le(f,4)!=null?Ze(f,4,""):void 0}})}function un(b){return{x:Jt(b,1),y:Jt(b,2),z:Jt(b,3),visibility:le(b,4)!=null?Jt(b,4):void 0}}function Nn(b,f){this.h=b,this.g=f,this.l=0}function Vi(b,f,W){return mn(b,f),typeof b.g.canvas.transferToImageBitmap=="function"?Promise.resolve(b.g.canvas.transferToImageBitmap()):W?Promise.resolve(b.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(b.g.canvas):(b.i===void 0&&(b.i=document.createElement("canvas")),new Promise(function(M){b.i.height=b.g.canvas.height,b.i.width=b.g.canvas.width,b.i.getContext("2d",{}).drawImage(b.g.canvas,0,0,b.g.canvas.width,b.g.canvas.height),M(b.i)}))}function mn(b,f){var W=b.g;if(b.m===void 0){var M=mi(W,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Q=mi(W,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),tt=W.createProgram();if(W.attachShader(tt,M),W.attachShader(tt,Q),W.linkProgram(tt),!W.getProgramParameter(tt,W.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+W.getProgramInfoLog(tt));M=b.m=tt,W.useProgram(M),Q=W.getUniformLocation(M,"sampler0"),b.j={I:W.getAttribLocation(M,"aVertex"),H:W.getAttribLocation(M,"aTex"),da:Q},b.s=W.createBuffer(),W.bindBuffer(W.ARRAY_BUFFER,b.s),W.enableVertexAttribArray(b.j.I),W.vertexAttribPointer(b.j.I,2,W.FLOAT,!1,0,0),W.bufferData(W.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),W.STATIC_DRAW),W.bindBuffer(W.ARRAY_BUFFER,null),b.o=W.createBuffer(),W.bindBuffer(W.ARRAY_BUFFER,b.o),W.enableVertexAttribArray(b.j.H),W.vertexAttribPointer(b.j.H,2,W.FLOAT,!1,0,0),W.bufferData(W.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),W.STATIC_DRAW),W.bindBuffer(W.ARRAY_BUFFER,null),W.uniform1i(Q,0)}M=b.j,W.useProgram(b.m),W.canvas.width=f.width,W.canvas.height=f.height,W.viewport(0,0,f.width,f.height),W.activeTexture(W.TEXTURE0),b.h.bindTexture2d(f.glName),W.enableVertexAttribArray(M.I),W.bindBuffer(W.ARRAY_BUFFER,b.s),W.vertexAttribPointer(M.I,2,W.FLOAT,!1,0,0),W.enableVertexAttribArray(M.H),W.bindBuffer(W.ARRAY_BUFFER,b.o),W.vertexAttribPointer(M.H,2,W.FLOAT,!1,0,0),W.bindFramebuffer(W.DRAW_FRAMEBUFFER?W.DRAW_FRAMEBUFFER:W.FRAMEBUFFER,null),W.clearColor(0,0,0,0),W.clear(W.COLOR_BUFFER_BIT),W.colorMask(!0,!0,!0,!0),W.drawArrays(W.TRIANGLE_FAN,0,4),W.disableVertexAttribArray(M.I),W.disableVertexAttribArray(M.H),W.bindBuffer(W.ARRAY_BUFFER,null),b.h.bindTexture2d(0)}function to(b){this.g=b}var eo=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function hn(b,f){return f+b}function yn(b,f){window[b]=f}function A(b){var f=document.createElement("script");return f.setAttribute("src",b),f.setAttribute("crossorigin","anonymous"),new Promise(function(W){f.addEventListener("load",function(){W()},!1),f.addEventListener("error",function(){W()},!1),document.body.appendChild(f)})}function X(){return Ht(this,function b(){return ge(b,function(f){switch(f.g){case 1:return f.m=2,_(f,WebAssembly.instantiate(eo),4);case 4:f.g=3,f.m=0;break;case 2:return f.m=0,f.j=null,f.return(!1);case 3:return f.return(!0)}})})}function R(b){if(this.g=b,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=b&&b.locateFile||hn,typeof window=="object")var f=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")f=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=f,b.options){f=m(Object.keys(b.options));for(var W=f.next();!W.done;W=f.next()){W=W.value;var M=b.options[W].default;M!==void 0&&(this.j[W]=typeof M=="function"?M():M)}}}e=R.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function k(b,f){return b.g.files===void 0?[]:typeof b.g.files=="function"?b.g.files(f):b.g.files}function $(b){return Ht(b,function f(){var W=this,M,Q,tt,D,st,mt,g,B,v,x,J;return ge(f,function(O){switch(O.g){case 1:return M=W,W.R?(Q=k(W,W.j),_(O,X(),2)):O.return();case 2:if(tt=O.h,typeof window=="object")return yn("createMediapipeSolutionsWasm",{locateFile:W.locateFile}),yn("createMediapipeSolutionsPackedAssets",{locateFile:W.locateFile}),mt=Q.filter(function(E){return E.data!==void 0}),g=Q.filter(function(E){return E.data===void 0}),B=Promise.all(mt.map(function(E){var gt=at(M,E.url);if(E.path!==void 0){var ot=E.path;gt=gt.then(function(yt){return M.overrideFile(ot,yt),Promise.resolve(yt)})}return gt})),v=Promise.all(g.map(function(E){return E.simd===void 0||E.simd&&tt||!E.simd&&!tt?A(M.locateFile(E.url,M.S)):Promise.resolve()})).then(function(){return Ht(M,function E(){var gt,ot,yt=this;return ge(E,function(Bt){if(Bt.g==1)return gt=window.createMediapipeSolutionsWasm,ot=window.createMediapipeSolutionsPackedAssets,_(Bt,gt(ot),2);yt.h=Bt.h,Bt.g=0})})}),x=function(){return Ht(M,function E(){var gt=this;return ge(E,function(ot){return gt.g.graph&&gt.g.graph.url?ot=_(ot,at(gt,gt.g.graph.url),0):(ot.g=0,ot=void 0),ot})})}(),_(O,Promise.all([v,B,x]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return D=Q.filter(function(E){return E.simd===void 0||E.simd&&tt||!E.simd&&!tt}).map(function(E){return M.locateFile(E.url,M.S)}),importScripts.apply(null,y(D)),_(O,createMediapipeSolutionsWasm(Module),6);case 6:W.h=O.h,W.l=new OffscreenCanvas(1,1),W.h.canvas=W.l,st=W.h.GL.createContext(W.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext!="undefined"?2:1}),W.h.GL.makeContextCurrent(st),O.g=4;break;case 7:if(W.l=document.createElement("canvas"),J=W.l.getContext("webgl2",{}),!J&&(J=W.l.getContext("webgl",{}),!J))return alert("Failed to create WebGL canvas context when passing video frame."),O.return();W.D=J,W.h.canvas=W.l,W.h.createContext(W.l,!0,!0,{});case 4:W.i=new W.h.SolutionWasm,W.R=!1,O.g=0}})})}function Ct(b){return Ht(b,function f(){var W=this,M,Q,tt,D,st,mt,g,B;return ge(f,function(v){if(v.g==1){if(W.g.graph&&W.g.graph.url&&W.P===W.g.graph.url)return v.return();if(W.o=!0,!W.g.graph||!W.g.graph.url){v.g=2;return}return W.P=W.g.graph.url,_(v,at(W,W.g.graph.url),3)}for(v.g!=2&&(M=v.h,W.i.loadGraph(M)),Q=m(Object.keys(W.B)),tt=Q.next();!tt.done;tt=Q.next())D=tt.value,W.i.overrideFile(D,W.B[D]);if(W.B={},W.g.listeners)for(st=m(W.g.listeners),mt=st.next();!mt.done;mt=st.next())g=mt.value,Et(W,g);B=W.j,W.j={},W.setOptions(B),v.g=0})})}e.reset=function(){return Ht(this,function b(){var f=this;return ge(b,function(W){f.i&&(f.i.reset(),f.m={},f.s={}),W.g=0})})},e.setOptions=function(b,f){var W=this;if(f=f||this.g.options){for(var M=[],Q=[],tt={},D=m(Object.keys(b)),st=D.next();!st.done;tt={K:tt.K,L:tt.L},st=D.next()){var mt=st.value;mt in this.j&&this.j[mt]===b[mt]||(this.j[mt]=b[mt],st=f[mt],st!==void 0&&(st.onChange&&(tt.K=st.onChange,tt.L=b[mt],M.push(function(g){return function(){return Ht(W,function B(){var v,x=this;return ge(B,function(J){if(J.g==1)return _(J,g.K(g.L),2);v=J.h,v===!0&&(x.o=!0),J.g=0})})}}(tt))),st.graphOptionXref&&(mt={valueNumber:st.type===1?b[mt]:0,valueBoolean:st.type===0?b[mt]:!1,valueString:st.type===2?b[mt]:""},st=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),st.graphOptionXref),mt),Q.push(st))))}(M.length!==0||Q.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Q),this.u=(this.u===void 0?[]:this.u).concat(M))}};function q(b){return Ht(b,function f(){var W=this,M,Q,tt,D,st,mt,g;return ge(f,function(B){switch(B.g){case 1:if(!W.o)return B.return();if(!W.u){B.g=2;break}M=m(W.u),Q=M.next();case 3:if(Q.done){B.g=5;break}return tt=Q.value,_(B,tt(),4);case 4:Q=M.next(),B.g=3;break;case 5:W.u=void 0;case 2:if(W.A){for(D=new W.h.GraphOptionChangeRequestList,st=m(W.A),mt=st.next();!mt.done;mt=st.next())g=mt.value,D.push_back(g);W.i.changeOptions(D),D.delete(),W.A=void 0}W.o=!1,B.g=0}})})}e.initialize=function(){return Ht(this,function b(){var f=this;return ge(b,function(W){return W.g==1?_(W,$(f),2):W.g!=3?_(W,Ct(f),3):_(W,q(f),0)})})};function at(b,f){return Ht(b,function W(){var M=this,Q,tt;return ge(W,function(D){return f in M.F?D.return(M.F[f]):(Q=M.locateFile(f,""),tt=fetch(Q).then(function(st){return st.arrayBuffer()}),M.F[f]=tt,D.return(tt))})})}e.overrideFile=function(b,f){this.i?this.i.overrideFile(b,f):this.B[b]=f},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(b,f){return Ht(this,function W(){var M=this,Q,tt,D,st,mt,g,B,v,x;return ge(W,function(J){switch(J.g){case 1:return M.g.inputs?(Q=1e3*(f==null?performance.now():f),_(J,M.C,2)):J.return();case 2:return _(J,M.initialize(),3);case 3:for(tt=new M.h.PacketDataList,D=m(Object.keys(b)),st=D.next();!st.done;st=D.next())if(mt=st.value,g=M.g.inputs[mt]){t:{var O=M,E=b[mt];switch(g.type){case"video":var gt=O.m[g.stream];if(gt||(gt=new Nn(O.h,O.D),O.m[g.stream]=gt),O=gt,O.l===0&&(O.l=O.h.createTexture()),typeof HTMLVideoElement!="undefined"&&E instanceof HTMLVideoElement){var ot=E.videoWidth;gt=E.videoHeight}else typeof HTMLImageElement!="undefined"&&E instanceof HTMLImageElement?(ot=E.naturalWidth,gt=E.naturalHeight):(ot=E.width,gt=E.height);gt={glName:O.l,width:ot,height:gt},ot=O.g,ot.canvas.width=gt.width,ot.canvas.height=gt.height,ot.activeTexture(ot.TEXTURE0),O.h.bindTexture2d(O.l),ot.texImage2D(ot.TEXTURE_2D,0,ot.RGBA,ot.RGBA,ot.UNSIGNED_BYTE,E),O.h.bindTexture2d(0),O=gt;break t;case"detections":for(gt=O.m[g.stream],gt||(gt=new to(O.h),O.m[g.stream]=gt),O=gt,O.data||(O.data=new O.g.DetectionListData),O.data.reset(E.length),gt=0;gt<E.length;++gt){ot=E[gt];var yt=O.data,Bt=yt.setBoundingBox,Qt=gt,wt=ot.T,bt=new ui;vt(bt,1,wt.Z),vt(bt,2,wt.$),vt(bt,3,wt.height),vt(bt,4,wt.width),vt(bt,5,wt.rotation),vt(bt,6,wt.X);var Rt=wt=new Se;ri(Rt,1,le(bt,1)),ri(Rt,2,le(bt,2)),ri(Rt,3,le(bt,3)),ri(Rt,4,le(bt,4)),ri(Rt,5,le(bt,5));var Ft=le(bt,6);if(Ft!=null&&Ft!=null){ne(Rt.g,48);var Nt=Rt.g,Mt=Ft;Ft=0>Mt,Mt=Math.abs(Mt);var d=Mt>>>0;for(Mt=Math.floor((Mt-d)/4294967296),Mt>>>=0,Ft&&(Mt=~Mt>>>0,d=(~d>>>0)+1,4294967295<d&&(d=0,Mt++,4294967295<Mt&&(Mt=0))),Ae=d,Me=Mt,Ft=Ae,d=Me;0<d||127<Ft;)Nt.push(Ft&127|128),Ft=(Ft>>>7|d<<25)>>>0,d>>>=7;Nt.push(Ft)}if(It(bt,Rt),wt=ii(wt),Bt.call(yt,Qt,wt),ot.O)for(yt=0;yt<ot.O.length;++yt)bt=ot.O[yt],Rt=!!bt.visibility,Bt=O.data,Qt=Bt.addNormalizedLandmark,wt=gt,bt=Object.assign(Object.assign({},bt),{visibility:Rt?bt.visibility:0}),Rt=new Fi,vt(Rt,1,bt.x),vt(Rt,2,bt.y),vt(Rt,3,bt.z),bt.visibility&&vt(Rt,4,bt.visibility),Nt=bt=new Se,ri(Nt,1,le(Rt,1)),ri(Nt,2,le(Rt,2)),ri(Nt,3,le(Rt,3)),ri(Nt,4,le(Rt,4)),ri(Nt,5,le(Rt,5)),It(Rt,Nt),bt=ii(bt),Qt.call(Bt,wt,bt);if(ot.M)for(yt=0;yt<ot.M.length;++yt){if(Bt=O.data,Qt=Bt.addClassification,wt=gt,bt=ot.M[yt],Rt=new ye,vt(Rt,2,bt.Y),bt.index&&vt(Rt,1,bt.index),bt.label&&vt(Rt,3,bt.label),bt.displayName&&vt(Rt,4,bt.displayName),Nt=bt=new Se,d=le(Rt,1),d!=null&&d!=null)if(ne(Nt.g,8),Ft=Nt.g,0<=d)ne(Ft,d);else{for(Mt=0;9>Mt;Mt++)Ft.push(d&127|128),d>>=7;Ft.push(1)}ri(Nt,2,le(Rt,2)),Ft=le(Rt,3),Ft!=null&&(Ft=sn(Ft),ne(Nt.g,26),ne(Nt.g,Ft.length),te(Nt,Nt.g.end()),te(Nt,Ft)),Ft=le(Rt,4),Ft!=null&&(Ft=sn(Ft),ne(Nt.g,34),ne(Nt.g,Ft.length),te(Nt,Nt.g.end()),te(Nt,Ft)),It(Rt,Nt),bt=ii(bt),Qt.call(Bt,wt,bt)}}O=O.data;break t;default:O={}}}switch(B=O,v=g.stream,g.type){case"video":tt.pushTexture2d(Object.assign(Object.assign({},B),{stream:v,timestamp:Q}));break;case"detections":x=B,x.stream=v,x.timestamp=Q,tt.pushDetectionList(x);break;default:throw Error("Unknown input config type: '"+g.type+"'")}}return M.i.send(tt),_(J,M.C,4);case 4:tt.delete(),J.g=0}})})};function Zt(b,f,W){return Ht(b,function M(){var Q,tt,D,st,mt,g,B=this,v,x,J,O,E,gt,ot,yt;return ge(M,function(Bt){switch(Bt.g){case 1:if(!W)return Bt.return(f);for(Q={},tt=0,D=m(Object.keys(W)),st=D.next();!st.done;st=D.next())mt=st.value,g=W[mt],typeof g!="string"&&g.type==="texture"&&f[g.stream]!==void 0&&++tt;1<tt&&(B.G=!1),v=m(Object.keys(W)),st=v.next();case 2:if(st.done){Bt.g=4;break}if(x=st.value,J=W[x],typeof J=="string")return ot=Q,yt=x,_(Bt,St(B,x,f[J]),14);if(O=f[J.stream],J.type==="detection_list"){if(O){for(var Qt=O.getRectList(),wt=O.getLandmarksList(),bt=O.getClassificationsList(),Rt=[],Ft=0;Ft<Qt.size();++Ft){var Nt=Qt.get(Ft);t:{var Mt=new ui;for(Nt=new Xe(Nt);Ue(Nt);)switch(Nt.i){case 13:var d=$t(Nt);vt(Mt,1,d);break;case 21:d=$t(Nt),vt(Mt,2,d);break;case 29:d=$t(Nt),vt(Mt,3,d);break;case 37:d=$t(Nt),vt(Mt,4,d);break;case 45:d=$t(Nt),vt(Mt,5,d);break;case 48:d=Fe(Nt.g),vt(Mt,6,d);break;default:if(!ht(Mt,Nt))break t}}Mt={Z:Jt(Mt,1),$:Jt(Mt,2),height:Jt(Mt,3),width:Jt(Mt,4),rotation:Jt(Mt,5,0),X:Ze(Mt,6,0)},Nt=ze(Ci(wt.get(Ft)),Fi).map(un);var V=bt.get(Ft);t:for(d=new ai,V=new Xe(V);Ue(V);)switch(V.i){case 10:d.addClassification(xe(V,new ye,Ee));break;default:if(!ht(d,V))break t}Mt={T:Mt,O:Nt,M:Ki(d)},Rt.push(Mt)}Qt=Rt}else Qt=[];Q[x]=Qt,Bt.g=7;break}if(J.type==="proto_list"){if(O){for(Qt=Array(O.size()),wt=0;wt<O.size();wt++)Qt[wt]=O.get(wt);O.delete()}else Qt=[];Q[x]=Qt,Bt.g=7;break}if(O===void 0){Bt.g=3;break}if(J.type==="float_list"){Q[x]=O,Bt.g=7;break}if(J.type==="proto"){Q[x]=O,Bt.g=7;break}if(J.type!=="texture")throw Error("Unknown output config type: '"+J.type+"'");return E=B.s[x],E||(E=new Nn(B.h,B.D),B.s[x]=E),_(Bt,Vi(E,O,B.G),13);case 13:gt=Bt.h,Q[x]=gt;case 7:J.transform&&Q[x]&&(Q[x]=J.transform(Q[x])),Bt.g=3;break;case 14:ot[yt]=Bt.h;case 3:st=v.next(),Bt.g=2;break;case 4:return Bt.return(Q)}})})}function St(b,f,W){return Ht(b,function M(){var Q=this,tt;return ge(M,function(D){return typeof W=="number"||W instanceof Uint8Array||W instanceof Q.h.Uint8BlobList?D.return(W):W instanceof Q.h.Texture2dDataOut?(tt=Q.s[f],tt||(tt=new Nn(Q.h,Q.D),Q.s[f]=tt),D.return(Vi(tt,W,Q.G))):D.return(void 0)})})}function Et(b,f){for(var W=f.name||"$",M=[].concat(y(f.wants)),Q=new b.h.StringList,tt=m(f.wants),D=tt.next();!D.done;D=tt.next())Q.push_back(D.value);tt=b.h.PacketListener.implement({onResults:function(st){for(var mt={},g=0;g<f.wants.length;++g)mt[M[g]]=st.get(g);var B=b.listeners[W];B&&(b.C=Zt(b,mt,f.outs).then(function(v){v=B(v);for(var x=0;x<f.wants.length;++x){var J=mt[M[x]];typeof J=="object"&&J.hasOwnProperty&&J.hasOwnProperty("delete")&&J.delete()}v&&(b.C=v)}))}}),b.i.attachMultiListener(Q,tt),Q.delete()}e.onResults=function(b,f){this.listeners[f||"$"]=b},He("Solution",R),He("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function kt(b){b=Hn(b);var f=b.getMesh();if(!f)return b;var W=new Float32Array(f.getVertexBufferList());f.getVertexBufferList=function(){return W};var M=new Uint32Array(f.getIndexBufferList());return f.getIndexBufferList=function(){return M},b}var re={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(b){return b.map(kt)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(b){return b.map(function(f){return ze(Ci(f),Fi).map(un)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},zt=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Yt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Ut=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],oe=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],be=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],fe=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Ve=[].concat(y(zt),y(Yt),y(Ut),y(oe),y(be),y(fe));function De(b){b=b||{},b=Object.assign(Object.assign({},re),b),this.g=new R(b)}e=De.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(b){this.g.onResults(b)},e.initialize=function(){return Ht(this,function b(){var f=this;return ge(b,function(W){return _(W,f.g.initialize(),0)})})},e.reset=function(){this.g.reset()},e.send=function(b){return Ht(this,function f(){var W=this;return ge(f,function(M){return _(M,W.g.send(b),0)})})},e.setOptions=function(b){this.g.setOptions(b)},He("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),He("FaceMesh",De),He("FACEMESH_LIPS",zt),He("FACEMESH_LEFT_EYE",Yt),He("FACEMESH_LEFT_EYEBROW",Ut),He("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),He("FACEMESH_RIGHT_EYE",oe),He("FACEMESH_RIGHT_EYEBROW",be),He("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),He("FACEMESH_FACE_OVAL",fe),He("FACEMESH_CONTOURS",Ve),He("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),He("matrixDataToMatrix",function(b){for(var f=b.getCols(),W=b.getRows(),M=b.getPackedDataList(),Q=[],tt=0;tt<W;tt++)Q.push(Array(f));for(tt=0;tt<W;tt++)for(var D=0;D<f;D++){var st=b.getLayout()===1?tt*f+D:D*W+tt;Q[tt][D]=M[st]}return Q}),He("VERSION","0.4.1633559619")}).call(gI);const dI={};(function(){var e;function t(s){var a=0;return function(){return a<s.length?{done:!1,value:s[a++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,a,u){return s==Array.prototype||s==Object.prototype||(s[a]=u.value),s};function n(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var a=0;a<s.length;++a){var u=s[a];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var o=n(this);function l(s,a){if(a)t:{var u=o;s=s.split(".");for(var Z=0;Z<s.length-1;Z++){var w=s[Z];if(!(w in u))break t;u=u[w]}s=s[s.length-1],Z=u[s],a=a(Z),a!=Z&&a!=null&&i(u,s,{configurable:!0,writable:!0,value:a})}}l("Symbol",function(s){function a(Y){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new u(Z+(Y||"")+"_"+w++,Y)}function u(Y,N){this.g=Y,i(this,"description",{configurable:!0,writable:!0,value:N})}if(s)return s;u.prototype.toString=function(){return this.g};var Z="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",w=0;return a}),l("Symbol.iterator",function(s){if(s)return s;s=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<a.length;u++){var Z=o[a[u]];typeof Z=="function"&&typeof Z.prototype[s]!="function"&&i(Z.prototype,s,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return s});function I(s){return s={next:s},s[Symbol.iterator]=function(){return this},s}function m(s){var a=typeof Symbol!="undefined"&&Symbol.iterator&&s[Symbol.iterator];return a?a.call(s):{next:t(s)}}function y(s){if(!(s instanceof Array)){s=m(s);for(var a,u=[];!(a=s.next()).done;)u.push(a.value);s=u}return s}var H=typeof Object.create=="function"?Object.create:function(s){function a(){}return a.prototype=s,new a},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var nt={a:!0},dt={};try{dt.__proto__=nt,K=dt.a;break t}catch{}K=!1}L=K?function(s,a){if(s.__proto__=a,s.__proto__!==a)throw new TypeError(s+" is not extensible");return s}:null}var P=L;function rt(s,a){if(s.prototype=H(a.prototype),s.prototype.constructor=s,P)P(s,a);else for(var u in a)if(u!="prototype")if(Object.defineProperties){var Z=Object.getOwnPropertyDescriptor(a,u);Z&&Object.defineProperty(s,u,Z)}else s[u]=a[u];s.ka=a.prototype}function Xt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Wt(s){if(s.l)throw new TypeError("Generator is already running");s.l=!0}Xt.prototype.o=function(s){this.h=s};function xt(s,a){s.j={V:a,X:!0},s.g=s.m||s.s}Xt.prototype.return=function(s){this.j={return:s},this.g=this.s};function _(s,a,u){return s.g=u,{value:a}}function qe(s){this.g=new Xt,this.h=s}function ni(s,a){Wt(s.g);var u=s.g.i;return u?we(s,"return"in u?u.return:function(Z){return{value:Z,done:!0}},a,s.g.return):(s.g.return(a),qt(s))}function we(s,a,u,Z){try{var w=a.call(s.g.i,u);if(!(w instanceof Object))throw new TypeError("Iterator result "+w+" is not an object");if(!w.done)return s.g.l=!1,w;var Y=w.value}catch(N){return s.g.i=null,xt(s.g,N),qt(s)}return s.g.i=null,Z.call(s.g,Y),qt(s)}function qt(s){for(;s.g.g;)try{var a=s.h(s.g);if(a)return s.g.l=!1,{value:a.value,done:!1}}catch(u){s.g.h=void 0,xt(s.g,u)}if(s.g.l=!1,s.g.j){if(a=s.g.j,s.g.j=null,a.X)throw a.V;return{value:a.return,done:!0}}return{value:void 0,done:!0}}function Bn(s){this.next=function(a){return Wt(s.g),s.g.i?a=we(s,s.g.i.next,a,s.g.o):(s.g.o(a),a=qt(s)),a},this.throw=function(a){return Wt(s.g),s.g.i?a=we(s,s.g.i.throw,a,s.g.o):(xt(s.g,a),a=qt(s)),a},this.return=function(a){return ni(s,a)},this[Symbol.iterator]=function(){return this}}function ge(s){function a(Z){return s.next(Z)}function u(Z){return s.throw(Z)}return new Promise(function(Z,w){function Y(N){N.done?Z(N.value):Promise.resolve(N.value).then(a,u).then(Y,w)}Y(s.next())})}function ft(s){return ge(new Bn(new qe(s)))}l("Promise",function(s){function a(N){this.h=0,this.i=void 0,this.g=[],this.o=!1;var U=this.j();try{N(U.resolve,U.reject)}catch(j){U.reject(j)}}function u(){this.g=null}function Z(N){return N instanceof a?N:new a(function(U){U(N)})}if(s)return s;u.prototype.h=function(N){if(this.g==null){this.g=[];var U=this;this.i(function(){U.l()})}this.g.push(N)};var w=o.setTimeout;u.prototype.i=function(N){w(N,0)},u.prototype.l=function(){for(;this.g&&this.g.length;){var N=this.g;this.g=[];for(var U=0;U<N.length;++U){var j=N[U];N[U]=null;try{j()}catch(et){this.j(et)}}}this.g=null},u.prototype.j=function(N){this.i(function(){throw N})},a.prototype.j=function(){function N(et){return function(it){j||(j=!0,et.call(U,it))}}var U=this,j=!1;return{resolve:N(this.D),reject:N(this.l)}},a.prototype.D=function(N){if(N===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(N instanceof a)this.G(N);else{t:switch(typeof N){case"object":var U=N!=null;break t;case"function":U=!0;break t;default:U=!1}U?this.A(N):this.m(N)}},a.prototype.A=function(N){var U=void 0;try{U=N.then}catch(j){this.l(j);return}typeof U=="function"?this.H(U,N):this.m(N)},a.prototype.l=function(N){this.s(2,N)},a.prototype.m=function(N){this.s(1,N)},a.prototype.s=function(N,U){if(this.h!=0)throw Error("Cannot settle("+N+", "+U+"): Promise already settled in state"+this.h);this.h=N,this.i=U,this.h===2&&this.F(),this.B()},a.prototype.F=function(){var N=this;w(function(){if(N.C()){var U=o.console;typeof U!="undefined"&&U.error(N.i)}},1)},a.prototype.C=function(){if(this.o)return!1;var N=o.CustomEvent,U=o.Event,j=o.dispatchEvent;return typeof j=="undefined"?!0:(typeof N=="function"?N=new N("unhandledrejection",{cancelable:!0}):typeof U=="function"?N=new U("unhandledrejection",{cancelable:!0}):(N=o.document.createEvent("CustomEvent"),N.initCustomEvent("unhandledrejection",!1,!0,N)),N.promise=this,N.reason=this.i,j(N))},a.prototype.B=function(){if(this.g!=null){for(var N=0;N<this.g.length;++N)Y.h(this.g[N]);this.g=null}};var Y=new u;return a.prototype.G=function(N){var U=this.j();N.K(U.resolve,U.reject)},a.prototype.H=function(N,U){var j=this.j();try{N.call(U,j.resolve,j.reject)}catch(et){j.reject(et)}},a.prototype.then=function(N,U){function j(pt,At){return typeof pt=="function"?function(Vt){try{et(pt(Vt))}catch(Gt){it(Gt)}}:At}var et,it,ut=new a(function(pt,At){et=pt,it=At});return this.K(j(N,et),j(U,it)),ut},a.prototype.catch=function(N){return this.then(void 0,N)},a.prototype.K=function(N,U){function j(){switch(et.h){case 1:N(et.i);break;case 2:U(et.i);break;default:throw Error("Unexpected state: "+et.h)}}var et=this;this.g==null?Y.h(j):this.g.push(j),this.o=!0},a.resolve=Z,a.reject=function(N){return new a(function(U,j){j(N)})},a.race=function(N){return new a(function(U,j){for(var et=m(N),it=et.next();!it.done;it=et.next())Z(it.value).K(U,j)})},a.all=function(N){var U=m(N),j=U.next();return j.done?Z([]):new a(function(et,it){function ut(Vt){return function(Gt){pt[Vt]=Gt,At--,At==0&&et(pt)}}var pt=[],At=0;do pt.push(void 0),At++,Z(j.value).K(ut(pt.length-1),it),j=U.next();while(!j.done)})},a});function Ni(s,a){s instanceof String&&(s+="");var u=0,Z=!1,w={next:function(){if(!Z&&u<s.length){var Y=u++;return{value:a(Y,s[Y]),done:!1}}return Z=!0,{done:!0,value:void 0}}};return w[Symbol.iterator]=function(){return w},w}var Jn=typeof Object.assign=="function"?Object.assign:function(s,a){for(var u=1;u<arguments.length;u++){var Z=arguments[u];if(Z)for(var w in Z)Object.prototype.hasOwnProperty.call(Z,w)&&(s[w]=Z[w])}return s};l("Object.assign",function(s){return s||Jn}),l("Object.is",function(s){return s||function(a,u){return a===u?a!==0||1/a===1/u:a!==a&&u!==u}}),l("Array.prototype.includes",function(s){return s||function(a,u){var Z=this;Z instanceof String&&(Z=String(Z));var w=Z.length;for(u=u||0,0>u&&(u=Math.max(u+w,0));u<w;u++){var Y=Z[u];if(Y===a||Object.is(Y,a))return!0}return!1}}),l("String.prototype.includes",function(s){return s||function(a,u){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(a,u||0)!==-1}}),l("Array.prototype.keys",function(s){return s||function(){return Ni(this,function(a){return a})}});var He=this||self;function Tt(s,a){s=s.split(".");var u=He;s[0]in u||typeof u.execScript=="undefined"||u.execScript("var "+s[0]);for(var Z;s.length&&(Z=s.shift());)s.length||a===void 0?u[Z]&&u[Z]!==Object.prototype[Z]?u=u[Z]:u=u[Z]={}:u[Z]=a}function Je(s){throw s}function Zi(s,a){Je(Error("Invalid wire type: "+s+" (at position "+a+")"))}function Oi(){Je(Error("Failed to read varint, encoding is invalid."))}function An(s,a){return a=String.fromCharCode.apply(null,a),s==null?a:s+a}var sn,Xn=typeof TextDecoder!="undefined",Si,Mi=typeof TextEncoder!="undefined";function Fn(s){if(Mi)s=(Si||(Si=new TextEncoder)).encode(s);else{var a=void 0;a=a===void 0?!1:a;for(var u=0,Z=new Uint8Array(3*s.length),w=0;w<s.length;w++){var Y=s.charCodeAt(w);if(128>Y)Z[u++]=Y;else{if(2048>Y)Z[u++]=Y>>6|192;else{if(55296<=Y&&57343>=Y){if(56319>=Y&&w<s.length){var N=s.charCodeAt(++w);if(56320<=N&&57343>=N){Y=1024*(Y-55296)+N-56320+65536,Z[u++]=Y>>18|240,Z[u++]=Y>>12&63|128,Z[u++]=Y>>6&63|128,Z[u++]=Y&63|128;continue}else w--}if(a)throw Error("Found an unpaired surrogate");Y=65533}Z[u++]=Y>>12|224,Z[u++]=Y>>6&63|128}Z[u++]=Y&63|128}}s=Z.subarray(0,u)}return s}var Zn={},oi=null;function ei(s){var a;a===void 0&&(a=0),Ae(),a=Zn[a];for(var u=Array(Math.floor(s.length/3)),Z=a[64]||"",w=0,Y=0;w<s.length-2;w+=3){var N=s[w],U=s[w+1],j=s[w+2],et=a[N>>2];N=a[(N&3)<<4|U>>4],U=a[(U&15)<<2|j>>6],j=a[j&63],u[Y++]=et+N+U+j}switch(et=0,j=Z,s.length-w){case 2:et=s[w+1],j=a[(et&15)<<2]||Z;case 1:s=s[w],u[Y]=a[s>>2]+a[(s&3)<<4|et>>4]+j+Z}return u.join("")}function rn(s){var a=s.length,u=3*a/4;u%3?u=Math.floor(u):"=.".indexOf(s[a-1])!=-1&&(u="=.".indexOf(s[a-2])!=-1?u-2:u-1);var Z=new Uint8Array(u),w=0;return ji(s,function(Y){Z[w++]=Y}),Z.subarray(0,w)}function ji(s,a){function u(j){for(;Z<s.length;){var et=s.charAt(Z++),it=oi[et];if(it!=null)return it;if(!/^[\s\xa0]*$/.test(et))throw Error("Unknown base64 encoding at char: "+et)}return j}Ae();for(var Z=0;;){var w=u(-1),Y=u(0),N=u(64),U=u(64);if(U===64&&w===-1)break;a(w<<2|Y>>4),N!=64&&(a(Y<<4&240|N>>2),U!=64&&a(N<<6&192|U))}}function Ae(){if(!oi){oi={};for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),a=["+/=","+/","-_=","-_.","-_"],u=0;5>u;u++){var Z=s.concat(a[u].split(""));Zn[u]=Z;for(var w=0;w<Z.length;w++){var Y=Z[w];oi[Y]===void 0&&(oi[Y]=w)}}}}var Me=typeof Uint8Array=="function",si;function de(s){if(this.g=s,s!==null&&s.length===0)throw Error("ByteString should be constructed with non-empty values")}var Fe=typeof Uint8Array.prototype.slice=="function";function yi(s,a,u){return a===u?si||(si=new Uint8Array(0)):Fe?s.slice(a,u):new Uint8Array(s.subarray(a,u))}var $e=0,ne=0;function Xe(s){if(s.constructor===Uint8Array)return s;if(s.constructor===ArrayBuffer)return new Uint8Array(s);if(s.constructor===Array)return new Uint8Array(s);if(s.constructor===String)return rn(s);if(s.constructor===de){if(s.g==null)var a=si||(si=new Uint8Array(0));else{a=Uint8Array;var u=s.g;u=u==null||Me&&u!=null&&u instanceof Uint8Array?u:typeof u=="string"?rn(u):null,s=s.g=u,a=new a(s)}return a}if(s instanceof Uint8Array)return new Uint8Array(s.buffer,s.byteOffset,s.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Ue(s,a){a=a===void 0?{}:a,a=a.v===void 0?!1:a.v,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.v=a,s&&Dt(this,s)}function Dt(s,a){s.h=Xe(a),s.l=0,s.i=s.h.length,s.g=s.l}Ue.prototype.reset=function(){this.g=this.l};function xe(s){for(var a=128,u=0,Z=0,w=0;4>w&&128<=a;w++)a=s.h[s.g++],u|=(a&127)<<7*w;if(128<=a&&(a=s.h[s.g++],u|=(a&127)<<28,Z|=(a&127)>>4),128<=a)for(w=0;5>w&&128<=a;w++)a=s.h[s.g++],Z|=(a&127)<<7*w+3;if(128>a)return s=u>>>0,a=Z>>>0,(Z=a&2147483648)&&(s=~s+1>>>0,a=~a>>>0,s==0&&(a=a+1>>>0)),s=4294967296*a+(s>>>0),Z?-s:s;s.j=!0,Oi()}function $t(s){s.g>s.i&&(s.j=!0,Je(Error("Tried to read past the end of the data "+s.g+" > "+s.i)))}function Ge(s){var a=s.h,u=a[s.g],Z=u&127;return 128>u?(s.g+=1,$t(s),Z):(u=a[s.g+1],Z|=(u&127)<<7,128>u?(s.g+=2,$t(s),Z):(u=a[s.g+2],Z|=(u&127)<<14,128>u?(s.g+=3,$t(s),Z):(u=a[s.g+3],Z|=(u&127)<<21,128>u?(s.g+=4,$t(s),Z):(u=a[s.g+4],Z|=(u&15)<<28,128>u?(s.g+=5,$t(s),Z>>>0):(s.g+=5,128<=a[s.g++]&&128<=a[s.g++]&&128<=a[s.g++]&&128<=a[s.g++]&&128<=a[s.g++]?(s.j=!0,Oi(),Z):($t(s),Z))))))}function Te(s){var a=s.h[s.g],u=s.h[s.g+1],Z=s.h[s.g+2],w=s.h[s.g+3];return s.g+=4,$t(s),(a<<0|u<<8|Z<<16|w<<24)>>>0}Ue.prototype.m=function(){var s=Te(this),a=2*(s>>31)+1,u=s>>>23&255;return s&=8388607,u==255?s?NaN:1/0*a:u==0?a*Math.pow(2,-149)*s:a*Math.pow(2,u-150)*(s+Math.pow(2,23))};var di=[];function Se(){this.g=new Uint8Array(64),this.h=0}function te(s,a){if(!(s.h+1<s.g.length)){var u=s.g;s.g=new Uint8Array(Math.ceil(1+2*s.g.length)),s.g.set(u)}s.g[s.h++]=a}Se.prototype.length=function(){return this.h},Se.prototype.end=function(){var s=this.g,a=this.h;return this.h=0,yi(s,0,a)};function ii(s,a){for(;127<a;)te(s,a&127|128),a>>>=7;te(s,a)}function ri(s){var a={},u=a.O===void 0?!1:a.O;this.m={v:a.v===void 0?!1:a.v},this.O=u,a=this.m,di.length?(u=di.pop(),a&&(u.v=a.v),s&&Dt(u,s),s=u):s=new Ue(s,a),this.g=s,this.l=this.g.g,this.h=this.i=-1,this.j=!1}ri.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function Ye(s){var a=s.g;if((a=a.g==a.i)||(a=s.j)||(a=s.g,a=a.j||0>a.g||a.g>a.i),a)return!1;s.l=s.g.g;var u=Ge(s.g);return a=u>>>3,u&=7,0<=u&&5>=u?(s.i=a,s.h=u,!0):(s.j=!0,Zi(u,s.l),!1)}function _i(s){switch(s.h){case 0:if(s.h!=0)_i(s);else t:{s=s.g;for(var a=s.g,u=0;10>u;u++){if((s.h[a]&128)===0){s.g=a+1,$t(s);break t}a++}s.j=!0,Oi()}break;case 1:s=s.g,s.g+=8,$t(s);break;case 2:s.h!=2?_i(s):(a=Ge(s.g),s=s.g,s.g+=a,$t(s));break;case 5:s=s.g,s.g+=4,$t(s);break;case 3:a=s.i;do{if(!Ye(s)){s.j=!0,Je(Error("Unmatched start-group tag: stream EOF"));break}if(s.h==4){s.i!=a&&(s.j=!0,Je(Error("Unmatched end-group tag")));break}_i(s)}while(1);break;default:s.j=!0,Zi(s.h,s.l)}}function fi(s,a,u){var Z=s.g.i,w=Ge(s.g),Y=s.g.g+w;if(s.g.i=Y,u(a,s),u=Y-s.g.g,u!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(w+" bytes, instead read "+(w-u)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return s.g.g=Y,s.g.i=Z,a}var li=[];function Gi(){this.h=[],this.i=0,this.g=new Se}function Re(s,a){a.length!==0&&(s.h.push(a),s.i+=a.length)}function ke(s,a,u){ii(s.g,8*a+2),ii(s.g,u.length),Re(s,s.g.end()),Re(s,u)}var ve=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function ae(s){return Object.isFrozen(s)||(ve?s[ve]|=1:s.g!==void 0?s.g|=1:Object.defineProperties(s,{g:{value:1,configurable:!0,writable:!0,enumerable:!1}})),s}function ci(s){return s!==null&&typeof s=="object"&&s.constructor===Object}function le(s){switch(typeof s){case"number":return isFinite(s)?s:String(s);case"object":if(Me&&s!=null&&s instanceof Uint8Array)return ei(s);if(s instanceof de){if(s.g==null)s="";else{var a=s.g;a=a==null||typeof a=="string"?a:Me&&a instanceof Uint8Array?ei(a):null,s=s.g=a}return s}}return s}function ee(s,a){if(s!=null)return Array.isArray(s)||ci(s)?wi(s,a):a(s)}function wi(s,a){if(Array.isArray(s)){for(var u=Array(s.length),Z=0;Z<s.length;Z++)u[Z]=ee(s[Z],a);if(a=Array.isArray(s)){var w;ve?w=s[ve]:w=s.g,a=(w==null?0:w)&1}return a&&ae(u),u}w={};for(u in s)w[u]=ee(s[u],a);return w}function Ze(s){return s=le(s),Array.isArray(s)?wi(s,Ze):s}var Jt;function vt(s,a,u){var Z=Jt;Jt=null,s||(s=Z),Z=this.constructor.ha,s||(s=Z?[Z]:[]),this.i=(Z?0:-1)-(this.constructor.fa||0),this.l=this.g=null,this.u=s;t:{if(Z=this.u.length,s=Z-1,Z&&(Z=this.u[s],ci(Z))){this.j=s-this.i,this.h=Z;break t}a!==void 0&&-1<a?(this.j=Math.max(a,s+1-this.i),this.h=null):this.j=Number.MAX_VALUE}if(u)for(a=0;a<u.length;a++)s=u[a],s<this.j?(s+=this.i,(Z=this.u[s])?Array.isArray(Z)&&ae(Z):this.u[s]=Ie):(ze(this),(Z=this.h[s])?Array.isArray(Z)&&ae(Z):this.h[s]=Ie)}var Ie=Object.freeze(ae([]));function ze(s){var a=s.j+s.i;s.u[a]||(s.h=s.u[a]={})}function ce(s,a,u){return a===-1?null:(u===void 0?0:u)||a>=s.j?s.h?s.h[a]:void 0:s.u[a+s.i]}function Ce(s,a,u){u=u===void 0?!1:u;var Z=ce(s,a,u);return Z==null&&(Z=Ie),Z===Ie&&(Z=ae(Z.slice()),ht(s,a,Z,u)),Z}function lt(s,a){var u=Ce(s,a);if(s.l||(s.l={}),!s.l[a]){for(var Z=0;Z<u.length;Z++)u[Z]=+u[Z];s.l[a]=!0}return u}function It(s,a,u){return s=ce(s,a),s=s==null?s:+s,s==null?u===void 0?0:u:s}function ht(s,a,u,Z){(Z===void 0?0:Z)||a>=s.j?(ze(s),s.h[a]=u):s.u[a+s.i]=u}function ie(s,a,u,Z){u!==Z?ht(s,a,u):ht(s,a,void 0,!1)}function pe(s,a,u){if(u===-1)return null;s.g||(s.g={});var Z=s.g[u];if(Z)return Z;var w=ce(s,u,!1);return w==null?Z:(a=new a(w),s.g[u]=a)}function he(s,a,u){s.g||(s.g={});var Z=s.g[u];if(!Z){var w=Ce(s,u,!1);Z=[];for(var Y=0;Y<w.length;Y++)Z[Y]=new a(w[Y]);s.g[u]=Z}return Z}function Ht(s,a,u,Z,w){var Y=he(s,Z,a);u=u||new Z,s=Ce(s,a),w!=null?(Y.splice(w,0,u),s.splice(w,0,u.u)):(Y.push(u),s.push(u.u))}vt.prototype.toJSON=function(){return wi(this.u,Ze)},vt.prototype.toString=function(){return this.u.toString()};function ye(s,a){return s=ce(s,a),s==null?0:s}function Ee(s,a){return s=ce(s,a),s==null?"":s}function ai(s,a){if(s=s.m){Re(a,a.g.end());for(var u=0;u<s.length;u++)Re(a,s[u])}}var Ii=Symbol();function Fi(s,a,u){return s[Ii]||(s[Ii]=function(Z,w){return a(Z,w,u)})}function Li(s){var a=s[Ii];if(!a){var u=s[ui]||(s[ui]=s());a=function(Z,w){return Qe(Z,w,u)},s[Ii]=a}return a}function Ke(s){var a=s.da;if(a)return Li(a);if(a=s.ia){var u=s.Y;return delete s.Y,Fi(s.W.g,a,u)}}function Ci(s){var a=Ke(s),u=s.W,Z=s.ea;return a?function(w,Y){return Z(w,Y,u,a)}:function(w,Y){return Z(w,Y,u)}}function Tn(s){var a=s[0];switch(s.length){case 2:var u=s[1];return function(At,Vt,Gt){return a(At,Vt,Gt,u)};case 3:var Z=s[1],w=Li(s[2]);return function(At,Vt,Gt){return a(At,Vt,Gt,Z,w)};case 4:var Y=s[1],N=s[3],U=Li(s[2]);return function(At,Vt,Gt){return a(At,Vt,Gt,Y,U,N)};case 5:var j=s[1],et=Fi(j,s[3],s[4]);return function(At,Vt,Gt){return a(At,Vt,Gt,j,et)};case 6:var it=s[1],ut=s[5],pt=Fi(it,s[3],s[4]);return function(At,Vt,Gt){return a(At,Vt,Gt,it,pt,ut)};default:throw Error("Unsupported number of parameters, expected [2-6], got "+s.length)}}var ui=Symbol();function Qe(s,a,u){for(;Ye(a)&&a.h!=4;){var Z=a.i,w=u[Z];if(w)Array.isArray(w)&&(w=u[Z]=Tn(w));else{var Y=u[0];Y&&(Y=Y[Z])&&(w=u[Z]=Ci(Y))}w&&w(a,s,Z)||(w=a,Z=s,Y=w.l,_i(w),w.O||(w=yi(w.g.h,Y,w.g.g),(Y=Z.m)?Y.push(w):Z.m=[w]))}return s}function zi(s,a){var u=new Gi;if(a(s,u),s=u.i+u.g.length(),s===0)u=new Uint8Array(0);else{s=new Uint8Array(s);for(var Z=u.h,w=Z.length,Y=a=0;Y<w;Y++){var N=Z[Y];N.length!==0&&(s.set(N,a),a+=N.length)}Z=u.g,w=Z.h,w!==0&&(s.set(Z.g.subarray(0,w),a),Z.h=0),u.h=[s],u=s}return u}function ln(s,a,u){if(li.length){var Z=li.pop();s&&(Dt(Z.g,s),Z.i=-1,Z.h=-1),s=Z}else s=new ri(s);try{var w=new a;return Qe(w,s,u[ui]||(u[ui]=u()))}finally{a=s.g,a.h=null,a.l=0,a.i=0,a.g=0,a.j=!1,a.v=!1,s.i=-1,s.h=-1,s.j=!1,100>li.length&&li.push(s)}}function ti(s,a,u){if(a=ce(a,u),a!=null){ii(s.g,8*u+5),s=s.g;var Z=a;Z=(u=0>Z?1:0)?-Z:Z,Z===0?0<1/Z?$e=ne=0:(ne=0,$e=2147483648):isNaN(Z)?(ne=0,$e=2147483647):34028234663852886e22<Z?(ne=0,$e=(u<<31|2139095040)>>>0):11754943508222875e-54>Z?(Z=Math.round(Z/Math.pow(2,-149)),ne=0,$e=(u<<31|Z)>>>0):(a=Math.floor(Math.log(Z)/Math.LN2),Z*=Math.pow(2,-a),Z=Math.round(8388608*Z),16777216<=Z&&++a,ne=0,$e=(u<<31|a+127<<23|Z&8388607)>>>0),u=$e,te(s,u>>>0&255),te(s,u>>>8&255),te(s,u>>>16&255),te(s,u>>>24&255)}}function Hn(s,a,u){if(s.h!==1)return!1;var Z=s.g;s=Te(Z);var w=Te(Z);Z=2*(w>>31)+1;var Y=w>>>20&2047;return s=4294967296*(w&1048575)+s,ie(a,u,Y==2047?s?NaN:1/0*Z:Y==0?Z*Math.pow(2,-1074)*s:Z*Math.pow(2,Y-1075)*(s+4503599627370496),0),!0}function mi(s,a,u){return s.h!==5?!1:(ht(a,u,s.g.m()),!0)}function Ki(s,a,u){if(s.h!==5&&s.h!==2)return!1;if(a=Ce(a,u),s.h==2){u=Ue.prototype.m;var Z=Ge(s.g);for(Z=s.g.g+Z;s.g.g<Z;)a.push(u.call(s.g))}else a.push(s.g.m());return!0}function un(s,a,u){return s.h!==5?!1:(s=s.g.m(),ie(a,u,s,0),!0)}function Nn(s,a,u){return s.h!==0?!1:(ht(a,u,xe(s.g)),!0)}function Vi(s,a,u){return s.h!==0?!1:(ht(a,u,Ge(s.g)),!0)}function mn(s,a,u){return s.h!==0?!1:(s=Ge(s.g),ie(a,u,s,0),!0)}function to(s,a,u){return s.h!==0?!1:(s=!!Ge(s.g),ie(a,u,s,!1),!0)}function eo(s,a,u){if(s.h!==2)return!1;var Z=Ge(s.g);s=s.g;var w=s.g;s.g+=Z,$t(s),s=s.h;var Y;if(Xn)(Y=sn)||(Y=sn=new TextDecoder("utf-8",{fatal:!1})),Y=Y.decode(s.subarray(w,w+Z));else{Z=w+Z;for(var N=[],U=null,j,et,it;w<Z;)j=s[w++],128>j?N.push(j):224>j?w>=Z?N.push(65533):(et=s[w++],194>j||(et&192)!==128?(w--,N.push(65533)):N.push((j&31)<<6|et&63)):240>j?w>=Z-1?N.push(65533):(et=s[w++],(et&192)!==128||j===224&&160>et||j===237&&160<=et||((Y=s[w++])&192)!==128?(w--,N.push(65533)):N.push((j&15)<<12|(et&63)<<6|Y&63)):244>=j?w>=Z-2?N.push(65533):(et=s[w++],(et&192)!==128||(j<<28)+(et-144)>>30!==0||((Y=s[w++])&192)!==128||((it=s[w++])&192)!==128?(w--,N.push(65533)):(j=(j&7)<<18|(et&63)<<12|(Y&63)<<6|it&63,j-=65536,N.push((j>>10&1023)+55296,(j&1023)+56320))):N.push(65533),8192<=N.length&&(U=An(U,N),N.length=0);Y=An(U,N)}return ht(a,u,Y),!0}function hn(s,a,u,Z,w){return s.h!==2?!1:(s=fi(s,new Z,w),a.g||(a.g={}),Z=s&&s.u,a.g[u]=s,ht(a,u,Z,!1),!0)}function yn(s,a,u,Z,w){return s.h!==2?!1:(s=fi(s,new Z,w),Ht(a,u,s,Z,void 0),!0)}function A(s,a,u){return s.h!==0?!1:(ht(a,u,xe(s.g)),!0)}function X(s){vt.call(this,s)}rt(X,vt);function R(){return{1:Vi,2:mi,3:eo,4:eo}}function k(s,a){var u=ce(s,1);if(u!=null&&u!=null){ii(a.g,8);var Z=a.g;if(0<=u)ii(Z,u);else{for(var w=0;9>w;w++)te(Z,u&127|128),u>>=7;te(Z,1)}}ti(a,s,2),Z=ce(s,3),Z!=null&&ke(a,3,Fn(Z)),Z=ce(s,4),Z!=null&&ke(a,4,Fn(Z)),ai(s,a)}function $(s){vt.call(this,s,-1,q)}rt($,vt),$.prototype.addClassification=function(s,a){return Ht(this,1,s,X,a),this};function Ct(){return{1:[yn,X,R]}}var q=[1];function at(s){vt.call(this,s)}rt(at,vt);function Zt(){return{1:mi,2:mi,3:mi,4:mi,5:mi}}function St(s,a){ti(a,s,1),ti(a,s,2),ti(a,s,3),ti(a,s,4),ti(a,s,5),ai(s,a)}function Et(s){vt.call(this,s,-1,re)}rt(Et,vt);function kt(){return{1:[yn,at,Zt]}}var re=[1];function zt(s){vt.call(this,s)}rt(zt,vt);function Yt(){return{1:mi,2:mi,3:mi,4:mi,5:mi,6:Nn}}function Ut(s,a){ti(a,s,1),ti(a,s,2),ti(a,s,3),ti(a,s,4),ti(a,s,5);var u=ce(s,6);if(u!=null&&u!=null){ii(a.g,48);var Z=a.g,w=u;u=0>w,w=Math.abs(w);var Y=w>>>0;for(w=Math.floor((w-Y)/4294967296),w>>>=0,u&&(w=~w>>>0,Y=(~Y>>>0)+1,4294967295<Y&&(Y=0,w++,4294967295<w&&(w=0))),$e=Y,ne=w,u=$e,Y=ne;0<Y||127<u;)te(Z,u&127|128),u=(u>>>7|Y<<25)>>>0,Y>>>=7;te(Z,u)}ai(s,a)}function oe(s){vt.call(this,s,-1,De)}rt(oe,vt);function be(){return{1:A,2:A,3:Ki,4:[hn,fe,Ve],5:Vi,6:Vi,7:Ki,8:Ki,9:Ki}}function fe(s){vt.call(this,s)}rt(fe,vt);function Ve(){return{1:mi,2:mi,3:mi}}var De=[3,7,8,9];function b(s){vt.call(this,s)}rt(b,vt);function f(){return{1:un,2:un,3:un}}function W(s){vt.call(this,s)}rt(W,vt);function M(){return{1:un,2:un,3:un}}function Q(s){vt.call(this,s)}rt(Q,vt);function tt(){return{1:mn,2:[hn,W,M],3:[hn,b,f],4:to}}function D(s){vt.call(this,s,-1,mt)}rt(D,vt);function st(){return{1:mn,2:[yn,Q,tt],3:un,4:Ki,5:Ki,6:Ki}}var mt=[2,4,5,6];function g(s){vt.call(this,s,-1,v)}rt(g,vt);function B(){return{1:mn,2:[yn,D,st],3:[hn,oe,be],4:Hn,5:Ki,6:Ki}}var v=[2,5,6];function x(s,a,u){if(u=s.createShader(u===0?s.VERTEX_SHADER:s.FRAGMENT_SHADER),s.shaderSource(u,a),s.compileShader(u),!s.getShaderParameter(u,s.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+s.getShaderInfoLog(u));return u}function J(s){return he(s,X,1).map(function(a){return{index:ye(a,1),$:It(a,2),label:ce(a,3)!=null?Ee(a,3):void 0,displayName:ce(a,4)!=null?Ee(a,4):void 0}})}function O(s){return{x:It(s,1),y:It(s,2),z:It(s,3),visibility:ce(s,4)!=null?It(s,4):void 0}}function E(s,a){this.h=s,this.g=a,this.l=0}function gt(s,a,u){return ot(s,a),typeof s.g.canvas.transferToImageBitmap=="function"?Promise.resolve(s.g.canvas.transferToImageBitmap()):u?Promise.resolve(s.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(s.g.canvas):(s.i===void 0&&(s.i=document.createElement("canvas")),new Promise(function(Z){s.i.height=s.g.canvas.height,s.i.width=s.g.canvas.width,s.i.getContext("2d",{}).drawImage(s.g.canvas,0,0,s.g.canvas.width,s.g.canvas.height),Z(s.i)}))}function ot(s,a){var u=s.g;if(s.m===void 0){var Z=x(u,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),w=x(u,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Y=u.createProgram();if(u.attachShader(Y,Z),u.attachShader(Y,w),u.linkProgram(Y),!u.getProgramParameter(Y,u.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+u.getProgramInfoLog(Y));Z=s.m=Y,u.useProgram(Z),w=u.getUniformLocation(Z,"sampler0"),s.j={J:u.getAttribLocation(Z,"aVertex"),I:u.getAttribLocation(Z,"aTex"),ja:w},s.s=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,s.s),u.enableVertexAttribArray(s.j.J),u.vertexAttribPointer(s.j.J,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),s.o=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,s.o),u.enableVertexAttribArray(s.j.I),u.vertexAttribPointer(s.j.I,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),u.uniform1i(w,0)}Z=s.j,u.useProgram(s.m),u.canvas.width=a.width,u.canvas.height=a.height,u.viewport(0,0,a.width,a.height),u.activeTexture(u.TEXTURE0),s.h.bindTexture2d(a.glName),u.enableVertexAttribArray(Z.J),u.bindBuffer(u.ARRAY_BUFFER,s.s),u.vertexAttribPointer(Z.J,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(Z.I),u.bindBuffer(u.ARRAY_BUFFER,s.o),u.vertexAttribPointer(Z.I,2,u.FLOAT,!1,0,0),u.bindFramebuffer(u.DRAW_FRAMEBUFFER?u.DRAW_FRAMEBUFFER:u.FRAMEBUFFER,null),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.colorMask(!0,!0,!0,!0),u.drawArrays(u.TRIANGLE_FAN,0,4),u.disableVertexAttribArray(Z.J),u.disableVertexAttribArray(Z.I),u.bindBuffer(u.ARRAY_BUFFER,null),s.h.bindTexture2d(0)}function yt(s){this.g=s}var Bt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Qt(s,a){return a+s}function wt(s,a){window[s]=a}function bt(s){var a=document.createElement("script");return a.setAttribute("src",s),a.setAttribute("crossorigin","anonymous"),new Promise(function(u){a.addEventListener("load",function(){u()},!1),a.addEventListener("error",function(){u()},!1),document.body.appendChild(a)})}function Rt(){return ft(function(s){switch(s.g){case 1:return s.m=2,_(s,WebAssembly.instantiate(Bt),4);case 4:s.g=3,s.m=0;break;case 2:return s.m=0,s.j=null,s.return(!1);case 3:return s.return(!0)}})}function Ft(s){if(this.g=s,this.listeners={},this.j={},this.G={},this.m={},this.s={},this.H=this.o=this.S=!0,this.D=Promise.resolve(),this.R="",this.C={},this.locateFile=s&&s.locateFile||Qt,typeof window=="object")var a=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")a=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.T=a,s.options){a=m(Object.keys(s.options));for(var u=a.next();!u.done;u=a.next()){u=u.value;var Z=s.options[u].default;Z!==void 0&&(this.j[u]=typeof Z=="function"?Z():Z)}}}e=Ft.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Nt(s){var a,u,Z,w,Y,N,U,j,et,it,ut;return ft(function(pt){switch(pt.g){case 1:return s.S?(a=s.g.files===void 0?[]:typeof s.g.files=="function"?s.g.files(s.j):s.g.files,_(pt,Rt(),2)):pt.return();case 2:if(u=pt.h,typeof window=="object")return wt("createMediapipeSolutionsWasm",{locateFile:s.locateFile}),wt("createMediapipeSolutionsPackedAssets",{locateFile:s.locateFile}),N=a.filter(function(At){return At.data!==void 0}),U=a.filter(function(At){return At.data===void 0}),j=Promise.all(N.map(function(At){var Vt=V(s,At.url);if(At.path!==void 0){var Gt=At.path;Vt=Vt.then(function(_t){return s.overrideFile(Gt,_t),Promise.resolve(_t)})}return Vt})),et=Promise.all(U.map(function(At){return At.simd===void 0||At.simd&&u||!At.simd&&!u?bt(s.locateFile(At.url,s.T)):Promise.resolve()})).then(function(){var At,Vt,Gt;return ft(function(_t){if(_t.g==1)return At=window.createMediapipeSolutionsWasm,Vt=window.createMediapipeSolutionsPackedAssets,Gt=s,_(_t,At(Vt),2);Gt.h=_t.h,_t.g=0})}),it=function(){return ft(function(At){return s.g.graph&&s.g.graph.url?At=_(At,V(s,s.g.graph.url),0):(At.g=0,At=void 0),At})}(),_(pt,Promise.all([et,j,it]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Z=a.filter(function(At){return At.simd===void 0||At.simd&&u||!At.simd&&!u}).map(function(At){return s.locateFile(At.url,s.T)}),importScripts.apply(null,y(Z)),w=s,_(pt,createMediapipeSolutionsWasm(Module),6);case 6:w.h=pt.h,s.l=new OffscreenCanvas(1,1),s.h.canvas=s.l,Y=s.h.GL.createContext(s.l,{antialias:!1,alpha:!1,ga:typeof WebGL2RenderingContext!="undefined"?2:1}),s.h.GL.makeContextCurrent(Y),pt.g=4;break;case 7:if(s.l=document.createElement("canvas"),ut=s.l.getContext("webgl2",{}),!ut&&(ut=s.l.getContext("webgl",{}),!ut))return alert("Failed to create WebGL canvas context when passing video frame."),pt.return();s.F=ut,s.h.canvas=s.l,s.h.createContext(s.l,!0,!0,{});case 4:s.i=new s.h.SolutionWasm,s.S=!1,pt.g=0}})}function Mt(s){var a,u,Z,w,Y,N,U,j;return ft(function(et){if(et.g==1){if(s.g.graph&&s.g.graph.url&&s.R===s.g.graph.url)return et.return();if(s.o=!0,!s.g.graph||!s.g.graph.url){et.g=2;return}return s.R=s.g.graph.url,_(et,V(s,s.g.graph.url),3)}for(et.g!=2&&(a=et.h,s.i.loadGraph(a)),u=m(Object.keys(s.C)),Z=u.next();!Z.done;Z=u.next())w=Z.value,s.i.overrideFile(w,s.C[w]);if(s.C={},s.g.listeners)for(Y=m(s.g.listeners),N=Y.next();!N.done;N=Y.next())U=N.value,T(s,U);j=s.j,s.j={},s.setOptions(j),et.g=0})}e.reset=function(){var s=this;return ft(function(a){s.i&&(s.i.reset(),s.m={},s.s={}),a.g=0})},e.setOptions=function(s,a){var u=this;if(a=a||this.g.options){for(var Z=[],w=[],Y={},N=m(Object.keys(s)),U=N.next();!U.done;Y={L:Y.L,M:Y.M},U=N.next()){var j=U.value;j in this.j&&this.j[j]===s[j]||(this.j[j]=s[j],U=a[j],U!==void 0&&(U.onChange&&(Y.L=U.onChange,Y.M=s[j],Z.push(function(et){return function(){var it;return ft(function(ut){if(ut.g==1)return _(ut,et.L(et.M),2);it=ut.h,it===!0&&(u.o=!0),ut.g=0})}}(Y))),U.graphOptionXref&&(j={valueNumber:U.type===1?s[j]:0,valueBoolean:U.type===0?s[j]:!1,valueString:U.type===2?s[j]:""},U=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),U.graphOptionXref),j),w.push(U))))}(Z.length!==0||w.length!==0)&&(this.o=!0,this.B=(this.B===void 0?[]:this.B).concat(w),this.A=(this.A===void 0?[]:this.A).concat(Z))}};function d(s){var a,u,Z,w,Y,N,U;return ft(function(j){switch(j.g){case 1:if(!s.o)return j.return();if(!s.A){j.g=2;break}a=m(s.A),u=a.next();case 3:if(u.done){j.g=5;break}return Z=u.value,_(j,Z(),4);case 4:u=a.next(),j.g=3;break;case 5:s.A=void 0;case 2:if(s.B){for(w=new s.h.GraphOptionChangeRequestList,Y=m(s.B),N=Y.next();!N.done;N=Y.next())U=N.value,w.push_back(U);s.i.changeOptions(w),w.delete(),s.B=void 0}s.o=!1,j.g=0}})}e.initialize=function(){var s=this;return ft(function(a){return a.g==1?_(a,Nt(s),2):a.g!=3?_(a,Mt(s),3):_(a,d(s),0)})};function V(s,a){var u,Z;return ft(function(w){return a in s.G?w.return(s.G[a]):(u=s.locateFile(a,""),Z=fetch(u).then(function(Y){return Y.arrayBuffer()}),s.G[a]=Z,w.return(Z))})}e.overrideFile=function(s,a){this.i?this.i.overrideFile(s,a):this.C[s]=a},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(s,a){var u=this,Z,w,Y,N,U,j,et,it,ut;return ft(function(pt){switch(pt.g){case 1:return u.g.inputs?(Z=1e3*(a==null?performance.now():a),_(pt,u.D,2)):pt.return();case 2:return _(pt,u.initialize(),3);case 3:for(w=new u.h.PacketDataList,Y=m(Object.keys(s)),N=Y.next();!N.done;N=Y.next())if(U=N.value,j=u.g.inputs[U]){t:{var At=s[U];switch(j.type){case"video":var Vt=u.m[j.stream];if(Vt||(Vt=new E(u.h,u.F),u.m[j.stream]=Vt),Vt.l===0&&(Vt.l=Vt.h.createTexture()),typeof HTMLVideoElement!="undefined"&&At instanceof HTMLVideoElement)var Gt=At.videoWidth,_t=At.videoHeight;else typeof HTMLImageElement!="undefined"&&At instanceof HTMLImageElement?(Gt=At.naturalWidth,_t=At.naturalHeight):(Gt=At.width,_t=At.height);_t={glName:Vt.l,width:Gt,height:_t},Gt=Vt.g,Gt.canvas.width=_t.width,Gt.canvas.height=_t.height,Gt.activeTexture(Gt.TEXTURE0),Vt.h.bindTexture2d(Vt.l),Gt.texImage2D(Gt.TEXTURE_2D,0,Gt.RGBA,Gt.RGBA,Gt.UNSIGNED_BYTE,At),Vt.h.bindTexture2d(0),Vt=_t;break t;case"detections":for(Vt=u.m[j.stream],Vt||(Vt=new yt(u.h),u.m[j.stream]=Vt),Vt.data||(Vt.data=new Vt.g.DetectionListData),Vt.data.reset(At.length),_t=0;_t<At.length;++_t){Gt=At[_t];var ue=Vt.data,me=ue.setBoundingBox,je=_t,Pi=Gt.U,_e=new zt;if(ht(_e,1,Pi.aa),ht(_e,2,Pi.ba),ht(_e,3,Pi.height),ht(_e,4,Pi.width),ht(_e,5,Pi.rotation),ht(_e,6,Pi.Z),Pi=zi(_e,Ut),me.call(ue,je,Pi),Gt.P)for(ue=0;ue<Gt.P.length;++ue){_e=Gt.P[ue];var Rn=!!_e.visibility;me=Vt.data,je=me.addNormalizedLandmark,Pi=_t,_e=Object.assign(Object.assign({},_e),{visibility:Rn?_e.visibility:0}),Rn=new at,ht(Rn,1,_e.x),ht(Rn,2,_e.y),ht(Rn,3,_e.z),_e.visibility&&ht(Rn,4,_e.visibility),_e=zi(Rn,St),je.call(me,Pi,_e)}if(Gt.N)for(ue=0;ue<Gt.N.length;++ue)me=Vt.data,je=me.addClassification,Pi=_t,_e=Gt.N[ue],Rn=new X,ht(Rn,2,_e.$),_e.index&&ht(Rn,1,_e.index),_e.label&&ht(Rn,3,_e.label),_e.displayName&&ht(Rn,4,_e.displayName),_e=zi(Rn,k),je.call(me,Pi,_e)}Vt=Vt.data;break t;default:Vt={}}}switch(et=Vt,it=j.stream,j.type){case"video":w.pushTexture2d(Object.assign(Object.assign({},et),{stream:it,timestamp:Z}));break;case"detections":ut=et,ut.stream=it,ut.timestamp=Z,w.pushDetectionList(ut);break;default:throw Error("Unknown input config type: '"+j.type+"'")}}return u.i.send(w),_(pt,u.D,4);case 4:w.delete(),pt.g=0}})};function S(s,a,u){var Z,w,Y,N,U,j,et,it,ut,pt,At,Vt,Gt,_t;return ft(function(ue){switch(ue.g){case 1:if(!u)return ue.return(a);for(Z={},w=0,Y=m(Object.keys(u)),N=Y.next();!N.done;N=Y.next())U=N.value,j=u[U],typeof j!="string"&&j.type==="texture"&&a[j.stream]!==void 0&&++w;1<w&&(s.H=!1),et=m(Object.keys(u)),N=et.next();case 2:if(N.done){ue.g=4;break}if(it=N.value,ut=u[it],typeof ut=="string")return Gt=Z,_t=it,_(ue,F(s,it,a[ut]),14);if(pt=a[ut.stream],ut.type==="detection_list"){if(pt){for(var me=pt.getRectList(),je=pt.getLandmarksList(),Pi=pt.getClassificationsList(),_e=[],Rn=0;Rn<me.size();++Rn){var As=ln(me.get(Rn),zt,Yt);As={U:{aa:It(As,1),ba:It(As,2),height:It(As,3),width:It(As,4),rotation:It(As,5,0),Z:ye(As,6)},P:he(ln(je.get(Rn),Et,kt),at,1).map(O),N:J(ln(Pi.get(Rn),$,Ct))},_e.push(As)}me=_e}else me=[];Z[it]=me,ue.g=7;break}if(ut.type==="proto_list"){if(pt){for(me=Array(pt.size()),je=0;je<pt.size();je++)me[je]=pt.get(je);pt.delete()}else me=[];Z[it]=me,ue.g=7;break}if(pt===void 0){ue.g=3;break}if(ut.type==="float_list"){Z[it]=pt,ue.g=7;break}if(ut.type==="proto"){Z[it]=pt,ue.g=7;break}if(ut.type!=="texture")throw Error("Unknown output config type: '"+ut.type+"'");return At=s.s[it],At||(At=new E(s.h,s.F),s.s[it]=At),_(ue,gt(At,pt,s.H),13);case 13:Vt=ue.h,Z[it]=Vt;case 7:ut.transform&&Z[it]&&(Z[it]=ut.transform(Z[it])),ue.g=3;break;case 14:Gt[_t]=ue.h;case 3:N=et.next(),ue.g=2;break;case 4:return ue.return(Z)}})}function F(s,a,u){var Z;return ft(function(w){return typeof u=="number"||u instanceof Uint8Array||u instanceof s.h.Uint8BlobList?w.return(u):u instanceof s.h.Texture2dDataOut?(Z=s.s[a],Z||(Z=new E(s.h,s.F),s.s[a]=Z),w.return(gt(Z,u,s.H))):w.return(void 0)})}function T(s,a){for(var u=a.name||"$",Z=[].concat(y(a.wants)),w=new s.h.StringList,Y=m(a.wants),N=Y.next();!N.done;N=Y.next())w.push_back(N.value);Y=s.h.PacketListener.implement({onResults:function(U){for(var j={},et=0;et<a.wants.length;++et)j[Z[et]]=U.get(et);var it=s.listeners[u];it&&(s.D=S(s,j,a.outs).then(function(ut){ut=it(ut);for(var pt=0;pt<a.wants.length;++pt){var At=j[Z[pt]];typeof At=="object"&&At.hasOwnProperty&&At.hasOwnProperty("delete")&&At.delete()}ut&&(s.D=ut)}))}}),s.i.attachMultiListener(w,Y),w.delete()}e.onResults=function(s,a){this.listeners[a||"$"]=s},Tt("Solution",Ft),Tt("OptionType",{BOOL:0,NUMBER:1,ca:2,0:"BOOL",1:"NUMBER",2:"STRING"});function c(s){var a=ye(s,1),u=pe(s,b,3);return u={x:It(u,1),y:It(u,2),depth:It(u,3)},s=pe(s,W,2),{id:a,point2d:u,point3d:{x:It(s,1),y:It(s,2),z:It(s,3)}}}function h(s){var a=ln(s,g,B);s=[],a=he(a,D,2);for(var u=0;u<a.length;u++)s.push({id:ye(a[u],1),keypoints:he(a[u],Q,2).map(c),visibility:It(a[u],3),scale:lt(a[u],6),translation:lt(a[u],5),rotation:lt(a[u],4)});return s}function G(s){switch(s){case"Camera":return"object_detection_3d_camera.tflite";case"Chair":return"object_detection_3d_chair.tflite";case"Cup":return"object_detection_3d_cup.tflite";default:return"object_detection_3d_sneakers.tflite"}}function r(s){switch(s){case"Camera":return"Camera";case"Chair":return"Chair";case"Cup":return"Coffee cup, Mug";default:return"Footwear"}}var C={focalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_x"}},focalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_y"}},principalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_x"}},principalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_y"}},allowedLabels:{type:2,graphOptionXref:{calculatorName:"ConstantSidePacketCalculatorAllowedLabels",calculatorType:"ConstantSidePacketCalculator",fieldName:"string_value"}}};function p(s){var a=this;s=s||{},this.g=new Ft({locateFile:s.locateFile,files:[{url:"objectron_solution_packed_assets_loader.js"},{simd:!1,url:"objectron_solution_wasm_bin.js"},{simd:!0,url:"objectron_solution_simd_wasm_bin.js"}],graph:{url:"objectron.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["lifted_objects","image_transformed"],outs:{image:"image_transformed",objectDetections:{type:"proto",stream:"lifted_objects",transform:h}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,default:!1,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumObjects:{type:1,default:5,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorMaxNumObjects",fieldName:"int_value"}},staticImageMode:{type:0,default:!0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"objectrongpusubgraph__ConstantSidePacketCalculator",fieldName:"bool_value"}},minDetectionConfidence:{type:1,default:.5,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"objectrongpusubgraph__objectdetectionoidv4subgraph__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,default:.99,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"objectrongpusubgraph__boxlandmarksubgraph__ThresholdingCalculator",fieldName:"threshold"}},modelName:{default:"Shoe",onChange:function(u){var Z,w,Y,N;return ft(function(U){return U.g==1?(Z=u,a.g.setOptions({allowedLabels:r(Z)},C),w=G(Z),Y="object_detection_3d.tflite",_(U,V(a.g,w),2)):(N=U.h,a.g.overrideFile(Y,N),U.return(!0))})}},focalLength:{default:[1,1],onChange:function(u){var Z;return ft(function(w){return Z=u,a.h=Z,a.g.setOptions({focalX:Z[0],focalY:Z[1]},C),w.return(!0)})}},principalPoint:{default:[0,0],onChange:function(u){var Z;return ft(function(w){return Z=u,a.i=Z,a.g.setOptions({principalX:Z[0],principalY:Z[1]},C),w.return(!0)})}},imageSize:{onChange:function(u){var Z,w,Y,N;return ft(function(U){if(a.h===void 0||a.i===void 0)return console.error('"focalLength" and "principalPoint" must be set if setting image size'),U.return();Z=u,w=[Z[0]/2,Z[1]/2],Y=[a.h[0]/w[0],a.h[1]/w[1]],N=[a.i[0]/w[0],a.i[1]/w[1]],a.setOptions({focalLength:Y,principalPoint:N}),U.g=0})}}}})}e=p.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(s){this.g.onResults(s)},e.initialize=function(){var s=this;return ft(function(a){return _(a,s.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(s){var a=this;return ft(function(u){return _(u,a.g.send(s),0)})},e.setOptions=function(s){this.g.setOptions(s)},Tt("Objectron",p),Tt("BOX_CONNECTIONS",[[1,2],[2,4],[4,3],[3,1],[5,6],[6,8],[8,7],[7,5],[1,5],[2,6],[3,7],[4,8]]),Tt("BOX_KEYPOINTS",{CENTER:0,BACK_BOTTOM_LEFT:1,FRONT_BOTTOM_LEFT:2,BACK_TOP_LEFT:3,FRONT_TOP_LEFT:4,BACK_BOTTOM_RIGHT:5,FRONT_BOTTOM_RIGHT:6,BACK_TOP_RIGHT:7,FRONT_TOP_RIGHT:8}),Tt("VERSION","0.4.1636596145")}).call(dI);const aI={};(function(){var e;function t(g){var B=0;return function(){return B<g.length?{done:!1,value:g[B++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,B,v){return g==Array.prototype||g==Object.prototype||(g[B]=v.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var B=0;B<g.length;++B){var v=g[B];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var o=n(this);function l(g,B){if(B)t:{var v=o;g=g.split(".");for(var x=0;x<g.length-1;x++){var J=g[x];if(!(J in v))break t;v=v[J]}g=g[g.length-1],x=v[g],B=B(x),B!=x&&B!=null&&i(v,g,{configurable:!0,writable:!0,value:B})}}l("Symbol",function(g){function B(O){if(this instanceof B)throw new TypeError("Symbol is not a constructor");return new v(x+(O||"")+"_"+J++,O)}function v(O,E){this.g=O,i(this,"description",{configurable:!0,writable:!0,value:E})}if(g)return g;v.prototype.toString=function(){return this.g};var x="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",J=0;return B}),l("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var B="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<B.length;v++){var x=o[B[v]];typeof x=="function"&&typeof x.prototype[g]!="function"&&i(x.prototype,g,{configurable:!0,writable:!0,value:function(){return I(t(this))}})}return g});function I(g){return g={next:g},g[Symbol.iterator]=function(){return this},g}function m(g){var B=typeof Symbol!="undefined"&&Symbol.iterator&&g[Symbol.iterator];return B?B.call(g):{next:t(g)}}function y(g){if(!(g instanceof Array)){g=m(g);for(var B,v=[];!(B=g.next()).done;)v.push(B.value);g=v}return g}var H=typeof Object.create=="function"?Object.create:function(g){function B(){}return B.prototype=g,new B},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var K;t:{var nt={a:!0},dt={};try{dt.__proto__=nt,K=dt.a;break t}catch{}K=!1}L=K?function(g,B){if(g.__proto__=B,g.__proto__!==B)throw new TypeError(g+" is not extensible");return g}:null}var P=L;function rt(g,B){if(g.prototype=H(B.prototype),g.prototype.constructor=g,P)P(g,B);else for(var v in B)if(v!="prototype")if(Object.defineProperties){var x=Object.getOwnPropertyDescriptor(B,v);x&&Object.defineProperty(g,v,x)}else g[v]=B[v];g.ea=B.prototype}function Xt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Wt(g){if(g.l)throw new TypeError("Generator is already running");g.l=!0}Xt.prototype.o=function(g){this.h=g};function xt(g,B){g.j={U:B,V:!0},g.g=g.m||g.s}Xt.prototype.return=function(g){this.j={return:g},this.g=this.s};function _(g,B,v){return g.g=v,{value:B}}function qe(g){this.g=new Xt,this.h=g}function ni(g,B){Wt(g.g);var v=g.g.i;return v?we(g,"return"in v?v.return:function(x){return{value:x,done:!0}},B,g.g.return):(g.g.return(B),qt(g))}function we(g,B,v,x){try{var J=B.call(g.g.i,v);if(!(J instanceof Object))throw new TypeError("Iterator result "+J+" is not an object");if(!J.done)return g.g.l=!1,J;var O=J.value}catch(E){return g.g.i=null,xt(g.g,E),qt(g)}return g.g.i=null,x.call(g.g,O),qt(g)}function qt(g){for(;g.g.g;)try{var B=g.h(g.g);if(B)return g.g.l=!1,{value:B.value,done:!1}}catch(v){g.g.h=void 0,xt(g.g,v)}if(g.g.l=!1,g.g.j){if(B=g.g.j,g.g.j=null,B.V)throw B.U;return{value:B.return,done:!0}}return{value:void 0,done:!0}}function Bn(g){this.next=function(B){return Wt(g.g),g.g.i?B=we(g,g.g.i.next,B,g.g.o):(g.g.o(B),B=qt(g)),B},this.throw=function(B){return Wt(g.g),g.g.i?B=we(g,g.g.i.throw,B,g.g.o):(xt(g.g,B),B=qt(g)),B},this.return=function(B){return ni(g,B)},this[Symbol.iterator]=function(){return this}}function ge(g){function B(x){return g.next(x)}function v(x){return g.throw(x)}return new Promise(function(x,J){function O(E){E.done?x(E.value):Promise.resolve(E.value).then(B,v).then(O,J)}O(g.next())})}function ft(g){return ge(new Bn(new qe(g)))}l("Promise",function(g){function B(E){this.h=0,this.i=void 0,this.g=[],this.o=!1;var gt=this.j();try{E(gt.resolve,gt.reject)}catch(ot){gt.reject(ot)}}function v(){this.g=null}function x(E){return E instanceof B?E:new B(function(gt){gt(E)})}if(g)return g;v.prototype.h=function(E){if(this.g==null){this.g=[];var gt=this;this.i(function(){gt.l()})}this.g.push(E)};var J=o.setTimeout;v.prototype.i=function(E){J(E,0)},v.prototype.l=function(){for(;this.g&&this.g.length;){var E=this.g;this.g=[];for(var gt=0;gt<E.length;++gt){var ot=E[gt];E[gt]=null;try{ot()}catch(yt){this.j(yt)}}}this.g=null},v.prototype.j=function(E){this.i(function(){throw E})},B.prototype.j=function(){function E(yt){return function(Bt){ot||(ot=!0,yt.call(gt,Bt))}}var gt=this,ot=!1;return{resolve:E(this.C),reject:E(this.l)}},B.prototype.C=function(E){if(E===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(E instanceof B)this.F(E);else{t:switch(typeof E){case"object":var gt=E!=null;break t;case"function":gt=!0;break t;default:gt=!1}gt?this.v(E):this.m(E)}},B.prototype.v=function(E){var gt=void 0;try{gt=E.then}catch(ot){this.l(ot);return}typeof gt=="function"?this.G(gt,E):this.m(E)},B.prototype.l=function(E){this.s(2,E)},B.prototype.m=function(E){this.s(1,E)},B.prototype.s=function(E,gt){if(this.h!=0)throw Error("Cannot settle("+E+", "+gt+"): Promise already settled in state"+this.h);this.h=E,this.i=gt,this.h===2&&this.D(),this.A()},B.prototype.D=function(){var E=this;J(function(){if(E.B()){var gt=o.console;typeof gt!="undefined"&&gt.error(E.i)}},1)},B.prototype.B=function(){if(this.o)return!1;var E=o.CustomEvent,gt=o.Event,ot=o.dispatchEvent;return typeof ot=="undefined"?!0:(typeof E=="function"?E=new E("unhandledrejection",{cancelable:!0}):typeof gt=="function"?E=new gt("unhandledrejection",{cancelable:!0}):(E=o.document.createEvent("CustomEvent"),E.initCustomEvent("unhandledrejection",!1,!0,E)),E.promise=this,E.reason=this.i,ot(E))},B.prototype.A=function(){if(this.g!=null){for(var E=0;E<this.g.length;++E)O.h(this.g[E]);this.g=null}};var O=new v;return B.prototype.F=function(E){var gt=this.j();E.J(gt.resolve,gt.reject)},B.prototype.G=function(E,gt){var ot=this.j();try{E.call(gt,ot.resolve,ot.reject)}catch(yt){ot.reject(yt)}},B.prototype.then=function(E,gt){function ot(wt,bt){return typeof wt=="function"?function(Rt){try{yt(wt(Rt))}catch(Ft){Bt(Ft)}}:bt}var yt,Bt,Qt=new B(function(wt,bt){yt=wt,Bt=bt});return this.J(ot(E,yt),ot(gt,Bt)),Qt},B.prototype.catch=function(E){return this.then(void 0,E)},B.prototype.J=function(E,gt){function ot(){switch(yt.h){case 1:E(yt.i);break;case 2:gt(yt.i);break;default:throw Error("Unexpected state: "+yt.h)}}var yt=this;this.g==null?O.h(ot):this.g.push(ot),this.o=!0},B.resolve=x,B.reject=function(E){return new B(function(gt,ot){ot(E)})},B.race=function(E){return new B(function(gt,ot){for(var yt=m(E),Bt=yt.next();!Bt.done;Bt=yt.next())x(Bt.value).J(gt,ot)})},B.all=function(E){var gt=m(E),ot=gt.next();return ot.done?x([]):new B(function(yt,Bt){function Qt(Rt){return function(Ft){wt[Rt]=Ft,bt--,bt==0&&yt(wt)}}var wt=[],bt=0;do wt.push(void 0),bt++,x(ot.value).J(Qt(wt.length-1),Bt),ot=gt.next();while(!ot.done)})},B});function Ni(g,B){g instanceof String&&(g+="");var v=0,x=!1,J={next:function(){if(!x&&v<g.length){var O=v++;return{value:B(O,g[O]),done:!1}}return x=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}var Jn=typeof Object.assign=="function"?Object.assign:function(g,B){for(var v=1;v<arguments.length;v++){var x=arguments[v];if(x)for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(g[J]=x[J])}return g};l("Object.assign",function(g){return g||Jn}),l("Object.is",function(g){return g||function(B,v){return B===v?B!==0||1/B===1/v:B!==B&&v!==v}}),l("Array.prototype.includes",function(g){return g||function(B,v){var x=this;x instanceof String&&(x=String(x));var J=x.length;for(v=v||0,0>v&&(v=Math.max(v+J,0));v<J;v++){var O=x[v];if(O===B||Object.is(O,B))return!0}return!1}}),l("String.prototype.includes",function(g){return g||function(B,v){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(B instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(B,v||0)!==-1}}),l("Array.prototype.keys",function(g){return g||function(){return Ni(this,function(B){return B})}});var He=this||self;function Tt(g,B){g=g.split(".");var v=He;g[0]in v||typeof v.execScript=="undefined"||v.execScript("var "+g[0]);for(var x;g.length&&(x=g.shift());)g.length||B===void 0?v[x]&&v[x]!==Object.prototype[x]?v=v[x]:v=v[x]={}:v[x]=B}function Je(g){He.setTimeout(function(){throw g},0)}function Zi(g){Je(g)}function Oi(g,B){Zi(Error("Invalid wire type: "+g+" (at position "+B+")"))}function An(){Zi(Error("Failed to read varint, encoding is invalid."))}function sn(g,B){return B=String.fromCharCode.apply(null,B),g==null?B:g+B}var Xn,Si=typeof TextDecoder!="undefined",Mi,Fn=typeof TextEncoder!="undefined";function Zn(g){if(Fn)g=(Mi||(Mi=new TextEncoder)).encode(g);else{var B=void 0;B=B===void 0?!1:B;for(var v=0,x=new Uint8Array(3*g.length),J=0;J<g.length;J++){var O=g.charCodeAt(J);if(128>O)x[v++]=O;else{if(2048>O)x[v++]=O>>6|192;else{if(55296<=O&&57343>=O){if(56319>=O&&J<g.length){var E=g.charCodeAt(++J);if(56320<=E&&57343>=E){O=1024*(O-55296)+E-56320+65536,x[v++]=O>>18|240,x[v++]=O>>12&63|128,x[v++]=O>>6&63|128,x[v++]=O&63|128;continue}else J--}if(B)throw Error("Found an unpaired surrogate");O=65533}x[v++]=O>>12|224,x[v++]=O>>6&63|128}x[v++]=O&63|128}}g=x.subarray(0,v)}return g}var oi={},ei=null;function rn(g){var B;B===void 0&&(B=0),Me(),B=oi[B];for(var v=Array(Math.floor(g.length/3)),x=B[64]||"",J=0,O=0;J<g.length-2;J+=3){var E=g[J],gt=g[J+1],ot=g[J+2],yt=B[E>>2];E=B[(E&3)<<4|gt>>4],gt=B[(gt&15)<<2|ot>>6],ot=B[ot&63],v[O++]=yt+E+gt+ot}switch(yt=0,ot=x,g.length-J){case 2:yt=g[J+1],ot=B[(yt&15)<<2]||x;case 1:g=g[J],v[O]=B[g>>2]+B[(g&3)<<4|yt>>4]+ot+x}return v.join("")}function ji(g){var B=g.length,v=3*B/4;v%3?v=Math.floor(v):"=.".indexOf(g[B-1])!=-1&&(v="=.".indexOf(g[B-2])!=-1?v-2:v-1);var x=new Uint8Array(v),J=0;return Ae(g,function(O){x[J++]=O}),x.subarray(0,J)}function Ae(g,B){function v(ot){for(;x<g.length;){var yt=g.charAt(x++),Bt=ei[yt];if(Bt!=null)return Bt;if(!/^[\s\xa0]*$/.test(yt))throw Error("Unknown base64 encoding at char: "+yt)}return ot}Me();for(var x=0;;){var J=v(-1),O=v(0),E=v(64),gt=v(64);if(gt===64&&J===-1)break;B(J<<2|O>>4),E!=64&&(B(O<<4&240|E>>2),gt!=64&&B(E<<6&192|gt))}}function Me(){if(!ei){ei={};for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),B=["+/=","+/","-_=","-_.","-_"],v=0;5>v;v++){var x=g.concat(B[v].split(""));oi[v]=x;for(var J=0;J<x.length;J++){var O=x[J];ei[O]===void 0&&(ei[O]=J)}}}}var si=typeof Uint8Array=="function",de;function Fe(g){if(this.g=g,g!==null&&g.length===0)throw Error("ByteString should be constructed with non-empty values")}Fe.prototype.toJSON=function(){if(this.g==null)var g="";else g=this.g,g=this.g=g==null||typeof g=="string"?g:si&&g instanceof Uint8Array?rn(g):null;return g};var yi=typeof Uint8Array.prototype.slice=="function";function $e(g,B,v){return B===v?de||(de=new Uint8Array(0)):yi?g.slice(B,v):new Uint8Array(g.subarray(B,v))}var ne=0,Xe=0;function Ue(g){if(g.constructor===Uint8Array)return g;if(g.constructor===ArrayBuffer)return new Uint8Array(g);if(g.constructor===Array)return new Uint8Array(g);if(g.constructor===String)return ji(g);if(g.constructor===Fe){if(g.g==null)var B=de||(de=new Uint8Array(0));else{B=Uint8Array;var v=g.g;v=v==null||si&&v!=null&&v instanceof Uint8Array?v:typeof v=="string"?ji(v):null,g=g.g=v,B=new B(g)}return B}if(g instanceof Uint8Array)return new Uint8Array(g.buffer,g.byteOffset,g.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Dt(g,B){B=B===void 0?{}:B,B=B.u===void 0?!1:B.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=B,g&&xe(this,g)}function xe(g,B){g.h=Ue(B),g.l=0,g.i=g.h.length,g.g=g.l}Dt.prototype.reset=function(){this.g=this.l};function $t(g){g.g>g.i&&(g.j=!0,Zi(Error("Tried to read past the end of the data "+g.g+" > "+g.i)))}function Ge(g){var B=g.h,v=B[g.g],x=v&127;return 128>v?(g.g+=1,$t(g),x):(v=B[g.g+1],x|=(v&127)<<7,128>v?(g.g+=2,$t(g),x):(v=B[g.g+2],x|=(v&127)<<14,128>v?(g.g+=3,$t(g),x):(v=B[g.g+3],x|=(v&127)<<21,128>v?(g.g+=4,$t(g),x):(v=B[g.g+4],x|=(v&15)<<28,128>v?(g.g+=5,$t(g),x>>>0):(g.g+=5,128<=B[g.g++]&&128<=B[g.g++]&&128<=B[g.g++]&&128<=B[g.g++]&&128<=B[g.g++]?(g.j=!0,An(),x):($t(g),x))))))}var Te=[];function di(){this.g=new Uint8Array(64),this.h=0}function Se(g,B){if(!(g.h+1<g.g.length)){var v=g.g;g.g=new Uint8Array(Math.ceil(1+2*g.g.length)),g.g.set(v)}g.g[g.h++]=B}di.prototype.length=function(){return this.h},di.prototype.end=function(){var g=this.g,B=this.h;return this.h=0,$e(g,0,B)};function te(g,B){for(;127<B;)Se(g,B&127|128),B>>>=7;Se(g,B)}function ii(g){var B={},v=B.N===void 0?!1:B.N;this.m={u:B.u===void 0?!1:B.u},this.N=v,B=this.m,Te.length?(v=Te.pop(),B&&(v.u=B.u),g&&xe(v,g),g=v):g=new Dt(g,B),this.g=g,this.l=this.g.g,this.h=this.i=-1,this.j=!1}ii.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function ri(g){var B=g.g;if((B=B.g==B.i)||(B=g.j)||(B=g.g,B=B.j||0>B.g||B.g>B.i),B)return!1;g.l=g.g.g;var v=Ge(g.g);return B=v>>>3,v&=7,0<=v&&5>=v?(g.i=B,g.h=v,!0):(g.j=!0,Oi(v,g.l),!1)}function Ye(g){switch(g.h){case 0:if(g.h!=0)Ye(g);else t:{g=g.g;for(var B=g.g,v=0;10>v;v++){if((g.h[B]&128)===0){g.g=B+1,$t(g);break t}B++}g.j=!0,An()}break;case 1:g=g.g,g.g+=8,$t(g);break;case 2:g.h!=2?Ye(g):(B=Ge(g.g),g=g.g,g.g+=B,$t(g));break;case 5:g=g.g,g.g+=4,$t(g);break;case 3:B=g.i;do{if(!ri(g)){g.j=!0,Zi(Error("Unmatched start-group tag: stream EOF"));break}if(g.h==4){g.i!=B&&(g.j=!0,Zi(Error("Unmatched end-group tag")));break}Ye(g)}while(1);break;default:g.j=!0,Oi(g.h,g.l)}}function _i(g,B,v){g.N||(g=$e(g.g.h,v,g.g.g),(v=B.m)?v.push(g):B.m=[g])}var fi=[];function li(){this.h=[],this.i=0,this.g=new di}function Gi(g,B){B.length!==0&&(g.h.push(B),g.i+=B.length)}function Re(g,B,v){te(g.g,8*B+2),te(g.g,v.length),Gi(g,g.g.end()),Gi(g,v)}var ke=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function ve(g,B){Object.isFrozen(g)||(ke?g[ke]|=B:g.g!==void 0?g.g|=B:Object.defineProperties(g,{g:{value:B,configurable:!0,writable:!0,enumerable:!1}}))}function ae(g){if(!g)return 0;var B;return ke?B=g[ke]:B=g.g,B==null?0:B}function ci(g){return Array.isArray(g)&&ve(g,1),g}function le(g){if(!Array.isArray(g))throw Error("cannot mark non-array as immutable");ve(g,2)}function ee(g){return g!==null&&typeof g=="object"&&g.constructor===Object}function wi(g){switch(typeof g){case"number":return isFinite(g)?g:String(g);case"object":return si&&g!=null&&g instanceof Uint8Array?rn(g):g;default:return g}}function Ze(g,B){if(g!=null)return Array.isArray(g)||ee(g)?Jt(g,B):B(g)}function Jt(g,B){if(Array.isArray(g)){for(var v=Array(g.length),x=0;x<g.length;x++)v[x]=Ze(g[x],B);return ae(g)&1&&ci(v),v}v={};for(x in g)v[x]=Ze(g[x],B);return v}var vt;function Ie(g,B,v){var x=vt;vt=null,g||(g=x),x=this.constructor.ca,g||(g=x?[x]:[]),this.j=(x?0:-1)-(this.constructor.aa||0),this.i=null,this.g=g;t:{if(x=this.g.length,g=x-1,x&&(x=this.g[g],ee(x))){this.l=g-this.j,this.h=x;break t}B!==void 0&&-1<B?(this.l=Math.max(B,g+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(v)for(B=0;B<v.length;B++)g=v[B],g<this.l?(g+=this.j,(x=this.g[g])?ci(x):this.g[g]=ze):(ce(this),(x=this.h[g])?ci(x):this.h[g]=ze)}var ze=Object.freeze(ci([]));function ce(g){var B=g.l+g.j;g.g[B]||(g.h=g.g[B]={})}function Ce(g,B,v){return B===-1?null:(v===void 0?0:v)||B>=g.l?g.h?g.h[B]:void 0:g.g[B+g.j]}function lt(g,B,v){v=v===void 0?!0:v;var x=x===void 0?!1:x,J=Ce(g,B,x);return J==null&&(J=ze),J===ze?(J=ci([]),ht(g,B,J,x)):v&&Array.isArray(J)&&ae(J)&2&&(J=J.slice(),ht(g,B,J,x)),J}function It(g,B,v){return g=Ce(g,B),g=g==null?g:+g,g==null?v===void 0?0:v:g}function ht(g,B,v,x){(x===void 0?0:x)||B>=g.l?(ce(g),g.h[B]=v):g.g[B+g.j]=v}function ie(g,B,v){g.i||(g.i={});var x=g.i[v];if(!x){var J=lt(g,v,!1);x=[];for(var O=Array.isArray(J)?!!(ae(J)&2):!1,E=0;E<J.length;E++)x[E]=new B(J[E]),O&&le(x[E].g);O&&(le(x),Object.freeze(x)),g.i[v]=x}return x}function pe(g,B,v,x,J){var O=ie(g,x,B);v=v||new x,g=lt(g,B),J!=null?(O.splice(J,0,v),g.splice(J,0,he(v))):(O.push(v),g.push(he(v)))}Ie.prototype.toJSON=function(){var g=he(this);return Jt(g,wi)};function he(g){if(g.i)for(var B in g.i){var v=g.i[B];if(Array.isArray(v))for(var x=0;x<v.length;x++)v[x]&&he(v[x]);else v&&he(v)}return g.g}Ie.prototype.toString=function(){return he(this).toString()};function Ht(g,B){return g=Ce(g,B),g==null?0:g}function ye(g,B){return g=Ce(g,B),g==null?"":g}function Ee(g,B){if(g=g.m){Gi(B,B.g.end());for(var v=0;v<g.length;v++)Gi(B,g[v])}}function ai(g){var B=g[0];switch(g.length){case 2:var v=g[1];return function(ot,yt,Bt){return B(ot,yt,Bt,v)};case 3:var x=g[1],J=g[2];return function(ot,yt,Bt){return B(ot,yt,Bt,x,J)};case 4:var O=g[1],E=g[2],gt=g[3];return function(ot,yt,Bt){return B(ot,yt,Bt,O,E,gt)};default:throw Error("unsupported number of parameters, expected [2-4], got "+g.length)}}function Ii(g,B,v){for(;ri(B)&&B.h!=4;){var x=B.i,J=v[x];if(J){if(Array.isArray(J)&&(J=v[x]=ai(J)),!J(B,g,x)){x=B,J=g;var O=x.l;Ye(x),_i(x,J,O)}}else x=B,J=g,O=x.l,Ye(x),_i(x,J,O)}return g}function Fi(g,B){var v=new li;if(B(g,v),g=v.i+v.g.length(),g===0)v=new Uint8Array(0);else{g=new Uint8Array(g);for(var x=v.h,J=x.length,O=B=0;O<J;O++){var E=x[O];E.length!==0&&(g.set(E,B),B+=E.length)}x=v.g,J=x.h,J!==0&&(g.set(x.g.subarray(0,J),B),x.h=0),v.h=[g],v=g}return v}function Li(g,B,v){if(fi.length){var x=fi.pop();g&&(xe(x.g,g),x.i=-1,x.h=-1),g=x}else g=new ii(g);try{return v(new B,g)}finally{B=g.g,B.h=null,B.l=0,B.i=0,B.g=0,B.j=!1,B.u=!1,g.i=-1,g.h=-1,g.j=!1,100>fi.length&&fi.push(g)}}function Ke(g,B,v){if(B=Ce(B,v),B!=null){te(g.g,8*v+5),g=g.g;var x=B;x=(v=0>x?1:0)?-x:x,x===0?0<1/x?ne=Xe=0:(Xe=0,ne=2147483648):isNaN(x)?(Xe=0,ne=2147483647):34028234663852886e22<x?(Xe=0,ne=(v<<31|2139095040)>>>0):11754943508222875e-54>x?(x=Math.round(x/Math.pow(2,-149)),Xe=0,ne=(v<<31|x)>>>0):(B=Math.floor(Math.log(x)/Math.LN2),x*=Math.pow(2,-B),x=Math.round(8388608*x),16777216<=x&&++B,Xe=0,ne=(v<<31|B+127<<23|x&8388607)>>>0),v=ne,Se(g,v>>>0&255),Se(g,v>>>8&255),Se(g,v>>>16&255),Se(g,v>>>24&255)}}function Ci(g,B,v){if(g.h!==5)return!1;g=g.g;var x=g.h[g.g],J=g.h[g.g+1],O=g.h[g.g+2],E=g.h[g.g+3];return g.g+=4,$t(g),J=(x<<0|J<<8|O<<16|E<<24)>>>0,g=2*(J>>31)+1,x=J>>>23&255,J&=8388607,ht(B,v,x==255?J?NaN:1/0*g:x==0?g*Math.pow(2,-149)*J:g*Math.pow(2,x-150)*(J+Math.pow(2,23))),!0}function Tn(g,B,v){if(g.h!==0)return!1;for(var x=g.g,J=128,O=0,E=g=0;4>E&&128<=J;E++)J=x.h[x.g++],O|=(J&127)<<7*E;if(128<=J&&(J=x.h[x.g++],O|=(J&127)<<28,g|=(J&127)>>4),128<=J)for(E=0;5>E&&128<=J;E++)J=x.h[x.g++],g|=(J&127)<<7*E+3;return 128>J?(x=O>>>0,J=g>>>0,(g=J&2147483648)&&(x=~x+1>>>0,J=~J>>>0,x==0&&(J=J+1>>>0)),x=4294967296*J+(x>>>0),g=g?-x:x):(x.j=!0,An(),g=void 0),ht(B,v,g),!0}function ui(g,B,v){return g.h!==0?!1:(ht(B,v,Ge(g.g)),!0)}function Qe(g,B,v){if(g.h!==2)return!1;var x=Ge(g.g);g=g.g;var J=g.g;g.g+=x,$t(g),g=g.h;var O;if(Si)(O=Xn)||(O=Xn=new TextDecoder("utf-8",{fatal:!1})),O=O.decode(g.subarray(J,J+x));else{x=J+x;for(var E=[],gt=null,ot,yt,Bt;J<x;)ot=g[J++],128>ot?E.push(ot):224>ot?J>=x?E.push(65533):(yt=g[J++],194>ot||(yt&192)!==128?(J--,E.push(65533)):E.push((ot&31)<<6|yt&63)):240>ot?J>=x-1?E.push(65533):(yt=g[J++],(yt&192)!==128||ot===224&&160>yt||ot===237&&160<=yt||((O=g[J++])&192)!==128?(J--,E.push(65533)):E.push((ot&15)<<12|(yt&63)<<6|O&63)):244>=ot?J>=x-2?E.push(65533):(yt=g[J++],(yt&192)!==128||(ot<<28)+(yt-144)>>30!==0||((O=g[J++])&192)!==128||((Bt=g[J++])&192)!==128?(J--,E.push(65533)):(ot=(ot&7)<<18|(yt&63)<<12|(O&63)<<6|Bt&63,ot-=65536,E.push((ot>>10&1023)+55296,(ot&1023)+56320))):E.push(65533),8192<=E.length&&(gt=sn(gt,E),E.length=0);O=sn(gt,E)}return ht(B,v,O),!0}function zi(g,B,v,x,J){if(g.h!==2)return!1;var O=new x,E=g.g.i,gt=Ge(g.g),ot=g.g.g+gt;if(g.g.i=ot,J(O,g),J=ot-g.g.g,J!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(gt+" bytes, instead read "+(gt-J)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return g.g.g=ot,g.g.i=E,pe(B,v,O,x,void 0),!0}function ln(g){Ie.call(this,g)}var ti;rt(ln,Ie);function Hn(g,B){var v=Ce(g,1);if(v!=null&&v!=null){te(B.g,8);var x=B.g;if(0<=v)te(x,v);else{for(var J=0;9>J;J++)Se(x,v&127|128),v>>=7;Se(x,1)}}Ke(B,g,2),x=Ce(g,3),x!=null&&Re(B,3,Zn(x)),x=Ce(g,4),x!=null&&Re(B,4,Zn(x)),Ee(g,B)}function mi(g,B){return Ii(g,B,ti||(ti={1:ui,2:Ci,3:Qe,4:Qe}))}function Ki(g){Ie.call(this,g,-1,Vi)}var un;rt(Ki,Ie),Ki.prototype.addClassification=function(g,B){return pe(this,1,g,ln,B),this};function Nn(g,B){return Ii(g,B,un||(un={1:[zi,ln,mi]}))}var Vi=[1];function mn(g){Ie.call(this,g)}var to;rt(mn,Ie);function eo(g,B){Ke(B,g,1),Ke(B,g,2),Ke(B,g,3),Ke(B,g,4),Ke(B,g,5),Ee(g,B)}function hn(g,B){return Ii(g,B,to||(to={1:Ci,2:Ci,3:Ci,4:Ci,5:Ci}))}function yn(g){Ie.call(this,g,-1,R)}var A;rt(yn,Ie);function X(g,B){return Ii(g,B,A||(A={1:[zi,mn,hn]}))}var R=[1];function k(g){Ie.call(this,g)}var $;rt(k,Ie);function Ct(g,B){Ke(B,g,1),Ke(B,g,2),Ke(B,g,3),Ke(B,g,4),Ke(B,g,5);var v=Ce(g,6);if(v!=null&&v!=null){te(B.g,48);var x=B.g,J=v;v=0>J,J=Math.abs(J);var O=J>>>0;for(J=Math.floor((J-O)/4294967296),J>>>=0,v&&(J=~J>>>0,O=(~O>>>0)+1,4294967295<O&&(O=0,J++,4294967295<J&&(J=0))),ne=O,Xe=J,v=ne,O=Xe;0<O||127<v;)Se(x,v&127|128),v=(v>>>7|O<<25)>>>0,O>>>=7;Se(x,v)}Ee(g,B)}function q(g,B){return Ii(g,B,$||($={1:Ci,2:Ci,3:Ci,4:Ci,5:Ci,6:Tn}))}function at(g,B,v){if(v=g.createShader(v===0?g.VERTEX_SHADER:g.FRAGMENT_SHADER),g.shaderSource(v,B),g.compileShader(v),!g.getShaderParameter(v,g.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+g.getShaderInfoLog(v));return v}function Zt(g){return ie(g,ln,1).map(function(B){return{index:Ht(B,1),X:It(B,2),label:Ce(B,3)!=null?ye(B,3):void 0,displayName:Ce(B,4)!=null?ye(B,4):void 0}})}function St(g){return{x:It(g,1),y:It(g,2),z:It(g,3),visibility:Ce(g,4)!=null?It(g,4):void 0}}function Et(g){return ie(Li(g,yn,X),mn,1).map(St)}function kt(g,B){this.h=g,this.g=B,this.l=0}function re(g,B,v){return zt(g,B),typeof g.g.canvas.transferToImageBitmap=="function"?Promise.resolve(g.g.canvas.transferToImageBitmap()):v?Promise.resolve(g.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(g.g.canvas):(g.i===void 0&&(g.i=document.createElement("canvas")),new Promise(function(x){g.i.height=g.g.canvas.height,g.i.width=g.g.canvas.width,g.i.getContext("2d",{}).drawImage(g.g.canvas,0,0,g.g.canvas.width,g.g.canvas.height),x(g.i)}))}function zt(g,B){var v=g.g;if(g.m===void 0){var x=at(v,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),J=at(v,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),O=v.createProgram();if(v.attachShader(O,x),v.attachShader(O,J),v.linkProgram(O),!v.getProgramParameter(O,v.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+v.getProgramInfoLog(O));x=g.m=O,v.useProgram(x),J=v.getUniformLocation(x,"sampler0"),g.j={I:v.getAttribLocation(x,"aVertex"),H:v.getAttribLocation(x,"aTex"),da:J},g.s=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,g.s),v.enableVertexAttribArray(g.j.I),v.vertexAttribPointer(g.j.I,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),g.o=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,g.o),v.enableVertexAttribArray(g.j.H),v.vertexAttribPointer(g.j.H,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),v.uniform1i(J,0)}x=g.j,v.useProgram(g.m),v.canvas.width=B.width,v.canvas.height=B.height,v.viewport(0,0,B.width,B.height),v.activeTexture(v.TEXTURE0),g.h.bindTexture2d(B.glName),v.enableVertexAttribArray(x.I),v.bindBuffer(v.ARRAY_BUFFER,g.s),v.vertexAttribPointer(x.I,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(x.H),v.bindBuffer(v.ARRAY_BUFFER,g.o),v.vertexAttribPointer(x.H,2,v.FLOAT,!1,0,0),v.bindFramebuffer(v.DRAW_FRAMEBUFFER?v.DRAW_FRAMEBUFFER:v.FRAMEBUFFER,null),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.colorMask(!0,!0,!0,!0),v.drawArrays(v.TRIANGLE_FAN,0,4),v.disableVertexAttribArray(x.I),v.disableVertexAttribArray(x.H),v.bindBuffer(v.ARRAY_BUFFER,null),g.h.bindTexture2d(0)}function Yt(g){this.g=g}var Ut=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function oe(g,B){return B+g}function be(g,B){window[g]=B}function fe(g){var B=document.createElement("script");return B.setAttribute("src",g),B.setAttribute("crossorigin","anonymous"),new Promise(function(v){B.addEventListener("load",function(){v()},!1),B.addEventListener("error",function(){v()},!1),document.body.appendChild(B)})}function Ve(){return ft(function(g){switch(g.g){case 1:return g.m=2,_(g,WebAssembly.instantiate(Ut),4);case 4:g.g=3,g.m=0;break;case 2:return g.m=0,g.j=null,g.return(!1);case 3:return g.return(!0)}})}function De(g){if(this.g=g,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=g&&g.locateFile||oe,typeof window=="object")var B=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location!="undefined")B=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=B,g.options){B=m(Object.keys(g.options));for(var v=B.next();!v.done;v=B.next()){v=v.value;var x=g.options[v].default;x!==void 0&&(this.j[v]=typeof x=="function"?x():x)}}}e=De.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function b(g){var B,v,x,J,O,E,gt,ot,yt,Bt,Qt;return ft(function(wt){switch(wt.g){case 1:return g.R?(B=g.g.files===void 0?[]:typeof g.g.files=="function"?g.g.files(g.j):g.g.files,_(wt,Ve(),2)):wt.return();case 2:if(v=wt.h,typeof window=="object")return be("createMediapipeSolutionsWasm",{locateFile:g.locateFile}),be("createMediapipeSolutionsPackedAssets",{locateFile:g.locateFile}),E=B.filter(function(bt){return bt.data!==void 0}),gt=B.filter(function(bt){return bt.data===void 0}),ot=Promise.all(E.map(function(bt){var Rt=M(g,bt.url);if(bt.path!==void 0){var Ft=bt.path;Rt=Rt.then(function(Nt){return g.overrideFile(Ft,Nt),Promise.resolve(Nt)})}return Rt})),yt=Promise.all(gt.map(function(bt){return bt.simd===void 0||bt.simd&&v||!bt.simd&&!v?fe(g.locateFile(bt.url,g.S)):Promise.resolve()})).then(function(){var bt,Rt,Ft;return ft(function(Nt){if(Nt.g==1)return bt=window.createMediapipeSolutionsWasm,Rt=window.createMediapipeSolutionsPackedAssets,Ft=g,_(Nt,bt(Rt),2);Ft.h=Nt.h,Nt.g=0})}),Bt=function(){return ft(function(bt){return g.g.graph&&g.g.graph.url?bt=_(bt,M(g,g.g.graph.url),0):(bt.g=0,bt=void 0),bt})}(),_(wt,Promise.all([yt,ot,Bt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return x=B.filter(function(bt){return bt.simd===void 0||bt.simd&&v||!bt.simd&&!v}).map(function(bt){return g.locateFile(bt.url,g.S)}),importScripts.apply(null,y(x)),J=g,_(wt,createMediapipeSolutionsWasm(Module),6);case 6:J.h=wt.h,g.l=new OffscreenCanvas(1,1),g.h.canvas=g.l,O=g.h.GL.createContext(g.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext!="undefined"?2:1}),g.h.GL.makeContextCurrent(O),wt.g=4;break;case 7:if(g.l=document.createElement("canvas"),Qt=g.l.getContext("webgl2",{}),!Qt&&(Qt=g.l.getContext("webgl",{}),!Qt))return alert("Failed to create WebGL canvas context when passing video frame."),wt.return();g.D=Qt,g.h.canvas=g.l,g.h.createContext(g.l,!0,!0,{});case 4:g.i=new g.h.SolutionWasm,g.R=!1,wt.g=0}})}function f(g){var B,v,x,J,O,E,gt,ot;return ft(function(yt){if(yt.g==1){if(g.g.graph&&g.g.graph.url&&g.P===g.g.graph.url)return yt.return();if(g.o=!0,!g.g.graph||!g.g.graph.url){yt.g=2;return}return g.P=g.g.graph.url,_(yt,M(g,g.g.graph.url),3)}for(yt.g!=2&&(B=yt.h,g.i.loadGraph(B)),v=m(Object.keys(g.B)),x=v.next();!x.done;x=v.next())J=x.value,g.i.overrideFile(J,g.B[J]);if(g.B={},g.g.listeners)for(O=m(g.g.listeners),E=O.next();!E.done;E=O.next())gt=E.value,D(g,gt);ot=g.j,g.j={},g.setOptions(ot),yt.g=0})}e.reset=function(){var g=this;return ft(function(B){g.i&&(g.i.reset(),g.m={},g.s={}),B.g=0})},e.setOptions=function(g,B){var v=this;if(B=B||this.g.options){for(var x=[],J=[],O={},E=m(Object.keys(g)),gt=E.next();!gt.done;O={K:O.K,L:O.L},gt=E.next()){var ot=gt.value;ot in this.j&&this.j[ot]===g[ot]||(this.j[ot]=g[ot],gt=B[ot],gt!==void 0&&(gt.onChange&&(O.K=gt.onChange,O.L=g[ot],x.push(function(yt){return function(){var Bt;return ft(function(Qt){if(Qt.g==1)return _(Qt,yt.K(yt.L),2);Bt=Qt.h,Bt===!0&&(v.o=!0),Qt.g=0})}}(O))),gt.graphOptionXref&&(ot={valueNumber:gt.type===1?g[ot]:0,valueBoolean:gt.type===0?g[ot]:!1,valueString:gt.type===2?g[ot]:""},gt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),gt.graphOptionXref),ot),J.push(gt))))}(x.length!==0||J.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(J),this.v=(this.v===void 0?[]:this.v).concat(x))}};function W(g){var B,v,x,J,O,E,gt;return ft(function(ot){switch(ot.g){case 1:if(!g.o)return ot.return();if(!g.v){ot.g=2;break}B=m(g.v),v=B.next();case 3:if(v.done){ot.g=5;break}return x=v.value,_(ot,x(),4);case 4:v=B.next(),ot.g=3;break;case 5:g.v=void 0;case 2:if(g.A){for(J=new g.h.GraphOptionChangeRequestList,O=m(g.A),E=O.next();!E.done;E=O.next())gt=E.value,J.push_back(gt);g.i.changeOptions(J),J.delete(),g.A=void 0}g.o=!1,ot.g=0}})}e.initialize=function(){var g=this;return ft(function(B){return B.g==1?_(B,b(g),2):B.g!=3?_(B,f(g),3):_(B,W(g),0)})};function M(g,B){var v,x;return ft(function(J){return B in g.F?J.return(g.F[B]):(v=g.locateFile(B,""),x=fetch(v).then(function(O){return O.arrayBuffer()}),g.F[B]=x,J.return(x))})}e.overrideFile=function(g,B){this.i?this.i.overrideFile(g,B):this.B[g]=B},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(g,B){var v=this,x,J,O,E,gt,ot,yt,Bt,Qt;return ft(function(wt){switch(wt.g){case 1:return v.g.inputs?(x=1e3*(B==null?performance.now():B),_(wt,v.C,2)):wt.return();case 2:return _(wt,v.initialize(),3);case 3:for(J=new v.h.PacketDataList,O=m(Object.keys(g)),E=O.next();!E.done;E=O.next())if(gt=E.value,ot=v.g.inputs[gt]){t:{var bt=g[gt];switch(ot.type){case"video":var Rt=v.m[ot.stream];if(Rt||(Rt=new kt(v.h,v.D),v.m[ot.stream]=Rt),Rt.l===0&&(Rt.l=Rt.h.createTexture()),typeof HTMLVideoElement!="undefined"&&bt instanceof HTMLVideoElement)var Ft=bt.videoWidth,Nt=bt.videoHeight;else typeof HTMLImageElement!="undefined"&&bt instanceof HTMLImageElement?(Ft=bt.naturalWidth,Nt=bt.naturalHeight):(Ft=bt.width,Nt=bt.height);Nt={glName:Rt.l,width:Ft,height:Nt},Ft=Rt.g,Ft.canvas.width=Nt.width,Ft.canvas.height=Nt.height,Ft.activeTexture(Ft.TEXTURE0),Rt.h.bindTexture2d(Rt.l),Ft.texImage2D(Ft.TEXTURE_2D,0,Ft.RGBA,Ft.RGBA,Ft.UNSIGNED_BYTE,bt),Rt.h.bindTexture2d(0),Rt=Nt;break t;case"detections":for(Rt=v.m[ot.stream],Rt||(Rt=new Yt(v.h),v.m[ot.stream]=Rt),Rt.data||(Rt.data=new Rt.g.DetectionListData),Rt.data.reset(bt.length),Nt=0;Nt<bt.length;++Nt){Ft=bt[Nt];var Mt=Rt.data,d=Mt.setBoundingBox,V=Nt,S=Ft.T,F=new k;if(ht(F,1,S.Y),ht(F,2,S.Z),ht(F,3,S.height),ht(F,4,S.width),ht(F,5,S.rotation),ht(F,6,S.W),S=Fi(F,Ct),d.call(Mt,V,S),Ft.O)for(Mt=0;Mt<Ft.O.length;++Mt){F=Ft.O[Mt];var T=!!F.visibility;d=Rt.data,V=d.addNormalizedLandmark,S=Nt,F=Object.assign(Object.assign({},F),{visibility:T?F.visibility:0}),T=new mn,ht(T,1,F.x),ht(T,2,F.y),ht(T,3,F.z),F.visibility&&ht(T,4,F.visibility),F=Fi(T,eo),V.call(d,S,F)}if(Ft.M)for(Mt=0;Mt<Ft.M.length;++Mt)d=Rt.data,V=d.addClassification,S=Nt,F=Ft.M[Mt],T=new ln,ht(T,2,F.X),F.index&&ht(T,1,F.index),F.label&&ht(T,3,F.label),F.displayName&&ht(T,4,F.displayName),F=Fi(T,Hn),V.call(d,S,F)}Rt=Rt.data;break t;default:Rt={}}}switch(yt=Rt,Bt=ot.stream,ot.type){case"video":J.pushTexture2d(Object.assign(Object.assign({},yt),{stream:Bt,timestamp:x}));break;case"detections":Qt=yt,Qt.stream=Bt,Qt.timestamp=x,J.pushDetectionList(Qt);break;default:throw Error("Unknown input config type: '"+ot.type+"'")}}return v.i.send(J),_(wt,v.C,4);case 4:J.delete(),wt.g=0}})};function Q(g,B,v){var x,J,O,E,gt,ot,yt,Bt,Qt,wt,bt,Rt,Ft,Nt;return ft(function(Mt){switch(Mt.g){case 1:if(!v)return Mt.return(B);for(x={},J=0,O=m(Object.keys(v)),E=O.next();!E.done;E=O.next())gt=E.value,ot=v[gt],typeof ot!="string"&&ot.type==="texture"&&B[ot.stream]!==void 0&&++J;1<J&&(g.G=!1),yt=m(Object.keys(v)),E=yt.next();case 2:if(E.done){Mt.g=4;break}if(Bt=E.value,Qt=v[Bt],typeof Qt=="string")return Ft=x,Nt=Bt,_(Mt,tt(g,Bt,B[Qt]),14);if(wt=B[Qt.stream],Qt.type==="detection_list"){if(wt){for(var d=wt.getRectList(),V=wt.getLandmarksList(),S=wt.getClassificationsList(),F=[],T=0;T<d.size();++T){var c=Li(d.get(T),k,q);c={T:{Y:It(c,1),Z:It(c,2),height:It(c,3),width:It(c,4),rotation:It(c,5,0),W:Ht(c,6)},O:Et(V.get(T)),M:Zt(Li(S.get(T),Ki,Nn))},F.push(c)}d=F}else d=[];x[Bt]=d,Mt.g=7;break}if(Qt.type==="proto_list"){if(wt){for(d=Array(wt.size()),V=0;V<wt.size();V++)d[V]=wt.get(V);wt.delete()}else d=[];x[Bt]=d,Mt.g=7;break}if(wt===void 0){Mt.g=3;break}if(Qt.type==="float_list"){x[Bt]=wt,Mt.g=7;break}if(Qt.type==="proto"){x[Bt]=wt,Mt.g=7;break}if(Qt.type!=="texture")throw Error("Unknown output config type: '"+Qt.type+"'");return bt=g.s[Bt],bt||(bt=new kt(g.h,g.D),g.s[Bt]=bt),_(Mt,re(bt,wt,g.G),13);case 13:Rt=Mt.h,x[Bt]=Rt;case 7:Qt.transform&&x[Bt]&&(x[Bt]=Qt.transform(x[Bt])),Mt.g=3;break;case 14:Ft[Nt]=Mt.h;case 3:E=yt.next(),Mt.g=2;break;case 4:return Mt.return(x)}})}function tt(g,B,v){var x;return ft(function(J){return typeof v=="number"||v instanceof Uint8Array||v instanceof g.h.Uint8BlobList?J.return(v):v instanceof g.h.Texture2dDataOut?(x=g.s[B],x||(x=new kt(g.h,g.D),g.s[B]=x),J.return(re(x,v,g.G))):J.return(void 0)})}function D(g,B){for(var v=B.name||"$",x=[].concat(y(B.wants)),J=new g.h.StringList,O=m(B.wants),E=O.next();!E.done;E=O.next())J.push_back(E.value);O=g.h.PacketListener.implement({onResults:function(gt){for(var ot={},yt=0;yt<B.wants.length;++yt)ot[x[yt]]=gt.get(yt);var Bt=g.listeners[v];Bt&&(g.C=Q(g,ot,B.outs).then(function(Qt){Qt=Bt(Qt);for(var wt=0;wt<B.wants.length;++wt){var bt=ot[x[wt]];typeof bt=="object"&&bt.hasOwnProperty&&bt.hasOwnProperty("delete")&&bt.delete()}Qt&&(g.C=Qt)}))}}),g.i.attachMultiListener(J,O),J.delete()}e.onResults=function(g,B){this.listeners[B||"$"]=g},Tt("Solution",De),Tt("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"});function st(g){switch(g===void 0&&(g=0),g){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function mt(g){var B=this;g=g||{},this.g=new De({locateFile:g.locateFile,files:function(v){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:st(v.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:Et},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:Et},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(v){var x,J,O;return ft(function(E){return E.g==1?(x=st(v),J="third_party/mediapipe/modules/pose_landmark/"+x,_(E,M(B.g,x),2)):(O=E.h,B.g.overrideFile(J,O),E.return(!0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}e=mt.prototype,e.reset=function(){this.g.reset()},e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(g){this.g.onResults(g)},e.initialize=function(){var g=this;return ft(function(B){return _(B,g.g.initialize(),0)})},e.send=function(g,B){var v=this;return ft(function(x){return _(x,v.g.send(g,B),0)})},e.setOptions=function(g){this.g.setOptions(g)},Tt("Pose",mt),Tt("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Tt("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Tt("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Tt("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Tt("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Tt("VERSION","0.5.1635988162")}).call(aI);const Uo=class{constructor(){this.mediapipeMap_=new Map}getVersion(t){switch(t){case"face_detection":return cI.VERSION;case"face_mesh":return gI.VERSION;case"hands":return rI.VERSION;case"holistic":return lI.VERSION;case"objectron":return dI.VERSION;case"selfie_segmentation":return sI.VERSION;case"pose":return aI.VERSION;default:return""}}initialize(t){return new Promise(async(i,n)=>{if(t.mediaPipeModelConfigArray.length==0){n("no model was selected");return}for(let o=0;o<t.mediaPipeModelConfigArray.length;o++){const l=t.mediaPipeModelConfigArray[o];if(this.mediapipeMap_.has(l.modelType)){n("setting same type is not supported");return}if(typeof l.listener!="function"){n(`[${l.modelType}] ResultsListener must be provided`);return}let I;switch(l.modelType){case"face_mesh":I=new gI.FaceMesh({locateFile:(m,y)=>(l.assetsUri||Uo.defaultAssetsBaseUrl+"face_mesh/"+this.getVersion("face_mesh"))+"/"+m});break;case"face_detection":I=new cI.FaceDetection({locateFile:(m,y)=>(l.assetsUri||Uo.defaultAssetsBaseUrl+"face_detection/"+this.getVersion("face_detection"))+"/"+m});break;case"hands":I=new rI.Hands({locateFile:(m,y)=>(l.assetsUri||Uo.defaultAssetsBaseUrl+"hands/"+this.getVersion("hands"))+"/"+m});break;case"holistic":I=new lI.Holistic({locateFile:(m,y)=>(l.assetsUri||Uo.defaultAssetsBaseUrl+"holistic/"+this.getVersion("holistic"))+"/"+m});break;case"objectron":I=new dI.Objectron({locateFile:(m,y)=>(l.assetsUri||Uo.defaultAssetsBaseUrl+"objectron/"+this.getVersion("objectron"))+"/"+m});break;case"selfie_segmentation":I=new sI.SelfieSegmentation({locateFile:(m,y)=>(l.assetsUri||Uo.defaultAssetsBaseUrl+"selfie_segmentation/"+this.getVersion("selfie_segmentation"))+"/"+m});break;case"pose":I=new aI.Pose({locateFile:(m,y)=>(l.assetsUri||Uo.defaultAssetsBaseUrl+"pose/"+this.getVersion("pose"))+"/"+m});break;default:n("unknown model type");return}I.onResults(l.listener),l.options&&I.setOptions(l.options);try{await I.initialize(),this.mediapipeMap_.set(l.modelType,I)}catch(m){n(m);return}}i()})}close(t){return new Promise((i,n)=>{let o=[];if(t){let l=this.mediapipeMap_.get(t);if(l)this.mediapipeMap_.delete(t),o.push(l.close());else{n("model not exit");return}}else{for(const[l,I]of this.mediapipeMap_.entries())o.push(I.close());this.mediapipeMap_.clear()}Promise.all(o).then(()=>{i()}).catch(l=>{n(l)})})}send(t,i){return new Promise((n,o)=>{let l=[];if(i){let I=this.mediapipeMap_.get(i);if(I)l.push(I.send({image:t}));else{o("model not exit");return}}else for(const[I,m]of this.mediapipeMap_.entries())l.push(m.send({image:t}));Promise.all(l).then(()=>{n()}).catch(I=>{o(I)})})}reset(t){if(t){let i=this.mediapipeMap_.get(t);i&&typeof i.reset=="function"&&i.reset()}else for(const[i,n]of this.mediapipeMap_.entries())n&&typeof n.reset=="function"&&n.reset()}};let S0=Uo;(()=>{Uo.defaultAssetsBaseUrl="https://d3opqjmqzxf057.cloudfront.net/ml/mediapipe/"})();const fs=new WeakMap,or=new WeakMap,cs=new WeakMap,wg=Symbol("anyProducer"),w0=Promise.resolve(),Fg=Symbol("listenerAdded"),Hg=Symbol("listenerRemoved");let xg=!1,aa=!1;function Fr(e){if(typeof e!="string"&&typeof e!="symbol"&&typeof e!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function zc(e){if(typeof e!="function")throw new TypeError("listener must be a function")}function Hr(e,t){const i=or.get(e);if(!!i.has(t))return i.get(t)}function kl(e,t){const i=typeof t=="string"||typeof t=="symbol"||typeof t=="number"?t:wg,n=cs.get(e);if(!!n.has(i))return n.get(i)}function a3(e,t,i){const n=cs.get(e);if(n.has(t))for(const o of n.get(t))o.enqueue(i);if(n.has(wg)){const o=Promise.all([t,i]);for(const l of n.get(wg))l.enqueue(o)}}function F0(e,t){t=Array.isArray(t)?t:[t];let i=!1,n=()=>{},o=[];const l={enqueue(I){o.push(I),n()},finish(){i=!0,n()}};for(const I of t){let m=kl(e,I);m||(m=new Set,cs.get(e).set(I,m)),m.add(l)}return{async next(){return o?o.length===0?i?(o=void 0,this.next()):(await new Promise(I=>{n=I}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(I){o=void 0;for(const m of t){const y=kl(e,m);y&&(y.delete(l),y.size===0&&cs.get(e).delete(m))}return n(),arguments.length>0?{done:!0,value:await I}:{done:!0}},[Symbol.asyncIterator](){return this}}}function H0(e){if(e===void 0)return x0;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!x0.includes(t))throw typeof t!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${t} is not Emittery method`);return e}const Dr=e=>e===Fg||e===Hg;function Kc(e,t,i){if(Dr(t))try{xg=!0,e.emit(t,i)}finally{xg=!1}}let Zc=class II{static mixin(t,i){return i=H0(i),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const I of i)if(n.prototype[I]!==void 0)throw new Error(`The property \`${I}\` already exists on \`target\``);function o(){return Object.defineProperty(this,t,{enumerable:!1,value:new II}),this[t]}Object.defineProperty(n.prototype,t,{enumerable:!1,get:o});const l=I=>function(...m){return this[t][I](...m)};for(const I of i)Object.defineProperty(n.prototype,I,{enumerable:!1,value:l(I)});return n}}static get isDebugEnabled(){var i,n;if(typeof((i=globalThis.process)==null?void 0:i.env)!="object")return aa;const{env:t}=(n=globalThis.process)!=null?n:{env:{}};return t.DEBUG==="emittery"||t.DEBUG==="*"||aa}static set isDebugEnabled(t){aa=t}constructor(t={}){var i;fs.set(this,new Set),or.set(this,new Map),cs.set(this,new Map),cs.get(this).set(wg,new Set),this.debug=(i=t.debug)!=null?i:{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(n,o,l,I)=>{try{I=JSON.stringify(I)}catch{I=`Object with the following keys failed to stringify: ${Object.keys(I).join(",")}`}(typeof l=="symbol"||typeof l=="number")&&(l=l.toString());const m=new Date,y=`${m.getHours()}:${m.getMinutes()}:${m.getSeconds()}.${m.getMilliseconds()}`;console.log(`[${y}][emittery:${n}][${o}] Event Name: ${l}
	data: ${I}`)})}logIfDebugEnabled(t,i,n){(II.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,i,n)}on(t,i){zc(i),t=Array.isArray(t)?t:[t];for(const n of t){Fr(n);let o=Hr(this,n);o||(o=new Set,or.get(this).set(n,o)),o.add(i),this.logIfDebugEnabled("subscribe",n,void 0),Dr(n)||Kc(this,Fg,{eventName:n,listener:i})}return this.off.bind(this,t,i)}off(t,i){zc(i),t=Array.isArray(t)?t:[t];for(const n of t){Fr(n);const o=Hr(this,n);o&&(o.delete(i),o.size===0&&or.get(this).delete(n)),this.logIfDebugEnabled("unsubscribe",n,void 0),Dr(n)||Kc(this,Hg,{eventName:n,listener:i})}}once(t){let i;const n=new Promise(o=>{i=this.on(t,l=>{i(),o(l)})});return n.off=i,n}events(t){t=Array.isArray(t)?t:[t];for(const i of t)Fr(i);return F0(this,t)}async emit(t,i){var m;if(Fr(t),Dr(t)&&!xg)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",t,i),a3(this,t,i);const n=(m=Hr(this,t))!=null?m:new Set,o=fs.get(this),l=[...n],I=Dr(t)?[]:[...o];await w0,await Promise.all([...l.map(async y=>{if(n.has(y))return y(i)}),...I.map(async y=>{if(o.has(y))return y(t,i)})])}async emitSerial(t,i){var m;if(Fr(t),Dr(t)&&!xg)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",t,i);const n=(m=Hr(this,t))!=null?m:new Set,o=fs.get(this),l=[...n],I=[...o];await w0;for(const y of l)n.has(y)&&await y(i);for(const y of I)o.has(y)&&await y(t,i)}onAny(t){return zc(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),fs.get(this).add(t),Kc(this,Fg,{listener:t}),this.offAny.bind(this,t)}anyEvent(){return F0(this)}offAny(t){zc(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),Kc(this,Hg,{listener:t}),fs.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(const i of t)if(this.logIfDebugEnabled("clear",i,void 0),typeof i=="string"||typeof i=="symbol"||typeof i=="number"){const n=Hr(this,i);n&&n.clear();const o=kl(this,i);if(o){for(const l of o)l.finish();o.clear()}}else{fs.get(this).clear();for(const[n,o]of or.get(this).entries())o.clear(),or.get(this).delete(n);for(const[n,o]of cs.get(this).entries()){for(const l of o)l.finish();o.clear(),cs.get(this).delete(n)}}}listenerCount(t){var n,o,l,I,m,y;t=Array.isArray(t)?t:[t];let i=0;for(const H of t){if(typeof H=="string"){i+=fs.get(this).size+((o=(n=Hr(this,H))==null?void 0:n.size)!=null?o:0)+((I=(l=kl(this,H))==null?void 0:l.size)!=null?I:0)+((y=(m=kl(this))==null?void 0:m.size)!=null?y:0);continue}typeof H!="undefined"&&Fr(H),i+=fs.get(this).size;for(const L of or.get(this).values())i+=L.size;for(const L of cs.get(this).values())i+=L.size}return i}bindMethods(t,i){if(typeof t!="object"||t===null)throw new TypeError("`target` must be an object");i=H0(i);for(const n of i){if(t[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(t,n,{enumerable:!1,value:this[n].bind(this)})}}};const x0=Object.getOwnPropertyNames(Zc.prototype).filter(e=>e!=="constructor");Object.defineProperty(Zc,"listenerAdded",{value:Fg,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Zc,"listenerRemoved",{value:Hg,writable:!1,enumerable:!0,configurable:!1});function aC(e,t){globalThis.vonage||(globalThis.vonage={}),globalThis.vonage.workerizer||(globalThis.vonage.workerizer={});let i=globalThis.vonage.workerizer;return i[e]||(i[e]=t),i[e]}const il=aC("globals",{});var Io=(e=>(e.INIT="INIT",e.FORWARD="FORWARD",e.TERMINATE="TERMINATE",e.GLOBALS_SYNC="GLOBALS_SYNC",e.EVENT="EVENT",e))(Io||{});function cb(e){return[ImageBitmap,ReadableStream,WritableStream].some(i=>e instanceof i)}let I3=0;function Yg(e,t,i,n,o){const l=I3++;return e.postMessage({id:l,type:t,functionName:i,args:n},n.filter(m=>cb(m))),new Promise(m=>{o==null||o.set(l,m)})}function nl(e,t){const{id:i,type:n}=e,o=Array.isArray(t)?t:[t];postMessage({id:i,type:n,result:t},o.filter(l=>cb(l)))}const Ng=aC("workerized",{});function IC(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}async function C3(){if(IC())nl({type:Io.GLOBALS_SYNC},il);else{const e=[];for(const t in Ng){const{worker:i,resolvers:n}=Ng[t].workerContext;i&&e.push(Yg(i,Io.GLOBALS_SYNC,"",[il],n))}await Promise.all(e)}}function sc(e,t){if(Array.isArray(t))t.splice(0,t.length);else if(typeof t=="object")for(const i in t)delete t[i];for(const i in e)Array.isArray(e[i])?(t[i]=[],sc(e[i],t[i])):typeof e[i]=="object"?(t[i]={},sc(e[i],t[i])):t[i]=e[i]}async function u3(e,t,i,n){const o=new t;if(o.addEventListener("message",async({data:I})=>{var m,y,H,L,K,nt,dt;switch(I.type){case Io.GLOBALS_SYNC:I.id?((y=i.get((m=I.id)!=null?m:-1))==null||y(I.result),i.delete((H=I.id)!=null?H:-1)):(sc((L=I.result)!=null?L:{},il),await C3());break;case Io.EVENT:const{result:P}=I,rt=P;if((rt==null?void 0:rt.name)==null)throw"Missing event name";n(rt.name,rt.data);break;default:(nt=i.get((K=I.id)!=null?K:-1))==null||nt(I.result),i.delete((dt=I.id)!=null?dt:-1)}}),!await Yg(o,Io.INIT,"",[e.workerId,il],i))throw"Failed to instantiate workerized class";return o}const Gs=new WeakMap,sr=new WeakMap,gs=new WeakMap,Mg=Symbol("anyProducer"),Y0=Promise.resolve(),Lg=Symbol("listenerAdded"),Jg=Symbol("listenerRemoved");let Tg=!1,Ia=!1;function xr(e){if(typeof e!="string"&&typeof e!="symbol"&&typeof e!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function Uc(e){if(typeof e!="function")throw new TypeError("listener must be a function")}function Yr(e,t){const i=sr.get(e);if(!!i.has(t))return i.get(t)}function zl(e,t){const i=typeof t=="string"||typeof t=="symbol"||typeof t=="number"?t:Mg,n=gs.get(e);if(!!n.has(i))return n.get(i)}function m3(e,t,i){const n=gs.get(e);if(n.has(t))for(const o of n.get(t))o.enqueue(i);if(n.has(Mg)){const o=Promise.all([t,i]);for(const l of n.get(Mg))l.enqueue(o)}}function N0(e,t){t=Array.isArray(t)?t:[t];let i=!1,n=()=>{},o=[];const l={enqueue(I){o.push(I),n()},finish(){i=!0,n()}};for(const I of t){let m=zl(e,I);m||(m=new Set,gs.get(e).set(I,m)),m.add(l)}return{async next(){return o?o.length===0?i?(o=void 0,this.next()):(await new Promise(I=>{n=I}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(I){o=void 0;for(const m of t){const y=zl(e,m);y&&(y.delete(l),y.size===0&&gs.get(e).delete(m))}return n(),arguments.length>0?{done:!0,value:await I}:{done:!0}},[Symbol.asyncIterator](){return this}}}function M0(e){if(e===void 0)return L0;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!L0.includes(t))throw typeof t!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${t} is not Emittery method`);return e}const Or=e=>e===Lg||e===Jg;function Ec(e,t,i){if(Or(t))try{Tg=!0,e.emit(t,i)}finally{Tg=!1}}class Zr{static mixin(t,i){return i=M0(i),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const I of i)if(n.prototype[I]!==void 0)throw new Error(`The property \`${I}\` already exists on \`target\``);function o(){return Object.defineProperty(this,t,{enumerable:!1,value:new Zr}),this[t]}Object.defineProperty(n.prototype,t,{enumerable:!1,get:o});const l=I=>function(...m){return this[t][I](...m)};for(const I of i)Object.defineProperty(n.prototype,I,{enumerable:!1,value:l(I)});return n}}static get isDebugEnabled(){var t,i;if(typeof((t=globalThis.process)==null?void 0:t.env)!="object")return Ia;const{env:n}=(i=globalThis.process)!=null?i:{env:{}};return n.DEBUG==="emittery"||n.DEBUG==="*"||Ia}static set isDebugEnabled(t){Ia=t}constructor(t={}){var i;Gs.set(this,new Set),sr.set(this,new Map),gs.set(this,new Map),gs.get(this).set(Mg,new Set),this.debug=(i=t.debug)!=null?i:{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(n,o,l,I)=>{try{I=JSON.stringify(I)}catch{I=`Object with the following keys failed to stringify: ${Object.keys(I).join(",")}`}(typeof l=="symbol"||typeof l=="number")&&(l=l.toString());const m=new Date,y=`${m.getHours()}:${m.getMinutes()}:${m.getSeconds()}.${m.getMilliseconds()}`;console.log(`[${y}][emittery:${n}][${o}] Event Name: ${l}
	data: ${I}`)})}logIfDebugEnabled(t,i,n){(Zr.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,i,n)}on(t,i){Uc(i),t=Array.isArray(t)?t:[t];for(const n of t){xr(n);let o=Yr(this,n);o||(o=new Set,sr.get(this).set(n,o)),o.add(i),this.logIfDebugEnabled("subscribe",n,void 0),Or(n)||Ec(this,Lg,{eventName:n,listener:i})}return this.off.bind(this,t,i)}off(t,i){Uc(i),t=Array.isArray(t)?t:[t];for(const n of t){xr(n);const o=Yr(this,n);o&&(o.delete(i),o.size===0&&sr.get(this).delete(n)),this.logIfDebugEnabled("unsubscribe",n,void 0),Or(n)||Ec(this,Jg,{eventName:n,listener:i})}}once(t){let i;const n=new Promise(o=>{i=this.on(t,l=>{i(),o(l)})});return n.off=i,n}events(t){t=Array.isArray(t)?t:[t];for(const i of t)xr(i);return N0(this,t)}async emit(t,i){var n;if(xr(t),Or(t)&&!Tg)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",t,i),m3(this,t,i);const o=(n=Yr(this,t))!=null?n:new Set,l=Gs.get(this),I=[...o],m=Or(t)?[]:[...l];await Y0,await Promise.all([...I.map(async y=>{if(o.has(y))return y(i)}),...m.map(async y=>{if(l.has(y))return y(t,i)})])}async emitSerial(t,i){var n;if(xr(t),Or(t)&&!Tg)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",t,i);const o=(n=Yr(this,t))!=null?n:new Set,l=Gs.get(this),I=[...o],m=[...l];await Y0;for(const y of I)o.has(y)&&await y(i);for(const y of m)l.has(y)&&await y(t,i)}onAny(t){return Uc(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Gs.get(this).add(t),Ec(this,Lg,{listener:t}),this.offAny.bind(this,t)}anyEvent(){return N0(this)}offAny(t){Uc(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),Ec(this,Jg,{listener:t}),Gs.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(const i of t)if(this.logIfDebugEnabled("clear",i,void 0),typeof i=="string"||typeof i=="symbol"||typeof i=="number"){const n=Yr(this,i);n&&n.clear();const o=zl(this,i);if(o){for(const l of o)l.finish();o.clear()}}else{Gs.get(this).clear();for(const[n,o]of sr.get(this).entries())o.clear(),sr.get(this).delete(n);for(const[n,o]of gs.get(this).entries()){for(const l of o)l.finish();o.clear(),gs.get(this).delete(n)}}}listenerCount(t){var i,n,o,l,I,m;t=Array.isArray(t)?t:[t];let y=0;for(const H of t){if(typeof H=="string"){y+=Gs.get(this).size+((n=(i=Yr(this,H))==null?void 0:i.size)!=null?n:0)+((l=(o=zl(this,H))==null?void 0:o.size)!=null?l:0)+((m=(I=zl(this))==null?void 0:I.size)!=null?m:0);continue}typeof H!="undefined"&&xr(H),y+=Gs.get(this).size;for(const L of sr.get(this).values())y+=L.size;for(const L of gs.get(this).values())y+=L.size}return y}bindMethods(t,i){if(typeof t!="object"||t===null)throw new TypeError("`target` must be an object");i=M0(i);for(const n of i){if(t[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(t,n,{enumerable:!1,value:this[n].bind(this)})}}}const L0=Object.getOwnPropertyNames(Zr.prototype).filter(e=>e!=="constructor");Object.defineProperty(Zr,"listenerAdded",{value:Lg,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Zr,"listenerRemoved",{value:Jg,writable:!1,enumerable:!0,configurable:!1});function h3(e){return e.onAny&&e.emit}function b3(e){return e.prototype.onAny&&e.prototype.emit}let p3=0;async function A3(e,t,i){const o=b3(e)?new Zr:{},l=p3++;return Object.getOwnPropertyNames(e.prototype).forEach(I=>{o[I]=(...m)=>Yg(t,Io.FORWARD,I,m,i)}),o.terminate=async(...I)=>{const m=await Yg(t,Io.TERMINATE,"",I,i);return delete Ng[l],t.terminate(),o.workerContext.worker=void 0,m},o.workerContext={id:l,worker:t,resolvers:i},Ng[l]=o,o}async function Z3(e,t){const i=new Map;let n;const o=await u3(e,t,i,(l,I)=>{n!=null&&n.emit&&(n==null||n.emit(l,I))});return n=await A3(e,o,i),n}async function y3(e,t){const{functionName:i,args:n}=e;if(!t.instance)throw"instance not initialized";if(!i)throw"missing function name to call";if(!t.instance[i])throw`undefined function [${i}] in class ${t.instance.constructor.workerId}`;nl(e,await t.instance[i](...n!=null?n:[]))}const gb=aC("registeredWorkers",{});function f3(e,t){t.workerId=e,IC()&&(gb[t.workerId]=t)}function G3(e,t){if(!e.args)throw"Missing className while initializing worker";const[i,n]=e.args,o=gb[i];if(o)t.instance=new o(e.args.slice(1));else throw`unknown worker class ${i}`;sc(n,il),h3(t.instance)&&t.instance.onAny((l,I)=>{nl({type:Io.EVENT},{name:l,data:I})}),nl(e,typeof t.instance!==void 0)}async function V3(e,t){const{args:i}=e;if(!t.instance)throw"instance not initialized";let n;t.instance.terminate&&(n=await t.instance.terminate(...i!=null?i:[])),nl(e,n)}function W3(e){if(!e.args)throw"Missing globals while syncing";sc(e.args[0],il),nl(e,{})}function B3(){const e={};onmessage=async t=>{const i=t.data;switch(i.type){case Io.INIT:G3(i,e);break;case Io.FORWARD:y3(i,e);break;case Io.TERMINATE:V3(i,e);break;case Io.GLOBALS_SYNC:W3(i);break}}}IC()&&B3();class J0{static async createVideoReadable(t){return new Promise((i,n)=>{const o=document.createElement("video");let l=new AbortController,I=new AbortController;o.addEventListener("canplay",()=>{l.abort(),o.muted=!0,o.loop=!0,o.play().then(()=>{try{const m=o.captureStream(),y=new MediaStreamTrackProcessor(m.getVideoTracks()[0]);i(y.readable)}catch(m){n(m)}})},{once:!0,signal:I.signal}),o.addEventListener("error",m=>{I.abort(),n("loading error:"+m)},{once:!0,signal:l.signal}),o.crossOrigin="anonymous",o.src=t})}static async createImageCanvas(t){const n=await(await fetch(t)).blob();return await createImageBitmap(n)}}var X3=Object.defineProperty,R3=(e,t,i)=>t in e?X3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,v3=(e,t,i)=>(R3(e,t+"",i),i);const S3="hlg.tokbox.com/prod/logging/vcp_webrtc",w3="https://",F3=1e4;let Qc;const H3=new Uint8Array(16);function x3(){if(!Qc&&(Qc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qc(H3)}const Ln=[];for(let e=0;e<256;++e)Ln.push((e+256).toString(16).slice(1));function Y3(e,t=0){return(Ln[e[t+0]]+Ln[e[t+1]]+Ln[e[t+2]]+Ln[e[t+3]]+"-"+Ln[e[t+4]]+Ln[e[t+5]]+"-"+Ln[e[t+6]]+Ln[e[t+7]]+"-"+Ln[e[t+8]]+Ln[e[t+9]]+"-"+Ln[e[t+10]]+Ln[e[t+11]]+Ln[e[t+12]]+Ln[e[t+13]]+Ln[e[t+14]]+Ln[e[t+15]]).toLowerCase()}const N3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T0={randomUUID:N3};function M3(e,t,i){if(T0.randomUUID&&!t&&!e)return T0.randomUUID();e=e||{};const n=e.random||(e.rng||x3)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Y3(n)}function CC(e,t){globalThis.vonage||(globalThis.vonage={}),globalThis.vonage.workerizer||(globalThis.vonage.workerizer={});let i=globalThis.vonage.workerizer;return i[e]||(i[e]=t),i[e]}const Hs=CC("globals",{});var gr=(e=>(e.INIT="INIT",e.FORWARD="FORWARD",e.TERMINATE="TERMINATE",e.GLOBALS_SYNC="GLOBALS_SYNC",e))(gr||{});function db(e){return[ImageBitmap,ReadableStream,WritableStream].some(t=>e instanceof t)}let L3=0;function J3(e,t,i,n,o){const l=L3++;return e.postMessage({id:l,type:t,functionName:i,args:n},n.filter(I=>db(I))),new Promise(I=>{o==null||o.set(l,I)})}function yc(e,t){const{id:i,type:n}=e,o=Array.isArray(t)?t:[t];postMessage({id:i,type:n,result:t},o.filter(l=>db(l)))}const k0=CC("workerized",{});function ab(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}async function T3(){if(ab())yc({type:gr.GLOBALS_SYNC},Hs);else{const e=[];for(const t in k0){const{worker:i,resolvers:n}=k0[t].workerContext;i&&e.push(J3(i,gr.GLOBALS_SYNC,"",[Hs],n))}await Promise.all(e)}}function kg(e,t){if(Array.isArray(t))t.splice(0,t.length);else if(typeof t=="object")for(const i in t)delete t[i];for(const i in e)Array.isArray(e[i])?(t[i]=[],kg(e[i],t[i])):typeof e[i]=="object"?(t[i]={},kg(e[i],t[i])):t[i]=e[i]}async function k3(e,t){const{functionName:i,args:n}=e;if(!t.instance)throw"instance not initialized";if(!i)throw"missing function name to call";if(!t.instance[i])throw`undefined function [${i}] in class ${t.instance.constructor.workerId}`;yc(e,await t.instance[i](...n!=null?n:[]))}const z3=CC("registeredWorkers",{});function K3(e,t){if(!e.args)throw"Missing className while initializing worker";const[i,n]=e.args,o=z3[i];if(o)t.instance=new o(e.args.slice(1));else throw`unknown worker class ${i}`;kg(n,Hs),yc(e,typeof t.instance!==void 0)}async function U3(e,t){const{args:i}=e;if(!t.instance)throw"instance not initialized";let n;t.instance.terminate&&(n=await t.instance.terminate(...i!=null?i:[])),yc(e,n)}function E3(e){if(!e.args)throw"Missing globals while syncing";kg(e.args[0],Hs),yc(e,{})}function Q3(){const e={};onmessage=async t=>{const i=t.data;switch(i.type){case gr.INIT:K3(i,e);break;case gr.FORWARD:k3(i,e);break;case gr.TERMINATE:U3(i,e);break;case gr.GLOBALS_SYNC:E3(i);break}}}ab()&&Q3();function D3(e,t){return Hs[e]||(Hs[e]=t),[()=>Hs[e],async i=>{Hs[e]=i,await T3()}]}function O3(e,t){return D3(e,t)}const[j3,JX]=O3("metadata");function Ca(){return j3()}let _3=class{constructor(t){v3(this,"uuid",M3()),this.config=t}async send(t){var i,n,o;const{appId:l,sourceType:I}=(i=Ca())!=null?i:{};if(!l||!I)return"metadata missing";const m=new AbortController,y=setTimeout(()=>m.abort(),F3);return await((o=(n=this.config)==null?void 0:n.fetch)!=null?o:fetch)(this.getUrl(),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(this.buildReport(t)),signal:m.signal}),clearTimeout(y),"success"}getUrl(){var t;let i=(t=Ca().proxyUrl)!=null?t:w3;return i+=(i.at(-1)==="/"?"":"/")+S3,i}getHeaders(){return{"Content-Type":"application/json"}}buildReport(t){const i=Ca();return{guid:this.uuid,...t,applicationId:i.appId,timestamp:Date.now(),proxyUrl:i.proxyUrl,source:i.sourceType}}};const P3="5.2.0-alpha.2";class bd{constructor(){const t=new OffscreenCanvas(0,0),i=t.getContext("2d",{willReadFrequently:!0});if(!i)throw"Fail to retrieve webgl2 context";this.canvas=t,this.context=i}setFlickeringOptions(t){}enablePostProcessing(){}disablePostProcessing(){}async profileWebgl(t){return[]}async render(t,i){return this.canvas}resizeCanvas(t){const{width:i,height:n}=t;this.canvas.width=i,this.canvas.height=n}renderSilhouette(t,i,n="none"){const{width:o,height:l}=t;this.context.save(),this.context.drawImage(i,0,0,i.width,i.height,0,0,o,l),this.context.filter="blur(5px)",this.context.globalCompositeOperation="source-in",this.context.drawImage(i,0,0,i.width,i.height,0,0,o,l),this.context.globalCompositeOperation="source-in",this.context.filter=n,this.context.drawImage(t,0,0,o,l,0,0,this.canvas.width,this.canvas.height),this.context.restore()}}class q3 extends bd{constructor(t){super(),this.radius=t}async render(t,i){super.resizeCanvas(t);const n=await createImageBitmap(i);return this.renderSilhouette(t,n),this.context.save(),this.context.filter=`blur(${this.radius}px)`,this.context.globalCompositeOperation="destination-over",this.context.drawImage(t,0,0,t.width,t.height),this.context.restore(),super.render(t,i)}}class $3 extends bd{constructor(t){super(),this.radius=t}async render(t,i){super.resizeCanvas(t);const n=await createImageBitmap(i);return this.renderSilhouette(t,n,`blur(${this.radius}px)`),this.context.save(),this.context.filter="none",this.context.globalCompositeOperation="destination-over",this.context.drawImage(t,0,0,t.width,t.height),this.context.restore(),super.render(t,i)}}class tf extends bd{setBackgroundImage(t){this.backgroundImage=t}async render(t,i){super.resizeCanvas(t);const n=await createImageBitmap(i);return this.renderSilhouette(t,n),this.backgroundImage&&(this.context.save(),this.context.filter="none",this.context.globalCompositeOperation="destination-over",this.context.drawImage(this.backgroundImage,0,0,this.backgroundImage.width,this.backgroundImage.height,0,0,t.width,t.height),this.context.restore()),super.render(t,i)}}const ef=.3,nf=1;class of extends bd{constructor(){super(...arguments),this.backgroundCanvas=new OffscreenCanvas(0,0),this.backgroundContext=this.backgroundCanvas.getContext("2d",{willReadFrequently:!0}),this.calculateBackgroundImageData=(t,i,n)=>{let o=i,l=n,I=0,m=0;return i/n<t.width/t.height?(o=n*(t.width/t.height),I=(o-i)/2):(l=i*t.height/t.width,m=(l-n)/2),this.backgroundCanvas.width=o,this.backgroundCanvas.height=l,this.backgroundContext.drawImage(t,0,0,o,l),this.backgroundContext.getImageData(I,m,i,n).data},this.drawSegmentationResult=(t,i,n)=>{const{height:o,width:l}=t,I=this.context.getImageData(0,0,t.width,t.height).data,m=n.slice(0),y=ef*255,H=nf*255;for(let nt=0;nt<i.length;nt+=4)if(i[nt]>0){const dt=nt,P=dt+1,rt=dt+2,Xt=dt+3;if(m[Xt]=255,i[nt]<H){const Wt=(i[nt]-y)/(H-y),xt=1-Wt;m[dt]=m[dt]*xt+I[dt]*Wt,m[P]=m[P]*xt+I[P]*Wt,m[rt]=m[rt]*xt+I[rt]*Wt}else m[dt]=I[dt],m[P]=I[P],m[rt]=I[rt]}const L=new Uint8ClampedArray(m.buffer);return new ImageData(L,l,o)}}setBackgroundImage(t){this.backgroundImage=t}async render(t,i){if(super.resizeCanvas(t),this.context.drawImage(t,0,0,t.width,t.height,0,0,this.canvas.width,this.canvas.height),this.backgroundImage){const n=this.calculateBackgroundImageData(this.backgroundImage,t.width,t.height),o=this.drawSegmentationResult(t,i.data,n);this.context.save(),this.context.drawImage(await createImageBitmap(o),0,0,t.width,t.height),this.context.restore()}return super.render(t,i)}}/* @license twgl.js 5.5.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const uC=5120,rc=5121,mC=5122,hC=5123,bC=5124,pC=5125,AC=5126,sf=32819,rf=32820,lf=33635,cf=5131,gf=33640,df=35899,af=35902,If=36269,Cf=34042,Ib={};{const e=Ib;e[uC]=Int8Array,e[rc]=Uint8Array,e[mC]=Int16Array,e[hC]=Uint16Array,e[bC]=Int32Array,e[pC]=Uint32Array,e[AC]=Float32Array,e[sf]=Uint16Array,e[rf]=Uint16Array,e[lf]=Uint16Array,e[cf]=Uint16Array,e[gf]=Uint32Array,e[df]=Uint32Array,e[af]=Uint32Array,e[If]=Uint32Array,e[Cf]=Uint32Array}function ZC(e){if(e instanceof Int8Array)return uC;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return rc;if(e instanceof Int16Array)return mC;if(e instanceof Uint16Array)return hC;if(e instanceof Int32Array)return bC;if(e instanceof Uint32Array)return pC;if(e instanceof Float32Array)return AC;throw new Error("unsupported typed array type")}function Cb(e){if(e===Int8Array)return uC;if(e===Uint8Array||e===Uint8ClampedArray)return rc;if(e===Int16Array)return mC;if(e===Uint16Array)return hC;if(e===Int32Array)return bC;if(e===Uint32Array)return pC;if(e===Float32Array)return AC;throw new Error("unsupported typed array type")}function ub(e){const t=Ib[e];if(!t)throw new Error("unknown gl type");return t}const zg=typeof SharedArrayBuffer!="undefined"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function mb(...e){console.error(...e)}const z0=new Map;function pd(e,t){if(!e||typeof e!="object")return!1;let i=z0.get(t);i||(i=new WeakMap,z0.set(t,i));let n=i.get(e);if(n===void 0){const o=Object.prototype.toString.call(e);n=o.substring(8,o.length-1)===t,i.set(e,n)}return n}function uf(e,t){return typeof WebGLBuffer!="undefined"&&pd(t,"WebGLBuffer")}function mf(e,t){return typeof WebGLRenderbuffer!="undefined"&&pd(t,"WebGLRenderbuffer")}function yC(e,t){return typeof WebGLTexture!="undefined"&&pd(t,"WebGLTexture")}function hf(e,t){return typeof WebGLSampler!="undefined"&&pd(t,"WebGLSampler")}const hb=35044,ar=34962,bf=34963,pf=34660,Af=5120,Zf=5121,yf=5122,ff=5123,Gf=5124,Vf=5125,bb=5126,pb={attribPrefix:""};function Wf(e,t,i,n,o){e.bindBuffer(t,i),e.bufferData(t,n,o||hb)}function Ab(e,t,i,n){if(uf(e,t))return t;i=i||ar;const o=e.createBuffer();return Wf(e,i,o,t,n),o}function Zb(e){return e==="indices"}function Bf(e){return e===Int8Array||e===Uint8Array}function Xf(e){return e.length?e:e.data}const Rf=/coord|texture/i,vf=/color|colour/i;function Sf(e,t){let i;if(Rf.test(e)?i=2:vf.test(e)?i=4:i=3,t%i>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${i} but ${t} values is not evenly divisible by ${i}. You should specify it.`);return i}function wf(e,t,i){return e.numComponents||e.size||Sf(t,i||Xf(e).length)}function yb(e,t){if(zg(e))return e;if(zg(e.data))return e.data;Array.isArray(e)&&(e={data:e});let i=e.type?fC(e.type):void 0;return i||(Zb(t)?i=Uint16Array:i=Float32Array),new i(e.data)}function Ff(e){return typeof e=="number"?e:e?Cb(e):bb}function fC(e){return typeof e=="number"?ub(e):e||Float32Array}function Hf(e,t){return{buffer:t.buffer,numValues:2*3*4,type:Ff(t.type),arrayType:fC(t.type)}}function xf(e,t){const i=t.data||t,n=fC(t.type),o=i*n.BYTES_PER_ELEMENT,l=e.createBuffer();return e.bindBuffer(ar,l),e.bufferData(ar,o,t.drawType||hb),{buffer:l,numValues:i,type:Cb(n),arrayType:n}}function Yf(e,t,i){const n=yb(t,i);return{arrayType:n.constructor,buffer:Ab(e,n,void 0,t.drawType),type:ZC(n),numValues:0}}function Nf(e,t){const i={};return Object.keys(t).forEach(function(n){if(!Zb(n)){const o=t[n],l=o.attrib||o.name||o.attribName||pb.attribPrefix+n;if(o.value){if(!Array.isArray(o.value)&&!zg(o.value))throw new Error("array.value is not array or typedarray");i[l]={value:o.value}}else{let I;o.buffer&&o.buffer instanceof WebGLBuffer?I=Hf:typeof o=="number"||typeof o.data=="number"?I=xf:I=Yf;const{buffer:m,type:y,numValues:H,arrayType:L}=I(e,o,n),K=o.normalize!==void 0?o.normalize:Bf(L),nt=wf(o,n,H);i[l]={buffer:m,numComponents:nt,type:y,normalize:K,stride:o.stride||0,offset:o.offset||0,divisor:o.divisor===void 0?void 0:o.divisor,drawType:o.drawType}}}}),e.bindBuffer(ar,null),i}function Mf(e,t){return t===Af||t===Zf?1:t===yf||t===ff?2:t===Gf||t===Vf||t===bb?4:0}const ua=["position","positions","a_position"];function Lf(e,t){let i,n;for(n=0;n<ua.length&&(i=ua[n],!(i in t||(i=pb.attribPrefix+i,i in t)));++n);n===ua.length&&(i=Object.keys(t)[0]);const o=t[i];if(!o.buffer)return 1;e.bindBuffer(ar,o.buffer);const l=e.getBufferParameter(ar,pf);e.bindBuffer(ar,null);const I=Mf(e,o.type),m=l/I,y=o.numComponents||o.size,H=m/y;if(H%1!==0)throw new Error(`numComponents ${y} not correct for length ${length}`);return H}function Jf(e,t,i){const n=Nf(e,t),o=Object.assign({},i||{});o.attribs=Object.assign({},i?i.attribs:{},n);const l=t.indices;if(l){const I=yb(l,"indices");o.indices=Ab(e,I,bf),o.numElements=I.length,o.elementType=ZC(I)}else o.numElements||(o.numElements=Lf(e,o.attribs));return o}function fc(e){return!!e.texStorage2D}const fb=function(){const e={},t={};function i(n){const o=n.constructor.name;if(!e[o]){for(const l in n)if(typeof n[l]=="number"){const I=t[n[l]];t[n[l]]=I?`${I} | ${l}`:l}e[o]=!0}}return function(o,l){return i(o),t[l]||(typeof l=="number"?`0x${l.toString(16)}`:l)}}(),Es={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},lc=zg,Gb=function(){let e;return function(){return e=e||(typeof document!="undefined"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),K0=6406,To=6407,tn=6408,U0=6409,E0=6410,Xl=6402,Q0=34041,Kg=33071,Tf=9728,kf=9729,Qs=3553,Ls=34067,yr=32879,fr=35866,GC=34069,zf=34070,Kf=34071,Uf=34072,Ef=34073,Qf=34074,CI=10241,uI=10240,Ug=10242,Eg=10243,D0=32882,Df=33082,Of=33083,jf=33084,_f=33085,Pf=34892,qf=34893,VC=3317,Vb=3314,Wb=32878,Bb=3316,Xb=3315,Rb=32877,$f=37443,tG=37441,eG=37440,iG=33321,nG=36756,oG=33325,sG=33326,rG=33330,lG=33329,cG=33338,gG=33337,dG=33340,aG=33339,IG=33323,CG=36757,uG=33327,mG=33328,hG=33336,bG=33335,pG=33332,AG=33331,ZG=33334,yG=33333,fG=32849,GG=35905,VG=36194,WG=36758,BG=35898,XG=35901,RG=34843,vG=34837,SG=36221,wG=36239,FG=36215,HG=36233,xG=36209,YG=36227,NG=32856,MG=35907,LG=36759,JG=32855,TG=32854,kG=32857,zG=34842,KG=34836,UG=36220,EG=36238,QG=36975,DG=36214,OG=36232,jG=36226,_G=36208,PG=33189,qG=33190,$G=36012,tV=36013,eV=35056,Vs=5120,Ei=5121,Dc=5122,Nr=5123,Oc=5124,tr=5125,kn=5126,O0=32819,j0=32820,_0=33635,vo=5131,Rl=36193,ma=33640,iV=35899,nV=35902,oV=36269,sV=34042,jc=33319,Mr=33320,_c=6403,Lr=36244,Jr=36248,er=36249;let ha;function Ad(e){if(!ha){const t={};t[K0]={textureFormat:K0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Ei,vo,Rl,kn]},t[U0]={textureFormat:U0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Ei,vo,Rl,kn]},t[E0]={textureFormat:E0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Ei,vo,Rl,kn]},t[To]={textureFormat:To,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Ei,vo,Rl,kn,_0]},t[tn]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Ei,vo,Rl,kn,O0,j0]},t[Xl]={textureFormat:Xl,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[tr,Nr]},t[iG]={textureFormat:_c,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Ei]},t[nG]={textureFormat:_c,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Vs]},t[oG]={textureFormat:_c,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[kn,vo]},t[sG]={textureFormat:_c,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[kn]},t[rG]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Ei]},t[lG]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Vs]},t[pG]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Nr]},t[AG]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Dc]},t[ZG]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[tr]},t[yG]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Oc]},t[IG]={textureFormat:jc,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Ei]},t[CG]={textureFormat:jc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Vs]},t[uG]={textureFormat:jc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[kn,vo]},t[mG]={textureFormat:jc,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[kn]},t[hG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ei]},t[bG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Vs]},t[cG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Nr]},t[gG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Dc]},t[dG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[tr]},t[aG]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Oc]},t[fG]={textureFormat:To,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Ei]},t[GG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Ei]},t[VG]={textureFormat:To,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Ei,_0]},t[WG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Vs]},t[BG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[kn,vo,iV]},t[XG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[kn,vo,nV]},t[RG]={textureFormat:To,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[kn,vo]},t[vG]={textureFormat:To,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[kn]},t[SG]={textureFormat:Jr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Ei]},t[wG]={textureFormat:Jr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Vs]},t[FG]={textureFormat:Jr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Nr]},t[HG]={textureFormat:Jr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Dc]},t[xG]={textureFormat:Jr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[tr]},t[YG]={textureFormat:Jr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Oc]},t[NG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ei]},t[MG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ei]},t[LG]={textureFormat:tn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Vs]},t[JG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Ei,j0,ma]},t[TG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Ei,O0]},t[kG]={textureFormat:tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ma]},t[zG]={textureFormat:tn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[kn,vo]},t[KG]={textureFormat:tn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[kn]},t[UG]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ei]},t[EG]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vs]},t[QG]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ma]},t[DG]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Nr]},t[OG]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Dc]},t[jG]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Oc]},t[_G]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[tr]},t[PG]={textureFormat:Xl,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Nr,tr]},t[qG]={textureFormat:Xl,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[tr]},t[$G]={textureFormat:Xl,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kn]},t[eV]={textureFormat:Q0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[sV]},t[tV]={textureFormat:Q0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[oV]},Object.keys(t).forEach(function(i){const n=t[i];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(o,l){const I=n.type[l];n.bytesPerElementMap[I]=o})}),ha=t}return ha[e]}function rV(e,t){const i=Ad(e);if(!i)throw"unknown internal format";const n=i.bytesPerElementMap[t];if(n===void 0)throw"unknown internal format";return n}function Gc(e){const t=Ad(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function P0(e){return(e&e-1)===0}function lV(e,t,i,n){if(!fc(e))return P0(t)&&P0(i);const o=Ad(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function cV(e){const t=Ad(e);if(!t)throw"unknown internal format";return t.textureFilterable}function gV(e,t,i){return lc(t)?ZC(t):i||Ei}function Pc(e,t,i,n,o){if(o%1!==0)throw"can't guess dimensions";if(!i&&!n){const l=Math.sqrt(o/(t===Ls?6:1));l%1===0?(i=l,n=l):(i=o,n=1)}else if(n){if(!i&&(i=o/n,i%1))throw"can't guess dimensions"}else if(n=o/i,n%1)throw"can't guess dimensions";return{width:i,height:n}}function ol(e,t){t.colorspaceConversion!==void 0&&e.pixelStorei($f,t.colorspaceConversion),t.premultiplyAlpha!==void 0&&e.pixelStorei(tG,t.premultiplyAlpha),t.flipY!==void 0&&e.pixelStorei(eG,t.flipY)}function vb(e){e.pixelStorei(VC,4),fc(e)&&(e.pixelStorei(Vb,0),e.pixelStorei(Wb,0),e.pixelStorei(Bb,0),e.pixelStorei(Xb,0),e.pixelStorei(Rb,0))}function dV(e,t,i,n){n.minMag&&(i.call(e,t,CI,n.minMag),i.call(e,t,uI,n.minMag)),n.min&&i.call(e,t,CI,n.min),n.mag&&i.call(e,t,uI,n.mag),n.wrap&&(i.call(e,t,Ug,n.wrap),i.call(e,t,Eg,n.wrap),(t===yr||hf(e,t))&&i.call(e,t,D0,n.wrap)),n.wrapR&&i.call(e,t,D0,n.wrapR),n.wrapS&&i.call(e,t,Ug,n.wrapS),n.wrapT&&i.call(e,t,Eg,n.wrapT),n.minLod!==void 0&&i.call(e,t,Df,n.minLod),n.maxLod!==void 0&&i.call(e,t,Of,n.maxLod),n.baseLevel!==void 0&&i.call(e,t,jf,n.baseLevel),n.maxLevel!==void 0&&i.call(e,t,_f,n.maxLevel),n.compareFunc!==void 0&&i.call(e,t,qf,n.compareFunc),n.compareMode!==void 0&&i.call(e,t,Pf,n.compareMode)}function Sb(e,t,i){const n=i.target||Qs;e.bindTexture(n,t),dV(e,n,e.texParameteri,i)}function aV(e){return e=e||Es.textureColor,lc(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function mI(e,t,i,n,o,l){i=i||Es.textureOptions,l=l||tn;const I=i.target||Qs;if(n=n||i.width,o=o||i.height,e.bindTexture(I,t),lV(e,n,o,l))e.generateMipmap(I);else{const m=cV(l)?kf:Tf;e.texParameteri(I,CI,m),e.texParameteri(I,uI,m),e.texParameteri(I,Ug,Kg),e.texParameteri(I,Eg,Kg)}}function cc(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function hI(e,t){return t=t||{},t.cubeFaceOrder||[GC,zf,Kf,Uf,Ef,Qf]}function bI(e,t){const n=hI(e,t).map(function(o,l){return{face:o,ndx:l}});return n.sort(function(o,l){return o.face-l.face}),n}function wb(e,t,i,n){n=n||Es.textureOptions;const o=n.target||Qs,l=n.level||0;let I=i.width,m=i.height;const y=n.internalFormat||n.format||tn,H=Gc(y),L=n.format||H.format,K=n.type||H.type;if(ol(e,n),e.bindTexture(o,t),o===Ls){const nt=i.width,dt=i.height;let P,rt;if(nt/6===dt)P=dt,rt=[0,0,1,0,2,0,3,0,4,0,5,0];else if(dt/6===nt)P=nt,rt=[0,0,0,1,0,2,0,3,0,4,0,5];else if(nt/3===dt/2)P=nt/3,rt=[0,0,1,0,2,0,0,1,1,1,2,1];else if(nt/2===dt/3)P=nt/2,rt=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(i.src?i.src:i.nodeName);const Xt=Gb();Xt?(Xt.canvas.width=P,Xt.canvas.height=P,I=P,m=P,bI(e,n).forEach(function(Wt){const xt=rt[Wt.ndx*2+0]*P,_=rt[Wt.ndx*2+1]*P;Xt.drawImage(i,xt,_,P,P,0,0,P,P),e.texImage2D(Wt.face,l,y,L,K,Xt.canvas)}),Xt.canvas.width=1,Xt.canvas.height=1):typeof createImageBitmap!="undefined"&&(I=P,m=P,bI(e,n).forEach(function(Wt){const xt=rt[Wt.ndx*2+0]*P,_=rt[Wt.ndx*2+1]*P;e.texImage2D(Wt.face,l,y,P,P,0,L,K,null),createImageBitmap(i,xt,_,P,P,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(qe){ol(e,n),e.bindTexture(o,t),e.texImage2D(Wt.face,l,y,L,K,qe),cc(n)&&mI(e,t,n,I,m,y)})}))}else if(o===yr||o===fr){const nt=Math.min(i.width,i.height),dt=Math.max(i.width,i.height),P=dt/nt;if(P%1!==0)throw"can not compute 3D dimensions of element";const rt=i.width===dt?1:0,Xt=i.height===dt?1:0;e.pixelStorei(VC,1),e.pixelStorei(Vb,i.width),e.pixelStorei(Wb,0),e.pixelStorei(Rb,0),e.texImage3D(o,l,y,nt,nt,nt,0,L,K,null);for(let Wt=0;Wt<P;++Wt){const xt=Wt*nt*rt,_=Wt*nt*Xt;e.pixelStorei(Bb,xt),e.pixelStorei(Xb,_),e.texSubImage3D(o,l,0,0,Wt,nt,nt,1,L,K,i)}vb(e)}else e.texImage2D(o,l,y,L,K,i);cc(n)&&mI(e,t,n,I,m,y),Sb(e,t,n)}function Vc(){}function IV(e){if(typeof document!="undefined"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function CV(e,t){return t===void 0&&!IV(e)?"anonymous":t}function uV(e,t,i){i=i||Vc;let n;if(t=t!==void 0?t:Es.crossOrigin,t=CV(e,t),typeof Image!="undefined"){n=new Image,t!==void 0&&(n.crossOrigin=t);const o=function(){n.removeEventListener("error",l),n.removeEventListener("load",I),n=null},l=function(){const y="couldn't load image: "+e;mb(y),i(y,n),o()},I=function(){i(null,n),o()};return n.addEventListener("error",l),n.addEventListener("load",I),n.src=e,n}else if(typeof ImageBitmap!="undefined"){let o,l;const I=function(){i(o,l)},m={};t&&(m.mode="cors"),fetch(e,m).then(function(y){if(!y.ok)throw y;return y.blob()}).then(function(y){return createImageBitmap(y,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(y){l=y,setTimeout(I)}).catch(function(y){o=y,setTimeout(I)}),n=null}return n}function Fb(e){return typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap||typeof ImageData!="undefined"&&e instanceof ImageData||typeof HTMLElement!="undefined"&&e instanceof HTMLElement}function WC(e,t,i){return Fb(e)?(setTimeout(function(){i(null,e)}),e):uV(e,t,i)}function BC(e,t,i){i=i||Es.textureOptions;const n=i.target||Qs;if(e.bindTexture(n,t),i.color===!1)return;const o=aV(i.color);if(n===Ls)for(let l=0;l<6;++l)e.texImage2D(GC+l,0,tn,1,1,0,tn,Ei,o);else n===yr||n===fr?e.texImage3D(n,0,tn,1,1,1,0,tn,Ei,o):e.texImage2D(n,0,tn,1,1,0,tn,Ei,o)}function mV(e,t,i,n){return n=n||Vc,i=i||Es.textureOptions,BC(e,t,i),i=Object.assign({},i),WC(i.src,i.crossOrigin,function(l,I){l?n(l,t,I):(wb(e,t,I,i),n(null,t,I))})}function hV(e,t,i,n){n=n||Vc;const o=i.src;if(o.length!==6)throw"there must be 6 urls for a cubemap";const l=i.level||0,I=i.internalFormat||i.format||tn,m=Gc(I),y=i.format||m.format,H=i.type||Ei,L=i.target||Qs;if(L!==Ls)throw"target must be TEXTURE_CUBE_MAP";BC(e,t,i),i=Object.assign({},i);let K=6;const nt=[],dt=hI(e,i);let P;function rt(Xt){return function(Wt,xt){--K,Wt?nt.push(Wt):xt.width!==xt.height?nt.push("cubemap face img is not a square: "+xt.src):(ol(e,i),e.bindTexture(L,t),K===5?hI().forEach(function(_){e.texImage2D(_,l,I,y,H,xt)}):e.texImage2D(Xt,l,I,y,H,xt),cc(i)&&e.generateMipmap(L)),K===0&&n(nt.length?nt:void 0,t,P)}}P=o.map(function(Xt,Wt){return WC(Xt,i.crossOrigin,rt(dt[Wt]))})}function bV(e,t,i,n){n=n||Vc;const o=i.src,l=i.internalFormat||i.format||tn,I=Gc(l),m=i.format||I.format,y=i.type||Ei,H=i.target||fr;if(H!==yr&&H!==fr)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";BC(e,t,i),i=Object.assign({},i);let L=o.length;const K=[];let nt;const dt=i.level||0;let P=i.width,rt=i.height;const Xt=o.length;let Wt=!0;function xt(_){return function(qe,ni){if(--L,qe)K.push(qe);else{if(ol(e,i),e.bindTexture(H,t),Wt){Wt=!1,P=i.width||ni.width,rt=i.height||ni.height,e.texImage3D(H,dt,l,P,rt,Xt,0,m,y,null);for(let we=0;we<Xt;++we)e.texSubImage3D(H,dt,0,0,we,P,rt,1,m,y,ni)}else{let we=ni,qt;(ni.width!==P||ni.height!==rt)&&(qt=Gb(),we=qt.canvas,qt.canvas.width=P,qt.canvas.height=rt,qt.drawImage(ni,0,0,P,rt)),e.texSubImage3D(H,dt,0,0,_,P,rt,1,m,y,we),qt&&we===qt.canvas&&(qt.canvas.width=0,qt.canvas.height=0)}cc(i)&&e.generateMipmap(H)}L===0&&n(K.length?K:void 0,t,nt)}}nt=o.map(function(_,qe){return WC(_,i.crossOrigin,xt(qe))})}function pV(e,t,i,n){n=n||Es.textureOptions;const o=n.target||Qs;e.bindTexture(o,t);let l=n.width,I=n.height,m=n.depth;const y=n.level||0,H=n.internalFormat||n.format||tn,L=Gc(H),K=n.format||L.format,nt=n.type||gV(e,i,L.type);if(lc(i))i instanceof Uint8ClampedArray&&(i=new Uint8Array(i.buffer));else{const Xt=ub(nt);i=new Xt(i)}const dt=rV(H,nt),P=i.byteLength/dt;if(P%1)throw"length wrong size for format: "+fb(e,K);let rt;if(o===yr||o===fr)if(!l&&!I&&!m){const Xt=Math.cbrt(P);if(Xt%1!==0)throw"can't guess cube size of array of numElements: "+P;l=Xt,I=Xt,m=Xt}else l&&(!I||!m)?(rt=Pc(e,o,I,m,P/l),I=rt.width,m=rt.height):I&&(!l||!m)?(rt=Pc(e,o,l,m,P/I),l=rt.width,m=rt.height):(rt=Pc(e,o,l,I,P/m),l=rt.width,I=rt.height);else rt=Pc(e,o,l,I,P),l=rt.width,I=rt.height;if(vb(e),e.pixelStorei(VC,n.unpackAlignment||1),ol(e,n),o===Ls){const Xt=dt/i.BYTES_PER_ELEMENT,Wt=P/6*Xt;bI(e,n).forEach(xt=>{const _=Wt*xt.ndx,qe=i.subarray(_,_+Wt);e.texImage2D(xt.face,y,H,l,I,0,K,nt,qe)})}else o===yr||o===fr?e.texImage3D(o,y,H,l,I,m,0,K,nt,i):e.texImage2D(o,y,H,l,I,0,K,nt,i);return{width:l,height:I,depth:m,type:nt}}function AV(e,t,i){const n=i.target||Qs;e.bindTexture(n,t);const o=i.level||0,l=i.internalFormat||i.format||tn,I=Gc(l),m=i.format||I.format,y=i.type||I.type;if(ol(e,i),n===Ls)for(let H=0;H<6;++H)e.texImage2D(GC+H,o,l,i.width,i.height,0,m,y,null);else n===yr||n===fr?e.texImage3D(n,o,l,i.width,i.height,i.depth,0,m,y,null):e.texImage2D(n,o,l,i.width,i.height,0,m,y,null)}function Hb(e,t,i){i=i||Vc,t=t||Es.textureOptions;const n=e.createTexture(),o=t.target||Qs;let l=t.width||1,I=t.height||1;const m=t.internalFormat||tn;e.bindTexture(o,n),o===Ls&&(e.texParameteri(o,Ug,Kg),e.texParameteri(o,Eg,Kg));let y=t.src;if(y)if(typeof y=="function"&&(y=y(e,t)),typeof y=="string")mV(e,n,t,i);else if(lc(y)||Array.isArray(y)&&(typeof y[0]=="number"||Array.isArray(y[0])||lc(y[0]))){const H=pV(e,n,y,t);l=H.width,I=H.height}else Array.isArray(y)&&(typeof y[0]=="string"||Fb(y[0]))?o===Ls?hV(e,n,t,i):bV(e,n,t,i):(wb(e,n,y,t),l=y.width,I=y.height);else AV(e,n,t);return cc(t)&&mI(e,n,t,l,I,m),Sb(e,n,t),n}const XC=mb;function xb(e){return typeof document!="undefined"&&document.getElementById?document.getElementById(e):null}const Qg=33984,Zd=34962,ZV=34963,yV=35713,fV=35714,GV=35632,VV=35633,WV=35981,Yb=35718,BV=35721,XV=35971,RV=35382,vV=35396,SV=35398,wV=35392,FV=35395,yd=5126,Nb=35664,Mb=35665,Lb=35666,RC=5124,Jb=35667,Tb=35668,kb=35669,zb=35670,Kb=35671,Ub=35672,Eb=35673,Qb=35674,Db=35675,Ob=35676,HV=35678,xV=35680,YV=35679,NV=35682,MV=35685,LV=35686,JV=35687,TV=35688,kV=35689,zV=35690,KV=36289,UV=36292,EV=36293,vC=5125,jb=36294,_b=36295,Pb=36296,QV=36298,DV=36299,OV=36300,jV=36303,_V=36306,PV=36307,qV=36308,$V=36311,fd=3553,Gd=34067,SC=32879,Vd=35866,Be={};function qb(e,t){return Be[t].bindPoint}function tW(e,t){return function(i){e.uniform1f(t,i)}}function eW(e,t){return function(i){e.uniform1fv(t,i)}}function iW(e,t){return function(i){e.uniform2fv(t,i)}}function nW(e,t){return function(i){e.uniform3fv(t,i)}}function oW(e,t){return function(i){e.uniform4fv(t,i)}}function $b(e,t){return function(i){e.uniform1i(t,i)}}function t2(e,t){return function(i){e.uniform1iv(t,i)}}function e2(e,t){return function(i){e.uniform2iv(t,i)}}function i2(e,t){return function(i){e.uniform3iv(t,i)}}function n2(e,t){return function(i){e.uniform4iv(t,i)}}function sW(e,t){return function(i){e.uniform1ui(t,i)}}function rW(e,t){return function(i){e.uniform1uiv(t,i)}}function lW(e,t){return function(i){e.uniform2uiv(t,i)}}function cW(e,t){return function(i){e.uniform3uiv(t,i)}}function gW(e,t){return function(i){e.uniform4uiv(t,i)}}function dW(e,t){return function(i){e.uniformMatrix2fv(t,!1,i)}}function aW(e,t){return function(i){e.uniformMatrix3fv(t,!1,i)}}function IW(e,t){return function(i){e.uniformMatrix4fv(t,!1,i)}}function CW(e,t){return function(i){e.uniformMatrix2x3fv(t,!1,i)}}function uW(e,t){return function(i){e.uniformMatrix3x2fv(t,!1,i)}}function mW(e,t){return function(i){e.uniformMatrix2x4fv(t,!1,i)}}function hW(e,t){return function(i){e.uniformMatrix4x2fv(t,!1,i)}}function bW(e,t){return function(i){e.uniformMatrix3x4fv(t,!1,i)}}function pW(e,t){return function(i){e.uniformMatrix4x3fv(t,!1,i)}}function qn(e,t,i,n){const o=qb(e,t);return fc(e)?function(l){let I,m;!l||yC(e,l)?(I=l,m=null):(I=l.texture,m=l.sampler),e.uniform1i(n,i),e.activeTexture(Qg+i),e.bindTexture(o,I),e.bindSampler(i,m)}:function(l){e.uniform1i(n,i),e.activeTexture(Qg+i),e.bindTexture(o,l)}}function $n(e,t,i,n,o){const l=qb(e,t),I=new Int32Array(o);for(let m=0;m<o;++m)I[m]=i+m;return fc(e)?function(m){e.uniform1iv(n,I),m.forEach(function(y,H){e.activeTexture(Qg+I[H]);let L,K;!y||yC(e,y)?(L=y,K=null):(L=y.texture,K=y.sampler),e.bindSampler(i,K),e.bindTexture(l,L)})}:function(m){e.uniform1iv(n,I),m.forEach(function(y,H){e.activeTexture(Qg+I[H]),e.bindTexture(l,y)})}}Be[yd]={Type:Float32Array,size:4,setter:tW,arraySetter:eW};Be[Nb]={Type:Float32Array,size:8,setter:iW,cols:2};Be[Mb]={Type:Float32Array,size:12,setter:nW,cols:3};Be[Lb]={Type:Float32Array,size:16,setter:oW,cols:4};Be[RC]={Type:Int32Array,size:4,setter:$b,arraySetter:t2};Be[Jb]={Type:Int32Array,size:8,setter:e2,cols:2};Be[Tb]={Type:Int32Array,size:12,setter:i2,cols:3};Be[kb]={Type:Int32Array,size:16,setter:n2,cols:4};Be[vC]={Type:Uint32Array,size:4,setter:sW,arraySetter:rW};Be[jb]={Type:Uint32Array,size:8,setter:lW,cols:2};Be[_b]={Type:Uint32Array,size:12,setter:cW,cols:3};Be[Pb]={Type:Uint32Array,size:16,setter:gW,cols:4};Be[zb]={Type:Uint32Array,size:4,setter:$b,arraySetter:t2};Be[Kb]={Type:Uint32Array,size:8,setter:e2,cols:2};Be[Ub]={Type:Uint32Array,size:12,setter:i2,cols:3};Be[Eb]={Type:Uint32Array,size:16,setter:n2,cols:4};Be[Qb]={Type:Float32Array,size:32,setter:dW,rows:2,cols:2};Be[Db]={Type:Float32Array,size:48,setter:aW,rows:3,cols:3};Be[Ob]={Type:Float32Array,size:64,setter:IW,rows:4,cols:4};Be[MV]={Type:Float32Array,size:32,setter:CW,rows:2,cols:3};Be[LV]={Type:Float32Array,size:32,setter:mW,rows:2,cols:4};Be[JV]={Type:Float32Array,size:48,setter:uW,rows:3,cols:2};Be[TV]={Type:Float32Array,size:48,setter:bW,rows:3,cols:4};Be[kV]={Type:Float32Array,size:64,setter:hW,rows:4,cols:2};Be[zV]={Type:Float32Array,size:64,setter:pW,rows:4,cols:3};Be[HV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:fd};Be[xV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Gd};Be[YV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:SC};Be[NV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:fd};Be[KV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Vd};Be[UV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Vd};Be[EV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Gd};Be[QV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:fd};Be[DV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:SC};Be[OV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Gd};Be[jV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Vd};Be[_V]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:fd};Be[PV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:SC};Be[qV]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Gd};Be[$V]={Type:null,size:0,setter:qn,arraySetter:$n,bindPoint:Vd};function Wd(e,t){return function(i){if(i.value)switch(e.disableVertexAttribArray(t),i.value.length){case 4:e.vertexAttrib4fv(t,i.value);break;case 3:e.vertexAttrib3fv(t,i.value);break;case 2:e.vertexAttrib2fv(t,i.value);break;case 1:e.vertexAttrib1fv(t,i.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Zd,i.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,i.numComponents||i.size,i.type||yd,i.normalize||!1,i.stride||0,i.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,i.divisor||0)}}function Ds(e,t){return function(i){if(i.value)if(e.disableVertexAttribArray(t),i.value.length===4)e.vertexAttrib4iv(t,i.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Zd,i.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,i.numComponents||i.size,i.type||RC,i.stride||0,i.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,i.divisor||0)}}function Bd(e,t){return function(i){if(i.value)if(e.disableVertexAttribArray(t),i.value.length===4)e.vertexAttrib4uiv(t,i.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Zd,i.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,i.numComponents||i.size,i.type||vC,i.stride||0,i.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,i.divisor||0)}}function wC(e,t,i){const n=i.size,o=i.count;return function(l){e.bindBuffer(Zd,l.buffer);const I=l.size||l.numComponents||n,m=I/o,y=l.type||yd,L=Be[y].size*I,K=l.normalize||!1,nt=l.offset||0,dt=L/o;for(let P=0;P<o;++P)e.enableVertexAttribArray(t+P),e.vertexAttribPointer(t+P,m,y,K,L,nt+dt*P),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+P,l.divisor||0)}}const Wn={};Wn[yd]={size:4,setter:Wd};Wn[Nb]={size:8,setter:Wd};Wn[Mb]={size:12,setter:Wd};Wn[Lb]={size:16,setter:Wd};Wn[RC]={size:4,setter:Ds};Wn[Jb]={size:8,setter:Ds};Wn[Tb]={size:12,setter:Ds};Wn[kb]={size:16,setter:Ds};Wn[vC]={size:4,setter:Bd};Wn[jb]={size:8,setter:Bd};Wn[_b]={size:12,setter:Bd};Wn[Pb]={size:16,setter:Bd};Wn[zb]={size:4,setter:Ds};Wn[Kb]={size:8,setter:Ds};Wn[Ub]={size:12,setter:Ds};Wn[Eb]={size:16,setter:Ds};Wn[Qb]={size:4,setter:wC,count:2};Wn[Db]={size:9,setter:wC,count:3};Wn[Ob]={size:16,setter:wC,count:4};const AW=/ERROR:\s*\d+:(\d+)/gi;function ZW(e,t="",i=0){const n=[...t.matchAll(AW)],o=new Map(n.map((l,I)=>{const m=parseInt(l[1]),y=n[I+1],H=y?y.index:t.length,L=t.substring(l.index,H);return[m-1,L]}));return e.split(`
`).map((l,I)=>{const m=o.get(I);return`${I+1+i}: ${l}${m?`

^^^ ${m}`:""}`}).join(`
`)}const q0=/^[ \t]*\n/;function o2(e){let t=0;return q0.test(e)&&(t=1,e=e.replace(q0,"")),{lineOffset:t,shaderSource:e}}function yW(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function fW(e,t,i,n){if(n=n||XC,!e.getShaderParameter(i,yV)){const l=e.getShaderInfoLog(i),{lineOffset:I,shaderSource:m}=o2(e.getShaderSource(i)),y=`${ZW(m,l,I)}
Error compiling ${fb(e,t)}: ${l}`;return n(y),y}return""}function FC(e,t,i){let n,o,l;if(typeof t=="function"&&(i=t,t=void 0),typeof e=="function")i=e,e=void 0;else if(e&&!Array.isArray(e)){const H=e;i=H.errorCallback,e=H.attribLocations,n=H.transformFeedbackVaryings,o=H.transformFeedbackMode,l=H.callback}const I=i||XC,m=[],y={errorCallback(H,...L){m.push(H),I(H,...L)},transformFeedbackVaryings:n,transformFeedbackMode:o,callback:l,errors:m};{let H={};Array.isArray(e)?e.forEach(function(L,K){H[L]=t?t[K]:K}):H=e||{},y.attribLocations=H}return y}const GW=["VERTEX_SHADER","FRAGMENT_SHADER"];function VW(e,t){if(t.indexOf("frag")>=0)return GV;if(t.indexOf("vert")>=0)return VV}function WW(e,t,i){const n=e.getAttachedShaders(t);for(const o of n)i.has(o)&&e.deleteShader(o);e.deleteProgram(t)}const BW=(e=0)=>new Promise(t=>setTimeout(t,e));function XW(e,t,i){const n=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:l,transformFeedbackMode:I}=FC(i);for(let m=0;m<t.length;++m){let y=t[m];if(typeof y=="string"){const H=xb(y),L=H?H.text:y;let K=e[GW[m]];H&&H.type&&(K=VW(e,H.type)||K),y=e.createShader(K),e.shaderSource(y,o2(L).shaderSource),e.compileShader(y),e.attachShader(n,y)}}Object.entries(o).forEach(([m,y])=>e.bindAttribLocation(n,y,m));{let m=l;m&&(m.attribs&&(m=m.attribs),Array.isArray(m)||(m=Object.keys(m)),e.transformFeedbackVaryings(n,m,I||WV))}return e.linkProgram(n),n}function RW(e,t,i,n,o){const l=FC(i,n,o),I=new Set(t),m=XW(e,t,l);function y(H,L){const K=SW(H,L,l.errorCallback);return K&&WW(H,L,I),K}if(l.callback){vW(e,m).then(()=>{const H=y(e,m);l.callback(H,H?void 0:m)});return}return y(e,m)?void 0:m}async function vW(e,t){const i=e.getExtension("KHR_parallel_shader_compile"),n=i?(l,I)=>l.getProgramParameter(I,i.COMPLETION_STATUS_KHR):()=>!0;let o=0;do await BW(o),o=1e3/60;while(!n(e,t))}function SW(e,t,i){if(i=i||XC,!e.getProgramParameter(t,fV)){const o=e.getProgramInfoLog(t);i(`Error in program linking: ${o}`);const I=e.getAttachedShaders(t).map(m=>fW(e,e.getShaderParameter(m,e.SHADER_TYPE),m,i));return`${o}
${I.filter(m=>m).join(`
`)}`}}function wW(e,t,i,n,o){return RW(e,t,i,n,o)}function s2(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const FW=/(\.|\[|]|\w+)/g,HW=e=>e>="0"&&e<="9";function xW(e,t,i,n){const o=e.split(FW).filter(m=>m!=="");let l=0,I="";for(;;){const m=o[l++];I+=m;const y=HW(m[0]),H=y?parseInt(m):m;if(y&&(I+=o[l++]),l===o.length){i[H]=t;break}else{const K=o[l++],nt=K==="[",dt=i[H]||(nt?[]:{});i[H]=dt,i=dt,n[I]=n[I]||function(P){return function(rt){r2(P,rt)}}(dt),I+=K}}}function YW(e,t){let i=0;function n(m,y,H){const L=y.name.endsWith("[0]"),K=y.type,nt=Be[K];if(!nt)throw new Error(`unknown type: 0x${K.toString(16)}`);let dt;if(nt.bindPoint){const P=i;i+=y.size,L?dt=nt.arraySetter(e,K,P,H,y.size):dt=nt.setter(e,K,P,H,y.size)}else nt.arraySetter&&L?dt=nt.arraySetter(e,H):dt=nt.setter(e,H);return dt.location=H,dt}const o={},l={},I=e.getProgramParameter(t,Yb);for(let m=0;m<I;++m){const y=e.getActiveUniform(t,m);if(s2(y))continue;let H=y.name;H.endsWith("[0]")&&(H=H.substr(0,H.length-3));const L=e.getUniformLocation(t,y.name);if(L){const K=n(t,y,L);o[H]=K,xW(H,K,l,o)}}return o}function NW(e,t){const i={},n=e.getProgramParameter(t,XV);for(let o=0;o<n;++o){const l=e.getTransformFeedbackVarying(t,o);i[l.name]={index:o,type:l.type,size:l.size}}return i}function MW(e,t){const i=e.getProgramParameter(t,Yb),n=[],o=[];for(let m=0;m<i;++m){o.push(m),n.push({});const y=e.getActiveUniform(t,m);n[m].name=y.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(m){const y=m[0],H=m[1];e.getActiveUniforms(t,o,e[y]).forEach(function(L,K){n[K][H]=L})});const l={},I=e.getProgramParameter(t,RV);for(let m=0;m<I;++m){const y=e.getActiveUniformBlockName(t,m),H={index:e.getUniformBlockIndex(t,y),usedByVertexShader:e.getActiveUniformBlockParameter(t,m,vV),usedByFragmentShader:e.getActiveUniformBlockParameter(t,m,SV),size:e.getActiveUniformBlockParameter(t,m,wV),uniformIndices:e.getActiveUniformBlockParameter(t,m,FV)};H.used=H.usedByVertexShader||H.usedByFragmentShader,l[y]=H}return{blockSpecs:l,uniformData:n}}function r2(e,t){for(const i in t){const n=e[i];typeof n=="function"?n(t[i]):r2(e[i],t[i])}}function l2(e,...t){const i=e.uniformSetters||e,n=t.length;for(let o=0;o<n;++o){const l=t[o];if(Array.isArray(l)){const I=l.length;for(let m=0;m<I;++m)l2(i,l[m])}else for(const I in l){const m=i[I];m&&m(l[I])}}}function LW(e,t){const i={},n=e.getProgramParameter(t,BV);for(let o=0;o<n;++o){const l=e.getActiveAttrib(t,o);if(s2(l))continue;const I=e.getAttribLocation(t,l.name),m=Wn[l.type],y=m.setter(e,I,m);y.location=I,i[l.name]=y}return i}function JW(e,t){for(const i in t){const n=e[i];n&&n(t[i])}}function TW(e,t,i){i.vertexArrayObject?e.bindVertexArray(i.vertexArrayObject):(JW(t.attribSetters||t,i.attribs),i.indices&&e.bindBuffer(ZV,i.indices))}function $0(e,t){const i=YW(e,t),n=LW(e,t),o={program:t,uniformSetters:i,attribSetters:n};return fc(e)&&(o.uniformBlockSpec=MW(e,t),o.transformFeedbackInfo=NW(e,t)),o}const kW=/\s|{|}|;/;function zW(e,t,i,n,o){const l=FC(i,n,o),I=[];if(t=t.map(function(H){if(!kW.test(H)){const L=xb(H);if(L)H=L.text;else{const K=`no element with id: ${H}`;l.errorCallback(K),I.push(K)}}return H}),I.length)return yW(l,"");const m=l.callback;m&&(l.callback=(H,L)=>{m(H,H?void 0:$0(e,L))});const y=wW(e,t,l);return y?$0(e,y):null}const KW=4,tm=5123;function UW(e,t,i,n,o,l){i=i===void 0?KW:i;const I=t.indices,m=t.elementType,y=n===void 0?t.numElements:n;o=o===void 0?0:o,m||I?l!==void 0?e.drawElementsInstanced(i,y,m===void 0?tm:t.elementType,o,l):e.drawElements(i,y,m===void 0?tm:t.elementType,o):l!==void 0?e.drawArraysInstanced(i,o,y,l):e.drawArrays(i,o,y)}const c2=36160,qc=36161,EW=3553,QW=5121,DW=6402,OW=6408,jW=33190,_W=36012,PW=35056,qW=36013,$W=32854,tB=32855,eB=36194,g2=33189,d2=6401,a2=36168,HC=34041,pI=36064,Xd=36096,I2=36128,xC=33306,AI=33071,ZI=9729,iB=[{format:OW,type:QW,min:ZI,wrap:AI},{format:HC}],Fo={};Fo[HC]=xC;Fo[d2]=I2;Fo[a2]=I2;Fo[DW]=Xd;Fo[g2]=Xd;Fo[jW]=Xd;Fo[_W]=Xd;Fo[PW]=xC;Fo[qW]=xC;function nB(e,t){return Fo[e]||Fo[t]}const Os={};Os[$W]=!0;Os[tB]=!0;Os[eB]=!0;Os[HC]=!0;Os[g2]=!0;Os[d2]=!0;Os[a2]=!0;function oB(e){return Os[e]}const sB=32;function rB(e){return e>=pI&&e<pI+sB}function Dg(e,t,i,n){const o=c2,l=e.createFramebuffer();e.bindFramebuffer(o,l),i=i||e.drawingBufferWidth,n=n||e.drawingBufferHeight,t=t||iB;const I=[],m={framebuffer:l,attachments:[],width:i,height:n};return t.forEach(function(y,H){let L=y.attachment;const K=y.samples,nt=y.format;let dt=y.attachmentPoint||nB(nt,y.internalFormat);if(dt||(dt=pI+H),rB(dt)&&I.push(dt),!L)if(K!==void 0||oB(nt))L=e.createRenderbuffer(),e.bindRenderbuffer(qc,L),K>1?e.renderbufferStorageMultisample(qc,K,nt,i,n):e.renderbufferStorage(qc,nt,i,n);else{const P=Object.assign({},y);P.width=i,P.height=n,P.auto===void 0&&(P.auto=!1,P.min=P.min||P.minMag||ZI,P.mag=P.mag||P.minMag||ZI,P.wrapS=P.wrapS||P.wrap||AI,P.wrapT=P.wrapT||P.wrap||AI),L=Hb(e,P)}if(mf(e,L))e.framebufferRenderbuffer(o,dt,qc,L);else if(yC(e,L))y.layer!==void 0?e.framebufferTextureLayer(o,dt,L,y.level||0,y.layer):e.framebufferTexture2D(o,dt,y.target||EW,L,y.level||0);else throw new Error("unknown attachment type");m.attachments.push(L)}),e.drawBuffers&&e.drawBuffers(I),m}function lB(e,t,i){i=i||c2,t?(e.bindFramebuffer(i,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(i,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}function Ji(e,t){return()=>t instanceof WebGLTexture?t:Hb(e,{src:t,wrap:e.CLAMP_TO_EDGE})}const Pr=2;class Rr{constructor(t){this.id="_";const{context:i,width:n,height:o}=t;this.context=i,this.options=t;const l=this.buildDefines();this.programInfo=zW(this.context,[l+this.getVertexShader(),l+this.getFragmentShader()]),this.bufferInfo=Jf(this.context,this.getBuffers()),this.fbi=Dg(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],n,o),this.output=this.fbi.attachments[0]}resizeOutput(t,i){this.fbi=Dg(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],t,i),this.options.width=t,this.options.height=i,this.output=this.fbi.attachments[0]}getDefines(){return{}}getBuffers(){return{position:{numComponents:2,data:[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1]},texture_coord:{numComponents:2,data:[0,0,0,1,1,0,1,1,0,1,1,0]}}}buildDefines(){let t="";const i=this.getDefines();for(let n in i)t+=`#define ${n} ${i[n].toFixed(1)}
`;return t}run(t){var o,l,I,m,y,H;(o=this.profiler)==null||o.pushContext(`[${this.id}] PROG : ${this.constructor.name}`),(l=this.profiler)==null||l.pushContext(`[${this.id}] UNIFORMS`);for(const L in t)typeof t[L]=="function"&&((I=this.profiler)==null||I.pushContext(`[${this.id}] UNI : ${L}`),t[L]=t[L](),(m=this.profiler)==null||m.popContext(`[${this.id}] UNI : ${L}`));(y=this.profiler)==null||y.popContext(`[${this.id}] UNIFORMS`);const i=Date.now();let n=0;this.lastRun&&(n=(i-this.lastRun)/1e3),this.lastRun=i,this.context.viewport(0,0,this.context.canvas.width,this.context.canvas.height),this.context.useProgram(this.programInfo.program),TW(this.context,this.programInfo,this.bufferInfo),l2(this.programInfo,{delta:n,canvas:[this.context.canvas.width,this.context.canvas.height],...t}),lB(this.context,this.options.disableFramebuffer?null:this.fbi),UW(this.context,this.bufferInfo),(H=this.profiler)==null||H.popContext(`[${this.id}] PROG : ${this.constructor.name}`)}setProfiler(t){this.profiler=t}}const cB=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D background;
uniform sampler2D foreground;
uniform sampler2D threshold;

void main() {
  vec4 backgroundColor = texture2D(background, _texture_coord);
  vec4 foregroundColor = texture2D(foreground, _texture_coord);
  vec4 tresholdColor = texture2D(threshold, _texture_coord);
  gl_FragColor = foregroundColor * tresholdColor.a +
                 backgroundColor * (1. - tresholdColor.a);
}
`,gB=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  _texture_coord.y = 1. - texture_coord.y;
}
`;class YC extends Rr{getFragmentShader(){return cB}getVertexShader(){return gB}}class NC{constructor(){this.steps=[]}addStep(t){this.steps.push(t)}async run(){for(const t of this.steps)t.program.run(t.getUniforms())}resizeOutput(t,i){var n,o;(n=this.profiler)==null||n.pushContext(`PIP [${this.constructor.name}]`);for(const l of this.steps)l.preventResize||l.program.resizeOutput(t,i);(o=this.profiler)==null||o.popContext(`PIP [${this.constructor.name}]`)}setProfiler(t){this.profiler=t;for(const i of this.steps)i.program.setProfiler(t)}setId(t){for(const i of this.steps)i.program.id=t}}class MC extends NC{constructor(){super(...arguments),this.preciseMaskEnabled=!1}}class C2 extends MC{constructor(t){super(),this.context=t,this.preciseMaskEnabled=!0;const i={context:t,height:t.canvas.height,width:t.canvas.width},n=new YC({...i,disableFramebuffer:!0});this.addStep({program:n,getUniforms:()=>({background:Ji(t,this.inputBackgroundImage),foreground:Ji(t,this.inputImage),threshold:Ji(t,this.inputMask)})})}setData(t,i){this.inputImage=t,this.inputMask=i}}const dB=`precision mediump float;

varying vec2 _texture_coord;
uniform sampler2D texture;

void main() { gl_FragColor = texture2D(texture, _texture_coord); }
`,aB=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;
uniform bool invert_y;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  if (invert_y) {
    _texture_coord.y = 1. - texture_coord.y;
  }
}
`;class IB extends Rr{getFragmentShader(){return dB}getVertexShader(){return aB}}class CB extends NC{constructor(t,i,n){super(),this.context=t;const o={context:t,height:n,width:i};this.addStep({program:new IB({...o,disableFramebuffer:!0}),getUniforms:()=>({texture:Ji(t,this.inputImage),invert_y:!0})})}setData(t){this.inputImage=t}}async function u2(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}const uB=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,mB=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;var LC=(e=>(e[e.LINEAR=0]="LINEAR",e[e.GAUSSIAN=1]="GAUSSIAN",e))(LC||{});class m2 extends Rr{getDefines(){var t;return{RADIUS:(t=this.options.radius)!=null?t:1}}getFragmentShader(){return uB+this.createLoopFunction()}getVertexShader(){return mB}createLoopFunction(){var i;let t=(i=this.options.radius)!=null?i:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${t}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;

            for(int y=-${t}; y<${t+1}; ++y) {
                for(int x=-${t}; x<${t+1}; ++x) {
                    float factor = 1.;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}getFactor(t,i){switch(this.options.type){case 1:return this.getLinearFactor(t,i);case 0:default:return this.getLinearFactor(t,i)}}getLinearFactor(t,i){return 1}getGaussianFactor(t,i){var y;const n=Math.PI*2,o=Math.max((y=this.options.radius)!=null?y:1,1),l=1/(n*o**2),I=-(t**2+i**2),m=l*I;return l*Math.E**m}}class JC extends Rr{constructor(t){super(t),this.fbi2=Dg(t.context,[{format:t.context.RGBA,type:t.context.UNSIGNED_BYTE,min:t.context.LINEAR,mag:t.context.LINEAR,wrap:t.context.CLAMP_TO_EDGE}],t.width,t.height)}run(t){const i=this.fbi;this.fbi=this.fbi2,this.fbi2=i,this.output=this.fbi.attachments[0],super.run({...t,previous_rendering:this.fbi2.attachments[0]})}resizeOutput(t,i){super.resizeOutput(t,i),this.fbi2=Dg(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],t,i)}}const hB=`precision mediump float;

varying vec2 _texture_coord;

// uniform float treshold;
uniform sampler2D image_now;
uniform sampler2D image_before;
uniform sampler2D mask_now;
uniform sampler2D mask_before;
uniform sampler2D previous_rendering;
uniform vec2 canvas;

uniform float delta;

float current_factor = 0.69;
float previous_factor = 0.74;
float threshold_activation = 0.54;

float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float getThreshold() {
  vec4 color = vec4(0.);
  for (float y = -6.; y < 7.; y += 1.) {
    for (float x = -6.; x < 7.; x += 1.) {
      vec4 image_now_color =
          texture2D(image_now, _texture_coord + vec2(x, y) / canvas);
      vec4 image_before_color =
          texture2D(image_before, _texture_coord + vec2(x, y) / canvas);
      color += abs(image_before_color - image_now_color);
    }
  }
  return (color.x + color.y + color.z) / (3. * 9.);
}

void main() {
  float treshold_input = .4;
  float treshold_previous_rendering = .98;

  vec4 mask_now_color = texture2D(mask_now, _texture_coord);
  vec4 mask_before_color = texture2D(mask_before, _texture_coord);
  vec4 previous_rendering_color = texture2D(previous_rendering, _texture_coord);

  vec3 mask_diff = abs(mask_before_color.xyz - mask_now_color.xyz);
  float flickering = mask_diff.x;
  float threshold = getThreshold();
  if (threshold < threshold_activation) {
    gl_FragColor = vec4(flickering, 0., 0., 1.) * current_factor +
                   previous_rendering_color * previous_factor;
    gl_FragColor *= (1. - threshold);
  }
}
`,bB=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class pB extends JC{getFragmentShader(){return hB}getVertexShader(){return bB}}const AB=`#version 300 es
// https://github.com/Volcomix/virtual-background/blob/main/src/pipelines/webgl2/jointBilateralFilterStage.ts

precision highp float;
uniform sampler2D input_frame;
uniform sampler2D segmentation_mask;
uniform sampler2D threshold;
uniform vec2 texel_size;
uniform float step;
uniform float radius;
uniform float offset;
uniform float sigma_texel;
uniform float sigma_color;

in vec2 _texture_coord;
out vec4 outColor;

float gaussian(float x, float sigma) {
  float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);
  return exp((x * x) * coeff);
}

void main() {
  vec2 centerCoord = _texture_coord;
  vec3 centerColor = texture(input_frame, centerCoord).rgb;
  float newVal = 0.0;
  float spaceWeight = 0.0;
  float colorWeight = 0.0;
  float totalWeight = 0.0;
  // Subsample kernel space.
  for (float i = -radius + offset; i <= radius; i += step) {
    for (float j = -radius + offset; j <= radius; j += step) {
      vec2 shift = vec2(j, i) * texel_size;
      vec2 coord = vec2(centerCoord + shift);
      vec3 frameColor = texture(input_frame, coord).rgb;
      float threshold = texture(threshold, coord).a;
      float outVal = texture(segmentation_mask, coord).a;

      spaceWeight = gaussian(distance(centerCoord, coord), sigma_texel);
      colorWeight = gaussian(distance(centerColor, frameColor), sigma_color);
      totalWeight += spaceWeight * colorWeight;
      newVal += spaceWeight * colorWeight * outVal * threshold;
    }
  }
  newVal /= totalWeight;
  outColor = vec4(vec3(0.), newVal);
}`,ZB=`#version 300 es
in vec2 position;
in vec2 texture_coord;
out vec2 _texture_coord;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
  _texture_coord = texture_coord;
}`;class yB extends Rr{getFragmentShader(){return AB}getVertexShader(){return ZB}}const fB=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  int count = 0;
  for (float y = -1.; y < 2.; y += 1.) {
    for (float x = -1.; x < 2.; x += 1.) {
      vec2 coord = _texture_coord + vec2(y, x) / canvas;
      vec4 color = texture2D(texture, coord);
      if (color.r > .1) {
        count++;
      }
    }
  }
  if (count > 5) {
    gl_FragColor = texture2D(texture, _texture_coord);
  }
}
`,GB=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class VB extends Rr{getFragmentShader(){return fB}getVertexShader(){return GB}}const WB=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  vec4 color = texture2D(texture, _texture_coord);
  for (float y = -2.; y < 3.; y += 1.) {
    for (float x = -2.; x < 3.; x += 1.) {
      vec2 coord = _texture_coord;
      coord += vec2(y, x) / canvas;
      color += texture2D(texture, coord) * (1. / 4.);
    }
  }

  gl_FragColor = color;
}
`,BB=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class XB extends JC{getFragmentShader(){return WB}getVertexShader(){return BB}}const RB=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D threshold;
uniform sampler2D inputs;

void main() {
  vec4 inputs_color = texture2D(inputs, _texture_coord);
  vec4 threshold_color = texture2D(threshold, _texture_coord);
  if (threshold_color.r < .1 && inputs_color.r > .5) {
    gl_FragColor = inputs_color;
  }
}
`,vB=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class SB extends JC{getFragmentShader(){return RB}getVertexShader(){return vB}}class wB extends NC{constructor(t,i,n){super(),this.context=t,this.options={currentThresholdMinimum:0,currentThresholdMaximum:1,previousThresholdMinimum:0,previousThresholdMaximum:1,thresholdMinimum:0,thresholdMaximum:1,thresholdFactor:1};const o={context:t,height:n,width:i},l=new pB(o),I=new m2({...o,radius:1,type:LC.GAUSSIAN}),m=new SB(o),y=new XB(o),H=new VB(o);this.jointBilateral=new yB(o),this.addStep({program:l,getUniforms:()=>({image_now:Ji(t,this.inputImage),image_before:Ji(t,this.previousInputImage),mask_now:Ji(t,this.inputMask),mask_before:Ji(t,this.previousInputMask),current_threshold_minimum:this.options.currentThresholdMinimum,current_threshold_maximum:this.options.currentThresholdMaximum,previous_threshold_minimum:this.options.previousThresholdMinimum,previous_threshold_maximum:this.options.previousThresholdMaximum,threshold_minimum:this.options.thresholdMinimum,threshold_maximum:this.options.thresholdMaximum,threshold_factor:this.options.thresholdFactor})}),this.addStep({program:m,getUniforms:()=>({inputs:Ji(t,this.inputMask),threshold:Ji(t,l.output)})}),this.addStep({program:H,getUniforms:()=>({texture:Ji(t,m.output)})}),this.addStep({program:y,getUniforms:()=>({texture:Ji(t,H.output)})}),this.addStep({program:I,getUniforms:()=>({texture:Ji(t,y.output)})}),this.addStep({program:this.jointBilateral,getUniforms:()=>{var _,qe,ni,we,qt,Bn,ge,ft;const K=(qe=(_=this.inputImage)==null?void 0:_.width)!=null?qe:1,nt=(we=(ni=this.inputImage)==null?void 0:ni.height)!=null?we:1,dt=(Bn=(qt=this.inputMask)==null?void 0:qt.width)!=null?Bn:1,P=(ft=(ge=this.inputMask)==null?void 0:ge.height)!=null?ft:1,rt=Math.max(K/dt,nt/P),Xt=Math.max(1,Math.sqrt(rt)*.66),Wt=1/K,xt=1/nt;return{input_frame:Ji(t,this.inputImage),segmentation_mask:Ji(t,this.inputMask),threshold:Ji(t,I.output),texel_size:[Wt,xt],step:Xt,radius:rt,offset:Xt>1?Xt*.5:0,sigma_texel:Math.max(Wt,xt)*rt,sigma_color:.1}}}),this.output=this.jointBilateral.output}setData(t,i){this.previousInputImage=this.inputImage?this.inputImage:t,this.previousInputMask=this.inputMask?this.inputMask:i,this.inputImage=t,this.inputMask=i}setOptions(t){this.options=t}resizeOutput(t,i){super.resizeOutput(t,i),this.output=this.jointBilateral.output}}var h2=(e=>(e.PUSH="PUSH",e.POP="POP",e))(h2||{});class FB{constructor(t){this.queries=[],this.context=t,this.extension=t.getExtension("EXT_disjoint_timer_query_webgl2")}start(){}stop(){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT)}pushContext(t){this.createQuery("PUSH",t)}popContext(t){this.createQuery("POP",t)}createQuery(t,i){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT),this.activeQuery=this.context.createQuery(),this.context.beginQuery(this.extension.TIME_ELAPSED_EXT,this.activeQuery),this.queries.push({name:i,action:t,query:this.activeQuery})}async getResolvedQueries(){const t=(await Promise.all([...this.queries].map(i=>this.resolveQuery(i)))).filter(i=>i);for(let i=1;i<t.length;++i)t[i].timestamp+=t[i-1].duration+t[i-1].timestamp;return t}async resolveQuery(t){if(!await this.awaitQueryAvailable(t)){console.log("Unawaitable query",t);return}if(this.context.getParameter(this.extension.GPU_DISJOINT_EXT)){console.log("Disjointed query",t);return}return{...t,duration:this.context.getQueryParameter(t.query,this.context.QUERY_RESULT),timestamp:0}}async awaitQueryAvailable(t){for(let i=0;i<10;++i){if(this.context.getQueryParameter(t.query,this.context.QUERY_RESULT_AVAILABLE))return t;await u2(200)}}}class Rd{constructor(){this.previousImageWidth=0,this.previousImageHeight=0,this.previousMaskWidth=Pr,this.previousMaskHeight=Pr,this.postProcessingEnabled=!0;const t=new OffscreenCanvas(0,0),i=t.getContext("webgl2");if(!i)throw"Fail to retrieve webgl2 context";this.canvas=t,this.context=i,this.improveMask=new wB(this.context,Pr,Pr)}setFlickeringOptions(t){this.improveMask.setOptions(t)}enablePostProcessing(){this.postProcessingEnabled=!0}disablePostProcessing(){this.postProcessingEnabled=!1}async profileWebgl(t){const i=new FB(this.context);return this.profiler=i,i.start(),await u2(t),this.profiler=void 0,i.stop(),i.getResolvedQueries()}async render(t,i){var I,m;if(!this.pipeline)throw"missing pipeline";(this.previousImageHeight!==t.height||this.previousImageWidth!==t.width)&&this.resizeOutput(t.width,t.height),(this.previousMaskHeight!==i.height||this.previousMaskWidth!==i.width)&&(this.improveMask.resizeOutput(i.width,i.height),this.previousMaskWidth=i.width,this.previousMaskHeight=i.height);const n="renderer";(I=this.profiler)==null||I.pushContext(n),this.improveMask.setProfiler(this.profiler),this.pipeline.setProfiler(this.profiler);const o=await createImageBitmap(i);let l=o;return this.postProcessingEnabled&&(this.improveMask.setData(t,o),this.improveMask.run(),l=this.improveMask.output),this.pipeline.setData(t,l),await this.pipeline.run(),(m=this.profiler)==null||m.popContext(n),this.canvas}resizeOutput(t,i){var n;this.canvas.width=t,this.canvas.height=i,(n=this.pipeline)==null||n.resizeOutput(t,i),this.previousImageWidth=t,this.previousImageHeight=i}}class b2 extends Rd{constructor(){super(),this.pipeline=new C2(this.context);const t=new OffscreenCanvas(0,0),i=t.getContext("webgl2");if(!i)throw"Fail to retrieve webgl context";this.backgroundImageResizerCanvas=t,this.backgroundImageResizerContext=i,this.backgroundImageResizer=new CB(this.backgroundImageResizerContext,0,0)}setBackgroundImage(t){this.backgroundImage=t,this.updateBackgroundImage()}updateBackgroundImage(){const{width:t,height:i}=this.canvas;this.backgroundImageResizer.resizeOutput(t,i),this.backgroundImageResizer.setData(this.backgroundImage),this.backgroundImageResizer.run(),this.pipeline.inputBackgroundImage=this.backgroundImageResizerCanvas}resizeOutput(t,i){super.resizeOutput(t,i),this.backgroundImageResizerCanvas.width=t,this.backgroundImageResizerCanvas.height=i,this.backgroundImageResizer.resizeOutput(t,i),this.updateBackgroundImage()}}class HB extends b2{setBackgroundVideo(t){this.frameReader=t}async render(t,i){return await this.readNextVideoFrame(),super.render(t,i)}async readNextVideoFrame(){var i;const t=await((i=this.frameReader)==null?void 0:i.read());if(t!=null&&t.value){const n=await createImageBitmap(t.value);this.setBackgroundImage(n),t.value.close()}}}class em{constructor(t){this.config=t}blurBackground(t){return new q3(t)}blurSilhouette(t){return new $3(t)}imageBackground(){return this.config.vonageSelfieSegmentationEngine===!1?new of:new tf}videoBackground(){return new HB}}const xB=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;
uniform sampler2D mask;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,YB=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class NB extends Rr{getDefines(){var t;return{RADIUS:(t=this.options.radius)!=null?t:1}}getFragmentShader(){return xB+this.createLoopFunction()}getVertexShader(){return YB}createLoopFunction(){var i;let t=(i=this.options.radius)!=null?i:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${t}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;
            float maxLength = length(normalizedRadius);

            for(int y=-${t}; y<${t+1}; ++y) {
                for(int x=-${t}; x<${t+1}; ++x) {
                    float factor = (1.- texture2D(mask, _texture_coord + diff).a) * (maxLength - length(diff)) / maxLength;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}}const MB=10,LB=2,JB=8;class TB extends MC{constructor(t,i){super(),this.context=t,this.radius=i;const n={context:t,height:t.canvas.height,width:t.canvas.width};this.blur=new NB({...n,radius:i,...this.getBlurTextureSize(t.canvas.width,t.canvas.height)});const o=new YC({...n,disableFramebuffer:!0});this.addStep({program:this.blur,preventResize:!0,getUniforms:()=>({texture:Ji(t,this.inputImage),mask:Ji(t,this.inputMask)})}),this.addStep({program:o,getUniforms:()=>({background:Ji(t,this.blur.output),foreground:Ji(t,this.inputImage),threshold:Ji(t,this.inputMask)})})}getBlurTextureSize(t,i){const n=this.radius>MB?JB:LB;return{width:Math.max(Pr,t/n),height:Math.max(Pr,i/n)}}setData(t,i){this.inputImage=t,this.inputMask=i}resizeOutput(t,i){super.resizeOutput(t,i);const n=this.getBlurTextureSize(t,i);this.blur.resizeOutput(n.width,n.height)}}class kB extends Rd{constructor(t){super(),this.pipeline=new TB(this.context,t),this.disablePostProcessing()}}class zB extends MC{constructor(t,i){super(),this.context=t;const n={context:t,height:t.canvas.height,width:t.canvas.width},o=new m2({...n,radius:i,type:LC.GAUSSIAN}),l=new YC({...n,disableFramebuffer:!0});this.addStep({program:o,getUniforms:()=>({texture:Ji(t,this.inputImage)})}),this.addStep({program:l,getUniforms:()=>({background:Ji(t,this.inputImage),foreground:Ji(t,o.output),threshold:Ji(t,this.inputMask)})})}setData(t,i){this.inputImage=t,this.inputMask=i}}class KB extends Rd{constructor(t){super(),this.pipeline=new zB(this.context,t),this.disablePostProcessing()}}class UB extends C2{constructor(){super(...arguments),this.preciseMaskEnabled=!0}set reader(t){this.frameReader=t}async run(){this.frameReader&&(await this.readNextVideoFrame(),await super.run())}async readNextVideoFrame(){var i;const t=await((i=this.frameReader)==null?void 0:i.read());t!=null&&t.value&&(this.inputBackgroundImage=await createImageBitmap(t.value),t.value.close())}}class EB extends Rd{constructor(){super(),this.pipeline=new UB(this.context)}setBackgroundVideo(t){this.pipeline.reader=t}}class im{blurBackground(t){return new kB(t)}blurSilhouette(t){return new KB(t)}imageBackground(){return new b2}videoBackground(){return new EB}}class QB{constructor(t,i){switch(t){case Ys.CANVAS:this.factory=new em(i);break;case Ys.WEBGL:this.factory=new im;break;default:const n=lb();this.factory=n.supported?new im:new em(i)}}blurBackground(t){return this.getFactory().blurBackground(t)}blurSilhouette(t){return this.getFactory().blurSilhouette(t)}imageBackground(){return this.getFactory().imageBackground()}videoBackground(){return this.getFactory().videoBackground()}getFactory(){if(!this.factory)throw"Factory is not initialized";return this.factory}}class DB{setBackgroundOptions(t){var n,o,l;const i=new QB((o=(n=t.renderingOptions)==null?void 0:n.type)!=null?o:Ys.WEBGL,t);switch(t.transformerType){case"BackgroundBlur":this.renderer=i.blurBackground(this.getBlurSize(t.radius));break;case"SilhouetteBlur":this.renderer=i.blurSilhouette(this.getBlurSize(t.radius));break;case"VideoBackground":const I=i.videoBackground();this.backgroundVideo&&I.setBackgroundVideo(this.backgroundVideo),this.renderer=I;break;case"VirtualBackground":const m=i.imageBackground();this.backgroundImage&&m.setBackgroundImage(this.backgroundImage),this.renderer=m;break;default:throw`Unknown rendering type [${t.transformerType}]`}((l=t.renderingOptions)==null?void 0:l.type)===Ys.WEBGL&&(t.renderingOptions.selfieSegmentationType===oc.PRECISE?this.renderer.enablePostProcessing():t.renderingOptions.selfieSegmentationType===oc.FAST&&this.renderer.disablePostProcessing())}setFlickeringOptions(t){var i;(i=this.renderer)==null||i.setFlickeringOptions(t)}setVideoBGReadable(t){this.backgroundVideo=t.getReader();const i=this.renderer;i!=null&&i.setBackgroundVideo&&i.setBackgroundVideo(this.backgroundVideo)}async setVirtualBGImage(t){const i=this.renderer;i!=null&&i.setBackgroundImage&&i.setBackgroundImage(t),this.backgroundImage=t}async process(t,i){if(this.renderer)return this.renderer.render(t,i)}async resizeForeground(t,i){}getBlurSize(t=Fs.Low){switch(t){case Fs.Low:return 5;case Fs.High:return 12}return t}async profile(t){var i,n;return(n=(i=this.renderer)==null?void 0:i.profileWebgl(t))!=null?n:[]}}var OB=function(){var e=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(t){t=t||{};var i=typeof t!="undefined"?t:{},n,o;i.ready=new Promise(function(lt,It){n=lt,o=It});var l={},I;for(I in i)i.hasOwnProperty(I)&&(l[I]=i[I]);var m="./this.program",y=function(lt,It){throw It},H=!0,L="";function K(lt){return i.locateFile?i.locateFile(lt,L):L+lt}var nt;typeof document!="undefined"&&document.currentScript&&(L=document.currentScript.src),e&&(L=e),L.indexOf("blob:")!==0?L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):L="";var dt=i.print||console.log.bind(console),P=i.printErr||console.warn.bind(console);for(I in l)l.hasOwnProperty(I)&&(i[I]=l[I]);l=null,i.arguments&&i.arguments,i.thisProgram&&(m=i.thisProgram),i.quit&&(y=i.quit);var rt;i.wasmBinary&&(rt=i.wasmBinary);var Xt=i.noExitRuntime||!0;typeof WebAssembly!="object"&&Ae("no native wasm support detected");var Wt,xt=!1,_=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function qe(lt,It,ht){for(var ie=It+ht,pe=It;lt[pe]&&!(pe>=ie);)++pe;if(pe-It>16&&lt.subarray&&_)return _.decode(lt.subarray(It,pe));for(var he="";It<pe;){var Ht=lt[It++];if(!(Ht&128)){he+=String.fromCharCode(Ht);continue}var ye=lt[It++]&63;if((Ht&224)==192){he+=String.fromCharCode((Ht&31)<<6|ye);continue}var Ee=lt[It++]&63;if((Ht&240)==224?Ht=(Ht&15)<<12|ye<<6|Ee:Ht=(Ht&7)<<18|ye<<12|Ee<<6|lt[It++]&63,Ht<65536)he+=String.fromCharCode(Ht);else{var ai=Ht-65536;he+=String.fromCharCode(55296|ai>>10,56320|ai&1023)}}return he}function ni(lt,It){return lt?qe(ft,lt,It):""}function we(lt,It,ht){for(var ie=0;ie<lt.length;++ie)ge[It++>>0]=lt.charCodeAt(ie);ge[It>>0]=0}function qt(lt,It){return lt%It>0&&(lt+=It-lt%It),lt}var Bn,ge,ft,Ni;function Jn(lt){Bn=lt,i.HEAP8=ge=new Int8Array(lt),i.HEAP16=new Int16Array(lt),i.HEAP32=Ni=new Int32Array(lt),i.HEAPU8=ft=new Uint8Array(lt),i.HEAPU16=new Uint16Array(lt),i.HEAPU32=new Uint32Array(lt),i.HEAPF32=new Float32Array(lt),i.HEAPF64=new Float64Array(lt)}i.INITIAL_MEMORY;var He,Tt=[],Je=[],Zi=[],Oi=0;function An(){return Xt||Oi>0}function sn(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Mi(i.preRun.shift());ne(Tt)}function Xn(){ne(Je)}function Si(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Zn(i.postRun.shift());ne(Zi)}function Mi(lt){Tt.unshift(lt)}function Fn(lt){Je.unshift(lt)}function Zn(lt){Zi.unshift(lt)}var oi=0,ei=null;function rn(lt){oi++,i.monitorRunDependencies&&i.monitorRunDependencies(oi)}function ji(lt){if(oi--,i.monitorRunDependencies&&i.monitorRunDependencies(oi),oi==0&&ei){var It=ei;ei=null,It()}}i.preloadedImages={},i.preloadedAudios={};function Ae(lt){i.onAbort&&i.onAbort(lt),lt="Aborted("+lt+")",P(lt),xt=!0,lt+=". Build with -s ASSERTIONS=1 for more info.";var It=new WebAssembly.RuntimeError(lt);throw o(It),It}var Me="data:application/octet-stream;base64,";function si(lt){return lt.startsWith(Me)}var de;de="tflite-simd.wasm",si(de)||(de=K(de));function Fe(lt){try{if(lt==de&&rt)return new Uint8Array(rt);if(!nt)throw"both async and sync fetching of the wasm failed"}catch(It){Ae(It)}}function yi(){return!rt&&H&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(lt){if(!lt.ok)throw"failed to load wasm binary file at '"+de+"'";return lt.arrayBuffer()}).catch(function(){return Fe(de)}):Promise.resolve().then(function(){return Fe(de)})}function $e(){var lt={a:Ze};function It(Ht,ye){var Ee=Ht.exports;i.asm=Ee,Wt=i.asm.q,Jn(Wt.buffer),He=i.asm.E,Fn(i.asm.r),ji()}rn();function ht(Ht){It(Ht.instance)}function ie(Ht){return yi().then(function(ye){return WebAssembly.instantiate(ye,lt)}).then(function(ye){return ye}).then(Ht,function(ye){P("failed to asynchronously prepare wasm: "+ye),Ae(ye)})}function pe(){return!rt&&typeof WebAssembly.instantiateStreaming=="function"&&!si(de)&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(Ht){var ye=WebAssembly.instantiateStreaming(Ht,lt);return ye.then(ht,function(Ee){return P("wasm streaming compile failed: "+Ee),P("falling back to ArrayBuffer instantiation"),ie(ht)})}):ie(ht)}if(i.instantiateWasm)try{var he=i.instantiateWasm(lt,It);return he}catch(Ht){return P("Module.instantiateWasm callback failed with error: "+Ht),!1}return pe().catch(o),{}}function ne(lt){for(;lt.length>0;){var It=lt.shift();if(typeof It=="function"){It(i);continue}var ht=It.func;typeof ht=="number"?It.arg===void 0?He.get(ht)():He.get(ht)(It.arg):ht(It.arg===void 0?null:It.arg)}}function Xe(lt,It,ht,ie){Ae("Assertion failed: "+ni(lt)+", at: "+[It?ni(It):"unknown filename",ht,ie?ni(ie):"unknown function"])}function Ue(lt,It){Ae("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function Dt(lt,It){Ae("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function xe(){Ae("")}var $t;$t=function(){return performance.now()};var Ge=!0;function Te(lt){return Ni[Jt()>>2]=lt,lt}function di(lt,It){var ht;if(lt===0)ht=Date.now();else if((lt===1||lt===4)&&Ge)ht=$t();else return Te(28),-1;return Ni[It>>2]=ht/1e3|0,Ni[It+4>>2]=ht%1e3*1e3*1e3|0,0}function Se(){return 2147483648}function te(lt,It,ht){ft.copyWithin(lt,It,It+ht)}function ii(lt){try{return Wt.grow(lt-Bn.byteLength+65535>>>16),Jn(Wt.buffer),1}catch{}}function ri(lt){var It=ft.length;lt=lt>>>0;var ht=2147483648;if(lt>ht)return!1;for(var ie=1;ie<=4;ie*=2){var pe=It*(1+.2/ie);pe=Math.min(pe,lt+100663296);var he=Math.min(ht,qt(Math.max(lt,pe),65536)),Ht=ii(he);if(Ht)return!0}return!1}function Ye(lt){for(var It=$t();$t()-It<lt;);}var _i={};function fi(){return m||"./this.program"}function li(){if(!li.strings){var lt=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",It={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:lt,_:fi()};for(var ht in _i)_i[ht]===void 0?delete It[ht]:It[ht]=_i[ht];var ie=[];for(var ht in It)ie.push(ht+"="+It[ht]);li.strings=ie}return li.strings}var Gi={mappings:{},buffers:[null,[],[]],printChar:function(lt,It){var ht=Gi.buffers[lt];It===0||It===10?((lt===1?dt:P)(qe(ht,0)),ht.length=0):ht.push(It)},varargs:void 0,get:function(){Gi.varargs+=4;var lt=Ni[Gi.varargs-4>>2];return lt},getStr:function(lt){var It=ni(lt);return It},get64:function(lt,It){return lt}};function Re(lt,It){var ht=0;return li().forEach(function(ie,pe){var he=It+ht;Ni[lt+pe*4>>2]=he,we(ie,he),ht+=ie.length+1}),0}function ke(lt,It){var ht=li();Ni[lt>>2]=ht.length;var ie=0;return ht.forEach(function(pe){ie+=pe.length+1}),Ni[It>>2]=ie,0}function ve(lt){ce(lt)}function ae(lt){return 0}function ci(lt,It,ht,ie,pe){}function le(lt,It,ht,ie){for(var pe=0,he=0;he<ht;he++){for(var Ht=Ni[It+he*8>>2],ye=Ni[It+(he*8+4)>>2],Ee=0;Ee<ye;Ee++)Gi.printChar(lt,ft[Ht+Ee]);pe+=ye}return Ni[ie>>2]=pe,0}function ee(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var lt=new Uint8Array(1);return function(){return crypto.getRandomValues(lt),lt[0]}}else return function(){Ae("randomDevice")}}function wi(lt,It){wi.randomDevice||(wi.randomDevice=ee());for(var ht=0;ht<It;ht++)ge[lt+ht>>0]=wi.randomDevice();return 0}var Ze={a:Xe,e:Ue,d:Dt,b:xe,n:di,h:Se,l:te,m:ri,p:Ye,f:Re,g:ke,j:ve,i:ae,k:ci,c:le,o:wi};$e(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.r).apply(null,arguments)},i._getModelBufferMemoryOffset=function(){return(i._getModelBufferMemoryOffset=i.asm.s).apply(null,arguments)},i._getInputMemoryOffset=function(){return(i._getInputMemoryOffset=i.asm.t).apply(null,arguments)},i._getInputHeight=function(){return(i._getInputHeight=i.asm.u).apply(null,arguments)},i._getInputWidth=function(){return(i._getInputWidth=i.asm.v).apply(null,arguments)},i._getInputChannelCount=function(){return(i._getInputChannelCount=i.asm.w).apply(null,arguments)},i._getOutputMemoryOffset=function(){return(i._getOutputMemoryOffset=i.asm.x).apply(null,arguments)},i._getOutputHeight=function(){return(i._getOutputHeight=i.asm.y).apply(null,arguments)},i._getOutputWidth=function(){return(i._getOutputWidth=i.asm.z).apply(null,arguments)},i._getOutputChannelCount=function(){return(i._getOutputChannelCount=i.asm.A).apply(null,arguments)},i._loadModel=function(){return(i._loadModel=i.asm.B).apply(null,arguments)},i._runInference=function(){return(i._runInference=i.asm.C).apply(null,arguments)},i._isGPUEnabled=function(){return(i._isGPUEnabled=i.asm.D).apply(null,arguments)};var Jt=i.___errno_location=function(){return(Jt=i.___errno_location=i.asm.F).apply(null,arguments)},vt;function Ie(lt){this.name="ExitStatus",this.message="Program terminated with exit("+lt+")",this.status=lt}ei=function lt(){vt||ze(),vt||(ei=lt)};function ze(lt){if(oi>0||(sn(),oi>0))return;function It(){vt||(vt=!0,i.calledRun=!0,!xt&&(Xn(),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Si()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),It()},1)):It()}i.run=ze;function ce(lt,It){Ce(lt)}function Ce(lt){An()||(i.onExit&&i.onExit(lt),xt=!0),y(lt,new Ie(lt))}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return ze(),t.ready}}();class jB{constructor(){this.isSIMDSupported=!1,this.isThreadsSupported=!1,this.inputWidth=0,this.inputHeight=0,this.inputChannelCount=0,this.inputMemoryOffset=0,this.outputWidth=0,this.outputHeight=0,this.outputChannelCount=0,this.outputMemoryOffset=0}}const _B="https://d3opqjmqzxf057.cloudfront.net/vonage-tensorflow-wasm/tflite-simd-wasm/1.1.3/",PB="https://d3opqjmqzxf057.cloudfront.net/ml/selfie_segmentation/4.0.0/";async function qB(e=_B,t=PB){let i=new jB;var n=new Promise(function(o,l){async function I(){return OB({locateFile:function(H){return e+H}})}async function m(y){return new Promise(async(H,L)=>{const K=y;if(typeof K=="undefined")return L("TFLite backend unavailable: wasmSimd");const nt="selfie_segmentation_landscape";console.log("Loading tflite model:",nt);let dt=t+`${nt}.tflite`;console.log("TFLite modelUrl: "+dt);try{const rt=await(await fetch(dt)).arrayBuffer();console.log("Model buffer size:",rt.byteLength);const Xt=K._getModelBufferMemoryOffset();console.log("Model buffer memory offset:",Xt),console.log("Loading model buffer..."),K.HEAPU8.set(new Uint8Array(rt),Xt);const Wt=K._loadModel(rt.byteLength);if(console.log("Load model result:",Wt),Wt!==0){L("Cannot load model");return}i.inputWidth=K._getInputWidth(),i.inputHeight=K._getInputHeight(),i.inputChannelCount=K._getInputChannelCount(),i.inputMemoryOffset=K._getInputMemoryOffset(),console.log("Input memory offset:",i.inputMemoryOffset),console.log("Input height:",i.inputHeight),console.log("Input width:",i.inputWidth),console.log("Input channels:",i.inputChannelCount),i.outputMemoryOffset=K._getOutputMemoryOffset(),i.outputWidth=K._getOutputWidth(),i.outputHeight=K._getOutputHeight(),i.outputChannelCount=K._getOutputChannelCount(),console.log("Output memory offset:",i.outputMemoryOffset),console.log("Output height:",i.outputHeight),console.log("Output width:",i.outputWidth),console.log("Output channels:",i.outputChannelCount),i.selectedTFLite=K}catch(P){L(P);return}H()})}I().then(y=>{if(y===null)throw console.error("loadTFLite null"),"loadTFLite null";m(y).then(H=>{o(i)}).catch(H=>{console.error("loadTFLiteModel error"),l("loadTFLiteModel error")})}).catch(y=>{console.error("loadTFLite error:",y),l("loadTFLite error:"+y)})});return n}var Gr=typeof self!="undefined"?self:{};function Og(e,t){t:{for(var i=["CLOSURE_FLAGS"],n=Gr,o=0;o<i.length;o++)if((n=n[i[o]])==null){i=null;break t}i=n}return(e=i&&i[e])!=null?e:t}function ir(){throw Error("Invalid UTF8")}function nm(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}let $c,ba;const $B=typeof TextDecoder!="undefined";let t5;const e5=typeof TextEncoder!="undefined";function p2(e){if(e5)e=(t5||(t5=new TextEncoder)).encode(e);else{let i=0;const n=new Uint8Array(3*e.length);for(let o=0;o<e.length;o++){var t=e.charCodeAt(o);if(t<128)n[i++]=t;else{if(t<2048)n[i++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&o<e.length){const l=e.charCodeAt(++o);if(l>=56320&&l<=57343){t=1024*(t-55296)+l-56320+65536,n[i++]=t>>18|240,n[i++]=t>>12&63|128,n[i++]=t>>6&63|128,n[i++]=63&t|128;continue}o--}t=65533}n[i++]=t>>12|224,n[i++]=t>>6&63|128}n[i++]=63&t|128}}e=i===n.length?n:n.subarray(0,i)}return e}var gc,A2=Og(610401301,!1),i5=Og(645172343,Og(1,!0)),Z2=Og(660014094,!1);const om=Gr.navigator;function yI(e){return!!A2&&!!gc&&gc.brands.some(({brand:t})=>t&&t.indexOf(e)!=-1)}function fo(e){var t;return(t=Gr.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function vs(){return!!A2&&!!gc&&gc.brands.length>0}function pa(){return vs()?yI("Chromium"):(fo("Chrome")||fo("CriOS"))&&!(!vs()&&fo("Edge"))||fo("Silk")}function TC(e){return TC[" "](e),e}gc=om&&om.userAgentData||null,TC[" "]=function(){};var n5=!vs()&&(fo("Trident")||fo("MSIE"));!fo("Android")||pa(),pa(),fo("Safari")&&(pa()||!vs()&&fo("Coast")||!vs()&&fo("Opera")||!vs()&&fo("Edge")||(vs()?yI("Microsoft Edge"):fo("Edg/"))||vs()&&yI("Opera"));var y2={},Yl=null;function o5(e){var t=e.length,i=3*t/4;i%3?i=Math.floor(i):"=.".indexOf(e[t-1])!=-1&&(i="=.".indexOf(e[t-2])!=-1?i-2:i-1);var n=new Uint8Array(i),o=0;return function(l,I){function m(dt){for(;y<l.length;){var P=l.charAt(y++),rt=Yl[P];if(rt!=null)return rt;if(!/^[\s\xa0]*$/.test(P))throw Error("Unknown base64 encoding at char: "+P)}return dt}f2();for(var y=0;;){var H=m(-1),L=m(0),K=m(64),nt=m(64);if(nt===64&&H===-1)break;I(H<<2|L>>4),K!=64&&(I(L<<4&240|K>>2),nt!=64&&I(K<<6&192|nt))}}(e,function(l){n[o++]=l}),o!==i?n.subarray(0,o):n}function f2(){if(!Yl){Yl={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],i=0;i<5;i++){var n=e.concat(t[i].split(""));y2[i]=n;for(var o=0;o<n.length;o++){var l=n[o];Yl[l]===void 0&&(Yl[l]=o)}}}}var G2=typeof Uint8Array!="undefined",V2=!n5&&typeof btoa=="function";function sm(e){if(!V2){var t;t===void 0&&(t=0),f2(),t=y2[t];var i=Array(Math.floor(e.length/3)),n=t[64]||"";let y=0,H=0;for(;y<e.length-2;y+=3){var o=e[y],l=e[y+1],I=e[y+2],m=t[o>>2];o=t[(3&o)<<4|l>>4],l=t[(15&l)<<2|I>>6],I=t[63&I],i[H++]=m+o+l+I}switch(m=0,I=n,e.length-y){case 2:I=t[(15&(m=e[y+1]))<<2]||n;case 1:e=e[y],i[H]=t[e>>2]+t[(3&e)<<4|m>>4]+I+n}return i.join("")}for(t="",i=0,n=e.length-10240;i<n;)t+=String.fromCharCode.apply(null,e.subarray(i,i+=10240));return t+=String.fromCharCode.apply(null,i?e.subarray(i):e),btoa(t)}const rm=/[-_.]/g,s5={"-":"+",_:"/",".":"="};function r5(e){return s5[e]||""}function W2(e){if(!V2)return o5(e);rm.test(e)&&(e=e.replace(rm,r5)),e=atob(e);const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}function Wc(e){return G2&&e!=null&&e instanceof Uint8Array}var sl={};let l5;function B2(e){if(e!==sl)throw Error("illegal external caller")}function Vr(){return l5||(l5=new us(null,sl))}function kC(e){B2(sl);var t=e.g;return(t=t==null||Wc(t)?t:typeof t=="string"?W2(t):null)==null?t:e.g=t}var us=class{constructor(e,t){if(B2(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}h(){return new Uint8Array(kC(this)||0)}};function X2(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}let Aa;function dc(){const e=Error();X2(e,"incident"),function(t){Gr.setTimeout(()=>{throw t},0)}(e)}function fI(e){return X2(e=Error(e),"warning"),e}function zC(){return typeof BigInt=="function"}function Co(e){return Array.prototype.slice.call(e)}var bl=typeof Symbol=="function"&&typeof Symbol()=="symbol";function vd(e){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():e}var Bc=vd(),lm=vd("0di"),Za=vd("2ex"),vl=vd("1oa"),KC=bl?(e,t)=>{e[Bc]|=t}:(e,t)=>{e.g!==void 0?e.g|=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}})},jg=bl?(e,t)=>{e[Bc]&=~t}:(e,t)=>{e.g!==void 0&&(e.g&=~t)},Cn=bl?e=>0|e[Bc]:e=>0|e.g,gi=bl?e=>e[Bc]:e=>e.g,nn=bl?(e,t)=>{e[Bc]=t}:(e,t)=>{e.g!==void 0?e.g=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}})};function pl(e){return KC(e,34),e}function c5(e,t){nn(t,-14591&(0|e))}function GI(e,t){nn(t,-14557&(34|e))}var UC,Xc={},R2={};function cm(e){return!(!e||typeof e!="object"||e.Ja!==R2)}function EC(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function QC(e,t,i){if(e!=null){if(typeof e=="string")e=e?new us(e,sl):Vr();else if(e.constructor!==us)if(Wc(e))e=e.length?new us(i?e:new Uint8Array(e),sl):Vr();else{if(!t)throw Error();e=void 0}}return e}function _g(e){return!(!Array.isArray(e)||e.length)&&!!(1&Cn(e))}const gm=[];function js(e){if(2&e)throw Error()}nn(gm,55),UC=Object.freeze(gm);class Pg{constructor(t,i,n){this.l=0,this.g=t,this.h=i,this.m=n}next(){if(this.l<this.g.length){const t=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,t):t}}return{done:!0,value:void 0}}[Symbol.iterator](){return new Pg(this.g,this.h,this.m)}}let Ns,g5;function v2(e,t){(t=Ns?t[Ns]:void 0)&&(e[Ns]=Co(t))}var S2=Object.freeze({}),d5=Object.freeze({});const a5=typeof Uint8Array.prototype.slice=="function";let w2,Xi=0,dn=0;function dm(e){const t=e>>>0;Xi=t,dn=(e-t)/4294967296>>>0}function rl(e){if(e<0){dm(-e);const[t,i]=_C(Xi,dn);Xi=t>>>0,dn=i>>>0}else dm(e)}function DC(e){const t=w2||(w2=new DataView(new ArrayBuffer(8)));t.setFloat32(0,+e,!0),dn=0,Xi=t.getUint32(0,!0)}function OC(e,t){return 4294967296*t+(e>>>0)}function jC(e,t){const i=2147483648&t;return i&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),e=OC(e,t),i?-e:e}function qg(e,t){if(e>>>=0,(t>>>=0)<=2097151)var i=""+(4294967296*t+e);else zC()?i=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(i=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),i+=8147497*t,t*=2,e>=1e7&&(i+=e/1e7>>>0,e%=1e7),i>=1e7&&(t+=i/1e7>>>0,i%=1e7),i=t+am(i)+am(e));return i}function am(e){return e=String(e),"0000000".slice(e.length)+e}function Sd(e){if(e.length<16)rl(Number(e));else if(zC())e=BigInt(e),Xi=Number(e&BigInt(4294967295))>>>0,dn=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");dn=Xi=0;const i=e.length;for(let n=t,o=(i-t)%6+t;o<=i;n=o,o+=6){const l=Number(e.slice(n,o));dn*=1e6,Xi=1e6*Xi+l,Xi>=4294967296&&(dn+=Math.trunc(Xi/4294967296),dn>>>=0,Xi>>>=0)}if(t){const[n,o]=_C(Xi,dn);Xi=n,dn=o}}}function _C(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function wd(e){return e.Qa=!0,e}var I5=wd(e=>typeof e=="number"),Im=wd(e=>typeof e=="string"),C5=wd(e=>typeof e=="boolean"),Fd=typeof Gr.BigInt=="function"&&typeof Gr.BigInt(0)=="bigint",VI=wd(e=>Fd?e>=m5&&e<=b5:e[0]==="-"?Cm(e,u5):Cm(e,h5));const u5=Number.MIN_SAFE_INTEGER.toString(),m5=Fd?BigInt(Number.MIN_SAFE_INTEGER):void 0,h5=Number.MAX_SAFE_INTEGER.toString(),b5=Fd?BigInt(Number.MAX_SAFE_INTEGER):void 0;function Cm(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let i=0;i<e.length;i++){const n=e[i],o=t[i];if(n>o)return!1;if(n<o)return!0}}function _s(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function F2(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const p5=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Hd(e){const t=typeof e;switch(t){case"bigint":return!0;case"number":return Number.isFinite(e)}return t==="string"&&p5.test(e)}function Al(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?0|e:void 0}function A5(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?e>>>0:void 0}function um(e){return e[0]!=="-"&&(e.length<20||e.length===20&&Number(e.substring(0,6))<184467)}function PC(e){return e=Math.trunc(e),Number.isSafeInteger(e)||(rl(e),e=jC(Xi,dn)),e}function qC(e){var t=Math.trunc(Number(e));if(Number.isSafeInteger(t))return String(t);if((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),!(e[0]==="-"?e.length<20||e.length===20&&Number(e.substring(0,7))>-922337:e.length<19||e.length===19&&Number(e.substring(0,6))<922337))if(Sd(e),e=Xi,2147483648&(t=dn))if(zC())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[i,n]=_C(e,t);e="-"+qg(i,n)}else e=qg(e,t);return e}function $g(e){return e==null?e:typeof e=="bigint"?(VI(e)?e=Number(e):(e=BigInt.asIntN(64,e),e=VI(e)?Number(e):String(e)),e):Hd(e)?typeof e=="number"?PC(e):qC(e):void 0}function Z5(e){if(e==null)return e;var t=typeof e;if(t==="bigint")return String(BigInt.asUintN(64,e));if(Hd(e)){if(t==="string")return t=Math.trunc(Number(e)),Number.isSafeInteger(t)&&t>=0?e=String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),um(e)||(Sd(e),e=qg(Xi,dn))),e;if(t==="number")return(e=Math.trunc(e))>=0&&Number.isSafeInteger(e)?e:function(i){if(i<0){rl(i);const n=qg(Xi,dn);return i=Number(n),Number.isSafeInteger(i)?i:n}return um(String(i))?i:(rl(i),OC(Xi,dn))}(e)}}function Rc(e){if(typeof e!="string")throw Error();return e}function Zl(e){if(e!=null&&typeof e!="string")throw Error();return e}function Ir(e){return e==null||typeof e=="string"?e:void 0}function $C(e,t,i,n){if(e!=null&&typeof e=="object"&&e.Y===Xc)return e;if(!Array.isArray(e))return i?2&n?(e=t[lm])?t=e:(pl((e=new t).u),t=t[lm]=e):t=new t:t=void 0,t;let o=i=Cn(e);return o===0&&(o|=32&n),o|=2&n,o!==i&&nn(e,o),new t(e)}function y5(e,t,i){if(t)t:{if(!Hd(t=e))throw fI("int64");switch(typeof t){case"string":t=qC(t);break t;case"bigint":if(e=t=BigInt.asIntN(64,t),Im(e)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(e))throw Error(String(e))}else if(I5(e)&&!Number.isSafeInteger(e))throw Error(String(e));t=Fd?BigInt(t):C5(t)?t?"1":"0":Im(t)?t.trim()||"0":String(t);break t;default:t=PC(t)}}else t=$g(e);return typeof(i=(e=t)==null?i?0:void 0:e)=="string"&&(t=+i,Number.isSafeInteger(t))?t:i}function H2(e){var t=Do==null?void 0:Do.get(e);if(t)return t;if(Math.random()>.01)return e;if(Sl===void 0)if(typeof Proxy!="function")Sl=null;else try{Sl=Proxy.toString().indexOf("[native code]")!==-1?Proxy:null}catch{Sl=null}return(t=Sl)?(function(i,n){(Do||(Do=new WeakMap)).set(i,n),(ag||(ag=new WeakMap)).set(n,i)}(e,t=new t(e,{set:(i,n,o)=>(dc(),i[n]=o,!0)})),t):e}let Do,ag,Sl,td,tu,f5;function ed(e){switch(typeof e){case"boolean":return tu||(tu=[0,void 0,!0]);case"number":return e>0?void 0:e===0?f5||(f5=[0,void 0]):[-e,void 0];case"string":return[0,e];case"object":return e}}function Cr(e,t){return x2(e,t[0],t[1])}function x2(e,t,i){if(e==null&&(e=td),td=void 0,e==null){var n=96;i?(e=[i],n|=512):e=[],t&&(n=-16760833&n|(1023&t)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(2048&(n=Cn(e)))throw Error("farr");if(64&n)return e;if(n|=64,i&&(n|=512,i!==e[0]))throw Error("mid");t:{const o=(i=e).length;if(o){const l=o-1;if(EC(i[l])){if((t=l-(+!!(512&(n|=256))-1))>=1024)throw Error("pvtlmt");n=-16760833&n|(1023&t)<<14;break t}}if(t){if((t=Math.max(t,o-(+!!(512&n)-1)))>1024)throw Error("spvt");n=-16760833&n|(1023&t)<<14}}}return nn(e,n),e}const G5={};let V5=function(){try{return TC(new class extends Map{constructor(){super()}}),!1}catch{return!0}}();class ya{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,i){return this.g.set(t,i),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,i){return this.g.forEach(t,i)}[Symbol.iterator](){return this.entries()}}const W5=V5?(Object.setPrototypeOf(ya.prototype,Map.prototype),Object.defineProperties(ya.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),ya):class extends Map{constructor(){super()}};function mm(e){return e}function fa(e){if(2&e.L)throw Error("Cannot mutate an immutable Map")}var Wo=class extends W5{constructor(e,t,i=mm,n=mm){super();let o=Cn(e);o|=64,nn(e,o),this.L=o,this.V=t,this.S=i,this.aa=this.V?B5:n;for(let l=0;l<e.length;l++){const I=e[l],m=i(I[0],!1,!0);let y=I[1];t?y===void 0&&(y=null):y=n(I[1],!1,!0,void 0,void 0,o),super.set(m,y)}}oa(e=hm){if(this.size!==0)return this.Z(e)}Z(e=hm){const t=[],i=super.entries();for(var n;!(n=i.next()).done;)(n=n.value)[0]=e(n[0]),n[1]=e(n[1]),t.push(n);return t}clear(){fa(this),super.clear()}delete(e){return fa(this),super.delete(this.S(e,!0,!1))}entries(){var e=this.na();return new Pg(e,X5,this)}keys(){return this.Ia()}values(){var e=this.na();return new Pg(e,Wo.prototype.get,this)}forEach(e,t){super.forEach((i,n)=>{e.call(t,this.get(n),n,this)})}set(e,t){return fa(this),(e=this.S(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.aa(t,!0,!0,this.V,!1,this.L))}Oa(e){const t=this.S(e[0],!1,!0);e=e[1],e=this.V?e===void 0?null:e:this.aa(e,!1,!0,void 0,!1,this.L),super.set(t,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);const t=super.get(e);if(t!==void 0){var i=this.V;return i?((i=this.aa(t,!1,!0,i,this.ta,this.L))!==t&&super.set(e,i),i):t}}na(){return Array.from(super.keys())}Ia(){return super.keys()}[Symbol.iterator](){return this.entries()}};function B5(e,t,i,n,o,l){return e=$C(e,n,i,l),o&&(e=Yd(e)),e}function hm(e){return e}function X5(e){return[e,this.get(e)]}let R5;function bm(){return R5||(R5=new Wo(pl([]),void 0,void 0,void 0,G5))}function eu(e,t,i,n,o){if(e!=null){if(Array.isArray(e))e=_g(e)?void 0:o&&2&Cn(e)?e:xd(e,t,i,n!==void 0,o);else if(EC(e)){const l={};for(let I in e)l[I]=eu(e[I],t,i,n,o);e=l}else e=t(e,n);return e}}function xd(e,t,i,n,o){const l=n||i?Cn(e):0;n=n?!!(32&l):void 0;const I=Co(e);for(let m=0;m<I.length;m++)I[m]=eu(I[m],t,i,n,o);return i&&(v2(I,e),i(l,I)),I}function v5(e){return eu(e,iu,void 0,void 0,!1)}function iu(e){return e.Y===Xc?e.toJSON():e instanceof Wo?e.oa(v5):function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return VI(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(_g(t))return}else{if(Wc(t))return sm(t);if(t instanceof us){const i=t.g;return i==null?"":typeof i=="string"?i:t.g=sm(i)}if(t instanceof Wo)return t.oa()}}return t}(e)}function WI(e,t,i=GI){if(e!=null){if(G2&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var n=Cn(e);return 2&n?e:(t&&(t=n===0||!!(32&n)&&!(64&n||!(16&n))),t?(nn(e,-12293&(34|n)),e):xd(e,WI,4&n?GI:i,!0,!0))}return e.Y===Xc?(i=e.u,e=2&(n=gi(i))?e:nu(e,i,n,!0)):e instanceof Wo&&!(2&e.L)&&(i=pl(e.Z(WI)),e=new Wo(i,e.V,e.S,e.aa)),e}}function nu(e,t,i,n){return e=e.constructor,td=t=Y2(t,i,n),t=new e(t),td=void 0,t}function Y2(e,t,i){const n=i||2&t?GI:c5,o=!!(32&t);return e=function(l,I,m){const y=Co(l);var H=y.length;const L=256&I?y[H-1]:void 0;for(H+=L?-1:0,I=512&I?1:0;I<H;I++)y[I]=m(y[I]);if(L){I=y[I]={};for(const K in L)I[K]=m(L[K])}return v2(y,l),y}(e,t,l=>WI(l,o,n)),KC(e,32|(i?2:0)),e}function Yd(e){const t=e.u,i=gi(t);return 2&i?nu(e,t,i,!1):e}function N2(e,t,i,n){return!(4&t)||i!=null}function Js(e,t){return ts(e=e.u,gi(e),t)}function pm(e,t,i,n){if(!((t=n+(+!!(512&t)-1))<0||t>=e.length||t>=i))return e[t]}function ts(e,t,i,n){if(i===-1)return null;const o=t>>14&1023||536870912;if(!(i>=o)){var l=e.length;return n&&256&t&&(n=e[l-1][i])!=null?(pm(e,t,o,i)&&Za!=null&&((t=(e=Aa!=null?Aa:Aa={})[Za]||0)>=4||(e[Za]=t+1,dc())),n):pm(e,t,o,i)}return 256&t?e[e.length-1][i]:void 0}function Hi(e,t,i,n){const o=e.u;let l=gi(o);return js(l),Qi(o,l,t,i,n),e}function Qi(e,t,i,n,o){const l=t>>14&1023||536870912;if(i>=l||o&&!i5){let I=t;if(256&t)o=e[e.length-1];else{if(n==null)return I;o=e[l+(+!!(512&t)-1)]={},I|=256}return o[i]=n,i<l&&(e[i+(+!!(512&t)-1)]=void 0),I!==t&&nn(e,I),I}return e[i+(+!!(512&t)-1)]=n,256&t&&i in(e=e[e.length-1])&&delete e[i],t}function yl(e,t,i,n,o){var l=2&t;let I=ts(e,t,i,o);Array.isArray(I)||(I=UC);const m=!(2&n);n=!(1&n);const y=!!(32&t);let H=Cn(I);return H!==0||!y||l||m?1&H||(H|=1,nn(I,H)):(H|=33,nn(I,H)),l?(e=!1,2&H||(pl(I),e=!!(4&H)),(n||e)&&Object.freeze(I)):(l=!!(2&H)||!!(2048&H),n&&l?(I=Co(I),n=1,y&&!m&&(n|=32),nn(I,n),Qi(e,t,i,I,o)):m&&32&H&&!l&&jg(I,32)),I}function Ig(e,t){e=e.u;let i=gi(e);const n=ts(e,i,t),o=_s(n);return o!=null&&o!==n&&Qi(e,i,t,o),o}function M2(e){e=e.u;let t=gi(e);const i=ts(e,t,1),n=QC(i,!0,!!(34&t));return n!=null&&n!==i&&Qi(e,t,1,n),n}function qr(e,t,i){var n=S2===void 0?2:5;const o=e.u;var l=gi(o);const I=2&l?1:n;n=L2(o,l,t);var m=Cn(n);if(N2(e,m,void 0)){(4&m||Object.isFrozen(n))&&(n=Co(n),m=Wr(m,l),l=Qi(o,l,t,n));let H=e=0;for(;e<n.length;e++){const L=i(n[e]);L!=null&&(n[H++]=L)}H<e&&(n.length=H),m=-4097&(20|(m=J2(m,l))),nn(n,m&=-8193),2&m&&Object.freeze(n)}let y;return I===1||I===4&&32&m?ds(m)||(l=m,(m|=2)!==l&&nn(n,m),Object.freeze(n)):(i=I===5&&(!!(32&m)||ds(m)||!!(Do!=null&&Do.get(n))),(I===2||i)&&ds(m)&&(n=Co(n),m=ll(m=Wr(m,l),l,!1),nn(n,m),l=Qi(o,l,t,n)),ds(m)||(t=m,(m=ll(m,l,!1))!==t&&nn(n,m)),i&&(y=H2(n))),y||n}function L2(e,t,i){return e=ts(e,t,i),Array.isArray(e)?e:UC}function J2(e,t){return e===0&&(e=Wr(e,t)),1|e}function ds(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function T2(e){e=Co(e);for(let t=0;t<e.length;t++){const i=e[t]=Co(e[t]);Array.isArray(i[1])&&(i[1]=pl(i[1]))}return e}function BI(e,t,i,n){e=e.u;let o=gi(e);js(o),Qi(e,o,t,(n==="0"?Number(i)===0:i===n)?void 0:i)}function vc(e,t,i,n){var l;const o=gi(e);js(o),e=yl(e,o,t,2),n=i(n,(l=4&(t=Cn(e))?4096&t?4096:8192&t?8192:0:void 0)!=null?l:0),e.push(n)}function S5(e){return e}function Ga(e,t){var i=fp;return su(ou(e=e.u),e,gi(e),i)===t?t:-1}function ou(e){var i;if(bl)return(i=e[vl])!=null?i:e[vl]=new Map;if(vl in e)return e[vl];const t=new Map;return Object.defineProperty(e,vl,{value:t}),t}function k2(e,t,i,n){const o=ou(e),l=su(o,e,t,i);return l!==n&&(l&&(t=Qi(e,t,l)),o.set(i,n)),t}function su(e,t,i,n){let o=e.get(n);if(o!=null)return o;o=0;for(let l=0;l<n.length;l++){const I=n[l];ts(t,i,I)!=null&&(o!==0&&(i=Qi(t,i,o)),o=I)}return e.set(n,o),o}function ru(e,t,i,n){let o=gi(e);const l=ts(e,o,i,n);let I;if(l!=null&&l.Y===Xc)return(t=Yd(l))!==l&&Qi(e,o,i,t,n),t.u;if(Array.isArray(l)){const m=Cn(l);I=2&m?Y2(l,m,!1):l,I=Cr(I,t)}else I=Cr(void 0,t);return I!==l&&Qi(e,o,i,I,n),I}function z2(e,t,i,n){e=e.u;let o=gi(e);const l=ts(e,o,i,n);return(t=$C(l,t,!1,o))!==l&&t!=null&&Qi(e,o,i,t,n),t}function Oe(e,t,i,n=!1){if((t=z2(e,t,i,n))==null)return t;e=e.u;let o=gi(e);if(!(2&o)){const l=Yd(t);l!==t&&Qi(e,o,i,t=l,n)}return t}function K2(e,t,i,n,o,l,I){var m=!!(2&t);o=m?1:o,l=!!l,I&&(I=!m),m=L2(e,t,n);var y=Cn(m),H=!!(4&y);if(!H){var L=m,K=t;const dt=!!(2&(y=J2(y,t)));dt&&(K|=2);let P=!dt,rt=!0,Xt=0,Wt=0;for(;Xt<L.length;Xt++){const xt=$C(L[Xt],i,!1,K);if(xt instanceof i){if(!dt){const _=!!(2&Cn(xt.u));P&&(P=!_),rt&&(rt=_)}L[Wt++]=xt}}Wt<Xt&&(L.length=Wt),y|=4,y=rt?16|y:-17&y,nn(L,y=P?8|y:-9&y),dt&&Object.freeze(L)}if(I&&!(8&y||!m.length&&(o===1||o===4&&32&y))){for(ds(y)&&(m=Co(m),y=Wr(y,t),t=Qi(e,t,n,m)),i=m,I=y,L=0;L<i.length;L++)(y=i[L])!==(K=Yd(y))&&(i[L]=K);I|=8,I=i.length?-17&I:16|I,nn(i,I),y=I}let nt;return o===1||o===4&&32&y?ds(y)||(t=y,(y|=!m.length||16&y&&(!H||32&y)?2:2048)!==t&&nn(m,y),Object.freeze(m)):(H=o===5&&(!!(32&y)||ds(y)||!!(Do!=null&&Do.get(m))),(o===2||H)&&ds(y)&&(m=Co(m),y=ll(y=Wr(y,t),t,l),nn(m,y),t=Qi(e,t,n,m)),ds(y)||(e=y,(y=ll(y,t,l))!==e&&nn(m,y)),H&&(nt=H2(m))),nt||m}function bs(e,t,i){e=e.u;const n=gi(e);return K2(e,n,t,i,S2===void 0?2:5,!1,!(2&n))}function se(e,t,i,n,o){return n==null&&(n=void 0),Hi(e,i,n,o)}function Kl(e,t,i,n){n==null&&(n=void 0);t:{e=e.u;let o=gi(e);if(js(o),n==null){const l=ou(e);if(su(l,e,o,i)!==t)break t;l.set(i,0)}else o=k2(e,o,i,t);Qi(e,o,t,n)}}function Wr(e,t){return-2049&(e=32|(2&t?2|e:-3&e))}function ll(e,t,i){return 32&t&&i||(e&=-33),e}function id(e,t,i,n){e=e.u;const o=gi(e);js(o),t=K2(e,o,i,t,2,!0),i=n!=null?n:new i,t.push(i),2&Cn(i.u)?jg(t,8):jg(t,16)}function Ho(e,t){return e!=null?e:t}function Go(e,t){return Al(Js(e,t))}function bn(e,t){return Ho(Ig(e,t),0)}function _o(e,t){return Ho(Ir(Js(e,t)),"")}function ac(e,t,i){if(i!=null&&typeof i!="boolean")throw e=typeof i,Error(`Expected boolean but got ${e!="object"?e:i?Array.isArray(i)?"array":e:"null"}: ${i}`);Hi(e,t,i)}function Po(e,t,i){if(i!=null){if(typeof i!="number"||!Number.isFinite(i))throw fI("int32");i|=0}Hi(e,t,i)}function jt(e,t,i){if(i!=null&&typeof i!="number")throw Error(`Value of float/double field must be a number, found ${typeof i}: ${i}`);Hi(e,t,i)}function nd(e,t,i){{const m=e.u;let y=gi(m);if(js(y),i==null)Qi(m,y,t);else{i=(ag==null?void 0:ag.get(i))||i;var n,o=Cn(i),l=o,I=!!(2&o)||Object.isFrozen(i);if((n=!I)&&(n=d5===void 0||!1),N2(e,o))for(o=21,I&&(i=Co(i),l=0,o=ll(o=Wr(o,y),y,!0)),e=0;e<i.length;e++)i[e]=Rc(i[e]);n&&(i=Co(i),l=0,o=ll(o=Wr(o,y),y,!0)),o!==l&&nn(i,o),Qi(m,y,t,i)}}}function U2(e,t){return Error(`Invalid wire type: ${e} (at position ${t})`)}function lu(){return Error("Failed to read varint, encoding is invalid.")}function E2(e,t){return Error(`Tried to read past the end of the data ${t} > ${e}`)}function cu(e){if(typeof e=="string")return{buffer:W2(e),N:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),N:!1};if(e.constructor===Uint8Array)return{buffer:e,N:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),N:!1};if(e.constructor===us)return{buffer:kC(e)||new Uint8Array(0),N:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),N:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function gu(e,t){let i,n=0,o=0,l=0;const I=e.h;let m=e.g;do i=I[m++],n|=(127&i)<<l,l+=7;while(l<32&&128&i);for(l>32&&(o|=(127&i)>>4),l=3;l<32&&128&i;l+=7)i=I[m++],o|=(127&i)<<l;if(ur(e,m),i<128)return t(n>>>0,o>>>0);throw lu()}function du(e){let t=0,i=e.g;const n=i+10,o=e.h;for(;i<n;){const l=o[i++];if(t|=l,(128&l)==0)return ur(e,i),!!(127&t)}throw lu()}function Ts(e){const t=e.h;let i=e.g,n=t[i++],o=127&n;if(128&n&&(n=t[i++],o|=(127&n)<<7,128&n&&(n=t[i++],o|=(127&n)<<14,128&n&&(n=t[i++],o|=(127&n)<<21,128&n&&(n=t[i++],o|=n<<28,128&n&&128&t[i++]&&128&t[i++]&&128&t[i++]&&128&t[i++]&&128&t[i++])))))throw lu();return ur(e,i),o}function ks(e){return Ts(e)>>>0}function XI(e){var t=e.h;const i=e.g,n=t[i],o=t[i+1],l=t[i+2];return t=t[i+3],ur(e,e.g+4),(n<<0|o<<8|l<<16|t<<24)>>>0}function RI(e){var t=XI(e);e=2*(t>>31)+1;const i=t>>>23&255;return t&=8388607,i==255?t?NaN:e*(1/0):i==0?e*Math.pow(2,-149)*t:e*Math.pow(2,i-150)*(t+Math.pow(2,23))}function w5(e){return Ts(e)}function Va(e,t,{da:i=!1}={}){e.da=i,t&&(t=cu(t),e.h=t.buffer,e.m=t.N,e.j=0,e.l=e.h.length,e.g=e.j)}function ur(e,t){if(e.g=t,t>e.l)throw E2(e.l,t)}function Q2(e,t){if(t<0)throw Error(`Tried to read a negative byte length: ${t}`);const i=e.g,n=i+t;if(n>e.l)throw E2(t,e.l-i);return e.g=n,i}function D2(e,t){if(t==0)return Vr();var i=Q2(e,t);return e.da&&e.m?i=e.h.subarray(i,i+t):(e=e.h,i=i===(t=i+t)?new Uint8Array(0):a5?e.slice(i,t):new Uint8Array(e.subarray(i,t))),i.length==0?Vr():new us(i,sl)}Wo.prototype.toJSON=void 0,Wo.prototype.Ja=R2;var Am=[];function O2(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var i=ks(e.g);if(t=i>>>3,!((i&=7)>=0&&i<=5))throw U2(i,e.l);if(t<1)throw Error(`Invalid field number: ${t} (at position ${e.l})`);return e.m=t,e.h=i,!0}function Cg(e){switch(e.h){case 0:e.h!=0?Cg(e):du(e.g);break;case 1:ur(e=e.g,e.g+8);break;case 2:if(e.h!=2)Cg(e);else{var t=ks(e.g);ur(e=e.g,e.g+t)}break;case 5:ur(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!O2(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=t)throw Error("Unmatched end-group tag");break}Cg(e)}break;default:throw U2(e.h,e.l)}}function Sc(e,t,i){const n=e.g.l,o=ks(e.g),l=e.g.g+o;let I=l-n;if(I<=0&&(e.g.l=l,i(t,e,void 0,void 0,void 0),I=l-e.g.g),I)throw Error(`Message parsing ended unexpectedly. Expected to read ${o} bytes, instead read ${o-I} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=l,e.g.l=n,t}function au(e){var t=ks(e.g),i=Q2(e=e.g,t);if(e=e.h,$B){var n,o=e;(n=ba)||(n=ba=new TextDecoder("utf-8",{fatal:!0})),t=i+t,o=i===0&&t===o.length?o:o.subarray(i,t);try{var l=n.decode(o)}catch(m){if($c===void 0){try{n.decode(new Uint8Array([128]))}catch{}try{n.decode(new Uint8Array([97])),$c=!0}catch{$c=!1}}throw!$c&&(ba=void 0),m}}else{t=(l=i)+t,i=[];let m,y=null;for(;l<t;){var I=e[l++];I<128?i.push(I):I<224?l>=t?ir():(m=e[l++],I<194||(192&m)!=128?(l--,ir()):i.push((31&I)<<6|63&m)):I<240?l>=t-1?ir():(m=e[l++],(192&m)!=128||I===224&&m<160||I===237&&m>=160||(192&(n=e[l++]))!=128?(l--,ir()):i.push((15&I)<<12|(63&m)<<6|63&n)):I<=244?l>=t-2?ir():(m=e[l++],(192&m)!=128||m-144+(I<<28)>>30!=0||(192&(n=e[l++]))!=128||(192&(o=e[l++]))!=128?(l--,ir()):(I=(7&I)<<18|(63&m)<<12|(63&n)<<6|63&o,I-=65536,i.push(55296+(I>>10&1023),56320+(1023&I)))):ir(),i.length>=8192&&(y=nm(y,i),i.length=0)}l=nm(y,i)}return l}function j2(e){const t=ks(e.g);return D2(e.g,t)}function Nd(e,t,i){var n=ks(e.g);for(n=e.g.g+n;e.g.g<n;)i.push(t(e.g))}var tg=[];let od;function Mo(e,t,i){t.g?t.m(e,t.g,t.h,i,!0):t.m(e,t.h,i,!0)}var Ot=class{constructor(e,t){this.u=x2(e,t)}toJSON(){return _2(this)}l(){var e=A9;return e.g?e.l(this,e.g,e.h,!0):e.l(this,e.h,e.defaultValue,!0)}clone(){const e=this.u;return nu(this,e,gi(e),!1)}N(){return!!(2&Cn(this.u))}};function _2(e){e=od?e.u:xd(e.u,iu,void 0,void 0,!1);{var t=!od;let H=e.length;if(H){var i=e[H-1],n=EC(i);n?H--:i=void 0;var o=e;if(n){t:{var l=i,I={};if(n=!1,l)for(var m in l){if(isNaN(+m)){I[m]=l[m];continue}let L=l[m];Array.isArray(L)&&(_g(L)||cm(L)&&L.size===0)&&(L=null),L==null&&(n=!0),L!=null&&(I[m]=L)}if(n){for(let L in I)break t;I=null}else I=l}l=I==null?i!=null:I!==i}for(;H>0&&((m=o[H-1])==null||_g(m)||cm(m)&&m.size===0);H--)var y=!0;(o!==e||l||y)&&(t?(y||l||I)&&(o.length=H):o=Array.prototype.slice.call(o,0,H),I&&o.push(I)),y=o}else y=e}return y}function Zm(e){return e?/^\d+$/.test(e)?(Sd(e),new ym(Xi,dn)):null:F5||(F5=new ym(0,0))}Ot.prototype.Y=Xc,Ot.prototype.toString=function(){try{return od=!0,_2(this).toString()}finally{od=!1}};var ym=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let F5;function fm(e){return e?/^-?\d+$/.test(e)?(Sd(e),new Gm(Xi,dn)):null:H5||(H5=new Gm(0,0))}var Gm=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let H5;function sd(e,t,i){for(;i>0||t>127;)e.g.push(127&t|128),t=(t>>>7|i<<25)>>>0,i>>>=7;e.g.push(t)}function wc(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function Md(e,t){if(t>=0)wc(e,t);else{for(let i=0;i<9;i++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function Ic(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function cl(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function Bo(e,t,i){wc(e.g,8*t+i)}function Iu(e,t){return Bo(e,t,2),t=e.g.end(),cl(e,t),t.push(e.h),t}function Cu(e,t){var i=t.pop();for(i=e.h+e.g.length()-i;i>127;)t.push(127&i|128),i>>>=7,e.h++;t.push(i),e.h++}function Ld(e,t,i){Bo(e,t,2),wc(e.g,i.length),cl(e,e.g.end()),cl(e,i)}function vI(e,t,i,n){i!=null&&(t=Iu(e,t),n(i,e),Cu(e,t))}class fl{constructor(t,i,n,o){this.g=t,this.h=i,this.l=n,this.pa=o}}function P2(e){return Array.isArray(e)?e[0]instanceof fl?e:[U5,e]:[e,void 0]}function Gl(e,t){if(Array.isArray(t)){var i=Cn(t);if(4&i)return t;for(var n=0,o=0;n<t.length;n++){const l=e(t[n]);l!=null&&(t[o++]=l)}return o<n&&(t.length=o),nn(t,-12289&(5|i)),2&i&&Object.freeze(t),t}}const Vm=Symbol();function uu(e){let t=e[Vm];if(!t){const i=$2(e),n=hu(e),o=n.l;t=o?(l,I)=>o(l,I,n):(l,I)=>{var L;for(;O2(I)&&I.h!=4;){var m=I.m;let K=n[m];const nt=!K;let dt=!1;if(!K){var y=n.U;if(y){var H=y[m];H&&(dt=(L=y.O)==null?void 0:L[m],(!Z2||dt)&&(y=x5(H))&&(K=n[m]=y))}}K&&K(I,l,m)||(m=(y=I).l,Cg(y),y.ia?y=void 0:(H=y.g.g-m,y.g.g=m,y=D2(y.g,H)),m=l,y&&(Ns||(Ns=Symbol()),(H=m[Ns])?H.push(y):m[Ns]=[y])),nt&&K&&!dt&&FI++<5&&dc()}i===q2||i===ug||i.j||(l[g5||(g5=Symbol())]=i)},e[Vm]=t}return t}function x5(e){const t=(e=P2(e))[0].g;if(e=e[1]){const i=uu(e),n=hu(e).T;return(o,l,I)=>t(o,l,I,n,i)}return t}class Wa{}let q2,ug;const Ul=Symbol();function Y5(e,t,i){const n=i[1];let o;if(n){const l=n[Ul];o=l?l.T:ed(n[0]),e[t]=l!=null?l:n}o&&o===tu?(e.g||(e.g=new Set)).add(t):i[0]&&(e.h||(e.h=new Set)).add(t)}function Wm(e,t){return[e.l,!t||t[0]>0?void 0:t]}function $2(e){var t=e[Ul];if(t)return t;if(!(t=mu(e,e[Ul]=new Wa,Wm,Wm,Y5)).U&&!t.h&&!t.g){let i=!0;for(let n in t)isNaN(n)||(i=!1);i?(ed(e[0])===tu?ug?t=ug:((t=new Wa).T=ed(!0),t=ug=t):t=q2||(q2=new Wa),t=e[Ul]=t):t.j=!0}return t}function N5(e,t,i){e[t]=i}function mu(e,t,i,n,o=N5){t.T=ed(e[0]);let l=0;var I=e[++l];I&&I.constructor===Object&&(t.U=I,typeof(I=e[++l])=="function"&&(t.l=I,t.m=e[++l],I=e[++l]));const m={};for(;Array.isArray(I)&&typeof I[0]=="number"&&I[0]>0;){for(var y=0;y<I.length;y++)m[I[y]]=I;I=e[++l]}for(y=1;I!==void 0;){let K;typeof I=="number"&&(y+=I,I=e[++l]);var H=void 0;if(I instanceof fl?K=I:(K=E5,l--),K.pa){I=e[++l],H=e;var L=l;typeof I=="function"&&(I=I(),H[L]=I),H=I}for(L=y+1,typeof(I=e[++l])=="number"&&I<0&&(L-=I,I=e[++l]);y<L;y++){const nt=m[y];o(t,y,H?n(K,H,nt):i(K,nt))}}return t}const Bm=Symbol();function tp(e){let t=e[Bm];if(!t){const i=Jd(e);t=(n,o)=>ip(n,o,i),e[Bm]=t}return t}const SI=Symbol();function M5(e){return e.h}function L5(e,t){let i,n;const o=e.h;return(l,I,m)=>o(l,I,m,n||(n=Jd(t).T),i||(i=tp(t)))}function Jd(e){let t=e[SI];return t||(t=mu(e,e[SI]={},M5,L5),ep(e),t)}const wI=Symbol();function J5(e,t){const i=e.g;return t?(n,o,l)=>i(n,o,l,t):i}function T5(e,t,i){const n=e.g;let o,l;return(I,m,y)=>n(I,m,y,l||(l=hu(t).T),o||(o=uu(t)),i)}function hu(e){let t=e[wI];return t||($2(e),t=mu(e,e[wI]={},J5,T5),ep(e),t)}function ep(e){wI in e&&Ul in e&&SI in e&&(e.length=0)}function Xm(e,t){var l;var i=e[t];if(i)return i;if(i=e.U){var n=i[t];if(n){var o=(n=P2(n))[0].h;if(n=n[1],i=(l=i.O)==null?void 0:l[t],!Z2||i){if(n){const I=tp(n),m=Jd(n).T;i=(i=e.m)?i(m,I):(y,H,L)=>o(y,H,L,m,I)}else i=o;return e[t]=i}}}}function ip(e,t,i){var y,H,L;for(var n=gi(e),o=+!!(512&n)-1,l=e.length,I=512&n?1:0,m=l+(256&n?-1:0);I<m;I++){const K=e[I];if(K==null)continue;const nt=I-o,dt=Xm(i,nt);if(!dt)continue;const P=i.U;(P==null?void 0:P[nt])&&!((y=P==null?void 0:P.O)!=null&&y[nt])&&FI++<5&&dc(),dt(t,K,nt)}if(256&n){n=e[l-1];for(let K in n)o=+K,!Number.isNaN(o)&&(l=n[K])!=null&&(m=Xm(i,o))&&(((H=I=i.U)==null?void 0:H[o])&&!((L=I==null?void 0:I.O)!=null&&L[o])&&FI++<5&&dc(),m(t,l,o))}if(e=Ns?e[Ns]:void 0)for(cl(t,t.g.end()),i=0;i<e.length;i++)cl(t,kC(e[i])||new Uint8Array(0))}function oo(e,t){return new fl(e,t,!1,!1)}function Vl(e,t){return new fl(e,t,!0,!1)}function Td(e,t){return new fl(e,t,!1,!0)}function so(e,t,i){Qi(e,gi(e),t,i)}var k5=Td(function(e,t,i,n,o){return e.h===2&&(e=Sc(e,Cr([void 0,void 0],n),o),js(n=gi(t)),(o=ts(t,n,i))instanceof Wo?(2&o.L)!=0?((o=o.Z()).push(e),Qi(t,n,i,o)):o.Oa(e):Array.isArray(o)?(2&Cn(o)&&Qi(t,n,i,o=T2(o)),o.push(e)):Qi(t,n,i,[e]),!0)},function(e,t,i,n,o){if(t instanceof Wo)t.forEach((l,I)=>{vI(e,i,Cr([I,l],n),o)});else if(Array.isArray(t))for(let l=0;l<t.length;l++){const I=t[l];Array.isArray(I)&&vI(e,i,Cr(I,n),o)}});let FI=0;function np(e,t,i){t=function(n){if(n==null)return n;const o=typeof n;if(o==="bigint")return String(BigInt.asIntN(64,n));if(Hd(n)){if(o==="string")return qC(n);if(o==="number")return PC(n)}}(t),t!=null&&(typeof t=="string"&&fm(t),t!=null&&(Bo(e,i,0),typeof t=="number"?(e=e.g,rl(t),sd(e,Xi,dn)):(i=fm(t),sd(e.g,i.h,i.g))))}function op(e,t,i){(t=Al(t))!=null&&t!=null&&(Bo(e,i,0),Md(e.g,t))}function sp(e,t,i){(t=F2(t))!=null&&(Bo(e,i,0),e.g.g.push(t?1:0))}function rp(e,t,i){(t=Ir(t))!=null&&Ld(e,i,p2(t))}function kd(e,t,i,n,o){vI(e,i,t instanceof Ot?t.u:Array.isArray(t)?Cr(t,n):void 0,o)}function lp(e,t,i){(t=t==null||typeof t=="string"||Wc(t)||t instanceof us?t:void 0)!=null&&Ld(e,i,cu(t).buffer)}function cp(e,t,i){return(e.h===5||e.h===2)&&(t=yl(t,gi(t),i,2,!1),e.h==2?Nd(e,RI,t):t.push(RI(e.g)),!0)}var fn,rs=oo(function(e,t,i){if(e.h!==1)return!1;var n=e.g;e=XI(n);const o=XI(n);n=2*(o>>31)+1;const l=o>>>20&2047;return e=4294967296*(1048575&o)+e,so(t,i,l==2047?e?NaN:n*(1/0):l==0?n*Math.pow(2,-1074)*e:n*Math.pow(2,l-1075)*(e+4503599627370496)),!0},function(e,t,i){(t=_s(t))!=null&&(Bo(e,i,1),e=e.g,(i=w2||(w2=new DataView(new ArrayBuffer(8)))).setFloat64(0,+t,!0),Xi=i.getUint32(0,!0),dn=i.getUint32(4,!0),Ic(e,Xi),Ic(e,dn))}),Sn=oo(function(e,t,i){return e.h===5&&(so(t,i,RI(e.g)),!0)},function(e,t,i){(t=_s(t))!=null&&(Bo(e,i,5),e=e.g,DC(t),Ic(e,Xi))}),z5=Vl(cp,function(e,t,i){if((t=Gl(_s,t))!=null)for(let I=0;I<t.length;I++){var n=e,o=i,l=t[I];l!=null&&(Bo(n,o,5),n=n.g,DC(l),Ic(n,Xi))}}),bu=Vl(cp,function(e,t,i){if((t=Gl(_s,t))!=null&&t.length){Bo(e,i,2),wc(e.g,4*t.length);for(let n=0;n<t.length;n++)i=e.g,DC(t[n]),Ic(i,Xi)}}),zs=oo(function(e,t,i){return e.h===0&&(so(t,i,gu(e.g,jC)),!0)},np),Ba=oo(function(e,t,i){return e.h===0&&(so(t,i,(e=gu(e.g,jC))===0?void 0:e),!0)},np),K5=oo(function(e,t,i){return e.h===0&&(so(t,i,gu(e.g,OC)),!0)},function(e,t,i){(t=Z5(t))!=null&&(typeof t=="string"&&Zm(t),t!=null&&(Bo(e,i,0),typeof t=="number"?(e=e.g,rl(t),sd(e,Xi,dn)):(i=Zm(t),sd(e.g,i.h,i.g))))}),an=oo(function(e,t,i){return e.h===0&&(so(t,i,Ts(e.g)),!0)},op),zd=Vl(function(e,t,i){return(e.h===0||e.h===2)&&(t=yl(t,gi(t),i,2,!1),e.h==2?Nd(e,Ts,t):t.push(Ts(e.g)),!0)},function(e,t,i){if((t=Gl(Al,t))!=null&&t.length){i=Iu(e,i);for(let n=0;n<t.length;n++)Md(e.g,t[n]);Cu(e,i)}}),$r=oo(function(e,t,i){return e.h===0&&(so(t,i,(e=Ts(e.g))===0?void 0:e),!0)},op),en=oo(function(e,t,i){return e.h===0&&(so(t,i,du(e.g)),!0)},sp),El=oo(function(e,t,i){return e.h===0&&(so(t,i,(e=du(e.g))===!1?void 0:e),!0)},sp),zn=Vl(function(e,t,i){return e.h===2&&(vc(t,i,S5,e=au(e)),!0)},function(e,t,i){if((t=Gl(Ir,t))!=null)for(let I=0;I<t.length;I++){var n=e,o=i,l=t[I];l!=null&&Ld(n,o,p2(l))}}),Ss=oo(function(e,t,i){return e.h===2&&(so(t,i,(e=au(e))===""?void 0:e),!0)},rp),hi=oo(function(e,t,i){return e.h===2&&(so(t,i,au(e)),!0)},rp),U5=Td(function(e,t,i,n,o){return e.h===2&&(Sc(e,ru(t,n,i,!0),o),!0)},kd),E5=Td(function(e,t,i,n,o){return e.h===2&&(Sc(e,ru(t,n,i),o),!0)},kd);fn=new fl(function(e,t,i,n,o){if(e.h!==2)return!1;n=Cr(void 0,n);let l=gi(t);js(l);let I=yl(t,l,i,3);return l=gi(t),4&Cn(I)&&(I=Co(I),nn(I,-2079&(1|Cn(I))),Qi(t,l,i,I)),I.push(n),Sc(e,n,o),!0},function(e,t,i,n,o){if(Array.isArray(t))for(let l=0;l<t.length;l++)kd(e,t[l],i,n,o)},!0,!0);var Bi=Td(function(e,t,i,n,o,l){return e.h===2&&(k2(t,gi(t),l,i),Sc(e,t=ru(t,n,i),o),!0)},kd),gp=oo(function(e,t,i){return e.h===2&&(so(t,i,j2(e)),!0)},lp),Q5=Vl(function(e,t,i){return(e.h===0||e.h===2)&&(t=yl(t,gi(t),i,2,!1),e.h==2?Nd(e,ks,t):t.push(ks(e.g)),!0)},function(e,t,i){if((t=Gl(A5,t))!=null)for(let I=0;I<t.length;I++){var n=e,o=i,l=t[I];l!=null&&(Bo(n,o,0),wc(n.g,l))}}),qo=oo(function(e,t,i){return e.h===0&&(so(t,i,Ts(e.g)),!0)},function(e,t,i){(t=Al(t))!=null&&(t=parseInt(t,10),Bo(e,i,0),Md(e.g,t))});class D5{constructor(t,i){this.h=t,this.g=i,this.l=Oe,this.m=se,this.defaultValue=void 0}}function Lo(e,t){return new D5(e,t)}function Ps(e,t){return(i,n)=>{if(tg.length){const l=tg.pop();l.o(n),Va(l.g,i,n),i=l}else i=new class{constructor(l,I){if(Am.length){const m=Am.pop();Va(m,l,I),l=m}else l=new class{constructor(m,y){this.h=null,this.m=!1,this.g=this.l=this.j=0,Va(this,m,y)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.da=!1}}(l,I);this.g=l,this.l=this.g.g,this.h=this.m=-1,this.o(I)}o({ia:l=!1}={}){this.ia=l}}(i,n);try{const l=new e,I=l.u;uu(t)(I,i);var o=l}finally{i.g.clear(),i.m=-1,i.h=-1,tg.length<100&&tg.push(i)}return o}}function Kd(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const I=this.g;return this.g=[],I}}}};ip(this.u,t,Jd(e)),cl(t,t.g.end());const i=new Uint8Array(t.h),n=t.l,o=n.length;let l=0;for(let I=0;I<o;I++){const m=n[I];i.set(m,l),l+=m.length}return t.l=[i],i}}var Rm=class extends Ot{constructor(e){super(e)}},vm=[0,Ss,oo(function(e,t,i){return e.h===2&&(so(t,i,(e=j2(e))===Vr()?void 0:e),!0)},function(e,t,i){if(t!=null){if(t instanceof Ot){const n=t.Ra;return void(n&&(t=n(t),t!=null&&Ld(e,i,cu(t).buffer)))}if(Array.isArray(t))return}lp(e,t,i)})],dp=[0,an,qo,en,-1,zd,qo,-1],O5=class extends Ot{constructor(){super()}},ap=[0,en,hi,en,qo,-1,Vl(function(e,t,i){return(e.h===0||e.h===2)&&(t=yl(t,gi(t),i,2,!1),e.h==2?Nd(e,w5,t):t.push(Ts(e.g)),!0)},function(e,t,i){if((t=Gl(Al,t))!=null&&t.length){i=Iu(e,i);for(let n=0;n<t.length;n++)Md(e.g,t[n]);Cu(e,i)}}),hi,-1,[0,en,-1],qo,en],Ip=[0,hi,-2],Sm=class extends Ot{constructor(){super()}},Cp=[0],up=[0,an,en,1,en,-3],j5=[0,hi,en,-1,an,[0,[1,2,3,4,5,6],Bi,Cp,Bi,ap,Bi,Ip,Bi,up,Bi,dp,Bi,[0,hi,-2]],[0,hi],en,[0,[1,3],[2,4],Bi,[0,zd],-1,Bi,[0,zn],-1,fn,[0,hi,-1]],hi],uo=class extends Ot{constructor(e){super(e,2)}},Ti={},vn=Ti.O={};Ti[336783863]=j5,vn[336783863]=1;var wm=[0,Ba,-1,El,-3,Ba,zd,Ss,$r,Ba,-1,El,$r,El,-2,Ss];function ho(e,t){BI(e,2,Zl(t),"")}function xi(e,t){vc(e.u,3,Rc,t)}function Le(e,t){vc(e.u,4,Rc,t)}var On=class extends Ot{constructor(e){super(e,500)}o(e){return se(this,0,7,e)}},Ql=[-1,{O:{}}],Fm=[0,hi,1,Ql],Hm=[0,hi,zn,Ql];function bo(e,t){id(e,1,On,t)}function ki(e,t){vc(e.u,10,Rc,t)}function Pe(e,t){vc(e.u,15,Rc,t)}var ro=class extends Ot{constructor(e){super(e,500)}o(e){return se(this,0,1001,e)}},mp=[-500,fn,[-500,Ss,-1,zn,-3,[-2,Ti,en],fn,vm,$r,-1,Fm,Hm,fn,[0,Ss,El],Ss,wm,$r,zn,987,zn],4,fn,[-500,hi,-1,[-1,{O:{}}],998,hi],fn,[-500,hi,zn,-1,[-2,{O:{}},en],997,zn,-1],$r,fn,[-500,hi,zn,Ql,998,zn],zn,$r,Fm,Hm,fn,[0,Ss,-1,Ql],zn,-2,wm,Ss,-1,El,979,Ql,fn,vm];ro.prototype.g=Kd(mp);var _5=Ps(ro,mp),P5=class extends Ot{constructor(e){super(e)}},hp=class extends Ot{constructor(e){super(e)}g(){return bs(this,P5,1)}},bp=[0,fn,[0,an,Sn,hi,-1]],Ud=Ps(hp,bp),q5=class extends Ot{constructor(e){super(e)}},$5=class extends Ot{constructor(e){super(e)}},Xa=class extends Ot{constructor(e){super(e)}h(){return Oe(this,q5,2)}g(){return bs(this,$5,5)}},pp=Ps(class extends Ot{constructor(e){super(e)}},[0,zn,zd,bu,[0,qo,[0,an,-3],[0,Sn,-3],[0,an,-1,[0,fn,[0,an,-2]]],fn,[0,Sn,-1,hi,Sn]],hi,-1,zs,fn,[0,an,Sn],zn,zs]),Ap=class extends Ot{constructor(e){super(e)}},el=Ps(class extends Ot{constructor(e){super(e)}},[0,fn,[0,Sn,-4]]),Zp=class extends Ot{constructor(e){super(e)}},Fc=Ps(class extends Ot{constructor(e){super(e)}},[0,fn,[0,Sn,-4]]),t9=class extends Ot{constructor(e){super(e)}},e9=[0,an,-1,bu,qo],yp=class extends Ot{constructor(){super()}};yp.prototype.g=Kd([0,Sn,-4,zs]);var i9=class extends Ot{constructor(e){super(e)}},n9=Ps(class extends Ot{constructor(e){super(e)}},[0,fn,[0,1,an,hi,bp],zs]),xm=class extends Ot{constructor(e){super(e)}},o9=class extends Ot{constructor(e){super(e)}qa(){const e=M2(this);return e==null?Vr():e}},s9=class extends Ot{constructor(e){super(e)}},fp=[1,2],r9=Ps(class extends Ot{constructor(e){super(e)}},[0,fn,[0,fp,Bi,[0,bu],Bi,[0,gp],an,hi],zs]),pu=class extends Ot{constructor(e){super(e)}},Gp=[0,hi,an,Sn,zn,-1],Ym=class extends Ot{constructor(e){super(e)}},l9=[0,en,-1],Nm=class extends Ot{constructor(e){super(e)}},mg=[1,2,3,4,5],rd=class extends Ot{constructor(e){super(e)}g(){return M2(this)!=null}h(){return Ir(Js(this,2))!=null}},Di=class extends Ot{constructor(e){super(e)}g(){var e;return(e=F2(Js(this,2)))!=null?e:!1}},Vp=[0,gp,hi,[0,an,zs,-1],[0,K5,zs]],pn=[0,Vp,en,[0,mg,Bi,up,Bi,ap,Bi,dp,Bi,Cp,Bi,Ip],qo],Ed=class extends Ot{constructor(e){super(e)}},Au=[0,pn,Sn,-1,an],c9=Lo(502141897,Ed);Ti[502141897]=Au,vn[502141897]=1;var Wp=[0,Vp];Ti[512499200]=Wp;var Bp=[0,Wp];Ti[515723506]=Bp;var g9=Ps(class extends Ot{constructor(e){super(e)}},[0,[0,qo,-1,z5,Q5],e9]),Xp=[0,pn];Ti[508981768]=Xp;var Rp=class extends Ot{constructor(e){super(e)}},vp=class extends Ot{constructor(e){super(e)}},Zu=[0,pn,Sn,Xp,en],Sp=[0,pn,Au,Zu,Sn,Bp];Ti[508968149]=Zu;var d9=Lo(508968150,vp);Ti[508968150]=Sp,vn[508968150]=1,vn[508968149]=1;var wp=class extends Ot{constructor(e){super(e)}},a9=Lo(513916220,wp);Ti[513916220]=[0,pn,Sp,an],vn[513916220]=1;var Tr=class extends Ot{constructor(e){super(e)}h(){return Oe(this,pu,2)}g(){Hi(this,2)}},Fp=[0,pn,Gp];Ti[478825465]=Fp,vn[478825465]=1;var Hp=[0,pn];Ti[478825422]=Hp;var I9=class extends Ot{constructor(e){super(e)}},xp=class extends Ot{constructor(e){super(e)}},yu=class extends Ot{constructor(e){super(e)}},fu=class extends Ot{constructor(e){super(e)}},Yp=class extends Ot{constructor(e){super(e)}},Np=[0,pn,Hp,Fp,-1],Mp=[0,pn,Sn,an],Gu=[0,pn,Sn],Lp=[0,pn,Mp,Gu,Sn],C9=[0,pn,Lp,Np];Ti[463370452]=Np,Ti[464864288]=Mp,Ti[474472470]=Gu;var u9=Lo(462713202,fu);Ti[462713202]=Lp;var m9=Lo(479097054,Yp);Ti[479097054]=C9,vn[479097054]=1,vn[463370452]=1,vn[464864288]=1,vn[462713202]=1,vn[474472470]=1;var h9=class extends Ot{constructor(e){super(e)}},Jp=class extends Ot{constructor(e){super(e)}},Tp=class extends Ot{constructor(e){super(e)}},kp=class extends Ot{constructor(){super()}},HI=[0,pn,Sn,-1,an],xI=[0,pn,Sn,en];kp.prototype.g=Kd([0,pn,Gu,[0,pn],Au,Zu,HI,xI]),Ti[514774813]=HI,Ti[518928384]=xI;var zp=class extends Ot{constructor(e){super(e)}},b9=Lo(456383383,zp);Ti[456383383]=[0,pn,Gp],vn[456383383]=1;var Kp=class extends Ot{constructor(e){super(e)}},p9=Lo(476348187,Kp);Ti[476348187]=[0,pn,l9],vn[476348187]=1;var Up=class extends Ot{constructor(e){super(e)}},Mm=class extends Ot{constructor(e){super(e)}},Ep=[0,qo,-1],A9=Lo(458105876,class extends Ot{constructor(e){super(e)}g(){var e=this.u;const t=gi(e),i=2&t;return e=function(n,o,l){var I=Mm;const m=2&o;let y=!1;if(l==null){if(m)return bm();l=[]}else if(l.constructor===Wo){if((2&l.L)==0||m)return l;l=l.Z()}else Array.isArray(l)?y=!!(2&Cn(l)):l=[];if(m){if(!l.length)return bm();y||(y=!0,pl(l))}else y&&(y=!1,l=T2(l));return y||(64&Cn(l)?jg(l,32):32&o&&KC(l,32)),Qi(n,o,2,I=new Wo(l,I,y5,void 0),!1),I}(e,t,ts(e,t,2)),!i&&Mm&&(e.ta=!0),e}});Ti[458105876]=[0,Ep,k5,[!0,zs,[0,hi,-1,zn]]],vn[458105876]=1;var Vu=class extends Ot{constructor(e){super(e)}},Qp=Lo(458105758,Vu);Ti[458105758]=[0,pn,hi,Ep],vn[458105758]=1;var Dp=class extends Ot{constructor(e){super(e)}},Z9=Lo(443442058,Dp);Ti[443442058]=[0,pn,hi,an,Sn,zn,-1],vn[443442058]=1,vn[514774813]=1;var Op=class extends Ot{constructor(e){super(e)}},y9=Lo(516587230,Op);function YI(e,t){return t=t?t.clone():new pu,e.displayNamesLocale!==void 0?Hi(t,1,Zl(e.displayNamesLocale)):e.displayNamesLocale===void 0&&Hi(t,1),e.maxResults!==void 0?Po(t,2,e.maxResults):"maxResults"in e&&Hi(t,2),e.scoreThreshold!==void 0?jt(t,3,e.scoreThreshold):"scoreThreshold"in e&&Hi(t,3),e.categoryAllowlist!==void 0?nd(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&Hi(t,4),e.categoryDenylist!==void 0?nd(t,5,e.categoryDenylist):"categoryDenylist"in e&&Hi(t,5),t}function Wu(e,t=-1,i=""){return{categories:e.map(n=>{var o,l,I,m;return{index:(o=Ho(Go(n,1),0))!=null?o:-1,score:(l=bn(n,2))!=null?l:0,categoryName:(I=_o(n,3))!=null?I:"",displayName:(m=_o(n,4))!=null?m:""}}),headIndex:t,headName:i}}function jp(e){var I,m,y,H,L,K,nt,dt,P,rt,Xt,Wt,xt;var t=qr(e,3,_s),i=qr(e,2,Al),n=qr(e,1,Ir),o=qr(e,9,Ir);const l={categories:[],keypoints:[]};for(let _=0;_<t.length;_++)l.categories.push({score:t[_],index:(I=i[_])!=null?I:-1,categoryName:(m=n[_])!=null?m:"",displayName:(y=o[_])!=null?y:""});if((t=(H=Oe(e,Xa,4))==null?void 0:H.h())&&(l.boundingBox={originX:(L=Go(t,1))!=null?L:0,originY:(K=Go(t,2))!=null?K:0,width:(nt=Go(t,3))!=null?nt:0,height:(dt=Go(t,4))!=null?dt:0,angle:0}),(P=Oe(e,Xa,4))==null?void 0:P.g().length)for(const _ of Oe(e,Xa,4).g())l.keypoints.push({x:(rt=Ig(_,1))!=null?rt:0,y:(Xt=Ig(_,2))!=null?Xt:0,score:(Wt=Ig(_,4))!=null?Wt:0,label:(xt=Ir(Js(_,3)))!=null?xt:""});return l}function Qd(e){var i,n,o,l;const t=[];for(const I of bs(e,Zp,1))t.push({x:(i=bn(I,1))!=null?i:0,y:(n=bn(I,2))!=null?n:0,z:(o=bn(I,3))!=null?o:0,visibility:(l=bn(I,4))!=null?l:0});return t}function Dl(e){var i,n,o,l;const t=[];for(const I of bs(e,Ap,1))t.push({x:(i=bn(I,1))!=null?i:0,y:(n=bn(I,2))!=null?n:0,z:(o=bn(I,3))!=null?o:0,visibility:(l=bn(I,4))!=null?l:0});return t}function Lm(e){return Array.from(e,t=>t>127?t-256:t)}function Jm(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let i=0,n=0,o=0;for(let l=0;l<e.length;l++)i+=e[l]*t[l],n+=e[l]*e[l],o+=t[l]*t[l];if(n<=0||o<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return i/Math.sqrt(n*o)}let eg;Ti[516587230]=[0,pn,HI,xI,Sn],vn[516587230]=1,vn[518928384]=1;const f9=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function _p(){if(eg===void 0)try{await WebAssembly.instantiate(f9),eg=!0}catch{eg=!1}return eg}async function wl(e,t=""){const i=await _p()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${i}.js`,wasmBinaryPath:`${t}/${e}_${i}.wasm`}}var rr=class{};function Pp(){var e=navigator;return typeof OffscreenCanvas!="undefined"&&(!function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")}(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function Tm(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise((i,n)=>{t.addEventListener("load",()=>{i()},!1),t.addEventListener("error",o=>{n(o)},!1),document.body.appendChild(t)})}importScripts(e.toString())}function qp(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function Pt(e,t,i){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),i(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function km(e,t,i){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(i?e.i._bindTextureToStream(i):e.i._bindTextureToCanvas(),!(i=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1);const[n,o]=qp(t);return!e.l||n===e.i.canvas.width&&o===e.i.canvas.height||(e.i.canvas.width=n,e.i.canvas.height=o),[n,o]}function zm(e,t,i){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const n=new Uint32Array(t.length);for(let o=0;o<t.length;o++)n[o]=e.i.stringToNewUTF8(t[o]);t=e.i._malloc(4*n.length),e.i.HEAPU32.set(n,t>>2),i(t);for(const o of n)e.i._free(o);e.i._free(t)}function ko(e,t,i){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=i}function Ws(e,t,i){let n=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(o,l,I)=>{l?(i(n,I),n=[]):n.push(o)}}rr.forVisionTasks=function(e){return wl("vision",e)},rr.forTextTasks=function(e){return wl("text",e)},rr.forGenAiExperimentalTasks=function(e){return wl("genai_experimental",e)},rr.forGenAiTasks=function(e){return wl("genai",e)},rr.forAudioTasks=function(e){return wl("audio",e)},rr.isSimdSupported=function(){return _p()};async function G9(e,t,i,n){return e=await(async(o,l,I,m,y)=>{if(l&&await Tm(l),!self.ModuleFactory||I&&(await Tm(I),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&y&&((l=self.Module).locateFile=y.locateFile,y.mainScriptUrlOrBlob&&(l.mainScriptUrlOrBlob=y.mainScriptUrlOrBlob)),y=await self.ModuleFactory(self.Module||y),self.ModuleFactory=self.Module=void 0,new o(y,m)})(e,i.wasmLoaderPath,i.assetLoaderPath,t,{locateFile:o=>o.endsWith(".wasm")?i.wasmBinaryPath.toString():i.assetBinaryPath&&o.endsWith(".data")?i.assetBinaryPath.toString():o}),await e.o(n),e}function Ra(e,t){const i=Oe(e.baseOptions,rd,1)||new rd;typeof t=="string"?(Hi(i,2,Zl(t)),Hi(i,1)):t instanceof Uint8Array&&(Hi(i,1,QC(t,!1,!1)),Hi(i,2)),se(e.baseOptions,0,1,i)}function Km(e){try{const t=e.G.length;if(t===1)throw Error(e.G[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.G.map(i=>i.message).join(", "))}finally{e.G=[]}}function Kt(e,t){e.B=Math.max(e.B,t)}function Dd(e,t){e.A=new On,ho(e.A,"PassThroughCalculator"),xi(e.A,"free_memory"),Le(e.A,"free_memory_unused_out"),ki(t,"free_memory"),bo(t,e.A)}function gl(e,t){xi(e.A,t),Le(e.A,t+"_unused_out")}function Od(e){e.g.addBoolToStream(!0,"free_memory",e.B)}var hg=class{constructor(e){this.g=e,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){var i,n,o,l,I,m;if(t){const y=e.baseOptions||{};if(((i=e.baseOptions)==null?void 0:i.modelAssetBuffer)&&((n=e.baseOptions)==null?void 0:n.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(((o=Oe(this.baseOptions,rd,1))==null?void 0:o.g())||((l=Oe(this.baseOptions,rd,1))==null?void 0:l.h())||((I=e.baseOptions)==null?void 0:I.modelAssetBuffer)||((m=e.baseOptions)==null?void 0:m.modelAssetPath)))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(H,L){let K=Oe(H.baseOptions,Nm,3);if(!K){var nt=K=new Nm,dt=new Sm;Kl(nt,4,mg,dt)}"delegate"in L&&(L.delegate==="GPU"?(L=K,nt=new O5,Kl(L,2,mg,nt)):(L=K,nt=new Sm,Kl(L,4,mg,nt))),se(H.baseOptions,0,3,K)}(this,y),y.modelAssetPath)return fetch(y.modelAssetPath.toString()).then(H=>{if(H.ok)return H.arrayBuffer();throw Error(`Failed to fetch model: ${y.modelAssetPath} (${H.status})`)}).then(H=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(H),!0,!1,!1),Ra(this,"/model.dat"),this.m(),this.I()});if(y.modelAssetBuffer instanceof Uint8Array)Ra(this,y.modelAssetBuffer);else if(y.modelAssetBuffer)return async function(H){const L=[];for(var K=0;;){const{done:nt,value:dt}=await H.read();if(nt)break;L.push(dt),K+=dt.length}if(L.length===0)return new Uint8Array(0);if(L.length===1)return L[0];H=new Uint8Array(K),K=0;for(const nt of L)H.set(nt,K),K+=nt.length;return H}(y.modelAssetBuffer).then(H=>{Ra(this,H),this.m(),this.I()})}return this.m(),this.I(),Promise.resolve()}I(){}fa(){let e;if(this.g.fa(t=>{e=_5(t)}),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener((i,n)=>{this.G.push(Error(n))}),this.g.Ma(),this.g.setGraph(e,t),this.A=void 0,Km(this)}finishProcessing(){this.g.finishProcessing(),Km(this)}close(){this.A=void 0,this.g.closeGraph()}};function ms(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}hg.prototype.close=hg.prototype.close,function(e,t){e=e.split(".");var i,n=Gr;for((e[0]in n)||n.execScript===void 0||n.execScript("var "+e[0]);e.length&&(i=e.shift());)e.length||t===void 0?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=t}("TaskRunner",hg);class V9{constructor(t,i,n,o){this.g=t,this.h=i,this.m=n,this.l=o}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function Um(e,t,i){const n=e.g;if(i=ms(n.createShader(i),"Failed to create WebGL shader"),n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${n.getShaderInfoLog(i)}`);return n.attachShader(e.h,i),i}function Em(e,t){const i=e.g,n=ms(i.createVertexArray(),"Failed to create vertex array");i.bindVertexArray(n);const o=ms(i.createBuffer(),"Failed to create buffer");i.bindBuffer(i.ARRAY_BUFFER,o),i.enableVertexAttribArray(e.P),i.vertexAttribPointer(e.P,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),i.STATIC_DRAW);const l=ms(i.createBuffer(),"Failed to create buffer");return i.bindBuffer(i.ARRAY_BUFFER,l),i.enableVertexAttribArray(e.I),i.vertexAttribPointer(e.I,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindVertexArray(null),new V9(i,n,o,l)}function Bu(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function Xu(e,t,i,n){return Bu(e,t),e.h||(e.m(),e.C()),i?(e.s||(e.s=Em(e,!0)),i=e.s):(e.v||(e.v=Em(e,!1)),i=e.v),t.useProgram(e.h),i.bind(),e.l(),e=n(),i.g.bindVertexArray(null),e}function jd(e,t,i){return Bu(e,t),e=ms(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i!=null?i:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i!=null?i:t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function _d(e,t,i){Bu(e,t),e.A||(e.A=ms(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0)}function Ru(e){var t;(t=e.g)==null||t.bindFramebuffer(e.g.FRAMEBUFFER,null)}var vu=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=ms(e.createProgram(),"Failed to create WebGL program"),this.ca=Um(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.ba=Um(this,this.G(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.P=e.getAttribLocation(this.h,"aVertex"),this.I=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.ca),e.deleteShader(this.ba)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};function as(e,t){switch(t){case 0:return e.g.find(i=>i instanceof Uint8Array);case 1:return e.g.find(i=>i instanceof Float32Array);case 2:return e.g.find(i=>typeof WebGLTexture!="undefined"&&i instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function NI(e){var t=as(e,1);if(!t){if(t=as(e,0))t=new Float32Array(t).map(n=>n/255);else{t=new Float32Array(e.width*e.height);const n=dl(e);var i=Su(e);if(_d(i,n,$p(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in self.document){i=new Float32Array(e.width*e.height*4),n.readPixels(0,0,e.width,e.height,n.RGBA,n.FLOAT,i);for(let o=0,l=0;o<t.length;++o,l+=4)t[o]=i[l]}else n.readPixels(0,0,e.width,e.height,n.RED,n.FLOAT,t)}e.g.push(t)}return t}function $p(e){let t=as(e,2);if(!t){const i=dl(e);t=eA(e);const n=NI(e),o=tA(e);i.texImage2D(i.TEXTURE_2D,0,o,e.width,e.height,0,i.RED,i.FLOAT,n),MI(e)}return t}function dl(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=ms(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function tA(e){if(e=dl(e),!ig)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))ig=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");ig=e.R16F}return ig}function Su(e){return e.l||(e.l=new vu),e.l}function eA(e){const t=dl(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let i=as(e,2);return i||(i=jd(Su(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(i),e.j=!0),t.bindTexture(t.TEXTURE_2D,i),i}function MI(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var ig,xn=class{constructor(e,t,i,n,o,l,I){this.g=e,this.m=t,this.j=i,this.canvas=n,this.l=o,this.width=l,this.height=I,this.j&&--Qm===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Ha(){return!!as(this,0)}la(){return!!as(this,1)}R(){return!!as(this,2)}ka(){return(t=as(e=this,0))||(t=NI(e),t=new Uint8Array(t.map(i=>255*i)),e.g.push(t)),t;var e,t}ja(){return NI(this)}M(){return $p(this)}clone(){const e=[];for(const t of this.g){let i;if(t instanceof Uint8Array)i=new Uint8Array(t);else if(t instanceof Float32Array)i=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const n=dl(this),o=Su(this);n.activeTexture(n.TEXTURE1),i=jd(o,n,this.m?n.LINEAR:n.NEAREST),n.bindTexture(n.TEXTURE_2D,i);const l=tA(this);n.texImage2D(n.TEXTURE_2D,0,l,this.width,this.height,0,n.RED,n.FLOAT,null),n.bindTexture(n.TEXTURE_2D,null),_d(o,n,i),Xu(o,n,!1,()=>{eA(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),MI(this)}),Ru(o),MI(this)}}e.push(i)}return new xn(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&dl(this).deleteTexture(as(this,2)),Qm=-1}};xn.prototype.close=xn.prototype.close,xn.prototype.clone=xn.prototype.clone,xn.prototype.getAsWebGLTexture=xn.prototype.M,xn.prototype.getAsFloat32Array=xn.prototype.ja,xn.prototype.getAsUint8Array=xn.prototype.ka,xn.prototype.hasWebGLTexture=xn.prototype.R,xn.prototype.hasFloat32Array=xn.prototype.la,xn.prototype.hasUint8Array=xn.prototype.Ha;var Qm=250;function Qo(e,t){switch(t){case 0:return e.g.find(i=>i instanceof ImageData);case 1:return e.g.find(i=>typeof ImageBitmap!="undefined"&&i instanceof ImageBitmap);case 2:return e.g.find(i=>typeof WebGLTexture!="undefined"&&i instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function iA(e){var t=Qo(e,0);if(!t){t=al(e);const i=Pd(e),n=new Uint8Array(e.width*e.height*4);_d(i,t,bg(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,n),Ru(i),t=new ImageData(new Uint8ClampedArray(n.buffer),e.width,e.height),e.g.push(t)}return t}function bg(e){let t=Qo(e,2);if(!t){const i=al(e);t=pg(e);const n=Qo(e,1)||iA(e);i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),Nl(e)}return t}function al(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return e.h||(e.h=ms(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Pd(e){return e.l||(e.l=new vu),e.l}function pg(e){const t=al(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let i=Qo(e,2);return i||(i=jd(Pd(e),t),e.g.push(i),e.m=!0),t.bindTexture(t.TEXTURE_2D,i),i}function Nl(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function Dm(e){const t=al(e);return Xu(Pd(e),t,!0,()=>function(i,n){const o=i.canvas;if(o.width===i.width&&o.height===i.height)return n();const l=o.width,I=o.height;return o.width=i.width,o.height=i.height,i=n(),o.width=l,o.height=I,i}(e,()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))}var Yn=class{constructor(e,t,i,n,o,l,I){this.g=e,this.j=t,this.m=i,this.canvas=n,this.l=o,this.width=l,this.height=I,(this.j||this.m)&&--Om===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ga(){return!!Qo(this,0)}ma(){return!!Qo(this,1)}R(){return!!Qo(this,2)}Ea(){return iA(this)}Da(){var e=Qo(this,1);return e||(bg(this),pg(this),e=Dm(this),Nl(this),this.g.push(e),this.j=!0),e}M(){return bg(this)}clone(){const e=[];for(const t of this.g){let i;if(t instanceof ImageData)i=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){const n=al(this),o=Pd(this);n.activeTexture(n.TEXTURE1),i=jd(o,n),n.bindTexture(n.TEXTURE_2D,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindTexture(n.TEXTURE_2D,null),_d(o,n,i),Xu(o,n,!1,()=>{pg(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),Nl(this)}),Ru(o),Nl(this)}else{if(!(t instanceof ImageBitmap))throw Error(`Type is not supported: ${t}`);bg(this),pg(this),i=Dm(this),Nl(this)}e.push(i)}return new Yn(e,this.ma(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Qo(this,1).close(),this.m&&al(this).deleteTexture(Qo(this,2)),Om=-1}};Yn.prototype.close=Yn.prototype.close,Yn.prototype.clone=Yn.prototype.clone,Yn.prototype.getAsWebGLTexture=Yn.prototype.M,Yn.prototype.getAsImageBitmap=Yn.prototype.Da,Yn.prototype.getAsImageData=Yn.prototype.Ea,Yn.prototype.hasWebGLTexture=Yn.prototype.R,Yn.prototype.hasImageBitmap=Yn.prototype.ma,Yn.prototype.hasImageData=Yn.prototype.Ga;var Om=250;function Jo(...e){return e.map(([t,i])=>({start:t,end:i}))}const W9=function(e){return class extends e{Ma(){this.i._registerModelResourcesGraphService()}}}((jm=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:Pp()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const i=e.length,n=this.i._malloc(i);this.i.HEAPU8.set(e,n),t?this.i._changeBinaryGraph(i,n):this.i._changeTextGraph(i,n),this.i._free(n)}configureAudio(e,t,i,n,o){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),Pt(this,n||"input_audio",l=>{Pt(this,o=o||"audio_header",I=>{this.i._configureAudio(l,I,e,t,i)})})}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}fa(e){ko(this,"__graph_config__",t=>{e(t)}),Pt(this,"__graph_config__",t=>{this.i._getGraphConfig(t,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,i){this.addAudioToStreamWithShape(e,0,0,t,i)}addAudioToStreamWithShape(e,t,i,n,o){const l=4*e.length;this.h!==l&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(l),this.h=l),this.i.HEAPF32.set(e,this.g/4),Pt(this,n,I=>{this.i._addAudioToInputStream(this.g,t,i,I,o)})}addGpuBufferToStream(e,t,i){Pt(this,t,n=>{const[o,l]=km(this,e,n);this.i._addBoundTextureToStream(n,o,l,i)})}addBoolToStream(e,t,i){Pt(this,t,n=>{this.i._addBoolToInputStream(e,n,i)})}addDoubleToStream(e,t,i){Pt(this,t,n=>{this.i._addDoubleToInputStream(e,n,i)})}addFloatToStream(e,t,i){Pt(this,t,n=>{this.i._addFloatToInputStream(e,n,i)})}addIntToStream(e,t,i){Pt(this,t,n=>{this.i._addIntToInputStream(e,n,i)})}addUintToStream(e,t,i){Pt(this,t,n=>{this.i._addUintToInputStream(e,n,i)})}addStringToStream(e,t,i){Pt(this,t,n=>{Pt(this,e,o=>{this.i._addStringToInputStream(o,n,i)})})}addStringRecordToStream(e,t,i){Pt(this,t,n=>{zm(this,Object.keys(e),o=>{zm(this,Object.values(e),l=>{this.i._addFlatHashMapToInputStream(o,l,Object.keys(e).length,n,i)})})})}addProtoToStream(e,t,i,n){Pt(this,i,o=>{Pt(this,t,l=>{const I=this.i._malloc(e.length);this.i.HEAPU8.set(e,I),this.i._addProtoToInputStream(I,e.length,l,o,n),this.i._free(I)})})}addEmptyPacketToStream(e,t){Pt(this,e,i=>{this.i._addEmptyPacketToInputStream(i,t)})}addBoolVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateBoolVector(e.length);if(!o)throw Error("Unable to allocate new bool vector on heap.");for(const l of e)this.i._addBoolVectorEntry(o,l);this.i._addBoolVectorToInputStream(o,n,i)})}addDoubleVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateDoubleVector(e.length);if(!o)throw Error("Unable to allocate new double vector on heap.");for(const l of e)this.i._addDoubleVectorEntry(o,l);this.i._addDoubleVectorToInputStream(o,n,i)})}addFloatVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateFloatVector(e.length);if(!o)throw Error("Unable to allocate new float vector on heap.");for(const l of e)this.i._addFloatVectorEntry(o,l);this.i._addFloatVectorToInputStream(o,n,i)})}addIntVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateIntVector(e.length);if(!o)throw Error("Unable to allocate new int vector on heap.");for(const l of e)this.i._addIntVectorEntry(o,l);this.i._addIntVectorToInputStream(o,n,i)})}addUintVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateUintVector(e.length);if(!o)throw Error("Unable to allocate new unsigned int vector on heap.");for(const l of e)this.i._addUintVectorEntry(o,l);this.i._addUintVectorToInputStream(o,n,i)})}addStringVectorToStream(e,t,i){Pt(this,t,n=>{const o=this.i._allocateStringVector(e.length);if(!o)throw Error("Unable to allocate new string vector on heap.");for(const l of e)Pt(this,l,I=>{this.i._addStringVectorEntry(o,I)});this.i._addStringVectorToInputStream(o,n,i)})}addBoolToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addBoolToInputSidePacket(e,i)})}addDoubleToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addDoubleToInputSidePacket(e,i)})}addFloatToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addFloatToInputSidePacket(e,i)})}addIntToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addIntToInputSidePacket(e,i)})}addUintToInputSidePacket(e,t){Pt(this,t,i=>{this.i._addUintToInputSidePacket(e,i)})}addStringToInputSidePacket(e,t){Pt(this,t,i=>{Pt(this,e,n=>{this.i._addStringToInputSidePacket(n,i)})})}addProtoToInputSidePacket(e,t,i){Pt(this,i,n=>{Pt(this,t,o=>{const l=this.i._malloc(e.length);this.i.HEAPU8.set(e,l),this.i._addProtoToInputSidePacket(l,e.length,o,n),this.i._free(l)})})}addBoolVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateBoolVector(e.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const o of e)this.i._addBoolVectorEntry(n,o);this.i._addBoolVectorToInputSidePacket(n,i)})}addDoubleVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateDoubleVector(e.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const o of e)this.i._addDoubleVectorEntry(n,o);this.i._addDoubleVectorToInputSidePacket(n,i)})}addFloatVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateFloatVector(e.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const o of e)this.i._addFloatVectorEntry(n,o);this.i._addFloatVectorToInputSidePacket(n,i)})}addIntVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateIntVector(e.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const o of e)this.i._addIntVectorEntry(n,o);this.i._addIntVectorToInputSidePacket(n,i)})}addUintVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateUintVector(e.length);if(!n)throw Error("Unable to allocate new unsigned int vector on heap.");for(const o of e)this.i._addUintVectorEntry(n,o);this.i._addUintVectorToInputSidePacket(n,i)})}addStringVectorToInputSidePacket(e,t){Pt(this,t,i=>{const n=this.i._allocateStringVector(e.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const o of e)Pt(this,o,l=>{this.i._addStringVectorEntry(n,l)});this.i._addStringVectorToInputSidePacket(n,i)})}attachBoolListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachBoolListener(i)})}attachBoolVectorListener(e,t){Ws(this,e,t),Pt(this,e,i=>{this.i._attachBoolVectorListener(i)})}attachIntListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachIntListener(i)})}attachIntVectorListener(e,t){Ws(this,e,t),Pt(this,e,i=>{this.i._attachIntVectorListener(i)})}attachUintListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachUintListener(i)})}attachUintVectorListener(e,t){Ws(this,e,t),Pt(this,e,i=>{this.i._attachUintVectorListener(i)})}attachDoubleListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachDoubleListener(i)})}attachDoubleVectorListener(e,t){Ws(this,e,t),Pt(this,e,i=>{this.i._attachDoubleVectorListener(i)})}attachFloatListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachFloatListener(i)})}attachFloatVectorListener(e,t){Ws(this,e,t),Pt(this,e,i=>{this.i._attachFloatVectorListener(i)})}attachStringListener(e,t){ko(this,e,t),Pt(this,e,i=>{this.i._attachStringListener(i)})}attachStringVectorListener(e,t){Ws(this,e,t),Pt(this,e,i=>{this.i._attachStringVectorListener(i)})}attachProtoListener(e,t,i){ko(this,e,t),Pt(this,e,n=>{this.i._attachProtoListener(n,i||!1)})}attachProtoVectorListener(e,t,i){Ws(this,e,t),Pt(this,e,n=>{this.i._attachProtoVectorListener(n,i||!1)})}attachAudioListener(e,t,i){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),ko(this,e,(n,o)=>{n=new Float32Array(n.buffer,n.byteOffset,n.length/4),t(n,o)}),Pt(this,e,n=>{this.i._attachAudioListener(n,i||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends jm{get ha(){return this.i}sa(e,t,i){Pt(this,t,n=>{const[o,l]=km(this,e,n);this.ha._addBoundTextureAsImageToStream(n,o,l,i)})}X(e,t){ko(this,e,t),Pt(this,e,i=>{this.ha._attachImageListener(i)})}ea(e,t){Ws(this,e,t),Pt(this,e,i=>{this.ha._attachImageVectorListener(i)})}}));var jm,Xo=class extends W9{};async function Ne(e,t,i){var n;return async function(o,l,I,m){return G9(o,l,I,m)}(e,(n=i.canvas)!=null?n:Pp()?void 0:document.createElement("canvas"),t,i)}function nA(e,t,i,n){if(e.W){const l=new yp;if(i!=null&&i.regionOfInterest){if(!e.ra)throw Error("This task doesn't support region-of-interest.");var o=i.regionOfInterest;if(o.left>=o.right||o.top>=o.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(o.left<0||o.top<0||o.right>1||o.bottom>1)throw Error("Expected RectF values to be in [0,1].");jt(l,1,(o.left+o.right)/2),jt(l,2,(o.top+o.bottom)/2),jt(l,4,o.right-o.left),jt(l,3,o.bottom-o.top)}else jt(l,1,.5),jt(l,2,.5),jt(l,4,1),jt(l,3,1);if(i!=null&&i.rotationDegrees){if((i==null?void 0:i.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90\xB0.");if(jt(l,5,-Math.PI*i.rotationDegrees/180),(i==null?void 0:i.rotationDegrees)%180!=0){const[I,m]=qp(t);i=bn(l,3)*m/I,o=bn(l,4)*I/m,jt(l,4,i),jt(l,3,o)}}e.g.addProtoToStream(l.g(),"mediapipe.NormalizedRect",e.W,n)}e.g.sa(t,e.ca,n!=null?n:performance.now()),e.finishProcessing()}function Ro(e,t,i){var n;if((n=e.baseOptions)!=null&&n.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");nA(e,t,i,e.B+1)}function es(e,t,i,n){var o;if(!((o=e.baseOptions)!=null&&o.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");nA(e,t,i,n)}function Il(e,t,i,n){var o=t.data;const l=t.width,I=l*(t=t.height);if((o instanceof Uint8Array||o instanceof Float32Array)&&o.length!==I)throw Error("Unsupported channel count: "+o.length/I);return e=new xn([o],i,!1,e.g.i.canvas,e.P,l,t),n?e.clone():e}var io=class extends hg{constructor(e,t,i,n){super(e),this.g=e,this.ca=t,this.W=i,this.ra=n,this.P=new vu}l(e,t=!0){if("runningMode"in e&&ac(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.P.close(),super.close()}};io.prototype.close=io.prototype.close;var po=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},se(e=this.h=new Ed,0,1,t=new Di),jt(this.h,2,.5),jt(this.h,3,.3)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i;return"minDetectionConfidence"in e&&jt(this.h,2,(t=e.minDetectionConfidence)!=null?t:.5),"minSuppressionThreshold"in e&&jt(this.h,3,(i=e.minSuppressionThreshold)!=null?i:.3),this.l(e)}D(e,t){return this.j={detections:[]},Ro(this,e,t),this.j}F(e,t,i){return this.j={detections:[]},es(this,e,i,t),this.j}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect_in"),Pe(e,"detections");const t=new uo;Mo(t,c9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect_in"),Le(i,"DETECTIONS:detections"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("detections",(n,o)=>{for(const l of n)n=pp(l),this.j.detections.push(jp(n));Kt(this,o)}),this.g.attachEmptyPacketListener("detections",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};po.prototype.detectForVideo=po.prototype.F,po.prototype.detect=po.prototype.D,po.prototype.setOptions=po.prototype.o,po.createFromModelPath=async function(e,t){return Ne(po,e,{baseOptions:{modelAssetPath:t}})},po.createFromModelBuffer=function(e,t){return Ne(po,e,{baseOptions:{modelAssetBuffer:t}})},po.createFromOptions=function(e,t){return Ne(po,e,t)};var wu=Jo([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Fu=Jo([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),Hu=Jo([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),oA=Jo([474,475],[475,476],[476,477],[477,474]),xu=Jo([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),Yu=Jo([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),sA=Jo([469,470],[470,471],[471,472],[472,469]),Nu=Jo([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),rA=[...wu,...Fu,...Hu,...xu,...Yu,...Nu],lA=Jo([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function _m(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var cn=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,se(e=this.h=new vp,0,1,t=new Di),this.v=new Rp,se(this.h,0,3,this.v),this.s=new Ed,se(this.h,0,2,this.s),Po(this.s,4,1),jt(this.s,2,.5),jt(this.v,2,.5),jt(this.h,4,.5)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i,n,o;return"numFaces"in e&&Po(this.s,4,(t=e.numFaces)!=null?t:1),"minFaceDetectionConfidence"in e&&jt(this.s,2,(i=e.minFaceDetectionConfidence)!=null?i:.5),"minTrackingConfidence"in e&&jt(this.h,4,(n=e.minTrackingConfidence)!=null?n:.5),"minFacePresenceConfidence"in e&&jt(this.v,2,(o=e.minFacePresenceConfidence)!=null?o:.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,t){return _m(this),Ro(this,e,t),this.j}F(e,t,i){return _m(this),es(this,e,i,t),this.j}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"face_landmarks");const t=new uo;Mo(t,d9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"NORM_LANDMARKS:face_landmarks"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("face_landmarks",(n,o)=>{for(const l of n)n=Fc(l),this.j.faceLandmarks.push(Qd(n));Kt(this,o)}),this.g.attachEmptyPacketListener("face_landmarks",n=>{Kt(this,n)}),this.outputFaceBlendshapes&&(Pe(e,"blendshapes"),Le(i,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(n,o)=>{var l;if(this.outputFaceBlendshapes)for(const I of n)n=Ud(I),this.j.faceBlendshapes.push(Wu((l=n.g())!=null?l:[]));Kt(this,o)}),this.g.attachEmptyPacketListener("blendshapes",n=>{Kt(this,n)})),this.outputFacialTransformationMatrixes&&(Pe(e,"face_geometry"),Le(i,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(n,o)=>{var l,I,m;if(this.outputFacialTransformationMatrixes)for(const y of n)(n=Oe(g9(y),t9,2))&&this.j.facialTransformationMatrixes.push({rows:(l=Ho(Go(n,1),0))!=null?l:0,columns:(I=Ho(Go(n,2),0))!=null?I:0,data:(m=qr(n,3,_s).slice())!=null?m:[]});Kt(this,o)}),this.g.attachEmptyPacketListener("face_geometry",n=>{Kt(this,n)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};cn.prototype.detectForVideo=cn.prototype.F,cn.prototype.detect=cn.prototype.D,cn.prototype.setOptions=cn.prototype.o,cn.createFromModelPath=function(e,t){return Ne(cn,e,{baseOptions:{modelAssetPath:t}})},cn.createFromModelBuffer=function(e,t){return Ne(cn,e,{baseOptions:{modelAssetBuffer:t}})},cn.createFromOptions=function(e,t){return Ne(cn,e,t)},cn.FACE_LANDMARKS_LIPS=wu,cn.FACE_LANDMARKS_LEFT_EYE=Fu,cn.FACE_LANDMARKS_LEFT_EYEBROW=Hu,cn.FACE_LANDMARKS_LEFT_IRIS=oA,cn.FACE_LANDMARKS_RIGHT_EYE=xu,cn.FACE_LANDMARKS_RIGHT_EYEBROW=Yu,cn.FACE_LANDMARKS_RIGHT_IRIS=sA,cn.FACE_LANDMARKS_FACE_OVAL=Nu,cn.FACE_LANDMARKS_CONTOURS=rA,cn.FACE_LANDMARKS_TESSELATION=lA;var zo=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!0),se(e=this.j=new wp,0,1,t=new Di)}get baseOptions(){return Oe(this.j,Di,1)}set baseOptions(e){se(this.j,0,1,e)}o(e){return super.l(e)}Pa(e,t,i){const n=typeof t!="function"?t:{};if(this.h=typeof t=="function"?t:i,Ro(this,e,n!=null?n:{}),!this.h)return this.s}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"stylized_image");const t=new uo;Mo(t,a9,this.j);const i=new On;ho(i,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"STYLIZED_IMAGE:stylized_image"),i.o(t),bo(e,i),this.g.X("stylized_image",(n,o)=>{var l=!this.h,I=n.data,m=n.width;const y=m*(n=n.height);if(I instanceof Uint8Array)if(I.length===3*y){const H=new Uint8ClampedArray(4*y);for(let L=0;L<y;++L)H[4*L]=I[3*L],H[4*L+1]=I[3*L+1],H[4*L+2]=I[3*L+2],H[4*L+3]=255;I=new ImageData(H,m,n)}else{if(I.length!==4*y)throw Error("Unsupported channel count: "+I.length/y);I=new ImageData(new Uint8ClampedArray(I.buffer,I.byteOffset,I.length),m,n)}else if(!(I instanceof WebGLTexture))throw Error(`Unsupported format: ${I.constructor.name}`);m=new Yn([I],!1,!1,this.g.i.canvas,this.P,m,n),this.s=l=l?m.clone():m,this.h&&this.h(l),Kt(this,o)}),this.g.attachEmptyPacketListener("stylized_image",n=>{this.s=null,this.h&&this.h(null),Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};zo.prototype.stylize=zo.prototype.Pa,zo.prototype.setOptions=zo.prototype.o,zo.createFromModelPath=function(e,t){return Ne(zo,e,{baseOptions:{modelAssetPath:t}})},zo.createFromModelBuffer=function(e,t){return Ne(zo,e,{baseOptions:{modelAssetBuffer:t}})},zo.createFromOptions=function(e,t){return Ne(zo,e,t)};var Mu=Jo([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function Pm(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function qm(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function $m(e,t=!0){var o,l,I;const i=[];for(const m of e){var n=Ud(m);e=[];for(const y of n.g())n=t&&Go(y,1)!=null?Ho(Go(y,1),0):-1,e.push({score:(o=bn(y,2))!=null?o:0,index:n,categoryName:(l=_o(y,3))!=null?l:"",displayName:(I=_o(y,4))!=null?I:""});i.push(e)}return i}var lo=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],se(e=this.j=new Yp,0,1,t=new Di),this.s=new fu,se(this.j,0,2,this.s),this.C=new yu,se(this.s,0,3,this.C),this.v=new xp,se(this.s,0,2,this.v),this.h=new I9,se(this.j,0,3,this.h),jt(this.v,2,.5),jt(this.s,4,.5),jt(this.C,2,.5)}get baseOptions(){return Oe(this.j,Di,1)}set baseOptions(e){se(this.j,0,1,e)}o(e){var o,l,I,m,y,H,L,K;if(Po(this.v,3,(o=e.numHands)!=null?o:1),"minHandDetectionConfidence"in e&&jt(this.v,2,(l=e.minHandDetectionConfidence)!=null?l:.5),"minTrackingConfidence"in e&&jt(this.s,4,(I=e.minTrackingConfidence)!=null?I:.5),"minHandPresenceConfidence"in e&&jt(this.C,2,(m=e.minHandPresenceConfidence)!=null?m:.5),e.cannedGesturesClassifierOptions){var t=new Tr,i=t,n=YI(e.cannedGesturesClassifierOptions,(y=Oe(this.h,Tr,3))==null?void 0:y.h());se(i,0,2,n),se(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&((H=Oe(this.h,Tr,3))==null||H.g());return e.customGesturesClassifierOptions?(se(i=t=new Tr,0,2,n=YI(e.customGesturesClassifierOptions,(L=Oe(this.h,Tr,4))==null?void 0:L.h())),se(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&((K=Oe(this.h,Tr,4))==null||K.g()),this.l(e)}Ka(e,t){return Pm(this),Ro(this,e,t),qm(this)}La(e,t,i){return Pm(this),es(this,e,i,t),qm(this)}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"hand_gestures"),Pe(e,"hand_landmarks"),Pe(e,"world_hand_landmarks"),Pe(e,"handedness");const t=new uo;Mo(t,m9,this.j);const i=new On;ho(i,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"HAND_GESTURES:hand_gestures"),Le(i,"LANDMARKS:hand_landmarks"),Le(i,"WORLD_LANDMARKS:world_hand_landmarks"),Le(i,"HANDEDNESS:handedness"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("hand_landmarks",(n,o)=>{var l,I,m,y;for(const H of n){n=Fc(H);const L=[];for(const K of bs(n,Zp,1))L.push({x:(l=bn(K,1))!=null?l:0,y:(I=bn(K,2))!=null?I:0,z:(m=bn(K,3))!=null?m:0,visibility:(y=bn(K,4))!=null?y:0});this.landmarks.push(L)}Kt(this,o)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,o)=>{var l,I,m,y;for(const H of n){n=el(H);const L=[];for(const K of bs(n,Ap,1))L.push({x:(l=bn(K,1))!=null?l:0,y:(I=bn(K,2))!=null?I:0,z:(m=bn(K,3))!=null?m:0,visibility:(y=bn(K,4))!=null?y:0});this.worldLandmarks.push(L)}Kt(this,o)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("hand_gestures",(n,o)=>{this.gestures.push(...$m(n,!1)),Kt(this,o)}),this.g.attachEmptyPacketListener("hand_gestures",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("handedness",(n,o)=>{this.handedness.push(...$m(n)),Kt(this,o)}),this.g.attachEmptyPacketListener("handedness",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function th(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}lo.prototype.recognizeForVideo=lo.prototype.La,lo.prototype.recognize=lo.prototype.Ka,lo.prototype.setOptions=lo.prototype.o,lo.createFromModelPath=function(e,t){return Ne(lo,e,{baseOptions:{modelAssetPath:t}})},lo.createFromModelBuffer=function(e,t){return Ne(lo,e,{baseOptions:{modelAssetBuffer:t}})},lo.createFromOptions=function(e,t){return Ne(lo,e,t)},lo.HAND_CONNECTIONS=Mu;var co=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],se(e=this.h=new fu,0,1,t=new Di),this.s=new yu,se(this.h,0,3,this.s),this.j=new xp,se(this.h,0,2,this.j),Po(this.j,3,1),jt(this.j,2,.5),jt(this.s,2,.5),jt(this.h,4,.5)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i,n,o;return"numHands"in e&&Po(this.j,3,(t=e.numHands)!=null?t:1),"minHandDetectionConfidence"in e&&jt(this.j,2,(i=e.minHandDetectionConfidence)!=null?i:.5),"minTrackingConfidence"in e&&jt(this.h,4,(n=e.minTrackingConfidence)!=null?n:.5),"minHandPresenceConfidence"in e&&jt(this.s,2,(o=e.minHandPresenceConfidence)!=null?o:.5),this.l(e)}D(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Ro(this,e,t),th(this)}F(e,t,i){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],es(this,e,i,t),th(this)}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"hand_landmarks"),Pe(e,"world_hand_landmarks"),Pe(e,"handedness");const t=new uo;Mo(t,u9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"LANDMARKS:hand_landmarks"),Le(i,"WORLD_LANDMARKS:world_hand_landmarks"),Le(i,"HANDEDNESS:handedness"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("hand_landmarks",(n,o)=>{for(const l of n)n=Fc(l),this.landmarks.push(Qd(n));Kt(this,o)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,o)=>{for(const l of n)n=el(l),this.worldLandmarks.push(Dl(n));Kt(this,o)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{Kt(this,n)}),this.g.attachProtoVectorListener("handedness",(n,o)=>{var y,H,L,K;var l=this.handedness,I=l.push;const m=[];for(const nt of n){n=Ud(nt);const dt=[];for(const P of n.g())dt.push({score:(y=bn(P,2))!=null?y:0,index:(H=Ho(Go(P,1),0))!=null?H:-1,categoryName:(L=_o(P,3))!=null?L:"",displayName:(K=_o(P,4))!=null?K:""});m.push(dt)}I.call(l,...m),Kt(this,o)}),this.g.attachEmptyPacketListener("handedness",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};co.prototype.detectForVideo=co.prototype.F,co.prototype.detect=co.prototype.D,co.prototype.setOptions=co.prototype.o,co.createFromModelPath=function(e,t){return Ne(co,e,{baseOptions:{modelAssetPath:t}})},co.createFromModelBuffer=function(e,t){return Ne(co,e,{baseOptions:{modelAssetBuffer:t}})},co.createFromOptions=function(e,t){return Ne(co,e,t)},co.HAND_CONNECTIONS=Mu;var cA=Jo([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function eh(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function ih(e){try{if(!e.C)return e.h;e.C(e.h)}finally{Od(e)}}function ng(e,t){e=Fc(e),t.push(Qd(e))}var Ui=class extends io{constructor(e,t){super(new Xo(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,se(e=this.j=new kp,0,1,t=new Di),this.J=new yu,se(this.j,0,2,this.J),this.ba=new h9,se(this.j,0,3,this.ba),this.s=new Ed,se(this.j,0,4,this.s),this.H=new Rp,se(this.j,0,5,this.H),this.v=new Jp,se(this.j,0,6,this.v),this.K=new Tp,se(this.j,0,7,this.K),jt(this.s,2,.5),jt(this.s,3,.3),jt(this.H,2,.5),jt(this.v,2,.5),jt(this.v,3,.3),jt(this.K,2,.5),jt(this.J,2,.5)}get baseOptions(){return Oe(this.j,Di,1)}set baseOptions(e){se(this.j,0,1,e)}o(e){var t,i,n,o,l,I,m;return"minFaceDetectionConfidence"in e&&jt(this.s,2,(t=e.minFaceDetectionConfidence)!=null?t:.5),"minFaceSuppressionThreshold"in e&&jt(this.s,3,(i=e.minFaceSuppressionThreshold)!=null?i:.3),"minFacePresenceConfidence"in e&&jt(this.H,2,(n=e.minFacePresenceConfidence)!=null?n:.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&jt(this.v,2,(o=e.minPoseDetectionConfidence)!=null?o:.5),"minPoseSuppressionThreshold"in e&&jt(this.v,3,(l=e.minPoseSuppressionThreshold)!=null?l:.3),"minPosePresenceConfidence"in e&&jt(this.K,2,(I=e.minPosePresenceConfidence)!=null?I:.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&jt(this.J,2,(m=e.minHandLandmarksConfidence)!=null?m:.5),this.l(e)}D(e,t,i){const n=typeof t!="function"?t:{};return this.C=typeof t=="function"?t:i,eh(this),Ro(this,e,n),ih(this)}F(e,t,i,n){const o=typeof i!="function"?i:{};return this.C=typeof i=="function"?i:n,eh(this),es(this,e,o,t),ih(this)}m(){var e=new ro;ki(e,"input_frames_image"),Pe(e,"pose_landmarks"),Pe(e,"pose_world_landmarks"),Pe(e,"face_landmarks"),Pe(e,"left_hand_landmarks"),Pe(e,"left_hand_world_landmarks"),Pe(e,"right_hand_landmarks"),Pe(e,"right_hand_world_landmarks");const t=new uo,i=new Rm;BI(i,1,Zl("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(o,l){if(l!=null)if(Array.isArray(l))Hi(o,2,xd(l,iu,void 0,void 0,!1));else{if(!(typeof l=="string"||l instanceof us||Wc(l)))throw Error("invalid value in Any.value field: "+l+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");BI(o,2,QC(l,!1,!1),Vr())}}(i,this.j.g());const n=new On;ho(n,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),id(n,8,Rm,i),xi(n,"IMAGE:input_frames_image"),Le(n,"POSE_LANDMARKS:pose_landmarks"),Le(n,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),Le(n,"FACE_LANDMARKS:face_landmarks"),Le(n,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),Le(n,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),Le(n,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),Le(n,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),n.o(t),bo(e,n),Dd(this,e),this.g.attachProtoListener("pose_landmarks",(o,l)=>{ng(o,this.h.poseLandmarks),Kt(this,l)}),this.g.attachEmptyPacketListener("pose_landmarks",o=>{Kt(this,o)}),this.g.attachProtoListener("pose_world_landmarks",(o,l)=>{var I=this.h.poseWorldLandmarks;o=el(o),I.push(Dl(o)),Kt(this,l)}),this.g.attachEmptyPacketListener("pose_world_landmarks",o=>{Kt(this,o)}),this.outputPoseSegmentationMasks&&(Le(n,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),gl(this,"pose_segmentation_mask"),this.g.X("pose_segmentation_mask",(o,l)=>{this.h.poseSegmentationMasks=[Il(this,o,!0,!this.C)],Kt(this,l)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",o=>{this.h.poseSegmentationMasks=[],Kt(this,o)})),this.g.attachProtoListener("face_landmarks",(o,l)=>{ng(o,this.h.faceLandmarks),Kt(this,l)}),this.g.attachEmptyPacketListener("face_landmarks",o=>{Kt(this,o)}),this.outputFaceBlendshapes&&(Pe(e,"extra_blendshapes"),Le(n,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(o,l)=>{var m;var I=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(o=Ud(o),I.push(Wu((m=o.g())!=null?m:[]))),Kt(this,l)}),this.g.attachEmptyPacketListener("extra_blendshapes",o=>{Kt(this,o)})),this.g.attachProtoListener("left_hand_landmarks",(o,l)=>{ng(o,this.h.leftHandLandmarks),Kt(this,l)}),this.g.attachEmptyPacketListener("left_hand_landmarks",o=>{Kt(this,o)}),this.g.attachProtoListener("left_hand_world_landmarks",(o,l)=>{var I=this.h.leftHandWorldLandmarks;o=el(o),I.push(Dl(o)),Kt(this,l)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",o=>{Kt(this,o)}),this.g.attachProtoListener("right_hand_landmarks",(o,l)=>{ng(o,this.h.rightHandLandmarks),Kt(this,l)}),this.g.attachEmptyPacketListener("right_hand_landmarks",o=>{Kt(this,o)}),this.g.attachProtoListener("right_hand_world_landmarks",(o,l)=>{var I=this.h.rightHandWorldLandmarks;o=el(o),I.push(Dl(o)),Kt(this,l)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",o=>{Kt(this,o)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ui.prototype.detectForVideo=Ui.prototype.F,Ui.prototype.detect=Ui.prototype.D,Ui.prototype.setOptions=Ui.prototype.o,Ui.createFromModelPath=function(e,t){return Ne(Ui,e,{baseOptions:{modelAssetPath:t}})},Ui.createFromModelBuffer=function(e,t){return Ne(Ui,e,{baseOptions:{modelAssetBuffer:t}})},Ui.createFromOptions=function(e,t){return Ne(Ui,e,t)},Ui.HAND_CONNECTIONS=Mu,Ui.POSE_CONNECTIONS=cA,Ui.FACE_LANDMARKS_LIPS=wu,Ui.FACE_LANDMARKS_LEFT_EYE=Fu,Ui.FACE_LANDMARKS_LEFT_EYEBROW=Hu,Ui.FACE_LANDMARKS_LEFT_IRIS=oA,Ui.FACE_LANDMARKS_RIGHT_EYE=xu,Ui.FACE_LANDMARKS_RIGHT_EYEBROW=Yu,Ui.FACE_LANDMARKS_RIGHT_IRIS=sA,Ui.FACE_LANDMARKS_FACE_OVAL=Nu,Ui.FACE_LANDMARKS_CONTOURS=rA,Ui.FACE_LANDMARKS_TESSELATION=lA;var Ao=class extends io{constructor(e,t){super(new Xo(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},se(e=this.h=new zp,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return se(this.h,0,2,YI(e,Oe(this.h,pu,2))),this.l(e)}ua(e,t){return this.j={classifications:[]},Ro(this,e,t),this.j}va(e,t,i){return this.j={classifications:[]},es(this,e,i,t),this.j}m(){var e=new ro;ki(e,"input_image"),ki(e,"norm_rect"),Pe(e,"classifications");const t=new uo;Mo(t,b9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),xi(i,"IMAGE:input_image"),xi(i,"NORM_RECT:norm_rect"),Le(i,"CLASSIFICATIONS:classifications"),i.o(t),bo(e,i),this.g.attachProtoListener("classifications",(n,o)=>{this.j=function(l){const I={classifications:bs(l,i9,1).map(m=>{var y,H;return Wu((H=(y=Oe(m,hp,4))==null?void 0:y.g())!=null?H:[],Ho(Go(m,2),0),_o(m,3))})};return $g(Js(l,2))!=null&&(I.timestampMs=Ho($g(Js(l,2)),0)),I}(n9(n)),Kt(this,o)}),this.g.attachEmptyPacketListener("classifications",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ao.prototype.classifyForVideo=Ao.prototype.va,Ao.prototype.classify=Ao.prototype.ua,Ao.prototype.setOptions=Ao.prototype.o,Ao.createFromModelPath=function(e,t){return Ne(Ao,e,{baseOptions:{modelAssetPath:t}})},Ao.createFromModelBuffer=function(e,t){return Ne(Ao,e,{baseOptions:{modelAssetBuffer:t}})},Ao.createFromOptions=function(e,t){return Ne(Ao,e,t)};var go=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!0),this.h=new Kp,this.embeddings={embeddings:[]},se(e=this.h,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t=this.h,i=Oe(this.h,Ym,2);return i=i?i.clone():new Ym,e.l2Normalize!==void 0?ac(i,1,e.l2Normalize):"l2Normalize"in e&&Hi(i,1),e.quantize!==void 0?ac(i,2,e.quantize):"quantize"in e&&Hi(i,2),se(t,0,2,i),this.l(e)}Ba(e,t){return Ro(this,e,t),this.embeddings}Ca(e,t,i){return es(this,e,i,t),this.embeddings}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"embeddings_out");const t=new uo;Mo(t,p9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"EMBEDDINGS:embeddings_out"),i.o(t),bo(e,i),this.g.attachProtoListener("embeddings_out",(n,o)=>{n=r9(n),this.embeddings=function(l){return{embeddings:bs(l,s9,1).map(I=>{var y,H,L,K,nt;const m={headIndex:(y=Ho(Go(I,3),0))!=null?y:-1,headName:(H=_o(I,4))!=null?H:""};if(z2(I,xm,Ga(I,1))!==void 0)I=qr(I=Oe(I,xm,Ga(I,1)),1,_s),m.floatEmbedding=I.slice();else{const dt=new Uint8Array(0);m.quantizedEmbedding=(nt=(K=(L=Oe(I,o9,Ga(I,2)))==null?void 0:L.qa())==null?void 0:K.h())!=null?nt:dt}return m}),timestampMs:Ho($g(Js(l,2)),0)}}(n),Kt(this,o)}),this.g.attachEmptyPacketListener("embeddings_out",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};go.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=Jm(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=Jm(Lm(e.quantizedEmbedding),Lm(t.quantizedEmbedding))}return e},go.prototype.embedForVideo=go.prototype.Ca,go.prototype.embed=go.prototype.Ba,go.prototype.setOptions=go.prototype.o,go.createFromModelPath=function(e,t){return Ne(go,e,{baseOptions:{modelAssetPath:t}})},go.createFromModelBuffer=function(e,t){return Ne(go,e,{baseOptions:{modelAssetBuffer:t}})},go.createFromOptions=function(e,t){return Ne(go,e,t)};var LI=class{constructor(e,t,i){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=i}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach(i=>{i.close()}),(t=this.categoryMask)==null||t.close()}};function nh(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function oh(e){try{const t=new LI(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{Od(e)}}LI.prototype.close=LI.prototype.close;var En=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Vu,this.v=new Up,se(this.h,0,3,this.v),se(e=this.h,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i;return e.displayNamesLocale!==void 0?Hi(this.h,2,Zl(e.displayNamesLocale)):"displayNamesLocale"in e&&Hi(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=(t=e.outputCategoryMask)!=null?t:!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=(i=e.outputConfidenceMasks)!=null?i:!0),super.l(e)}I(){(function(e){var i,n,o;const t=bs(e.fa(),On,1).filter(l=>_o(l,1).includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(e.s=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&((o=(n=(i=Oe(t[0],uo,7))==null?void 0:i.l())==null?void 0:n.g())!=null?o:new Map).forEach((l,I)=>{e.s[Number(I)]=_o(l,1)})})(this)}ga(e,t,i){const n=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:i,nh(this),Ro(this,e,n),oh(this)}Na(e,t,i,n){const o=typeof i!="function"?i:{};return this.j=typeof i=="function"?i:n,nh(this),es(this,e,o,t),oh(this)}Fa(){return this.s}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect");const t=new uo;Mo(t,Qp,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),i.o(t),bo(e,i),Dd(this,e),this.outputConfidenceMasks&&(Pe(e,"confidence_masks"),Le(i,"CONFIDENCE_MASKS:confidence_masks"),gl(this,"confidence_masks"),this.g.ea("confidence_masks",(n,o)=>{this.confidenceMasks=n.map(l=>Il(this,l,!0,!this.j)),Kt(this,o)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],Kt(this,n)})),this.outputCategoryMask&&(Pe(e,"category_mask"),Le(i,"CATEGORY_MASK:category_mask"),gl(this,"category_mask"),this.g.X("category_mask",(n,o)=>{this.categoryMask=Il(this,n,!1,!this.j),Kt(this,o)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,Kt(this,n)})),Pe(e,"quality_scores"),Le(i,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,o)=>{this.qualityScores=n,Kt(this,o)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};En.prototype.getLabels=En.prototype.Fa,En.prototype.segmentForVideo=En.prototype.Na,En.prototype.segment=En.prototype.ga,En.prototype.setOptions=En.prototype.o,En.createFromModelPath=function(e,t){return Ne(En,e,{baseOptions:{modelAssetPath:t}})},En.createFromModelBuffer=function(e,t){return Ne(En,e,{baseOptions:{modelAssetBuffer:t}})},En.createFromOptions=function(e,t){return Ne(En,e,t)};var JI=class{constructor(e,t,i){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=i}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach(i=>{i.close()}),(t=this.categoryMask)==null||t.close()}};JI.prototype.close=JI.prototype.close;var B9=class extends Ot{constructor(e){super(e)}},kr=[0,an,-2],ld=[0,rs,-3,en,rs,-1],sh=[0,ld],rh=[0,ld,an,-1],va=class extends Ot{constructor(e){super(e)}},lh=[0,rs,-1,en],X9=class extends Ot{constructor(){super()}},ch=class extends Ot{constructor(e){super(e)}},TI=[1,2,3,4,5,6,7,8,9,10,14,15],gA=class extends Ot{constructor(){super()}};gA.prototype.g=Kd([0,fn,[0,TI,Bi,ld,Bi,[0,ld,kr],Bi,sh,Bi,[0,sh,kr],Bi,lh,Bi,[0,rs,-3,en,qo],Bi,[0,rs,-3,en],Bi,[0,hi,rs,-2,en,an,en,-1,2,rs,kr],Bi,rh,Bi,[0,rh,kr],rs,kr,hi,Bi,[0,rs,-3,en,kr,-1],Bi,[0,fn,lh]],hi,[0,hi,an,-1,en]]);var Ko=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Vu,this.s=new Up,se(this.h,0,3,this.s),se(e=this.h,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i;return"outputCategoryMask"in e&&(this.outputCategoryMask=(t=e.outputCategoryMask)!=null?t:!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=(i=e.outputConfidenceMasks)!=null?i:!0),super.l(e)}ga(e,t,i,n){const o=typeof i!="function"?i:{};this.j=typeof i=="function"?i:n,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,i=this.B+1,n=new gA;const l=new ch;var I=new B9;if(Po(I,1,255),se(l,0,12,I),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var m=new va;ac(m,3,!0),jt(m,1,t.keypoint.x),jt(m,2,t.keypoint.y),Kl(l,5,TI,m)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(m of(I=new X9,t.scribble))ac(t=new va,3,!0),jt(t,1,m.x),jt(t,2,m.y),id(I,1,va,t);Kl(l,15,TI,I)}id(n,1,ch,l),this.g.addProtoToStream(n.g(),"drishti.RenderData","roi_in",i),Ro(this,e,o);t:{try{const H=new JI(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var y=H;break t}this.j(H)}finally{Od(this)}y=void 0}return y}m(){var e=new ro;ki(e,"image_in"),ki(e,"roi_in"),ki(e,"norm_rect_in");const t=new uo;Mo(t,Qp,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),xi(i,"IMAGE:image_in"),xi(i,"ROI:roi_in"),xi(i,"NORM_RECT:norm_rect_in"),i.o(t),bo(e,i),Dd(this,e),this.outputConfidenceMasks&&(Pe(e,"confidence_masks"),Le(i,"CONFIDENCE_MASKS:confidence_masks"),gl(this,"confidence_masks"),this.g.ea("confidence_masks",(n,o)=>{this.confidenceMasks=n.map(l=>Il(this,l,!0,!this.j)),Kt(this,o)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],Kt(this,n)})),this.outputCategoryMask&&(Pe(e,"category_mask"),Le(i,"CATEGORY_MASK:category_mask"),gl(this,"category_mask"),this.g.X("category_mask",(n,o)=>{this.categoryMask=Il(this,n,!1,!this.j),Kt(this,o)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,Kt(this,n)})),Pe(e,"quality_scores"),Le(i,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,o)=>{this.qualityScores=n,Kt(this,o)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ko.prototype.segment=Ko.prototype.ga,Ko.prototype.setOptions=Ko.prototype.o,Ko.createFromModelPath=function(e,t){return Ne(Ko,e,{baseOptions:{modelAssetPath:t}})},Ko.createFromModelBuffer=function(e,t){return Ne(Ko,e,{baseOptions:{modelAssetBuffer:t}})},Ko.createFromOptions=function(e,t){return Ne(Ko,e,t)};var Zo=class extends io{constructor(e,t){super(new Xo(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},se(e=this.h=new Dp,0,1,t=new Di)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Hi(this.h,2,Zl(e.displayNamesLocale)):"displayNamesLocale"in e&&Hi(this.h,2),e.maxResults!==void 0?Po(this.h,3,e.maxResults):"maxResults"in e&&Hi(this.h,3),e.scoreThreshold!==void 0?jt(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&Hi(this.h,4),e.categoryAllowlist!==void 0?nd(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&Hi(this.h,5),e.categoryDenylist!==void 0?nd(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&Hi(this.h,6),this.l(e)}D(e,t){return this.j={detections:[]},Ro(this,e,t),this.j}F(e,t,i){return this.j={detections:[]},es(this,e,i,t),this.j}m(){var e=new ro;ki(e,"input_frame_gpu"),ki(e,"norm_rect"),Pe(e,"detections");const t=new uo;Mo(t,Z9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.ObjectDetectorGraph"),xi(i,"IMAGE:input_frame_gpu"),xi(i,"NORM_RECT:norm_rect"),Le(i,"DETECTIONS:detections"),i.o(t),bo(e,i),this.g.attachProtoVectorListener("detections",(n,o)=>{for(const l of n)n=pp(l),this.j.detections.push(jp(n));Kt(this,o)}),this.g.attachEmptyPacketListener("detections",n=>{Kt(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Zo.prototype.detectForVideo=Zo.prototype.F,Zo.prototype.detect=Zo.prototype.D,Zo.prototype.setOptions=Zo.prototype.o,Zo.createFromModelPath=async function(e,t){return Ne(Zo,e,{baseOptions:{modelAssetPath:t}})},Zo.createFromModelBuffer=function(e,t){return Ne(Zo,e,{baseOptions:{modelAssetBuffer:t}})},Zo.createFromOptions=function(e,t){return Ne(Zo,e,t)};var kI=class{constructor(e,t,i){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=i}close(){var e;(e=this.segmentationMasks)==null||e.forEach(t=>{t.close()})}};function gh(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function dh(e){try{const t=new kI(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{Od(e)}}kI.prototype.close=kI.prototype.close;var ao=class extends io{constructor(e,t){super(new Xo(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,se(e=this.h=new Op,0,1,t=new Di),this.v=new Tp,se(this.h,0,3,this.v),this.j=new Jp,se(this.h,0,2,this.j),Po(this.j,4,1),jt(this.j,2,.5),jt(this.v,2,.5),jt(this.h,4,.5)}get baseOptions(){return Oe(this.h,Di,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t,i,n,o,l;return"numPoses"in e&&Po(this.j,4,(t=e.numPoses)!=null?t:1),"minPoseDetectionConfidence"in e&&jt(this.j,2,(i=e.minPoseDetectionConfidence)!=null?i:.5),"minTrackingConfidence"in e&&jt(this.h,4,(n=e.minTrackingConfidence)!=null?n:.5),"minPosePresenceConfidence"in e&&jt(this.v,2,(o=e.minPosePresenceConfidence)!=null?o:.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=(l=e.outputSegmentationMasks)!=null?l:!1),this.l(e)}D(e,t,i){const n=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:i,gh(this),Ro(this,e,n),dh(this)}F(e,t,i,n){const o=typeof i!="function"?i:{};return this.s=typeof i=="function"?i:n,gh(this),es(this,e,o,t),dh(this)}m(){var e=new ro;ki(e,"image_in"),ki(e,"norm_rect"),Pe(e,"normalized_landmarks"),Pe(e,"world_landmarks"),Pe(e,"segmentation_masks");const t=new uo;Mo(t,y9,this.h);const i=new On;ho(i,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),xi(i,"IMAGE:image_in"),xi(i,"NORM_RECT:norm_rect"),Le(i,"NORM_LANDMARKS:normalized_landmarks"),Le(i,"WORLD_LANDMARKS:world_landmarks"),i.o(t),bo(e,i),Dd(this,e),this.g.attachProtoVectorListener("normalized_landmarks",(n,o)=>{this.landmarks=[];for(const l of n)n=Fc(l),this.landmarks.push(Qd(n));Kt(this,o)}),this.g.attachEmptyPacketListener("normalized_landmarks",n=>{this.landmarks=[],Kt(this,n)}),this.g.attachProtoVectorListener("world_landmarks",(n,o)=>{this.worldLandmarks=[];for(const l of n)n=el(l),this.worldLandmarks.push(Dl(n));Kt(this,o)}),this.g.attachEmptyPacketListener("world_landmarks",n=>{this.worldLandmarks=[],Kt(this,n)}),this.outputSegmentationMasks&&(Le(i,"SEGMENTATION_MASK:segmentation_masks"),gl(this,"segmentation_masks"),this.g.ea("segmentation_masks",(n,o)=>{this.segmentationMasks=n.map(l=>Il(this,l,!0,!this.s)),Kt(this,o)}),this.g.attachEmptyPacketListener("segmentation_masks",n=>{this.segmentationMasks=[],Kt(this,n)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ao.prototype.detectForVideo=ao.prototype.F,ao.prototype.detect=ao.prototype.D,ao.prototype.setOptions=ao.prototype.o,ao.createFromModelPath=function(e,t){return Ne(ao,e,{baseOptions:{modelAssetPath:t}})},ao.createFromModelBuffer=function(e,t){return Ne(ao,e,{baseOptions:{modelAssetBuffer:t}})},ao.createFromOptions=function(e,t){return Ne(ao,e,t)},ao.POSE_CONNECTIONS=cA;const R9=.3,v9=1;class S9{constructor(){this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.pixelCount=0,this.inputOffset=0,this.outputOffset=0}async init(t,i){await this.initWasm(t,i),this.infos&&(this.canvas.width=this.infos.inputWidth,this.canvas.height=this.infos.inputHeight,this.pixelCount=this.infos.inputWidth*this.infos.inputHeight,this.mask=new ImageData(this.infos.inputWidth,this.infos.inputHeight),this.inputOffset=this.infos.inputMemoryOffset/4,this.outputOffset=this.infos.outputMemoryOffset/4)}async initWasm(t,i){this.infos=await qB(t,i)}async process(t,i){if(!this.mask||!this.infos)return;const n=this.infos.inputWidth,o=this.infos.inputHeight;this.context.drawImage(t,0,0,t.width,t.height,0,0,n,o);const l=this.context.getImageData(0,0,n,o),I=this.infos.selectedTFLite.HEAPF32;for(let m=0;m<this.pixelCount;m++){const y=this.inputOffset+m*3;I[y]=l.data[m*4]/255,I[y+1]=l.data[m*4+1]/255,I[y+2]=l.data[m*4+2]/255}this.infos.selectedTFLite._runInference();for(let m=0;m<this.pixelCount;m++){const y=this.infos.selectedTFLite.HEAPF32[this.outputOffset+m];this.mask.data[m*4]=this.mask.data[m*4+3]=255*y}return this.mask}isGpuSupported(){var t,i,n;return(n=(i=(t=this.infos)==null?void 0:t.selectedTFLite)==null?void 0:i._isGPUEnabled())!=null?n:!1}}class w9{constructor(){this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=0,this.height=0}async init(t,i){globalThis.document={};const n="VIDEO";(async()=>{const l=await rr.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15/wasm");this.imageSegmenter=await En.createFromOptions(l,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/image_segmenter/selfie_segmenter_landscape/float16/latest/selfie_segmenter_landscape.tflite",delegate:"GPU"},runningMode:n,outputCategoryMask:!0,outputConfidenceMasks:!0})})()}async process(t,i){var y;if(!this.imageSegmenter){console.warn("ImageSegmenter instance not available");return}(this.width!==t.width||this.height!==t.height)&&(this.canvas.width=this.width=t.width,this.canvas.height=this.height=t.height,this.mask&&(this.mask=new ImageData(this.width,this.height))),this.mask||(this.mask=new ImageData(this.width,this.height)),this.context.save(),this.context.drawImage(t,0,0,t.width,t.height),this.context.filter="blur(5px)",this.context.globalCompositeOperation="source-in",this.context.drawImage(t,0,0,t.width,t.height),this.context.restore();const o=(y=(await new Promise(H=>{var L;(L=this.imageSegmenter)==null||L.segmentForVideo(this.context.getImageData(0,0,t.width,t.height),i.timestamp,K=>H(K))})).confidenceMasks)==null?void 0:y[0],l=o==null?void 0:o.getAsFloat32Array();if(!l)return;if(!this.previousConfidenceMask){this.previousConfidenceMask=l.slice();return}const I=l.map((H,L)=>{var nt;const K=(nt=this.previousConfidenceMask)==null?void 0:nt[L];return K!==void 0?this.blend(K,H):H}),m=[255,0,0];for(let H=0;H<(I==null?void 0:I.length);H++)I[H]>R9?(I[H]<v9?this.mask.data[H*4]=m[0]*I[H]:this.mask.data[H*4]=m[0],this.mask.data[H*4+1]=m[1],this.mask.data[H*4+2]=m[2],this.mask.data[H*4+3]=255):this.mask.data[H*4]=this.mask.data[H*4+1]=this.mask.data[H*4+2]=this.mask.data[H*4+3]=0;return this.previousConfidenceMask=I.slice(),this.mask}isGpuSupported(){return!0}blend(t,i){const o=-.748699,l=-57.8051,I=291.309,m=-624.717,y=i-.5,H=y*y,L=1-Math.min(1,H*(5.68842+H*(o+H*(l+H*(I+H*m)))));return i+(t-i)*(L*.9)}}class F9{constructor(){this.reporter=new _3,this.isEnabled=!0}async init(t,i){var n;i.vonageSelfieSegmentationEngine===!1?this.selfieSegmentation=new w9:this.selfieSegmentation=new S9,await((n=this.selfieSegmentation)==null?void 0:n.init(i.wasmAssetUriPath,i.tfliteAssetUriPath)),this.backgroundFilter=new DB,this.report({variation:"Create"})}async transform(t,i){var m,y,H;if(!this.isEnabled)return i.enqueue(t);let n;const o=(m=t.timestamp)!=null?m:0,l=await createImageBitmap(t),I=await((y=this.selfieSegmentation)==null?void 0:y.process(l,t));I&&(n=await((H=this.backgroundFilter)==null?void 0:H.process(l,I))),n?(t.close(),i.enqueue(new VideoFrame(n,{timestamp:o,alpha:"discard"}))):i.enqueue(t)}async setBackgroundOptions(t){var i;this.backgroundOptions=t,await((i=this.backgroundFilter)==null?void 0:i.setBackgroundOptions(t)),this.report({variation:"Update"})}async setVideoBGReadable(t){var i;await((i=this.backgroundFilter)==null?void 0:i.setVideoBGReadable(t))}async setVirtualBGImage(t){var i;await((i=this.backgroundFilter)==null?void 0:i.setVirtualBGImage(t))}setFlickeringOptions(t){var i;(i=this.backgroundFilter)==null||i.setFlickeringOptions(t),this.report({variation:"Update"})}async profile(t){var i,n;return(n=(i=this.backgroundFilter)==null?void 0:i.profile(t))!=null?n:[]}getTransformerType(){var t,i;return(i=(t=this.backgroundOptions)==null?void 0:t.transformerType)!=null?i:"Undefined"}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}report(t){var i;this.reporter.send({version:P3,action:"MlTransformers",transformerType:(i=this.backgroundOptions)==null?void 0:i.transformerType,config:JSON.stringify(this.backgroundOptions),...t})}}const Ju=class{constructor(){this.backgroundTransformer=new F9,this.mediaProcessor=new o3,this.rate=30,this.eventsQueue=[],this.frameTransformLatencyMs=[]}async init(t,i){this.frameTransformLatencyMs=[],await this.backgroundTransformer.init(t,i),await this.mediaProcessor.setTransformers([this.backgroundTransformer]),this.mediaProcessor.setTrackExpectedRate(this.rate),this.mediaProcessor.onAny((n,o)=>{this.resolveOnMediaProcessor?(this.resolveOnMediaProcessor({name:n,data:o}),this.resolveOnMediaProcessor=void 0):this.eventsQueue.push({name:n,data:o})})}enable(){this.backgroundTransformer.enable()}disable(){this.backgroundTransformer.disable()}async onMediaProcessorEvent(){return await new Promise(t=>{this.eventsQueue.length>0?t(this.eventsQueue.shift()):this.resolveOnMediaProcessor=t})}async setTrackExpectedRate(t){this.rate=t,this.mediaProcessor.setTrackExpectedRate(t)}async transform(t,i){let n=performance.now();this.mediaProcessor.transform(t,i),this.frameTransformLatencyMs.push(performance.now()-n)}async setBackgroundOptions(t){var i;await((i=this.backgroundTransformer)==null?void 0:i.setBackgroundOptions(t))}setVideoBGReadable(t){this.backgroundTransformer.setVideoBGReadable(t)}async setVirtualBGImage(t){await this.backgroundTransformer.setVirtualBGImage(t)}async terminate(){await this.mediaProcessor.destroy();const i=this.frameTransformLatencyMs.reduce((n,o)=>n+o,0)/this.frameTransformLatencyMs.length||0;console.log(`Transform latency average is: ${i} ms`)}setFlickeringOptions(t){this.backgroundTransformer.setFlickeringOptions(t)}setVonageMetadata(t){qy(t)}async profile(t){return JSON.stringify(await this.backgroundTransformer.profile(t))}};let zI=Ju;(()=>{f3("ProcessorWorker",Ju)})();const dA="KGZ1bmN0aW9uICgpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGNyZWF0ZUdsb2JhbFRoaXNWYXJpYWJsZShuYW1lLCBkZWZhdWx0VmFsdWUpIHsKICAgIGlmICghZ2xvYmFsVGhpcy52b25hZ2UpIHsKICAgICAgZ2xvYmFsVGhpcy52b25hZ2UgPSB7fTsKICAgIH0KICAgIGlmICghZ2xvYmFsVGhpcy52b25hZ2Uud29ya2VyaXplcikgewogICAgICBnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyID0ge307CiAgICB9CiAgICBsZXQgZ2xvYmFsczIgPSBnbG9iYWxUaGlzLnZvbmFnZS53b3JrZXJpemVyOwogICAgaWYgKCFnbG9iYWxzMltuYW1lXSkgewogICAgICBnbG9iYWxzMltuYW1lXSA9IGRlZmF1bHRWYWx1ZTsKICAgIH0KICAgIHJldHVybiBnbG9iYWxzMltuYW1lXTsKICB9CiAgY29uc3QgZ2xvYmFscyA9IGNyZWF0ZUdsb2JhbFRoaXNWYXJpYWJsZSgKICAgICJnbG9iYWxzIiwKICAgIHt9CiAgKTsKICB2YXIgQ29tbWFuZFR5cGUgPSAvKiBAX19QVVJFX18gKi8gKChDb21tYW5kVHlwZTIpID0+IHsKICAgIENvbW1hbmRUeXBlMlsiSU5JVCJdID0gIklOSVQiOwogICAgQ29tbWFuZFR5cGUyWyJGT1JXQVJEIl0gPSAiRk9SV0FSRCI7CiAgICBDb21tYW5kVHlwZTJbIlRFUk1JTkFURSJdID0gIlRFUk1JTkFURSI7CiAgICBDb21tYW5kVHlwZTJbIkdMT0JBTFNfU1lOQyJdID0gIkdMT0JBTFNfU1lOQyI7CiAgICBDb21tYW5kVHlwZTJbIkVWRU5UIl0gPSAiRVZFTlQiOwogICAgcmV0dXJuIENvbW1hbmRUeXBlMjsKICB9KShDb21tYW5kVHlwZSB8fCB7fSk7CiAgZnVuY3Rpb24gaXNUcmFuc2ZlcmFibGUoYXJnKSB7CiAgICBjb25zdCB0cmFuc2ZlcmFibGVUeXBlcyA9IFtJbWFnZUJpdG1hcCwgUmVhZGFibGVTdHJlYW0sIFdyaXRhYmxlU3RyZWFtXTsKICAgIHJldHVybiB0cmFuc2ZlcmFibGVUeXBlcy5zb21lKCh0eXBlKSA9PiBhcmcgaW5zdGFuY2VvZiB0eXBlKTsKICB9CiAgZnVuY3Rpb24gcG9zdENvbW1hbmQoY29tbWFuZCwgcmVzdWx0KSB7CiAgICBjb25zdCB7IGlkLCB0eXBlIH0gPSBjb21tYW5kOwogICAgY29uc3QgcmVzdWx0QXNBcnJheSA9IEFycmF5LmlzQXJyYXkocmVzdWx0KSA/IHJlc3VsdCA6IFtyZXN1bHRdOwogICAgcG9zdE1lc3NhZ2UoCiAgICAgIHsKICAgICAgICBpZCwKICAgICAgICB0eXBlLAogICAgICAgIHJlc3VsdAogICAgICB9LAogICAgICByZXN1bHRBc0FycmF5LmZpbHRlcigocmVzdWx0MikgPT4gaXNUcmFuc2ZlcmFibGUocmVzdWx0MikpCiAgICApOwogIH0KICBjcmVhdGVHbG9iYWxUaGlzVmFyaWFibGUoIndvcmtlcml6ZWQiLCB7fSk7CiAgZnVuY3Rpb24gaXNXb3JrZXIoKSB7CiAgICByZXR1cm4gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7CiAgfQogIGZ1bmN0aW9uIGNvcHkoZnJvbSwgdG8pIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHRvKSkgewogICAgICB0by5zcGxpY2UoMCwgdG8ubGVuZ3RoKTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIHRvID09PSAib2JqZWN0IikgewogICAgICBmb3IgKGNvbnN0IGkgaW4gdG8pIHsKICAgICAgICBkZWxldGUgdG9baV07CiAgICAgIH0KICAgIH0KICAgIGZvciAoY29uc3QgaSBpbiBmcm9tKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGZyb21baV0pKSB7CiAgICAgICAgdG9baV0gPSBbXTsKICAgICAgICBjb3B5KGZyb21baV0sIHRvW2ldKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZnJvbVtpXSA9PT0gIm9iamVjdCIpIHsKICAgICAgICB0b1tpXSA9IHt9OwogICAgICAgIGNvcHkoZnJvbVtpXSwgdG9baV0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRvW2ldID0gZnJvbVtpXTsKICAgICAgfQogICAgfQogIH0KICBjb25zdCBhbnlNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTsKICBjb25zdCBldmVudHNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTsKICBjb25zdCBwcm9kdWNlcnNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTsKICBjb25zdCBhbnlQcm9kdWNlciA9IFN5bWJvbCgiYW55UHJvZHVjZXIiKTsKICBjb25zdCByZXNvbHZlZFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTsKICBjb25zdCBsaXN0ZW5lckFkZGVkID0gU3ltYm9sKCJsaXN0ZW5lckFkZGVkIik7CiAgY29uc3QgbGlzdGVuZXJSZW1vdmVkID0gU3ltYm9sKCJsaXN0ZW5lclJlbW92ZWQiKTsKICBsZXQgY2FuRW1pdE1ldGFFdmVudHMgPSBmYWxzZTsKICBsZXQgaXNHbG9iYWxEZWJ1Z0VuYWJsZWQgPSBmYWxzZTsKICBmdW5jdGlvbiBhc3NlcnRFdmVudE5hbWUoZXZlbnROYW1lKSB7CiAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSAhPT0gInN0cmluZyIgJiYgdHlwZW9mIGV2ZW50TmFtZSAhPT0gInN5bWJvbCIgJiYgdHlwZW9mIGV2ZW50TmFtZSAhPT0gIm51bWJlciIpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYGV2ZW50TmFtZWAgbXVzdCBiZSBhIHN0cmluZywgc3ltYm9sLCBvciBudW1iZXIiKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gYXNzZXJ0TGlzdGVuZXIobGlzdGVuZXIpIHsKICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICJmdW5jdGlvbiIpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGdldExpc3RlbmVycyhpbnN0YW5jZSwgZXZlbnROYW1lKSB7CiAgICBjb25zdCBldmVudHMgPSBldmVudHNNYXAuZ2V0KGluc3RhbmNlKTsKICAgIGlmICghZXZlbnRzLmhhcyhldmVudE5hbWUpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiBldmVudHMuZ2V0KGV2ZW50TmFtZSk7CiAgfQogIGZ1bmN0aW9uIGdldEV2ZW50UHJvZHVjZXJzKGluc3RhbmNlLCBldmVudE5hbWUpIHsKICAgIGNvbnN0IGtleSA9IHR5cGVvZiBldmVudE5hbWUgPT09ICJzdHJpbmciIHx8IHR5cGVvZiBldmVudE5hbWUgPT09ICJzeW1ib2wiIHx8IHR5cGVvZiBldmVudE5hbWUgPT09ICJudW1iZXIiID8gZXZlbnROYW1lIDogYW55UHJvZHVjZXI7CiAgICBjb25zdCBwcm9kdWNlcnMgPSBwcm9kdWNlcnNNYXAuZ2V0KGluc3RhbmNlKTsKICAgIGlmICghcHJvZHVjZXJzLmhhcyhrZXkpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiBwcm9kdWNlcnMuZ2V0KGtleSk7CiAgfQogIGZ1bmN0aW9uIGVucXVldWVQcm9kdWNlcnMoaW5zdGFuY2UsIGV2ZW50TmFtZSwgZXZlbnREYXRhKSB7CiAgICBjb25zdCBwcm9kdWNlcnMgPSBwcm9kdWNlcnNNYXAuZ2V0KGluc3RhbmNlKTsKICAgIGlmIChwcm9kdWNlcnMuaGFzKGV2ZW50TmFtZSkpIHsKICAgICAgZm9yIChjb25zdCBwcm9kdWNlciBvZiBwcm9kdWNlcnMuZ2V0KGV2ZW50TmFtZSkpIHsKICAgICAgICBwcm9kdWNlci5lbnF1ZXVlKGV2ZW50RGF0YSk7CiAgICAgIH0KICAgIH0KICAgIGlmIChwcm9kdWNlcnMuaGFzKGFueVByb2R1Y2VyKSkgewogICAgICBjb25zdCBpdGVtID0gUHJvbWlzZS5hbGwoW2V2ZW50TmFtZSwgZXZlbnREYXRhXSk7CiAgICAgIGZvciAoY29uc3QgcHJvZHVjZXIgb2YgcHJvZHVjZXJzLmdldChhbnlQcm9kdWNlcikpIHsKICAgICAgICBwcm9kdWNlci5lbnF1ZXVlKGl0ZW0pOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGl0ZXJhdG9yKGluc3RhbmNlLCBldmVudE5hbWVzKSB7CiAgICBldmVudE5hbWVzID0gQXJyYXkuaXNBcnJheShldmVudE5hbWVzKSA/IGV2ZW50TmFtZXMgOiBbZXZlbnROYW1lc107CiAgICBsZXQgaXNGaW5pc2hlZCA9IGZhbHNlOwogICAgbGV0IGZsdXNoID0gKCkgPT4gewogICAgfTsKICAgIGxldCBxdWV1ZSA9IFtdOwogICAgY29uc3QgcHJvZHVjZXIgPSB7CiAgICAgIGVucXVldWUoaXRlbSkgewogICAgICAgIHF1ZXVlLnB1c2goaXRlbSk7CiAgICAgICAgZmx1c2goKTsKICAgICAgfSwKICAgICAgZmluaXNoKCkgewogICAgICAgIGlzRmluaXNoZWQgPSB0cnVlOwogICAgICAgIGZsdXNoKCk7CiAgICAgIH0KICAgIH07CiAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CiAgICAgIGxldCBzZXQgPSBnZXRFdmVudFByb2R1Y2VycyhpbnN0YW5jZSwgZXZlbnROYW1lKTsKICAgICAgaWYgKCFzZXQpIHsKICAgICAgICBzZXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgIGNvbnN0IHByb2R1Y2VycyA9IHByb2R1Y2Vyc01hcC5nZXQoaW5zdGFuY2UpOwogICAgICAgIHByb2R1Y2Vycy5zZXQoZXZlbnROYW1lLCBzZXQpOwogICAgICB9CiAgICAgIHNldC5hZGQocHJvZHVjZXIpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgYXN5bmMgbmV4dCgpIHsKICAgICAgICBpZiAoIXF1ZXVlKSB7CiAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlIH07CiAgICAgICAgfQogICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGlmIChpc0ZpbmlzaGVkKSB7CiAgICAgICAgICAgIHF1ZXVlID0gdm9pZCAwOwogICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0KCk7CiAgICAgICAgICB9CiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICBmbHVzaCA9IHJlc29sdmU7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiB0aGlzLm5leHQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRvbmU6IGZhbHNlLAogICAgICAgICAgdmFsdWU6IGF3YWl0IHF1ZXVlLnNoaWZ0KCkKICAgICAgICB9OwogICAgICB9LAogICAgICBhc3luYyByZXR1cm4odmFsdWUpIHsKICAgICAgICBxdWV1ZSA9IHZvaWQgMDsKICAgICAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CiAgICAgICAgICBjb25zdCBzZXQgPSBnZXRFdmVudFByb2R1Y2VycyhpbnN0YW5jZSwgZXZlbnROYW1lKTsKICAgICAgICAgIGlmIChzZXQpIHsKICAgICAgICAgICAgc2V0LmRlbGV0ZShwcm9kdWNlcik7CiAgICAgICAgICAgIGlmIChzZXQuc2l6ZSA9PT0gMCkgewogICAgICAgICAgICAgIGNvbnN0IHByb2R1Y2VycyA9IHByb2R1Y2Vyc01hcC5nZXQoaW5zdGFuY2UpOwogICAgICAgICAgICAgIHByb2R1Y2Vycy5kZWxldGUoZXZlbnROYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmbHVzaCgpOwogICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/IHsgZG9uZTogdHJ1ZSwgdmFsdWU6IGF3YWl0IHZhbHVlIH0gOiB7IGRvbmU6IHRydWUgfTsKICAgICAgfSwKICAgICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gZGVmYXVsdE1ldGhvZE5hbWVzT3JBc3NlcnQobWV0aG9kTmFtZXMpIHsKICAgIGlmIChtZXRob2ROYW1lcyA9PT0gdm9pZCAwKSB7CiAgICAgIHJldHVybiBhbGxFbWl0dGVyeU1ldGhvZHM7CiAgICB9CiAgICBpZiAoIUFycmF5LmlzQXJyYXkobWV0aG9kTmFtZXMpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImBtZXRob2ROYW1lc2AgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzIik7CiAgICB9CiAgICBmb3IgKGNvbnN0IG1ldGhvZE5hbWUgb2YgbWV0aG9kTmFtZXMpIHsKICAgICAgaWYgKCFhbGxFbWl0dGVyeU1ldGhvZHMuaW5jbHVkZXMobWV0aG9kTmFtZSkpIHsKICAgICAgICBpZiAodHlwZW9mIG1ldGhvZE5hbWUgIT09ICJzdHJpbmciKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIGVsZW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpOwogICAgICAgIH0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bWV0aG9kTmFtZX0gaXMgbm90IEVtaXR0ZXJ5IG1ldGhvZGApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbWV0aG9kTmFtZXM7CiAgfQogIGNvbnN0IGlzTWV0YUV2ZW50ID0gKGV2ZW50TmFtZSkgPT4gZXZlbnROYW1lID09PSBsaXN0ZW5lckFkZGVkIHx8IGV2ZW50TmFtZSA9PT0gbGlzdGVuZXJSZW1vdmVkOwogIGZ1bmN0aW9uIGVtaXRNZXRhRXZlbnQoZW1pdHRlciwgZXZlbnROYW1lLCBldmVudERhdGEpIHsKICAgIGlmIChpc01ldGFFdmVudChldmVudE5hbWUpKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY2FuRW1pdE1ldGFFdmVudHMgPSB0cnVlOwogICAgICAgIGVtaXR0ZXIuZW1pdChldmVudE5hbWUsIGV2ZW50RGF0YSk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgY2FuRW1pdE1ldGFFdmVudHMgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KICBjbGFzcyBFbWl0dGVyeSB7CiAgICBzdGF0aWMgbWl4aW4oZW1pdHRlcnlQcm9wZXJ0eU5hbWUsIG1ldGhvZE5hbWVzKSB7CiAgICAgIG1ldGhvZE5hbWVzID0gZGVmYXVsdE1ldGhvZE5hbWVzT3JBc3NlcnQobWV0aG9kTmFtZXMpOwogICAgICByZXR1cm4gKHRhcmdldCkgPT4gewogICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgdGFyZ2V0YCBtdXN0IGJlIGZ1bmN0aW9uIik7CiAgICAgICAgfQogICAgICAgIGZvciAoY29uc3QgbWV0aG9kTmFtZSBvZiBtZXRob2ROYW1lcykgewogICAgICAgICAgaWYgKHRhcmdldC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gIT09IHZvaWQgMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7bWV0aG9kTmFtZX1cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGdldEVtaXR0ZXJ5UHJvcGVydHkoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgZW1pdHRlcnlQcm9wZXJ0eU5hbWUsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlOiBuZXcgRW1pdHRlcnkoKQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gdGhpc1tlbWl0dGVyeVByb3BlcnR5TmFtZV07CiAgICAgICAgfQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQucHJvdG90eXBlLCBlbWl0dGVyeVByb3BlcnR5TmFtZSwgewogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICBnZXQ6IGdldEVtaXR0ZXJ5UHJvcGVydHkKICAgICAgICB9KTsKICAgICAgICBjb25zdCBlbWl0dGVyeU1ldGhvZENhbGxlciA9IChtZXRob2ROYW1lKSA9PiBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICAgICAgICByZXR1cm4gdGhpc1tlbWl0dGVyeVByb3BlcnR5TmFtZV1bbWV0aG9kTmFtZV0oLi4uYXJncyk7CiAgICAgICAgfTsKICAgICAgICBmb3IgKGNvbnN0IG1ldGhvZE5hbWUgb2YgbWV0aG9kTmFtZXMpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQucHJvdG90eXBlLCBtZXRob2ROYW1lLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZTogZW1pdHRlcnlNZXRob2RDYWxsZXIobWV0aG9kTmFtZSkKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgICB9OwogICAgfQogICAgc3RhdGljIGdldCBpc0RlYnVnRW5hYmxlZCgpIHsKICAgICAgdmFyIF9hLCBfYjsKICAgICAgaWYgKHR5cGVvZiAoKF9hID0gZ2xvYmFsVGhpcy5wcm9jZXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuZW52KSAhPT0gIm9iamVjdCIpIHsKICAgICAgICByZXR1cm4gaXNHbG9iYWxEZWJ1Z0VuYWJsZWQ7CiAgICAgIH0KICAgICAgY29uc3QgeyBlbnYgfSA9IChfYiA9IGdsb2JhbFRoaXMucHJvY2VzcykgIT0gbnVsbCA/IF9iIDogeyBlbnY6IHt9IH07CiAgICAgIHJldHVybiBlbnYuREVCVUcgPT09ICJlbWl0dGVyeSIgfHwgZW52LkRFQlVHID09PSAiKiIgfHwgaXNHbG9iYWxEZWJ1Z0VuYWJsZWQ7CiAgICB9CiAgICBzdGF0aWMgc2V0IGlzRGVidWdFbmFibGVkKG5ld1ZhbHVlKSB7CiAgICAgIGlzR2xvYmFsRGVidWdFbmFibGVkID0gbmV3VmFsdWU7CiAgICB9CiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgdmFyIF9hOwogICAgICBhbnlNYXAuc2V0KHRoaXMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpOwogICAgICBldmVudHNNYXAuc2V0KHRoaXMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpOwogICAgICBwcm9kdWNlcnNNYXAuc2V0KHRoaXMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpOwogICAgICBwcm9kdWNlcnNNYXAuZ2V0KHRoaXMpLnNldChhbnlQcm9kdWNlciwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7CiAgICAgIHRoaXMuZGVidWcgPSAoX2EgPSBvcHRpb25zLmRlYnVnKSAhPSBudWxsID8gX2EgOiB7fTsKICAgICAgaWYgKHRoaXMuZGVidWcuZW5hYmxlZCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGhpcy5kZWJ1Zy5lbmFibGVkID0gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmRlYnVnLmxvZ2dlcikgewogICAgICAgIHRoaXMuZGVidWcubG9nZ2VyID0gKHR5cGUsIGRlYnVnTmFtZSwgZXZlbnROYW1lLCBldmVudERhdGEpID0+IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGV2ZW50RGF0YSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50RGF0YSk7CiAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgZXZlbnREYXRhID0gYE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcga2V5cyBmYWlsZWQgdG8gc3RyaW5naWZ5OiAke09iamVjdC5rZXlzKGV2ZW50RGF0YSkuam9pbigiLCIpfWA7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSA9PT0gInN5bWJvbCIgfHwgdHlwZW9mIGV2ZW50TmFtZSA9PT0gIm51bWJlciIpIHsKICAgICAgICAgICAgZXZlbnROYW1lID0gZXZlbnROYW1lLnRvU3RyaW5nKCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICBjb25zdCBsb2dUaW1lID0gYCR7Y3VycmVudFRpbWUuZ2V0SG91cnMoKX06JHtjdXJyZW50VGltZS5nZXRNaW51dGVzKCl9OiR7Y3VycmVudFRpbWUuZ2V0U2Vjb25kcygpfS4ke2N1cnJlbnRUaW1lLmdldE1pbGxpc2Vjb25kcygpfWA7CiAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7bG9nVGltZX1dW2VtaXR0ZXJ5OiR7dHlwZX1dWyR7ZGVidWdOYW1lfV0gRXZlbnQgTmFtZTogJHtldmVudE5hbWV9CglkYXRhOiAke2V2ZW50RGF0YX1gKTsKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgICBsb2dJZkRlYnVnRW5hYmxlZCh0eXBlLCBldmVudE5hbWUsIGV2ZW50RGF0YSkgewogICAgICBpZiAoRW1pdHRlcnkuaXNEZWJ1Z0VuYWJsZWQgfHwgdGhpcy5kZWJ1Zy5lbmFibGVkKSB7CiAgICAgICAgdGhpcy5kZWJ1Zy5sb2dnZXIodHlwZSwgdGhpcy5kZWJ1Zy5uYW1lLCBldmVudE5hbWUsIGV2ZW50RGF0YSk7CiAgICAgIH0KICAgIH0KICAgIG9uKGV2ZW50TmFtZXMsIGxpc3RlbmVyKSB7CiAgICAgIGFzc2VydExpc3RlbmVyKGxpc3RlbmVyKTsKICAgICAgZXZlbnROYW1lcyA9IEFycmF5LmlzQXJyYXkoZXZlbnROYW1lcykgPyBldmVudE5hbWVzIDogW2V2ZW50TmFtZXNdOwogICAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CiAgICAgICAgYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7CiAgICAgICAgbGV0IHNldCA9IGdldExpc3RlbmVycyh0aGlzLCBldmVudE5hbWUpOwogICAgICAgIGlmICghc2V0KSB7CiAgICAgICAgICBzZXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgICAgY29uc3QgZXZlbnRzID0gZXZlbnRzTWFwLmdldCh0aGlzKTsKICAgICAgICAgIGV2ZW50cy5zZXQoZXZlbnROYW1lLCBzZXQpOwogICAgICAgIH0KICAgICAgICBzZXQuYWRkKGxpc3RlbmVyKTsKICAgICAgICB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJzdWJzY3JpYmUiLCBldmVudE5hbWUsIHZvaWQgMCk7CiAgICAgICAgaWYgKCFpc01ldGFFdmVudChldmVudE5hbWUpKSB7CiAgICAgICAgICBlbWl0TWV0YUV2ZW50KHRoaXMsIGxpc3RlbmVyQWRkZWQsIHsgZXZlbnROYW1lLCBsaXN0ZW5lciB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMub2ZmLmJpbmQodGhpcywgZXZlbnROYW1lcywgbGlzdGVuZXIpOwogICAgfQogICAgb2ZmKGV2ZW50TmFtZXMsIGxpc3RlbmVyKSB7CiAgICAgIGFzc2VydExpc3RlbmVyKGxpc3RlbmVyKTsKICAgICAgZXZlbnROYW1lcyA9IEFycmF5LmlzQXJyYXkoZXZlbnROYW1lcykgPyBldmVudE5hbWVzIDogW2V2ZW50TmFtZXNdOwogICAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CiAgICAgICAgYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7CiAgICAgICAgY29uc3Qgc2V0ID0gZ2V0TGlzdGVuZXJzKHRoaXMsIGV2ZW50TmFtZSk7CiAgICAgICAgaWYgKHNldCkgewogICAgICAgICAgc2V0LmRlbGV0ZShsaXN0ZW5lcik7CiAgICAgICAgICBpZiAoc2V0LnNpemUgPT09IDApIHsKICAgICAgICAgICAgY29uc3QgZXZlbnRzID0gZXZlbnRzTWFwLmdldCh0aGlzKTsKICAgICAgICAgICAgZXZlbnRzLmRlbGV0ZShldmVudE5hbWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZSIsIGV2ZW50TmFtZSwgdm9pZCAwKTsKICAgICAgICBpZiAoIWlzTWV0YUV2ZW50KGV2ZW50TmFtZSkpIHsKICAgICAgICAgIGVtaXRNZXRhRXZlbnQodGhpcywgbGlzdGVuZXJSZW1vdmVkLCB7IGV2ZW50TmFtZSwgbGlzdGVuZXIgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBvbmNlKGV2ZW50TmFtZXMpIHsKICAgICAgbGV0IG9mZl87CiAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIG9mZl8gPSB0aGlzLm9uKGV2ZW50TmFtZXMsIChkYXRhKSA9PiB7CiAgICAgICAgICBvZmZfKCk7CiAgICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcHJvbWlzZS5vZmYgPSBvZmZfOwogICAgICByZXR1cm4gcHJvbWlzZTsKICAgIH0KICAgIGV2ZW50cyhldmVudE5hbWVzKSB7CiAgICAgIGV2ZW50TmFtZXMgPSBBcnJheS5pc0FycmF5KGV2ZW50TmFtZXMpID8gZXZlbnROYW1lcyA6IFtldmVudE5hbWVzXTsKICAgICAgZm9yIChjb25zdCBldmVudE5hbWUgb2YgZXZlbnROYW1lcykgewogICAgICAgIGFzc2VydEV2ZW50TmFtZShldmVudE5hbWUpOwogICAgICB9CiAgICAgIHJldHVybiBpdGVyYXRvcih0aGlzLCBldmVudE5hbWVzKTsKICAgIH0KICAgIGFzeW5jIGVtaXQoZXZlbnROYW1lLCBldmVudERhdGEpIHsKICAgICAgdmFyIF9hOwogICAgICBhc3NlcnRFdmVudE5hbWUoZXZlbnROYW1lKTsKICAgICAgaWYgKGlzTWV0YUV2ZW50KGV2ZW50TmFtZSkgJiYgIWNhbkVtaXRNZXRhRXZlbnRzKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYGV2ZW50TmFtZWAgY2Fubm90IGJlIG1ldGEgZXZlbnQgYGxpc3RlbmVyQWRkZWRgIG9yIGBsaXN0ZW5lclJlbW92ZWRgIik7CiAgICAgIH0KICAgICAgdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgiZW1pdCIsIGV2ZW50TmFtZSwgZXZlbnREYXRhKTsKICAgICAgZW5xdWV1ZVByb2R1Y2Vycyh0aGlzLCBldmVudE5hbWUsIGV2ZW50RGF0YSk7CiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IChfYSA9IGdldExpc3RlbmVycyh0aGlzLCBldmVudE5hbWUpKSAhPSBudWxsID8gX2EgOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICBjb25zdCBhbnlMaXN0ZW5lcnMgPSBhbnlNYXAuZ2V0KHRoaXMpOwogICAgICBjb25zdCBzdGF0aWNMaXN0ZW5lcnMgPSBbLi4ubGlzdGVuZXJzXTsKICAgICAgY29uc3Qgc3RhdGljQW55TGlzdGVuZXJzID0gaXNNZXRhRXZlbnQoZXZlbnROYW1lKSA/IFtdIDogWy4uLmFueUxpc3RlbmVyc107CiAgICAgIGF3YWl0IHJlc29sdmVkUHJvbWlzZTsKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoWwogICAgICAgIC4uLnN0YXRpY0xpc3RlbmVycy5tYXAoYXN5bmMgKGxpc3RlbmVyKSA9PiB7CiAgICAgICAgICBpZiAobGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikpIHsKICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKGV2ZW50RGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgLi4uc3RhdGljQW55TGlzdGVuZXJzLm1hcChhc3luYyAobGlzdGVuZXIpID0+IHsKICAgICAgICAgIGlmIChhbnlMaXN0ZW5lcnMuaGFzKGxpc3RlbmVyKSkgewogICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoZXZlbnROYW1lLCBldmVudERhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIF0pOwogICAgfQogICAgYXN5bmMgZW1pdFNlcmlhbChldmVudE5hbWUsIGV2ZW50RGF0YSkgewogICAgICB2YXIgX2E7CiAgICAgIGFzc2VydEV2ZW50TmFtZShldmVudE5hbWUpOwogICAgICBpZiAoaXNNZXRhRXZlbnQoZXZlbnROYW1lKSAmJiAhY2FuRW1pdE1ldGFFdmVudHMpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgZXZlbnROYW1lYCBjYW5ub3QgYmUgbWV0YSBldmVudCBgbGlzdGVuZXJBZGRlZGAgb3IgYGxpc3RlbmVyUmVtb3ZlZGAiKTsKICAgICAgfQogICAgICB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJlbWl0U2VyaWFsIiwgZXZlbnROYW1lLCBldmVudERhdGEpOwogICAgICBjb25zdCBsaXN0ZW5lcnMgPSAoX2EgPSBnZXRMaXN0ZW5lcnModGhpcywgZXZlbnROYW1lKSkgIT0gbnVsbCA/IF9hIDogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgY29uc3QgYW55TGlzdGVuZXJzID0gYW55TWFwLmdldCh0aGlzKTsKICAgICAgY29uc3Qgc3RhdGljTGlzdGVuZXJzID0gWy4uLmxpc3RlbmVyc107CiAgICAgIGNvbnN0IHN0YXRpY0FueUxpc3RlbmVycyA9IFsuLi5hbnlMaXN0ZW5lcnNdOwogICAgICBhd2FpdCByZXNvbHZlZFByb21pc2U7CiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2Ygc3RhdGljTGlzdGVuZXJzKSB7CiAgICAgICAgaWYgKGxpc3RlbmVycy5oYXMobGlzdGVuZXIpKSB7CiAgICAgICAgICBhd2FpdCBsaXN0ZW5lcihldmVudERhdGEpOwogICAgICAgIH0KICAgICAgfQogICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHN0YXRpY0FueUxpc3RlbmVycykgewogICAgICAgIGlmIChhbnlMaXN0ZW5lcnMuaGFzKGxpc3RlbmVyKSkgewogICAgICAgICAgYXdhaXQgbGlzdGVuZXIoZXZlbnROYW1lLCBldmVudERhdGEpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgb25BbnkobGlzdGVuZXIpIHsKICAgICAgYXNzZXJ0TGlzdGVuZXIobGlzdGVuZXIpOwogICAgICB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJzdWJzY3JpYmVBbnkiLCB2b2lkIDAsIHZvaWQgMCk7CiAgICAgIGFueU1hcC5nZXQodGhpcykuYWRkKGxpc3RlbmVyKTsKICAgICAgZW1pdE1ldGFFdmVudCh0aGlzLCBsaXN0ZW5lckFkZGVkLCB7IGxpc3RlbmVyIH0pOwogICAgICByZXR1cm4gdGhpcy5vZmZBbnkuYmluZCh0aGlzLCBsaXN0ZW5lcik7CiAgICB9CiAgICBhbnlFdmVudCgpIHsKICAgICAgcmV0dXJuIGl0ZXJhdG9yKHRoaXMpOwogICAgfQogICAgb2ZmQW55KGxpc3RlbmVyKSB7CiAgICAgIGFzc2VydExpc3RlbmVyKGxpc3RlbmVyKTsKICAgICAgdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgidW5zdWJzY3JpYmVBbnkiLCB2b2lkIDAsIHZvaWQgMCk7CiAgICAgIGVtaXRNZXRhRXZlbnQodGhpcywgbGlzdGVuZXJSZW1vdmVkLCB7IGxpc3RlbmVyIH0pOwogICAgICBhbnlNYXAuZ2V0KHRoaXMpLmRlbGV0ZShsaXN0ZW5lcik7CiAgICB9CiAgICBjbGVhckxpc3RlbmVycyhldmVudE5hbWVzKSB7CiAgICAgIGV2ZW50TmFtZXMgPSBBcnJheS5pc0FycmF5KGV2ZW50TmFtZXMpID8gZXZlbnROYW1lcyA6IFtldmVudE5hbWVzXTsKICAgICAgZm9yIChjb25zdCBldmVudE5hbWUgb2YgZXZlbnROYW1lcykgewogICAgICAgIHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImNsZWFyIiwgZXZlbnROYW1lLCB2b2lkIDApOwogICAgICAgIGlmICh0eXBlb2YgZXZlbnROYW1lID09PSAic3RyaW5nIiB8fCB0eXBlb2YgZXZlbnROYW1lID09PSAic3ltYm9sIiB8fCB0eXBlb2YgZXZlbnROYW1lID09PSAibnVtYmVyIikgewogICAgICAgICAgY29uc3Qgc2V0ID0gZ2V0TGlzdGVuZXJzKHRoaXMsIGV2ZW50TmFtZSk7CiAgICAgICAgICBpZiAoc2V0KSB7CiAgICAgICAgICAgIHNldC5jbGVhcigpOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgcHJvZHVjZXJzID0gZ2V0RXZlbnRQcm9kdWNlcnModGhpcywgZXZlbnROYW1lKTsKICAgICAgICAgIGlmIChwcm9kdWNlcnMpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBwcm9kdWNlciBvZiBwcm9kdWNlcnMpIHsKICAgICAgICAgICAgICBwcm9kdWNlci5maW5pc2goKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBwcm9kdWNlcnMuY2xlYXIoKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgYW55TWFwLmdldCh0aGlzKS5jbGVhcigpOwogICAgICAgICAgZm9yIChjb25zdCBbZXZlbnROYW1lMiwgbGlzdGVuZXJzXSBvZiBldmVudHNNYXAuZ2V0KHRoaXMpLmVudHJpZXMoKSkgewogICAgICAgICAgICBsaXN0ZW5lcnMuY2xlYXIoKTsKICAgICAgICAgICAgZXZlbnRzTWFwLmdldCh0aGlzKS5kZWxldGUoZXZlbnROYW1lMik7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGNvbnN0IFtldmVudE5hbWUyLCBwcm9kdWNlcnNdIG9mIHByb2R1Y2Vyc01hcC5nZXQodGhpcykuZW50cmllcygpKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvZHVjZXIgb2YgcHJvZHVjZXJzKSB7CiAgICAgICAgICAgICAgcHJvZHVjZXIuZmluaXNoKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcHJvZHVjZXJzLmNsZWFyKCk7CiAgICAgICAgICAgIHByb2R1Y2Vyc01hcC5nZXQodGhpcykuZGVsZXRlKGV2ZW50TmFtZTIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbGlzdGVuZXJDb3VudChldmVudE5hbWVzKSB7CiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mOwogICAgICBldmVudE5hbWVzID0gQXJyYXkuaXNBcnJheShldmVudE5hbWVzKSA/IGV2ZW50TmFtZXMgOiBbZXZlbnROYW1lc107CiAgICAgIGxldCBjb3VudCA9IDA7CiAgICAgIGZvciAoY29uc3QgZXZlbnROYW1lIG9mIGV2ZW50TmFtZXMpIHsKICAgICAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIGNvdW50ICs9IGFueU1hcC5nZXQodGhpcykuc2l6ZSArICgoX2IgPSAoX2EgPSBnZXRMaXN0ZW5lcnModGhpcywgZXZlbnROYW1lKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNpemUpICE9IG51bGwgPyBfYiA6IDApICsgKChfZCA9IChfYyA9IGdldEV2ZW50UHJvZHVjZXJzKHRoaXMsIGV2ZW50TmFtZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYy5zaXplKSAhPSBudWxsID8gX2QgOiAwKSArICgoX2YgPSAoX2UgPSBnZXRFdmVudFByb2R1Y2Vycyh0aGlzKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnNpemUpICE9IG51bGwgPyBfZiA6IDApOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGlmICh0eXBlb2YgZXZlbnROYW1lICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7CiAgICAgICAgfQogICAgICAgIGNvdW50ICs9IGFueU1hcC5nZXQodGhpcykuc2l6ZTsKICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGV2ZW50c01hcC5nZXQodGhpcykudmFsdWVzKCkpIHsKICAgICAgICAgIGNvdW50ICs9IHZhbHVlLnNpemU7CiAgICAgICAgfQogICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgcHJvZHVjZXJzTWFwLmdldCh0aGlzKS52YWx1ZXMoKSkgewogICAgICAgICAgY291bnQgKz0gdmFsdWUuc2l6ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGNvdW50OwogICAgfQogICAgYmluZE1ldGhvZHModGFyZ2V0LCBtZXRob2ROYW1lcykgewogICAgICBpZiAodHlwZW9mIHRhcmdldCAhPT0gIm9iamVjdCIgfHwgdGFyZ2V0ID09PSBudWxsKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYHRhcmdldGAgbXVzdCBiZSBhbiBvYmplY3QiKTsKICAgICAgfQogICAgICBtZXRob2ROYW1lcyA9IGRlZmF1bHRNZXRob2ROYW1lc09yQXNzZXJ0KG1ldGhvZE5hbWVzKTsKICAgICAgZm9yIChjb25zdCBtZXRob2ROYW1lIG9mIG1ldGhvZE5hbWVzKSB7CiAgICAgICAgaWYgKHRhcmdldFttZXRob2ROYW1lXSAhPT0gdm9pZCAwKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7bWV0aG9kTmFtZX1cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7CiAgICAgICAgfQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIG1ldGhvZE5hbWUsIHsKICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgdmFsdWU6IHRoaXNbbWV0aG9kTmFtZV0uYmluZCh0aGlzKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQogIGNvbnN0IGFsbEVtaXR0ZXJ5TWV0aG9kcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKEVtaXR0ZXJ5LnByb3RvdHlwZSkuZmlsdGVyKCh2KSA9PiB2ICE9PSAiY29uc3RydWN0b3IiKTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRW1pdHRlcnksICJsaXN0ZW5lckFkZGVkIiwgewogICAgdmFsdWU6IGxpc3RlbmVyQWRkZWQsCiAgICB3cml0YWJsZTogZmFsc2UsCiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiBmYWxzZQogIH0pOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbWl0dGVyeSwgImxpc3RlbmVyUmVtb3ZlZCIsIHsKICAgIHZhbHVlOiBsaXN0ZW5lclJlbW92ZWQsCiAgICB3cml0YWJsZTogZmFsc2UsCiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiBmYWxzZQogIH0pOwogIGZ1bmN0aW9uIGlzSW5zdGFuY2VPZkVtaXR0ZXJ5KGluc3RhbmNlKSB7CiAgICByZXR1cm4gaW5zdGFuY2Uub25BbnkgJiYgaW5zdGFuY2UuZW1pdDsKICB9CiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ29tbWFuZEZvcndhcmQoY29tbWFuZCwgY29udGV4dCkgewogICAgY29uc3QgeyBmdW5jdGlvbk5hbWUsIGFyZ3MgfSA9IGNvbW1hbmQ7CiAgICBpZiAoIWNvbnRleHQuaW5zdGFuY2UpIHsKICAgICAgdGhyb3cgImluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7CiAgICB9CiAgICBpZiAoIWZ1bmN0aW9uTmFtZSkgewogICAgICB0aHJvdyAibWlzc2luZyBmdW5jdGlvbiBuYW1lIHRvIGNhbGwiOwogICAgfQogICAgaWYgKCFjb250ZXh0Lmluc3RhbmNlW2Z1bmN0aW9uTmFtZV0pIHsKICAgICAgdGhyb3cgYHVuZGVmaW5lZCBmdW5jdGlvbiBbJHtmdW5jdGlvbk5hbWV9XSBpbiBjbGFzcyAke2NvbnRleHQuaW5zdGFuY2UuY29uc3RydWN0b3Iud29ya2VySWR9YDsKICAgIH0KICAgIHBvc3RDb21tYW5kKGNvbW1hbmQsIGF3YWl0IGNvbnRleHQuaW5zdGFuY2VbZnVuY3Rpb25OYW1lXSguLi5hcmdzICE9IG51bGwgPyBhcmdzIDogW10pKTsKICB9CiAgY29uc3QgcmVnaXN0ZXJlZFdvcmtlcnMgPSBjcmVhdGVHbG9iYWxUaGlzVmFyaWFibGUoInJlZ2lzdGVyZWRXb3JrZXJzIiwge30pOwogIGZ1bmN0aW9uIHJlZ2lzdGVyV29ya2VyKGlkLCByZWdpc3RyYWJsZSkgewogICAgcmVnaXN0cmFibGUud29ya2VySWQgPSBpZDsKICAgIGlmIChpc1dvcmtlcigpKSB7CiAgICAgIHJlZ2lzdGVyZWRXb3JrZXJzW3JlZ2lzdHJhYmxlLndvcmtlcklkXSA9IHJlZ2lzdHJhYmxlOwogICAgfQogIH0KICBmdW5jdGlvbiBoYW5kbGVDb21tYW5kSW5pdChjb21tYW5kLCBjb250ZXh0KSB7CiAgICBpZiAoIWNvbW1hbmQuYXJncykgewogICAgICB0aHJvdyAiTWlzc2luZyBjbGFzc05hbWUgd2hpbGUgaW5pdGlhbGl6aW5nIHdvcmtlciI7CiAgICB9CiAgICBjb25zdCBbY2xhc3NOYW1lLCBnbG9iYWxzVmFsdWVzXSA9IGNvbW1hbmQuYXJnczsKICAgIGNvbnN0IGNvbnN0cnVjdG9yID0gcmVnaXN0ZXJlZFdvcmtlcnNbY2xhc3NOYW1lXTsKICAgIGlmIChjb25zdHJ1Y3RvcikgewogICAgICBjb250ZXh0Lmluc3RhbmNlID0gbmV3IGNvbnN0cnVjdG9yKGNvbW1hbmQuYXJncy5zbGljZSgxKSk7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBgdW5rbm93biB3b3JrZXIgY2xhc3MgJHtjbGFzc05hbWV9YDsKICAgIH0KICAgIGNvcHkoZ2xvYmFsc1ZhbHVlcywgZ2xvYmFscyk7CiAgICBpZiAoaXNJbnN0YW5jZU9mRW1pdHRlcnkoY29udGV4dC5pbnN0YW5jZSkpIHsKICAgICAgY29udGV4dC5pbnN0YW5jZS5vbkFueSgobmFtZSwgZGF0YSkgPT4gewogICAgICAgIHBvc3RDb21tYW5kKAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiBDb21tYW5kVHlwZS5FVkVOVAogICAgICAgICAgfSwKICAgICAgICAgIHsgbmFtZSwgZGF0YSB9CiAgICAgICAgKTsKICAgICAgfSk7CiAgICB9CiAgICBwb3N0Q29tbWFuZChjb21tYW5kLCB0eXBlb2YgY29udGV4dC5pbnN0YW5jZSAhPT0gdm9pZCAwKTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ29tbWFuZFRlcm1pbmF0ZShjb21tYW5kLCBjb250ZXh0KSB7CiAgICBjb25zdCB7IGFyZ3MgfSA9IGNvbW1hbmQ7CiAgICBpZiAoIWNvbnRleHQuaW5zdGFuY2UpIHsKICAgICAgdGhyb3cgImluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7CiAgICB9CiAgICBsZXQgcmVzdWx0OwogICAgaWYgKGNvbnRleHQuaW5zdGFuY2UudGVybWluYXRlKSB7CiAgICAgIHJlc3VsdCA9IGF3YWl0IGNvbnRleHQuaW5zdGFuY2UudGVybWluYXRlKC4uLmFyZ3MgIT0gbnVsbCA/IGFyZ3MgOiBbXSk7CiAgICB9CiAgICBwb3N0Q29tbWFuZChjb21tYW5kLCByZXN1bHQpOwogIH0KICBmdW5jdGlvbiBoYW5kbGVDb21tYW5kR2xvYmFsc1N5bmMoY29tbWFuZCkgewogICAgaWYgKCFjb21tYW5kLmFyZ3MpIHsKICAgICAgdGhyb3cgIk1pc3NpbmcgZ2xvYmFscyB3aGlsZSBzeW5jaW5nIjsKICAgIH0KICAgIGNvcHkoY29tbWFuZC5hcmdzWzBdLCBnbG9iYWxzKTsKICAgIHBvc3RDb21tYW5kKGNvbW1hbmQsIHt9KTsKICB9CiAgZnVuY3Rpb24gaW5pdFdvcmtlcigpIHsKICAgIGNvbnN0IGNvbnRleHQgPSB7fTsKICAgIG9ubWVzc2FnZSA9IGFzeW5jIChldmVudCkgPT4gewogICAgICBjb25zdCBjb21tYW5kID0gZXZlbnQuZGF0YTsKICAgICAgc3dpdGNoIChjb21tYW5kLnR5cGUpIHsKICAgICAgICBjYXNlIENvbW1hbmRUeXBlLklOSVQ6CiAgICAgICAgICBoYW5kbGVDb21tYW5kSW5pdChjb21tYW5kLCBjb250ZXh0KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgQ29tbWFuZFR5cGUuRk9SV0FSRDoKICAgICAgICAgIGhhbmRsZUNvbW1hbmRGb3J3YXJkKGNvbW1hbmQsIGNvbnRleHQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBDb21tYW5kVHlwZS5URVJNSU5BVEU6CiAgICAgICAgICBoYW5kbGVDb21tYW5kVGVybWluYXRlKGNvbW1hbmQsIGNvbnRleHQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBDb21tYW5kVHlwZS5HTE9CQUxTX1NZTkM6CiAgICAgICAgICBoYW5kbGVDb21tYW5kR2xvYmFsc1N5bmMoY29tbWFuZCk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKICB9CiAgaWYgKGlzV29ya2VyKCkpIHsKICAgIGluaXRXb3JrZXIoKTsKICB9CgogIGxldCBsJDEgPSBjbGFzcyBsIHsKICB9OwogIGwkMS51cGRhdGVzID0gewogICAgdHJhbnNmb3JtZXJfbmV3OiAiTmV3IHRyYW5zZm9ybWVyIiwKICAgIHRyYW5zZm9ybWVyX251bGw6ICJOdWxsIHRyYW5zZm9ybWVyIgogIH07CiAgbCQxLmVycm9ycyA9IHsKICAgIHRyYW5zZm9ybWVyX25vbmU6ICJObyB0cmFuc2Zvcm1lcnMgcHJvdmlkZWQiLAogICAgdHJhbnNmb3JtZXJfc3RhcnQ6ICJDYW5ub3Qgc3RhcnQgdHJhbnNmb3JtZXIiLAogICAgdHJhbnNmb3JtZXJfdHJhbnNmb3JtOiAiQ2Fubm90IHRyYW5zZm9ybSBmcmFtZSIsCiAgICB0cmFuc2Zvcm1lcl9mbHVzaDogIkNhbm5vdCBmbHVzaCB0cmFuc2Zvcm1lciIsCiAgICByZWFkYWJsZV9udWxsOiAiUmVhZGFibGUgaXMgbnVsbCIsCiAgICB3cml0YWJsZV9udWxsOiAiV3JpdGFibGUgaXMgbnVsbCIKICB9OwogIGZ1bmN0aW9uIGokMih0KSB7CiAgICByZXR1cm4gdCAmJiB0Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsICJkZWZhdWx0IikgPyB0LmRlZmF1bHQgOiB0OwogIH0KICBjb25zdCBmJDIgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSwgVCQyID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIGckMiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBDJDIgPSBTeW1ib2woImFueVByb2R1Y2VyIiksIFUkMiA9IFByb21pc2UucmVzb2x2ZSgpLCBTJDEgPSBTeW1ib2woImxpc3RlbmVyQWRkZWQiKSwgUiQyID0gU3ltYm9sKCJsaXN0ZW5lclJlbW92ZWQiKTsKICBsZXQgQSQyID0gITE7CiAgZnVuY3Rpb24gcCQyKHQpIHsKICAgIGlmICh0eXBlb2YgdCAhPSAic3RyaW5nIiAmJiB0eXBlb2YgdCAhPSAic3ltYm9sIikKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiZXZlbnROYW1lIG11c3QgYmUgYSBzdHJpbmcgb3IgYSBzeW1ib2wiKTsKICB9CiAgZnVuY3Rpb24gYiQxKHQpIHsKICAgIGlmICh0eXBlb2YgdCAhPSAiZnVuY3Rpb24iKQogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24iKTsKICB9CiAgZnVuY3Rpb24gbSQyKHQsIGUpIHsKICAgIGNvbnN0IHIgPSBUJDIuZ2V0KHQpOwogICAgcmV0dXJuIHIuaGFzKGUpIHx8IHIuc2V0KGUsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpLCByLmdldChlKTsKICB9CiAgZnVuY3Rpb24gXyQyKHQsIGUpIHsKICAgIGNvbnN0IHIgPSB0eXBlb2YgZSA9PSAic3RyaW5nIiB8fCB0eXBlb2YgZSA9PSAic3ltYm9sIiA/IGUgOiBDJDIsIHMgPSBnJDIuZ2V0KHQpOwogICAgcmV0dXJuIHMuaGFzKHIpIHx8IHMuc2V0KHIsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpLCBzLmdldChyKTsKICB9CiAgZnVuY3Rpb24gQiQyKHQsIGUsIHIpIHsKICAgIGNvbnN0IHMgPSBnJDIuZ2V0KHQpOwogICAgaWYgKHMuaGFzKGUpKQogICAgICBmb3IgKGNvbnN0IGkgb2Ygcy5nZXQoZSkpCiAgICAgICAgaS5lbnF1ZXVlKHIpOwogICAgaWYgKHMuaGFzKEMkMikpIHsKICAgICAgY29uc3QgaSA9IFByb21pc2UuYWxsKFtlLCByXSk7CiAgICAgIGZvciAoY29uc3QgbiBvZiBzLmdldChDJDIpKQogICAgICAgIG4uZW5xdWV1ZShpKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gRCQyKHQsIGUpIHsKICAgIGUgPSBBcnJheS5pc0FycmF5KGUpID8gZSA6IFtlXTsKICAgIGxldCByID0gITEsIHMgPSAoKSA9PiB7CiAgICB9LCBpID0gW107CiAgICBjb25zdCBuID0gewogICAgICBlbnF1ZXVlKG8pIHsKICAgICAgICBpLnB1c2gobyksIHMoKTsKICAgICAgfSwKICAgICAgZmluaXNoKCkgewogICAgICAgIHIgPSAhMCwgcygpOwogICAgICB9CiAgICB9OwogICAgZm9yIChjb25zdCBvIG9mIGUpCiAgICAgIF8kMih0LCBvKS5hZGQobik7CiAgICByZXR1cm4gewogICAgICBhc3luYyBuZXh0KCkgewogICAgICAgIHJldHVybiBpID8gaS5sZW5ndGggPT09IDAgPyByID8gKGkgPSB2b2lkIDAsIHRoaXMubmV4dCgpKSA6IChhd2FpdCBuZXcgUHJvbWlzZSgobykgPT4gewogICAgICAgICAgcyA9IG87CiAgICAgICAgfSksIHRoaXMubmV4dCgpKSA6IHsKICAgICAgICAgIGRvbmU6ICExLAogICAgICAgICAgdmFsdWU6IGF3YWl0IGkuc2hpZnQoKQogICAgICAgIH0gOiB7IGRvbmU6ICEwIH07CiAgICAgIH0sCiAgICAgIGFzeW5jIHJldHVybihvKSB7CiAgICAgICAgaSA9IHZvaWQgMDsKICAgICAgICBmb3IgKGNvbnN0IGEgb2YgZSkKICAgICAgICAgIF8kMih0LCBhKS5kZWxldGUobik7CiAgICAgICAgcmV0dXJuIHMoKSwgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyB7IGRvbmU6ICEwLCB2YWx1ZTogYXdhaXQgbyB9IDogeyBkb25lOiAhMCB9OwogICAgICB9LAogICAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICB9OwogIH0KICBmdW5jdGlvbiAkJDIodCkgewogICAgaWYgKHQgPT09IHZvaWQgMCkKICAgICAgcmV0dXJuIEckMjsKICAgIGlmICghQXJyYXkuaXNBcnJheSh0KSkKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYG1ldGhvZE5hbWVzYCBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MiKTsKICAgIGZvciAoY29uc3QgZSBvZiB0KQogICAgICBpZiAoIUckMi5pbmNsdWRlcyhlKSkKICAgICAgICB0aHJvdyB0eXBlb2YgZSAhPSAic3RyaW5nIiA/IG5ldyBUeXBlRXJyb3IoImBtZXRob2ROYW1lc2AgZWxlbWVudCBtdXN0IGJlIGEgc3RyaW5nIikgOiBuZXcgRXJyb3IoYCR7ZX0gaXMgbm90IEVtaXR0ZXJ5IG1ldGhvZGApOwogICAgcmV0dXJuIHQ7CiAgfQogIGNvbnN0IE0kMiA9ICh0KSA9PiB0ID09PSBTJDEgfHwgdCA9PT0gUiQyOwogIGxldCBkJDIgPSBjbGFzcyBkIHsKICAgIHN0YXRpYyBtaXhpbihlLCByKSB7CiAgICAgIHJldHVybiByID0gJCQyKHIpLCAocykgPT4gewogICAgICAgIGlmICh0eXBlb2YgcyAhPSAiZnVuY3Rpb24iKQogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiYHRhcmdldGAgbXVzdCBiZSBmdW5jdGlvbiIpOwogICAgICAgIGZvciAoY29uc3QgbyBvZiByKQogICAgICAgICAgaWYgKHMucHJvdG90eXBlW29dICE9PSB2b2lkIDApCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHByb3BlcnR5IFxgJHtvfVxgIGFscmVhZHkgZXhpc3RzIG9uIFxgdGFyZ2V0XGBgKTsKICAgICAgICBmdW5jdGlvbiBpKCkgewogICAgICAgICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBlLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICExLAogICAgICAgICAgICB2YWx1ZTogbmV3IGQoKQogICAgICAgICAgfSksIHRoaXNbZV07CiAgICAgICAgfQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSwgZSwgewogICAgICAgICAgZW51bWVyYWJsZTogITEsCiAgICAgICAgICBnZXQ6IGkKICAgICAgICB9KTsKICAgICAgICBjb25zdCBuID0gKG8pID0+IGZ1bmN0aW9uKC4uLmEpIHsKICAgICAgICAgIHJldHVybiB0aGlzW2VdW29dKC4uLmEpOwogICAgICAgIH07CiAgICAgICAgZm9yIChjb25zdCBvIG9mIHIpCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIG8sIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITEsCiAgICAgICAgICAgIHZhbHVlOiBuKG8pCiAgICAgICAgICB9KTsKICAgICAgICByZXR1cm4gczsKICAgICAgfTsKICAgIH0KICAgIHN0YXRpYyBnZXQgaXNEZWJ1Z0VuYWJsZWQoKSB7CiAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPSAib2JqZWN0IikKICAgICAgICByZXR1cm4gQSQyOwogICAgICBjb25zdCB7IGVudjogZSB9ID0gcHJvY2VzcyB8fCB7IGVudjoge30gfTsKICAgICAgcmV0dXJuIGUuREVCVUcgPT09ICJlbWl0dGVyeSIgfHwgZS5ERUJVRyA9PT0gIioiIHx8IEEkMjsKICAgIH0KICAgIHN0YXRpYyBzZXQgaXNEZWJ1Z0VuYWJsZWQoZSkgewogICAgICBBJDIgPSBlOwogICAgfQogICAgY29uc3RydWN0b3IoZSA9IHt9KSB7CiAgICAgIGYkMi5zZXQodGhpcywgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSksIFQkMi5zZXQodGhpcywgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSksIGckMi5zZXQodGhpcywgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSksIHRoaXMuZGVidWcgPSBlLmRlYnVnIHx8IHt9LCB0aGlzLmRlYnVnLmVuYWJsZWQgPT09IHZvaWQgMCAmJiAodGhpcy5kZWJ1Zy5lbmFibGVkID0gITEpLCB0aGlzLmRlYnVnLmxvZ2dlciB8fCAodGhpcy5kZWJ1Zy5sb2dnZXIgPSAociwgcywgaSwgbikgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBuID0gSlNPTi5zdHJpbmdpZnkobik7CiAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICBuID0gYE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcga2V5cyBmYWlsZWQgdG8gc3RyaW5naWZ5OiAke09iamVjdC5rZXlzKG4pLmpvaW4oIiwiKX1gOwogICAgICAgIH0KICAgICAgICB0eXBlb2YgaSA9PSAic3ltYm9sIiAmJiAoaSA9IGkudG9TdHJpbmcoKSk7CiAgICAgICAgY29uc3QgbyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLCBhID0gYCR7by5nZXRIb3VycygpfToke28uZ2V0TWludXRlcygpfToke28uZ2V0U2Vjb25kcygpfS4ke28uZ2V0TWlsbGlzZWNvbmRzKCl9YDsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7YX1dW2VtaXR0ZXJ5OiR7cn1dWyR7c31dIEV2ZW50IE5hbWU6ICR7aX0KCWRhdGE6ICR7bn1gKTsKICAgICAgfSk7CiAgICB9CiAgICBsb2dJZkRlYnVnRW5hYmxlZChlLCByLCBzKSB7CiAgICAgIChkLmlzRGVidWdFbmFibGVkIHx8IHRoaXMuZGVidWcuZW5hYmxlZCkgJiYgdGhpcy5kZWJ1Zy5sb2dnZXIoZSwgdGhpcy5kZWJ1Zy5uYW1lLCByLCBzKTsKICAgIH0KICAgIG9uKGUsIHIpIHsKICAgICAgYiQxKHIpLCBlID0gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV07CiAgICAgIGZvciAoY29uc3QgcyBvZiBlKQogICAgICAgIHAkMihzKSwgbSQyKHRoaXMsIHMpLmFkZChyKSwgdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlIiwgcywgdm9pZCAwKSwgTSQyKHMpIHx8IHRoaXMuZW1pdChTJDEsIHsgZXZlbnROYW1lOiBzLCBsaXN0ZW5lcjogciB9KTsKICAgICAgcmV0dXJuIHRoaXMub2ZmLmJpbmQodGhpcywgZSwgcik7CiAgICB9CiAgICBvZmYoZSwgcikgewogICAgICBiJDEociksIGUgPSBBcnJheS5pc0FycmF5KGUpID8gZSA6IFtlXTsKICAgICAgZm9yIChjb25zdCBzIG9mIGUpCiAgICAgICAgcCQyKHMpLCBtJDIodGhpcywgcykuZGVsZXRlKHIpLCB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZSIsIHMsIHZvaWQgMCksIE0kMihzKSB8fCB0aGlzLmVtaXQoUiQyLCB7IGV2ZW50TmFtZTogcywgbGlzdGVuZXI6IHIgfSk7CiAgICB9CiAgICBvbmNlKGUpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyKSA9PiB7CiAgICAgICAgY29uc3QgcyA9IHRoaXMub24oZSwgKGkpID0+IHsKICAgICAgICAgIHMoKSwgcihpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICBldmVudHMoZSkgewogICAgICBlID0gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV07CiAgICAgIGZvciAoY29uc3QgciBvZiBlKQogICAgICAgIHAkMihyKTsKICAgICAgcmV0dXJuIEQkMih0aGlzLCBlKTsKICAgIH0KICAgIGFzeW5jIGVtaXQoZSwgcikgewogICAgICBwJDIoZSksIHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImVtaXQiLCBlLCByKSwgQiQyKHRoaXMsIGUsIHIpOwogICAgICBjb25zdCBzID0gbSQyKHRoaXMsIGUpLCBpID0gZiQyLmdldCh0aGlzKSwgbiA9IFsuLi5zXSwgbyA9IE0kMihlKSA/IFtdIDogWy4uLmldOwogICAgICBhd2FpdCBVJDIsIGF3YWl0IFByb21pc2UuYWxsKFsKICAgICAgICAuLi5uLm1hcChhc3luYyAoYSkgPT4gewogICAgICAgICAgaWYgKHMuaGFzKGEpKQogICAgICAgICAgICByZXR1cm4gYShyKTsKICAgICAgICB9KSwKICAgICAgICAuLi5vLm1hcChhc3luYyAoYSkgPT4gewogICAgICAgICAgaWYgKGkuaGFzKGEpKQogICAgICAgICAgICByZXR1cm4gYShlLCByKTsKICAgICAgICB9KQogICAgICBdKTsKICAgIH0KICAgIGFzeW5jIGVtaXRTZXJpYWwoZSwgcikgewogICAgICBwJDIoZSksIHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImVtaXRTZXJpYWwiLCBlLCByKTsKICAgICAgY29uc3QgcyA9IG0kMih0aGlzLCBlKSwgaSA9IGYkMi5nZXQodGhpcyksIG4gPSBbLi4uc10sIG8gPSBbLi4uaV07CiAgICAgIGF3YWl0IFUkMjsKICAgICAgZm9yIChjb25zdCBhIG9mIG4pCiAgICAgICAgcy5oYXMoYSkgJiYgYXdhaXQgYShyKTsKICAgICAgZm9yIChjb25zdCBhIG9mIG8pCiAgICAgICAgaS5oYXMoYSkgJiYgYXdhaXQgYShlLCByKTsKICAgIH0KICAgIG9uQW55KGUpIHsKICAgICAgcmV0dXJuIGIkMShlKSwgdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlQW55Iiwgdm9pZCAwLCB2b2lkIDApLCBmJDIuZ2V0KHRoaXMpLmFkZChlKSwgdGhpcy5lbWl0KFMkMSwgeyBsaXN0ZW5lcjogZSB9KSwgdGhpcy5vZmZBbnkuYmluZCh0aGlzLCBlKTsKICAgIH0KICAgIGFueUV2ZW50KCkgewogICAgICByZXR1cm4gRCQyKHRoaXMpOwogICAgfQogICAgb2ZmQW55KGUpIHsKICAgICAgYiQxKGUpLCB0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZUFueSIsIHZvaWQgMCwgdm9pZCAwKSwgdGhpcy5lbWl0KFIkMiwgeyBsaXN0ZW5lcjogZSB9KSwgZiQyLmdldCh0aGlzKS5kZWxldGUoZSk7CiAgICB9CiAgICBjbGVhckxpc3RlbmVycyhlKSB7CiAgICAgIGUgPSBBcnJheS5pc0FycmF5KGUpID8gZSA6IFtlXTsKICAgICAgZm9yIChjb25zdCByIG9mIGUpCiAgICAgICAgaWYgKHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImNsZWFyIiwgciwgdm9pZCAwKSwgdHlwZW9mIHIgPT0gInN0cmluZyIgfHwgdHlwZW9mIHIgPT0gInN5bWJvbCIpIHsKICAgICAgICAgIG0kMih0aGlzLCByKS5jbGVhcigpOwogICAgICAgICAgY29uc3QgcyA9IF8kMih0aGlzLCByKTsKICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBzKQogICAgICAgICAgICBpLmZpbmlzaCgpOwogICAgICAgICAgcy5jbGVhcigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmJDIuZ2V0KHRoaXMpLmNsZWFyKCk7CiAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgVCQyLmdldCh0aGlzKS52YWx1ZXMoKSkKICAgICAgICAgICAgcy5jbGVhcigpOwogICAgICAgICAgZm9yIChjb25zdCBzIG9mIGckMi5nZXQodGhpcykudmFsdWVzKCkpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHMpCiAgICAgICAgICAgICAgaS5maW5pc2goKTsKICAgICAgICAgICAgcy5jbGVhcigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGxpc3RlbmVyQ291bnQoZSkgewogICAgICBlID0gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV07CiAgICAgIGxldCByID0gMDsKICAgICAgZm9yIChjb25zdCBzIG9mIGUpIHsKICAgICAgICBpZiAodHlwZW9mIHMgPT0gInN0cmluZyIpIHsKICAgICAgICAgIHIgKz0gZiQyLmdldCh0aGlzKS5zaXplICsgbSQyKHRoaXMsIHMpLnNpemUgKyBfJDIodGhpcywgcykuc2l6ZSArIF8kMih0aGlzKS5zaXplOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIHR5cGVvZiBzIDwgInUiICYmIHAkMihzKSwgciArPSBmJDIuZ2V0KHRoaXMpLnNpemU7CiAgICAgICAgZm9yIChjb25zdCBpIG9mIFQkMi5nZXQodGhpcykudmFsdWVzKCkpCiAgICAgICAgICByICs9IGkuc2l6ZTsKICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZyQyLmdldCh0aGlzKS52YWx1ZXMoKSkKICAgICAgICAgIHIgKz0gaS5zaXplOwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfQogICAgYmluZE1ldGhvZHMoZSwgcikgewogICAgICBpZiAodHlwZW9mIGUgIT0gIm9iamVjdCIgfHwgZSA9PT0gbnVsbCkKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgdGFyZ2V0YCBtdXN0IGJlIGFuIG9iamVjdCIpOwogICAgICByID0gJCQyKHIpOwogICAgICBmb3IgKGNvbnN0IHMgb2YgcikgewogICAgICAgIGlmIChlW3NdICE9PSB2b2lkIDApCiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7c31cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHMsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICExLAogICAgICAgICAgdmFsdWU6IHRoaXNbc10uYmluZCh0aGlzKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfTsKICBjb25zdCBHJDIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkJDIucHJvdG90eXBlKS5maWx0ZXIoKHQpID0+IHQgIT09ICJjb25zdHJ1Y3RvciIpOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkJDIsICJsaXN0ZW5lckFkZGVkIiwgewogICAgdmFsdWU6IFMkMSwKICAgIHdyaXRhYmxlOiAhMSwKICAgIGVudW1lcmFibGU6ICEwLAogICAgY29uZmlndXJhYmxlOiAhMQogIH0pOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkJDIsICJsaXN0ZW5lclJlbW92ZWQiLCB7CiAgICB2YWx1ZTogUiQyLAogICAgd3JpdGFibGU6ICExLAogICAgZW51bWVyYWJsZTogITAsCiAgICBjb25maWd1cmFibGU6ICExCiAgfSk7CiAgdmFyIFkkMiA9IGQkMjsKICBjb25zdCB2JDIgPSAvKiBAX19QVVJFX18gKi8gaiQyKFkkMik7CiAgZnVuY3Rpb24gcSQyKHQpIHsKICAgIHJldHVybiB0eXBlb2YgdCA9PSAib2JqZWN0IiAmJiB0ICE9PSBudWxsICYmICJtZXNzYWdlIiBpbiB0ICYmIHR5cGVvZiB0Lm1lc3NhZ2UgPT0gInN0cmluZyI7CiAgfQogIGZ1bmN0aW9uIEoodCkgewogICAgaWYgKHEkMih0KSkKICAgICAgcmV0dXJuIHQ7CiAgICB0cnkgewogICAgICByZXR1cm4gbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KHQpKTsKICAgIH0gY2F0Y2ggewogICAgICByZXR1cm4gbmV3IEVycm9yKFN0cmluZyh0KSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIEkkMih0KSB7CiAgICByZXR1cm4gSih0KS5tZXNzYWdlOwogIH0KICB2YXIgSyQxID0gT2JqZWN0LmRlZmluZVByb3BlcnR5LCBYJDEgPSAodCwgZSwgcikgPT4gZSBpbiB0ID8gSyQxKHQsIGUsIHsgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCwgdmFsdWU6IHIgfSkgOiB0W2VdID0gciwgWiQxID0gKHQsIGUsIHIpID0+IChYJDEodCwgZSArICIiICwgciksIHIpOwogIGNvbnN0IGVlJDEgPSAiaGxnLnRva2JveC5jb20vcHJvZC9sb2dnaW5nL3ZjcF93ZWJydGMiLCByZSQxID0gImh0dHBzOi8vIiwgdGUkMSA9IDFlNDsKICBsZXQgdyQyOwogIGNvbnN0IHNlJDEgPSBuZXcgVWludDhBcnJheSgxNik7CiAgZnVuY3Rpb24gaWUkMSgpIHsKICAgIGlmICghdyQyICYmICh3JDIgPSB0eXBlb2YgY3J5cHRvIDwgInUiICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byksICF3JDIpKQogICAgICB0aHJvdyBuZXcgRXJyb3IoImNyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkIik7CiAgICByZXR1cm4gdyQyKHNlJDEpOwogIH0KICBjb25zdCBjJDEgPSBbXTsKICBmb3IgKGxldCB0ID0gMDsgdCA8IDI1NjsgKyt0KQogICAgYyQxLnB1c2goKHQgKyAyNTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7CiAgZnVuY3Rpb24gbmUkMSh0LCBlID0gMCkgewogICAgcmV0dXJuIChjJDFbdFtlICsgMF1dICsgYyQxW3RbZSArIDFdXSArIGMkMVt0W2UgKyAyXV0gKyBjJDFbdFtlICsgM11dICsgIi0iICsgYyQxW3RbZSArIDRdXSArIGMkMVt0W2UgKyA1XV0gKyAiLSIgKyBjJDFbdFtlICsgNl1dICsgYyQxW3RbZSArIDddXSArICItIiArIGMkMVt0W2UgKyA4XV0gKyBjJDFbdFtlICsgOV1dICsgIi0iICsgYyQxW3RbZSArIDEwXV0gKyBjJDFbdFtlICsgMTFdXSArIGMkMVt0W2UgKyAxMl1dICsgYyQxW3RbZSArIDEzXV0gKyBjJDFbdFtlICsgMTRdXSArIGMkMVt0W2UgKyAxNV1dKS50b0xvd2VyQ2FzZSgpOwogIH0KICBjb25zdCBvZSQxID0gdHlwZW9mIGNyeXB0byA8ICJ1IiAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byksIEgkMSA9IHsKICAgIHJhbmRvbVVVSUQ6IG9lJDEKICB9OwogIGZ1bmN0aW9uIGFlJDEodCwgZSwgcikgewogICAgaWYgKEgkMS5yYW5kb21VVUlEICYmICFlICYmICF0KQogICAgICByZXR1cm4gSCQxLnJhbmRvbVVVSUQoKTsKICAgIHQgPSB0IHx8IHt9OwogICAgY29uc3QgcyA9IHQucmFuZG9tIHx8ICh0LnJuZyB8fCBpZSQxKSgpOwogICAgaWYgKHNbNl0gPSBzWzZdICYgMTUgfCA2NCwgc1s4XSA9IHNbOF0gJiA2MyB8IDEyOCwgZSkgOwogICAgcmV0dXJuIG5lJDEocyk7CiAgfQogIGZ1bmN0aW9uIEYkMih0LCBlKSB7CiAgICBnbG9iYWxUaGlzLnZvbmFnZSB8fCAoZ2xvYmFsVGhpcy52b25hZ2UgPSB7fSksIGdsb2JhbFRoaXMudm9uYWdlLndvcmtlcml6ZXIgfHwgKGdsb2JhbFRoaXMudm9uYWdlLndvcmtlcml6ZXIgPSB7fSk7CiAgICBsZXQgciA9IGdsb2JhbFRoaXMudm9uYWdlLndvcmtlcml6ZXI7CiAgICByZXR1cm4gclt0XSB8fCAoclt0XSA9IGUpLCByW3RdOwogIH0KICBjb25zdCBoJDEgPSBGJDIoCiAgICAiZ2xvYmFscyIsCiAgICB7fQogICk7CiAgdmFyIHUkMiA9IC8qIEBfX1BVUkVfXyAqLyAoKHQpID0+ICh0LklOSVQgPSAiSU5JVCIsIHQuRk9SV0FSRCA9ICJGT1JXQVJEIiwgdC5URVJNSU5BVEUgPSAiVEVSTUlOQVRFIiwgdC5HTE9CQUxTX1NZTkMgPSAiR0xPQkFMU19TWU5DIiwgdCkpKHUkMiB8fCB7fSk7CiAgZnVuY3Rpb24geiQyKHQpIHsKICAgIHJldHVybiBbSW1hZ2VCaXRtYXAsIFJlYWRhYmxlU3RyZWFtLCBXcml0YWJsZVN0cmVhbV0uc29tZSgocikgPT4gdCBpbnN0YW5jZW9mIHIpOwogIH0KICBsZXQgY2UkMSA9IDA7CiAgZnVuY3Rpb24gbGUkMSh0LCBlLCByLCBzLCBpKSB7CiAgICBjb25zdCBuID0gY2UkMSsrOwogICAgcmV0dXJuIHQucG9zdE1lc3NhZ2UoCiAgICAgIHsKICAgICAgICBpZDogbiwKICAgICAgICB0eXBlOiBlLAogICAgICAgIGZ1bmN0aW9uTmFtZTogciwKICAgICAgICBhcmdzOiBzCiAgICAgIH0sCiAgICAgIHMuZmlsdGVyKChhKSA9PiB6JDIoYSkpCiAgICApLCBuZXcgUHJvbWlzZSgoYSkgPT4gewogICAgICBpID09IG51bGwgfHwgaS5zZXQobiwgYSk7CiAgICB9KTsKICB9CiAgZnVuY3Rpb24geSQyKHQsIGUpIHsKICAgIGNvbnN0IHsgaWQ6IHIsIHR5cGU6IHMgfSA9IHQsIGkgPSBBcnJheS5pc0FycmF5KGUpID8gZSA6IFtlXTsKICAgIHBvc3RNZXNzYWdlKAogICAgICB7CiAgICAgICAgaWQ6IHIsCiAgICAgICAgdHlwZTogcywKICAgICAgICByZXN1bHQ6IGUKICAgICAgfSwKICAgICAgaS5maWx0ZXIoKG4pID0+IHokMihuKSkKICAgICk7CiAgfQogIGNvbnN0IFEkMSA9IEYkMigid29ya2VyaXplZCIsIHt9KTsKICBmdW5jdGlvbiBWJDIoKSB7CiAgICByZXR1cm4gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlIDwgInUiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gZmUkMSgpIHsKICAgIGlmIChWJDIoKSkKICAgICAgeSQyKHsgdHlwZTogdSQyLkdMT0JBTFNfU1lOQyB9LCBoJDEpOwogICAgZWxzZSB7CiAgICAgIGNvbnN0IHQgPSBbXTsKICAgICAgZm9yIChjb25zdCBlIGluIFEkMSkgewogICAgICAgIGNvbnN0IHsgd29ya2VyOiByLCByZXNvbHZlcnM6IHMgfSA9IFEkMVtlXS53b3JrZXJDb250ZXh0OwogICAgICAgIHIgJiYgdC5wdXNoKAogICAgICAgICAgbGUkMSgKICAgICAgICAgICAgciwKICAgICAgICAgICAgdSQyLkdMT0JBTFNfU1lOQywKICAgICAgICAgICAgIiIsCiAgICAgICAgICAgIFtoJDFdLAogICAgICAgICAgICBzCiAgICAgICAgICApCiAgICAgICAgKTsKICAgICAgfQogICAgICBhd2FpdCBQcm9taXNlLmFsbCh0KTsKICAgIH0KICB9CiAgZnVuY3Rpb24gUCQyKHQsIGUpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KGUpKQogICAgICBlLnNwbGljZSgwLCBlLmxlbmd0aCk7CiAgICBlbHNlIGlmICh0eXBlb2YgZSA9PSAib2JqZWN0IikKICAgICAgZm9yIChjb25zdCByIGluIGUpCiAgICAgICAgZGVsZXRlIGVbcl07CiAgICBmb3IgKGNvbnN0IHIgaW4gdCkKICAgICAgQXJyYXkuaXNBcnJheSh0W3JdKSA/IChlW3JdID0gW10sIFAkMih0W3JdLCBlW3JdKSkgOiB0eXBlb2YgdFtyXSA9PSAib2JqZWN0IiA/IChlW3JdID0ge30sIFAkMih0W3JdLCBlW3JdKSkgOiBlW3JdID0gdFtyXTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gaGUkMSh0LCBlKSB7CiAgICBjb25zdCB7IGZ1bmN0aW9uTmFtZTogciwgYXJnczogcyB9ID0gdDsKICAgIGlmICghZS5pbnN0YW5jZSkKICAgICAgdGhyb3cgImluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7CiAgICBpZiAoIXIpCiAgICAgIHRocm93ICJtaXNzaW5nIGZ1bmN0aW9uIG5hbWUgdG8gY2FsbCI7CiAgICBpZiAoIWUuaW5zdGFuY2Vbcl0pCiAgICAgIHRocm93IGB1bmRlZmluZWQgZnVuY3Rpb24gWyR7cn1dIGluIGNsYXNzICR7ZS5pbnN0YW5jZS5jb25zdHJ1Y3Rvci53b3JrZXJJZH1gOwogICAgeSQyKHQsIGF3YWl0IGUuaW5zdGFuY2Vbcl0oLi4ucyA/PyBbXSkpOwogIH0KICBjb25zdCB1ZSQxID0gRiQyKCJyZWdpc3RlcmVkV29ya2VycyIsIHt9KTsKICBmdW5jdGlvbiBkZSQxKHQsIGUpIHsKICAgIGlmICghdC5hcmdzKQogICAgICB0aHJvdyAiTWlzc2luZyBjbGFzc05hbWUgd2hpbGUgaW5pdGlhbGl6aW5nIHdvcmtlciI7CiAgICBjb25zdCBbciwgc10gPSB0LmFyZ3MsIGkgPSB1ZSQxW3JdOwogICAgaWYgKGkpCiAgICAgIGUuaW5zdGFuY2UgPSBuZXcgaSh0LmFyZ3Muc2xpY2UoMSkpOwogICAgZWxzZQogICAgICB0aHJvdyBgdW5rbm93biB3b3JrZXIgY2xhc3MgJHtyfWA7CiAgICBQJDIocywgaCQxKSwgeSQyKHQsIHR5cGVvZiBlLmluc3RhbmNlICE9PSB2b2lkIDApOwogIH0KICBhc3luYyBmdW5jdGlvbiBwZSQxKHQsIGUpIHsKICAgIGNvbnN0IHsgYXJnczogciB9ID0gdDsKICAgIGlmICghZS5pbnN0YW5jZSkKICAgICAgdGhyb3cgImluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7CiAgICBsZXQgczsKICAgIGUuaW5zdGFuY2UudGVybWluYXRlICYmIChzID0gYXdhaXQgZS5pbnN0YW5jZS50ZXJtaW5hdGUoLi4uciA/PyBbXSkpLCB5JDIodCwgcyk7CiAgfQogIGZ1bmN0aW9uIG1lJDEodCkgewogICAgaWYgKCF0LmFyZ3MpCiAgICAgIHRocm93ICJNaXNzaW5nIGdsb2JhbHMgd2hpbGUgc3luY2luZyI7CiAgICBQJDIodC5hcmdzWzBdLCBoJDEpLCB5JDIodCwge30pOwogIH0KICBmdW5jdGlvbiBnZSQxKCkgewogICAgY29uc3QgdCA9IHt9OwogICAgb25tZXNzYWdlID0gYXN5bmMgKGUpID0+IHsKICAgICAgY29uc3QgciA9IGUuZGF0YTsKICAgICAgc3dpdGNoIChyLnR5cGUpIHsKICAgICAgICBjYXNlIHUkMi5JTklUOgogICAgICAgICAgZGUkMShyLCB0KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgdSQyLkZPUldBUkQ6CiAgICAgICAgICBoZSQxKHIsIHQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSB1JDIuVEVSTUlOQVRFOgogICAgICAgICAgcGUkMShyLCB0KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgdSQyLkdMT0JBTFNfU1lOQzoKICAgICAgICAgIG1lJDEocik7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKICB9CiAgViQyKCkgJiYgZ2UkMSgpOwogIGZ1bmN0aW9uIF9lJDEodCwgZSkgewogICAgcmV0dXJuIGgkMVt0XSB8fCAoaCQxW3RdID0gZSksIFsKICAgICAgKCkgPT4gaCQxW3RdLAogICAgICBhc3luYyAocikgPT4gewogICAgICAgIGgkMVt0XSA9IHIsIGF3YWl0IGZlJDEoKTsKICAgICAgfQogICAgXTsKICB9CiAgZnVuY3Rpb24geWUkMSh0LCBlKSB7CiAgICByZXR1cm4gX2UkMSh0LCBlKTsKICB9CiAgY29uc3QgW2JlJDEsIHdlJDFdID0geWUkMSgibWV0YWRhdGEiKTsKICBmdW5jdGlvbiB4ZSQxKHQpIHsKICAgIHdlJDEodCk7CiAgfQogIGZ1bmN0aW9uIHgkMigpIHsKICAgIHJldHVybiBiZSQxKCk7CiAgfQogIGxldCBMJDIgPSBjbGFzcyBMIHsKICAgIGNvbnN0cnVjdG9yKGUsIHIpIHsKICAgICAgWiQxKHRoaXMsICJ1dWlkIiksIHRoaXMuY29uZmlnID0gZSwgdGhpcy51dWlkID0gciA/PyBhZSQxKCk7CiAgICB9CiAgICBhc3luYyBzZW5kKGUpIHsKICAgICAgdmFyIHIsIHMsIGk7CiAgICAgIGNvbnN0IHsgYXBwSWQ6IG4sIHNvdXJjZVR5cGU6IG8gfSA9IChyID0geCQyKCkpICE9IG51bGwgPyByIDoge307CiAgICAgIGlmICghbiB8fCAhbykKICAgICAgICByZXR1cm4gIm1ldGFkYXRhIG1pc3NpbmciOwogICAgICBjb25zdCBhID0gbmV3IEFib3J0Q29udHJvbGxlcigpLCBrID0gc2V0VGltZW91dCgoKSA9PiBhLmFib3J0KCksIHRlJDEpOwogICAgICByZXR1cm4gYXdhaXQgKChpID0gKHMgPSB0aGlzLmNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IHMuZmV0Y2gpICE9IG51bGwgPyBpIDogZmV0Y2gpKHRoaXMuZ2V0VXJsKCksIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMoKSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLmJ1aWxkUmVwb3J0KGUpKSwKICAgICAgICBzaWduYWw6IGEuc2lnbmFsCiAgICAgIH0pLCBjbGVhclRpbWVvdXQoayksICJzdWNjZXNzIjsKICAgIH0KICAgIGdldFVybCgpIHsKICAgICAgdmFyIGU7CiAgICAgIGxldCByID0gKGUgPSB4JDIoKS5wcm94eVVybCkgIT0gbnVsbCA/IGUgOiByZSQxOwogICAgICByZXR1cm4gciArPSAoci5hdCgtMSkgPT09ICIvIiA/ICIiIDogIi8iKSArIGVlJDEsIHI7CiAgICB9CiAgICBnZXRIZWFkZXJzKCkgewogICAgICByZXR1cm4gewogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgfTsKICAgIH0KICAgIGJ1aWxkUmVwb3J0KGUpIHsKICAgICAgY29uc3QgciA9IHgkMigpOwogICAgICByZXR1cm4gewogICAgICAgIGd1aWQ6IHRoaXMudXVpZCwKICAgICAgICAuLi5lLAogICAgICAgIGFwcGxpY2F0aW9uSWQ6IHIuYXBwSWQsCiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLAogICAgICAgIHByb3h5VXJsOiByLnByb3h5VXJsLAogICAgICAgIHNvdXJjZTogci5zb3VyY2VUeXBlCiAgICAgIH07CiAgICB9CiAgfTsKICBjb25zdCBFJDIgPSAiMi4wLjQiOwogIGxldCBUZSQxID0gY2xhc3MgVGUgewogICAgY29uc3RydWN0b3IoZSwgcikgewogICAgICB0aGlzLmNvbmZpZyA9IGUsIHRoaXMuZnJhbWVUcmFuc2Zvcm1lZENvdW50ID0gMCwgdGhpcy5mcmFtZUZyb21Tb3VyY2VDb3VudCA9IDAsIHRoaXMuc3RhcnRBdCA9IDAsIHRoaXMucmVwb3J0ZXIgPSBuZXcgTCQyKGUsIHIpOwogICAgfQogICAgYXN5bmMgb25GcmFtZUZyb21Tb3VyY2UoKSB7CiAgICAgIHRoaXMuZnJhbWVGcm9tU291cmNlQ291bnQrKzsKICAgIH0KICAgIGdldCBmcHMoKSB7CiAgICAgIGNvbnN0IHsgc3RhcnRBdDogZSwgZnJhbWVGcm9tU291cmNlQ291bnQ6IHIgfSA9IHRoaXMsIGkgPSAoRGF0ZS5ub3coKSAtIGUpIC8gMWUzOwogICAgICByZXR1cm4gciAvIGk7CiAgICB9CiAgICBhc3luYyBvbkZyYW1lVHJhbnNmb3JtZWQoZSA9IHt9LCByID0gITEpIHsKICAgICAgdGhpcy5zdGFydEF0ID09PSAwICYmICh0aGlzLnN0YXJ0QXQgPSBEYXRlLm5vdygpKSwgdGhpcy5mcmFtZVRyYW5zZm9ybWVkQ291bnQrKzsKICAgICAgY29uc3QgeyBzdGFydEF0OiBzLCBmcmFtZVRyYW5zZm9ybWVkQ291bnQ6IGksIGZyYW1lRnJvbVNvdXJjZUNvdW50OiBuIH0gPSB0aGlzLCBvID0gRGF0ZS5ub3coKSwgYSA9IChvIC0gcykgLyAxZTMsIGsgPSBpIC8gYSwgVyA9IG4gLyBhOwogICAgICByZXR1cm4gciB8fCB0aGlzLmZyYW1lVHJhbnNmb3JtZWRDb3VudCA+PSB0aGlzLmNvbmZpZy5sb2dnaW5nSW50ZXJ2YWxGcmFtZUNvdW50ID8gKHRoaXMuZnJhbWVGcm9tU291cmNlQ291bnQgPSAwLCB0aGlzLmZyYW1lVHJhbnNmb3JtZWRDb3VudCA9IDAsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMucmVwb3J0ZXIuY29uZmlnID0gdGhpcy5jb25maWcsIHRoaXMucmVwb3J0ZXIuc2VuZCh7CiAgICAgICAgLi4udGhpcy5jb25maWcucmVwb3J0LAogICAgICAgIHZhcmlhdGlvbjogIlFvUyIsCiAgICAgICAgZnBzOiBXLAogICAgICAgIHRyYW5zZm9ybWVkRnBzOiBrLAogICAgICAgIGZyYW1lc1RyYW5zZm9ybWVkOiBpLAogICAgICAgIC4uLmUKICAgICAgfSkpIDogInN1Y2Nlc3MiOwogICAgfQogIH07CiAgdmFyIE8kMiA9IC8qIEBfX1BVUkVfXyAqLyAoKHQpID0+ICh0LnBpcGVsaW5lX2VuZGVkID0gInBpcGVsaW5lX2VuZGVkIiwgdC5waXBlbGluZV9lbmRlZF93aXRoX2Vycm9yID0gInBpcGVsaW5lX2VuZGVkX3dpdGhfZXJyb3IiLCB0LnBpcGVsaW5lX3N0YXJ0ZWQgPSAicGlwZWxpbmVfc3RhcnRlZCIsIHQucGlwZWxpbmVfc3RhcnRlZF93aXRoX2Vycm9yID0gInBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciIsIHQucGlwZWxpbmVfcmVzdGFydGVkID0gInBpcGVsaW5lX3Jlc3RhcnRlZCIsIHQucGlwZWxpbmVfcmVzdGFydGVkX3dpdGhfZXJyb3IgPSAicGlwZWxpbmVfcmVzdGFydGVkX3dpdGhfZXJyb3IiLCB0KSkoTyQyIHx8IHt9KTsKICBjb25zdCBSZSQxID0gNTAwLCBQZSQxID0gMC44OwogIGxldCBrZSQxID0gY2xhc3Mga2UgZXh0ZW5kcyB2JDIgewogICAgY29uc3RydWN0b3IoZSwgcikgewogICAgICBzdXBlcigpLCB0aGlzLnJlcG9ydGVyXyA9IG5ldyBMJDIoKSwgdGhpcy5yZXBvcnRlclFvc18gPSBuZXcgVGUkMSh7CiAgICAgICAgbG9nZ2luZ0ludGVydmFsRnJhbWVDb3VudDogUmUkMSwKICAgICAgICByZXBvcnQ6IHsKICAgICAgICAgIHZlcnNpb246IEUkMgogICAgICAgIH0KICAgICAgfSksIHRoaXMuaW5kZXhfID0gciwgdGhpcy50cmFuc2Zvcm1lcl8gPSBlLCB0aGlzLnNob3VsZFN0b3BfID0gITEsIHRoaXMuaXNGbGFzaGVkXyA9ICExLCB0aGlzLm1lZGlhVHJhbnNmb3JtZXJRb3NSZXBvcnRTdGFydFRpbWVzdGFtcF8gPSAwLCB0aGlzLnZpZGVvSGVpZ2h0XyA9IDAsIHRoaXMudmlkZW9XaWR0aF8gPSAwLCB0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyA9IC0xLCB0aGlzLnRyYW5zZm9ybWVyVHlwZV8gPSAiQ3VzdG9tIiwgImdldFRyYW5zZm9ybWVyVHlwZSIgaW4gZSAmJiAodGhpcy50cmFuc2Zvcm1lclR5cGVfID0gZS5nZXRUcmFuc2Zvcm1lclR5cGUoKSksIHRoaXMucmVwb3J0KHsKICAgICAgICB2YXJpYXRpb246ICJDcmVhdGUiCiAgICAgIH0pOwogICAgfQogICAgc2V0VHJhY2tFeHBlY3RlZFJhdGUoZSkgewogICAgICB0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyA9IGU7CiAgICB9CiAgICBhc3luYyBzdGFydChlKSB7CiAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJfID0gZSwgdGhpcy50cmFuc2Zvcm1lcl8gJiYgdHlwZW9mIHRoaXMudHJhbnNmb3JtZXJfLnN0YXJ0ID09ICJmdW5jdGlvbiIpCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGF3YWl0IHRoaXMudHJhbnNmb3JtZXJfLnN0YXJ0KGUpOwogICAgICAgIH0gY2F0Y2ggKHIpIHsKICAgICAgICAgIHRoaXMucmVwb3J0KHsKICAgICAgICAgICAgbWVzc2FnZTogbCQxLmVycm9ycy50cmFuc2Zvcm1lcl9zdGFydCwKICAgICAgICAgICAgdmFyaWF0aW9uOiAiRXJyb3IiLAogICAgICAgICAgICBlcnJvcjogSSQyKHIpCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnN0IHMgPSB7CiAgICAgICAgICAgIGV2ZW50TWV0YURhdGE6IHsgdHJhbnNmb3JtZXJJbmRleDogdGhpcy5pbmRleF8gfSwKICAgICAgICAgICAgZXJyb3I6IHIsCiAgICAgICAgICAgIGZ1bmN0aW9uOiAic3RhcnQiCiAgICAgICAgICAgIC8qIHN0YXJ0ICovCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5lbWl0KCJlcnJvciIsIHMpOwogICAgICAgIH0KICAgIH0KICAgIGFzeW5jIHRyYW5zZm9ybShlLCByKSB7CiAgICAgIHZhciBzLCBpOwogICAgICBpZiAodGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfID09PSAwICYmICh0aGlzLm1lZGlhVHJhbnNmb3JtZXJRb3NSZXBvcnRTdGFydFRpbWVzdGFtcF8gPSBEYXRlLm5vdygpKSwgZSBpbnN0YW5jZW9mIFZpZGVvRnJhbWUgJiYgKHRoaXMudmlkZW9IZWlnaHRfID0gKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuZGlzcGxheUhlaWdodCkgPz8gMCwgdGhpcy52aWRlb1dpZHRoXyA9IChlID09IG51bGwgPyB2b2lkIDAgOiBlLmRpc3BsYXlXaWR0aCkgPz8gMCksIHRoaXMucmVwb3J0ZXJRb3NfLm9uRnJhbWVGcm9tU291cmNlKCksIHRoaXMudHJhbnNmb3JtZXJfKQogICAgICAgIGlmICh0aGlzLnNob3VsZFN0b3BfKQogICAgICAgICAgY29uc29sZS53YXJuKCJbUGlwZWxpbmVdIGZsdXNoIGZyb20gdHJhbnNmb3JtIiksIGUuY2xvc2UoKSwgdGhpcy5mbHVzaChyKSwgci50ZXJtaW5hdGUoKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGF3YWl0ICgoaSA9IChzID0gdGhpcy50cmFuc2Zvcm1lcl8pLnRyYW5zZm9ybSkgPT0gbnVsbCA/IHZvaWQgMCA6IGkuY2FsbChzLCBlLCByKSksIHRoaXMucmVwb3J0UW9zKCk7CiAgICAgICAgICB9IGNhdGNoIChuKSB7CiAgICAgICAgICAgIHRoaXMucmVwb3J0KHsKICAgICAgICAgICAgICBtZXNzYWdlOiBsJDEuZXJyb3JzLnRyYW5zZm9ybWVyX3RyYW5zZm9ybSwKICAgICAgICAgICAgICB2YXJpYXRpb246ICJFcnJvciIsCiAgICAgICAgICAgICAgZXJyb3I6IEkkMihuKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgbyA9IHsKICAgICAgICAgICAgICBldmVudE1ldGFEYXRhOiB7IHRyYW5zZm9ybWVySW5kZXg6IHRoaXMuaW5kZXhfIH0sCiAgICAgICAgICAgICAgZXJyb3I6IG4sCiAgICAgICAgICAgICAgZnVuY3Rpb246ICJ0cmFuc2Zvcm0iCiAgICAgICAgICAgICAgLyogdHJhbnNmb3JtICovCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuZW1pdCgiZXJyb3IiLCBvKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyAhPSAtMSAmJiB0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyAqIFBlJDEgPiB0aGlzLnJlcG9ydGVyUW9zXy5mcHMpIHsKICAgICAgICAgICAgY29uc3QgbiA9IHsKICAgICAgICAgICAgICBldmVudE1ldGFEYXRhOiB7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lckluZGV4OiB0aGlzLmluZGV4XwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICJmcHNfZHJvcCIsCiAgICAgICAgICAgICAgZHJvcEluZm86IHsKICAgICAgICAgICAgICAgIHJlcXVlc3RlZDogdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8sCiAgICAgICAgICAgICAgICBjdXJyZW50OiB0aGlzLnJlcG9ydGVyUW9zXy5mcHMKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuZW1pdCgid2FybiIsIG4pOwogICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGFzeW5jIGZsdXNoKGUpIHsKICAgICAgaWYgKHRoaXMudHJhbnNmb3JtZXJfICYmIHR5cGVvZiB0aGlzLnRyYW5zZm9ybWVyXy5mbHVzaCA9PSAiZnVuY3Rpb24iICYmICF0aGlzLmlzRmxhc2hlZF8pIHsKICAgICAgICB0aGlzLmlzRmxhc2hlZF8gPSAhMDsKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgdGhpcy50cmFuc2Zvcm1lcl8uZmx1c2goZSk7CiAgICAgICAgfSBjYXRjaCAocikgewogICAgICAgICAgdGhpcy5yZXBvcnQoewogICAgICAgICAgICBtZXNzYWdlOiBsJDEuZXJyb3JzLnRyYW5zZm9ybWVyX2ZsdXNoLAogICAgICAgICAgICB2YXJpYXRpb246ICJFcnJvciIsCiAgICAgICAgICAgIGVycm9yOiBJJDIocikKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc3QgcyA9IHsKICAgICAgICAgICAgZXZlbnRNZXRhRGF0YTogeyB0cmFuc2Zvcm1lckluZGV4OiB0aGlzLmluZGV4XyB9LAogICAgICAgICAgICBlcnJvcjogciwKICAgICAgICAgICAgZnVuY3Rpb246ICJmbHVzaCIKICAgICAgICAgICAgLyogZmx1c2ggKi8KICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmVtaXQoImVycm9yIiwgcyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMucmVwb3J0UW9zKCEwKSwgdGhpcy5yZXBvcnQoewogICAgICAgIHZhcmlhdGlvbjogIkRlbGV0ZSIKICAgICAgfSk7CiAgICB9CiAgICBzdG9wKCkgewogICAgICBjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBTdG9wIHN0cmVhbS4iKSwgdGhpcy5jb250cm9sbGVyXyAmJiAodGhpcy5mbHVzaCh0aGlzLmNvbnRyb2xsZXJfKSwgdGhpcy5jb250cm9sbGVyXy50ZXJtaW5hdGUoKSksIHRoaXMuc2hvdWxkU3RvcF8gPSAhMDsKICAgIH0KICAgIHJlcG9ydChlKSB7CiAgICAgIHRoaXMucmVwb3J0ZXJfLnNlbmQoewogICAgICAgIHZlcnNpb246IEUkMiwKICAgICAgICBhY3Rpb246ICJNZWRpYVRyYW5zZm9ybWVyIiwKICAgICAgICB0cmFuc2Zvcm1lclR5cGU6IHRoaXMudHJhbnNmb3JtZXJUeXBlXywKICAgICAgICAuLi5lCiAgICAgIH0pOwogICAgfQogICAgcmVwb3J0UW9zKGUgPSAhMSkgewogICAgICB0aGlzLnJlcG9ydGVyUW9zXy5jb25maWcgPSB7CiAgICAgICAgLi4udGhpcy5yZXBvcnRlclFvc18uY29uZmlnCiAgICAgIH0sIHRoaXMucmVwb3J0ZXJRb3NfLm9uRnJhbWVUcmFuc2Zvcm1lZCgKICAgICAgICB7CiAgICAgICAgICB2ZXJzaW9uOiBFJDIsCiAgICAgICAgICBhY3Rpb246ICJNZWRpYVRyYW5zZm9ybWVyIiwKICAgICAgICAgIHRyYW5zZm9ybWVyVHlwZTogdGhpcy50cmFuc2Zvcm1lclR5cGVfLAogICAgICAgICAgdmlkZW9XaWR0aDogdGhpcy52aWRlb1dpZHRoXywKICAgICAgICAgIHZpZGVvSGVpZ2h0OiB0aGlzLnZpZGVvSGVpZ2h0XwogICAgICAgIH0sCiAgICAgICAgZQogICAgICApOwogICAgfQogIH07CiAgbGV0IEFlJDEgPSBjbGFzcyBBZSBleHRlbmRzIHYkMiB7CiAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgIHN1cGVyKCksIHRoaXMudHJhbnNmb3JtZXJzXyA9IFtdLCB0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyA9IC0xOwogICAgICBmb3IgKGxldCByID0gMDsgciA8IGUubGVuZ3RoOyByKyspIHsKICAgICAgICBsZXQgcyA9IG5ldyBrZSQxKGVbcl0sIHIpOwogICAgICAgIHMub24oImVycm9yIiwgKGkpID0+IHsKICAgICAgICAgIHRoaXMuZW1pdCgiZXJyb3IiLCBpKTsKICAgICAgICB9KSwgcy5vbigid2FybiIsIChpKSA9PiB7CiAgICAgICAgICB0aGlzLmVtaXQoIndhcm4iLCBpKTsKICAgICAgICB9KSwgdGhpcy50cmFuc2Zvcm1lcnNfLnB1c2gocyk7CiAgICAgIH0KICAgIH0KICAgIHNldFRyYWNrRXhwZWN0ZWRSYXRlKGUpIHsKICAgICAgdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8gPSBlOwogICAgICBmb3IgKGxldCByIG9mIHRoaXMudHJhbnNmb3JtZXJzXykKICAgICAgICByLnNldFRyYWNrRXhwZWN0ZWRSYXRlKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfKTsKICAgIH0KICAgIGFzeW5jIHN0YXJ0KGUsIHIpIHsKICAgICAgaWYgKCF0aGlzLnRyYW5zZm9ybWVyc18gfHwgdGhpcy50cmFuc2Zvcm1lcnNfLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGNvbnNvbGUubG9nKCJbUGlwZWxpbmVdIE5vIHRyYW5zZm9ybWVycy4iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBsZXQgcyA9IGU7CiAgICAgICAgZm9yIChsZXQgaSBvZiB0aGlzLnRyYW5zZm9ybWVyc18pCiAgICAgICAgICBlID0gZS5waXBlVGhyb3VnaCgKICAgICAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbShpKQogICAgICAgICAgKTsKICAgICAgICBlLnBpcGVUbyhyKS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUGlwZWxpbmVdIFNldHVwLiIpLCBhd2FpdCByLmFib3J0KCksIGF3YWl0IHMuY2FuY2VsKCksIHRoaXMuZW1pdCgKICAgICAgICAgICAgInBpcGVsaW5lSW5mbyIsCiAgICAgICAgICAgICJwaXBlbGluZV9lbmRlZCIKICAgICAgICAgICAgLyogcGlwZWxpbmVfZW5kZWQgKi8KICAgICAgICAgICk7CiAgICAgICAgfSkuY2F0Y2goYXN5bmMgKGkpID0+IHsKICAgICAgICAgIGUuY2FuY2VsKCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICJbUGlwZWxpbmVdIFNodXR0aW5nIGRvd24gc3RyZWFtcyBhZnRlciBhYm9ydC4iCiAgICAgICAgICAgICk7CiAgICAgICAgICB9KS5jYXRjaCgobikgPT4gewogICAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJbUGlwZWxpbmVdIEVycm9yIGZyb20gc3RyZWFtIHRyYW5zZm9ybToiLAogICAgICAgICAgICAgIG4KICAgICAgICAgICAgKTsKICAgICAgICAgIH0pLCBhd2FpdCByLmFib3J0KGkpLCBhd2FpdCBzLmNhbmNlbChpKSwgdGhpcy5lbWl0KAogICAgICAgICAgICAicGlwZWxpbmVJbmZvIiwKICAgICAgICAgICAgInBpcGVsaW5lX2VuZGVkX3dpdGhfZXJyb3IiCiAgICAgICAgICAgIC8qIHBpcGVsaW5lX2VuZGVkX3dpdGhfZXJyb3IgKi8KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggewogICAgICAgIHRoaXMuZW1pdCgKICAgICAgICAgICJwaXBlbGluZUluZm8iLAogICAgICAgICAgInBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciIKICAgICAgICAgIC8qIHBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciAqLwogICAgICAgICksIHRoaXMuZGVzdHJveSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmVtaXQoCiAgICAgICAgInBpcGVsaW5lSW5mbyIsCiAgICAgICAgInBpcGVsaW5lX3N0YXJ0ZWQiCiAgICAgICAgLyogcGlwZWxpbmVfc3RhcnRlZCAqLwogICAgICApLCBjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBQaXBlbGluZSBzdGFydGVkLiIpOwogICAgfQogICAgYXN5bmMgZGVzdHJveSgpIHsKICAgICAgY29uc29sZS5sb2coIltQaXBlbGluZV0gRGVzdHJveWluZyBQaXBlbGluZS4iKTsKICAgICAgZm9yIChsZXQgZSBvZiB0aGlzLnRyYW5zZm9ybWVyc18pCiAgICAgICAgZS5zdG9wKCk7CiAgICB9CiAgfTsKICBsZXQgQ2UkMSA9IGNsYXNzIENlIGV4dGVuZHMgdiQyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcigpLCB0aGlzLnJlcG9ydGVyXyA9IG5ldyBMJDIoKSwgdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8gPSAtMSwgdGhpcy5yZXBvcnQoewogICAgICAgIHZhcmlhdGlvbjogIkNyZWF0ZSIKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIGV4cGVjdGVkIHJhdGUgb2YgdGhlIHRyYWNrIHBlciBzZWNvbmQuCiAgICAgKiBUaGUgbWVkaWEgcHJvY2Vzc29yIHdpbGwgdXNlIHRoaXMgbnVtYmVyIGZvciBjYWxjdWxhdGluZyBkcm9wcyBpbiB0aGUgcmF0ZS4KICAgICAqIFRoaXMgY291bGQgaGFwcGVuIHdoZW4gdGhlIHRyYW5zZm9ybWF0aW9uIHdpbGwgdGFrZSBtb3JlIHRpbWUgdGhhbiBleHBlY3RlZC4KICAgICAqIFRoaXMgd2lsbCBub3QgY2F1c2UgYW4gZXJyb3IsIGp1c3Qgd2FybmluZyB0byB0aGUgY2xpZW50LgogICAgICogTW9zdGx5OgogICAgICogVmlkZW86IDMwIGZyYW1lcyBwZXIgc2Vjb25kCiAgICAgKiBBdWRpbzogNTAgYXVkaW8gZGF0YSBwZXIgc2Vjb25kIGZvciBPUFVTCiAgICAgKiBJbiBjYXNlIG9mIGluY3JlYXNlZCBmcmFtZSBkcm9wcGluZyByYXRlIGEgd2FybmluZyB3aWxsIGJlIGVtaXR0ZWQgYWNjb3JkaW5nIHRvIGluZm8gW2hlcmVdKC9kb2NzL2ludHJvI2Vycm9ycy1hbmQtd2FybmluZ3MtbGlzdGVuZXIpLgogICAgICogKioqVGhpcyBpcyBhbiBvcHRpb25hbCBtZXRob2QuKioqCiAgICAgKiBAcGFyYW0gdHJhY2tFeHBlY3RlZFJhdGUgLSBudW1iZXIgaG9sZHMgdGhlIHByZWRpY3RlZCB0cmFjayByYXRlLgogICAgICovCiAgICBzZXRUcmFja0V4cGVjdGVkUmF0ZShlKSB7CiAgICAgIHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfID0gZSwgdGhpcy5waXBlbGluZV8gJiYgdGhpcy5waXBlbGluZV8uc2V0VHJhY2tFeHBlY3RlZFJhdGUodGhpcy50cmFja0V4cGVjdGVkUmF0ZV8pOwogICAgfQogICAgLyoqCiAgICAgKiBTdGFydHMgcnVubmluZyB0aGUgdHJhbmZvcm1hdGlvbiBsb2dpYyBwZXJmb3JtZWQgYnkgdGhlIG1lZGlhIHByb2Nlc3NvciBpbnN0YW5jZS4KICAgICAqIFdoZW4gcnVubmluZyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIG9uIGEgV2ViIHdvcmtlciB0aHJlYWQgdGhlIGNhbGwgZm9yIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIG1hZGUgYnkgdGhlIHVzZXIuIFNlZSBleGFtcGxlIFtoZXJlXSgvZG9jcy9pbnRybyN3ZWJ3b3JrZXItY29kZSkuCiAgICAgKiBXaGVuIHJ1bm5pbmcgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBvbiB0aGUgYXBwbGljYXRpb24gbWFpbiB0aHJlYWQgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIHRoaXMgbWV0aG9kIGdpdmVuIGl0IHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBgTWVkaWFQcm9jZXNzb3JDb25uZWN0b3JgIGluc3RhbmNlLgogICAgICoKICAgICAqIEBwYXJhbSByZWFkYWJsZSBSZWFkYWJsZSBzdHJlYW0gYXNzb2NpYXRlZCB0byB0aGUgbWVkaWEgc291cmNlIGJlaW5nIHByb2Nlc3NlZC4KICAgICAqIEBwYXJhbSB3cml0YWJsZSBXcml0YWJsZSBzdHJlYW0gYXNzb2NpYXRlZCB0byB0aGUgcmVzdWx0aW5nIG1lZGlhIG9uY2UgcHJvY2Vzc2VkLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKi8KICAgIHRyYW5zZm9ybShlLCByKSB7CiAgICAgIHJldHVybiB0aGlzLnJlYWRhYmxlXyA9IGUsIHRoaXMud3JpdGFibGVfID0gciwgdGhpcy50cmFuc2Zvcm1JbnRlcm5hbCgpOwogICAgfQogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICovCiAgICB0cmFuc2Zvcm1JbnRlcm5hbCgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChlLCByKSA9PiB7CiAgICAgICAgaWYgKCF0aGlzLnRyYW5zZm9ybWVyc18gfHwgdGhpcy50cmFuc2Zvcm1lcnNfLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgdGhpcy5yZXBvcnQoewogICAgICAgICAgICBtZXNzYWdlOiBsJDEuZXJyb3JzLnRyYW5zZm9ybWVyX25vbmUsCiAgICAgICAgICAgIHZhcmlhdGlvbjogIkVycm9yIgogICAgICAgICAgfSksIHIoIltNZWRpYVByb2Nlc3Nvcl0gTmVlZCB0byBzZXQgdHJhbnNmb3JtZXJzLiIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIXRoaXMucmVhZGFibGVfKSB7CiAgICAgICAgICB0aGlzLnJlcG9ydCh7CiAgICAgICAgICAgIHZhcmlhdGlvbjogIkVycm9yIiwKICAgICAgICAgICAgbWVzc2FnZTogbCQxLmVycm9ycy5yZWFkYWJsZV9udWxsCiAgICAgICAgICB9KSwgcigiW01lZGlhUHJvY2Vzc29yXSBSZWFkYWJsZSBpcyBudWxsLiIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIXRoaXMud3JpdGFibGVfKSB7CiAgICAgICAgICB0aGlzLnJlcG9ydCh7CiAgICAgICAgICAgIHZhcmlhdGlvbjogIkVycm9yIiwKICAgICAgICAgICAgbWVzc2FnZTogbCQxLmVycm9ycy53cml0YWJsZV9udWxsCiAgICAgICAgICB9KSwgcigiW01lZGlhUHJvY2Vzc29yXSBXcml0YWJsZSBpcyBudWxsLiIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgcyA9ICExOwogICAgICAgIHRoaXMucGlwZWxpbmVfICYmIChzID0gITAsIHRoaXMucGlwZWxpbmVfLmNsZWFyTGlzdGVuZXJzKCksIHRoaXMucGlwZWxpbmVfLmRlc3Ryb3koKSksIHRoaXMucGlwZWxpbmVfID0gbmV3IEFlJDEodGhpcy50cmFuc2Zvcm1lcnNfKSwgdGhpcy5waXBlbGluZV8ub24oIndhcm4iLCAoaSkgPT4gewogICAgICAgICAgdGhpcy5lbWl0KCJ3YXJuIiwgaSk7CiAgICAgICAgfSksIHRoaXMucGlwZWxpbmVfLm9uKCJlcnJvciIsIChpKSA9PiB7CiAgICAgICAgICB0aGlzLmVtaXQoImVycm9yIiwgaSk7CiAgICAgICAgfSksIHRoaXMucGlwZWxpbmVfLm9uKCJwaXBlbGluZUluZm8iLCAoaSkgPT4gewogICAgICAgICAgcyAmJiAoaSA9PT0gInBpcGVsaW5lX3N0YXJ0ZWQiID8gaSA9IE8kMi5waXBlbGluZV9yZXN0YXJ0ZWQgOiBpID09PSAicGlwZWxpbmVfc3RhcnRlZF93aXRoX2Vycm9yIiAmJiAoaSA9IE8kMi5waXBlbGluZV9yZXN0YXJ0ZWRfd2l0aF9lcnJvcikpLCB0aGlzLmVtaXQoInBpcGVsaW5lSW5mbyIsIGkpOwogICAgICAgIH0pLCB0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyAhPSAtMSAmJiB0aGlzLnBpcGVsaW5lXy5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyksIHRoaXMucGlwZWxpbmVfLnN0YXJ0KHRoaXMucmVhZGFibGVfLCB0aGlzLndyaXRhYmxlXykudGhlbigoKSA9PiB7CiAgICAgICAgICBlKCk7CiAgICAgICAgfSkuY2F0Y2goKGkpID0+IHsKICAgICAgICAgIHIoaSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFuIGFycmF5IG9mIHRyYW5zZnJvbWVyIGluc3RhbmNlcyB0aGF0IHdpbGwgYmUgaG9sZCBhbmQgcmFuIGJ5IHRoZSBtZWRpYSBwcm9jZXNzb3IgaW5zdGFuY2UuCiAgICAgKiBTZWUgZXhhbXBsZSBbaGVyZV0oL2RvY3MvaW50cm8jbWFpbi1jb2RlKQogICAgICoKICAgICAqIEBwYXJhbSB0cmFuc2Zvcm1lcnMgQW4gYXJyYXkgb2YgdHJhbnNmb3JtZXIgaW5zdGFuY2VzLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKi8KICAgIHNldFRyYW5zZm9ybWVycyhlKSB7CiAgICAgIHJldHVybiB0aGlzLnJlcG9ydCh7CiAgICAgICAgdmFyaWF0aW9uOiAiVXBkYXRlIiwKICAgICAgICBtZXNzYWdlOiBsJDEudXBkYXRlcy50cmFuc2Zvcm1lcl9uZXcKICAgICAgfSksIHRoaXMudHJhbnNmb3JtZXJzXyA9IGUsIHRoaXMucmVhZGFibGVfICYmIHRoaXMud3JpdGFibGVfID8gdGhpcy50cmFuc2Zvcm1JbnRlcm5hbCgpIDogUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9CiAgICAvKioKICAgICAqIFN0b3BzIHJ1bm5pbmcgdGhlIHRyYW5mb3JtYXRpb24gbG9naWMgcGVyZm9ybWVkIGJ5IHRoZSBtZWRpYSBwcm9jZXNzb3IgaW5zdGFuY2UuCiAgICAgKiBAcmV0dXJucwogICAgICovCiAgICBkZXN0cm95KCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKGUpID0+IHsKICAgICAgICB0aGlzLnBpcGVsaW5lXyAmJiB0aGlzLnBpcGVsaW5lXy5kZXN0cm95KCksIHRoaXMucmVwb3J0KHsgdmFyaWF0aW9uOiAiRGVsZXRlIiB9KSwgZSgpOwogICAgICB9KTsKICAgIH0KICAgIHJlcG9ydChlKSB7CiAgICAgIHRoaXMucmVwb3J0ZXJfLnNlbmQoewogICAgICAgIHZlcnNpb246IEUkMiwKICAgICAgICBhY3Rpb246ICJNZWRpYVByb2Nlc3NvciIsCiAgICAgICAgLi4uZQogICAgICB9KTsKICAgIH0KICB9OwoKICB2YXIgVCQxID0gT2JqZWN0LmRlZmluZVByb3BlcnR5OwogIHZhciBBJDEgPSAoZSwgbiwgdCkgPT4gbiBpbiBlID8gVCQxKGUsIG4sIHsgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCwgdmFsdWU6IHQgfSkgOiBlW25dID0gdDsKICB2YXIgZiQxID0gKGUsIG4sIHQpID0+IChBJDEoZSwgbiArICIiICwgdCksIHQpOwogIGNvbnN0IFUkMSA9ICJobGcudG9rYm94LmNvbS9wcm9kL2xvZ2dpbmcvdmNwX3dlYnJ0YyIsIHYkMSA9ICJodHRwczovLyIsIE4kMSA9IDFlNDsKICBsZXQgZCQxOwogIGNvbnN0IEMkMSA9IG5ldyBVaW50OEFycmF5KDE2KTsKICBmdW5jdGlvbiBPJDEoKSB7CiAgICBpZiAoIWQkMSAmJiAoZCQxID0gdHlwZW9mIGNyeXB0byA8ICJ1IiAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pLCAhZCQxKSkKICAgICAgdGhyb3cgbmV3IEVycm9yKCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCIpOwogICAgcmV0dXJuIGQkMShDJDEpOwogIH0KICBjb25zdCBvJDEgPSBbXTsKICBmb3IgKGxldCBlID0gMDsgZSA8IDI1NjsgKytlKQogICAgbyQxLnB1c2goKGUgKyAyNTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7CiAgZnVuY3Rpb24gTSQxKGUsIG4gPSAwKSB7CiAgICByZXR1cm4gKG8kMVtlW24gKyAwXV0gKyBvJDFbZVtuICsgMV1dICsgbyQxW2VbbiArIDJdXSArIG8kMVtlW24gKyAzXV0gKyAiLSIgKyBvJDFbZVtuICsgNF1dICsgbyQxW2VbbiArIDVdXSArICItIiArIG8kMVtlW24gKyA2XV0gKyBvJDFbZVtuICsgN11dICsgIi0iICsgbyQxW2VbbiArIDhdXSArIG8kMVtlW24gKyA5XV0gKyAiLSIgKyBvJDFbZVtuICsgMTBdXSArIG8kMVtlW24gKyAxMV1dICsgbyQxW2VbbiArIDEyXV0gKyBvJDFbZVtuICsgMTNdXSArIG8kMVtlW24gKyAxNF1dICsgbyQxW2VbbiArIDE1XV0pLnRvTG93ZXJDYXNlKCk7CiAgfQogIGNvbnN0IEUkMSA9IHR5cGVvZiBjcnlwdG8gPCAidSIgJiYgY3J5cHRvLnJhbmRvbVVVSUQgJiYgY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pLCB3JDEgPSB7CiAgICByYW5kb21VVUlEOiBFJDEKICB9OwogIGZ1bmN0aW9uIEwkMShlLCBuLCB0KSB7CiAgICBpZiAodyQxLnJhbmRvbVVVSUQgJiYgIW4gJiYgIWUpCiAgICAgIHJldHVybiB3JDEucmFuZG9tVVVJRCgpOwogICAgZSA9IGUgfHwge307CiAgICBjb25zdCBpID0gZS5yYW5kb20gfHwgKGUucm5nIHx8IE8kMSkoKTsKICAgIGlmIChpWzZdID0gaVs2XSAmIDE1IHwgNjQsIGlbOF0gPSBpWzhdICYgNjMgfCAxMjgsIG4pIDsKICAgIHJldHVybiBNJDEoaSk7CiAgfQogIGZ1bmN0aW9uIHkkMShlLCBuKSB7CiAgICBnbG9iYWxUaGlzLnZvbmFnZSB8fCAoZ2xvYmFsVGhpcy52b25hZ2UgPSB7fSksIGdsb2JhbFRoaXMudm9uYWdlLndvcmtlcml6ZXIgfHwgKGdsb2JhbFRoaXMudm9uYWdlLndvcmtlcml6ZXIgPSB7fSk7CiAgICBsZXQgdCA9IGdsb2JhbFRoaXMudm9uYWdlLndvcmtlcml6ZXI7CiAgICByZXR1cm4gdFtlXSB8fCAodFtlXSA9IG4pLCB0W2VdOwogIH0KICBjb25zdCBhJDEgPSB5JDEoCiAgICAiZ2xvYmFscyIsCiAgICB7fQogICk7CiAgdmFyIHMkMSA9IC8qIEBfX1BVUkVfXyAqLyAoKGUpID0+IChlLklOSVQgPSAiSU5JVCIsIGUuRk9SV0FSRCA9ICJGT1JXQVJEIiwgZS5URVJNSU5BVEUgPSAiVEVSTUlOQVRFIiwgZS5HTE9CQUxTX1NZTkMgPSAiR0xPQkFMU19TWU5DIiwgZSkpKHMkMSB8fCB7fSk7CiAgZnVuY3Rpb24gSSQxKGUpIHsKICAgIHJldHVybiBbSW1hZ2VCaXRtYXAsIFJlYWRhYmxlU3RyZWFtLCBXcml0YWJsZVN0cmVhbV0uc29tZSgodCkgPT4gZSBpbnN0YW5jZW9mIHQpOwogIH0KICBsZXQgRyQxID0gMDsKICBmdW5jdGlvbiBWJDEoZSwgbiwgdCwgaSwgcikgewogICAgY29uc3QgYyA9IEckMSsrOwogICAgcmV0dXJuIGUucG9zdE1lc3NhZ2UoCiAgICAgIHsKICAgICAgICBpZDogYywKICAgICAgICB0eXBlOiBuLAogICAgICAgIGZ1bmN0aW9uTmFtZTogdCwKICAgICAgICBhcmdzOiBpCiAgICAgIH0sCiAgICAgIGkuZmlsdGVyKChsKSA9PiBJJDEobCkpCiAgICApLCBuZXcgUHJvbWlzZSgobCkgPT4gewogICAgICByID09IG51bGwgfHwgci5zZXQoYywgbCk7CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gdSQxKGUsIG4pIHsKICAgIGNvbnN0IHsgaWQ6IHQsIHR5cGU6IGkgfSA9IGUsIHIgPSBBcnJheS5pc0FycmF5KG4pID8gbiA6IFtuXTsKICAgIHBvc3RNZXNzYWdlKAogICAgICB7CiAgICAgICAgaWQ6IHQsCiAgICAgICAgdHlwZTogaSwKICAgICAgICByZXN1bHQ6IG4KICAgICAgfSwKICAgICAgci5maWx0ZXIoKGMpID0+IEkkMShjKSkKICAgICk7CiAgfQogIGNvbnN0IG0kMSA9IHkkMSgid29ya2VyaXplZCIsIHt9KTsKICBmdW5jdGlvbiBSJDEoKSB7CiAgICByZXR1cm4gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlIDwgInUiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gVyQxKCkgewogICAgaWYgKFIkMSgpKQogICAgICB1JDEoeyB0eXBlOiBzJDEuR0xPQkFMU19TWU5DIH0sIGEkMSk7CiAgICBlbHNlIHsKICAgICAgY29uc3QgZSA9IFtdOwogICAgICBmb3IgKGNvbnN0IG4gaW4gbSQxKSB7CiAgICAgICAgY29uc3QgeyB3b3JrZXI6IHQsIHJlc29sdmVyczogaSB9ID0gbSQxW25dLndvcmtlckNvbnRleHQ7CiAgICAgICAgdCAmJiBlLnB1c2goCiAgICAgICAgICBWJDEoCiAgICAgICAgICAgIHQsCiAgICAgICAgICAgIHMkMS5HTE9CQUxTX1NZTkMsCiAgICAgICAgICAgICIiLAogICAgICAgICAgICBbYSQxXSwKICAgICAgICAgICAgaQogICAgICAgICAgKQogICAgICAgICk7CiAgICAgIH0KICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGckMShlLCBuKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShuKSkKICAgICAgbi5zcGxpY2UoMCwgbi5sZW5ndGgpOwogICAgZWxzZSBpZiAodHlwZW9mIG4gPT0gIm9iamVjdCIpCiAgICAgIGZvciAoY29uc3QgdCBpbiBuKQogICAgICAgIGRlbGV0ZSBuW3RdOwogICAgZm9yIChjb25zdCB0IGluIGUpCiAgICAgIEFycmF5LmlzQXJyYXkoZVt0XSkgPyAoblt0XSA9IFtdLCBnJDEoZVt0XSwgblt0XSkpIDogdHlwZW9mIGVbdF0gPT0gIm9iamVjdCIgPyAoblt0XSA9IHt9LCBnJDEoZVt0XSwgblt0XSkpIDogblt0XSA9IGVbdF07CiAgfQogIGFzeW5jIGZ1bmN0aW9uIEQkMShlLCBuKSB7CiAgICBjb25zdCB7IGZ1bmN0aW9uTmFtZTogdCwgYXJnczogaSB9ID0gZTsKICAgIGlmICghbi5pbnN0YW5jZSkKICAgICAgdGhyb3cgImluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7CiAgICBpZiAoIXQpCiAgICAgIHRocm93ICJtaXNzaW5nIGZ1bmN0aW9uIG5hbWUgdG8gY2FsbCI7CiAgICBpZiAoIW4uaW5zdGFuY2VbdF0pCiAgICAgIHRocm93IGB1bmRlZmluZWQgZnVuY3Rpb24gWyR7dH1dIGluIGNsYXNzICR7bi5pbnN0YW5jZS5jb25zdHJ1Y3Rvci53b3JrZXJJZH1gOwogICAgdSQxKGUsIGF3YWl0IG4uaW5zdGFuY2VbdF0oLi4uaSAhPSBudWxsID8gaSA6IFtdKSk7CiAgfQogIGNvbnN0IF8kMSA9IHkkMSgicmVnaXN0ZXJlZFdvcmtlcnMiLCB7fSk7CiAgZnVuY3Rpb24geCQxKGUsIG4pIHsKICAgIGlmICghZS5hcmdzKQogICAgICB0aHJvdyAiTWlzc2luZyBjbGFzc05hbWUgd2hpbGUgaW5pdGlhbGl6aW5nIHdvcmtlciI7CiAgICBjb25zdCBbdCwgaV0gPSBlLmFyZ3MsIHIgPSBfJDFbdF07CiAgICBpZiAocikKICAgICAgbi5pbnN0YW5jZSA9IG5ldyByKGUuYXJncy5zbGljZSgxKSk7CiAgICBlbHNlCiAgICAgIHRocm93IGB1bmtub3duIHdvcmtlciBjbGFzcyAke3R9YDsKICAgIGckMShpLCBhJDEpLCB1JDEoZSwgdHlwZW9mIG4uaW5zdGFuY2UgIT09IHZvaWQgMCk7CiAgfQogIGFzeW5jIGZ1bmN0aW9uIHokMShlLCBuKSB7CiAgICBjb25zdCB7IGFyZ3M6IHQgfSA9IGU7CiAgICBpZiAoIW4uaW5zdGFuY2UpCiAgICAgIHRocm93ICJpbnN0YW5jZSBub3QgaW5pdGlhbGl6ZWQiOwogICAgbGV0IGk7CiAgICBuLmluc3RhbmNlLnRlcm1pbmF0ZSAmJiAoaSA9IGF3YWl0IG4uaW5zdGFuY2UudGVybWluYXRlKC4uLnQgIT0gbnVsbCA/IHQgOiBbXSkpLCB1JDEoZSwgaSk7CiAgfQogIGZ1bmN0aW9uIEIkMShlKSB7CiAgICBpZiAoIWUuYXJncykKICAgICAgdGhyb3cgIk1pc3NpbmcgZ2xvYmFscyB3aGlsZSBzeW5jaW5nIjsKICAgIGckMShlLmFyZ3NbMF0sIGEkMSksIHUkMShlLCB7fSk7CiAgfQogIGZ1bmN0aW9uIFkkMSgpIHsKICAgIGNvbnN0IGUgPSB7fTsKICAgIG9ubWVzc2FnZSA9IGFzeW5jIChuKSA9PiB7CiAgICAgIGNvbnN0IHQgPSBuLmRhdGE7CiAgICAgIHN3aXRjaCAodC50eXBlKSB7CiAgICAgICAgY2FzZSBzJDEuSU5JVDoKICAgICAgICAgIHgkMSh0LCBlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgcyQxLkZPUldBUkQ6CiAgICAgICAgICBEJDEodCwgZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIHMkMS5URVJNSU5BVEU6CiAgICAgICAgICB6JDEodCwgZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIHMkMS5HTE9CQUxTX1NZTkM6CiAgICAgICAgICBCJDEodCk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKICB9CiAgUiQxKCkgJiYgWSQxKCk7CiAgZnVuY3Rpb24gaiQxKGUsIG4pIHsKICAgIHJldHVybiBhJDFbZV0gfHwgKGEkMVtlXSA9IG4pLCBbCiAgICAgICgpID0+IGEkMVtlXSwKICAgICAgYXN5bmMgKHQpID0+IHsKICAgICAgICBhJDFbZV0gPSB0LCBhd2FpdCBXJDEoKTsKICAgICAgfQogICAgXTsKICB9CiAgZnVuY3Rpb24gRiQxKGUsIG4pIHsKICAgIHJldHVybiBqJDEoZSwgbik7CiAgfQogIGNvbnN0IFtQJDEsICQkMV0gPSBGJDEoIm1ldGFkYXRhIik7CiAgZnVuY3Rpb24gcCQxKCkgewogICAgcmV0dXJuIFAkMSgpOwogIH0KICBsZXQgcSQxID0gY2xhc3MgcSB7CiAgICBjb25zdHJ1Y3RvcihuKSB7CiAgICAgIGYkMSh0aGlzLCAidXVpZCIsIEwkMSgpKTsKICAgICAgdGhpcy5jb25maWcgPSBuOwogICAgfQogICAgYXN5bmMgc2VuZChuKSB7CiAgICAgIHZhciBsLCBoLCBiOwogICAgICBjb25zdCB7IGFwcElkOiB0LCBzb3VyY2VUeXBlOiBpIH0gPSAobCA9IHAkMSgpKSAhPSBudWxsID8gbCA6IHt9OwogICAgICBpZiAoIXQgfHwgIWkpCiAgICAgICAgcmV0dXJuICJtZXRhZGF0YSBtaXNzaW5nIjsKICAgICAgY29uc3QgciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKSwgYyA9IHNldFRpbWVvdXQoKCkgPT4gci5hYm9ydCgpLCBOJDEpOwogICAgICByZXR1cm4gYXdhaXQgKChiID0gKGggPSB0aGlzLmNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IGguZmV0Y2gpICE9IG51bGwgPyBiIDogZmV0Y2gpKHRoaXMuZ2V0VXJsKCksIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMoKSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLmJ1aWxkUmVwb3J0KG4pKSwKICAgICAgICBzaWduYWw6IHIuc2lnbmFsCiAgICAgIH0pLCBjbGVhclRpbWVvdXQoYyksICJzdWNjZXNzIjsKICAgIH0KICAgIGdldFVybCgpIHsKICAgICAgdmFyIHQ7CiAgICAgIGxldCBuID0gKHQgPSBwJDEoKS5wcm94eVVybCkgIT0gbnVsbCA/IHQgOiB2JDE7CiAgICAgIHJldHVybiBuICs9IChuLmF0KC0xKSA9PT0gIi8iID8gIiIgOiAiLyIpICsgVSQxLCBuOwogICAgfQogICAgZ2V0SGVhZGVycygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgIH07CiAgICB9CiAgICBidWlsZFJlcG9ydChuKSB7CiAgICAgIGNvbnN0IHQgPSBwJDEoKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBndWlkOiB0aGlzLnV1aWQsCiAgICAgICAgLi4ubiwKICAgICAgICBhcHBsaWNhdGlvbklkOiB0LmFwcElkLAogICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgICBwcm94eVVybDogdC5wcm94eVVybCwKICAgICAgICBzb3VyY2U6IHQuc291cmNlVHlwZQogICAgICB9OwogICAgfQogIH07CgogIGNvbnN0IHZlcnNpb24gPSAiNS4yLjAtYWxwaGEuMiI7CgogIHZhciBCbHVyUmFkaXVzID0gLyogQF9fUFVSRV9fICovICgoQmx1clJhZGl1czIpID0+IHsKICAgIEJsdXJSYWRpdXMyWyJMb3ciXSA9ICJMb3ciOwogICAgQmx1clJhZGl1czJbIkhpZ2giXSA9ICJIaWdoIjsKICAgIHJldHVybiBCbHVyUmFkaXVzMjsKICB9KShCbHVyUmFkaXVzIHx8IHt9KTsKICB2YXIgV2ViZ2xTZWxmaWVTZWdtZW50YXRpb25UeXBlID0gLyogQF9fUFVSRV9fICovICgoV2ViZ2xTZWxmaWVTZWdtZW50YXRpb25UeXBlMikgPT4gewogICAgV2ViZ2xTZWxmaWVTZWdtZW50YXRpb25UeXBlMlsiRkFTVCJdID0gIkZBU1QiOwogICAgV2ViZ2xTZWxmaWVTZWdtZW50YXRpb25UeXBlMlsiUFJFQ0lTRSJdID0gIlBSRUNJU0UiOwogICAgcmV0dXJuIFdlYmdsU2VsZmllU2VnbWVudGF0aW9uVHlwZTI7CiAgfSkoV2ViZ2xTZWxmaWVTZWdtZW50YXRpb25UeXBlIHx8IHt9KTsKICB2YXIgUmVuZGVyaW5nVHlwZSA9IC8qIEBfX1BVUkVfXyAqLyAoKFJlbmRlcmluZ1R5cGUyKSA9PiB7CiAgICBSZW5kZXJpbmdUeXBlMlsiQ0FOVkFTIl0gPSAiQ0FOVkFTIjsKICAgIFJlbmRlcmluZ1R5cGUyWyJXRUJHTCJdID0gIldFQkdMIjsKICAgIHJldHVybiBSZW5kZXJpbmdUeXBlMjsKICB9KShSZW5kZXJpbmdUeXBlIHx8IHt9KTsKCiAgZnVuY3Rpb24gZ2V0UGVyZm9ybWFuY2VTdXBwb3J0KCkgewogICAgY29uc3Qgb2Zmc2NyZWVuQ2FudmFzID0gbmV3IE9mZnNjcmVlbkNhbnZhcygwLCAwKTsKICAgIGNvbnN0IGNvbnRleHQgPSBvZmZzY3JlZW5DYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wyIiwgewogICAgICBmYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0OiB0cnVlCiAgICB9KTsKICAgIGlmICghY29udGV4dCkgewogICAgICByZXR1cm4gewogICAgICAgIHN1cHBvcnRlZDogZmFsc2UsCiAgICAgICAgbWVzc2FnZTogIllvdXIgaGFyZHdhcmUgZG9lcyBub3QgcGVyZm9ybSBnb29kIGVub3VnaCB0byBydW4gdGhlIGxpYnJhcnkgZWZmaWNpZW50bHkiCiAgICAgIH07CiAgICB9CiAgICByZXR1cm4geyBzdXBwb3J0ZWQ6IHRydWUgfTsKICB9CgogIGNsYXNzIENhbnZhczJkUmVuZGVyZXIgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoMCwgMCk7CiAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KTsKICAgICAgaWYgKCFjb250ZXh0KSB7CiAgICAgICAgdGhyb3cgIkZhaWwgdG8gcmV0cmlldmUgd2ViZ2wyIGNvbnRleHQiOwogICAgICB9CiAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzOwogICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgfQogICAgc2V0RmxpY2tlcmluZ09wdGlvbnMob3B0aW9ucykgewogICAgfQogICAgZW5hYmxlUG9zdFByb2Nlc3NpbmcoKSB7CiAgICB9CiAgICBkaXNhYmxlUG9zdFByb2Nlc3NpbmcoKSB7CiAgICB9CiAgICBhc3luYyBwcm9maWxlV2ViZ2woZHVyYXRpb24pIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgYXN5bmMgcmVuZGVyKGltYWdlLCBtYXNrKSB7CiAgICAgIHJldHVybiB0aGlzLmNhbnZhczsKICAgIH0KICAgIHJlc2l6ZUNhbnZhcyhpbWFnZSkgewogICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGltYWdlOwogICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpZHRoOwogICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICB9CiAgICByZW5kZXJTaWxob3VldHRlKGltYWdlLCBtYXNrLCBmaWx0ZXIgPSAibm9uZSIpIHsKICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBpbWFnZTsKICAgICAgdGhpcy5jb250ZXh0LnNhdmUoKTsKICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSgKICAgICAgICBtYXNrLAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICBtYXNrLndpZHRoLAogICAgICAgIG1hc2suaGVpZ2h0LAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICB3aWR0aCwKICAgICAgICBoZWlnaHQKICAgICAgKTsKICAgICAgdGhpcy5jb250ZXh0LmZpbHRlciA9ICJibHVyKDVweCkiOwogICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gInNvdXJjZS1pbiI7CiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoCiAgICAgICAgbWFzaywKICAgICAgICAwLAogICAgICAgIDAsCiAgICAgICAgbWFzay53aWR0aCwKICAgICAgICBtYXNrLmhlaWdodCwKICAgICAgICAwLAogICAgICAgIDAsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAic291cmNlLWluIjsKICAgICAgdGhpcy5jb250ZXh0LmZpbHRlciA9IGZpbHRlcjsKICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSgKICAgICAgICBpbWFnZSwKICAgICAgICAwLAogICAgICAgIDAsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCwKICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQKICAgICAgKTsKICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTsKICAgIH0KICB9CgogIGNsYXNzIENhbnZhczJkQmFja2dyb3VuZFJlbmRlcmVyIGV4dGVuZHMgQ2FudmFzMmRSZW5kZXJlciB7CiAgICBjb25zdHJ1Y3RvcihyYWRpdXMpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7CiAgICB9CiAgICBhc3luYyByZW5kZXIoaW1hZ2UsIG1hc2spIHsKICAgICAgc3VwZXIucmVzaXplQ2FudmFzKGltYWdlKTsKICAgICAgY29uc3QgaW1hZ2VCaXRtYXAgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChtYXNrKTsKICAgICAgdGhpcy5yZW5kZXJTaWxob3VldHRlKGltYWdlLCBpbWFnZUJpdG1hcCk7CiAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7CiAgICAgIHRoaXMuY29udGV4dC5maWx0ZXIgPSBgYmx1cigke3RoaXMucmFkaXVzfXB4KWA7CiAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAiZGVzdGluYXRpb24tb3ZlciI7CiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpOwogICAgICB0aGlzLmNvbnRleHQucmVzdG9yZSgpOwogICAgICByZXR1cm4gc3VwZXIucmVuZGVyKGltYWdlLCBtYXNrKTsKICAgIH0KICB9CgogIGNsYXNzIENhbnZhczJkQmx1clNpbGhvdWV0dGVSZW5kZXJlciBleHRlbmRzIENhbnZhczJkUmVuZGVyZXIgewogICAgY29uc3RydWN0b3IocmFkaXVzKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzOwogICAgfQogICAgYXN5bmMgcmVuZGVyKGltYWdlLCBtYXNrKSB7CiAgICAgIHN1cGVyLnJlc2l6ZUNhbnZhcyhpbWFnZSk7CiAgICAgIGNvbnN0IGltYWdlQml0bWFwID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAobWFzayk7CiAgICAgIHRoaXMucmVuZGVyU2lsaG91ZXR0ZShpbWFnZSwgaW1hZ2VCaXRtYXAsIGBibHVyKCR7dGhpcy5yYWRpdXN9cHgpYCk7CiAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7CiAgICAgIHRoaXMuY29udGV4dC5maWx0ZXIgPSAibm9uZSI7CiAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAiZGVzdGluYXRpb24tb3ZlciI7CiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpOwogICAgICB0aGlzLmNvbnRleHQucmVzdG9yZSgpOwogICAgICByZXR1cm4gc3VwZXIucmVuZGVyKGltYWdlLCBtYXNrKTsKICAgIH0KICB9CgogIGNsYXNzIENhbnZhczJkSW1hZ2VCYWNrZ3JvdW5kUmVuZGVyZXIgZXh0ZW5kcyBDYW52YXMyZFJlbmRlcmVyIHsKICAgIHNldEJhY2tncm91bmRJbWFnZShpbWFnZSkgewogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZSA9IGltYWdlOwogICAgfQogICAgYXN5bmMgcmVuZGVyKGltYWdlLCBtYXNrKSB7CiAgICAgIHN1cGVyLnJlc2l6ZUNhbnZhcyhpbWFnZSk7CiAgICAgIGNvbnN0IGltYWdlQml0bWFwID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAobWFzayk7CiAgICAgIHRoaXMucmVuZGVyU2lsaG91ZXR0ZShpbWFnZSwgaW1hZ2VCaXRtYXApOwogICAgICBpZiAodGhpcy5iYWNrZ3JvdW5kSW1hZ2UpIHsKICAgICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpOwogICAgICAgIHRoaXMuY29udGV4dC5maWx0ZXIgPSBgbm9uZWA7CiAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJkZXN0aW5hdGlvbi1vdmVyIjsKICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKAogICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UsCiAgICAgICAgICAwLAogICAgICAgICAgMCwKICAgICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlLndpZHRoLAogICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuaGVpZ2h0LAogICAgICAgICAgMCwKICAgICAgICAgIDAsCiAgICAgICAgICBpbWFnZS53aWR0aCwKICAgICAgICAgIGltYWdlLmhlaWdodAogICAgICAgICk7CiAgICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTsKICAgICAgfQogICAgICByZXR1cm4gc3VwZXIucmVuZGVyKGltYWdlLCBtYXNrKTsKICAgIH0KICB9CgogIGNvbnN0IE1JTl9NQVNLX1RIUkVTSE9MRCQxID0gMC4zOwogIGNvbnN0IE1BWF9NQVNLX1RIUkVTSE9MRCQxID0gMTsKICBjbGFzcyBNYW51YWxJbWFnZUJhY2tncm91bmRSZW5kZXJlciBleHRlbmRzIENhbnZhczJkUmVuZGVyZXIgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMuYmFja2dyb3VuZENhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoMCwgMCk7CiAgICAgIHRoaXMuYmFja2dyb3VuZENvbnRleHQgPSB0aGlzLmJhY2tncm91bmRDYW52YXMuZ2V0Q29udGV4dCgKICAgICAgICAiMmQiLAogICAgICAgIHsKICAgICAgICAgIHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZQogICAgICAgIH0KICAgICAgKTsKICAgICAgdGhpcy5jYWxjdWxhdGVCYWNrZ3JvdW5kSW1hZ2VEYXRhID0gKGltYWdlLCB2aWRlb1dpZHRoLCB2aWRlb0hlaWdodCkgPT4gewogICAgICAgIGxldCBuZXdXaWR0aCA9IHZpZGVvV2lkdGg7CiAgICAgICAgbGV0IG5ld0hlaWdodCA9IHZpZGVvSGVpZ2h0OwogICAgICAgIGxldCBzdGFydFggPSAwOwogICAgICAgIGxldCBzdGFydFkgPSAwOwogICAgICAgIGlmICh2aWRlb1dpZHRoIC8gdmlkZW9IZWlnaHQgPCBpbWFnZS53aWR0aCAvIGltYWdlLmhlaWdodCkgewogICAgICAgICAgbmV3V2lkdGggPSB2aWRlb0hlaWdodCAqIChpbWFnZS53aWR0aCAvIGltYWdlLmhlaWdodCk7CiAgICAgICAgICBzdGFydFggPSAobmV3V2lkdGggLSB2aWRlb1dpZHRoKSAvIDI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5ld0hlaWdodCA9IHZpZGVvV2lkdGggKiBpbWFnZS5oZWlnaHQgLyBpbWFnZS53aWR0aDsKICAgICAgICAgIHN0YXJ0WSA9IChuZXdIZWlnaHQgLSB2aWRlb0hlaWdodCkgLyAyOwogICAgICAgIH0KICAgICAgICB0aGlzLmJhY2tncm91bmRDYW52YXMud2lkdGggPSBuZXdXaWR0aDsKICAgICAgICB0aGlzLmJhY2tncm91bmRDYW52YXMuaGVpZ2h0ID0gbmV3SGVpZ2h0OwogICAgICAgIHRoaXMuYmFja2dyb3VuZENvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCBuZXdXaWR0aCwgbmV3SGVpZ2h0KTsKICAgICAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kQ29udGV4dC5nZXRJbWFnZURhdGEoc3RhcnRYLCBzdGFydFksIHZpZGVvV2lkdGgsIHZpZGVvSGVpZ2h0KS5kYXRhOwogICAgICB9OwogICAgICB0aGlzLmRyYXdTZWdtZW50YXRpb25SZXN1bHQgPSAoaW1hZ2UsIG1hc2ssIGJnSW1hZ2VEYXRhKSA9PiB7CiAgICAgICAgY29uc3QgeyBoZWlnaHQsIHdpZHRoIH0gPSBpbWFnZTsKICAgICAgICBjb25zdCBmZ0ltZ0RhdGEgPSB0aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpLmRhdGE7CiAgICAgICAgY29uc3QgcmVzdWx0SW1nRGF0YSA9IGJnSW1hZ2VEYXRhLnNsaWNlKDApOwogICAgICAgIGNvbnN0IG1pbkNvbmZpZGVuY2UgPSBNSU5fTUFTS19USFJFU0hPTEQkMSAqIDI1NTsKICAgICAgICBjb25zdCBtYXhDb25maWRlbmNlID0gTUFYX01BU0tfVEhSRVNIT0xEJDEgKiAyNTU7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXNrLmxlbmd0aDsgaSArPSA0KSB7CiAgICAgICAgICBpZiAobWFza1tpXSA+IDApIHsKICAgICAgICAgICAgY29uc3QgcmVkSWR4ID0gaTsKICAgICAgICAgICAgY29uc3QgZ3JlZW5JZHggPSByZWRJZHggKyAxOwogICAgICAgICAgICBjb25zdCBibHVlSWR4ID0gcmVkSWR4ICsgMjsKICAgICAgICAgICAgY29uc3QgYWxwaGFJZHggPSByZWRJZHggKyAzOwogICAgICAgICAgICByZXN1bHRJbWdEYXRhW2FscGhhSWR4XSA9IDI1NTsKICAgICAgICAgICAgaWYgKG1hc2tbaV0gPCBtYXhDb25maWRlbmNlKSB7CiAgICAgICAgICAgICAgY29uc3QgZmdBbHBoYSA9IChtYXNrW2ldIC0gbWluQ29uZmlkZW5jZSkgLyAobWF4Q29uZmlkZW5jZSAtIG1pbkNvbmZpZGVuY2UpOwogICAgICAgICAgICAgIGNvbnN0IGJnQWxwaGEgPSAxIC0gZmdBbHBoYTsKICAgICAgICAgICAgICByZXN1bHRJbWdEYXRhW3JlZElkeF0gPSByZXN1bHRJbWdEYXRhW3JlZElkeF0gKiBiZ0FscGhhICsgZmdJbWdEYXRhW3JlZElkeF0gKiBmZ0FscGhhOwogICAgICAgICAgICAgIHJlc3VsdEltZ0RhdGFbZ3JlZW5JZHhdID0gcmVzdWx0SW1nRGF0YVtncmVlbklkeF0gKiBiZ0FscGhhICsgZmdJbWdEYXRhW2dyZWVuSWR4XSAqIGZnQWxwaGE7CiAgICAgICAgICAgICAgcmVzdWx0SW1nRGF0YVtibHVlSWR4XSA9IHJlc3VsdEltZ0RhdGFbYmx1ZUlkeF0gKiBiZ0FscGhhICsgZmdJbWdEYXRhW2JsdWVJZHhdICogZmdBbHBoYTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHRJbWdEYXRhW3JlZElkeF0gPSBmZ0ltZ0RhdGFbcmVkSWR4XTsKICAgICAgICAgICAgICByZXN1bHRJbWdEYXRhW2dyZWVuSWR4XSA9IGZnSW1nRGF0YVtncmVlbklkeF07CiAgICAgICAgICAgICAgcmVzdWx0SW1nRGF0YVtibHVlSWR4XSA9IGZnSW1nRGF0YVtibHVlSWR4XTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb25zdCB1aW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHJlc3VsdEltZ0RhdGEuYnVmZmVyKTsKICAgICAgICBjb25zdCBjYW1lcmFJbWFnZURhdGEgPSBuZXcgSW1hZ2VEYXRhKHVpbnQ4QXJyYXksIHdpZHRoLCBoZWlnaHQpOwogICAgICAgIHJldHVybiBjYW1lcmFJbWFnZURhdGE7CiAgICAgIH07CiAgICB9CiAgICBzZXRCYWNrZ3JvdW5kSW1hZ2UoaW1hZ2UpIHsKICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UgPSBpbWFnZTsKICAgIH0KICAgIGFzeW5jIHJlbmRlcihpbWFnZSwgbWFzaykgewogICAgICBzdXBlci5yZXNpemVDYW52YXMoaW1hZ2UpOwogICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKAogICAgICAgIGltYWdlLAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICBpbWFnZS53aWR0aCwKICAgICAgICBpbWFnZS5oZWlnaHQsCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIHRoaXMuY2FudmFzLndpZHRoLAogICAgICAgIHRoaXMuY2FudmFzLmhlaWdodAogICAgICApOwogICAgICBpZiAodGhpcy5iYWNrZ3JvdW5kSW1hZ2UpIHsKICAgICAgICBjb25zdCBiYWNrZ3JvdW5kSW1hZ2VEYXRhID0gdGhpcy5jYWxjdWxhdGVCYWNrZ3JvdW5kSW1hZ2VEYXRhKHRoaXMuYmFja2dyb3VuZEltYWdlLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTsKICAgICAgICBjb25zdCBvdXRwdXRJbWFnZURhdGEgPSB0aGlzLmRyYXdTZWdtZW50YXRpb25SZXN1bHQoaW1hZ2UsIG1hc2suZGF0YSwgYmFja2dyb3VuZEltYWdlRGF0YSk7CiAgICAgICAgdGhpcy5jb250ZXh0LnNhdmUoKTsKICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKAogICAgICAgICAgYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAob3V0cHV0SW1hZ2VEYXRhKSwKICAgICAgICAgIDAsCiAgICAgICAgICAwLAogICAgICAgICAgaW1hZ2Uud2lkdGgsCiAgICAgICAgICBpbWFnZS5oZWlnaHQKICAgICAgICApOwogICAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN1cGVyLnJlbmRlcihpbWFnZSwgbWFzayk7CiAgICB9CiAgfQoKICAvKiBAbGljZW5zZSB0d2dsLmpzIDUuNS4xIENvcHlyaWdodCAoYykgMjAxNSwgR3JlZ2cgVGF2YXJlcyBBbGwgUmlnaHRzIFJlc2VydmVkLgogIEF2YWlsYWJsZSB2aWEgdGhlIE1JVCBsaWNlbnNlLgogIHNlZTogaHR0cDovL2dpdGh1Yi5jb20vZ3JlZ2dtYW4vdHdnbC5qcyBmb3IgZGV0YWlscyAqLwogIC8qCiAgICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlcwogICAqCiAgICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAogICAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KICAgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKICAgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKICAgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAqCiAgICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICAgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgKgogICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCiAgICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwogICAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKICAgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAgICovCgoKICAvKgogICAqIENvcHlyaWdodCAyMDE5IEdyZWdnIFRhdmFyZXMKICAgKgogICAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCiAgICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwKICAgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCiAgICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsCiAgICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlCiAgICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKICAgKgogICAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCiAgICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCiAgICoKICAgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgogICAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAogICAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTAogICAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiAgICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcKICAgKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSCiAgICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgogICAqLwoKICAvKiBEYXRhVHlwZSAqLwogIGNvbnN0IEJZVEUkMiAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAwOwogIGNvbnN0IFVOU0lHTkVEX0JZVEUkMyAgICAgICAgICAgICAgICAgID0gMHgxNDAxOwogIGNvbnN0IFNIT1JUJDIgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAyOwogIGNvbnN0IFVOU0lHTkVEX1NIT1JUJDMgICAgICAgICAgICAgICAgID0gMHgxNDAzOwogIGNvbnN0IElOVCQzICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA0OwogIGNvbnN0IFVOU0lHTkVEX0lOVCQzICAgICAgICAgICAgICAgICAgID0gMHgxNDA1OwogIGNvbnN0IEZMT0FUJDMgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA2OwogIGNvbnN0IFVOU0lHTkVEX1NIT1JUXzRfNF80XzQkMSAgICAgICA9IDB4ODAzMzsKICBjb25zdCBVTlNJR05FRF9TSE9SVF81XzVfNV8xJDEgICAgICAgPSAweDgwMzQ7CiAgY29uc3QgVU5TSUdORURfU0hPUlRfNV82XzUkMSAgICAgICAgID0gMHg4MzYzOwogIGNvbnN0IEhBTEZfRkxPQVQkMSAgICAgICAgICAgICAgICAgICA9IDB4MTQwQjsKICBjb25zdCBVTlNJR05FRF9JTlRfMl8xMF8xMF8xMF9SRVYkMSAgPSAweDgzNjg7CiAgY29uc3QgVU5TSUdORURfSU5UXzEwRl8xMUZfMTFGX1JFViQxID0gMHg4QzNCOwogIGNvbnN0IFVOU0lHTkVEX0lOVF81XzlfOV85X1JFViQxICAgICA9IDB4OEMzRTsKICBjb25zdCBGTE9BVF8zMl9VTlNJR05FRF9JTlRfMjRfOF9SRVYkMSA9IDB4OERBRDsKICBjb25zdCBVTlNJR05FRF9JTlRfMjRfOCQxICAgICAgICAgICAgPSAweDg0RkE7CgogIGNvbnN0IGdsVHlwZVRvVHlwZWRBcnJheSA9IHt9OwogIHsKICAgIGNvbnN0IHR0ID0gZ2xUeXBlVG9UeXBlZEFycmF5OwogICAgdHRbQllURSQyXSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gSW50OEFycmF5OwogICAgdHRbVU5TSUdORURfQllURSQzXSAgICAgICAgICAgICAgICAgID0gVWludDhBcnJheTsKICAgIHR0W1NIT1JUJDJdICAgICAgICAgICAgICAgICAgICAgICAgICA9IEludDE2QXJyYXk7CiAgICB0dFtVTlNJR05FRF9TSE9SVCQzXSAgICAgICAgICAgICAgICAgPSBVaW50MTZBcnJheTsKICAgIHR0W0lOVCQzXSAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEludDMyQXJyYXk7CiAgICB0dFtVTlNJR05FRF9JTlQkM10gICAgICAgICAgICAgICAgICAgPSBVaW50MzJBcnJheTsKICAgIHR0W0ZMT0FUJDNdICAgICAgICAgICAgICAgICAgICAgICAgICA9IEZsb2F0MzJBcnJheTsKICAgIHR0W1VOU0lHTkVEX1NIT1JUXzRfNF80XzQkMV0gICAgICAgICA9IFVpbnQxNkFycmF5OwogICAgdHRbVU5TSUdORURfU0hPUlRfNV81XzVfMSQxXSAgICAgICAgID0gVWludDE2QXJyYXk7CiAgICB0dFtVTlNJR05FRF9TSE9SVF81XzZfNSQxXSAgICAgICAgICAgPSBVaW50MTZBcnJheTsKICAgIHR0W0hBTEZfRkxPQVQkMV0gICAgICAgICAgICAgICAgICAgICA9IFVpbnQxNkFycmF5OwogICAgdHRbVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWJDFdICAgID0gVWludDMyQXJyYXk7CiAgICB0dFtVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWJDFdICAgPSBVaW50MzJBcnJheTsKICAgIHR0W1VOU0lHTkVEX0lOVF81XzlfOV85X1JFViQxXSAgICAgICA9IFVpbnQzMkFycmF5OwogICAgdHRbRkxPQVRfMzJfVU5TSUdORURfSU5UXzI0XzhfUkVWJDFdID0gVWludDMyQXJyYXk7CiAgICB0dFtVTlNJR05FRF9JTlRfMjRfOCQxXSAgICAgICAgICAgICAgPSBVaW50MzJBcnJheTsKICB9CgogIC8qKgogICAqIEdldCB0aGUgR0wgdHlwZSBmb3IgYSB0eXBlZEFycmF5CiAgICogQHBhcmFtIHtBcnJheUJ1ZmZlclZpZXd9IHR5cGVkQXJyYXkgYSB0eXBlZEFycmF5CiAgICogQHJldHVybiB7bnVtYmVyfSB0aGUgR0wgdHlwZSBmb3IgYXJyYXkuIEZvciBleGFtcGxlIHBhc3MgaW4gYW4gYEludDhBcnJheWAgYW5kIGBnbC5CWVRFYCB3aWxsCiAgICogICBiZSByZXR1cm5lZC4gUGFzcyBpbiBhIGBVaW50MzJBcnJheWAgYW5kIGBnbC5VTlNJR05FRF9JTlRgIHdpbGwgYmUgcmV0dXJuZWQKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdHlwZWRBcnJheQogICAqLwogIGZ1bmN0aW9uIGdldEdMVHlwZUZvclR5cGVkQXJyYXkodHlwZWRBcnJheSkgewogICAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBJbnQ4QXJyYXkpICAgICAgICAgeyByZXR1cm4gQllURSQyOyB9ICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpICAgICAgICB7IHJldHVybiBVTlNJR05FRF9CWVRFJDM7IH0gIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGlmICh0eXBlZEFycmF5IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkpIHsgcmV0dXJuIFVOU0lHTkVEX0JZVEUkMzsgfSAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBJbnQxNkFycmF5KSAgICAgICAgeyByZXR1cm4gU0hPUlQkMjsgfSAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheSBpbnN0YW5jZW9mIFVpbnQxNkFycmF5KSAgICAgICB7IHJldHVybiBVTlNJR05FRF9TSE9SVCQzOyB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGlmICh0eXBlZEFycmF5IGluc3RhbmNlb2YgSW50MzJBcnJheSkgICAgICAgIHsgcmV0dXJuIElOVCQzOyB9ICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBVaW50MzJBcnJheSkgICAgICAgeyByZXR1cm4gVU5TSUdORURfSU5UJDM7IH0gICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkgICAgICB7IHJldHVybiBGTE9BVCQzOyB9ICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgdHlwZWQgYXJyYXkgdHlwZScpOwogIH0KCiAgLyoqCiAgICogR2V0IHRoZSBHTCB0eXBlIGZvciBhIHR5cGVkQXJyYXkgdHlwZQogICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJWaWV3fSB0eXBlZEFycmF5VHlwZSBhIHR5cGVkQXJyYXkgY29uc3RydWN0b3IKICAgKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBHTCB0eXBlIGZvciB0eXBlLiBGb3IgZXhhbXBsZSBwYXNzIGluIGBJbnQ4QXJyYXlgIGFuZCBgZ2wuQllURWAgd2lsbAogICAqICAgYmUgcmV0dXJuZWQuIFBhc3MgaW4gYFVpbnQzMkFycmF5YCBhbmQgYGdsLlVOU0lHTkVEX0lOVGAgd2lsbCBiZSByZXR1cm5lZAogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90eXBlZEFycmF5CiAgICovCiAgZnVuY3Rpb24gZ2V0R0xUeXBlRm9yVHlwZWRBcnJheVR5cGUodHlwZWRBcnJheVR5cGUpIHsKICAgIGlmICh0eXBlZEFycmF5VHlwZSA9PT0gSW50OEFycmF5KSAgICAgICAgIHsgcmV0dXJuIEJZVEUkMjsgfSAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBVaW50OEFycmF5KSAgICAgICAgeyByZXR1cm4gVU5TSUdORURfQllURSQzOyB9ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheVR5cGUgPT09IFVpbnQ4Q2xhbXBlZEFycmF5KSB7IHJldHVybiBVTlNJR05FRF9CWVRFJDM7IH0gIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGlmICh0eXBlZEFycmF5VHlwZSA9PT0gSW50MTZBcnJheSkgICAgICAgIHsgcmV0dXJuIFNIT1JUJDI7IH0gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBVaW50MTZBcnJheSkgICAgICAgeyByZXR1cm4gVU5TSUdORURfU0hPUlQkMzsgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZWRBcnJheVR5cGUgPT09IEludDMyQXJyYXkpICAgICAgICB7IHJldHVybiBJTlQkMzsgfSAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGlmICh0eXBlZEFycmF5VHlwZSA9PT0gVWludDMyQXJyYXkpICAgICAgIHsgcmV0dXJuIFVOU0lHTkVEX0lOVCQzOyB9ICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBGbG9hdDMyQXJyYXkpICAgICAgeyByZXR1cm4gRkxPQVQkMzsgfSAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIHR5cGVkIGFycmF5IHR5cGUnKTsKICB9CgogIC8qKgogICAqIEdldCB0aGUgdHlwZWQgYXJyYXkgY29uc3RydWN0b3IgZm9yIGEgZ2l2ZW4gR0wgdHlwZQogICAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlIHRoZSBHTCB0eXBlLiAoZWc6IGBnbC5VTlNJR05FRF9JTlRgKQogICAqIEByZXR1cm4ge2Z1bmN0aW9ufSB0aGUgY29uc3RydWN0b3IgZm9yIGEgdGhlIGNvcnJlc3BvbmRpbmcgdHlwZWQgYXJyYXkuIChlZy4gYFVpbnQzMkFycmF5YCkuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3R5cGVkQXJyYXkKICAgKi8KICBmdW5jdGlvbiBnZXRUeXBlZEFycmF5VHlwZUZvckdMVHlwZSh0eXBlKSB7CiAgICBjb25zdCBDVE9SID0gZ2xUeXBlVG9UeXBlZEFycmF5W3R5cGVdOwogICAgaWYgKCFDVE9SKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBnbCB0eXBlJyk7CiAgICB9CiAgICByZXR1cm4gQ1RPUjsKICB9CgogIGNvbnN0IGlzQXJyYXlCdWZmZXIkMSA9IHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcKICAgID8gZnVuY3Rpb24gaXNBcnJheUJ1ZmZlck9yU2hhcmVkQXJyYXlCdWZmZXIoYSkgewogICAgICByZXR1cm4gYSAmJiBhLmJ1ZmZlciAmJiAoYS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBhLmJ1ZmZlciBpbnN0YW5jZW9mIFNoYXJlZEFycmF5QnVmZmVyKTsKICAgIH0KICAgIDogZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcihhKSB7CiAgICAgIHJldHVybiBhICYmIGEuYnVmZmVyICYmIGEuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7CiAgICB9OwoKICBmdW5jdGlvbiBlcnJvciQxKC4uLmFyZ3MpIHsKICAgIGNvbnNvbGUuZXJyb3IoLi4uYXJncyk7CiAgfQoKICBjb25zdCBpc1R5cGVXZWFrTWFwcyA9IG5ldyBNYXAoKTsKCiAgZnVuY3Rpb24gaXNUeXBlKG9iamVjdCwgdHlwZSkgewogICAgaWYgKCFvYmplY3QgfHwgdHlwZW9mIG9iamVjdCAhPT0gJ29iamVjdCcpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgbGV0IHdlYWtNYXAgPSBpc1R5cGVXZWFrTWFwcy5nZXQodHlwZSk7CiAgICBpZiAoIXdlYWtNYXApIHsKICAgICAgd2Vha01hcCA9IG5ldyBXZWFrTWFwKCk7CiAgICAgIGlzVHlwZVdlYWtNYXBzLnNldCh0eXBlLCB3ZWFrTWFwKTsKICAgIH0KICAgIGxldCBpc09mVHlwZSA9IHdlYWtNYXAuZ2V0KG9iamVjdCk7CiAgICBpZiAoaXNPZlR5cGUgPT09IHVuZGVmaW5lZCkgewogICAgICBjb25zdCBzID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCk7CiAgICAgIGlzT2ZUeXBlID0gcy5zdWJzdHJpbmcoOCwgcy5sZW5ndGggLSAxKSA9PT0gdHlwZTsKICAgICAgd2Vha01hcC5zZXQob2JqZWN0LCBpc09mVHlwZSk7CiAgICB9CiAgICByZXR1cm4gaXNPZlR5cGU7CiAgfQoKICBmdW5jdGlvbiBpc0J1ZmZlcihnbCwgdCkgewogICAgcmV0dXJuIHR5cGVvZiBXZWJHTEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNUeXBlKHQsICdXZWJHTEJ1ZmZlcicpOwogIH0KCiAgZnVuY3Rpb24gaXNSZW5kZXJidWZmZXIoZ2wsIHQpIHsKICAgIHJldHVybiB0eXBlb2YgV2ViR0xSZW5kZXJidWZmZXIgIT09ICd1bmRlZmluZWQnICYmIGlzVHlwZSh0LCAnV2ViR0xSZW5kZXJidWZmZXInKTsKICB9CgogIGZ1bmN0aW9uIGlzVGV4dHVyZShnbCwgdCkgewogICAgcmV0dXJuIHR5cGVvZiBXZWJHTFRleHR1cmUgIT09ICd1bmRlZmluZWQnICYmIGlzVHlwZSh0LCAnV2ViR0xUZXh0dXJlJyk7CiAgfQoKICBmdW5jdGlvbiBpc1NhbXBsZXIoZ2wsIHQpIHsKICAgIHJldHVybiB0eXBlb2YgV2ViR0xTYW1wbGVyICE9PSAndW5kZWZpbmVkJyAmJiBpc1R5cGUodCwgJ1dlYkdMU2FtcGxlcicpOwogIH0KCiAgLyoKICAgKiBDb3B5cmlnaHQgMjAxOSBHcmVnZyBUYXZhcmVzCiAgICoKICAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQogICAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCiAgICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgogICAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAogICAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQogICAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CiAgICoKICAgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogICAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgogICAqCiAgICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICAgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKICAgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKICAgKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgogICAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCiAgICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUgogICAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KICAgKi8KCiAgY29uc3QgU1RBVElDX0RSQVcgICAgICAgICAgICAgICAgICA9IDB4ODhlNDsKICBjb25zdCBBUlJBWV9CVUZGRVIkMSAgICAgICAgICAgICAgICAgPSAweDg4OTI7CiAgY29uc3QgRUxFTUVOVF9BUlJBWV9CVUZGRVIkMiAgICAgICAgID0gMHg4ODkzOwogIGNvbnN0IEJVRkZFUl9TSVpFICAgICAgICAgICAgICAgICAgPSAweDg3NjQ7CgogIGNvbnN0IEJZVEUkMSAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwMDsKICBjb25zdCBVTlNJR05FRF9CWVRFJDIgICAgICAgICAgICAgICAgPSAweDE0MDE7CiAgY29uc3QgU0hPUlQkMSAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAyOwogIGNvbnN0IFVOU0lHTkVEX1NIT1JUJDIgICAgICAgICAgICAgICA9IDB4MTQwMzsKICBjb25zdCBJTlQkMiAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDQ7CiAgY29uc3QgVU5TSUdORURfSU5UJDIgICAgICAgICAgICAgICAgID0gMHgxNDA1OwogIGNvbnN0IEZMT0FUJDIgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwNjsKICBjb25zdCBkZWZhdWx0cyQyID0gewogICAgYXR0cmliUHJlZml4OiAiIiwKICB9OwoKICBmdW5jdGlvbiBzZXRCdWZmZXJGcm9tVHlwZWRBcnJheShnbCwgdHlwZSwgYnVmZmVyLCBhcnJheSwgZHJhd1R5cGUpIHsKICAgIGdsLmJpbmRCdWZmZXIodHlwZSwgYnVmZmVyKTsKICAgIGdsLmJ1ZmZlckRhdGEodHlwZSwgYXJyYXksIGRyYXdUeXBlIHx8IFNUQVRJQ19EUkFXKTsKICB9CgogIC8qKgogICAqIEdpdmVuIHR5cGVkIGFycmF5IGNyZWF0ZXMgYSBXZWJHTEJ1ZmZlciBhbmQgY29waWVzIHRoZSB0eXBlZCBhcnJheQogICAqIGludG8gaXQuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfFNoYXJlZEFycmF5QnVmZmVyfEFycmF5QnVmZmVyVmlld3xXZWJHTEJ1ZmZlcn0gdHlwZWRBcnJheSB0aGUgdHlwZWQgYXJyYXkuIE5vdGU6IElmIGEgV2ViR0xCdWZmZXIgaXMgcGFzc2VkIGluIGl0IHdpbGwganVzdCBiZSByZXR1cm5lZC4gTm8gYWN0aW9uIHdpbGwgYmUgdGFrZW4KICAgKiBAcGFyYW0ge251bWJlcn0gW3R5cGVdIHRoZSBHTCBiaW5kIHR5cGUgZm9yIHRoZSBidWZmZXIuIERlZmF1bHQgPSBgZ2wuQVJSQVlfQlVGRkVSYC4KICAgKiBAcGFyYW0ge251bWJlcn0gW2RyYXdUeXBlXSB0aGUgR0wgZHJhdyB0eXBlIGZvciB0aGUgYnVmZmVyLiBEZWZhdWx0ID0gJ2dsLlNUQVRJQ19EUkFXYC4KICAgKiBAcmV0dXJuIHtXZWJHTEJ1ZmZlcn0gdGhlIGNyZWF0ZWQgV2ViR0xCdWZmZXIKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvYXR0cmlidXRlcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlckZyb21UeXBlZEFycmF5KGdsLCB0eXBlZEFycmF5LCB0eXBlLCBkcmF3VHlwZSkgewogICAgaWYgKGlzQnVmZmVyKGdsLCB0eXBlZEFycmF5KSkgewogICAgICByZXR1cm4gdHlwZWRBcnJheTsKICAgIH0KICAgIHR5cGUgPSB0eXBlIHx8IEFSUkFZX0JVRkZFUiQxOwogICAgY29uc3QgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7CiAgICBzZXRCdWZmZXJGcm9tVHlwZWRBcnJheShnbCwgdHlwZSwgYnVmZmVyLCB0eXBlZEFycmF5LCBkcmF3VHlwZSk7CiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgZnVuY3Rpb24gaXNJbmRpY2VzKG5hbWUpIHsKICAgIHJldHVybiBuYW1lID09PSAiaW5kaWNlcyI7CiAgfQoKICAvLyBUaGlzIGlzIHJlYWxseSBqdXN0IGEgZ3Vlc3MuIFRob3VnaCBJIGNhbid0IHJlYWxseSBpbWFnaW5lIHVzaW5nCiAgLy8gYW55dGhpbmcgZWxzZT8gTWF5YmUgZm9yIHNvbWUgY29tcHJlc3Npb24/CiAgZnVuY3Rpb24gZ2V0Tm9ybWFsaXphdGlvbkZvclR5cGVkQXJyYXlUeXBlKHR5cGVkQXJyYXlUeXBlKSB7CiAgICBpZiAodHlwZWRBcnJheVR5cGUgPT09IEludDhBcnJheSkgICAgeyByZXR1cm4gdHJ1ZTsgfSAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBVaW50OEFycmF5KSAgIHsgcmV0dXJuIHRydWU7IH0gIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGdldEFycmF5JDEoYXJyYXkpIHsKICAgIHJldHVybiBhcnJheS5sZW5ndGggPyBhcnJheSA6IGFycmF5LmRhdGE7CiAgfQoKICBjb25zdCB0ZXhjb29yZFJFID0gL2Nvb3JkfHRleHR1cmUvaTsKICBjb25zdCBjb2xvclJFID0gL2NvbG9yfGNvbG91ci9pOwoKICBmdW5jdGlvbiBndWVzc051bUNvbXBvbmVudHNGcm9tTmFtZShuYW1lLCBsZW5ndGgpIHsKICAgIGxldCBudW1Db21wb25lbnRzOwogICAgaWYgKHRleGNvb3JkUkUudGVzdChuYW1lKSkgewogICAgICBudW1Db21wb25lbnRzID0gMjsKICAgIH0gZWxzZSBpZiAoY29sb3JSRS50ZXN0KG5hbWUpKSB7CiAgICAgIG51bUNvbXBvbmVudHMgPSA0OwogICAgfSBlbHNlIHsKICAgICAgbnVtQ29tcG9uZW50cyA9IDM7ICAvLyBwb3NpdGlvbiwgbm9ybWFscywgaW5kaWNlcyAuLi4KICAgIH0KCiAgICBpZiAobGVuZ3RoICUgbnVtQ29tcG9uZW50cyA+IDApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGd1ZXNzIG51bUNvbXBvbmVudHMgZm9yIGF0dHJpYnV0ZSAnJHtuYW1lfScuIFRyaWVkICR7bnVtQ29tcG9uZW50c30gYnV0ICR7bGVuZ3RofSB2YWx1ZXMgaXMgbm90IGV2ZW5seSBkaXZpc2libGUgYnkgJHtudW1Db21wb25lbnRzfS4gWW91IHNob3VsZCBzcGVjaWZ5IGl0LmApOwogICAgfQoKICAgIHJldHVybiBudW1Db21wb25lbnRzOwogIH0KCiAgZnVuY3Rpb24gZ2V0TnVtQ29tcG9uZW50cyQxKGFycmF5LCBhcnJheU5hbWUsIG51bVZhbHVlcykgewogICAgcmV0dXJuIGFycmF5Lm51bUNvbXBvbmVudHMgfHwgYXJyYXkuc2l6ZSB8fCBndWVzc051bUNvbXBvbmVudHNGcm9tTmFtZShhcnJheU5hbWUsIG51bVZhbHVlcyB8fCBnZXRBcnJheSQxKGFycmF5KS5sZW5ndGgpOwogIH0KCiAgZnVuY3Rpb24gbWFrZVR5cGVkQXJyYXkoYXJyYXksIG5hbWUpIHsKICAgIGlmIChpc0FycmF5QnVmZmVyJDEoYXJyYXkpKSB7CiAgICAgIHJldHVybiBhcnJheTsKICAgIH0KCiAgICBpZiAoaXNBcnJheUJ1ZmZlciQxKGFycmF5LmRhdGEpKSB7CiAgICAgIHJldHVybiBhcnJheS5kYXRhOwogICAgfQoKICAgIGlmIChBcnJheS5pc0FycmF5KGFycmF5KSkgewogICAgICBhcnJheSA9IHsKICAgICAgICBkYXRhOiBhcnJheSwKICAgICAgfTsKICAgIH0KCiAgICBsZXQgVHlwZSA9IGFycmF5LnR5cGUgPyB0eXBlZEFycmF5VHlwZUZyb21HTFR5cGVPclR5cGVkQXJyYXlDdG9yKGFycmF5LnR5cGUpIDogdW5kZWZpbmVkOwogICAgaWYgKCFUeXBlKSB7CiAgICAgIGlmIChpc0luZGljZXMobmFtZSkpIHsKICAgICAgICBUeXBlID0gVWludDE2QXJyYXk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgVHlwZSA9IEZsb2F0MzJBcnJheTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBUeXBlKGFycmF5LmRhdGEpOwogIH0KCiAgZnVuY3Rpb24gZ2xUeXBlRnJvbUdMVHlwZU9yVHlwZWRBcnJheVR5cGUoZ2xUeXBlT3JUeXBlZEFycmF5Q3RvcikgewogICAgcmV0dXJuIHR5cGVvZiBnbFR5cGVPclR5cGVkQXJyYXlDdG9yID09PSAnbnVtYmVyJwogICAgICAgID8gZ2xUeXBlT3JUeXBlZEFycmF5Q3RvcgogICAgICAgIDogZ2xUeXBlT3JUeXBlZEFycmF5Q3RvciA/IGdldEdMVHlwZUZvclR5cGVkQXJyYXlUeXBlKGdsVHlwZU9yVHlwZWRBcnJheUN0b3IpIDogRkxPQVQkMjsKICB9CgogIGZ1bmN0aW9uIHR5cGVkQXJyYXlUeXBlRnJvbUdMVHlwZU9yVHlwZWRBcnJheUN0b3IoZ2xUeXBlT3JUeXBlZEFycmF5Q3RvcikgewogICAgcmV0dXJuIHR5cGVvZiBnbFR5cGVPclR5cGVkQXJyYXlDdG9yID09PSAnbnVtYmVyJwogICAgICAgID8gZ2V0VHlwZWRBcnJheVR5cGVGb3JHTFR5cGUoZ2xUeXBlT3JUeXBlZEFycmF5Q3RvcikKICAgICAgICA6IGdsVHlwZU9yVHlwZWRBcnJheUN0b3IgfHwgRmxvYXQzMkFycmF5OwogIH0KCiAgZnVuY3Rpb24gYXR0cmliQnVmZmVyRnJvbUJ1ZmZlcihnbCwgYXJyYXkvKiwgYXJyYXlOYW1lICovKSB7CiAgICByZXR1cm4gewogICAgICBidWZmZXI6IGFycmF5LmJ1ZmZlciwKICAgICAgbnVtVmFsdWVzOiAyICogMyAqIDQsICAvLyBzYWZlbHkgZGl2aWRlZCBieSAyLCAzLCA0CiAgICAgIHR5cGU6IGdsVHlwZUZyb21HTFR5cGVPclR5cGVkQXJyYXlUeXBlKGFycmF5LnR5cGUpLAogICAgICBhcnJheVR5cGU6IHR5cGVkQXJyYXlUeXBlRnJvbUdMVHlwZU9yVHlwZWRBcnJheUN0b3IoYXJyYXkudHlwZSksCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gYXR0cmliQnVmZmVyRnJvbVNpemUoZ2wsIGFycmF5LyosIGFycmF5TmFtZSovKSB7CiAgICBjb25zdCBudW1WYWx1ZXMgPSBhcnJheS5kYXRhIHx8IGFycmF5OwogICAgY29uc3QgYXJyYXlUeXBlID0gdHlwZWRBcnJheVR5cGVGcm9tR0xUeXBlT3JUeXBlZEFycmF5Q3RvcihhcnJheS50eXBlKTsKICAgIGNvbnN0IG51bUJ5dGVzID0gbnVtVmFsdWVzICogYXJyYXlUeXBlLkJZVEVTX1BFUl9FTEVNRU5UOwogICAgY29uc3QgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7CiAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiQxLCBidWZmZXIpOwogICAgZ2wuYnVmZmVyRGF0YShBUlJBWV9CVUZGRVIkMSwgbnVtQnl0ZXMsIGFycmF5LmRyYXdUeXBlIHx8IFNUQVRJQ19EUkFXKTsKICAgIHJldHVybiB7CiAgICAgIGJ1ZmZlciwKICAgICAgbnVtVmFsdWVzLAogICAgICB0eXBlOiBnZXRHTFR5cGVGb3JUeXBlZEFycmF5VHlwZShhcnJheVR5cGUpLAogICAgICBhcnJheVR5cGUsCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gYXR0cmliQnVmZmVyRnJvbUFycmF5TGlrZShnbCwgYXJyYXksIGFycmF5TmFtZSkgewogICAgY29uc3QgdHlwZWRBcnJheSA9IG1ha2VUeXBlZEFycmF5KGFycmF5LCBhcnJheU5hbWUpOwogICAgcmV0dXJuIHsKICAgICAgYXJyYXlUeXBlOiB0eXBlZEFycmF5LmNvbnN0cnVjdG9yLAogICAgICBidWZmZXI6IGNyZWF0ZUJ1ZmZlckZyb21UeXBlZEFycmF5KGdsLCB0eXBlZEFycmF5LCB1bmRlZmluZWQsIGFycmF5LmRyYXdUeXBlKSwKICAgICAgdHlwZTogZ2V0R0xUeXBlRm9yVHlwZWRBcnJheSh0eXBlZEFycmF5KSwKICAgICAgbnVtVmFsdWVzOiAwLAogICAgfTsKICB9CgogIC8qKgogICAqIFRoZSBpbmZvIGZvciBhbiBhdHRyaWJ1dGUuIFRoaXMgaXMgZWZmZWN0aXZlbHkganVzdCB0aGUgYXJndW1lbnRzIHRvIGBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyYCBwbHVzIHRoZSBXZWJHTEJ1ZmZlcgogICAqIGZvciB0aGUgYXR0cmlidXRlLgogICAqCiAgICogQHR5cGVkZWYge09iamVjdH0gQXR0cmliSW5mbwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyW118QXJyYXlCdWZmZXJWaWV3fSBbdmFsdWVdIGEgY29uc3RhbnQgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGUuIE5vdGU6IGlmIHRoaXMgaXMgc2V0IHRoZSBhdHRyaWJ1dGUgd2lsbCBiZQogICAqICAgIGRpc2FibGVkIGFuZCBzZXQgdG8gdGhpcyBjb25zdGFudCB2YWx1ZSBhbmQgYWxsIG90aGVyIHZhbHVlcyB3aWxsIGJlIGlnbm9yZWQuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtudW1Db21wb25lbnRzXSB0aGUgbnVtYmVyIG9mIGNvbXBvbmVudHMgZm9yIHRoaXMgYXR0cmlidXRlLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc2l6ZV0gc3lub255bSBmb3IgYG51bUNvbXBvbmVudHNgLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHlwZV0gdGhlIHR5cGUgb2YgdGhlIGF0dHJpYnV0ZSAoZWcuIGBnbC5GTE9BVGAsIGBnbC5VTlNJR05FRF9CWVRFYCwgZXRjLi4uKSBEZWZhdWx0ID0gYGdsLkZMT0FUYAogICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW25vcm1hbGl6ZV0gd2hldGhlciBvciBub3QgdG8gbm9ybWFsaXplIHRoZSBkYXRhLiBEZWZhdWx0ID0gZmFsc2UKICAgKiBAcHJvcGVydHkge251bWJlcn0gW29mZnNldF0gb2Zmc2V0IGludG8gYnVmZmVyIGluIGJ5dGVzLiBEZWZhdWx0ID0gMAogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc3RyaWRlXSB0aGUgc3RyaWRlIGluIGJ5dGVzIHBlciBlbGVtZW50LiBEZWZhdWx0ID0gMAogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGl2aXNvcl0gdGhlIGRpdmlzb3IgaW4gaW5zdGFuY2VzLiBEZWZhdWx0ID0gMC4KICAgKiAgICBSZXF1aXJlcyBXZWJHTDIgb3IgdGhlIEFOR0xFX2luc3RhbmNlZF9hcnJheXMgZXh0ZW5zaW9uLgogICAqICAgIGFuZCwgaWYgeW91J3JlIHVzaW5nIFdlYkdMMSB5b3UgbXVzdCBoYXZlIGNhbGxlZCB7QGxpbmsgbW9kdWxlOnR3Z2wuYWRkRXh0ZW5zaW9uc1RvQ29udGV4dH0KICAgKiBAcHJvcGVydHkge1dlYkdMQnVmZmVyfSBidWZmZXIgdGhlIGJ1ZmZlciB0aGF0IGNvbnRhaW5zIHRoZSBkYXRhIGZvciB0aGlzIGF0dHJpYnV0ZQogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHJhd1R5cGVdIHRoZSBkcmF3IHR5cGUgcGFzc2VkIHRvIGdsLmJ1ZmZlckRhdGEuIERlZmF1bHQgPSBnbC5TVEFUSUNfRFJBVwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBAdHlwZWRlZiB7KEludDhBcnJheUNvbnN0cnVjdG9yfFVpbnQ4QXJyYXlDb25zdHJ1Y3RvcnxJbnQxNkFycmF5Q29uc3RydWN0b3J8VWludDE2QXJyYXlDb25zdHJ1Y3RvcnxJbnQzMkFycmF5Q29uc3RydWN0b3J8VWludDMyQXJyYXlDb25zdHJ1Y3RvcnxGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcil9IFR5cGVkQXJyYXlDb25zdHJ1Y3RvcgogICAqLwoKICAvKioKICAgKiBVc2UgdGhpcyB0eXBlIG9mIGFycmF5IHNwZWMgd2hlbiBUV0dMIGNhbid0IGd1ZXNzIHRoZSB0eXBlIG9yIG51bWJlciBvZiBjb21wb25lbnRzIG9mIGFuIGFycmF5CiAgICogQHR5cGVkZWYge09iamVjdH0gRnVsbEFycmF5U3BlYwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyW118QXJyYXlCdWZmZXJWaWV3fSBbdmFsdWVdIGEgY29uc3RhbnQgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGUuIE5vdGU6IGlmIHRoaXMgaXMgc2V0IHRoZSBhdHRyaWJ1dGUgd2lsbCBiZQogICAqICAgIGRpc2FibGVkIGFuZCBzZXQgdG8gdGhpcyBjb25zdGFudCB2YWx1ZSBhbmQgYWxsIG90aGVyIHZhbHVlcyB3aWxsIGJlIGlnbm9yZWQuCiAgICogQHByb3BlcnR5IHsobnVtYmVyfG51bWJlcltdfEFycmF5QnVmZmVyVmlldyl9IFtkYXRhXSBUaGUgZGF0YSBvZiB0aGUgYXJyYXkuIEEgbnVtYmVyIGFsb25lIGJlY29tZXMgdGhlIG51bWJlciBvZiBlbGVtZW50cyBvZiB0eXBlLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbnVtQ29tcG9uZW50c10gbnVtYmVyIG9mIGNvbXBvbmVudHMgZm9yIGB2ZXJ0ZXhBdHRyaWJQb2ludGVyYC4gRGVmYXVsdCBpcyBiYXNlZCBvbiB0aGUgbmFtZSBvZiB0aGUgYXJyYXkuCiAgICogICAgSWYgYGNvb3JkYCBpcyBpbiB0aGUgbmFtZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gMmAuCiAgICogICAgSWYgYGNvbG9yYCBpcyBpbiB0aGUgbmFtZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gNGAuCiAgICogICAgb3RoZXJ3aXNlIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAzYAogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfFR5cGVkQXJyYXlDb25zdHJ1Y3Rvcn0gW3R5cGVdIHR5cGUuIFRoaXMgaXMgdXNlZCBpZiBgZGF0YWAgaXMgYSBKYXZhU2NyaXB0IGFycmF5LCBvciBgYnVmZmVyYCBpcyBwYXNzZWQgaW4sIG9yIGBkYXRhYCBpcyBhIG51bWJlci4KICAgKiAgIEl0IGNhbiBlaXRoZXIgYmUgdGhlIGNvbnN0cnVjdG9yIGZvciBhIHR5cGVkYXJyYXkuIChlZy4gYFVpbnQ4QXJyYXlgKSBPUiBhIFdlYkdMIHR5cGUsIChlZyBgZ2wuVU5TSUdORURfQllURWApLgogICAqICAgRm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgY29sb3JzIGluIGEgYFVpbnQ4QXJyYXlgIHlvdSBtaWdodCBoYXZlIGEgYEZ1bGxBcnJheVNwZWNgIGxpa2UgYHsgdHlwZTogZ2wuVU5TSUdORURfQllURSwgZGF0YTogWzI1NSwwLDI1NSwyNTUsIC4uLl0sIH1gLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc2l6ZV0gc3lub255bSBmb3IgYG51bUNvbXBvbmVudHNgLgogICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW25vcm1hbGl6ZV0gbm9ybWFsaXplIGZvciBgdmVydGV4QXR0cmliUG9pbnRlcmAuIERlZmF1bHQgaXMgdHJ1ZSBpZiB0eXBlIGlzIGBJbnQ4QXJyYXlgIG9yIGBVaW50OEFycmF5YCBvdGhlcndpc2UgZmFsc2UuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtzdHJpZGVdIHN0cmlkZSBmb3IgYHZlcnRleEF0dHJpYlBvaW50ZXJgLiBEZWZhdWx0ID0gMAogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0XSBvZmZzZXQgZm9yIGB2ZXJ0ZXhBdHRyaWJQb2ludGVyYC4gRGVmYXVsdCA9IDAKICAgKiBAcHJvcGVydHkge251bWJlcn0gW2Rpdmlzb3JdIGRpdmlzb3IgZm9yIGB2ZXJ0ZXhBdHRyaWJEaXZpc29yYC4gRGVmYXVsdCA9IDAuCiAgICogICAgIFJlcXVpcmVzIFdlYkdMMiBvciB0aGUgQU5HTEVfaW5zdGFuY2VkX2FycmF5cyBleHRlbnNpb24uCiAgICogICAgIGFuZCwgaWYgeW91IHVzaW5nIFdlYkdMMSB5b3UgbXVzdCBoYXZlIGNhbGxlZCB7QGxpbmsgbW9kdWxlOnR3Z2wuYWRkRXh0ZW5zaW9uc1RvQ29udGV4dH0KICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2F0dHJpYl0gbmFtZSBvZiBhdHRyaWJ1dGUgdGhpcyBhcnJheSBtYXBzIHRvLiBEZWZhdWx0cyB0byBzYW1lIG5hbWUgYXMgYXJyYXkgcHJlZml4ZWQgYnkgdGhlIGRlZmF1bHQgYXR0cmliUHJlZml4LgogICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbmFtZV0gc3lub255bSBmb3IgYGF0dHJpYmAuCiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthdHRyaWJOYW1lXSBzeW5vbnltIGZvciBgYXR0cmliYC4KICAgKiBAcHJvcGVydHkge1dlYkdMQnVmZmVyfSBbYnVmZmVyXSBCdWZmZXIgdG8gdXNlIGZvciB0aGlzIGF0dHJpYnV0ZS4gVGhpcyBsZXRzIHlvdSB1c2UgeW91ciBvd24gYnVmZmVyCiAgICogICAgYnV0IHlvdSB3aWxsIG5lZWQgdG8gc3VwcGx5IGBudW1Db21wb25lbnRzYCBhbmQgYHR5cGVgLiBZb3UgY2FuIGVmZmVjdGl2ZWx5IHBhc3MgYW4gYEF0dHJpYkluZm9gCiAgICogICAgdG8gcHJvdmlkZSB0aGlzLiBFeGFtcGxlOgogICAqCiAgICogICAgICAgICBjb25zdCBidWZmZXJJbmZvMSA9IHR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXMoZ2wsIHsKICAgKiAgICAgICAgICAgcG9zaXRpb246IFsxLCAyLCAzLCAuLi4gXSwKICAgKiAgICAgICAgIH0pOwogICAqICAgICAgICAgY29uc3QgYnVmZmVySW5mbzIgPSB0d2dsLmNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzKGdsLCB7CiAgICogICAgICAgICAgIHBvc2l0aW9uOiBidWZmZXJJbmZvMS5hdHRyaWJzLnBvc2l0aW9uLCAgLy8gdXNlIHRoZSBzYW1lIGJ1ZmZlciBmcm9tIGJ1ZmZlckluZm8xCiAgICogICAgICAgICB9KTsKICAgKgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHJhd1R5cGVdIHRoZSBkcmF3IHR5cGUgcGFzc2VkIHRvIGdsLmJ1ZmZlckRhdGEuIERlZmF1bHQgPSBnbC5TVEFUSUNfRFJBVwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBBbiBpbmRpdmlkdWFsIGFycmF5IGluIHtAbGluayBtb2R1bGU6dHdnbC5BcnJheXN9CiAgICoKICAgKiBXaGVuIHBhc3NlZCB0byB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXN9IGlmIGFuIEFycmF5U3BlYyBpcyBgbnVtYmVyW11gIG9yIGBBcnJheUJ1ZmZlclZpZXdgCiAgICogdGhlIHR5cGVzIHdpbGwgYmUgZ3Vlc3NlZCBiYXNlZCBvbiB0aGUgbmFtZS4gYGluZGljZXNgIHdpbGwgYmUgYFVpbnQxNkFycmF5YCwgZXZlcnl0aGluZyBlbHNlIHdpbGwKICAgKiBiZSBgRmxvYXQzMkFycmF5YC4gSWYgYW4gQXJyYXlTcGVjIGlzIGEgbnVtYmVyIGl0J3MgdGhlIG51bWJlciBvZiBmbG9hdHMgZm9yIGFuIGVtcHR5ICh6ZXJvZWQpIGJ1ZmZlci4KICAgKgogICAqIEB0eXBlZGVmIHsobnVtYmVyfG51bWJlcltdfEFycmF5QnVmZmVyVmlld3xtb2R1bGU6dHdnbC5GdWxsQXJyYXlTcGVjKX0gQXJyYXlTcGVjCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIFRoaXMgaXMgYSBKYXZhU2NyaXB0IG9iamVjdCBvZiBhcnJheXMgYnkgbmFtZS4gVGhlIG5hbWVzIHNob3VsZCBtYXRjaCB5b3VyIHNoYWRlcidzIGF0dHJpYnV0ZXMuIElmIHlvdXIKICAgKiBhdHRyaWJ1dGVzIGhhdmUgYSBjb21tb24gcHJlZml4IHlvdSBjYW4gc3BlY2lmeSBpdCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6dHdnbC5zZXRBdHRyaWJ1dGVQcmVmaXh9LgogICAqCiAgICogICAgIEJhcmUgSmF2YVNjcmlwdCBBcnJheXMKICAgKgogICAqICAgICAgICAgdmFyIGFycmF5cyA9IHsKICAgKiAgICAgICAgICAgIHBvc2l0aW9uOiBbLTEsIDEsIDBdLAogICAqICAgICAgICAgICAgbm9ybWFsOiBbMCwgMSwgMF0sCiAgICogICAgICAgICAgICAuLi4KICAgKiAgICAgICAgIH0KICAgKgogICAqICAgICBCYXJlIFR5cGVkQXJyYXlzCiAgICoKICAgKiAgICAgICAgIHZhciBhcnJheXMgPSB7CiAgICogICAgICAgICAgICBwb3NpdGlvbjogbmV3IEZsb2F0MzJBcnJheShbLTEsIDEsIDBdKSwKICAgKiAgICAgICAgICAgIGNvbG9yOiBuZXcgVWludDhBcnJheShbMjU1LCAxMjgsIDY0LCAyNTVdKSwKICAgKiAgICAgICAgICAgIC4uLgogICAqICAgICAgICAgfQogICAqCiAgICogKiAgIFdpbGwgZ3Vlc3MgYXQgYG51bUNvbXBvbmVudHNgIGlmIG5vdCBzcGVjaWZpZWQgYmFzZWQgb24gbmFtZS4KICAgKgogICAqICAgICBJZiBgY29vcmRgIGlzIGluIHRoZSBuYW1lIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAyYAogICAqCiAgICogICAgIElmIGBjb2xvcmAgaXMgaW4gdGhlIG5hbWUgYXNzdW1lcyBgbnVtQ29tcG9uZW50cyA9IDRgCiAgICoKICAgKiAgICAgb3RoZXJ3aXNlIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAzYAogICAqCiAgICogT2JqZWN0cyB3aXRoIHZhcmlvdXMgZmllbGRzLiBTZWUge0BsaW5rIG1vZHVsZTp0d2dsLkZ1bGxBcnJheVNwZWN9LgogICAqCiAgICogICAgIHZhciBhcnJheXMgPSB7CiAgICogICAgICAgcG9zaXRpb246IHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMCwgMCwgMTAsIDEwLCAwXSwgfSwKICAgKiAgICAgICB0ZXhjb29yZDogeyBudW1Db21wb25lbnRzOiAyLCBkYXRhOiBbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0sICAgICAgICAgICAgICAgICB9LAogICAqICAgICAgIG5vcm1hbDogICB7IG51bUNvbXBvbmVudHM6IDMsIGRhdGE6IFswLCAwLCAxLCAwLCAwLCAxLCAwLCAwLCAxLCAwLCAwLCAxXSwgICAgIH0sCiAgICogICAgICAgaW5kaWNlczogIHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDEsIDIsIDEsIDIsIDNdLCAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgKiAgICAgfTsKICAgKgogICAqIEB0eXBlZGVmIHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuQXJyYXlTcGVjPn0gQXJyYXlzCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgoKICAvKioKICAgKiBDcmVhdGVzIGEgc2V0IG9mIGF0dHJpYnV0ZSBkYXRhIGFuZCBXZWJHTEJ1ZmZlcnMgZnJvbSBzZXQgb2YgYXJyYXlzCiAgICoKICAgKiBHaXZlbgogICAqCiAgICogICAgICB2YXIgYXJyYXlzID0gewogICAqICAgICAgICBwb3NpdGlvbjogeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdLCB9LAogICAqICAgICAgICB0ZXhjb29yZDogeyBudW1Db21wb25lbnRzOiAyLCBkYXRhOiBbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0sICAgICAgICAgICAgICAgICB9LAogICAqICAgICAgICBub3JtYWw6ICAgeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMV0sICAgICB9LAogICAqICAgICAgICBjb2xvcjogICAgeyBudW1Db21wb25lbnRzOiA0LCBkYXRhOiBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDAsIDAsIDI1NSwgMCwgMCwgMjU1LCAyNTVdLCB0eXBlOiBVaW50OEFycmF5LCB9LAogICAqICAgICAgICBpbmRpY2VzOiAgeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMSwgMiwgMSwgMiwgM10sICAgICAgICAgICAgICAgICAgICAgICB9LAogICAqICAgICAgfTsKICAgKgogICAqIHJldHVybnMgc29tZXRoaW5nIGxpa2UKICAgKgogICAqICAgICAgdmFyIGF0dHJpYnMgPSB7CiAgICogICAgICAgIHBvc2l0aW9uOiB7IG51bUNvbXBvbmVudHM6IDMsIHR5cGU6IGdsLkZMT0FULCAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIH0sCiAgICogICAgICAgIHRleGNvb3JkOiB7IG51bUNvbXBvbmVudHM6IDIsIHR5cGU6IGdsLkZMT0FULCAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIH0sCiAgICogICAgICAgIG5vcm1hbDogICB7IG51bUNvbXBvbmVudHM6IDMsIHR5cGU6IGdsLkZMT0FULCAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIH0sCiAgICogICAgICAgIGNvbG9yOiAgICB7IG51bUNvbXBvbmVudHM6IDQsIHR5cGU6IGdsLlVOU0lHTkVEX0JZVEUsIG5vcm1hbGl6ZTogdHJ1ZSwgIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIH0sCiAgICogICAgICB9OwogICAqCiAgICogbm90ZXM6CiAgICoKICAgKiAqICAgQXJyYXlzIGNhbiB0YWtlIHZhcmlvdXMgZm9ybXMKICAgKgogICAqICAgICBCYXJlIEphdmFTY3JpcHQgQXJyYXlzCiAgICoKICAgKiAgICAgICAgIHZhciBhcnJheXMgPSB7CiAgICogICAgICAgICAgICBwb3NpdGlvbjogWy0xLCAxLCAwXSwKICAgKiAgICAgICAgICAgIG5vcm1hbDogWzAsIDEsIDBdLAogICAqICAgICAgICAgICAgLi4uCiAgICogICAgICAgICB9CiAgICoKICAgKiAgICAgQmFyZSBUeXBlZEFycmF5cwogICAqCiAgICogICAgICAgICB2YXIgYXJyYXlzID0gewogICAqICAgICAgICAgICAgcG9zaXRpb246IG5ldyBGbG9hdDMyQXJyYXkoWy0xLCAxLCAwXSksCiAgICogICAgICAgICAgICBjb2xvcjogbmV3IFVpbnQ4QXJyYXkoWzI1NSwgMTI4LCA2NCwgMjU1XSksCiAgICogICAgICAgICAgICAuLi4KICAgKiAgICAgICAgIH0KICAgKgogICAqICogICBXaWxsIGd1ZXNzIGF0IGBudW1Db21wb25lbnRzYCBpZiBub3Qgc3BlY2lmaWVkIGJhc2VkIG9uIG5hbWUuCiAgICoKICAgKiAgICAgSWYgYGNvb3JkYCBpcyBpbiB0aGUgbmFtZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gMmAKICAgKgogICAqICAgICBJZiBgY29sb3JgIGlzIGluIHRoZSBuYW1lIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSA0YAogICAqCiAgICogICAgIG90aGVyd2lzZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gM2AKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgd2ViZ2wgcmVuZGVyaW5nIGNvbnRleHQuCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5BcnJheXN9IGFycmF5cyBUaGUgYXJyYXlzCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSBbc3JjQnVmZmVySW5mb10gYSBCdWZmZXJJbmZvIHRvIGNvcHkgZnJvbQogICAqICAgVGhpcyBsZXRzIHlvdSBzaGFyZSBidWZmZXJzLiBBbnkgYXJyYXlzIHlvdSBzdXBwbHkgd2lsbCBvdmVycmlkZQogICAqICAgdGhlIGJ1ZmZlcnMgZnJvbSBzcmNCdWZmZXJJbmZvLgogICAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBtb2R1bGU6dHdnbC5BdHRyaWJJbmZvPn0gdGhlIGF0dHJpYnMKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvYXR0cmlidXRlcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnNGcm9tQXJyYXlzKGdsLCBhcnJheXMpIHsKICAgIGNvbnN0IGF0dHJpYnMgPSB7fTsKICAgIE9iamVjdC5rZXlzKGFycmF5cykuZm9yRWFjaChmdW5jdGlvbihhcnJheU5hbWUpIHsKICAgICAgaWYgKCFpc0luZGljZXMoYXJyYXlOYW1lKSkgewogICAgICAgIGNvbnN0IGFycmF5ID0gYXJyYXlzW2FycmF5TmFtZV07CiAgICAgICAgY29uc3QgYXR0cmliTmFtZSA9IGFycmF5LmF0dHJpYiB8fCBhcnJheS5uYW1lIHx8IGFycmF5LmF0dHJpYk5hbWUgfHwgKGRlZmF1bHRzJDIuYXR0cmliUHJlZml4ICsgYXJyYXlOYW1lKTsKICAgICAgICBpZiAoYXJyYXkudmFsdWUpIHsKICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheS52YWx1ZSkgJiYgIWlzQXJyYXlCdWZmZXIkMShhcnJheS52YWx1ZSkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhcnJheS52YWx1ZSBpcyBub3QgYXJyYXkgb3IgdHlwZWRhcnJheScpOwogICAgICAgICAgfQogICAgICAgICAgYXR0cmlic1thdHRyaWJOYW1lXSA9IHsKICAgICAgICAgICAgdmFsdWU6IGFycmF5LnZhbHVlLAogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IGZuOwogICAgICAgICAgaWYgKGFycmF5LmJ1ZmZlciAmJiBhcnJheS5idWZmZXIgaW5zdGFuY2VvZiBXZWJHTEJ1ZmZlcikgewogICAgICAgICAgICBmbiA9IGF0dHJpYkJ1ZmZlckZyb21CdWZmZXI7CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcnJheSA9PT0gIm51bWJlciIgfHwgdHlwZW9mIGFycmF5LmRhdGEgPT09ICJudW1iZXIiKSB7CiAgICAgICAgICAgIGZuID0gYXR0cmliQnVmZmVyRnJvbVNpemU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmbiA9IGF0dHJpYkJ1ZmZlckZyb21BcnJheUxpa2U7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB7YnVmZmVyLCB0eXBlLCBudW1WYWx1ZXMsIGFycmF5VHlwZX0gPSBmbihnbCwgYXJyYXksIGFycmF5TmFtZSk7CiAgICAgICAgICBjb25zdCBub3JtYWxpemF0aW9uID0gYXJyYXkubm9ybWFsaXplICE9PSB1bmRlZmluZWQgPyBhcnJheS5ub3JtYWxpemUgOiBnZXROb3JtYWxpemF0aW9uRm9yVHlwZWRBcnJheVR5cGUoYXJyYXlUeXBlKTsKICAgICAgICAgIGNvbnN0IG51bUNvbXBvbmVudHMgPSBnZXROdW1Db21wb25lbnRzJDEoYXJyYXksIGFycmF5TmFtZSwgbnVtVmFsdWVzKTsKICAgICAgICAgIGF0dHJpYnNbYXR0cmliTmFtZV0gPSB7CiAgICAgICAgICAgIGJ1ZmZlcjogICAgICAgIGJ1ZmZlciwKICAgICAgICAgICAgbnVtQ29tcG9uZW50czogbnVtQ29tcG9uZW50cywKICAgICAgICAgICAgdHlwZTogICAgICAgICAgdHlwZSwKICAgICAgICAgICAgbm9ybWFsaXplOiAgICAgbm9ybWFsaXphdGlvbiwKICAgICAgICAgICAgc3RyaWRlOiAgICAgICAgYXJyYXkuc3RyaWRlIHx8IDAsCiAgICAgICAgICAgIG9mZnNldDogICAgICAgIGFycmF5Lm9mZnNldCB8fCAwLAogICAgICAgICAgICBkaXZpc29yOiAgICAgICBhcnJheS5kaXZpc29yID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBhcnJheS5kaXZpc29yLAogICAgICAgICAgICBkcmF3VHlwZTogICAgICBhcnJheS5kcmF3VHlwZSwKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGdsLmJpbmRCdWZmZXIoQVJSQVlfQlVGRkVSJDEsIG51bGwpOwogICAgcmV0dXJuIGF0dHJpYnM7CiAgfQoKICBmdW5jdGlvbiBnZXRCeXRlc1BlclZhbHVlRm9yR0xUeXBlKGdsLCB0eXBlKSB7CiAgICBpZiAodHlwZSA9PT0gQllURSQxKSAgICAgICAgICAgcmV0dXJuIDE7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gVU5TSUdORURfQllURSQyKSAgcmV0dXJuIDE7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gU0hPUlQkMSkgICAgICAgICAgcmV0dXJuIDI7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gVU5TSUdORURfU0hPUlQkMikgcmV0dXJuIDI7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gSU5UJDIpICAgICAgICAgICAgcmV0dXJuIDQ7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gVU5TSUdORURfSU5UJDIpICAgcmV0dXJuIDQ7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBpZiAodHlwZSA9PT0gRkxPQVQkMikgICAgICAgICAgcmV0dXJuIDQ7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICByZXR1cm4gMDsKICB9CgogIC8vIFRyaWVzIHRvIGdldCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gYSBzZXQgb2YgYXJyYXlzLgogIGNvbnN0IHBvc2l0aW9uS2V5cyA9IFsncG9zaXRpb24nLCAncG9zaXRpb25zJywgJ2FfcG9zaXRpb24nXTsKCiAgZnVuY3Rpb24gZ2V0TnVtRWxlbWVudHNGcm9tQXR0cmlidXRlcyhnbCwgYXR0cmlicykgewogICAgbGV0IGtleTsKICAgIGxldCBpaTsKICAgIGZvciAoaWkgPSAwOyBpaSA8IHBvc2l0aW9uS2V5cy5sZW5ndGg7ICsraWkpIHsKICAgICAga2V5ID0gcG9zaXRpb25LZXlzW2lpXTsKICAgICAgaWYgKGtleSBpbiBhdHRyaWJzKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAga2V5ID0gZGVmYXVsdHMkMi5hdHRyaWJQcmVmaXggKyBrZXk7CiAgICAgIGlmIChrZXkgaW4gYXR0cmlicykgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAoaWkgPT09IHBvc2l0aW9uS2V5cy5sZW5ndGgpIHsKICAgICAga2V5ID0gT2JqZWN0LmtleXMoYXR0cmlicylbMF07CiAgICB9CiAgICBjb25zdCBhdHRyaWIgPSBhdHRyaWJzW2tleV07CiAgICBpZiAoIWF0dHJpYi5idWZmZXIpIHsKICAgICAgcmV0dXJuIDE7IC8vIFRoZXJlJ3Mgbm8gYnVmZmVyCiAgICB9CiAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiQxLCBhdHRyaWIuYnVmZmVyKTsKICAgIGNvbnN0IG51bUJ5dGVzID0gZ2wuZ2V0QnVmZmVyUGFyYW1ldGVyKEFSUkFZX0JVRkZFUiQxLCBCVUZGRVJfU0laRSk7CiAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiQxLCBudWxsKTsKCiAgICBjb25zdCBieXRlc1BlclZhbHVlID0gZ2V0Qnl0ZXNQZXJWYWx1ZUZvckdMVHlwZShnbCwgYXR0cmliLnR5cGUpOwogICAgY29uc3QgdG90YWxFbGVtZW50cyA9IG51bUJ5dGVzIC8gYnl0ZXNQZXJWYWx1ZTsKICAgIGNvbnN0IG51bUNvbXBvbmVudHMgPSBhdHRyaWIubnVtQ29tcG9uZW50cyB8fCBhdHRyaWIuc2l6ZTsKICAgIC8vIFRPRE86IGNoZWNrIHN0cmlkZQogICAgY29uc3QgbnVtRWxlbWVudHMgPSB0b3RhbEVsZW1lbnRzIC8gbnVtQ29tcG9uZW50czsKICAgIGlmIChudW1FbGVtZW50cyAlIDEgIT09IDApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBudW1Db21wb25lbnRzICR7bnVtQ29tcG9uZW50c30gbm90IGNvcnJlY3QgZm9yIGxlbmd0aCAke2xlbmd0aH1gKTsKICAgIH0KICAgIHJldHVybiBudW1FbGVtZW50czsKICB9CgogIC8qKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IEJ1ZmZlckluZm8KICAgKiBAcHJvcGVydHkge251bWJlcn0gbnVtRWxlbWVudHMgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBwYXNzIHRvIGBnbC5kcmF3QXJyYXlzYCBvciBgZ2wuZHJhd0VsZW1lbnRzYC4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2VsZW1lbnRUeXBlXSBUaGUgdHlwZSBvZiBpbmRpY2VzIGBVTlNJR05FRF9CWVRFYCwgYFVOU0lHTkVEX1NIT1JUYCBldGMuLgogICAqIEBwcm9wZXJ0eSB7V2ViR0xCdWZmZXJ9IFtpbmRpY2VzXSBUaGUgaW5kaWNlcyBgRUxFTUVOVF9BUlJBWV9CVUZGRVJgIGlmIGFueSBpbmRpY2VzIGV4aXN0LgogICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsIG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+fSBbYXR0cmlic10gVGhlIGF0dHJpYnMgYXBwcm9wcmlhdGUgdG8gY2FsbCBgc2V0QXR0cmlidXRlc2AKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogQ3JlYXRlcyBhIEJ1ZmZlckluZm8gZnJvbSBhbiBvYmplY3Qgb2YgYXJyYXlzLgogICAqCiAgICogVGhpcyBjYW4gYmUgcGFzc2VkIHRvIHtAbGluayBtb2R1bGU6dHdnbC5zZXRCdWZmZXJzQW5kQXR0cmlidXRlc30gYW5kIHRvCiAgICoge0BsaW5rIG1vZHVsZTp0d2dsOmRyYXdCdWZmZXJJbmZvfS4KICAgKgogICAqIEdpdmVuIGFuIG9iamVjdCBsaWtlCiAgICoKICAgKiAgICAgdmFyIGFycmF5cyA9IHsKICAgKiAgICAgICBwb3NpdGlvbjogeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdLCB9LAogICAqICAgICAgIHRleGNvb3JkOiB7IG51bUNvbXBvbmVudHM6IDIsIGRhdGE6IFswLCAwLCAwLCAxLCAxLCAwLCAxLCAxXSwgICAgICAgICAgICAgICAgIH0sCiAgICogICAgICAgbm9ybWFsOiAgIHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDFdLCAgICAgfSwKICAgKiAgICAgICBpbmRpY2VzOiAgeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMSwgMiwgMSwgMiwgM10sICAgICAgICAgICAgICAgICAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogIENyZWF0ZXMgYW4gQnVmZmVySW5mbyBsaWtlIHRoaXMKICAgKgogICAqICAgICBidWZmZXJJbmZvID0gewogICAqICAgICAgIG51bUVsZW1lbnRzOiA0LCAgICAgICAgLy8gb3Igd2hhdGV2ZXIgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpcwogICAqICAgICAgIGluZGljZXM6IFdlYkdMQnVmZmVyLCAgLy8gdGhpcyBwcm9wZXJ0eSB3aWxsIG5vdCBleGlzdCBpZiB0aGVyZSBhcmUgbm8gaW5kaWNlcwogICAqICAgICAgIGF0dHJpYnM6IHsKICAgKiAgICAgICAgIHBvc2l0aW9uOiB7IGJ1ZmZlcjogV2ViR0xCdWZmZXIsIG51bUNvbXBvbmVudHM6IDMsIH0sCiAgICogICAgICAgICBub3JtYWw6ICAgeyBidWZmZXI6IFdlYkdMQnVmZmVyLCBudW1Db21wb25lbnRzOiAzLCB9LAogICAqICAgICAgICAgdGV4Y29vcmQ6IHsgYnVmZmVyOiBXZWJHTEJ1ZmZlciwgbnVtQ29tcG9uZW50czogMiwgfSwKICAgKiAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogIFRoZSBwcm9wZXJ0aWVzIG9mIGFycmF5cyBjYW4gYmUgSmF2YVNjcmlwdCBhcnJheXMgaW4gd2hpY2ggY2FzZSB0aGUgbnVtYmVyIG9mIGNvbXBvbmVudHMKICAgKiAgd2lsbCBiZSBndWVzc2VkLgogICAqCiAgICogICAgIHZhciBhcnJheXMgPSB7CiAgICogICAgICAgIHBvc2l0aW9uOiBbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdLAogICAqICAgICAgICB0ZXhjb29yZDogWzAsIDAsIDAsIDEsIDEsIDAsIDEsIDFdLAogICAqICAgICAgICBub3JtYWw6ICAgWzAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDFdLAogICAqICAgICAgICBpbmRpY2VzOiAgWzAsIDEsIDIsIDEsIDIsIDNdLAogICAqICAgICB9OwogICAqCiAgICogIFRoZXkgY2FuIGFsc28gYmUgVHlwZWRBcnJheXMKICAgKgogICAqICAgICB2YXIgYXJyYXlzID0gewogICAqICAgICAgICBwb3NpdGlvbjogbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdKSwKICAgKiAgICAgICAgdGV4Y29vcmQ6IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDAsIDEsIDEsIDAsIDEsIDFdKSwKICAgKiAgICAgICAgbm9ybWFsOiAgIG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDFdKSwKICAgKiAgICAgICAgaW5kaWNlczogIG5ldyBVaW50MTZBcnJheShbMCwgMSwgMiwgMSwgMiwgM10pLAogICAqICAgICB9OwogICAqCiAgICogIE9yIEF1Z21lbnRlZFR5cGVkQXJyYXlzCiAgICoKICAgKiAgICAgdmFyIHBvc2l0aW9ucyA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgNCk7CiAgICogICAgIHZhciB0ZXhjb29yZHMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDIsIDQpOwogICAqICAgICB2YXIgbm9ybWFscyAgID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgzLCA0KTsKICAgKiAgICAgdmFyIGluZGljZXMgICA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgMiwgVWludDE2QXJyYXkpOwogICAqCiAgICogICAgIHBvc2l0aW9ucy5wdXNoKFswLCAwLCAwLCAxMCwgMCwgMCwgMCwgMTAsIDAsIDEwLCAxMCwgMF0pOwogICAqICAgICB0ZXhjb29yZHMucHVzaChbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0pOwogICAqICAgICBub3JtYWxzLnB1c2goWzAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDFdKTsKICAgKiAgICAgaW5kaWNlcy5wdXNoKFswLCAxLCAyLCAxLCAyLCAzXSk7CiAgICoKICAgKiAgICAgdmFyIGFycmF5cyA9IHsKICAgKiAgICAgICAgcG9zaXRpb246IHBvc2l0aW9ucywKICAgKiAgICAgICAgdGV4Y29vcmQ6IHRleGNvb3JkcywKICAgKiAgICAgICAgbm9ybWFsOiAgIG5vcm1hbHMsCiAgICogICAgICAgIGluZGljZXM6ICBpbmRpY2VzLAogICAqICAgICB9OwogICAqCiAgICogRm9yIHRoZSBsYXN0IGV4YW1wbGUgaXQgaXMgZXF1aXZhbGVudCB0bwogICAqCiAgICogICAgIHZhciBidWZmZXJJbmZvID0gewogICAqICAgICAgIGF0dHJpYnM6IHsKICAgKiAgICAgICAgIHBvc2l0aW9uOiB7IG51bUNvbXBvbmVudHM6IDMsIGJ1ZmZlcjogZ2wuY3JlYXRlQnVmZmVyKCksIH0sCiAgICogICAgICAgICB0ZXhjb29yZDogeyBudW1Db21wb25lbnRzOiAyLCBidWZmZXI6IGdsLmNyZWF0ZUJ1ZmZlcigpLCB9LAogICAqICAgICAgICAgbm9ybWFsOiB7IG51bUNvbXBvbmVudHM6IDMsIGJ1ZmZlcjogZ2wuY3JlYXRlQnVmZmVyKCksIH0sCiAgICogICAgICAgfSwKICAgKiAgICAgICBpbmRpY2VzOiBnbC5jcmVhdGVCdWZmZXIoKSwKICAgKiAgICAgICBudW1FbGVtZW50czogNiwKICAgKiAgICAgfTsKICAgKgogICAqICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVySW5mby5hdHRyaWJzLnBvc2l0aW9uLmJ1ZmZlcik7CiAgICogICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBhcnJheXMucG9zaXRpb24sIGdsLlNUQVRJQ19EUkFXKTsKICAgKiAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlckluZm8uYXR0cmlicy50ZXhjb29yZC5idWZmZXIpOwogICAqICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgYXJyYXlzLnRleGNvb3JkLCBnbC5TVEFUSUNfRFJBVyk7CiAgICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXJJbmZvLmF0dHJpYnMubm9ybWFsLmJ1ZmZlcik7CiAgICogICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBhcnJheXMubm9ybWFsLCBnbC5TVEFUSUNfRFJBVyk7CiAgICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGJ1ZmZlckluZm8uaW5kaWNlcyk7CiAgICogICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGFycmF5cy5pbmRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7CiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLkFycmF5c30gYXJyYXlzIFlvdXIgZGF0YQogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuQnVmZmVySW5mb30gW3NyY0J1ZmZlckluZm9dIEFuIGV4aXN0aW5nCiAgICogICAgICAgIGJ1ZmZlciBpbmZvIHRvIHN0YXJ0IGZyb20uIFdlYkdMQnVmZmVycyBldGMgc3BlY2lmaWVkCiAgICogICAgICAgIGluIHRoZSBzcmNCdWZmZXJJbmZvIHdpbGwgYmUgdXNlZCBpbiBhIG5ldyBCdWZmZXJJbmZvCiAgICogICAgICAgIHdpdGggYW55IGFycmF5cyBzcGVjaWZpZWQgb3ZlcnJpZGluZyB0aGUgb25lcyBpbgogICAqICAgICAgICBzcmNCdWZmZXJJbmZvLgogICAqIEByZXR1cm4ge21vZHVsZTp0d2dsLkJ1ZmZlckluZm99IEEgQnVmZmVySW5mbwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9hdHRyaWJ1dGVzCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXMoZ2wsIGFycmF5cywgc3JjQnVmZmVySW5mbykgewogICAgY29uc3QgbmV3QXR0cmlicyA9IGNyZWF0ZUF0dHJpYnNGcm9tQXJyYXlzKGdsLCBhcnJheXMpOwogICAgY29uc3QgYnVmZmVySW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIHNyY0J1ZmZlckluZm8gPyBzcmNCdWZmZXJJbmZvIDoge30pOwogICAgYnVmZmVySW5mby5hdHRyaWJzID0gT2JqZWN0LmFzc2lnbih7fSwgc3JjQnVmZmVySW5mbyA/IHNyY0J1ZmZlckluZm8uYXR0cmlicyA6IHt9LCBuZXdBdHRyaWJzKTsKICAgIGNvbnN0IGluZGljZXMgPSBhcnJheXMuaW5kaWNlczsKICAgIGlmIChpbmRpY2VzKSB7CiAgICAgIGNvbnN0IG5ld0luZGljZXMgPSBtYWtlVHlwZWRBcnJheShpbmRpY2VzLCAiaW5kaWNlcyIpOwogICAgICBidWZmZXJJbmZvLmluZGljZXMgPSBjcmVhdGVCdWZmZXJGcm9tVHlwZWRBcnJheShnbCwgbmV3SW5kaWNlcywgRUxFTUVOVF9BUlJBWV9CVUZGRVIkMik7CiAgICAgIGJ1ZmZlckluZm8ubnVtRWxlbWVudHMgPSBuZXdJbmRpY2VzLmxlbmd0aDsKICAgICAgYnVmZmVySW5mby5lbGVtZW50VHlwZSA9IGdldEdMVHlwZUZvclR5cGVkQXJyYXkobmV3SW5kaWNlcyk7CiAgICB9IGVsc2UgaWYgKCFidWZmZXJJbmZvLm51bUVsZW1lbnRzKSB7CiAgICAgIGJ1ZmZlckluZm8ubnVtRWxlbWVudHMgPSBnZXROdW1FbGVtZW50c0Zyb21BdHRyaWJ1dGVzKGdsLCBidWZmZXJJbmZvLmF0dHJpYnMpOwogICAgfQoKICAgIHJldHVybiBidWZmZXJJbmZvOwogIH0KCiAgLyoKICAgKiBDb3B5cmlnaHQgMjAxOSBHcmVnZyBUYXZhcmVzCiAgICoKICAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQogICAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCiAgICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgogICAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAogICAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQogICAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CiAgICoKICAgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogICAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgogICAqCiAgICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICAgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKICAgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKICAgKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgogICAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCiAgICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUgogICAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KICAgKi8KCiAgLyoqCiAgICogR2V0cyB0aGUgZ2wgdmVyc2lvbiBhcyBhIG51bWJlcgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEByZXR1cm4ge251bWJlcn0gdmVyc2lvbiBvZiBnbAogICAqIEBwcml2YXRlCiAgICovCiAgLy9mdW5jdGlvbiBnZXRWZXJzaW9uQXNOdW1iZXIoZ2wpIHsKICAvLyAgcmV0dXJuIHBhcnNlRmxvYXQoZ2wuZ2V0UGFyYW1ldGVyKGdsLlZFUlNJT04pLnN1YnN0cig2KSk7CiAgLy99CgogIC8qKgogICAqIENoZWNrIGlmIGNvbnRleHQgaXMgV2ViR0wgMi4wCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHJldHVybiB7Ym9vbH0gdHJ1ZSBpZiBpdCdzIFdlYkdMIDIuMAogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwogIGZ1bmN0aW9uIGlzV2ViR0wyKGdsKSB7CiAgICAvLyBUaGlzIGlzIHRoZSBjb3JyZWN0IGNoZWNrIGJ1dCBpdCdzIHNsb3cKICAgIC8vICByZXR1cm4gZ2wuZ2V0UGFyYW1ldGVyKGdsLlZFUlNJT04pLmluZGV4T2YoIldlYkdMIDIuMCIpID09PSAwOwogICAgLy8gVGhpcyBtaWdodCBhbHNvIGJlIHRoZSBjb3JyZWN0IGNoZWNrIGJ1dCBJJ20gYXNzdW1pbmcgaXQncyBzbG93LWlzaAogICAgLy8gcmV0dXJuIGdsIGluc3RhbmNlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dDsKICAgIHJldHVybiAhIWdsLnRleFN0b3JhZ2UyRDsKICB9CgogIC8qKgogICAqIEdldHMgYSBzdHJpbmcgZm9yIFdlYkdMIGVudW0KICAgKgogICAqIE5vdGU6IFNldmVyYWwgZW51bXMgYXJlIHRoZSBzYW1lLiBXaXRob3V0IG1vcmUKICAgKiBjb250ZXh0ICh3aGljaCBmdW5jdGlvbikgaXQncyBpbXBvc3NpYmxlIHRvIGFsd2F5cwogICAqIGdpdmUgdGhlIGNvcnJlY3QgZW51bS4gQXMgaXQgaXMsIGZvciBtYXRjaGluZyB2YWx1ZXMKICAgKiBpdCBnaXZlcyBhbGwgZW51bXMuIENoZWNraW5nIHRoZSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0CiAgICogdGhhdCBtZWFucwogICAqCiAgICogICAgICAwICAgICA9IFpFUk8gfCBQT0lOVCB8IE5PTkUgfCBOT19FUlJPUgogICAqICAgICAgMSAgICAgPSBPTkUgfCBMSU5FUyB8IFNZTkNfRkxVU0hfQ09NTUFORFNfQklUCiAgICogICAgICAzMjc3NyA9IEJMRU5EX0VRVUFUSU9OX1JHQiB8IEJMRU5EX0VRVUFUSU9OX1JHQgogICAqICAgICAgMzY2NjIgPSBDT1BZX1JFQURfQlVGRkVSIHwgQ09QWV9SRUFEX0JVRkZFUl9CSU5ESU5HCiAgICogICAgICAzNjY2MyA9IENPUFlfV1JJVEVfQlVGRkVSIHwgQ09QWV9XUklURV9CVUZGRVJfQklORElORwogICAqICAgICAgMzYwMDYgPSBGUkFNRUJVRkZFUl9CSU5ESU5HIHwgRFJBV19GUkFNRUJVRkZFUl9CSU5ESU5HCiAgICoKICAgKiBJdCdzIGFsc28gbm90IHVzZWZ1bCBmb3IgYml0cyByZWFsbHkgdW5sZXNzIHlvdSBwYXNzIGluIGluZGl2aWR1YWwgYml0cy4KICAgKiBJbiBvdGhlciB3b3JkcwogICAqCiAgICogICAgIGNvbnN0IGJpdHMgPSBnbC5DT0xPUl9CVUZGRVJfQklUIHwgZ2wuREVQVEhfQlVGRkVSX0JJVDsKICAgKiAgICAgdHdnbC5nbEVudW1Ub1N0cmluZyhnbCwgYml0cyk7ICAvLyBub3QgZ29pbmcgdG8gd29yawogICAqCiAgICogTm90ZSB0aGF0IHNvbWUgZW51bXMgb25seSBleGlzdCBvbiBleHRlbnNpb25zLiBJZiB5b3UKICAgKiB3YW50IHRoZW0gdG8gc2hvdyB1cCB5b3UgbmVlZCB0byBwYXNzIHRoZSBleHRlbnNpb24gYXQgbGVhc3QKICAgKiBvbmNlLiBGb3IgZXhhbXBsZQogICAqCiAgICogICAgIGNvbnN0IGV4dCA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnKTsKICAgKiAgICAgaWYgKGV4dCkgewogICAqICAgICAgICB0d2dsLmdsRW51bVRvU3RyaW5nKGV4dCwgMCk7ICAvLyBqdXN0IHByaW1lIHRoZSBmdW5jdGlvbgogICAqCiAgICogICAgICAgIC4ubGF0ZXIuLgogICAqCiAgICogICAgICAgIGNvbnN0IGludGVybmFsRm9ybWF0ID0gZXh0LkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7CiAgICogICAgICAgIGNvbnNvbGUubG9nKHR3Z2wuZ2xFbnVtVG9TdHJpbmcoZ2wsIGludGVybmFsRm9ybWF0KSk7CiAgICoKICAgKiBOb3RpY2UgSSBkaWRuJ3QgaGF2ZSB0byBwYXNzIHRoZSBleHRlbnNpb24gdGhlIHNlY29uZCB0aW1lLiBUaGlzIG1lYW5zCiAgICogeW91IGNhbiBoYXZlIHBsYWNlIHRoYXQgZ2VuZXJpY2FsbHkgZ2V0cyBhbiBlbnVtIGZvciB0ZXh0dXJlIGZvcm1hdHMgZm9yIGV4YW1wbGUuCiAgICogYW5kIGFzIGxvbmcgYXMgeW91IHByaW1lZCB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgZXh0ZW5zaW9ucwogICAqCiAgICogSWYgeW91J3JlIHVzaW5nIGB0d2dsLmFkZEV4dGVuc2lvbnNUb0NvbnRleHRgIHRvIGVuYWJsZSB5b3VyIGV4dGVuc2lvbnMKICAgKiB0aGVuIHR3Z2wgd2lsbCBhdXRvbWF0aWNhbGx5IGdldCB0aGUgZXh0ZW5zaW9uJ3MgZW51bXMuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHQgb3IgYW55IGV4dGVuc2lvbiBvYmplY3QKICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgdGhlIHZhbHVlIG9mIHRoZSBlbnVtIHlvdSB3YW50IHRvIGxvb2sgdXAuCiAgICogQHJldHVybiB7c3RyaW5nfSBlbnVtIHN0cmluZyBvciBoZXggdmFsdWUKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKiBAZnVuY3Rpb24gZ2xFbnVtVG9TdHJpbmcKICAgKi8KICBjb25zdCBnbEVudW1Ub1N0cmluZyA9IChmdW5jdGlvbigpIHsKICAgIGNvbnN0IGhhdmVFbnVtc0ZvclR5cGUgPSB7fTsKICAgIGNvbnN0IGVudW1zID0ge307CgogICAgZnVuY3Rpb24gYWRkRW51bXMoZ2wpIHsKICAgICAgY29uc3QgdHlwZSA9IGdsLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgIGlmICghaGF2ZUVudW1zRm9yVHlwZVt0eXBlXSkgewogICAgICAgIGZvciAoY29uc3Qga2V5IGluIGdsKSB7CiAgICAgICAgICBpZiAodHlwZW9mIGdsW2tleV0gPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZW51bXNbZ2xba2V5XV07CiAgICAgICAgICAgIGVudW1zW2dsW2tleV1dID0gZXhpc3RpbmcgPyBgJHtleGlzdGluZ30gfCAke2tleX1gIDoga2V5OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBoYXZlRW51bXNGb3JUeXBlW3R5cGVdID0gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiBnbEVudW1Ub1N0cmluZyhnbCwgdmFsdWUpIHsKICAgICAgYWRkRW51bXMoZ2wpOwogICAgICByZXR1cm4gZW51bXNbdmFsdWVdIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInID8gYDB4JHt2YWx1ZS50b1N0cmluZygxNil9YCA6IHZhbHVlKTsKICAgIH07CiAgfSgpKTsKCiAgLyoKICAgKiBDb3B5cmlnaHQgMjAxOSBHcmVnZyBUYXZhcmVzCiAgICoKICAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQogICAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCiAgICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgogICAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAogICAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQogICAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CiAgICoKICAgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogICAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgogICAqCiAgICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICAgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKICAgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKICAgKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgogICAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCiAgICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUgogICAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KICAgKi8KICBjb25zdCBkZWZhdWx0cyQxID0gewogICAgdGV4dHVyZUNvbG9yOiBuZXcgVWludDhBcnJheShbMTI4LCAxOTIsIDI1NSwgMjU1XSksCiAgICB0ZXh0dXJlT3B0aW9uczoge30sCiAgICBjcm9zc09yaWdpbjogdW5kZWZpbmVkLAogIH07CiAgY29uc3QgaXNBcnJheUJ1ZmZlciA9IGlzQXJyYXlCdWZmZXIkMTsKCiAgLy8gU2hvdWxkIHdlIG1ha2UgdGhpcyBvbiBkZW1hbmQ/CiAgY29uc3QgZ2V0U2hhcmVkMkRDb250ZXh0ID0gZnVuY3Rpb24oKSB7CiAgICBsZXQgc19jdHg7CiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0U2hhcmVkMkRDb250ZXh0KCkgewogICAgICBzX2N0eCA9IHNfY3R4IHx8CiAgICAgICAgICAoKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCkKICAgICAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpCiAgICAgICAgICAgIDogbnVsbCk7CiAgICAgIHJldHVybiBzX2N0eDsKICAgIH07CiAgfSgpOwoKICAvLyBOT1RFOiBDaHJvbWUgc3VwcG9ydHMgMkQgY2FudmFzIGluIGEgV29ya2VyIChiZWhpbmQgZmxhZyBhcyBvZiB2NjQgYnV0CiAgLy8gICAgICAgbm90IG9ubHkgZG9lcyBGaXJlZm94IE5PVCBzdXBwb3J0IGl0IGJ1dCBGaXJlZm94IGZyZWV6ZXMgaW1tZWRpYXRlbHkKICAvLyAgICAgICBpZiB5b3UgdHJ5IHRvIGNyZWF0ZSBvbmUgaW5zdGVhZCBvZiBqdXN0IHJldHVybmluZyBudWxsIGFuZCBjb250aW51aW5nLgogIC8vICA6IChnbG9iYWwuT2Zmc2NyZWVuQ2FudmFzICYmIChuZXcgZ2xvYmFsLk9mZnNjcmVlbkNhbnZhcygxLCAxKSkuZ2V0Q29udGV4dCgiMmQiKSk7ICAvLyBPZmZzY3JlZW5DYW52YXMgbWF5IG5vdCBzdXBwb3J0IDJkCgogIC8vIE5PVEU6IFdlIGNhbiBtYXliZSByZW1vdmUgc29tZSBvZiB0aGUgbmVlZCBmb3IgdGhlIDJkIGNhbnZhcy4gSW4gV2ViR0wyCiAgLy8gd2UgY2FuIHVzZSB0aGUgdmFyaW91cyB1bnBhY2sgc2V0dGluZ3MuIE90aGVyd2lzZSB3ZSBjb3VsZCB0cnkgdXNpbmcKICAvLyB0aGUgYWJpbGl0eSBvZiBhbiBJbWFnZUJpdG1hcCB0byBiZSBjdXQuIFVuZm9ydHVuYXRlbHkgY3V0dGluZyBhbiBJbWFnZUJpdG1hcAogIC8vIGlzIGFzeW5jIGFuZCB0aGUgY3VycmVudCBUV0dMIGNvZGUgZXhwZWN0cyBhIG5vbi1Bc3luYyByZXN1bHQgdGhvdWdoIHRoYXQKICAvLyBtaWdodCBub3QgYmUgYSBwcm9ibGVtLiBJbWFnZUJpdG1hcCB0aG91Z2ggaXMgbm90IGF2YWlsYWJsZSBpbiBFZGdlIG9yIFNhZmFyaQogIC8vIGFzIG9mIDIwMTgtMDEtMDIKCiAgLyogUGl4ZWxGb3JtYXQgKi8KICBjb25zdCBBTFBIQSAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE5MDY7CiAgY29uc3QgUkdCICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxOTA3OwogIGNvbnN0IFJHQkEkMSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxOTA4OwogIGNvbnN0IExVTUlOQU5DRSAgICAgICAgICAgICAgICAgICAgICA9IDB4MTkwOTsKICBjb25zdCBMVU1JTkFOQ0VfQUxQSEEgICAgICAgICAgICAgICAgPSAweDE5MEE7CiAgY29uc3QgREVQVEhfQ09NUE9ORU5UJDEgICAgICAgICAgICAgICAgPSAweDE5MDI7CiAgY29uc3QgREVQVEhfU1RFTkNJTCQxICAgICAgICAgICAgICAgICAgPSAweDg0Rjk7CgogIC8qIFRleHR1cmVXcmFwTW9kZSAqLwogIC8vIGNvbnN0IFJFUEVBVCAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MjkwMTsKICAvLyBjb25zdCBNSVJST1JFRF9SRVBFQVQgICAgICAgICAgICAgICAgPSAweDgzNzA7CiAgY29uc3QgQ0xBTVBfVE9fRURHRSQxICAgICAgICAgICAgICAgICAgPSAweDgxMmY7CgogIC8qIFRleHR1cmVNYWdGaWx0ZXIgKi8KICBjb25zdCBORUFSRVNUICAgICAgICAgICAgICAgICAgICAgICAgPSAweDI2MDA7CiAgY29uc3QgTElORUFSJDEgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDI2MDE7CgogIC8qIFRleHR1cmVNaW5GaWx0ZXIgKi8KICAvLyBjb25zdCBORUFSRVNUX01JUE1BUF9ORUFSRVNUICAgICAgICAgPSAweDI3MDA7CiAgLy8gY29uc3QgTElORUFSX01JUE1BUF9ORUFSRVNUICAgICAgICAgID0gMHgyNzAxOwogIC8vIGNvbnN0IE5FQVJFU1RfTUlQTUFQX0xJTkVBUiAgICAgICAgICA9IDB4MjcwMjsKICAvLyBjb25zdCBMSU5FQVJfTUlQTUFQX0xJTkVBUiAgICAgICAgICAgPSAweDI3MDM7CgogIC8qIFRleHR1cmUgVGFyZ2V0ICovCiAgY29uc3QgVEVYVFVSRV8yRCQyICAgICAgICAgICAgICAgICAgICAgPSAweDBkZTE7CiAgY29uc3QgVEVYVFVSRV9DVUJFX01BUCQxICAgICAgICAgICAgICAgPSAweDg1MTM7CiAgY29uc3QgVEVYVFVSRV8zRCQxICAgICAgICAgICAgICAgICAgICAgPSAweDgwNmY7CiAgY29uc3QgVEVYVFVSRV8yRF9BUlJBWSQxICAgICAgICAgICAgICAgPSAweDhjMWE7CgogIC8qIEN1YmVtYXAgVGFyZ2V0cyAqLwogIGNvbnN0IFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCAgICA9IDB4ODUxNTsKICBjb25zdCBURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1ggICAgPSAweDg1MTY7CiAgY29uc3QgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9ZICAgID0gMHg4NTE3OwogIGNvbnN0IFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWSAgICA9IDB4ODUxODsKICBjb25zdCBURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ogICAgPSAweDg1MTk7CiAgY29uc3QgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9aICAgID0gMHg4NTFhOwoKICAvKiBUZXh0dXJlIFBhcmFtZXRlcnMgKi8KICBjb25zdCBURVhUVVJFX01JTl9GSUxURVIgICAgICAgICAgICAgPSAweDI4MDE7CiAgY29uc3QgVEVYVFVSRV9NQUdfRklMVEVSICAgICAgICAgICAgID0gMHgyODAwOwogIGNvbnN0IFRFWFRVUkVfV1JBUF9TICAgICAgICAgICAgICAgICA9IDB4MjgwMjsKICBjb25zdCBURVhUVVJFX1dSQVBfVCAgICAgICAgICAgICAgICAgPSAweDI4MDM7CiAgY29uc3QgVEVYVFVSRV9XUkFQX1IgICAgICAgICAgICAgICAgID0gMHg4MDcyOwogIGNvbnN0IFRFWFRVUkVfTUlOX0xPRCAgICAgICAgICAgICAgICA9IDB4ODEzYTsKICBjb25zdCBURVhUVVJFX01BWF9MT0QgICAgICAgICAgICAgICAgPSAweDgxM2I7CiAgY29uc3QgVEVYVFVSRV9CQVNFX0xFVkVMICAgICAgICAgICAgID0gMHg4MTNjOwogIGNvbnN0IFRFWFRVUkVfTUFYX0xFVkVMICAgICAgICAgICAgICA9IDB4ODEzZDsKICBjb25zdCBURVhUVVJFX0NPTVBBUkVfTU9ERSAgICAgICAgICAgPSAweDg4NEM7CiAgY29uc3QgVEVYVFVSRV9DT01QQVJFX0ZVTkMgICAgICAgICAgID0gMHg4ODREOwoKICAvKiBQaXhlbCBzdG9yZSAqLwogIGNvbnN0IFVOUEFDS19BTElHTk1FTlQgICAgICAgICAgICAgICAgICAgPSAweDBjZjU7CiAgY29uc3QgVU5QQUNLX1JPV19MRU5HVEggICAgICAgICAgICAgICAgICA9IDB4MGNmMjsKICBjb25zdCBVTlBBQ0tfSU1BR0VfSEVJR0hUICAgICAgICAgICAgICAgID0gMHg4MDZlOwogIGNvbnN0IFVOUEFDS19TS0lQX1BJWEVMUyAgICAgICAgICAgICAgICAgPSAweDBjZjQ7CiAgY29uc3QgVU5QQUNLX1NLSVBfUk9XUyAgICAgICAgICAgICAgICAgICA9IDB4MGNmMzsKICBjb25zdCBVTlBBQ0tfU0tJUF9JTUFHRVMgICAgICAgICAgICAgICAgID0gMHg4MDZkOwogIGNvbnN0IFVOUEFDS19DT0xPUlNQQUNFX0NPTlZFUlNJT05fV0VCR0wgPSAweDkyNDM7CiAgY29uc3QgVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMICAgICA9IDB4OTI0MTsKICBjb25zdCBVTlBBQ0tfRkxJUF9ZX1dFQkdMICAgICAgICAgICAgICAgID0gMHg5MjQwOwoKICBjb25zdCBSOCAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjI5OwogIGNvbnN0IFI4X1NOT1JNICAgICAgICAgICAgICAgICAgICAgPSAweDhGOTQ7CiAgY29uc3QgUjE2RiAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIyRDsKICBjb25zdCBSMzJGICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjJFOwogIGNvbnN0IFI4VUkgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzI7CiAgY29uc3QgUjhJICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzMTsKICBjb25zdCBSRzE2VUkgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjNBOwogIGNvbnN0IFJHMTZJICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzk7CiAgY29uc3QgUkczMlVJICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzQzsKICBjb25zdCBSRzMySSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjNCOwogIGNvbnN0IFJHOCAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMkI7CiAgY29uc3QgUkc4X1NOT1JNICAgICAgICAgICAgICAgICAgICA9IDB4OEY5NTsKICBjb25zdCBSRzE2RiAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjJGOwogIGNvbnN0IFJHMzJGICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzA7CiAgY29uc3QgUkc4VUkgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzODsKICBjb25zdCBSRzhJICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjM3OwogIGNvbnN0IFIxNlVJICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzQ7CiAgY29uc3QgUjE2SSAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzMzsKICBjb25zdCBSMzJVSSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjM2OwogIGNvbnN0IFIzMkkgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzU7CiAgY29uc3QgUkdCOCAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODA1MTsKICBjb25zdCBTUkdCOCAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4QzQxOwogIGNvbnN0IFJHQjU2NSQxICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ2MjsKICBjb25zdCBSR0I4X1NOT1JNICAgICAgICAgICAgICAgICAgID0gMHg4Rjk2OwogIGNvbnN0IFIxMUZfRzExRl9CMTBGICAgICAgICAgICAgICAgPSAweDhDM0E7CiAgY29uc3QgUkdCOV9FNSAgICAgICAgICAgICAgICAgICAgICA9IDB4OEMzRDsKICBjb25zdCBSR0IxNkYgICAgICAgICAgICAgICAgICAgICAgID0gMHg4ODFCOwogIGNvbnN0IFJHQjMyRiAgICAgICAgICAgICAgICAgICAgICAgPSAweDg4MTU7CiAgY29uc3QgUkdCOFVJICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ3RDsKICBjb25zdCBSR0I4SSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDhGOwogIGNvbnN0IFJHQjE2VUkgICAgICAgICAgICAgICAgICAgICAgPSAweDhENzc7CiAgY29uc3QgUkdCMTZJICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ4OTsKICBjb25zdCBSR0IzMlVJICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDcxOwogIGNvbnN0IFJHQjMySSAgICAgICAgICAgICAgICAgICAgICAgPSAweDhEODM7CiAgY29uc3QgUkdCQTggICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODA1ODsKICBjb25zdCBTUkdCOF9BTFBIQTggICAgICAgICAgICAgICAgID0gMHg4QzQzOwogIGNvbnN0IFJHQkE4X1NOT1JNICAgICAgICAgICAgICAgICAgPSAweDhGOTc7CiAgY29uc3QgUkdCNV9BMSQxICAgICAgICAgICAgICAgICAgICAgID0gMHg4MDU3OwogIGNvbnN0IFJHQkE0JDEgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODA1NjsKICBjb25zdCBSR0IxMF9BMiAgICAgICAgICAgICAgICAgICAgID0gMHg4MDU5OwogIGNvbnN0IFJHQkExNkYgICAgICAgICAgICAgICAgICAgICAgPSAweDg4MUE7CiAgY29uc3QgUkdCQTMyRiAgICAgICAgICAgICAgICAgICAgICA9IDB4ODgxNDsKICBjb25zdCBSR0JBOFVJICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDdDOwogIGNvbnN0IFJHQkE4SSAgICAgICAgICAgICAgICAgICAgICAgPSAweDhEOEU7CiAgY29uc3QgUkdCMTBfQTJVSSAgICAgICAgICAgICAgICAgICA9IDB4OTA2RjsKICBjb25zdCBSR0JBMTZVSSAgICAgICAgICAgICAgICAgICAgID0gMHg4RDc2OwogIGNvbnN0IFJHQkExNkkgICAgICAgICAgICAgICAgICAgICAgPSAweDhEODg7CiAgY29uc3QgUkdCQTMySSAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ4MjsKICBjb25zdCBSR0JBMzJVSSAgICAgICAgICAgICAgICAgICAgID0gMHg4RDcwOwoKICBjb25zdCBERVBUSF9DT01QT05FTlQxNiQxICAgICAgICAgICAgPSAweDgxQTU7CiAgY29uc3QgREVQVEhfQ09NUE9ORU5UMjQkMSAgICAgICAgICAgID0gMHg4MUE2OwogIGNvbnN0IERFUFRIX0NPTVBPTkVOVDMyRiQxICAgICAgICAgICA9IDB4OENBQzsKICBjb25zdCBERVBUSDMyRl9TVEVOQ0lMOCQxICAgICAgICAgICAgPSAweDhDQUQ7CiAgY29uc3QgREVQVEgyNF9TVEVOQ0lMOCQxICAgICAgICAgICAgID0gMHg4OEYwOwoKICAvKiBEYXRhVHlwZSAqLwogIGNvbnN0IEJZVEUgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDA7CiAgY29uc3QgVU5TSUdORURfQllURSQxICAgICAgICAgICAgICAgID0gMHgxNDAxOwogIGNvbnN0IFNIT1JUICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDI7CiAgY29uc3QgVU5TSUdORURfU0hPUlQkMSAgICAgICAgICAgICAgID0gMHgxNDAzOwogIGNvbnN0IElOVCQxICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwNDsKICBjb25zdCBVTlNJR05FRF9JTlQkMSAgICAgICAgICAgICAgICAgPSAweDE0MDU7CiAgY29uc3QgRkxPQVQkMSAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA2OwogIGNvbnN0IFVOU0lHTkVEX1NIT1JUXzRfNF80XzQgICAgICAgPSAweDgwMzM7CiAgY29uc3QgVU5TSUdORURfU0hPUlRfNV81XzVfMSAgICAgICA9IDB4ODAzNDsKICBjb25zdCBVTlNJR05FRF9TSE9SVF81XzZfNSAgICAgICAgID0gMHg4MzYzOwogIGNvbnN0IEhBTEZfRkxPQVQgICAgICAgICAgICAgICAgICAgPSAweDE0MEI7CiAgY29uc3QgSEFMRl9GTE9BVF9PRVMgICAgICAgICAgICAgICA9IDB4OEQ2MTsgIC8vIFRoYW5rcyBLaHJvbm9zIGZvciBtYWtpbmcgdGhpcyBkaWZmZXJlbnQgPjooCiAgY29uc3QgVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWICA9IDB4ODM2ODsKICBjb25zdCBVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWID0gMHg4QzNCOwogIGNvbnN0IFVOU0lHTkVEX0lOVF81XzlfOV85X1JFViAgICAgPSAweDhDM0U7CiAgY29uc3QgRkxPQVRfMzJfVU5TSUdORURfSU5UXzI0XzhfUkVWID0gMHg4REFEOwogIGNvbnN0IFVOU0lHTkVEX0lOVF8yNF84ICAgICAgICAgICAgPSAweDg0RkE7CgogIGNvbnN0IFJHICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMjc7CiAgY29uc3QgUkdfSU5URUdFUiAgICAgICAgICAgICAgICAgICA9IDB4ODIyODsKICBjb25zdCBSRUQgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxOTAzOwogIGNvbnN0IFJFRF9JTlRFR0VSICAgICAgICAgICAgICAgICAgPSAweDhEOTQ7CiAgY29uc3QgUkdCX0lOVEVHRVIgICAgICAgICAgICAgICAgICA9IDB4OEQ5ODsKICBjb25zdCBSR0JBX0lOVEVHRVIgICAgICAgICAgICAgICAgID0gMHg4RDk5OwoKICBjb25zdCBmb3JtYXRJbmZvID0ge307CiAgewogICAgLy8gTk9URTogdGhpcyBpcyBuYW1lZCBgbnVtQ29sb3JDb21wb25lbnRzYCB2cyBgbnVtQ29tcG9uZW50c2Agc28gd2UgY2FuIGxldCBVZ2xpZnkgbWFuZ2xlCiAgICAvLyB0aGUgbmFtZS4KICAgIGNvbnN0IGYgPSBmb3JtYXRJbmZvOwogICAgZltBTFBIQV0gICAgICAgICAgID0geyBudW1Db2xvckNvbXBvbmVudHM6IDEsIH07CiAgICBmW0xVTUlOQU5DRV0gICAgICAgPSB7IG51bUNvbG9yQ29tcG9uZW50czogMSwgfTsKICAgIGZbTFVNSU5BTkNFX0FMUEhBXSA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiAyLCB9OwogICAgZltSR0JdICAgICAgICAgICAgID0geyBudW1Db2xvckNvbXBvbmVudHM6IDMsIH07CiAgICBmW1JHQkEkMV0gICAgICAgICAgICA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiA0LCB9OwogICAgZltSRURdICAgICAgICAgICAgID0geyBudW1Db2xvckNvbXBvbmVudHM6IDEsIH07CiAgICBmW1JFRF9JTlRFR0VSXSAgICAgPSB7IG51bUNvbG9yQ29tcG9uZW50czogMSwgfTsKICAgIGZbUkddICAgICAgICAgICAgICA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiAyLCB9OwogICAgZltSR19JTlRFR0VSXSAgICAgID0geyBudW1Db2xvckNvbXBvbmVudHM6IDIsIH07CiAgICBmW1JHQl0gICAgICAgICAgICAgPSB7IG51bUNvbG9yQ29tcG9uZW50czogMywgfTsKICAgIGZbUkdCX0lOVEVHRVJdICAgICA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiAzLCB9OwogICAgZltSR0JBJDFdICAgICAgICAgICAgPSB7IG51bUNvbG9yQ29tcG9uZW50czogNCwgfTsKICAgIGZbUkdCQV9JTlRFR0VSXSAgICA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiA0LCB9OwogICAgZltERVBUSF9DT01QT05FTlQkMV0gPSB7IG51bUNvbG9yQ29tcG9uZW50czogMSwgfTsKICAgIGZbREVQVEhfU1RFTkNJTCQxXSAgID0geyBudW1Db2xvckNvbXBvbmVudHM6IDIsIH07CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0dXJlRm9ybWF0RGV0YWlscwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0ZXh0dXJlRm9ybWF0IGZvcm1hdCB0byBwYXNzIHRleEltYWdlMkQgYW5kIHNpbWlsYXIgZnVuY3Rpb25zLgogICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gY29sb3JSZW5kZXJhYmxlIHRydWUgaWYgeW91IGNhbiByZW5kZXIgdG8gdGhpcyBmb3JtYXQgb2YgdGV4dHVyZS4KICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IHRleHR1cmVGaWx0ZXJhYmxlIHRydWUgaWYgeW91IGNhbiBmaWx0ZXIgdGhlIHRleHR1cmUsIGZhbHNlIGlmIHlvdSBjYW4gb255IHVzZSBgTkVBUkVTVGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJbXX0gdHlwZSBBcnJheSBvZiBwb3NzaWJsZSB0eXBlcyB5b3UgY2FuIHBhc3MgdG8gdGV4SW1hZ2UyRCBhbmQgc2ltaWxhciBmdW5jdGlvbgogICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxudW1iZXIsbnVtYmVyPn0gYnl0ZXNQZXJFbGVtZW50TWFwIEEgbWFwIG9mIHR5cGVzIHRvIGJ5dGVzIHBlciBlbGVtZW50CiAgICogQHByaXZhdGUKICAgKi8KCiAgbGV0IHNfdGV4dHVyZUludGVybmFsRm9ybWF0SW5mbzsKICBmdW5jdGlvbiBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KSB7CiAgICBpZiAoIXNfdGV4dHVyZUludGVybmFsRm9ybWF0SW5mbykgewogICAgICAvLyBOT1RFOiB0aGVzZSBwcm9wZXJ0aWVzIG5lZWQgdW5pcXVlIG5hbWVzIHNvIHdlIGNhbiBsZXQgVWdsaWZ5IG1hbmdsZSB0aGUgbmFtZS4KICAgICAgY29uc3QgdCA9IHt9OwogICAgICAvLyB1bnNpemVkIGZvcm1hdHMKICAgICAgdFtBTFBIQV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBBTFBIQSwgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMSwgMiwgMiwgNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxLCBIQUxGX0ZMT0FULCBIQUxGX0ZMT0FUX09FUywgRkxPQVQkMV0sIH07CiAgICAgIHRbTFVNSU5BTkNFXSAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogTFVNSU5BTkNFLCAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzEsIDIsIDIsIDRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMSwgSEFMRl9GTE9BVCwgSEFMRl9GTE9BVF9PRVMsIEZMT0FUJDFdLCB9OwogICAgICB0W0xVTUlOQU5DRV9BTFBIQV0gICAgPSB7IHRleHR1cmVGb3JtYXQ6IExVTUlOQU5DRV9BTFBIQSwgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFsyLCA0LCA0LCA4XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDEsIEhBTEZfRkxPQVQsIEhBTEZfRkxPQVRfT0VTLCBGTE9BVCQxXSwgfTsKICAgICAgdFtSR0JdICAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0IsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMywgNiwgNiwgMTIsIDJdLCAgICB0eXBlOiBbVU5TSUdORURfQllURSQxLCBIQUxGX0ZMT0FULCBIQUxGX0ZMT0FUX09FUywgRkxPQVQkMSwgVU5TSUdORURfU0hPUlRfNV82XzVdLCB9OwogICAgICB0W1JHQkEkMV0gICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQSQxLCAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbNCwgOCwgOCwgMTYsIDIsIDJdLCB0eXBlOiBbVU5TSUdORURfQllURSQxLCBIQUxGX0ZMT0FULCBIQUxGX0ZMT0FUX09FUywgRkxPQVQkMSwgVU5TSUdORURfU0hPUlRfNF80XzRfNCwgVU5TSUdORURfU0hPUlRfNV81XzVfMV0sIH07CiAgICAgIHRbREVQVEhfQ09NUE9ORU5UJDFdICAgID0geyB0ZXh0dXJlRm9ybWF0OiBERVBUSF9DT01QT05FTlQkMSwgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsyLCA0XSwgICAgICAgICAgICAgIHR5cGU6IFtVTlNJR05FRF9JTlQkMSwgVU5TSUdORURfU0hPUlQkMV0sIH07CgogICAgICAvLyBzaXplZCBmb3JtYXRzCiAgICAgIHRbUjhdICAgICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVELCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzFdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMV0sIH07CiAgICAgIHRbUjhfU05PUk1dICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVELCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzFdLCAgICAgICAgdHlwZTogW0JZVEVdLCB9OwogICAgICB0W1IxNkZdICAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJFRCwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFs0LCAyXSwgICAgIHR5cGU6IFtGTE9BVCQxLCBIQUxGX0ZMT0FUXSwgfTsKICAgICAgdFtSMzJGXSAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRUQsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbRkxPQVQkMV0sIH07CiAgICAgIHRbUjhVSV0gICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVEX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzFdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMV0sIH07CiAgICAgIHRbUjhJXSAgICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVEX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzFdLCAgICAgICAgdHlwZTogW0JZVEVdLCB9OwogICAgICB0W1IxNlVJXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJFRF9JTlRFR0VSLCAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsyXSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9TSE9SVCQxXSwgfTsKICAgICAgdFtSMTZJXSAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRURfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbU0hPUlRdLCB9OwogICAgICB0W1IzMlVJXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJFRF9JTlRFR0VSLCAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9JTlQkMV0sIH07CiAgICAgIHRbUjMySV0gICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVEX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW0lOVCQxXSwgfTsKICAgICAgdFtSRzhdICAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRywgICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSRzhfU05PUk1dICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRywgICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbQllURV0sIH07CiAgICAgIHRbUkcxNkZdICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkcsICAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzgsIDRdLCAgICAgdHlwZTogW0ZMT0FUJDEsIEhBTEZfRkxPQVRdLCB9OwogICAgICB0W1JHMzJGXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHLCAgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs4XSwgICAgICAgIHR5cGU6IFtGTE9BVCQxXSwgfTsKICAgICAgdFtSRzhVSV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR19JTlRFR0VSLCAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSRzhJXSAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR19JTlRFR0VSLCAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbQllURV0sIH07CiAgICAgIHRbUkcxNlVJXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdfSU5URUdFUiwgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX1NIT1JUJDFdLCB9OwogICAgICB0W1JHMTZJXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHX0lOVEVHRVIsICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtTSE9SVF0sIH07CiAgICAgIHRbUkczMlVJXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdfSU5URUdFUiwgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzhdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0lOVCQxXSwgfTsKICAgICAgdFtSRzMySV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR19JTlRFR0VSLCAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbOF0sICAgICAgICB0eXBlOiBbSU5UJDFdLCB9OwogICAgICB0W1JHQjhdICAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFszXSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDFdLCB9OwogICAgICB0W1NSR0I4XSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFszXSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDFdLCB9OwogICAgICB0W1JHQjU2NSQxXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCLCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzMsIDJdLCAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMSwgVU5TSUdORURfU0hPUlRfNV82XzVdLCB9OwogICAgICB0W1JHQjhfU05PUk1dICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFszXSwgICAgICAgIHR5cGU6IFtCWVRFXSwgfTsKICAgICAgdFtSMTFGX0cxMUZfQjEwRl0gICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0IsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMTIsIDYsIDRdLCB0eXBlOiBbRkxPQVQkMSwgSEFMRl9GTE9BVCwgVU5TSUdORURfSU5UXzEwRl8xMUZfMTFGX1JFVl0sIH07CiAgICAgIHRbUkdCOV9FNV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCLCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzEyLCA2LCA0XSwgdHlwZTogW0ZMT0FUJDEsIEhBTEZfRkxPQVQsIFVOU0lHTkVEX0lOVF81XzlfOV85X1JFVl0sIH07CiAgICAgIHRbUkdCMTZGXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCLCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzEyLCA2XSwgICAgdHlwZTogW0ZMT0FUJDEsIEhBTEZfRkxPQVRdLCB9OwogICAgICB0W1JHQjMyRl0gICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsxMl0sICAgICAgIHR5cGU6IFtGTE9BVCQxXSwgfTsKICAgICAgdFtSR0I4VUldICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbM10sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSR0I4SV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbM10sICAgICAgICB0eXBlOiBbQllURV0sIH07CiAgICAgIHRbUkdCMTZVSV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzZdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX1NIT1JUJDFdLCB9OwogICAgICB0W1JHQjE2SV0gICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQl9JTlRFR0VSLCAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs2XSwgICAgICAgIHR5cGU6IFtTSE9SVF0sIH07CiAgICAgIHRbUkdCMzJVSV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzEyXSwgICAgICAgdHlwZTogW1VOU0lHTkVEX0lOVCQxXSwgfTsKICAgICAgdFtSR0IzMkldICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMTJdLCAgICAgICB0eXBlOiBbSU5UJDFdLCB9OwogICAgICB0W1JHQkE4XSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEkMSwgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMV0sIH07CiAgICAgIHRbU1JHQjhfQUxQSEE4XSAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQSQxLCAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSR0JBOF9TTk9STV0gICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBJDEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtCWVRFXSwgfTsKICAgICAgdFtSR0I1X0ExJDFdICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEkMSwgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzQsIDIsIDRdLCAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMSwgVU5TSUdORURfU0hPUlRfNV81XzVfMSwgVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWXSwgfTsKICAgICAgdFtSR0JBNCQxXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEkMSwgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzQsIDJdLCAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMSwgVU5TSUdORURfU0hPUlRfNF80XzRfNF0sIH07CiAgICAgIHRbUkdCMTBfQTJdICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQSQxLCAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWXSwgfTsKICAgICAgdFtSR0JBMTZGXSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBJDEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFsxNiwgOF0sICAgIHR5cGU6IFtGTE9BVCQxLCBIQUxGX0ZMT0FUXSwgfTsKICAgICAgdFtSR0JBMzJGXSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBJDEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsxNl0sICAgICAgIHR5cGU6IFtGTE9BVCQxXSwgfTsKICAgICAgdFtSR0JBOFVJXSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBX0lOVEVHRVIsICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQxXSwgfTsKICAgICAgdFtSR0JBOEldICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBX0lOVEVHRVIsICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbQllURV0sIH07CiAgICAgIHRbUkdCMTBfQTJVSV0gICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0lOVF8yXzEwXzEwXzEwX1JFVl0sIH07CiAgICAgIHRbUkdCQTE2VUldICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzhdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX1NIT1JUJDFdLCB9OwogICAgICB0W1JHQkExNkldICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkFfSU5URUdFUiwgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs4XSwgICAgICAgIHR5cGU6IFtTSE9SVF0sIH07CiAgICAgIHRbUkdCQTMySV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzE2XSwgICAgICAgdHlwZTogW0lOVCQxXSwgfTsKICAgICAgdFtSR0JBMzJVSV0gICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBX0lOVEVHRVIsICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMTZdLCAgICAgICB0eXBlOiBbVU5TSUdORURfSU5UJDFdLCB9OwogICAgICAvLyBTaXplZCBJbnRlcm5hbAogICAgICB0W0RFUFRIX0NPTVBPTkVOVDE2JDFdICA9IHsgdGV4dHVyZUZvcm1hdDogREVQVEhfQ09NUE9ORU5UJDEsIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMiwgNF0sICAgICB0eXBlOiBbVU5TSUdORURfU0hPUlQkMSwgVU5TSUdORURfSU5UJDFdLCB9OwogICAgICB0W0RFUFRIX0NPTVBPTkVOVDI0JDFdICA9IHsgdGV4dHVyZUZvcm1hdDogREVQVEhfQ09NUE9ORU5UJDEsIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfSU5UJDFdLCB9OwogICAgICB0W0RFUFRIX0NPTVBPTkVOVDMyRiQxXSA9IHsgdGV4dHVyZUZvcm1hdDogREVQVEhfQ09NUE9ORU5UJDEsIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbRkxPQVQkMV0sIH07CiAgICAgIHRbREVQVEgyNF9TVEVOQ0lMOCQxXSAgID0geyB0ZXh0dXJlRm9ybWF0OiBERVBUSF9TVEVOQ0lMJDEsICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9JTlRfMjRfOF0sIH07CiAgICAgIHRbREVQVEgzMkZfU1RFTkNJTDgkMV0gID0geyB0ZXh0dXJlRm9ybWF0OiBERVBUSF9TVEVOQ0lMJDEsICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtGTE9BVF8zMl9VTlNJR05FRF9JTlRfMjRfOF9SRVZdLCB9OwoKICAgICAgT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihpbnRlcm5hbEZvcm1hdCkgewogICAgICAgIGNvbnN0IGluZm8gPSB0W2ludGVybmFsRm9ybWF0XTsKICAgICAgICBpbmZvLmJ5dGVzUGVyRWxlbWVudE1hcCA9IHt9OwogICAgICAgIGluZm8uYnl0ZXNQZXJFbGVtZW50LmZvckVhY2goZnVuY3Rpb24oYnl0ZXNQZXJFbGVtZW50LCBuZHgpIHsKICAgICAgICAgIGNvbnN0IHR5cGUgPSBpbmZvLnR5cGVbbmR4XTsKICAgICAgICAgIGluZm8uYnl0ZXNQZXJFbGVtZW50TWFwW3R5cGVdID0gYnl0ZXNQZXJFbGVtZW50OwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgc190ZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvID0gdDsKICAgIH0KICAgIHJldHVybiBzX3RleHR1cmVJbnRlcm5hbEZvcm1hdEluZm9baW50ZXJuYWxGb3JtYXRdOwogIH0KCiAgLyoqCiAgICogR2V0cyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHBlciBlbGVtZW50IGZvciBhIGdpdmVuIGludGVybmFsRm9ybWF0IC8gdHlwZQogICAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcm5hbEZvcm1hdCBUaGUgaW50ZXJuYWxGb3JtYXQgcGFyYW1ldGVyIGZyb20gdGV4SW1hZ2UyRCBldGMuLgogICAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlIFRoZSB0eXBlIHBhcmFtZXRlciBmb3IgdGV4SW1hZ2UyRCBldGMuLgogICAqIEByZXR1cm4ge251bWJlcn0gdGhlIG51bWJlciBvZiBieXRlcyBwZXIgZWxlbWVudCBmb3IgdGhlIGdpdmVuIGludGVybmFsRm9ybWF0LCB0eXBlIGNvbWJvCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzCiAgICovCiAgZnVuY3Rpb24gZ2V0Qnl0ZXNQZXJFbGVtZW50Rm9ySW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXQsIHR5cGUpIHsKICAgIGNvbnN0IGluZm8gPSBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KTsKICAgIGlmICghaW5mbykgewogICAgICB0aHJvdyAidW5rbm93biBpbnRlcm5hbCBmb3JtYXQiOwogICAgfQogICAgY29uc3QgYnl0ZXNQZXJFbGVtZW50ID0gaW5mby5ieXRlc1BlckVsZW1lbnRNYXBbdHlwZV07CiAgICBpZiAoYnl0ZXNQZXJFbGVtZW50ID09PSB1bmRlZmluZWQpIHsKICAgICAgdGhyb3cgInVua25vd24gaW50ZXJuYWwgZm9ybWF0IjsKICAgIH0KICAgIHJldHVybiBieXRlc1BlckVsZW1lbnQ7CiAgfQoKICAvKioKICAgKiBJbmZvIHJlbGF0ZWQgdG8gYSBzcGVjaWZpYyB0ZXh0dXJlIGludGVybmFsRm9ybWF0IGFzIHJldHVybmVkCiAgICogZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wvdGV4dHVyZXMuZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0fS4KICAgKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHR1cmVGb3JtYXRJbmZvCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGZvcm1hdCBGb3JtYXQgdG8gcGFzcyB0byB0ZXhJbWFnZTJEIGFuZCByZWxhdGVkIGZ1bmN0aW9ucwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0eXBlIFR5cGUgdG8gcGFzcyB0byB0ZXhJbWFnZTJEIGFuZCByZWxhdGVkIGZ1bmN0aW9ucwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwoKICAvKioKICAgKiBHZXRzIHRoZSBmb3JtYXQgYW5kIHR5cGUgZm9yIGEgZ2l2ZW4gaW50ZXJuYWxGb3JtYXQKICAgKgogICAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcm5hbEZvcm1hdCBUaGUgaW50ZXJuYWwgZm9ybWF0CiAgICogQHJldHVybiB7bW9kdWxlOnR3Z2wvdGV4dHVyZXMuVGV4dHVyZUZvcm1hdEluZm99IHRoZSBjb3JyZXNwb25kaW5nIGZvcm1hdCBhbmQgdHlwZSwKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXMKICAgKi8KICBmdW5jdGlvbiBnZXRGb3JtYXRBbmRUeXBlRm9ySW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXQpIHsKICAgIGNvbnN0IGluZm8gPSBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KTsKICAgIGlmICghaW5mbykgewogICAgICB0aHJvdyAidW5rbm93biBpbnRlcm5hbCBmb3JtYXQiOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgZm9ybWF0OiBpbmZvLnRleHR1cmVGb3JtYXQsCiAgICAgIHR5cGU6IGluZm8udHlwZVswXSwKICAgIH07CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgdmFsdWUgaXMgcG93ZXIgb2YgMgogICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBudW1iZXIgdG8gY2hlY2suCiAgICogQHJldHVybiB0cnVlIGlmIHZhbHVlIGlzIHBvd2VyIG9mIDIKICAgKiBAcHJpdmF0ZQogICAqLwogIGZ1bmN0aW9uIGlzUG93ZXJPZjIodmFsdWUpIHsKICAgIHJldHVybiAodmFsdWUgJiAodmFsdWUgLSAxKSkgPT09IDA7CiAgfQoKICAvKioKICAgKiBHZXRzIHdoZXRoZXIgb3Igbm90IHdlIGNhbiBnZW5lcmF0ZSBtaXBzIGZvciB0aGUgZ2l2ZW4KICAgKiBpbnRlcm5hbCBmb3JtYXQuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBUaGUgd2lkdGggcGFyYW1ldGVyIGZyb20gdGV4SW1hZ2UyRCBldGMuLgogICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgVGhlIGhlaWdodCBwYXJhbWV0ZXIgZnJvbSB0ZXhJbWFnZTJEIGV0Yy4uCiAgICogQHBhcmFtIHtudW1iZXJ9IGludGVybmFsRm9ybWF0IFRoZSBpbnRlcm5hbEZvcm1hdCBwYXJhbWV0ZXIgZnJvbSB0ZXhJbWFnZTJEIGV0Yy4uCiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB3ZSBjYW4gZ2VuZXJhdGUgbWlwcwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIGNhbkdlbmVyYXRlTWlwbWFwKGdsLCB3aWR0aCwgaGVpZ2h0LCBpbnRlcm5hbEZvcm1hdCkgewogICAgaWYgKCFpc1dlYkdMMihnbCkpIHsKICAgICAgcmV0dXJuIGlzUG93ZXJPZjIod2lkdGgpICYmIGlzUG93ZXJPZjIoaGVpZ2h0KTsKICAgIH0KICAgIGNvbnN0IGluZm8gPSBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KTsKICAgIGlmICghaW5mbykgewogICAgICB0aHJvdyAidW5rbm93biBpbnRlcm5hbCBmb3JtYXQiOwogICAgfQogICAgcmV0dXJuIGluZm8uY29sb3JSZW5kZXJhYmxlICYmIGluZm8udGV4dHVyZUZpbHRlcmFibGU7CiAgfQoKICAvKioKICAgKiBHZXRzIHdoZXRoZXIgb3Igbm90IHdlIGNhbiBnZW5lcmF0ZSBtaXBzIGZvciB0aGUgZ2l2ZW4gZm9ybWF0CiAgICogQHBhcmFtIHtudW1iZXJ9IGludGVybmFsRm9ybWF0IFRoZSBpbnRlcm5hbEZvcm1hdCBwYXJhbWV0ZXIgZnJvbSB0ZXhJbWFnZTJEIGV0Yy4uCiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB3ZSBjYW4gZ2VuZXJhdGUgbWlwcwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIGNhbkZpbHRlcihpbnRlcm5hbEZvcm1hdCkgewogICAgY29uc3QgaW5mbyA9IGdldFRleHR1cmVJbnRlcm5hbEZvcm1hdEluZm8oaW50ZXJuYWxGb3JtYXQpOwogICAgaWYgKCFpbmZvKSB7CiAgICAgIHRocm93ICJ1bmtub3duIGludGVybmFsIGZvcm1hdCI7CiAgICB9CiAgICByZXR1cm4gaW5mby50ZXh0dXJlRmlsdGVyYWJsZTsKICB9CgogIC8qKgogICAqIEdldHMgdGhlIHRleHR1cmUgdHlwZSBmb3IgYSBnaXZlbiBhcnJheSB0eXBlLgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHJldHVybiB7bnVtYmVyfSB0aGUgZ2wgdGV4dHVyZSB0eXBlCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBnZXRUZXh0dXJlVHlwZUZvckFycmF5VHlwZShnbCwgc3JjLCBkZWZhdWx0VHlwZSkgewogICAgaWYgKGlzQXJyYXlCdWZmZXIoc3JjKSkgewogICAgICByZXR1cm4gZ2V0R0xUeXBlRm9yVHlwZWRBcnJheShzcmMpOwogICAgfQogICAgcmV0dXJuIGRlZmF1bHRUeXBlIHx8IFVOU0lHTkVEX0JZVEUkMTsKICB9CgogIGZ1bmN0aW9uIGd1ZXNzRGltZW5zaW9ucyhnbCwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0LCBudW1FbGVtZW50cykgewogICAgaWYgKG51bUVsZW1lbnRzICUgMSAhPT0gMCkgewogICAgICB0aHJvdyAiY2FuJ3QgZ3Vlc3MgZGltZW5zaW9ucyI7CiAgICB9CiAgICBpZiAoIXdpZHRoICYmICFoZWlnaHQpIHsKICAgICAgY29uc3Qgc2l6ZSA9IE1hdGguc3FydChudW1FbGVtZW50cyAvICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSA/IDYgOiAxKSk7CiAgICAgIGlmIChzaXplICUgMSA9PT0gMCkgewogICAgICAgIHdpZHRoID0gc2l6ZTsKICAgICAgICBoZWlnaHQgPSBzaXplOwogICAgICB9IGVsc2UgewogICAgICAgIHdpZHRoID0gbnVtRWxlbWVudHM7CiAgICAgICAgaGVpZ2h0ID0gMTsKICAgICAgfQogICAgfSBlbHNlIGlmICghaGVpZ2h0KSB7CiAgICAgIGhlaWdodCA9IG51bUVsZW1lbnRzIC8gd2lkdGg7CiAgICAgIGlmIChoZWlnaHQgJSAxKSB7CiAgICAgICAgdGhyb3cgImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMiOwogICAgICB9CiAgICB9IGVsc2UgaWYgKCF3aWR0aCkgewogICAgICB3aWR0aCA9IG51bUVsZW1lbnRzIC8gaGVpZ2h0OwogICAgICBpZiAod2lkdGggJSAxKSB7CiAgICAgICAgdGhyb3cgImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMiOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gewogICAgICB3aWR0aDogd2lkdGgsCiAgICAgIGhlaWdodDogaGVpZ2h0LAogICAgfTsKICB9CgogIC8qKgogICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIHNvdXJjZSBmb3IgYSB0ZXh0dXJlLgogICAqIEBjYWxsYmFjayBUZXh0dXJlRnVuYwogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgdGhlIHRleHR1cmUgb3B0aW9ucwogICAqIEByZXR1cm4geyp9IFJldHVybnMgYW55IG9mIHRoZSB0aGluZ3MgZG9jdW1lbnRlZCBmb3IgYHNyY2AgZm9yIHtAbGluayBtb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30uCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIFRleHR1cmUgb3B0aW9ucyBwYXNzZWQgdG8gbW9zdCB0ZXh0dXJlIGZ1bmN0aW9ucy4gRWFjaCBmdW5jdGlvbiB3aWxsIHVzZSB3aGF0ZXZlciBvcHRpb25zCiAgICogYXJlIGFwcHJvcHJpYXRlIGZvciBpdHMgbmVlZHMuIFRoaXMgbGV0cyB5b3UgcGFzcyB0aGUgc2FtZSBvcHRpb25zIHRvIGFsbCBmdW5jdGlvbnMuCiAgICoKICAgKiBOb3RlOiBBIGBUZXhJbWFnZVNvdXJjZWAgaXMgZGVmaW5lZCBpbiB0aGUgV2ViR0wgc3BlYyBhcyBhIGBIVE1MSW1hZ2VFbGVtZW50YCwgYEhUTUxWaWRlb0VsZW1lbnRgLAogICAqIGBIVE1MQ2FudmFzRWxlbWVudGAsIGBJbWFnZUJpdG1hcGAsIG9yIGBJbWFnZURhdGFgLgogICAqCiAgICogQHR5cGVkZWYge09iamVjdH0gVGV4dHVyZU9wdGlvbnMKICAgKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldF0gdGhlIHR5cGUgb2YgdGV4dHVyZSBgZ2wuVEVYVFVSRV8yRGAgb3IgYGdsLlRFWFRVUkVfQ1VCRV9NQVBgLiBEZWZhdWx0cyB0byBgZ2wuVEVYVFVSRV8yRGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtsZXZlbF0gdGhlIG1pcCBsZXZlbCB0byBhZmZlY3QuIERlZmF1bHRzIHRvIDAuIE5vdGUsIGlmIHNldCBhdXRvIHdpbGwgYmUgY29uc2lkZXJlZCBmYWxzZSB1bmxlc3MgZXhwbGljaXRseSBzZXQgdG8gdHJ1ZS4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW3dpZHRoXSB0aGUgd2lkdGggb2YgdGhlIHRleHR1cmUuIE9ubHkgdXNlZCBpZiBzcmMgaXMgYW4gYXJyYXkgb3IgdHlwZWQgYXJyYXkgb3IgbnVsbC4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2hlaWdodF0gdGhlIGhlaWdodCBvZiBhIHRleHR1cmUuIE9ubHkgdXNlZCBpZiBzcmMgaXMgYW4gYXJyYXkgb3IgdHlwZWQgYXJyYXkgb3IgbnVsbC4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2RlcHRoXSB0aGUgZGVwdGggb2YgYSB0ZXh0dXJlLiBPbmx5IHVzZWQgaWYgc3JjIGlzIGFuIGFycmF5IG9yIHR5cGUgYXJyYXkgb3IgbnVsbCBhbmQgdGFyZ2V0IGlzIGBURVhUVVJFXzNEYCAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5dIHRoZSBtaW4gZmlsdGVyIHNldHRpbmcgKGVnLiBgZ2wuTElORUFSYCkuIERlZmF1bHRzIHRvIGBnbC5ORUFSRVNUX01JUE1BUF9MSU5FQVJgCiAgICogICAgIG9yIGlmIHRleHR1cmUgaXMgbm90IGEgcG93ZXIgb2YgMiBvbiBib3RoIGRpbWVuc2lvbnMgdGhlbiBkZWZhdWx0cyB0byBgZ2wuTElORUFSYC4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW21hZ10gdGhlIG1hZyBmaWx0ZXIgc2V0dGluZyAoZWcuIGBnbC5MSU5FQVJgKS4gRGVmYXVsdHMgdG8gYGdsLkxJTkVBUmAKICAgKiBAcHJvcGVydHkge251bWJlcn0gW21pbk1hZ10gYm90aCB0aGUgbWluIGFuZCBtYWcgZmlsdGVyIHNldHRpbmdzLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaW50ZXJuYWxGb3JtYXRdIGludGVybmFsIGZvcm1hdCBmb3IgdGV4dHVyZS4gRGVmYXVsdHMgdG8gYGdsLlJHQkFgCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtmb3JtYXRdIGZvcm1hdCBmb3IgdGV4dHVyZS4gRGVmYXVsdHMgdG8gYGdsLlJHQkFgLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHlwZV0gdHlwZSBmb3IgdGV4dHVyZS4gRGVmYXVsdHMgdG8gYGdsLlVOU0lHTkVEX0JZVEVgIHVubGVzcyBgc3JjYCBpcyBBcnJheUJ1ZmZlclZpZXcuIElmIGBzcmNgCiAgICogICAgIGlzIEFycmF5QnVmZmVyVmlldyBkZWZhdWx0cyB0byB0eXBlIHRoYXQgbWF0Y2hlcyBBcnJheUJ1ZmZlclZpZXcgdHlwZS4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW3dyYXBdIFRleHR1cmUgd3JhcHBpbmcgZm9yIGJvdGggUyBhbmQgVCAoYW5kIFIgaWYgVEVYVFVSRV8zRCBvciBXZWJHTFNhbXBsZXIpLiBEZWZhdWx0cyB0byBgZ2wuUkVQRUFUYCBmb3IgMkQgdW5sZXNzIHNyYyBpcyBXZWJHTDEgYW5kIHNyYyBub3QgbnBvdCBhbmQgYGdsLkNMQU1QX1RPX0VER0VgIGZvciBjdWJlCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt3cmFwU10gVGV4dHVyZSB3cmFwcGluZyBmb3IgUy4gRGVmYXVsdHMgdG8gYGdsLlJFUEVBVGAgYW5kIGBnbC5DTEFNUF9UT19FREdFYCBmb3IgY3ViZS4gSWYgc2V0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgd3JhcGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt3cmFwVF0gVGV4dHVyZSB3cmFwcGluZyBmb3IgVC4gRGVmYXVsdHMgdG8gYGdsLlJFUEVBVGAgYW5kIGBnbC5DTEFNUF9UT19FREdFYCBmb3IgY3ViZS4gSWYgc2V0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgd3JhcGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt3cmFwUl0gVGV4dHVyZSB3cmFwcGluZyBmb3IgUi4gRGVmYXVsdHMgdG8gYGdsLlJFUEVBVGAgYW5kIGBnbC5DTEFNUF9UT19FREdFYCBmb3IgY3ViZS4gSWYgc2V0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgd3JhcGAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5Mb2RdIFRFWFRVUkVfTUlOX0xPRCBzZXR0aW5nCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhMb2RdIFRFWFRVUkVfTUFYX0xPRCBzZXR0aW5nCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtiYXNlTGV2ZWxdIFRFWFRVUkVfQkFTRV9MRVZFTCBzZXR0aW5nCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhMZXZlbF0gVEVYVFVSRV9NQVhfTEVWRUwgc2V0dGluZwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY29tcGFyZUZ1bmNdIFRFWFRVUkVfQ09NUEFSRV9GVU5DIHNldHRpbmcKICAgKiBAcHJvcGVydHkge251bWJlcn0gW2NvbXBhcmVNb2RlXSBURVhUVVJFX0NPTVBBUkVfTU9ERSBzZXR0aW5nCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt1bnBhY2tBbGlnbm1lbnRdIFRoZSBgZ2wuVU5QQUNLX0FMSUdOTUVOVGAgdXNlZCB3aGVuIHVwbG9hZGluZyBhbiBhcnJheS4gRGVmYXVsdHMgdG8gMS4KICAgKiBAcHJvcGVydHkge251bWJlcltdfEFycmF5QnVmZmVyVmlld30gW2NvbG9yXSBDb2xvciB0byBpbml0aWFsaXplIHRoaXMgdGV4dHVyZSB3aXRoIGlmIGxvYWRpbmcgYW4gaW1hZ2UgYXN5bmNocm9ub3VzbHkuCiAgICogICAgIFRoZSBkZWZhdWx0IHVzZSBhIGJsdWUgMXgxIHBpeGVsIHRleHR1cmUuIFlvdSBjYW4gc2V0IGFub3RoZXIgZGVmYXVsdCBieSBjYWxsaW5nIGB0d2dsLnNldERlZmF1bHRzYAogICAqICAgICBvciB5b3UgY2FuIHNldCBhbiBpbmRpdmlkdWFsIHRleHR1cmUncyBpbml0aWFsIGNvbG9yIGJ5IHNldHRpbmcgdGhpcyBwcm9wZXJ0eS4gRXhhbXBsZTogYFsxLCAuNSwgLjUsIDFdYCA9IHBpbmsKICAgKiBAcHJvcGVydHkge251bWJlcn0gW3ByZW11bHRpcGx5QWxwaGFdIFdoZXRoZXIgb3Igbm90IHRvIHByZW11bHRpcGx5IGFscGhhLiBEZWZhdWx0cyB0byB3aGF0ZXZlciB0aGUgY3VycmVudCBzZXR0aW5nIGlzLgogICAqICAgICBUaGlzIGxldHMgeW91IHNldCBpdCBvbmNlIGJlZm9yZSBjYWxsaW5nIGB0d2dsLmNyZWF0ZVRleHR1cmVgIG9yIGB0d2dsLmNyZWF0ZVRleHR1cmVzYCBhbmQgb25seSBvdmVycmlkZQogICAqICAgICB0aGUgY3VycmVudCBzZXR0aW5nIGZvciBzcGVjaWZpYyB0ZXh0dXJlcy4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2ZsaXBZXSBXaGV0aGVyIG9yIG5vdCB0byBmbGlwIHRoZSB0ZXh0dXJlIHZlcnRpY2FsbHkgb24gdXBsb2FkLiBEZWZhdWx0cyB0byB3aGF0ZXZlciB0aGUgY3VycmVudCBzZXR0aW5nIGlzLgogICAqICAgICBUaGlzIGxldHMgeW91IHNldCBpdCBvbmNlIGJlZm9yZSBjYWxsaW5nIGB0d2dsLmNyZWF0ZVRleHR1cmVgIG9yIGB0d2dsLmNyZWF0ZVRleHR1cmVzYCBhbmQgb25seSBvdmVycmlkZQogICAqICAgICB0aGUgY3VycmVudCBzZXR0aW5nIGZvciBzcGVjaWZpYyB0ZXh0dXJlcy4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2NvbG9yc3BhY2VDb252ZXJzaW9uXSBXaGV0aGVyIG9yIG5vdCB0byBsZXQgdGhlIGJyb3dzZXIgZG8gY29sb3JzcGFjZSBjb252ZXJzaW9uIG9mIHRoZSB0ZXh0dXJlIG9uIHVwbG9hZC4gRGVmYXVsdHMgdG8gd2hhdGV2ZXIgdGhlIGN1cnJlbnQgc2V0dGluZyBpcy4KICAgKiAgICAgVGhpcyBsZXRzIHlvdSBzZXQgaXQgb25jZSBiZWZvcmUgY2FsbGluZyBgdHdnbC5jcmVhdGVUZXh0dXJlYCBvciBgdHdnbC5jcmVhdGVUZXh0dXJlc2AgYW5kIG9ubHkgb3ZlcnJpZGUKICAgKiAgICAgdGhlIGN1cnJlbnQgc2V0dGluZyBmb3Igc3BlY2lmaWMgdGV4dHVyZXMuCiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYXV0b10gSWYgYHVuZGVmaW5lZGAgb3IgYHRydWVgLCBpbiBXZWJHTDEsIHRleHR1cmUgZmlsdGVyaW5nIGlzIHNldCBhdXRvbWF0aWNhbGx5IGZvciBub24tcG93ZXIgb2YgMiBpbWFnZXMgYW5kCiAgICogICAgbWlwcyBhcmUgZ2VuZXJhdGVkIGZvciBwb3dlciBvZiAyIGltYWdlcy4gSW4gV2ViR0wyIG1pcHMgYXJlIGdlbmVyYXRlZCBpZiB0aGV5IGNhbiBiZS4gTm90ZTogaWYgYGxldmVsYCBpcyBzZXQgYWJvdmUKICAgKiAgICB0aGVuIHRoZW4gYGF1dG9gIGlzIGFzc3VtZWQgdG8gYmUgYGZhbHNlYCB1bmxlc3MgZXhwbGljaXR5IHNldCB0byBgdHJ1ZWAuCiAgICogQHByb3BlcnR5IHtudW1iZXJbXX0gW2N1YmVGYWNlT3JkZXJdIFRoZSBvcmRlciB0aGF0IGN1YmUgZmFjZXMgYXJlIHB1bGxlZCBvdXQgb2YgYW4gaW1nIG9yIHNldCBvZiBpbWFnZXMuIFRoZSBkZWZhdWx0IGlzCiAgICoKICAgKiAgICAgW2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWCwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWSwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWSwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWiwKICAgKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWl0KICAgKgogICAqIEBwcm9wZXJ0eSB7KG51bWJlcltdfEFycmF5QnVmZmVyVmlld3xUZXhJbWFnZVNvdXJjZXxUZXhJbWFnZVNvdXJjZVtdfHN0cmluZ3xzdHJpbmdbXXxtb2R1bGU6dHdnbC5UZXh0dXJlRnVuYyl9IFtzcmNdIHNvdXJjZSBmb3IgdGV4dHVyZQogICAqCiAgICogICAgSWYgYHN0cmluZ2AgdGhlbiBpdCdzIGFzc3VtZWQgdG8gYmUgYSBVUkwgdG8gYW4gaW1hZ2UuIFRoZSBpbWFnZSB3aWxsIGJlIGRvd25sb2FkZWQgYXN5bmMuIEEgdXNhYmxlCiAgICogICAgMXgxIHBpeGVsIHRleHR1cmUgd2lsbCBiZSByZXR1cm5lZCBpbW1lZGlhdGVseS4gVGhlIHRleHR1cmUgd2lsbCBiZSB1cGRhdGVkIG9uY2UgdGhlIGltYWdlIGhhcyBkb3dubG9hZGVkLgogICAqICAgIElmIGB0YXJnZXRgIGlzIGBnbC5URVhUVVJFX0NVQkVfTUFQYCB3aWxsIGF0dGVtcHQgdG8gZGl2aWRlIGltYWdlIGludG8gNiBzcXVhcmUgcGllY2VzLiAxeDYsIDZ4MSwgM3gyLCAyeDMuCiAgICogICAgVGhlIHBpZWNlcyB3aWxsIGJlIHVwbG9hZGVkIGluIGBjdWJlRmFjZU9yZGVyYAogICAqCiAgICogICAgSWYgYHN0cmluZ1tdYCBvciBgVGV4SW1hZ2VTb3VyY2VbXWAgYW5kIHRhcmdldCBpcyBgZ2wuVEVYVFVSRV9DVUJFX01BUGAgdGhlbiBpdCBtdXN0IGhhdmUgNiBlbnRyaWVzLCBvbmUgZm9yIGVhY2ggZmFjZSBvZiBhIGN1YmUgbWFwLgogICAqCiAgICogICAgSWYgYHN0cmluZ1tdYCBvciBgVGV4SW1hZ2VTb3VyY2VbXWAgYW5kIHRhcmdldCBpcyBgZ2wuVEVYVFVSRV8yRF9BUlJBWWAgdGhlbiBlYWNoIGVudHJ5IGlzIGEgc2xpY2Ugb2YgdGhlIGEgMmQgYXJyYXkgdGV4dHVyZQogICAqICAgIGFuZCB3aWxsIGJlIHNjYWxlZCB0byB0aGUgc3BlY2lmaWVkIHdpZHRoIGFuZCBoZWlnaHQgT1IgdG8gdGhlIHNpemUgb2YgdGhlIGZpcnN0IGltYWdlIHRoYXQgbG9hZHMuCiAgICoKICAgKiAgICBJZiBgVGV4SW1hZ2VTb3VyY2VgIHRoZW4gaXQgd2lsIGJlIHVzZWQgaW1tZWRpYXRlbHkgdG8gY3JlYXRlIHRoZSBjb250ZW50cyBvZiB0aGUgdGV4dHVyZS4gRXhhbXBsZXMgYEhUTUxJbWFnZUVsZW1lbnRgLAogICAqICAgIGBIVE1MQ2FudmFzRWxlbWVudGAsIGBIVE1MVmlkZW9FbGVtZW50YC4KICAgKgogICAqICAgIElmIGBudW1iZXJbXWAgb3IgYEFycmF5QnVmZmVyVmlld2AgaXQncyBhc3N1bWVkIHRvIGJlIGRhdGEgZm9yIGEgdGV4dHVyZS4gSWYgYHdpZHRoYCBvciBgaGVpZ2h0YCBpcwogICAqICAgIG5vdCBzcGVjaWZpZWQgaXQgaXMgZ3Vlc3NlZCBhcyBmb2xsb3dzLiBGaXJzdCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGlzIGNvbXB1dGVkIGJ5IGBzcmMubGVuZ3RoIC8gbnVtQ29tcG9uZW50c2AKICAgKiAgICB3aGVyZSBgbnVtQ29tcG9uZW50c2AgaXMgZGVyaXZlZCBmcm9tIGBmb3JtYXRgLiBJZiBgdGFyZ2V0YCBpcyBgZ2wuVEVYVFVSRV9DVUJFX01BUGAgdGhlbiBgbnVtRWxlbWVudHNgIGlzIGRpdmlkZWQKICAgKiAgICBieSA2LiBUaGVuCiAgICoKICAgKiAgICAqICAgSWYgbmVpdGhlciBgd2lkdGhgIG5vciBgaGVpZ2h0YCBhcmUgc3BlY2lmaWVkIGFuZCBgc3FydChudW1FbGVtZW50cylgIGlzIGFuIGludGVnZXIgdGhlbiB3aWR0aCBhbmQgaGVpZ2h0CiAgICogICAgICAgIGFyZSBzZXQgdG8gYHNxcnQobnVtRWxlbWVudHMpYC4gT3RoZXJ3aXNlIGB3aWR0aCA9IG51bUVsZW1lbnRzYCBhbmQgYGhlaWdodCA9IDFgLgogICAqCiAgICogICAgKiAgIElmIG9ubHkgb25lIG9mIGB3aWR0aGAgb3IgYGhlaWdodGAgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIG90aGVyIGVxdWFscyBgbnVtRWxlbWVudHMgLyBzcGVjaWZpZWREaW1lbnNpb25gLgogICAqCiAgICogSWYgYG51bWJlcltdYCB3aWxsIGJlIGNvbnZlcnRlZCB0byBgdHlwZWAuCiAgICoKICAgKiBJZiBgc3JjYCBpcyBhIGZ1bmN0aW9uIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggYSBgV2ViR0xSZW5kZXJpbmdDb250ZXh0YCBhbmQgdGhlc2Ugb3B0aW9ucy4KICAgKiBXaGF0ZXZlciBpdCByZXR1cm5zIGlzIHN1YmplY3QgdG8gdGhlc2UgcnVsZXMuIFNvIGl0IGNhbiByZXR1cm4gYSBzdHJpbmcgdXJsLCBhbiBgSFRNTEVsZW1lbnRgCiAgICogYW4gYXJyYXkgZXRjLi4uCiAgICoKICAgKiBJZiBgc3JjYCBpcyB1bmRlZmluZWQgdGhlbiBhbiBlbXB0eSB0ZXh0dXJlIHdpbGwgYmUgY3JlYXRlZCBvZiBzaXplIGB3aWR0aGAgYnkgYGhlaWdodGAuCiAgICoKICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2Nyb3NzT3JpZ2luXSBXaGF0IHRvIHNldCB0aGUgY3Jvc3NPcmlnaW4gcHJvcGVydHkgb2YgaW1hZ2VzIHdoZW4gdGhleSBhcmUgZG93bmxvYWRlZC4KICAgKiAgICBkZWZhdWx0OiB1bmRlZmluZWQuIEFsc28gc2VlIHtAbGluayBtb2R1bGU6dHdnbC5zZXREZWZhdWx0c30uCiAgICoKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogU2V0cyBhbnkgcGFja2luZyBzdGF0ZSB0aGF0IHdpbGwgYmUgc2V0IGJhc2VkIG9uIHRoZSBvcHRpb25zLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC4KICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gc2V0UGFja1N0YXRlKGdsLCBvcHRpb25zKSB7CiAgICBpZiAob3B0aW9ucy5jb2xvcnNwYWNlQ29udmVyc2lvbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19DT0xPUlNQQUNFX0NPTlZFUlNJT05fV0VCR0wsIG9wdGlvbnMuY29sb3JzcGFjZUNvbnZlcnNpb24pOwogICAgfQogICAgaWYgKG9wdGlvbnMucHJlbXVsdGlwbHlBbHBoYSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgb3B0aW9ucy5wcmVtdWx0aXBseUFscGhhKTsKICAgIH0KICAgIGlmIChvcHRpb25zLmZsaXBZICE9PSB1bmRlZmluZWQpIHsKICAgICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX0ZMSVBfWV9XRUJHTCwgb3B0aW9ucy5mbGlwWSk7CiAgICB9CiAgfQoKICAvKioKICAgKiBTZXQgc2tpcCBzdGF0ZSB0byBkZWZhdWx0cwogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBzZXRTa2lwU3RhdGVUb0RlZmF1bHQoZ2wpIHsKICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19BTElHTk1FTlQsIDQpOwogICAgaWYgKGlzV2ViR0wyKGdsKSkgewogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfUk9XX0xFTkdUSCwgMCk7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19JTUFHRV9IRUlHSFQsIDApOwogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfU0tJUF9QSVhFTFMsIDApOwogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfU0tJUF9ST1dTLCAwKTsKICAgICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX1NLSVBfSU1BR0VTLCAwKTsKICAgIH0KICB9CgogIC8qKgogICAqIFNldHMgdGhlIHBhcmFtZXRlcnMgb2YgYSB0ZXh0dXJlIG9yIHNhbXBsZXIKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bnVtYmVyfFdlYkdMU2FtcGxlcn0gdGFyZ2V0IHRleHR1cmUgdGFyZ2V0IG9yIHNhbXBsZXIKICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IHBhcmFtZXRlcmlGbiB0ZXhQYXJhbWV0ZXJpIG9yIHNhbXBsZXJQYXJhbWV0ZXJpIGZuCiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC4KICAgKiAgIFRoaXMgaXMgb2Z0ZW4gdGhlIHNhbWUgb3B0aW9ucyB5b3UgcGFzc2VkIGluIHdoZW4geW91IGNyZWF0ZWQgdGhlIHRleHR1cmUuCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBzZXRUZXh0dXJlU2FtcGxlclBhcmFtZXRlcnMoZ2wsIHRhcmdldCwgcGFyYW1ldGVyaUZuLCBvcHRpb25zKSB7CiAgICBpZiAob3B0aW9ucy5taW5NYWcpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9NSU5fRklMVEVSLCBvcHRpb25zLm1pbk1hZyk7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUFHX0ZJTFRFUiwgb3B0aW9ucy5taW5NYWcpOwogICAgfQogICAgaWYgKG9wdGlvbnMubWluKSB7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUlOX0ZJTFRFUiwgb3B0aW9ucy5taW4pOwogICAgfQogICAgaWYgKG9wdGlvbnMubWFnKSB7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUFHX0ZJTFRFUiwgb3B0aW9ucy5tYWcpOwogICAgfQogICAgaWYgKG9wdGlvbnMud3JhcCkgewogICAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX1dSQVBfUywgb3B0aW9ucy53cmFwKTsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1QsIG9wdGlvbnMud3JhcCk7CiAgICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QkMSB8fCBpc1NhbXBsZXIoZ2wsIHRhcmdldCkpIHsKICAgICAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX1dSQVBfUiwgb3B0aW9ucy53cmFwKTsKICAgICAgfQogICAgfQogICAgaWYgKG9wdGlvbnMud3JhcFIpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1IsIG9wdGlvbnMud3JhcFIpOwogICAgfQogICAgaWYgKG9wdGlvbnMud3JhcFMpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1MsIG9wdGlvbnMud3JhcFMpOwogICAgfQogICAgaWYgKG9wdGlvbnMud3JhcFQpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1QsIG9wdGlvbnMud3JhcFQpOwogICAgfQogICAgaWYgKG9wdGlvbnMubWluTG9kICE9PSB1bmRlZmluZWQpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9NSU5fTE9ELCBvcHRpb25zLm1pbkxvZCk7CiAgICB9CiAgICBpZiAob3B0aW9ucy5tYXhMb2QgIT09IHVuZGVmaW5lZCkgewogICAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX01BWF9MT0QsIG9wdGlvbnMubWF4TG9kKTsKICAgIH0KICAgIGlmIChvcHRpb25zLmJhc2VMZXZlbCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfQkFTRV9MRVZFTCwgb3B0aW9ucy5iYXNlTGV2ZWwpOwogICAgfQogICAgaWYgKG9wdGlvbnMubWF4TGV2ZWwgIT09IHVuZGVmaW5lZCkgewogICAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX01BWF9MRVZFTCwgb3B0aW9ucy5tYXhMZXZlbCk7CiAgICB9CiAgICBpZiAob3B0aW9ucy5jb21wYXJlRnVuYyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfQ09NUEFSRV9GVU5DLCBvcHRpb25zLmNvbXBhcmVGdW5jKTsKICAgIH0KICAgIGlmIChvcHRpb25zLmNvbXBhcmVNb2RlICE9PSB1bmRlZmluZWQpIHsKICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9DT01QQVJFX01PREUsIG9wdGlvbnMuY29tcGFyZU1vZGUpOwogICAgfQogIH0KCiAgLyoqCiAgICogU2V0cyB0aGUgdGV4dHVyZSBwYXJhbWV0ZXJzIG9mIGEgdGV4dHVyZS4KICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIFdlYkdMVGV4dHVyZSB0byBzZXQgcGFyYW1ldGVycyBmb3IKICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBvcHRpb25zIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuCiAgICogICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIG9wdGlvbnMgeW91IHBhc3NlZCBpbiB3aGVuIHlvdSBjcmVhdGVkIHRoZSB0ZXh0dXJlLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIHNldFRleHR1cmVQYXJhbWV0ZXJzKGdsLCB0ZXgsIG9wdGlvbnMpIHsKICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQkMjsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIHNldFRleHR1cmVTYW1wbGVyUGFyYW1ldGVycyhnbCwgdGFyZ2V0LCBnbC50ZXhQYXJhbWV0ZXJpLCBvcHRpb25zKTsKICB9CgogIC8qKgogICAqIE1ha2VzIGEgMXgxIHBpeGVsCiAgICogSWYgbm8gY29sb3IgaXMgcGFzc2VkIGluIHVzZXMgdGhlIGRlZmF1bHQgY29sb3Igd2hpY2ggY2FuIGJlIHNldCBieSBjYWxsaW5nIGBzZXREZWZhdWx0VGV4dHVyZUNvbG9yYC4KICAgKiBAcGFyYW0geyhudW1iZXJbXXxBcnJheUJ1ZmZlclZpZXcpfSBbY29sb3JdIFRoZSBjb2xvciB1c2luZyAwLTEgdmFsdWVzCiAgICogQHJldHVybiB7VWludDhBcnJheX0gVW5pdDhBcnJheSB3aXRoIGNvbG9yLgogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gbWFrZTFQaXhlbChjb2xvcikgewogICAgY29sb3IgPSBjb2xvciB8fCBkZWZhdWx0cyQxLnRleHR1cmVDb2xvcjsKICAgIGlmIChpc0FycmF5QnVmZmVyKGNvbG9yKSkgewogICAgICByZXR1cm4gY29sb3I7CiAgICB9CiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW2NvbG9yWzBdICogMjU1LCBjb2xvclsxXSAqIDI1NSwgY29sb3JbMl0gKiAyNTUsIGNvbG9yWzNdICogMjU1XSk7CiAgfQoKICAvKioKICAgKiBTZXRzIGZpbHRlcmluZyBvciBnZW5lcmF0ZXMgbWlwcyBmb3IgdGV4dHVyZSBiYXNlZCBvbiB3aWR0aCBvciBoZWlnaHQKICAgKiBJZiB3aWR0aCBvciBoZWlnaHQgaXMgbm90IHBhc3NlZCBpbiB1c2VzIGBvcHRpb25zLndpZHRoYCBhbmQvL29yIGBvcHRpb25zLmhlaWdodGAKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqICAgVGhpcyBpcyBvZnRlbiB0aGUgc2FtZSBvcHRpb25zIHlvdSBwYXNzZWQgaW4gd2hlbiB5b3UgY3JlYXRlZCB0aGUgdGV4dHVyZS4KICAgKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoXSB3aWR0aCBvZiB0ZXh0dXJlCiAgICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHRdIGhlaWdodCBvZiB0ZXh0dXJlCiAgICogQHBhcmFtIHtudW1iZXJ9IFtpbnRlcm5hbEZvcm1hdF0gVGhlIGludGVybmFsRm9ybWF0IHBhcmFtZXRlciBmcm9tIHRleEltYWdlMkQgZXRjLi4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXMKICAgKi8KICBmdW5jdGlvbiBzZXRUZXh0dXJlRmlsdGVyaW5nRm9yU2l6ZShnbCwgdGV4LCBvcHRpb25zLCB3aWR0aCwgaGVpZ2h0LCBpbnRlcm5hbEZvcm1hdCkgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9uczsKICAgIGludGVybmFsRm9ybWF0ID0gaW50ZXJuYWxGb3JtYXQgfHwgUkdCQSQxOwogICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgVEVYVFVSRV8yRCQyOwogICAgd2lkdGggPSB3aWR0aCB8fCBvcHRpb25zLndpZHRoOwogICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IG9wdGlvbnMuaGVpZ2h0OwogICAgZ2wuYmluZFRleHR1cmUodGFyZ2V0LCB0ZXgpOwogICAgaWYgKGNhbkdlbmVyYXRlTWlwbWFwKGdsLCB3aWR0aCwgaGVpZ2h0LCBpbnRlcm5hbEZvcm1hdCkpIHsKICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAodGFyZ2V0KTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGZpbHRlcmluZyA9IGNhbkZpbHRlcihpbnRlcm5hbEZvcm1hdCkgPyBMSU5FQVIkMSA6IE5FQVJFU1Q7CiAgICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX01JTl9GSUxURVIsIGZpbHRlcmluZyk7CiAgICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX01BR19GSUxURVIsIGZpbHRlcmluZyk7CiAgICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX1dSQVBfUywgQ0xBTVBfVE9fRURHRSQxKTsKICAgICAgZ2wudGV4UGFyYW1ldGVyaSh0YXJnZXQsIFRFWFRVUkVfV1JBUF9ULCBDTEFNUF9UT19FREdFJDEpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpIHsKICAgIHJldHVybiBvcHRpb25zLmF1dG8gPT09IHRydWUgfHwgKG9wdGlvbnMuYXV0byA9PT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubGV2ZWwgPT09IHVuZGVmaW5lZCk7CiAgfQoKICAvKioKICAgKiBHZXRzIGFuIGFycmF5IG9mIGN1YmVtYXAgZmFjZSBlbnVtcwogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gb3B0aW9ucyBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqICAgVGhpcyBpcyBvZnRlbiB0aGUgc2FtZSBvcHRpb25zIHlvdSBwYXNzZWQgaW4gd2hlbiB5b3UgY3JlYXRlZCB0aGUgdGV4dHVyZS4KICAgKiBAcmV0dXJuIHtudW1iZXJbXX0gY3ViZW1hcCBmYWNlIGVudW1zCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBnZXRDdWJlRmFjZU9yZGVyKGdsLCBvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgIHJldHVybiBvcHRpb25zLmN1YmVGYWNlT3JkZXIgfHwgWwogICAgICAgIFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCwKICAgICAgICBURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1gsCiAgICAgICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9ZLAogICAgICAgIFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWSwKICAgICAgICBURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1osCiAgICAgICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9aLAogICAgICBdOwogIH0KCiAgLyoqCiAgICogQHR5cGVkZWYge09iamVjdH0gRmFjZUluZm8KICAgKiBAcHJvcGVydHkge251bWJlcn0gZmFjZSBnbCBlbnVtIGZvciB0ZXhJbWFnZTJECiAgICogQHByb3BlcnR5IHtudW1iZXJ9IG5keCBmYWNlIGluZGV4ICgwIC0gNSkgaW50byBzb3VyY2UgZGF0YQogICAqIEBpZ25vcmUKICAgKi8KCiAgLyoqCiAgICogR2V0cyBhbiBhcnJheSBvZiBGYWNlSW5mb3MKICAgKiBUaGVyZSdzIGEgYnVnIGluIHNvbWUgTlZpZGlhIGRyaXZlcnMgdGhhdCB3aWxsIGNyYXNoIHRoZSBkcml2ZXIgaWYKICAgKiBgZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YYCBpcyBub3QgdXBsb2FkZWQgZmlyc3QuIFNvLCB3ZSB0YWtlCiAgICogdGhlIHVzZXIncyBkZXNpcmVkIG9yZGVyIGZyb20gaGlzIGZhY2VzIHRvIFdlYkdMIGFuZCBtYWtlIHN1cmUgd2UKICAgKiBkbyB0aGUgZmFjZXMgaW4gV2ViR0wgb3JkZXIKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gb3B0aW9ucyBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqIEByZXR1cm4ge0ZhY2VJbmZvW119IGN1YmVtYXAgZmFjZSBpbmZvcy4gQXJndWFibHkgdGhlIGBmYWNlYCBwcm9wZXJ0eSBvZiBlYWNoIGVsZW1lbnQgaXMgcmVkdW5kYW50IGJ1dAogICAqICAgIGl0J3MgbmVlZGVkIGludGVybmFsbHkgdG8gc29ydCB0aGUgYXJyYXkgb2YgYG5keGAgcHJvcGVydGllcyBieSBgZmFjZWAuCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBnZXRDdWJlRmFjZXNXaXRoTmR4KGdsLCBvcHRpb25zKSB7CiAgICBjb25zdCBmYWNlcyA9IGdldEN1YmVGYWNlT3JkZXIoZ2wsIG9wdGlvbnMpOwogICAgLy8gd29yayBhcm91bmQgYnVnIGluIE5WaWRpYSBkcml2ZXJzLiBXZSBoYXZlIHRvIHVwbG9hZCB0aGUgZmlyc3QgZmFjZSBmaXJzdCBlbHNlIHRoZSBkcml2ZXIgY3Jhc2hlcyA6KAogICAgY29uc3QgZmFjZXNXaXRoTmR4ID0gZmFjZXMubWFwKGZ1bmN0aW9uKGZhY2UsIG5keCkgewogICAgICByZXR1cm4geyBmYWNlOiBmYWNlLCBuZHg6IG5keCB9OwogICAgfSk7CiAgICBmYWNlc1dpdGhOZHguc29ydChmdW5jdGlvbihhLCBiKSB7CiAgICAgIHJldHVybiBhLmZhY2UgLSBiLmZhY2U7CiAgICB9KTsKICAgIHJldHVybiBmYWNlc1dpdGhOZHg7CiAgfQoKICAvKioKICAgKiBTZXQgYSB0ZXh0dXJlIGZyb20gdGhlIGNvbnRlbnRzIG9mIGFuIGVsZW1lbnQuIFdpbGwgYWxzbyBzZXQKICAgKiB0ZXh0dXJlIGZpbHRlcmluZyBvciBnZW5lcmF0ZSBtaXBzIGJhc2VkIG9uIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBlbGVtZW50CiAgICogdW5sZXNzIGBvcHRpb25zLmF1dG8gPT09IGZhbHNlYC4gSWYgYHRhcmdldCA9PT0gZ2wuVEVYVFVSRV9DVUJFX01BUGAgd2lsbAogICAqIGF0dGVtcHQgdG8gc2xpY2UgaW1hZ2UgaW50byAxeDYsIDJ4MywgM3gyLCBvciA2eDEgaW1hZ2VzLCBvbmUgZm9yIGVhY2ggZmFjZS4KICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIFdlYkdMVGV4dHVyZSB0byBzZXQgcGFyYW1ldGVycyBmb3IKICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IGEgY2FudmFzLCBpbWcsIG9yIHZpZGVvIGVsZW1lbnQuCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gW29wdGlvbnNdIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuCiAgICogICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIG9wdGlvbnMgeW91IHBhc3NlZCBpbiB3aGVuIHlvdSBjcmVhdGVkIHRoZSB0ZXh0dXJlLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqIEBraW5kIGZ1bmN0aW9uCiAgICovCiAgZnVuY3Rpb24gc2V0VGV4dHVyZUZyb21FbGVtZW50KGdsLCB0ZXgsIGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzJDEudGV4dHVyZU9wdGlvbnM7CiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEJDI7CiAgICBjb25zdCBsZXZlbCA9IG9wdGlvbnMubGV2ZWwgfHwgMDsKICAgIGxldCB3aWR0aCA9IGVsZW1lbnQud2lkdGg7CiAgICBsZXQgaGVpZ2h0ID0gZWxlbWVudC5oZWlnaHQ7CiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IG9wdGlvbnMuaW50ZXJuYWxGb3JtYXQgfHwgb3B0aW9ucy5mb3JtYXQgfHwgUkdCQSQxOwogICAgY29uc3QgZm9ybWF0VHlwZSA9IGdldEZvcm1hdEFuZFR5cGVGb3JJbnRlcm5hbEZvcm1hdChpbnRlcm5hbEZvcm1hdCk7CiAgICBjb25zdCBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBmb3JtYXRUeXBlLmZvcm1hdDsKICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGUgfHwgZm9ybWF0VHlwZS50eXBlOwogICAgc2V0UGFja1N0YXRlKGdsLCBvcHRpb25zKTsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSkgewogICAgICAvLyBndWVzcyB0aGUgcGFydHMKICAgICAgY29uc3QgaW1nV2lkdGggID0gZWxlbWVudC53aWR0aDsKICAgICAgY29uc3QgaW1nSGVpZ2h0ID0gZWxlbWVudC5oZWlnaHQ7CiAgICAgIGxldCBzaXplOwogICAgICBsZXQgc2xpY2VzOwogICAgICBpZiAoaW1nV2lkdGggLyA2ID09PSBpbWdIZWlnaHQpIHsKICAgICAgICAvLyBJdCdzIDZ4MQogICAgICAgIHNpemUgPSBpbWdIZWlnaHQ7CiAgICAgICAgc2xpY2VzID0gWzAsIDAsIDEsIDAsIDIsIDAsIDMsIDAsIDQsIDAsIDUsIDBdOwogICAgICB9IGVsc2UgaWYgKGltZ0hlaWdodCAvIDYgPT09IGltZ1dpZHRoKSB7CiAgICAgICAgLy8gSXQncyAxeDYKICAgICAgICBzaXplID0gaW1nV2lkdGg7CiAgICAgICAgc2xpY2VzID0gWzAsIDAsIDAsIDEsIDAsIDIsIDAsIDMsIDAsIDQsIDAsIDVdOwogICAgICB9IGVsc2UgaWYgKGltZ1dpZHRoIC8gMyA9PT0gaW1nSGVpZ2h0IC8gMikgewogICAgICAgIC8vIEl0J3MgM3gyCiAgICAgICAgc2l6ZSA9IGltZ1dpZHRoIC8gMzsKICAgICAgICBzbGljZXMgPSBbMCwgMCwgMSwgMCwgMiwgMCwgMCwgMSwgMSwgMSwgMiwgMV07CiAgICAgIH0gZWxzZSBpZiAoaW1nV2lkdGggLyAyID09PSBpbWdIZWlnaHQgLyAzKSB7CiAgICAgICAgLy8gSXQncyAyeDMKICAgICAgICBzaXplID0gaW1nV2lkdGggLyAyOwogICAgICAgIHNsaWNlcyA9IFswLCAwLCAxLCAwLCAwLCAxLCAxLCAxLCAwLCAyLCAxLCAyXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyAiY2FuJ3QgZmlndXJlIG91dCBjdWJlIG1hcCBmcm9tIGVsZW1lbnQ6ICIgKyAoZWxlbWVudC5zcmMgPyBlbGVtZW50LnNyYyA6IGVsZW1lbnQubm9kZU5hbWUpOwogICAgICB9CiAgICAgIGNvbnN0IGN0eCA9IGdldFNoYXJlZDJEQ29udGV4dCgpOwogICAgICBpZiAoY3R4KSB7CiAgICAgICAgY3R4LmNhbnZhcy53aWR0aCA9IHNpemU7CiAgICAgICAgY3R4LmNhbnZhcy5oZWlnaHQgPSBzaXplOwogICAgICAgIHdpZHRoID0gc2l6ZTsKICAgICAgICBoZWlnaHQgPSBzaXplOwogICAgICAgIGdldEN1YmVGYWNlc1dpdGhOZHgoZ2wsIG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oZikgewogICAgICAgICAgY29uc3QgeE9mZnNldCA9IHNsaWNlc1tmLm5keCAqIDIgKyAwXSAqIHNpemU7CiAgICAgICAgICBjb25zdCB5T2Zmc2V0ID0gc2xpY2VzW2YubmR4ICogMiArIDFdICogc2l6ZTsKICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZWxlbWVudCwgeE9mZnNldCwgeU9mZnNldCwgc2l6ZSwgc2l6ZSwgMCwgMCwgc2l6ZSwgc2l6ZSk7CiAgICAgICAgICBnbC50ZXhJbWFnZTJEKGYuZmFjZSwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIGN0eC5jYW52YXMpOwogICAgICAgIH0pOwogICAgICAgIC8vIEZyZWUgdXAgdGhlIGNhbnZhcyBtZW1vcnkKICAgICAgICBjdHguY2FudmFzLndpZHRoID0gMTsKICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IDE7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNyZWF0ZUltYWdlQml0bWFwICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIC8vIE5PVEU6IEl0IHNlZW1zIGxpa2Ugd2Ugc2hvdWxkIHByZWZlciBJbWFnZUJpdG1hcCBiZWNhdXNlIHVubGlrZSBjYW52YXMgaXQncwogICAgICAgIC8vIG5vdGUgbG9zc3k/IChhbHBoYSBpcyBub3QgcHJlbXVsdGlwbGllZD8gYWx0aG91Z2ggSSdtIG5vdCBzdXJlIHdoYXQKICAgICAgICB3aWR0aCA9IHNpemU7CiAgICAgICAgaGVpZ2h0ID0gc2l6ZTsKICAgICAgICBnZXRDdWJlRmFjZXNXaXRoTmR4KGdsLCBvcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGYpIHsKICAgICAgICAgIGNvbnN0IHhPZmZzZXQgPSBzbGljZXNbZi5uZHggKiAyICsgMF0gKiBzaXplOwogICAgICAgICAgY29uc3QgeU9mZnNldCA9IHNsaWNlc1tmLm5keCAqIDIgKyAxXSAqIHNpemU7CiAgICAgICAgICAvLyBXZSBjYW4ndCBlYXNpbHkgdXNlIGEgZGVmYXVsdCB0ZXh0dXJlIGNvbG9yIGhlcmUgYXMgaXQgd291bGQgaGF2ZSB0byBtYXRjaAogICAgICAgICAgLy8gdGhlIHR5cGUgYWNyb3NzIGFsbCBmYWNlcyB3aGVyZSBhcyB3aXRoIGEgMkQgb25lIHRoZXJlJ3Mgb25seSBvbmUgZmFjZQogICAgICAgICAgLy8gc28gd2UncmUgcmVwbGFjaW5nIGV2ZXJ5dGhpbmcgYWxsIGF0IG9uY2UuIEl0IGFsc28gaGFzIHRvIGJlIHRoZSBjb3JyZWN0IHNpemUuCiAgICAgICAgICAvLyBPbiB0aGUgb3RoZXIgaGFuZCB3ZSBuZWVkIGFsbCBmYWNlcyB0byBiZSB0aGUgc2FtZSBzaXplIHNvIGFzIG9uZSBmYWNlIGxvYWRzCiAgICAgICAgICAvLyB0aGUgcmVzdCBtYXRjaCBlbHNlIHRoZSB0ZXh0dXJlIHdpbGwgYmUgdW4tcmVuZGVyYWJsZS4KICAgICAgICAgIGdsLnRleEltYWdlMkQoZi5mYWNlLCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIHNpemUsIHNpemUsIDAsIGZvcm1hdCwgdHlwZSwgbnVsbCk7CiAgICAgICAgICBjcmVhdGVJbWFnZUJpdG1hcChlbGVtZW50LCB4T2Zmc2V0LCB5T2Zmc2V0LCBzaXplLCBzaXplLCB7CiAgICAgICAgICAgIHByZW11bHRpcGx5QWxwaGE6ICdub25lJywKICAgICAgICAgICAgY29sb3JTcGFjZUNvbnZlcnNpb246ICdub25lJywKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihmdW5jdGlvbihpbWFnZUJpdG1hcCkgewogICAgICAgICAgICBzZXRQYWNrU3RhdGUoZ2wsIG9wdGlvbnMpOwogICAgICAgICAgICBnbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleCk7CiAgICAgICAgICAgIGdsLnRleEltYWdlMkQoZi5mYWNlLCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIGZvcm1hdCwgdHlwZSwgaW1hZ2VCaXRtYXApOwogICAgICAgICAgICBpZiAoc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpKSB7CiAgICAgICAgICAgICAgc2V0VGV4dHVyZUZpbHRlcmluZ0ZvclNpemUoZ2wsIHRleCwgb3B0aW9ucywgd2lkdGgsIGhlaWdodCwgaW50ZXJuYWxGb3JtYXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QkMSB8fCB0YXJnZXQgPT09IFRFWFRVUkVfMkRfQVJSQVkkMSkgewogICAgICBjb25zdCBzbWFsbGVzdCA9IE1hdGgubWluKGVsZW1lbnQud2lkdGgsIGVsZW1lbnQuaGVpZ2h0KTsKICAgICAgY29uc3QgbGFyZ2VzdCA9IE1hdGgubWF4KGVsZW1lbnQud2lkdGgsIGVsZW1lbnQuaGVpZ2h0KTsKICAgICAgY29uc3QgZGVwdGggPSBsYXJnZXN0IC8gc21hbGxlc3Q7CiAgICAgIGlmIChkZXB0aCAlIDEgIT09IDApIHsKICAgICAgICB0aHJvdyAiY2FuIG5vdCBjb21wdXRlIDNEIGRpbWVuc2lvbnMgb2YgZWxlbWVudCI7CiAgICAgIH0KICAgICAgY29uc3QgeE11bHQgPSBlbGVtZW50LndpZHRoICA9PT0gbGFyZ2VzdCA/IDEgOiAwOwogICAgICBjb25zdCB5TXVsdCA9IGVsZW1lbnQuaGVpZ2h0ID09PSBsYXJnZXN0ID8gMSA6IDA7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19BTElHTk1FTlQsIDEpOwogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfUk9XX0xFTkdUSCwgZWxlbWVudC53aWR0aCk7CiAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19JTUFHRV9IRUlHSFQsIDApOwogICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfU0tJUF9JTUFHRVMsIDApOwogICAgICBnbC50ZXhJbWFnZTNEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBzbWFsbGVzdCwgc21hbGxlc3QsIHNtYWxsZXN0LCAwLCBmb3JtYXQsIHR5cGUsIG51bGwpOwogICAgICBmb3IgKGxldCBkID0gMDsgZCA8IGRlcHRoOyArK2QpIHsKICAgICAgICBjb25zdCBzcmNYID0gZCAqIHNtYWxsZXN0ICogeE11bHQ7CiAgICAgICAgY29uc3Qgc3JjWSA9IGQgKiBzbWFsbGVzdCAqIHlNdWx0OwogICAgICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19TS0lQX1BJWEVMUywgc3JjWCk7CiAgICAgICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX1NLSVBfUk9XUywgc3JjWSk7CiAgICAgICAgZ2wudGV4U3ViSW1hZ2UzRCh0YXJnZXQsIGxldmVsLCAwLCAwLCBkLCBzbWFsbGVzdCwgc21hbGxlc3QsIDEsIGZvcm1hdCwgdHlwZSwgZWxlbWVudCk7CiAgICAgIH0KICAgICAgc2V0U2tpcFN0YXRlVG9EZWZhdWx0KGdsKTsKICAgIH0gZWxzZSB7CiAgICAgIGdsLnRleEltYWdlMkQodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIGZvcm1hdCwgdHlwZSwgZWxlbWVudCk7CiAgICB9CiAgICBpZiAoc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpKSB7CiAgICAgIHNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKGdsLCB0ZXgsIG9wdGlvbnMsIHdpZHRoLCBoZWlnaHQsIGludGVybmFsRm9ybWF0KTsKICAgIH0KICAgIHNldFRleHR1cmVQYXJhbWV0ZXJzKGdsLCB0ZXgsIG9wdGlvbnMpOwogIH0KCiAgZnVuY3Rpb24gbm9vcCgpIHsKICB9CgogIC8qKgogICAqIENoZWNrcyB3aGV0aGVyIHRoZSB1cmwncyBvcmlnaW4gaXMgdGhlIHNhbWUgc28gdGhhdCB3ZSBjYW4gc2V0IHRoZSBgY3Jvc3NPcmlnaW5gCiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCB1cmwgdG8gaW1hZ2UKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgd2luZG93J3Mgb3JpZ2luIGlzIHRoZSBzYW1lIGFzIGltYWdlJ3MgdXJsCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiB1cmxJc1NhbWVPcmlnaW4odXJsKSB7CiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykgewogICAgICAvLyBmb3IgSUUgcmVhbGx5CiAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgcmV0dXJuIGEuaG9zdG5hbWUgPT09IGxvY2F0aW9uLmhvc3RuYW1lICYmCiAgICAgICAgICAgICBhLnBvcnQgICAgID09PSBsb2NhdGlvbi5wb3J0ICYmCiAgICAgICAgICAgICBhLnByb3RvY29sID09PSBsb2NhdGlvbi5wcm90b2NvbDsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGxvY2FsT3JpZ2luID0gKG5ldyBVUkwobG9jYXRpb24uaHJlZikpLm9yaWdpbjsKICAgICAgY29uc3QgdXJsT3JpZ2luID0gKG5ldyBVUkwodXJsLCBsb2NhdGlvbi5ocmVmKSkub3JpZ2luOwogICAgICByZXR1cm4gdXJsT3JpZ2luID09PSBsb2NhbE9yaWdpbjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHNldFRvQW5vbnltb3VzSWZVbmRlZmluZWRBbmRVUkxJc05vdFNhbWVPcmlnaW4odXJsLCBjcm9zc09yaWdpbikgewogICAgcmV0dXJuIGNyb3NzT3JpZ2luID09PSB1bmRlZmluZWQgJiYgIXVybElzU2FtZU9yaWdpbih1cmwpCiAgICAgICA/ICdhbm9ueW1vdXMnCiAgICAgICA6IGNyb3NzT3JpZ2luOwogIH0KCiAgLyoqCiAgICogTG9hZHMgYW4gaW1hZ2UKICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIHVybCB0byBpbWFnZQogICAqIEBwYXJhbSB7c3RyaW5nfSBjcm9zc09yaWdpbgogICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyLCBpbWcpfSBbY2FsbGJhY2tdIGEgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCBhbiBlcnJvciBhbmQgdGhlIGltYWdlLiBUaGUgZXJyb3Igd2lsbCBiZSBub24tbnVsbAogICAqICAgICBpZiB0aGVyZSB3YXMgYW4gZXJyb3IKICAgKiBAcmV0dXJuIHtIVE1MSW1hZ2VFbGVtZW50fSB0aGUgaW1hZ2UgYmVpbmcgbG9hZGVkLgogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gbG9hZEltYWdlKHVybCwgY3Jvc3NPcmlnaW4sIGNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7CiAgICBsZXQgaW1nOwogICAgY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkID8gY3Jvc3NPcmlnaW4gOiBkZWZhdWx0cyQxLmNyb3NzT3JpZ2luOwogICAgY3Jvc3NPcmlnaW4gPSBzZXRUb0Fub255bW91c0lmVW5kZWZpbmVkQW5kVVJMSXNOb3RTYW1lT3JpZ2luKHVybCwgY3Jvc3NPcmlnaW4pOwogICAgaWYgKHR5cGVvZiBJbWFnZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgIGlmIChjcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW47CiAgICAgIH0KCiAgICAgIGNvbnN0IGNsZWFyRXZlbnRIYW5kbGVycyA9IGZ1bmN0aW9uIGNsZWFyRXZlbnRIYW5kbGVycygpIHsKICAgICAgICBpbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICBpbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uTG9hZCk7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgaW1nID0gbnVsbDsKICAgICAgfTsKCiAgICAgIGNvbnN0IG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKCkgewogICAgICAgIGNvbnN0IG1zZyA9ICJjb3VsZG4ndCBsb2FkIGltYWdlOiAiICsgdXJsOwogICAgICAgIGVycm9yJDEobXNnKTsKICAgICAgICBjYWxsYmFjayhtc2csIGltZyk7CiAgICAgICAgY2xlYXJFdmVudEhhbmRsZXJzKCk7CiAgICAgIH07CgogICAgICBjb25zdCBvbkxvYWQgPSBmdW5jdGlvbiBvbkxvYWQoKSB7CiAgICAgICAgY2FsbGJhY2sobnVsbCwgaW1nKTsKICAgICAgICBjbGVhckV2ZW50SGFuZGxlcnMoKTsKICAgICAgfTsKCiAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIG9uRXJyb3IpOwogICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uTG9hZCk7CiAgICAgIGltZy5zcmMgPSB1cmw7CiAgICAgIHJldHVybiBpbWc7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBJbWFnZUJpdG1hcCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgbGV0IGVycjsKICAgICAgbGV0IGJtOwogICAgICBjb25zdCBjYiA9IGZ1bmN0aW9uIGNiKCkgewogICAgICAgIGNhbGxiYWNrKGVyciwgYm0pOwogICAgICB9OwoKICAgICAgY29uc3Qgb3B0aW9ucyA9IHt9OwogICAgICBpZiAoY3Jvc3NPcmlnaW4pIHsKICAgICAgICBvcHRpb25zLm1vZGUgPSAnY29ycyc7IC8vIFRPRE86IG5vdCBzdXJlIGhvdyB0byB0cmFuc2xhdGUgaW1hZ2UuY3Jvc3NPcmlnaW4KICAgICAgfQogICAgICBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgICB0aHJvdyByZXNwb25zZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJsb2IoKTsKICAgICAgfSkudGhlbihmdW5jdGlvbihibG9iKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKGJsb2IsIHsKICAgICAgICAgIHByZW11bHRpcGx5QWxwaGE6ICdub25lJywKICAgICAgICAgIGNvbG9yU3BhY2VDb252ZXJzaW9uOiAnbm9uZScsCiAgICAgICAgfSk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oYml0bWFwKSB7CiAgICAgICAgLy8gbm90IHN1cmUgaWYgdGhpcyB3b3Jrcy4gV2UgZG9uJ3Qgd2FudAogICAgICAgIC8vIHRvIGNhdGNoIHRoZSB1c2VyJ3MgZXJyb3IuIFNvLCBjYWxsCiAgICAgICAgLy8gdGhlIGNhbGxiYWNrIGluIGEgdGltZW91dCBzbyB3ZSdyZQogICAgICAgIC8vIG5vdCBpbiB0aGlzIHNjb3BlIGluc2lkZSB0aGUgcHJvbWlzZS4KICAgICAgICBibSA9IGJpdG1hcDsKICAgICAgICBzZXRUaW1lb3V0KGNiKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZSkgewogICAgICAgIGVyciA9IGU7CiAgICAgICAgc2V0VGltZW91dChjYik7CiAgICAgIH0pOwogICAgICBpbWcgPSBudWxsOwogICAgfQogICAgcmV0dXJuIGltZzsKICB9CgogIC8qKgogICAqIGNoZWNrIGlmIG9iamVjdCBpcyBhIFRleEltYWdlU291cmNlCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIE9iamVjdCB0byB0ZXN0CiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBvYmplY3QgaXMgYSBUZXhJbWFnZVNvdXJjZQogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gaXNUZXhJbWFnZVNvdXJjZShvYmopIHsKICAgIHJldHVybiAodHlwZW9mIEltYWdlQml0bWFwICE9PSAndW5kZWZpbmVkJyAmJiBvYmogaW5zdGFuY2VvZiBJbWFnZUJpdG1hcCkgfHwKICAgICAgICAgICAodHlwZW9mIEltYWdlRGF0YSAhPT0gJ3VuZGVmaW5lZCcgICYmIG9iaiBpbnN0YW5jZW9mIEltYWdlRGF0YSkgfHwKICAgICAgICAgICAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAgJiYgb2JqIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpOwogIH0KCiAgLyoqCiAgICogaWYgb2JqIGlzIGFuIFRleEltYWdlU291cmNlIHRoZW4ganVzdAogICAqIHVzZXMgaXQgb3RoZXJ3aXNlIGlmIG9iaiBpcyBhIHN0cmluZwogICAqIHRoZW4gbG9hZCBpdCBmaXJzdC4KICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfFRleEltYWdlU291cmNlfSBvYmoKICAgKiBAcGFyYW0ge3N0cmluZ30gY3Jvc3NPcmlnaW4KICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGVyciwgaW1nKX0gW2NhbGxiYWNrXSBhIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgYW4gZXJyb3IgYW5kIHRoZSBpbWFnZS4gVGhlIGVycm9yIHdpbGwgYmUgbm9uLW51bGwKICAgKiAgICAgaWYgdGhlcmUgd2FzIGFuIGVycm9yCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBsb2FkQW5kVXNlSW1hZ2Uob2JqLCBjcm9zc09yaWdpbiwgY2FsbGJhY2spIHsKICAgIGlmIChpc1RleEltYWdlU291cmNlKG9iaikpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBjYWxsYmFjayhudWxsLCBvYmopOwogICAgICB9KTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KCiAgICByZXR1cm4gbG9hZEltYWdlKG9iaiwgY3Jvc3NPcmlnaW4sIGNhbGxiYWNrKTsKICB9CgogIC8qKgogICAqIFNldHMgYSB0ZXh0dXJlIHRvIGEgMXgxIHBpeGVsIGNvbG9yLiBJZiBgb3B0aW9ucy5jb2xvciA9PT0gZmFsc2VgIGlzIG5vdGhpbmcgaGFwcGVucy4gSWYgaXQncyBub3Qgc2V0CiAgICogdGhlIGRlZmF1bHQgdGV4dHVyZSBjb2xvciBpcyB1c2VkIHdoaWNoIGNhbiBiZSBzZXQgYnkgY2FsbGluZyBgc2V0RGVmYXVsdFRleHR1cmVDb2xvcmAuCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSBXZWJHTFRleHR1cmUgdG8gc2V0IHBhcmFtZXRlcnMgZm9yCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gW29wdGlvbnNdIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuCiAgICogICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIG9wdGlvbnMgeW91IHBhc3NlZCBpbiB3aGVuIHlvdSBjcmVhdGVkIHRoZSB0ZXh0dXJlLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gc2V0VGV4dHVyZVRvMVBpeGVsQ29sb3IoZ2wsIHRleCwgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9uczsKICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQkMjsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIGlmIChvcHRpb25zLmNvbG9yID09PSBmYWxzZSkgewogICAgICByZXR1cm47CiAgICB9CiAgICAvLyBBc3N1bWUgaXQncyBhIFVSTAogICAgLy8gUHV0IDF4MSBwaXhlbHMgaW4gdGV4dHVyZS4gVGhhdCBtYWtlcyBpdCByZW5kZXJhYmxlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgZmlsdGVyaW5nLgogICAgY29uc3QgY29sb3IgPSBtYWtlMVBpeGVsKG9wdGlvbnMuY29sb3IpOwogICAgaWYgKHRhcmdldCA9PT0gVEVYVFVSRV9DVUJFX01BUCQxKSB7CiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCA2OyArK2lpKSB7CiAgICAgICAgZ2wudGV4SW1hZ2UyRChURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpaSwgMCwgUkdCQSQxLCAxLCAxLCAwLCBSR0JBJDEsIFVOU0lHTkVEX0JZVEUkMSwgY29sb3IpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gVEVYVFVSRV8zRCQxIHx8IHRhcmdldCA9PT0gVEVYVFVSRV8yRF9BUlJBWSQxKSB7CiAgICAgIGdsLnRleEltYWdlM0QodGFyZ2V0LCAwLCBSR0JBJDEsIDEsIDEsIDEsIDAsIFJHQkEkMSwgVU5TSUdORURfQllURSQxLCBjb2xvcik7CiAgICB9IGVsc2UgewogICAgICBnbC50ZXhJbWFnZTJEKHRhcmdldCwgMCwgUkdCQSQxLCAxLCAxLCAwLCBSR0JBJDEsIFVOU0lHTkVEX0JZVEUkMSwgY29sb3IpOwogICAgfQogIH0KCiAgLyoqCiAgICogVGhlIHNyYyBpbWFnZShzKSB1c2VkIHRvIGNyZWF0ZSBhIHRleHR1cmUuCiAgICoKICAgKiBXaGVuIHlvdSBjYWxsIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVUZXh0dXJlfSBvciB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlVGV4dHVyZXN9CiAgICogeW91IGNhbiBwYXNzIGluIHVybHMgZm9yIGltYWdlcyB0byBsb2FkIGludG8gdGhlIHRleHR1cmVzLiBJZiBpdCdzIGEgc2luZ2xlIHVybAogICAqIHRoZW4gdGhpcyB3aWxsIGJlIGEgc2luZ2xlIEhUTUxJbWFnZUVsZW1lbnQuIElmIGl0J3MgYW4gYXJyYXkgb2YgdXJscyB1c2VkIGZvciBhIGN1YmVtYXAKICAgKiB0aGlzIHdpbGwgYmUgYSBjb3JyZXNwb25kaW5nIGFycmF5IG9mIGltYWdlcyBmb3IgdGhlIGN1YmVtYXAuCiAgICoKICAgKiBAdHlwZWRlZiB7SFRNTEltYWdlRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50W119IFRleHR1cmVTcmMKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogQSBjYWxsYmFjayBmb3Igd2hlbiBhbiBpbWFnZSBmaW5pc2hlZCBkb3dubG9hZGluZyBhbmQgYmVlbiB1cGxvYWRlZCBpbnRvIGEgdGV4dHVyZQogICAqIEBjYWxsYmFjayBUZXh0dXJlUmVhZHlDYWxsYmFjawogICAqIEBwYXJhbSB7Kn0gZXJyIElmIHRydXRoeSB0aGVyZSB3YXMgYW4gZXJyb3IuCiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleHR1cmUgdGhlIHRleHR1cmUuCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlU3JjfSBzb3VyY2UgaW1hZ2UocykgdXNlZCB0byBhcyB0aGUgc3JjIGZvciB0aGUgdGV4dHVyZQogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBBIGNhbGxiYWNrIGZvciB3aGVuIGFsbCBpbWFnZXMgaGF2ZSBmaW5pc2hlZCBkb3dubG9hZGluZyBhbmQgYmVlbiB1cGxvYWRlZCBpbnRvIHRoZWlyIHJlc3BlY3RpdmUgdGV4dHVyZXMKICAgKiBAY2FsbGJhY2sgVGV4dHVyZXNSZWFkeUNhbGxiYWNrCiAgICogQHBhcmFtIHsqfSBlcnIgSWYgdHJ1dGh5IHRoZXJlIHdhcyBhbiBlcnJvci4KICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCBXZWJHTFRleHR1cmU+fSB0ZXh0dXJlcyB0aGUgY3JlYXRlZCB0ZXh0dXJlcyBieSBuYW1lLiBTYW1lIGFzIHJldHVybmVkIGJ5IHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVUZXh0dXJlc30uCiAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuVGV4dHVyZVNyYz59IHNvdXJjZXMgdGhlIGltYWdlKHMpIHVzZWQgZm9yIHRoZSB0ZXh0dXJlIGJ5IG5hbWUuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIEEgY2FsbGJhY2sgZm9yIHdoZW4gYW4gaW1hZ2UgZmluaXNoZWQgZG93bmxvYWRpbmcgYW5kIGJlZW4gdXBsb2FkZWQgaW50byBhIHRleHR1cmUKICAgKiBAY2FsbGJhY2sgQ3ViZW1hcFJlYWR5Q2FsbGJhY2sKICAgKiBAcGFyYW0geyp9IGVyciBJZiB0cnV0aHkgdGhlcmUgd2FzIGFuIGVycm9yLgogICAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIHRleHR1cmUuCiAgICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50W119IGltZ3MgdGhlIGltYWdlcyBmb3IgZWFjaCBmYWNlLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBBIGNhbGxiYWNrIGZvciB3aGVuIGFuIGltYWdlIGZpbmlzaGVkIGRvd25sb2FkaW5nIGFuZCBiZWVuIHVwbG9hZGVkIGludG8gYSB0ZXh0dXJlCiAgICogQGNhbGxiYWNrIFRocmVlRFJlYWR5Q2FsbGJhY2sKICAgKiBAcGFyYW0geyp9IGVyciBJZiB0cnV0aHkgdGhlcmUgd2FzIGFuIGVycm9yLgogICAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIHRleHR1cmUuCiAgICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50W119IGltZ3MgdGhlIGltYWdlcyBmb3IgZWFjaCBzbGljZS4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogTG9hZHMgYSB0ZXh0dXJlIGZyb20gYW4gaW1hZ2UgZnJvbSBhIFVybCBhcyBzcGVjaWZpZWQgaW4gYG9wdGlvbnMuc3JjYAogICAqIElmIGBvcHRpb25zLmNvbG9yICE9PSBmYWxzZWAgd2lsbCBzZXQgdGhlIHRleHR1cmUgdG8gYSAxeDEgcGl4ZWwgY29sb3Igc28gdGhhdCB0aGUgdGV4dHVyZSBpcwogICAqIGltbWVkaWF0ZWx5IHVzZWFibGUuIEl0IHdpbGwgYmUgdXBkYXRlZCB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgaW1hZ2Ugb25jZSB0aGUgaW1hZ2UgaGFzIGZpbmlzaGVkCiAgICogZG93bmxvYWRpbmcuIEZpbHRlcmluZyBvcHRpb25zIHdpbGwgYmUgc2V0IGFzIGFwcHJvcHJpYXRlIGZvciBpbWFnZSB1bmxlc3MgYG9wdGlvbnMuYXV0byA9PT0gZmFsc2VgLgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZVJlYWR5Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgaW1hZ2UgaGFzIGZpbmlzaGVkIGxvYWRpbmcuIGVyciB3aWxsCiAgICogICAgYmUgbm9uIG51bGwgaWYgdGhlcmUgd2FzIGFuIGVycm9yLgogICAqIEByZXR1cm4ge0hUTUxJbWFnZUVsZW1lbnR9IHRoZSBpbWFnZSBiZWluZyBkb3dubG9hZGVkLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIGxvYWRUZXh0dXJlRnJvbVVybChnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjaykgewogICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBub29wOwogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9uczsKICAgIHNldFRleHR1cmVUbzFQaXhlbENvbG9yKGdsLCB0ZXgsIG9wdGlvbnMpOwogICAgLy8gQmVjYXVzZSBpdCdzIGFzeW5jIHdlIG5lZWQgdG8gY29weSB0aGUgb3B0aW9ucy4KICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTsKICAgIGNvbnN0IGltZyA9IGxvYWRBbmRVc2VJbWFnZShvcHRpb25zLnNyYywgb3B0aW9ucy5jcm9zc09yaWdpbiwgZnVuY3Rpb24oZXJyLCBpbWcpIHsKICAgICAgaWYgKGVycikgewogICAgICAgIGNhbGxiYWNrKGVyciwgdGV4LCBpbWcpOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFRleHR1cmVGcm9tRWxlbWVudChnbCwgdGV4LCBpbWcsIG9wdGlvbnMpOwogICAgICAgIGNhbGxiYWNrKG51bGwsIHRleCwgaW1nKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gaW1nOwogIH0KCiAgLyoqCiAgICogTG9hZHMgYSBjdWJlbWFwIGZyb20gNiB1cmxzIG9yIFRleEltYWdlU291cmNlcyBhcyBzcGVjaWZpZWQgaW4gYG9wdGlvbnMuc3JjYC4gV2lsbCBzZXQgdGhlIGN1YmVtYXAgdG8gYSAxeDEgcGl4ZWwgY29sb3IKICAgKiBzbyB0aGF0IGl0IGlzIHVzYWJsZSBpbW1lZGlhdGVseSB1bmxlc3MgYG9wdGlvbi5jb2xvciA9PT0gZmFsc2VgLgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC4KICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLkN1YmVtYXBSZWFkeUNhbGxiYWNrfSBbY2FsbGJhY2tdIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYWxsIHRoZSBpbWFnZXMgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLiBlcnIgd2lsbAogICAqICAgIGJlIG5vbiBudWxsIGlmIHRoZXJlIHdhcyBhbiBlcnJvci4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXMKICAgKiBAcHJpdmF0ZQogICAqLwogIGZ1bmN0aW9uIGxvYWRDdWJlbWFwRnJvbVVybHMoZ2wsIHRleCwgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9vcDsKICAgIGNvbnN0IHVybHMgPSBvcHRpb25zLnNyYzsKICAgIGlmICh1cmxzLmxlbmd0aCAhPT0gNikgewogICAgICB0aHJvdyAidGhlcmUgbXVzdCBiZSA2IHVybHMgZm9yIGEgY3ViZW1hcCI7CiAgICB9CiAgICBjb25zdCBsZXZlbCA9IG9wdGlvbnMubGV2ZWwgfHwgMDsKICAgIGNvbnN0IGludGVybmFsRm9ybWF0ID0gb3B0aW9ucy5pbnRlcm5hbEZvcm1hdCB8fCBvcHRpb25zLmZvcm1hdCB8fCBSR0JBJDE7CiAgICBjb25zdCBmb3JtYXRUeXBlID0gZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0KGludGVybmFsRm9ybWF0KTsKICAgIGNvbnN0IGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8IGZvcm1hdFR5cGUuZm9ybWF0OwogICAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZSB8fCBVTlNJR05FRF9CWVRFJDE7CiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEJDI7CiAgICBpZiAodGFyZ2V0ICE9PSBURVhUVVJFX0NVQkVfTUFQJDEpIHsKICAgICAgdGhyb3cgInRhcmdldCBtdXN0IGJlIFRFWFRVUkVfQ1VCRV9NQVAiOwogICAgfQogICAgc2V0VGV4dHVyZVRvMVBpeGVsQ29sb3IoZ2wsIHRleCwgb3B0aW9ucyk7CiAgICAvLyBCZWNhdXNlIGl0J3MgYXN5bmMgd2UgbmVlZCB0byBjb3B5IHRoZSBvcHRpb25zLgogICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpOwogICAgbGV0IG51bVRvTG9hZCA9IDY7CiAgICBjb25zdCBlcnJvcnMgPSBbXTsKICAgIGNvbnN0IGZhY2VzID0gZ2V0Q3ViZUZhY2VPcmRlcihnbCwgb3B0aW9ucyk7CiAgICBsZXQgaW1nczsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICBmdW5jdGlvbiB1cGxvYWRJbWcoZmFjZVRhcmdldCkgewogICAgICByZXR1cm4gZnVuY3Rpb24oZXJyLCBpbWcpIHsKICAgICAgICAtLW51bVRvTG9hZDsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICBlcnJvcnMucHVzaChlcnIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoaW1nLndpZHRoICE9PSBpbWcuaGVpZ2h0KSB7CiAgICAgICAgICAgIGVycm9ycy5wdXNoKCJjdWJlbWFwIGZhY2UgaW1nIGlzIG5vdCBhIHNxdWFyZTogIiArIGltZy5zcmMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0UGFja1N0YXRlKGdsLCBvcHRpb25zKTsKICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUodGFyZ2V0LCB0ZXgpOwoKICAgICAgICAgICAgLy8gU28gYXNzdW1pbmcgdGhpcyBpcyB0aGUgZmlyc3QgaW1hZ2Ugd2Ugbm93IGhhdmUgb25lIGZhY2UgdGhhdCdzIGltZyBzaXplZAogICAgICAgICAgICAvLyBhbmQgNSBmYWNlcyB0aGF0IGFyZSAxeDEgcGl4ZWwgc28gc2l6ZSB0aGUgb3RoZXIgZmFjZXMKICAgICAgICAgICAgaWYgKG51bVRvTG9hZCA9PT0gNSkgewogICAgICAgICAgICAgIC8vIHVzZSB0aGUgZGVmYXVsdCBvcmRlcgogICAgICAgICAgICAgIGdldEN1YmVGYWNlT3JkZXIoKS5mb3JFYWNoKGZ1bmN0aW9uKG90aGVyVGFyZ2V0KSB7CiAgICAgICAgICAgICAgICAvLyBTaG91bGQgd2UgcmUtdXNlIHRoZSBzYW1lIGZhY2Ugb3IgYSBjb2xvcj8KICAgICAgICAgICAgICAgIGdsLnRleEltYWdlMkQob3RoZXJUYXJnZXQsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgZm9ybWF0LCB0eXBlLCBpbWcpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGdsLnRleEltYWdlMkQoZmFjZVRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIGltZyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzaG91bGRBdXRvbWF0aWNhbGx5U2V0VGV4dHVyZUZpbHRlcmluZ0ZvclNpemUob3B0aW9ucykpIHsKICAgICAgICAgICAgICBnbC5nZW5lcmF0ZU1pcG1hcCh0YXJnZXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobnVtVG9Mb2FkID09PSAwKSB7CiAgICAgICAgICBjYWxsYmFjayhlcnJvcnMubGVuZ3RoID8gZXJyb3JzIDogdW5kZWZpbmVkLCB0ZXgsIGltZ3MpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KCiAgICBpbWdzID0gdXJscy5tYXAoZnVuY3Rpb24odXJsLCBuZHgpIHsKICAgICAgcmV0dXJuIGxvYWRBbmRVc2VJbWFnZSh1cmwsIG9wdGlvbnMuY3Jvc3NPcmlnaW4sIHVwbG9hZEltZyhmYWNlc1tuZHhdKSk7CiAgICB9KTsKICB9CgogIC8qKgogICAqIExvYWRzIGEgMmQgYXJyYXkgb3IgM2QgdGV4dHVyZSBmcm9tIHVybHMgT1IgVGV4SW1hZ2VTb3VyY2VzIGFzIHNwZWNpZmllZCBpbiBgb3B0aW9ucy5zcmNgLgogICAqIFdpbGwgc2V0IHRoZSB0ZXh0dXJlIHRvIGEgMXgxIHBpeGVsIGNvbG9yCiAgICogc28gdGhhdCBpdCBpcyB1c2FibGUgaW1tZWRpYXRlbHkgdW5sZXNzIGBvcHRpb24uY29sb3IgPT09IGZhbHNlYC4KICAgKgogICAqIElmIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IGlzIG5vdCBzcGVjaWZpZWQgdGhlIHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIGZpcnN0CiAgICogaW1hZ2UgbG9hZGVkIHdpbGwgYmUgdXNlZC4gTm90ZSB0aGF0IHNpbmNlIGltYWdlcyBhcmUgbG9hZGVkIGFzeW5jCiAgICogd2hpY2ggaW1hZ2UgZG93bmxvYWRzIGZpcnN0IGlzIHVua25vd24uCiAgICoKICAgKiBJZiBhbiBpbWFnZSBpcyBub3QgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgd2lkdGggYW5kIGhlaWdodCBpdCB3aWxsIGJlIHNjYWxlZAogICAqIHRvIHRoYXQgd2lkdGggYW5kIGhlaWdodC4KICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC4KICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRocmVlRFJlYWR5Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhbGwgdGhlIGltYWdlcyBoYXZlIGZpbmlzaGVkIGxvYWRpbmcuIGVyciB3aWxsCiAgICogICAgYmUgbm9uIG51bGwgaWYgdGhlcmUgd2FzIGFuIGVycm9yLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gbG9hZFNsaWNlc0Zyb21VcmxzKGdsLCB0ZXgsIG9wdGlvbnMsIGNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7CiAgICBjb25zdCB1cmxzID0gb3B0aW9ucy5zcmM7CiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IG9wdGlvbnMuaW50ZXJuYWxGb3JtYXQgfHwgb3B0aW9ucy5mb3JtYXQgfHwgUkdCQSQxOwogICAgY29uc3QgZm9ybWF0VHlwZSA9IGdldEZvcm1hdEFuZFR5cGVGb3JJbnRlcm5hbEZvcm1hdChpbnRlcm5hbEZvcm1hdCk7CiAgICBjb25zdCBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBmb3JtYXRUeXBlLmZvcm1hdDsKICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGUgfHwgVU5TSUdORURfQllURSQxOwogICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgVEVYVFVSRV8yRF9BUlJBWSQxOwogICAgaWYgKHRhcmdldCAhPT0gVEVYVFVSRV8zRCQxICYmIHRhcmdldCAhPT0gVEVYVFVSRV8yRF9BUlJBWSQxKSB7CiAgICAgIHRocm93ICJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFXzNEIG9yIFRFWFRVUkVfMkRfQVJSQVkiOwogICAgfQogICAgc2V0VGV4dHVyZVRvMVBpeGVsQ29sb3IoZ2wsIHRleCwgb3B0aW9ucyk7CiAgICAvLyBCZWNhdXNlIGl0J3MgYXN5bmMgd2UgbmVlZCB0byBjb3B5IHRoZSBvcHRpb25zLgogICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpOwogICAgbGV0IG51bVRvTG9hZCA9IHVybHMubGVuZ3RoOwogICAgY29uc3QgZXJyb3JzID0gW107CiAgICBsZXQgaW1nczsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGNvbnN0IGxldmVsID0gb3B0aW9ucy5sZXZlbCB8fCAwOwogICAgbGV0IHdpZHRoID0gb3B0aW9ucy53aWR0aDsKICAgIGxldCBoZWlnaHQgPSBvcHRpb25zLmhlaWdodDsKICAgIGNvbnN0IGRlcHRoID0gdXJscy5sZW5ndGg7CiAgICBsZXQgZmlyc3RJbWFnZSA9IHRydWU7CgogICAgZnVuY3Rpb24gdXBsb2FkSW1nKHNsaWNlKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbihlcnIsIGltZykgewogICAgICAgIC0tbnVtVG9Mb2FkOwogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGVycm9ycy5wdXNoKGVycik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldFBhY2tTdGF0ZShnbCwgb3B0aW9ucyk7CiAgICAgICAgICBnbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleCk7CgogICAgICAgICAgaWYgKGZpcnN0SW1hZ2UpIHsKICAgICAgICAgICAgZmlyc3RJbWFnZSA9IGZhbHNlOwogICAgICAgICAgICB3aWR0aCA9IG9wdGlvbnMud2lkdGggfHwgaW1nLndpZHRoOwogICAgICAgICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCBpbWcuaGVpZ2h0OwogICAgICAgICAgICBnbC50ZXhJbWFnZTNEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCBkZXB0aCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKTsKCiAgICAgICAgICAgIC8vIHB1dCBpdCBpbiBldmVyeSBzbGljZSBvdGhlcndpc2Ugc29tZSBzbGljZXMgd2lsbCBiZSAwLDAsMCwwCiAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgZGVwdGg7ICsrcykgewogICAgICAgICAgICAgIGdsLnRleFN1YkltYWdlM0QodGFyZ2V0LCBsZXZlbCwgMCwgMCwgcywgd2lkdGgsIGhlaWdodCwgMSwgZm9ybWF0LCB0eXBlLCBpbWcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgc3JjID0gaW1nOwogICAgICAgICAgICBsZXQgY3R4OwogICAgICAgICAgICBpZiAoaW1nLndpZHRoICE9PSB3aWR0aCB8fCBpbWcuaGVpZ2h0ICE9PSBoZWlnaHQpIHsKICAgICAgICAgICAgICAvLyBTaXplIHRoZSBpbWFnZSB0byBmaXgKICAgICAgICAgICAgICBjdHggPSBnZXRTaGFyZWQyRENvbnRleHQoKTsKICAgICAgICAgICAgICBzcmMgPSBjdHguY2FudmFzOwogICAgICAgICAgICAgIGN0eC5jYW52YXMud2lkdGggPSB3aWR0aDsKICAgICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IGhlaWdodDsKICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGdsLnRleFN1YkltYWdlM0QodGFyZ2V0LCBsZXZlbCwgMCwgMCwgc2xpY2UsIHdpZHRoLCBoZWlnaHQsIDEsIGZvcm1hdCwgdHlwZSwgc3JjKTsKCiAgICAgICAgICAgIC8vIGZyZWUgdGhlIGNhbnZhcyBtZW1vcnkKICAgICAgICAgICAgaWYgKGN0eCAmJiBzcmMgPT09IGN0eC5jYW52YXMpIHsKICAgICAgICAgICAgICBjdHguY2FudmFzLndpZHRoID0gMDsKICAgICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpKSB7CiAgICAgICAgICAgIGdsLmdlbmVyYXRlTWlwbWFwKHRhcmdldCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobnVtVG9Mb2FkID09PSAwKSB7CiAgICAgICAgICBjYWxsYmFjayhlcnJvcnMubGVuZ3RoID8gZXJyb3JzIDogdW5kZWZpbmVkLCB0ZXgsIGltZ3MpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KCiAgICBpbWdzID0gdXJscy5tYXAoZnVuY3Rpb24odXJsLCBuZHgpIHsKICAgICAgcmV0dXJuIGxvYWRBbmRVc2VJbWFnZSh1cmwsIG9wdGlvbnMuY3Jvc3NPcmlnaW4sIHVwbG9hZEltZyhuZHgpKTsKICAgIH0pOwogIH0KCiAgLyoqCiAgICogU2V0cyBhIHRleHR1cmUgZnJvbSBhbiBhcnJheSBvciB0eXBlZCBhcnJheS4gSWYgdGhlIHdpZHRoIG9yIGhlaWdodCBpcyBub3QgcHJvdmlkZWQgd2lsbCBhdHRlbXB0IHRvCiAgICogZ3Vlc3MgdGhlIHNpemUuIFNlZSB7QGxpbmsgbW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9LgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvcgogICAqIEBwYXJhbSB7KG51bWJlcltdfEFycmF5QnVmZmVyVmlldyl9IHNyYyBBbiBhcnJheSBvciB0eXBlZCBhcnJ5IHdpdGggdGV4dHVyZSBkYXRhLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqICAgVGhpcyBpcyBvZnRlbiB0aGUgc2FtZSBvcHRpb25zIHlvdSBwYXNzZWQgaW4gd2hlbiB5b3UgY3JlYXRlZCB0aGUgdGV4dHVyZS4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXMKICAgKi8KICBmdW5jdGlvbiBzZXRUZXh0dXJlRnJvbUFycmF5KGdsLCB0ZXgsIHNyYywgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9uczsKICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQkMjsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIGxldCB3aWR0aCA9IG9wdGlvbnMud2lkdGg7CiAgICBsZXQgaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7CiAgICBsZXQgZGVwdGggPSBvcHRpb25zLmRlcHRoOwogICAgY29uc3QgbGV2ZWwgPSBvcHRpb25zLmxldmVsIHx8IDA7CiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IG9wdGlvbnMuaW50ZXJuYWxGb3JtYXQgfHwgb3B0aW9ucy5mb3JtYXQgfHwgUkdCQSQxOwogICAgY29uc3QgZm9ybWF0VHlwZSA9IGdldEZvcm1hdEFuZFR5cGVGb3JJbnRlcm5hbEZvcm1hdChpbnRlcm5hbEZvcm1hdCk7CiAgICBjb25zdCBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBmb3JtYXRUeXBlLmZvcm1hdDsKICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGUgfHwgZ2V0VGV4dHVyZVR5cGVGb3JBcnJheVR5cGUoZ2wsIHNyYywgZm9ybWF0VHlwZS50eXBlKTsKICAgIGlmICghaXNBcnJheUJ1ZmZlcihzcmMpKSB7CiAgICAgIGNvbnN0IFR5cGUgPSBnZXRUeXBlZEFycmF5VHlwZUZvckdMVHlwZSh0eXBlKTsKICAgICAgc3JjID0gbmV3IFR5cGUoc3JjKTsKICAgIH0gZWxzZSBpZiAoc3JjIGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkpIHsKICAgICAgc3JjID0gbmV3IFVpbnQ4QXJyYXkoc3JjLmJ1ZmZlcik7CiAgICB9CgogICAgY29uc3QgYnl0ZXNQZXJFbGVtZW50ID0gZ2V0Qnl0ZXNQZXJFbGVtZW50Rm9ySW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXQsIHR5cGUpOwogICAgY29uc3QgbnVtRWxlbWVudHMgPSBzcmMuYnl0ZUxlbmd0aCAvIGJ5dGVzUGVyRWxlbWVudDsgIC8vIFRPRE86IGNoZWNrIFVOUEFDS19BTElHTk1FTlQ/CiAgICBpZiAobnVtRWxlbWVudHMgJSAxKSB7CiAgICAgIHRocm93ICJsZW5ndGggd3Jvbmcgc2l6ZSBmb3IgZm9ybWF0OiAiICsgZ2xFbnVtVG9TdHJpbmcoZ2wsIGZvcm1hdCk7CiAgICB9CiAgICBsZXQgZGltZW5zaW9uczsKICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QkMSB8fCB0YXJnZXQgPT09IFRFWFRVUkVfMkRfQVJSQVkkMSkgewogICAgICBpZiAoIXdpZHRoICYmICFoZWlnaHQgJiYgIWRlcHRoKSB7CiAgICAgICAgY29uc3Qgc2l6ZSA9IE1hdGguY2JydChudW1FbGVtZW50cyk7CiAgICAgICAgaWYgKHNpemUgJSAxICE9PSAwKSB7CiAgICAgICAgICB0aHJvdyAiY2FuJ3QgZ3Vlc3MgY3ViZSBzaXplIG9mIGFycmF5IG9mIG51bUVsZW1lbnRzOiAiICsgbnVtRWxlbWVudHM7CiAgICAgICAgfQogICAgICAgIHdpZHRoID0gc2l6ZTsKICAgICAgICBoZWlnaHQgPSBzaXplOwogICAgICAgIGRlcHRoID0gc2l6ZTsKICAgICAgfSBlbHNlIGlmICh3aWR0aCAmJiAoIWhlaWdodCB8fCAhZGVwdGgpKSB7CiAgICAgICAgZGltZW5zaW9ucyA9IGd1ZXNzRGltZW5zaW9ucyhnbCwgdGFyZ2V0LCBoZWlnaHQsIGRlcHRoLCBudW1FbGVtZW50cyAvIHdpZHRoKTsKICAgICAgICBoZWlnaHQgPSBkaW1lbnNpb25zLndpZHRoOwogICAgICAgIGRlcHRoID0gZGltZW5zaW9ucy5oZWlnaHQ7CiAgICAgIH0gZWxzZSBpZiAoaGVpZ2h0ICYmICghd2lkdGggfHwgIWRlcHRoKSkgewogICAgICAgIGRpbWVuc2lvbnMgPSBndWVzc0RpbWVuc2lvbnMoZ2wsIHRhcmdldCwgd2lkdGgsIGRlcHRoLCBudW1FbGVtZW50cyAvIGhlaWdodCk7CiAgICAgICAgd2lkdGggPSBkaW1lbnNpb25zLndpZHRoOwogICAgICAgIGRlcHRoID0gZGltZW5zaW9ucy5oZWlnaHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGltZW5zaW9ucyA9IGd1ZXNzRGltZW5zaW9ucyhnbCwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0LCBudW1FbGVtZW50cyAvIGRlcHRoKTsKICAgICAgICB3aWR0aCA9IGRpbWVuc2lvbnMud2lkdGg7CiAgICAgICAgaGVpZ2h0ID0gZGltZW5zaW9ucy5oZWlnaHQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGRpbWVuc2lvbnMgPSBndWVzc0RpbWVuc2lvbnMoZ2wsIHRhcmdldCwgd2lkdGgsIGhlaWdodCwgbnVtRWxlbWVudHMpOwogICAgICB3aWR0aCA9IGRpbWVuc2lvbnMud2lkdGg7CiAgICAgIGhlaWdodCA9IGRpbWVuc2lvbnMuaGVpZ2h0OwogICAgfQogICAgc2V0U2tpcFN0YXRlVG9EZWZhdWx0KGdsKTsKICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19BTElHTk1FTlQsIG9wdGlvbnMudW5wYWNrQWxpZ25tZW50IHx8IDEpOwogICAgc2V0UGFja1N0YXRlKGdsLCBvcHRpb25zKTsKICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSkgewogICAgICBjb25zdCBlbGVtZW50c1BlckVsZW1lbnQgPSBieXRlc1BlckVsZW1lbnQgLyBzcmMuQllURVNfUEVSX0VMRU1FTlQ7CiAgICAgIGNvbnN0IGZhY2VTaXplID0gbnVtRWxlbWVudHMgLyA2ICogZWxlbWVudHNQZXJFbGVtZW50OwoKICAgICAgZ2V0Q3ViZUZhY2VzV2l0aE5keChnbCwgb3B0aW9ucykuZm9yRWFjaChmID0+IHsKICAgICAgICBjb25zdCBvZmZzZXQgPSBmYWNlU2l6ZSAqIGYubmR4OwogICAgICAgIGNvbnN0IGRhdGEgPSBzcmMuc3ViYXJyYXkob2Zmc2V0LCBvZmZzZXQgKyBmYWNlU2l6ZSk7CiAgICAgICAgZ2wudGV4SW1hZ2UyRChmLmZhY2UsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCBkYXRhKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gVEVYVFVSRV8zRCQxIHx8IHRhcmdldCA9PT0gVEVYVFVSRV8yRF9BUlJBWSQxKSB7CiAgICAgIGdsLnRleEltYWdlM0QodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIHdpZHRoLCBoZWlnaHQsIGRlcHRoLCAwLCBmb3JtYXQsIHR5cGUsIHNyYyk7CiAgICB9IGVsc2UgewogICAgICBnbC50ZXhJbWFnZTJEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIHNyYyk7CiAgICB9CiAgICByZXR1cm4gewogICAgICB3aWR0aDogd2lkdGgsCiAgICAgIGhlaWdodDogaGVpZ2h0LAogICAgICBkZXB0aDogZGVwdGgsCiAgICAgIHR5cGU6IHR5cGUsCiAgICB9OwogIH0KCiAgLyoqCiAgICogU2V0cyBhIHRleHR1cmUgd2l0aCBubyBjb250ZW50cyBvZiBhIGNlcnRhaW4gc2l6ZS4gSW4gb3RoZXIgd29yZHMgY2FsbHMgYGdsLnRleEltYWdlMkRgIHdpdGggYG51bGxgLgogICAqIFlvdSBtdXN0IHNldCBgb3B0aW9ucy53aWR0aGAgYW5kIGBvcHRpb25zLmhlaWdodGAuCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSBXZWJHTFRleHR1cmUgdG8gc2V0IHBhcmFtZXRlcnMgZm9yCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gb3B0aW9ucyBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlcwogICAqLwogIGZ1bmN0aW9uIHNldEVtcHR5VGV4dHVyZShnbCwgdGV4LCBvcHRpb25zKSB7CiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEJDI7CiAgICBnbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleCk7CiAgICBjb25zdCBsZXZlbCA9IG9wdGlvbnMubGV2ZWwgfHwgMDsKICAgIGNvbnN0IGludGVybmFsRm9ybWF0ID0gb3B0aW9ucy5pbnRlcm5hbEZvcm1hdCB8fCBvcHRpb25zLmZvcm1hdCB8fCBSR0JBJDE7CiAgICBjb25zdCBmb3JtYXRUeXBlID0gZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0KGludGVybmFsRm9ybWF0KTsKICAgIGNvbnN0IGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8IGZvcm1hdFR5cGUuZm9ybWF0OwogICAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZSB8fCBmb3JtYXRUeXBlLnR5cGU7CiAgICBzZXRQYWNrU3RhdGUoZ2wsIG9wdGlvbnMpOwogICAgaWYgKHRhcmdldCA9PT0gVEVYVFVSRV9DVUJFX01BUCQxKSB7CiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCA2OyArK2lpKSB7CiAgICAgICAgZ2wudGV4SW1hZ2UyRChURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpaSwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QkMSB8fCB0YXJnZXQgPT09IFRFWFRVUkVfMkRfQVJSQVkkMSkgewogICAgICBnbC50ZXhJbWFnZTNEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCwgb3B0aW9ucy5kZXB0aCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKTsKICAgIH0gZWxzZSB7CiAgICAgIGdsLnRleEltYWdlMkQodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIG9wdGlvbnMud2lkdGgsIG9wdGlvbnMuaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIG51bGwpOwogICAgfQogIH0KCiAgLyoqCiAgICogQ3JlYXRlcyBhIHRleHR1cmUgYmFzZWQgb24gdGhlIG9wdGlvbnMgcGFzc2VkIGluLgogICAqCiAgICogTm90ZTogbWF5IHJlc2V0IFVOUEFDS19BTElHTk1FTlQsIFVOUEFDS19ST1dfTEVOR1RILCBVTlBBQ0tfSU1BR0VfSEVJR0hULCBVTlBBQ0tfU0tJUF9JTUFHRVMKICAgKiBVTlBBQ0tfU0tJUF9QSVhFTFMsIGFuZCBVTlBBQ0tfU0tJUF9ST1dTCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZVJlYWR5Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhbiBpbWFnZSBoYXMgYmVlbiBkb3dubG9hZGVkIGFuZCB1cGxvYWRlZCB0byB0aGUgdGV4dHVyZS4KICAgKiBAcmV0dXJuIHtXZWJHTFRleHR1cmV9IHRoZSBjcmVhdGVkIHRleHR1cmUuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlVGV4dHVyZShnbCwgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9vcDsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzJDEudGV4dHVyZU9wdGlvbnM7CiAgICBjb25zdCB0ZXggPSBnbC5jcmVhdGVUZXh0dXJlKCk7CiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEJDI7CiAgICBsZXQgd2lkdGggID0gb3B0aW9ucy53aWR0aCAgfHwgMTsKICAgIGxldCBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCAxOwogICAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBvcHRpb25zLmludGVybmFsRm9ybWF0IHx8IFJHQkEkMTsKICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTsKICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSkgewogICAgICAvLyB0aGlzIHNob3VsZCBoYXZlIGJlZW4gdGhlIGRlZmF1bHQgZm9yIGN1YmVtYXBzIDooCiAgICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX1dSQVBfUywgQ0xBTVBfVE9fRURHRSQxKTsKICAgICAgZ2wudGV4UGFyYW1ldGVyaSh0YXJnZXQsIFRFWFRVUkVfV1JBUF9ULCBDTEFNUF9UT19FREdFJDEpOwogICAgfQogICAgbGV0IHNyYyA9IG9wdGlvbnMuc3JjOwogICAgaWYgKHNyYykgewogICAgICBpZiAodHlwZW9mIHNyYyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIHNyYyA9IHNyYyhnbCwgb3B0aW9ucyk7CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiAoc3JjKSA9PT0gInN0cmluZyIpIHsKICAgICAgICBsb2FkVGV4dHVyZUZyb21VcmwoZ2wsIHRleCwgb3B0aW9ucywgY2FsbGJhY2spOwogICAgICB9IGVsc2UgaWYgKGlzQXJyYXlCdWZmZXIoc3JjKSB8fAogICAgICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KHNyYykgJiYgKAogICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHNyY1swXSA9PT0gJ251bWJlcicgfHwKICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoc3JjWzBdKSB8fAogICAgICAgICAgICAgICAgICAgICAgaXNBcnJheUJ1ZmZlcihzcmNbMF0pKQogICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkgewogICAgICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBzZXRUZXh0dXJlRnJvbUFycmF5KGdsLCB0ZXgsIHNyYywgb3B0aW9ucyk7CiAgICAgICAgd2lkdGggID0gZGltZW5zaW9ucy53aWR0aDsKICAgICAgICBoZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodDsKICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNyYykgJiYgKHR5cGVvZiAoc3JjWzBdKSA9PT0gJ3N0cmluZycgfHwgaXNUZXhJbWFnZVNvdXJjZShzcmNbMF0pKSkgewogICAgICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVAkMSkgewogICAgICAgICAgbG9hZEN1YmVtYXBGcm9tVXJscyhnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjayk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxvYWRTbGljZXNGcm9tVXJscyhnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjayk7CiAgICAgICAgfQogICAgICB9IGVsc2UgeyAvLyBpZiAoaXNUZXhJbWFnZVNvdXJjZShzcmMpKQogICAgICAgIHNldFRleHR1cmVGcm9tRWxlbWVudChnbCwgdGV4LCBzcmMsIG9wdGlvbnMpOwogICAgICAgIHdpZHRoICA9IHNyYy53aWR0aDsKICAgICAgICBoZWlnaHQgPSBzcmMuaGVpZ2h0OwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzZXRFbXB0eVRleHR1cmUoZ2wsIHRleCwgb3B0aW9ucyk7CiAgICB9CiAgICBpZiAoc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpKSB7CiAgICAgIHNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKGdsLCB0ZXgsIG9wdGlvbnMsIHdpZHRoLCBoZWlnaHQsIGludGVybmFsRm9ybWF0KTsKICAgIH0KICAgIHNldFRleHR1cmVQYXJhbWV0ZXJzKGdsLCB0ZXgsIG9wdGlvbnMpOwogICAgcmV0dXJuIHRleDsKICB9CgogIC8qCiAgICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlcwogICAqCiAgICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAogICAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KICAgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKICAgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKICAgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAqCiAgICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICAgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgKgogICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCiAgICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwogICAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKICAgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAgICovCgogIC8qKgogICAqIExvdyBsZXZlbCBzaGFkZXIgcHJvZ3JhbSByZWxhdGVkIGZ1bmN0aW9ucwogICAqCiAgICogWW91IHNob3VsZCBnZW5lcmFsbHkgbm90IG5lZWQgdG8gdXNlIHRoZXNlIGZ1bmN0aW9ucy4gVGhleSBhcmUgcHJvdmlkZWQKICAgKiBmb3IgdGhvc2UgY2FzZXMgd2hlcmUgeW91J3JlIGRvaW5nIHNvbWV0aGluZyBvdXQgb2YgdGhlIG9yZGluYXJ5CiAgICogYW5kIHlvdSBuZWVkIGxvd2VyIGxldmVsIGFjY2Vzcy4KICAgKgogICAqIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHRoZXkgYXJlIGF2YWlsYWJsZSBhdCBib3RoIGB0d2dsLnByb2dyYW1zYCBhbmQgYHR3Z2xgCiAgICogaXRzZWxmCiAgICoKICAgKiBTZWUge0BsaW5rIG1vZHVsZTp0d2dsfSBmb3IgY29yZSBmdW5jdGlvbnMKICAgKgogICAqIEBtb2R1bGUgdHdnbC9wcm9ncmFtcwogICAqLwoKICBjb25zdCBlcnJvciA9IGVycm9yJDE7CiAgZnVuY3Rpb24gZ2V0RWxlbWVudEJ5SWQoaWQpIHsKICAgIHJldHVybiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCkKICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKQogICAgICAgIDogbnVsbDsKICB9CgogIGNvbnN0IFRFWFRVUkUwICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODRjMDsKCiAgY29uc3QgQVJSQVlfQlVGRkVSICAgICAgICAgICAgICAgICAgID0gMHg4ODkyOwogIGNvbnN0IEVMRU1FTlRfQVJSQVlfQlVGRkVSJDEgICAgICAgICAgID0gMHg4ODkzOwoKICBjb25zdCBDT01QSUxFX1NUQVRVUyAgICAgICAgICAgICAgICAgPSAweDhiODE7CiAgY29uc3QgTElOS19TVEFUVVMgICAgICAgICAgICAgICAgICAgID0gMHg4YjgyOwogIGNvbnN0IEZSQUdNRU5UX1NIQURFUiAgICAgICAgICAgICAgICA9IDB4OGIzMDsKICBjb25zdCBWRVJURVhfU0hBREVSICAgICAgICAgICAgICAgICAgPSAweDhiMzE7CiAgY29uc3QgU0VQQVJBVEVfQVRUUklCUyAgICAgICAgICAgICAgID0gMHg4YzhkOwoKICBjb25zdCBBQ1RJVkVfVU5JRk9STVMgICAgICAgICAgICAgICAgPSAweDhiODY7CiAgY29uc3QgQUNUSVZFX0FUVFJJQlVURVMgICAgICAgICAgICAgID0gMHg4Yjg5OwogIGNvbnN0IFRSQU5TRk9STV9GRUVEQkFDS19WQVJZSU5HUyAgICA9IDB4OGM4MzsKICBjb25zdCBBQ1RJVkVfVU5JRk9STV9CTE9DS1MgICAgICAgICAgPSAweDhhMzY7CiAgY29uc3QgVU5JRk9STV9CTE9DS19SRUZFUkVOQ0VEX0JZX1ZFUlRFWF9TSEFERVIgICA9IDB4OGE0NDsKICBjb25zdCBVTklGT1JNX0JMT0NLX1JFRkVSRU5DRURfQllfRlJBR01FTlRfU0hBREVSID0gMHg4YTQ2OwogIGNvbnN0IFVOSUZPUk1fQkxPQ0tfREFUQV9TSVpFICAgICAgICAgICAgICAgICAgICAgPSAweDhhNDA7CiAgY29uc3QgVU5JRk9STV9CTE9DS19BQ1RJVkVfVU5JRk9STV9JTkRJQ0VTICAgICAgICA9IDB4OGE0MzsKCiAgY29uc3QgRkxPQVQgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDY7CiAgY29uc3QgRkxPQVRfVkVDMiAgICAgICAgICAgICAgICAgICAgPSAweDhCNTA7CiAgY29uc3QgRkxPQVRfVkVDMyAgICAgICAgICAgICAgICAgICAgPSAweDhCNTE7CiAgY29uc3QgRkxPQVRfVkVDNCAgICAgICAgICAgICAgICAgICAgPSAweDhCNTI7CiAgY29uc3QgSU5UICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDQ7CiAgY29uc3QgSU5UX1ZFQzIgICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTM7CiAgY29uc3QgSU5UX1ZFQzMgICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTQ7CiAgY29uc3QgSU5UX1ZFQzQgICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTU7CiAgY29uc3QgQk9PTCAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTY7CiAgY29uc3QgQk9PTF9WRUMyICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTc7CiAgY29uc3QgQk9PTF9WRUMzICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTg7CiAgY29uc3QgQk9PTF9WRUM0ICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTk7CiAgY29uc3QgRkxPQVRfTUFUMiAgICAgICAgICAgICAgICAgICAgPSAweDhCNUE7CiAgY29uc3QgRkxPQVRfTUFUMyAgICAgICAgICAgICAgICAgICAgPSAweDhCNUI7CiAgY29uc3QgRkxPQVRfTUFUNCAgICAgICAgICAgICAgICAgICAgPSAweDhCNUM7CiAgY29uc3QgU0FNUExFUl8yRCAgICAgICAgICAgICAgICAgICAgPSAweDhCNUU7CiAgY29uc3QgU0FNUExFUl9DVUJFICAgICAgICAgICAgICAgICAgPSAweDhCNjA7CiAgY29uc3QgU0FNUExFUl8zRCAgICAgICAgICAgICAgICAgICAgPSAweDhCNUY7CiAgY29uc3QgU0FNUExFUl8yRF9TSEFET1cgICAgICAgICAgICAgPSAweDhCNjI7CiAgY29uc3QgRkxPQVRfTUFUMngzICAgICAgICAgICAgICAgICAgPSAweDhCNjU7CiAgY29uc3QgRkxPQVRfTUFUMng0ICAgICAgICAgICAgICAgICAgPSAweDhCNjY7CiAgY29uc3QgRkxPQVRfTUFUM3gyICAgICAgICAgICAgICAgICAgPSAweDhCNjc7CiAgY29uc3QgRkxPQVRfTUFUM3g0ICAgICAgICAgICAgICAgICAgPSAweDhCNjg7CiAgY29uc3QgRkxPQVRfTUFUNHgyICAgICAgICAgICAgICAgICAgPSAweDhCNjk7CiAgY29uc3QgRkxPQVRfTUFUNHgzICAgICAgICAgICAgICAgICAgPSAweDhCNkE7CiAgY29uc3QgU0FNUExFUl8yRF9BUlJBWSAgICAgICAgICAgICAgPSAweDhEQzE7CiAgY29uc3QgU0FNUExFUl8yRF9BUlJBWV9TSEFET1cgICAgICAgPSAweDhEQzQ7CiAgY29uc3QgU0FNUExFUl9DVUJFX1NIQURPVyAgICAgICAgICAgPSAweDhEQzU7CiAgY29uc3QgVU5TSUdORURfSU5UICAgICAgICAgICAgICAgICAgPSAweDE0MDU7CiAgY29uc3QgVU5TSUdORURfSU5UX1ZFQzIgICAgICAgICAgICAgPSAweDhEQzY7CiAgY29uc3QgVU5TSUdORURfSU5UX1ZFQzMgICAgICAgICAgICAgPSAweDhEQzc7CiAgY29uc3QgVU5TSUdORURfSU5UX1ZFQzQgICAgICAgICAgICAgPSAweDhEQzg7CiAgY29uc3QgSU5UX1NBTVBMRVJfMkQgICAgICAgICAgICAgICAgPSAweDhEQ0E7CiAgY29uc3QgSU5UX1NBTVBMRVJfM0QgICAgICAgICAgICAgICAgPSAweDhEQ0I7CiAgY29uc3QgSU5UX1NBTVBMRVJfQ1VCRSAgICAgICAgICAgICAgPSAweDhEQ0M7CiAgY29uc3QgSU5UX1NBTVBMRVJfMkRfQVJSQVkgICAgICAgICAgPSAweDhEQ0Y7CiAgY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfMkQgICAgICAgPSAweDhERDI7CiAgY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfM0QgICAgICAgPSAweDhERDM7CiAgY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfQ1VCRSAgICAgPSAweDhERDQ7CiAgY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfMkRfQVJSQVkgPSAweDhERDc7CgogIGNvbnN0IFRFWFRVUkVfMkQkMSAgICAgICAgICAgICAgICAgICAgPSAweDBERTE7CiAgY29uc3QgVEVYVFVSRV9DVUJFX01BUCAgICAgICAgICAgICAgPSAweDg1MTM7CiAgY29uc3QgVEVYVFVSRV8zRCAgICAgICAgICAgICAgICAgICAgPSAweDgwNkY7CiAgY29uc3QgVEVYVFVSRV8yRF9BUlJBWSAgICAgICAgICAgICAgPSAweDhDMUE7CgogIGNvbnN0IHR5cGVNYXAgPSB7fTsKCiAgLyoqCiAgICogUmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBiaW5kIHBvaW50IGZvciBhIGdpdmVuIHNhbXBsZXIgdHlwZQogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gZ2V0QmluZFBvaW50Rm9yU2FtcGxlclR5cGUoZ2wsIHR5cGUpIHsKICAgIHJldHVybiB0eXBlTWFwW3R5cGVdLmJpbmRQb2ludDsKICB9CgogIC8vIFRoaXMga2luZCBvZiBzdWNrcyEgSWYgeW91IGNvdWxkIGNvbXBvc2UgZnVuY3Rpb25zIGFzIGluIGB2YXIgZm4gPSBnbFtuYW1lXTtgCiAgLy8gdGhpcyBjb2RlIGNvdWxkIGJlIGEgbG90IHNtYWxsZXIgYnV0IHRoYXQgaXMgc2FkbHkgcmVhbGx5IHNsb3cgKFRfVCkKCiAgZnVuY3Rpb24gZmxvYXRTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtMWYobG9jYXRpb24sIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGZsb2F0QXJyYXlTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtMWZ2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdFZlYzJTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtMmZ2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdFZlYzNTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtM2Z2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdFZlYzRTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtNGZ2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBpbnRTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtMWkobG9jYXRpb24sIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGludEFycmF5U2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gaW50VmVjMlNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0yaXYobG9jYXRpb24sIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGludFZlYzNTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtM2l2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBpbnRWZWM0U2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybTRpdihsb2NhdGlvbiwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gdWludFNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0xdWkobG9jYXRpb24sIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIHVpbnRBcnJheVNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0xdWl2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB1aW50VmVjMlNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0ydWl2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB1aW50VmVjM1NldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm0zdWl2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB1aW50VmVjNFNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm00dWl2KGxvY2F0aW9uLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdE1hdDJTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtTWF0cml4MmZ2KGxvY2F0aW9uLCBmYWxzZSwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gZmxvYXRNYXQzU2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybU1hdHJpeDNmdihsb2NhdGlvbiwgZmFsc2UsIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGZsb2F0TWF0NFNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb24sIGZhbHNlLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdE1hdDIzU2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybU1hdHJpeDJ4M2Z2KGxvY2F0aW9uLCBmYWxzZSwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gZmxvYXRNYXQzMlNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm1NYXRyaXgzeDJmdihsb2NhdGlvbiwgZmFsc2UsIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGZsb2F0TWF0MjRTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtTWF0cml4Mng0ZnYobG9jYXRpb24sIGZhbHNlLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBmbG9hdE1hdDQyU2V0dGVyKGdsLCBsb2NhdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHsKICAgICAgZ2wudW5pZm9ybU1hdHJpeDR4MmZ2KGxvY2F0aW9uLCBmYWxzZSwgdik7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gZmxvYXRNYXQzNFNldHRlcihnbCwgbG9jYXRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbih2KSB7CiAgICAgIGdsLnVuaWZvcm1NYXRyaXgzeDRmdihsb2NhdGlvbiwgZmFsc2UsIHYpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGZsb2F0TWF0NDNTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odikgewogICAgICBnbC51bmlmb3JtTWF0cml4NHgzZnYobG9jYXRpb24sIGZhbHNlLCB2KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBzYW1wbGVyU2V0dGVyKGdsLCB0eXBlLCB1bml0LCBsb2NhdGlvbikgewogICAgY29uc3QgYmluZFBvaW50ID0gZ2V0QmluZFBvaW50Rm9yU2FtcGxlclR5cGUoZ2wsIHR5cGUpOwogICAgcmV0dXJuIGlzV2ViR0wyKGdsKSA/IGZ1bmN0aW9uKHRleHR1cmVPclBhaXIpIHsKICAgICAgbGV0IHRleHR1cmU7CiAgICAgIGxldCBzYW1wbGVyOwogICAgICBpZiAoIXRleHR1cmVPclBhaXIgfHwgaXNUZXh0dXJlKGdsLCB0ZXh0dXJlT3JQYWlyKSkgewogICAgICAgIHRleHR1cmUgPSB0ZXh0dXJlT3JQYWlyOwogICAgICAgIHNhbXBsZXIgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRleHR1cmUgPSB0ZXh0dXJlT3JQYWlyLnRleHR1cmU7CiAgICAgICAgc2FtcGxlciA9IHRleHR1cmVPclBhaXIuc2FtcGxlcjsKICAgICAgfQogICAgICBnbC51bmlmb3JtMWkobG9jYXRpb24sIHVuaXQpOwogICAgICBnbC5hY3RpdmVUZXh0dXJlKFRFWFRVUkUwICsgdW5pdCk7CiAgICAgIGdsLmJpbmRUZXh0dXJlKGJpbmRQb2ludCwgdGV4dHVyZSk7CiAgICAgIGdsLmJpbmRTYW1wbGVyKHVuaXQsIHNhbXBsZXIpOwogICAgfSA6IGZ1bmN0aW9uKHRleHR1cmUpIHsKICAgICAgZ2wudW5pZm9ybTFpKGxvY2F0aW9uLCB1bml0KTsKICAgICAgZ2wuYWN0aXZlVGV4dHVyZShURVhUVVJFMCArIHVuaXQpOwogICAgICBnbC5iaW5kVGV4dHVyZShiaW5kUG9pbnQsIHRleHR1cmUpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIHNhbXBsZXJBcnJheVNldHRlcihnbCwgdHlwZSwgdW5pdCwgbG9jYXRpb24sIHNpemUpIHsKICAgIGNvbnN0IGJpbmRQb2ludCA9IGdldEJpbmRQb2ludEZvclNhbXBsZXJUeXBlKGdsLCB0eXBlKTsKICAgIGNvbnN0IHVuaXRzID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgc2l6ZTsgKytpaSkgewogICAgICB1bml0c1tpaV0gPSB1bml0ICsgaWk7CiAgICB9CgogICAgcmV0dXJuIGlzV2ViR0wyKGdsKSA/IGZ1bmN0aW9uKHRleHR1cmVzKSB7CiAgICAgIGdsLnVuaWZvcm0xaXYobG9jYXRpb24sIHVuaXRzKTsKICAgICAgdGV4dHVyZXMuZm9yRWFjaChmdW5jdGlvbih0ZXh0dXJlT3JQYWlyLCBpbmRleCkgewogICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoVEVYVFVSRTAgKyB1bml0c1tpbmRleF0pOwogICAgICAgIGxldCB0ZXh0dXJlOwogICAgICAgIGxldCBzYW1wbGVyOwogICAgICAgIGlmICghdGV4dHVyZU9yUGFpciB8fCBpc1RleHR1cmUoZ2wsIHRleHR1cmVPclBhaXIpKSB7CiAgICAgICAgICB0ZXh0dXJlID0gdGV4dHVyZU9yUGFpcjsKICAgICAgICAgIHNhbXBsZXIgPSBudWxsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZXh0dXJlID0gdGV4dHVyZU9yUGFpci50ZXh0dXJlOwogICAgICAgICAgc2FtcGxlciA9IHRleHR1cmVPclBhaXIuc2FtcGxlcjsKICAgICAgICB9CiAgICAgICAgZ2wuYmluZFNhbXBsZXIodW5pdCwgc2FtcGxlcik7CiAgICAgICAgZ2wuYmluZFRleHR1cmUoYmluZFBvaW50LCB0ZXh0dXJlKTsKICAgICAgfSk7CiAgICB9IDogZnVuY3Rpb24odGV4dHVyZXMpIHsKICAgICAgZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdW5pdHMpOwogICAgICB0ZXh0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHRleHR1cmUsIGluZGV4KSB7CiAgICAgICAgZ2wuYWN0aXZlVGV4dHVyZShURVhUVVJFMCArIHVuaXRzW2luZGV4XSk7CiAgICAgICAgZ2wuYmluZFRleHR1cmUoYmluZFBvaW50LCB0ZXh0dXJlKTsKICAgICAgfSk7CiAgICB9OwogIH0KCiAgdHlwZU1hcFtGTE9BVF0gICAgICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogIDQsIHNldHRlcjogZmxvYXRTZXR0ZXIsICAgICAgYXJyYXlTZXR0ZXI6IGZsb2F0QXJyYXlTZXR0ZXIsIH07CiAgdHlwZU1hcFtGTE9BVF9WRUMyXSAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogIDgsIHNldHRlcjogZmxvYXRWZWMyU2V0dGVyLCAgY29sczogMiwgfTsKICB0eXBlTWFwW0ZMT0FUX1ZFQzNdICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiAxMiwgc2V0dGVyOiBmbG9hdFZlYzNTZXR0ZXIsICBjb2xzOiAzLCB9OwogIHR5cGVNYXBbRkxPQVRfVkVDNF0gICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDE2LCBzZXR0ZXI6IGZsb2F0VmVjNFNldHRlciwgIGNvbHM6IDQsIH07CiAgdHlwZU1hcFtJTlRdICAgICAgICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEludDMyQXJyYXksICAgc2l6ZTogIDQsIHNldHRlcjogaW50U2V0dGVyLCAgICAgICAgYXJyYXlTZXR0ZXI6IGludEFycmF5U2V0dGVyLCB9OwogIHR5cGVNYXBbSU5UX1ZFQzJdICAgICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBJbnQzMkFycmF5LCAgIHNpemU6ICA4LCBzZXR0ZXI6IGludFZlYzJTZXR0ZXIsICAgIGNvbHM6IDIsIH07CiAgdHlwZU1hcFtJTlRfVkVDM10gICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEludDMyQXJyYXksICAgc2l6ZTogMTIsIHNldHRlcjogaW50VmVjM1NldHRlciwgICAgY29sczogMywgfTsKICB0eXBlTWFwW0lOVF9WRUM0XSAgICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogSW50MzJBcnJheSwgICBzaXplOiAxNiwgc2V0dGVyOiBpbnRWZWM0U2V0dGVyLCAgICBjb2xzOiA0LCB9OwogIHR5cGVNYXBbVU5TSUdORURfSU5UXSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBVaW50MzJBcnJheSwgIHNpemU6ICA0LCBzZXR0ZXI6IHVpbnRTZXR0ZXIsICAgICAgIGFycmF5U2V0dGVyOiB1aW50QXJyYXlTZXR0ZXIsIH07CiAgdHlwZU1hcFtVTlNJR05FRF9JTlRfVkVDMl0gICAgICAgICAgICAgPSB7IFR5cGU6IFVpbnQzMkFycmF5LCAgc2l6ZTogIDgsIHNldHRlcjogdWludFZlYzJTZXR0ZXIsICAgY29sczogMiwgfTsKICB0eXBlTWFwW1VOU0lHTkVEX0lOVF9WRUMzXSAgICAgICAgICAgICA9IHsgVHlwZTogVWludDMyQXJyYXksICBzaXplOiAxMiwgc2V0dGVyOiB1aW50VmVjM1NldHRlciwgICBjb2xzOiAzLCB9OwogIHR5cGVNYXBbVU5TSUdORURfSU5UX1ZFQzRdICAgICAgICAgICAgID0geyBUeXBlOiBVaW50MzJBcnJheSwgIHNpemU6IDE2LCBzZXR0ZXI6IHVpbnRWZWM0U2V0dGVyLCAgIGNvbHM6IDQsIH07CiAgdHlwZU1hcFtCT09MXSAgICAgICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IFVpbnQzMkFycmF5LCAgc2l6ZTogIDQsIHNldHRlcjogaW50U2V0dGVyLCAgICAgICAgYXJyYXlTZXR0ZXI6IGludEFycmF5U2V0dGVyLCB9OwogIHR5cGVNYXBbQk9PTF9WRUMyXSAgICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBVaW50MzJBcnJheSwgIHNpemU6ICA4LCBzZXR0ZXI6IGludFZlYzJTZXR0ZXIsICAgIGNvbHM6IDIsIH07CiAgdHlwZU1hcFtCT09MX1ZFQzNdICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IFVpbnQzMkFycmF5LCAgc2l6ZTogMTIsIHNldHRlcjogaW50VmVjM1NldHRlciwgICAgY29sczogMywgfTsKICB0eXBlTWFwW0JPT0xfVkVDNF0gICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogVWludDMyQXJyYXksICBzaXplOiAxNiwgc2V0dGVyOiBpbnRWZWM0U2V0dGVyLCAgICBjb2xzOiA0LCB9OwogIHR5cGVNYXBbRkxPQVRfTUFUMl0gICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDMyLCBzZXR0ZXI6IGZsb2F0TWF0MlNldHRlciwgIHJvd3M6IDIsIGNvbHM6IDIsIH07CiAgdHlwZU1hcFtGTE9BVF9NQVQzXSAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogNDgsIHNldHRlcjogZmxvYXRNYXQzU2V0dGVyLCAgcm93czogMywgY29sczogMywgfTsKICB0eXBlTWFwW0ZMT0FUX01BVDRdICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiA2NCwgc2V0dGVyOiBmbG9hdE1hdDRTZXR0ZXIsICByb3dzOiA0LCBjb2xzOiA0LCB9OwogIHR5cGVNYXBbRkxPQVRfTUFUMngzXSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDMyLCBzZXR0ZXI6IGZsb2F0TWF0MjNTZXR0ZXIsIHJvd3M6IDIsIGNvbHM6IDMsIH07CiAgdHlwZU1hcFtGTE9BVF9NQVQyeDRdICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogMzIsIHNldHRlcjogZmxvYXRNYXQyNFNldHRlciwgcm93czogMiwgY29sczogNCwgfTsKICB0eXBlTWFwW0ZMT0FUX01BVDN4Ml0gICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiA0OCwgc2V0dGVyOiBmbG9hdE1hdDMyU2V0dGVyLCByb3dzOiAzLCBjb2xzOiAyLCB9OwogIHR5cGVNYXBbRkxPQVRfTUFUM3g0XSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDQ4LCBzZXR0ZXI6IGZsb2F0TWF0MzRTZXR0ZXIsIHJvd3M6IDMsIGNvbHM6IDQsIH07CiAgdHlwZU1hcFtGTE9BVF9NQVQ0eDJdICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogNjQsIHNldHRlcjogZmxvYXRNYXQ0MlNldHRlciwgcm93czogNCwgY29sczogMiwgfTsKICB0eXBlTWFwW0ZMT0FUX01BVDR4M10gICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiA2NCwgc2V0dGVyOiBmbG9hdE1hdDQzU2V0dGVyLCByb3dzOiA0LCBjb2xzOiAzLCB9OwogIHR5cGVNYXBbU0FNUExFUl8yRF0gICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV8yRCQxLCAgICAgICB9OwogIHR5cGVNYXBbU0FNUExFUl9DVUJFXSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV9DVUJFX01BUCwgfTsKICB0eXBlTWFwW1NBTVBMRVJfM0RdICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfM0QsICAgICAgIH07CiAgdHlwZU1hcFtTQU1QTEVSXzJEX1NIQURPV10gICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEJDEsICAgICAgIH07CiAgdHlwZU1hcFtTQU1QTEVSXzJEX0FSUkFZXSAgICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEX0FSUkFZLCB9OwogIHR5cGVNYXBbU0FNUExFUl8yRF9BUlJBWV9TSEFET1ddICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV8yRF9BUlJBWSwgfTsKICB0eXBlTWFwW1NBTVBMRVJfQ1VCRV9TSEFET1ddICAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfQ1VCRV9NQVAsIH07CiAgdHlwZU1hcFtJTlRfU0FNUExFUl8yRF0gICAgICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEJDEsICAgICAgIH07CiAgdHlwZU1hcFtJTlRfU0FNUExFUl8zRF0gICAgICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzNELCAgICAgICB9OwogIHR5cGVNYXBbSU5UX1NBTVBMRVJfQ1VCRV0gICAgICAgICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV9DVUJFX01BUCwgfTsKICB0eXBlTWFwW0lOVF9TQU1QTEVSXzJEX0FSUkFZXSAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfMkRfQVJSQVksIH07CiAgdHlwZU1hcFtVTlNJR05FRF9JTlRfU0FNUExFUl8yRF0gICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEJDEsICAgICAgIH07CiAgdHlwZU1hcFtVTlNJR05FRF9JTlRfU0FNUExFUl8zRF0gICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzNELCAgICAgICB9OwogIHR5cGVNYXBbVU5TSUdORURfSU5UX1NBTVBMRVJfQ1VCRV0gICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV9DVUJFX01BUCwgfTsKICB0eXBlTWFwW1VOU0lHTkVEX0lOVF9TQU1QTEVSXzJEX0FSUkFZXSA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfMkRfQVJSQVksIH07CgogIGZ1bmN0aW9uIGZsb2F0QXR0cmliU2V0dGVyKGdsLCBpbmRleCkgewogICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHsKICAgICAgaWYgKGIudmFsdWUpIHsKICAgICAgICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoaW5kZXgpOwogICAgICAgIHN3aXRjaCAoYi52YWx1ZS5sZW5ndGgpIHsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliNGZ2KGluZGV4LCBiLnZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYjNmdihpbmRleCwgYi52YWx1ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWIyZnYoaW5kZXgsIGIudmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliMWZ2KGluZGV4LCBiLnZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RoZSBsZW5ndGggb2YgYSBmbG9hdCBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNCEnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZ2wuYmluZEJ1ZmZlcihBUlJBWV9CVUZGRVIsIGIuYnVmZmVyKTsKICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShpbmRleCk7CiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcigKICAgICAgICAgICAgaW5kZXgsIGIubnVtQ29tcG9uZW50cyB8fCBiLnNpemUsIGIudHlwZSB8fCBGTE9BVCwgYi5ub3JtYWxpemUgfHwgZmFsc2UsIGIuc3RyaWRlIHx8IDAsIGIub2Zmc2V0IHx8IDApOwogICAgICAgIGlmIChnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKSB7CiAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKGluZGV4LCBiLmRpdmlzb3IgfHwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gaW50QXR0cmliU2V0dGVyKGdsLCBpbmRleCkgewogICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHsKICAgICAgaWYgKGIudmFsdWUpIHsKICAgICAgICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoaW5kZXgpOwogICAgICAgIGlmIChiLnZhbHVlLmxlbmd0aCA9PT0gNCkgewogICAgICAgICAgZ2wudmVydGV4QXR0cmliNGl2KGluZGV4LCBiLnZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgbGVuZ3RoIG9mIGFuIGludGVnZXIgY29uc3RhbnQgdmFsdWUgbXVzdCBiZSA0IScpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiwgYi5idWZmZXIpOwogICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTsKICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJJUG9pbnRlcigKICAgICAgICAgICAgaW5kZXgsIGIubnVtQ29tcG9uZW50cyB8fCBiLnNpemUsIGIudHlwZSB8fCBJTlQsIGIuc3RyaWRlIHx8IDAsIGIub2Zmc2V0IHx8IDApOwogICAgICAgIGlmIChnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKSB7CiAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKGluZGV4LCBiLmRpdmlzb3IgfHwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gdWludEF0dHJpYlNldHRlcihnbCwgaW5kZXgpIHsKICAgIHJldHVybiBmdW5jdGlvbihiKSB7CiAgICAgIGlmIChiLnZhbHVlKSB7CiAgICAgICAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTsKICAgICAgICBpZiAoYi52YWx1ZS5sZW5ndGggPT09IDQpIHsKICAgICAgICAgIGdsLnZlcnRleEF0dHJpYjR1aXYoaW5kZXgsIGIudmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBsZW5ndGggb2YgYW4gdW5zaWduZWQgaW50ZWdlciBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIDQhJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGdsLmJpbmRCdWZmZXIoQVJSQVlfQlVGRkVSLCBiLmJ1ZmZlcik7CiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoaW5kZXgpOwogICAgICAgIGdsLnZlcnRleEF0dHJpYklQb2ludGVyKAogICAgICAgICAgICBpbmRleCwgYi5udW1Db21wb25lbnRzIHx8IGIuc2l6ZSwgYi50eXBlIHx8IFVOU0lHTkVEX0lOVCwgYi5zdHJpZGUgfHwgMCwgYi5vZmZzZXQgfHwgMCk7CiAgICAgICAgaWYgKGdsLnZlcnRleEF0dHJpYkRpdmlzb3IpIHsKICAgICAgICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IoaW5kZXgsIGIuZGl2aXNvciB8fCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfQoKICBmdW5jdGlvbiBtYXRBdHRyaWJTZXR0ZXIoZ2wsIGluZGV4LCB0eXBlSW5mbykgewogICAgY29uc3QgZGVmYXVsdFNpemUgPSB0eXBlSW5mby5zaXplOwogICAgY29uc3QgY291bnQgPSB0eXBlSW5mby5jb3VudDsKCiAgICByZXR1cm4gZnVuY3Rpb24oYikgewogICAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiwgYi5idWZmZXIpOwogICAgICBjb25zdCBudW1Db21wb25lbnRzID0gYi5zaXplIHx8IGIubnVtQ29tcG9uZW50cyB8fCBkZWZhdWx0U2l6ZTsKICAgICAgY29uc3Qgc2l6ZSA9IG51bUNvbXBvbmVudHMgLyBjb3VudDsKICAgICAgY29uc3QgdHlwZSA9IGIudHlwZSB8fCBGTE9BVDsKICAgICAgY29uc3QgdHlwZUluZm8gPSB0eXBlTWFwW3R5cGVdOwogICAgICBjb25zdCBzdHJpZGUgPSB0eXBlSW5mby5zaXplICogbnVtQ29tcG9uZW50czsKICAgICAgY29uc3Qgbm9ybWFsaXplID0gYi5ub3JtYWxpemUgfHwgZmFsc2U7CiAgICAgIGNvbnN0IG9mZnNldCA9IGIub2Zmc2V0IHx8IDA7CiAgICAgIGNvbnN0IHJvd09mZnNldCA9IHN0cmlkZSAvIGNvdW50OwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHsKICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShpbmRleCArIGkpOwogICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoCiAgICAgICAgICAgIGluZGV4ICsgaSwgc2l6ZSwgdHlwZSwgbm9ybWFsaXplLCBzdHJpZGUsIG9mZnNldCArIHJvd09mZnNldCAqIGkpOwogICAgICAgIGlmIChnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKSB7CiAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKGluZGV4ICsgaSwgYi5kaXZpc29yIHx8IDApOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9CgoKCiAgY29uc3QgYXR0clR5cGVNYXAgPSB7fTsKICBhdHRyVHlwZU1hcFtGTE9BVF0gICAgICAgICAgICAgPSB7IHNpemU6ICA0LCBzZXR0ZXI6IGZsb2F0QXR0cmliU2V0dGVyLCB9OwogIGF0dHJUeXBlTWFwW0ZMT0FUX1ZFQzJdICAgICAgICA9IHsgc2l6ZTogIDgsIHNldHRlcjogZmxvYXRBdHRyaWJTZXR0ZXIsIH07CiAgYXR0clR5cGVNYXBbRkxPQVRfVkVDM10gICAgICAgID0geyBzaXplOiAxMiwgc2V0dGVyOiBmbG9hdEF0dHJpYlNldHRlciwgfTsKICBhdHRyVHlwZU1hcFtGTE9BVF9WRUM0XSAgICAgICAgPSB7IHNpemU6IDE2LCBzZXR0ZXI6IGZsb2F0QXR0cmliU2V0dGVyLCB9OwogIGF0dHJUeXBlTWFwW0lOVF0gICAgICAgICAgICAgICA9IHsgc2l6ZTogIDQsIHNldHRlcjogaW50QXR0cmliU2V0dGVyLCAgIH07CiAgYXR0clR5cGVNYXBbSU5UX1ZFQzJdICAgICAgICAgID0geyBzaXplOiAgOCwgc2V0dGVyOiBpbnRBdHRyaWJTZXR0ZXIsICAgfTsKICBhdHRyVHlwZU1hcFtJTlRfVkVDM10gICAgICAgICAgPSB7IHNpemU6IDEyLCBzZXR0ZXI6IGludEF0dHJpYlNldHRlciwgICB9OwogIGF0dHJUeXBlTWFwW0lOVF9WRUM0XSAgICAgICAgICA9IHsgc2l6ZTogMTYsIHNldHRlcjogaW50QXR0cmliU2V0dGVyLCAgIH07CiAgYXR0clR5cGVNYXBbVU5TSUdORURfSU5UXSAgICAgID0geyBzaXplOiAgNCwgc2V0dGVyOiB1aW50QXR0cmliU2V0dGVyLCAgfTsKICBhdHRyVHlwZU1hcFtVTlNJR05FRF9JTlRfVkVDMl0gPSB7IHNpemU6ICA4LCBzZXR0ZXI6IHVpbnRBdHRyaWJTZXR0ZXIsICB9OwogIGF0dHJUeXBlTWFwW1VOU0lHTkVEX0lOVF9WRUMzXSA9IHsgc2l6ZTogMTIsIHNldHRlcjogdWludEF0dHJpYlNldHRlciwgIH07CiAgYXR0clR5cGVNYXBbVU5TSUdORURfSU5UX1ZFQzRdID0geyBzaXplOiAxNiwgc2V0dGVyOiB1aW50QXR0cmliU2V0dGVyLCAgfTsKICBhdHRyVHlwZU1hcFtCT09MXSAgICAgICAgICAgICAgPSB7IHNpemU6ICA0LCBzZXR0ZXI6IGludEF0dHJpYlNldHRlciwgICB9OwogIGF0dHJUeXBlTWFwW0JPT0xfVkVDMl0gICAgICAgICA9IHsgc2l6ZTogIDgsIHNldHRlcjogaW50QXR0cmliU2V0dGVyLCAgIH07CiAgYXR0clR5cGVNYXBbQk9PTF9WRUMzXSAgICAgICAgID0geyBzaXplOiAxMiwgc2V0dGVyOiBpbnRBdHRyaWJTZXR0ZXIsICAgfTsKICBhdHRyVHlwZU1hcFtCT09MX1ZFQzRdICAgICAgICAgPSB7IHNpemU6IDE2LCBzZXR0ZXI6IGludEF0dHJpYlNldHRlciwgICB9OwogIGF0dHJUeXBlTWFwW0ZMT0FUX01BVDJdICAgICAgICA9IHsgc2l6ZTogIDQsIHNldHRlcjogbWF0QXR0cmliU2V0dGVyLCAgIGNvdW50OiAyLCB9OwogIGF0dHJUeXBlTWFwW0ZMT0FUX01BVDNdICAgICAgICA9IHsgc2l6ZTogIDksIHNldHRlcjogbWF0QXR0cmliU2V0dGVyLCAgIGNvdW50OiAzLCB9OwogIGF0dHJUeXBlTWFwW0ZMT0FUX01BVDRdICAgICAgICA9IHsgc2l6ZTogMTYsIHNldHRlcjogbWF0QXR0cmliU2V0dGVyLCAgIGNvdW50OiA0LCB9OwoKICBjb25zdCBlcnJvclJFID0gL0VSUk9SOlxzKlxkKzooXGQrKS9naTsKICBmdW5jdGlvbiBhZGRMaW5lTnVtYmVyc1dpdGhFcnJvcihzcmMsIGxvZyA9ICcnLCBsaW5lT2Zmc2V0ID0gMCkgewogICAgLy8gTm90ZTogRXJyb3IgbWVzc2FnZSBmb3JtYXRzIGFyZSBub3QgZGVmaW5lZCBieSBhbnkgc3BlYyBzbyB0aGlzIG1heSBvciBtYXkgbm90IHdvcmsuCiAgICBjb25zdCBtYXRjaGVzID0gWy4uLmxvZy5tYXRjaEFsbChlcnJvclJFKV07CiAgICBjb25zdCBsaW5lTm9Ub0Vycm9yTWFwID0gbmV3IE1hcChtYXRjaGVzLm1hcCgobSwgbmR4KSA9PiB7CiAgICAgIGNvbnN0IGxpbmVObyA9IHBhcnNlSW50KG1bMV0pOwogICAgICBjb25zdCBuZXh0ID0gbWF0Y2hlc1tuZHggKyAxXTsKICAgICAgY29uc3QgZW5kID0gbmV4dCA/IG5leHQuaW5kZXggOiBsb2cubGVuZ3RoOwogICAgICBjb25zdCBtc2cgPSBsb2cuc3Vic3RyaW5nKG0uaW5kZXgsIGVuZCk7CiAgICAgIHJldHVybiBbbGluZU5vIC0gMSwgbXNnXTsKICAgIH0pKTsKICAgIHJldHVybiBzcmMuc3BsaXQoJ1xuJykubWFwKChsaW5lLCBsaW5lTm8pID0+IHsKICAgICAgY29uc3QgZXJyID0gbGluZU5vVG9FcnJvck1hcC5nZXQobGluZU5vKTsKICAgICAgcmV0dXJuIGAke2xpbmVObyArIDEgKyBsaW5lT2Zmc2V0fTogJHtsaW5lfSR7ZXJyID8gYFxuXG5eXl4gJHtlcnJ9YCA6ICcnfWA7CiAgICB9KS5qb2luKCdcbicpOwogIH0KCiAgLyoqCiAgICogRXJyb3IgQ2FsbGJhY2sKICAgKiBAY2FsbGJhY2sgRXJyb3JDYWxsYmFjawogICAqIEBwYXJhbSB7c3RyaW5nfSBtc2cgZXJyb3IgbWVzc2FnZS4KICAgKiBAcGFyYW0ge251bWJlcn0gW2xpbmVPZmZzZXRdIGFtb3VudCB0byBhZGQgdG8gbGluZSBudW1iZXIKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogUHJvZ3JhbSBDYWxsYmFjawogICAqIEBjYWxsYmFjayBQcm9ncmFtQ2FsbGJhY2sKICAgKiBAcGFyYW0ge3N0cmluZ30gW2Vycl0gZXJyb3IgbWVzc2FnZSwgZmFsc3kgaWYgbm8gZXJyb3IKICAgKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbXxtb2R1bGU6dHdnbC5Qcm9ncmFtSW5mb30gW3Jlc3VsdF0gdGhlIHByb2dyYW0gb3IgcHJvZ3JhbUluZm8KICAgKi8KCiAgY29uc3Qgc3BhY2VSRSA9IC9eWyBcdF0qXG4vOwoKICAvKioKICAgKiBSZW1vdmUgdGhlIGZpcnN0IGVuZCBvZiBsaW5lIGJlY2F1c2UgV2ViR0wgMi4wIHJlcXVpcmVzCiAgICogI3ZlcnNpb24gMzAwIGVzCiAgICogYXMgdGhlIGZpcnN0IGxpbmUuIE5vIHdoaXRlc3BhY2UgYWxsb3dlZCBiZWZvcmUgdGhhdCBsaW5lCiAgICogc28KICAgKgogICAqIDxzY3JpcHQ+CiAgICogI3ZlcnNpb24gMzAwIGVzCiAgICogPC9zY3JpcHQ+CiAgICoKICAgKiBIYXMgb25lIGxpbmUgYmVmb3JlIGl0IHdoaWNoIGlzIGludmFsaWQgYWNjb3JkaW5nIHRvIEdMU0wgRVMgMy4wMAogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IHNoYWRlclNvdXJjZSBUaGUgc291cmNlIG9mIHRoZSBzaGFkZXIKICAgKiBAcmV0dXJucyB7e3NoYWRlclNvdXJjZTogc3RyaW5nLCBsaW5lT2Zmc2V0OiBudW1iZXJ9fQogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gcHJlcFNoYWRlclNvdXJjZShzaGFkZXJTb3VyY2UpIHsKICAgIGxldCBsaW5lT2Zmc2V0ID0gMDsKICAgIGlmIChzcGFjZVJFLnRlc3Qoc2hhZGVyU291cmNlKSkgewogICAgICBsaW5lT2Zmc2V0ID0gMTsKICAgICAgc2hhZGVyU291cmNlID0gc2hhZGVyU291cmNlLnJlcGxhY2Uoc3BhY2VSRSwgJycpOwogICAgfQogICAgcmV0dXJuIHtsaW5lT2Zmc2V0LCBzaGFkZXJTb3VyY2V9OwogIH0KCiAgLyoqCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5Qcm9ncmFtT3B0aW9uc30gcHJvZ09wdGlvbnMKICAgKiBAcGFyYW0ge3N0cmluZ30gbXNnCiAgICogQHJldHVybiBudWxsCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiByZXBvcnRFcnJvcihwcm9nT3B0aW9ucywgbXNnKSB7CiAgICBwcm9nT3B0aW9ucy5lcnJvckNhbGxiYWNrKG1zZyk7CiAgICBpZiAocHJvZ09wdGlvbnMuY2FsbGJhY2spIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgcHJvZ09wdGlvbnMuY2FsbGJhY2soYCR7bXNnfVxuJHtwcm9nT3B0aW9ucy5lcnJvcnMuam9pbignXG4nKX1gKTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8qKgogICAqIENoZWNrIFNoYWRlciBzdGF0dXMKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCB0byB1c2UuCiAgICogQHBhcmFtIHtudW1iZXJ9IHNoYWRlclR5cGUgVGhlIHNoYWRlciB0eXBlCiAgICogQHBhcmFtIHtXZWJHTFNoYWRlcn0gc2hhZGVyIFRoZSBzaGFkZXIKICAgKiBAcGFyYW0ge0Vycm9yQ2FsbGJhY2t9IFtlcnJGbl0gZnVuY3Rpb24gdG8gcmVjZWl2ZSBlcnJvciBtZXNzYWdlLgogICAqIEByZXR1cm4ge3N0cmluZ30gZXJyb3JzIG9yIGVtcHR5IHN0cmluZwogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gY2hlY2tTaGFkZXJTdGF0dXMoZ2wsIHNoYWRlclR5cGUsIHNoYWRlciwgZXJyRm4pIHsKICAgIGVyckZuID0gZXJyRm4gfHwgZXJyb3I7CiAgICAvLyBDaGVjayB0aGUgY29tcGlsZSBzdGF0dXMKICAgIGNvbnN0IGNvbXBpbGVkID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgQ09NUElMRV9TVEFUVVMpOwogICAgaWYgKCFjb21waWxlZCkgewogICAgICAvLyBTb21ldGhpbmcgd2VudCB3cm9uZyBkdXJpbmcgY29tcGlsYXRpb247IGdldCB0aGUgZXJyb3IKICAgICAgY29uc3QgbGFzdEVycm9yID0gZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpOwogICAgICBjb25zdCB7bGluZU9mZnNldCwgc2hhZGVyU291cmNlfSA9IHByZXBTaGFkZXJTb3VyY2UoZ2wuZ2V0U2hhZGVyU291cmNlKHNoYWRlcikpOwogICAgICBjb25zdCBlcnJvciA9IGAke2FkZExpbmVOdW1iZXJzV2l0aEVycm9yKHNoYWRlclNvdXJjZSwgbGFzdEVycm9yLCBsaW5lT2Zmc2V0KX1cbkVycm9yIGNvbXBpbGluZyAke2dsRW51bVRvU3RyaW5nKGdsLCBzaGFkZXJUeXBlKX06ICR7bGFzdEVycm9yfWA7CiAgICAgIGVyckZuKGVycm9yKTsKICAgICAgcmV0dXJuIGVycm9yOwogICAgfQogICAgcmV0dXJuICcnOwogIH0KCiAgLyoqCiAgICogQHR5cGVkZWYge09iamVjdH0gRnVsbFByb2dyYW1TcGVjCiAgICogQHByb3BlcnR5IHtzdHJpbmdbXX0gc2hhZGVycyB0aGUgc2hhZGVyIHNvdXJjZSBvciBlbGVtZW50IGlkcy4KICAgKiBAcHJvcGVydHkge2Z1bmN0aW9uKHN0cmluZyl9IFtlcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzCiAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZyxudW1iZXI+fHN0cmluZ1tdfSBbYXR0cmliTG9jYXRpb25zXSBhIGF0dHJpYnV0ZSBuYW1lIHRvIGxvY2F0aW9uIG1hcCwgb3IgYXJyYXkgb2YgYXR0cmlidXRlIG5hbWVzIHdoZXJlIGluZGV4ID0gbG9jYXRpb24uCiAgICogQHByb3BlcnR5IHsobW9kdWxlOnR3Z2wuQnVmZmVySW5mb3xPYmplY3QuPHN0cmluZyxtb2R1bGU6dHdnbC5BdHRyaWJJbmZvPnxzdHJpbmdbXSl9IFt0cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzXSBJZiBwYXNzZWQKICAgKiAgIGEgQnVmZmVySW5mbyB3aWxsIHVzZSB0aGUgYXR0cmlicyBuYW1lcyBpbnNpZGUuIElmIHBhc3NlZCBhbiBvYmplY3Qgb2YgQXR0cmliSW5mb3Mgd2lsbCB1c2UgdGhlIG5hbWVzIGZyb20gdGhhdCBvYmplY3QuIE90aGVyd2lzZQogICAqICAgeW91IGNhbiBwYXNzIGFuIGFycmF5IG9mIG5hbWVzLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNmb3JtRmVlZGJhY2tNb2RlXSB0aGUgbW9kZSB0byBwYXNzIGBnbC50cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzYC4gRGVmYXVsdHMgdG8gYFNFUEFSQVRFX0FUVFJJQlNgLgogICAqIEBwcm9wZXJ0eSB7UHJvZ3JhbUNhbGxiYWNrfSBbY2FsbGJhY2tdIGNhbGxiYWNrIGZvciBhc3luYyBwcm9ncmFtIGNvbXBpbGF0aW9uLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBAdHlwZWRlZiB7c3RyaW5nW118bW9kdWxlOnR3Z2wuRnVsbFByb2dyYW1TcGVjfSBQcm9ncmFtU3BlYwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBQcm9ncmFtT3B0aW9ucwogICAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oc3RyaW5nKX0gW2Vycm9yQ2FsbGJhY2tdIGNhbGxiYWNrIGZvciBlcnJvcnMKICAgKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLG51bWJlcj58c3RyaW5nW119IFthdHRyaWJMb2NhdGlvbnNdIGEgYXR0cmlidXRlIG5hbWUgdG8gbG9jYXRpb24gbWFwLCBvciBhcnJheSBvZiBhdHRyaWJ1dGUgbmFtZXMgd2hlcmUgaW5kZXggPSBsb2NhdGlvbi4KICAgKiBAcHJvcGVydHkgeyhtb2R1bGU6dHdnbC5CdWZmZXJJbmZvfE9iamVjdC48c3RyaW5nLG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+fHN0cmluZ1tdKX0gW3RyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3NdIElmIHBhc3NlZAogICAqICAgYSBCdWZmZXJJbmZvIHdpbGwgdXNlIHRoZSBhdHRyaWJzIG5hbWVzIGluc2lkZS4gSWYgcGFzc2VkIGFuIG9iamVjdCBvZiBBdHRyaWJJbmZvcyB3aWxsIHVzZSB0aGUgbmFtZXMgZnJvbSB0aGF0IG9iamVjdC4gT3RoZXJ3aXNlCiAgICogICB5b3UgY2FuIHBhc3MgYW4gYXJyYXkgb2YgbmFtZXMuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2Zvcm1GZWVkYmFja01vZGVdIHRoZSBtb2RlIHRvIHBhc3MgYGdsLnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3NgLiBEZWZhdWx0cyB0byBgU0VQQVJBVEVfQVRUUklCU2AuCiAgICogQHByb3BlcnR5IHtQcm9ncmFtQ2FsbGJhY2t9IFtjYWxsYmFja10gY2FsbGJhY2sgZm9yIGFzeW5jIHByb2dyYW0gY29tcGlsYXRpb24uCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIEdldHMgdGhlIHByb2dyYW0gb3B0aW9ucyBiYXNlZCBvbiBhbGwgdGhlc2Ugb3B0aW9uYWwgYXJndW1lbnRzCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5Qcm9ncmFtT3B0aW9uc3xzdHJpbmdbXX0gW29wdF9hdHRyaWJzXSBPcHRpb25zIGZvciB0aGUgcHJvZ3JhbSBvciBhbiBhcnJheSBvZiBhdHRyaWJzIG5hbWVzLiBMb2NhdGlvbnMgd2lsbCBiZSBhc3NpZ25lZCBieSBpbmRleCBpZiBub3QgcGFzc2VkIGluCiAgICogQHBhcmFtIHtudW1iZXJbXX0gW29wdF9sb2NhdGlvbnNdIFRoZSBsb2NhdGlvbnMgZm9yIHRoZS4gQSBwYXJhbGxlbCBhcnJheSB0byBvcHRfYXR0cmlicyBsZXR0aW5nIHlvdSBhc3NpZ24gbG9jYXRpb25zLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9lcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzLiBCeSBkZWZhdWx0IGl0IGp1c3QgcHJpbnRzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlCiAgICogICAgICAgIG9uIGVycm9yLiBJZiB5b3Ugd2FudCBzb21ldGhpbmcgZWxzZSBwYXNzIGFuIGNhbGxiYWNrLiBJdCdzIHBhc3NlZCBhbiBlcnJvciBtZXNzYWdlLgogICAqIEByZXR1cm4ge21vZHVsZTp0d2dsLlByb2dyYW1PcHRpb25zfSBhbiBpbnN0YW5jZSBvZiBQcm9ncmFtT3B0aW9ucyBiYXNlZCBvbiB0aGUgYXJndW1lbnRzIHBhc3NlZCBpbgogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gZ2V0UHJvZ3JhbU9wdGlvbnMob3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKSB7CiAgICBsZXQgdHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5nczsKICAgIGxldCB0cmFuc2Zvcm1GZWVkYmFja01vZGU7CiAgICBsZXQgY2FsbGJhY2s7CiAgICBpZiAodHlwZW9mIG9wdF9sb2NhdGlvbnMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgb3B0X2Vycm9yQ2FsbGJhY2sgPSBvcHRfbG9jYXRpb25zOwogICAgICBvcHRfbG9jYXRpb25zID0gdW5kZWZpbmVkOwogICAgfQogICAgaWYgKHR5cGVvZiBvcHRfYXR0cmlicyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBvcHRfZXJyb3JDYWxsYmFjayA9IG9wdF9hdHRyaWJzOwogICAgICBvcHRfYXR0cmlicyA9IHVuZGVmaW5lZDsKICAgIH0gZWxzZSBpZiAob3B0X2F0dHJpYnMgJiYgIUFycmF5LmlzQXJyYXkob3B0X2F0dHJpYnMpKSB7CiAgICAgIGNvbnN0IG9wdCA9IG9wdF9hdHRyaWJzOwogICAgICBvcHRfZXJyb3JDYWxsYmFjayA9IG9wdC5lcnJvckNhbGxiYWNrOwogICAgICBvcHRfYXR0cmlicyA9IG9wdC5hdHRyaWJMb2NhdGlvbnM7CiAgICAgIHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3MgPSBvcHQudHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5nczsKICAgICAgdHJhbnNmb3JtRmVlZGJhY2tNb2RlID0gb3B0LnRyYW5zZm9ybUZlZWRiYWNrTW9kZTsKICAgICAgY2FsbGJhY2sgPSBvcHQuY2FsbGJhY2s7CiAgICB9CgogICAgY29uc3QgZXJyb3JDYWxsYmFjayA9IG9wdF9lcnJvckNhbGxiYWNrIHx8IGVycm9yOwogICAgY29uc3QgZXJyb3JzID0gW107CiAgICBjb25zdCBvcHRpb25zID0gewogICAgICBlcnJvckNhbGxiYWNrKG1zZywgLi4uYXJncykgewogICAgICAgIGVycm9ycy5wdXNoKG1zZyk7CiAgICAgICAgZXJyb3JDYWxsYmFjayhtc2csIC4uLmFyZ3MpOwogICAgICB9LAogICAgICB0cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzLAogICAgICB0cmFuc2Zvcm1GZWVkYmFja01vZGUsCiAgICAgIGNhbGxiYWNrLAogICAgICBlcnJvcnMsCiAgICB9OwoKICAgIHsKICAgICAgbGV0IGF0dHJpYkxvY2F0aW9ucyA9IHt9OwogICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRfYXR0cmlicykpIHsKICAgICAgICBvcHRfYXR0cmlicy5mb3JFYWNoKGZ1bmN0aW9uKGF0dHJpYiwgIG5keCkgewogICAgICAgICAgYXR0cmliTG9jYXRpb25zW2F0dHJpYl0gPSBvcHRfbG9jYXRpb25zID8gb3B0X2xvY2F0aW9uc1tuZHhdIDogbmR4OwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGF0dHJpYkxvY2F0aW9ucyA9IG9wdF9hdHRyaWJzIHx8IHt9OwogICAgICB9CiAgICAgIG9wdGlvbnMuYXR0cmliTG9jYXRpb25zID0gYXR0cmliTG9jYXRpb25zOwogICAgfQoKICAgIHJldHVybiBvcHRpb25zOwogIH0KCiAgY29uc3QgZGVmYXVsdFNoYWRlclR5cGUgPSBbCiAgICAiVkVSVEVYX1NIQURFUiIsCiAgICAiRlJBR01FTlRfU0hBREVSIiwKICBdOwoKICBmdW5jdGlvbiBnZXRTaGFkZXJUeXBlRnJvbVNjcmlwdFR5cGUoZ2wsIHNjcmlwdFR5cGUpIHsKICAgIGlmIChzY3JpcHRUeXBlLmluZGV4T2YoImZyYWciKSA+PSAwKSB7CiAgICAgIHJldHVybiBGUkFHTUVOVF9TSEFERVI7CiAgICB9IGVsc2UgaWYgKHNjcmlwdFR5cGUuaW5kZXhPZigidmVydCIpID49IDApIHsKICAgICAgcmV0dXJuIFZFUlRFWF9TSEFERVI7CiAgICB9CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgZnVuY3Rpb24gZGVsZXRlUHJvZ3JhbUFuZFNoYWRlcnMoZ2wsIHByb2dyYW0sIG5vdFRoZXNlKSB7CiAgICBjb25zdCBzaGFkZXJzID0gZ2wuZ2V0QXR0YWNoZWRTaGFkZXJzKHByb2dyYW0pOwogICAgZm9yIChjb25zdCBzaGFkZXIgb2Ygc2hhZGVycykgewogICAgICBpZiAobm90VGhlc2UuaGFzKHNoYWRlcikpIHsKICAgICAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTsKICAgICAgfQogICAgfQogICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTsKICB9CgogIGNvbnN0IHdhaXQkMSA9IChtcyA9IDApID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpOwoKICBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtTm9DaGVjayhnbCwgc2hhZGVycywgcHJvZ3JhbU9wdGlvbnMpIHsKICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7CiAgICBjb25zdCB7CiAgICAgIGF0dHJpYkxvY2F0aW9ucywKICAgICAgdHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncywKICAgICAgdHJhbnNmb3JtRmVlZGJhY2tNb2RlLAogICAgfSA9IGdldFByb2dyYW1PcHRpb25zKHByb2dyYW1PcHRpb25zKTsKCiAgICBmb3IgKGxldCBuZHggPSAwOyBuZHggPCBzaGFkZXJzLmxlbmd0aDsgKytuZHgpIHsKICAgICAgbGV0IHNoYWRlciA9IHNoYWRlcnNbbmR4XTsKICAgICAgaWYgKHR5cGVvZiBzaGFkZXIgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgY29uc3QgZWxlbSA9IGdldEVsZW1lbnRCeUlkKHNoYWRlcik7CiAgICAgICAgY29uc3Qgc3JjID0gZWxlbSA/IGVsZW0udGV4dCA6IHNoYWRlcjsKICAgICAgICBsZXQgdHlwZSA9IGdsW2RlZmF1bHRTaGFkZXJUeXBlW25keF1dOwogICAgICAgIGlmIChlbGVtICYmIGVsZW0udHlwZSkgewogICAgICAgICAgdHlwZSA9IGdldFNoYWRlclR5cGVGcm9tU2NyaXB0VHlwZShnbCwgZWxlbS50eXBlKSB8fCB0eXBlOwogICAgICAgIH0KICAgICAgICBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7CiAgICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgcHJlcFNoYWRlclNvdXJjZShzcmMpLnNoYWRlclNvdXJjZSk7CiAgICAgICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpOwogICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBzaGFkZXIpOwogICAgICB9CiAgICB9CgogICAgT2JqZWN0LmVudHJpZXMoYXR0cmliTG9jYXRpb25zKS5mb3JFYWNoKChbYXR0cmliLCBsb2NdKSA9PiBnbC5iaW5kQXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgbG9jLCBhdHRyaWIpKTsKCiAgICB7CiAgICAgIGxldCB2YXJ5aW5ncyA9IHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3M7CiAgICAgIGlmICh2YXJ5aW5ncykgewogICAgICAgIGlmICh2YXJ5aW5ncy5hdHRyaWJzKSB7CiAgICAgICAgICB2YXJ5aW5ncyA9IHZhcnlpbmdzLmF0dHJpYnM7CiAgICAgICAgfQogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YXJ5aW5ncykpIHsKICAgICAgICAgIHZhcnlpbmdzID0gT2JqZWN0LmtleXModmFyeWluZ3MpOwogICAgICAgIH0KICAgICAgICBnbC50cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzKHByb2dyYW0sIHZhcnlpbmdzLCB0cmFuc2Zvcm1GZWVkYmFja01vZGUgfHwgU0VQQVJBVEVfQVRUUklCUyk7CiAgICAgIH0KICAgIH0KCiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTsKICAgIHJldHVybiBwcm9ncmFtOwogIH0KCiAgLyoqCiAgICogQ3JlYXRlcyBhIHByb2dyYW0sIGF0dGFjaGVzIChhbmQvb3IgY29tcGlsZXMpIHNoYWRlcnMsIGJpbmRzIGF0dHJpYiBsb2NhdGlvbnMsIGxpbmtzIHRoZQogICAqIHByb2dyYW0uCiAgICoKICAgKiBOT1RFOiBUaGVyZSBhcmUgNCBzaWduYXR1cmVzIGZvciB0aGlzIGZ1bmN0aW9uCiAgICoKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtKGdsLCBbdnMsIGZzXSwgb3B0aW9ucyk7CiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbShnbCwgW3ZzLCBmc10sIG9wdF9lcnJGdW5jKTsKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtKGdsLCBbdnMsIGZzXSwgb3B0X2F0dHJpYnMsIG9wdF9lcnJGdW5jKTsKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtKGdsLCBbdnMsIGZzXSwgb3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJGdW5jKTsKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0IHRvIHVzZS4KICAgKiBAcGFyYW0ge1dlYkdMU2hhZGVyW118c3RyaW5nW119IHNoYWRlcnMgVGhlIHNoYWRlcnMgdG8gYXR0YWNoLCBvciBlbGVtZW50IGlkcyBmb3IgdGhlaXIgc291cmNlLCBvciBzdHJpbmdzIHRoYXQgY29udGFpbiB0aGVpciBzb3VyY2UKICAgKiBAcGFyYW0ge21vZHVsZTp0d2dsLlByb2dyYW1PcHRpb25zfHN0cmluZ1tdfG1vZHVsZTp0d2dsLkVycm9yQ2FsbGJhY2t9IFtvcHRfYXR0cmlic10gT3B0aW9ucyBmb3IgdGhlIHByb2dyYW0gb3IgYW4gYXJyYXkgb2YgYXR0cmlicyBuYW1lcyBvciBhbiBlcnJvciBjYWxsYmFjay4gTG9jYXRpb25zIHdpbGwgYmUgYXNzaWduZWQgYnkgaW5kZXggaWYgbm90IHBhc3NlZCBpbgogICAqIEBwYXJhbSB7bnVtYmVyW119IFtvcHRfbG9jYXRpb25zfG1vZHVsZTp0d2dsLkVycm9yQ2FsbGJhY2tdIFRoZSBsb2NhdGlvbnMgZm9yIHRoZS4gQSBwYXJhbGxlbCBhcnJheSB0byBvcHRfYXR0cmlicyBsZXR0aW5nIHlvdSBhc3NpZ24gbG9jYXRpb25zIG9yIGFuIGVycm9yIGNhbGxiYWNrLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9lcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzLiBCeSBkZWZhdWx0IGl0IGp1c3QgcHJpbnRzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlCiAgICogICAgICAgIG9uIGVycm9yLiBJZiB5b3Ugd2FudCBzb21ldGhpbmcgZWxzZSBwYXNzIGFuIGNhbGxiYWNrLiBJdCdzIHBhc3NlZCBhbiBlcnJvciBtZXNzYWdlLgogICAqIEByZXR1cm4ge1dlYkdMUHJvZ3JhbT99IHRoZSBjcmVhdGVkIHByb2dyYW0gb3IgbnVsbCBpZiBlcnJvciBvZiBhIGNhbGxiYWNrIHdhcyBwcm92aWRlZC4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXMKICAgKi8KICBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtKAogICAgICBnbCwgc2hhZGVycywgb3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKSB7CiAgICAvLyBUaGlzIGNvZGUgaXMgcmVhbGx5IGNvbnZvbHV0ZWQsIGJlY2F1c2UgaXQgbWF5IG9yIG1heSBub3QgYmUgYXN5bmMKICAgIC8vIE1heWJlIGl0IHdvdWxkIGJlIGJldHRlciB0byBoYXZlIGEgc2VwYXJhdGUgZnVuY3Rpb24KICAgIGNvbnN0IHByb2dPcHRpb25zID0gZ2V0UHJvZ3JhbU9wdGlvbnMob3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKTsKICAgIGNvbnN0IHNoYWRlclNldCA9IG5ldyBTZXQoc2hhZGVycyk7CiAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbU5vQ2hlY2soZ2wsIHNoYWRlcnMsIHByb2dPcHRpb25zKTsKCiAgICBmdW5jdGlvbiBoYXNFcnJvcnMoZ2wsIHByb2dyYW0pIHsKICAgICAgY29uc3QgZXJyb3JzID0gZ2V0UHJvZ3JhbUVycm9ycyhnbCwgcHJvZ3JhbSwgcHJvZ09wdGlvbnMuZXJyb3JDYWxsYmFjayk7CiAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICBkZWxldGVQcm9ncmFtQW5kU2hhZGVycyhnbCwgcHJvZ3JhbSwgc2hhZGVyU2V0KTsKICAgICAgfQogICAgICByZXR1cm4gZXJyb3JzOwogICAgfQoKICAgIGlmIChwcm9nT3B0aW9ucy5jYWxsYmFjaykgewogICAgICB3YWl0Rm9yUHJvZ3JhbUxpbmtDb21wbGV0aW9uQXN5bmMoZ2wsIHByb2dyYW0pLnRoZW4oKCkgPT4gewogICAgICAgIGNvbnN0IGVycm9ycyA9IGhhc0Vycm9ycyhnbCwgcHJvZ3JhbSk7CiAgICAgICAgcHJvZ09wdGlvbnMuY2FsbGJhY2soZXJyb3JzLCBlcnJvcnMgPyB1bmRlZmluZWQgOiBwcm9ncmFtKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIGhhc0Vycm9ycyhnbCwgcHJvZ3JhbSkgPyB1bmRlZmluZWQgOiBwcm9ncmFtOwogIH0KCiAgYXN5bmMgZnVuY3Rpb24gd2FpdEZvclByb2dyYW1MaW5rQ29tcGxldGlvbkFzeW5jKGdsLCBwcm9ncmFtKSB7CiAgICBjb25zdCBleHQgPSBnbC5nZXRFeHRlbnNpb24oJ0tIUl9wYXJhbGxlbF9zaGFkZXJfY29tcGlsZScpOwogICAgY29uc3QgY2hlY2tGbiA9IGV4dAogICAgICAgID8gKGdsLCBwcm9ncmFtKSA9PiBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGV4dC5DT01QTEVUSU9OX1NUQVRVU19LSFIpCiAgICAgICAgOiAoKSA9PiB0cnVlOwoKICAgIGxldCB3YWl0VGltZSA9IDA7CiAgICBkbyB7CiAgICAgIGF3YWl0IHdhaXQkMSh3YWl0VGltZSk7ICAvLyBtdXN0IHdhaXQgYXQgbGVhc3Qgb25jZQogICAgICB3YWl0VGltZSA9IDEwMDAgLyA2MDsKICAgIH0gd2hpbGUgKCFjaGVja0ZuKGdsLCBwcm9ncmFtKSk7CiAgfQoKICAvKioKICAgKiBDaGVjayBhIHByb2dyYW0ncyBsaW5rIHN0YXR1cwogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0IHRvIHVzZS4KICAgKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbX0gcHJvZ3JhbSBQcm9ncmFtIHRvIGNoZWNrCiAgICogQHBhcmFtIHtFcnJvckNhbGxiYWNrfSBbZXJyRm5dIGZ1bmMgZm9yIGVycm9ycwogICAqIEByZXR1cm4ge3N0cmluZz99IGVycm9ycyBpZiBwcm9ncmFtIGlzIGZhaWxlZCwgZWxzZSB1bmRlZmluZWQKICAgKiBAcHJpdmF0ZQogICAqLwogIGZ1bmN0aW9uIGdldFByb2dyYW1FcnJvcnMoZ2wsIHByb2dyYW0sIGVyckZuKSB7CiAgICBlcnJGbiA9IGVyckZuIHx8IGVycm9yOwogICAgLy8gQ2hlY2sgdGhlIGxpbmsgc3RhdHVzCiAgICBjb25zdCBsaW5rZWQgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIExJTktfU1RBVFVTKTsKICAgIGlmICghbGlua2VkKSB7CiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggdGhlIGxpbmsKICAgICAgY29uc3QgbGFzdEVycm9yID0gZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSk7CiAgICAgIGVyckZuKGBFcnJvciBpbiBwcm9ncmFtIGxpbmtpbmc6ICR7bGFzdEVycm9yfWApOwogICAgICAvLyBwcmludCBhbnkgZXJyb3JzIGZyb20gdGhlc2Ugc2hhZGVycwogICAgICBjb25zdCBzaGFkZXJzID0gZ2wuZ2V0QXR0YWNoZWRTaGFkZXJzKHByb2dyYW0pOwogICAgICBjb25zdCBlcnJvcnMgPSBzaGFkZXJzLm1hcChzaGFkZXIgPT4gY2hlY2tTaGFkZXJTdGF0dXMoZ2wsIGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLlNIQURFUl9UWVBFKSwgc2hhZGVyLCBlcnJGbikpOwogICAgICByZXR1cm4gYCR7bGFzdEVycm9yfVxuJHtlcnJvcnMuZmlsdGVyKF8gPT4gXykuam9pbignXG4nKX1gOwogICAgfQogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CgogIC8qKgogICAqIENyZWF0ZXMgYSBwcm9ncmFtIGZyb20gMiBzb3VyY2VzLgogICAqCiAgICogTk9URTogVGhlcmUgYXJlIDQgc2lnbmF0dXJlcyBmb3IgdGhpcyBmdW5jdGlvbgogICAqCiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21Tb3VyY2UoZ2wsIFt2cywgZnNdLCBvcHRfb3B0aW9ucyk7CiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21Tb3VyY2UoZ2wsIFt2cywgZnNdLCBvcHRfZXJyRnVuYyk7CiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21Tb3VyY2UoZ2wsIFt2cywgZnNdLCBvcHRfYXR0cmlicywgb3B0X2VyckZ1bmMpOwogICAqICAgICB0d2dsLmNyZWF0ZVByb2dyYW1Gcm9tU291cmNlKGdsLCBbdnMsIGZzXSwgb3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJGdW5jKTsKICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogICAgICAgIHRvIHVzZS4KICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzaGFkZXJTb3VyY2VzIEFycmF5IG9mIHNvdXJjZXMgZm9yIHRoZQogICAqICAgICAgICBzaGFkZXJzLiBUaGUgZmlyc3QgaXMgYXNzdW1lZCB0byBiZSB0aGUgdmVydGV4IHNoYWRlciwKICAgKiAgICAgICAgdGhlIHNlY29uZCB0aGUgZnJhZ21lbnQgc2hhZGVyLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuUHJvZ3JhbU9wdGlvbnN8c3RyaW5nW118bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9hdHRyaWJzXSBPcHRpb25zIGZvciB0aGUgcHJvZ3JhbSBvciBhbiBhcnJheSBvZiBhdHRyaWJzIG5hbWVzIG9yIGFuIGVycm9yIGNhbGxiYWNrLiBMb2NhdGlvbnMgd2lsbCBiZSBhc3NpZ25lZCBieSBpbmRleCBpZiBub3QgcGFzc2VkIGluCiAgICogQHBhcmFtIHtudW1iZXJbXX0gW29wdF9sb2NhdGlvbnN8bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja10gVGhlIGxvY2F0aW9ucyBmb3IgdGhlLiBBIHBhcmFsbGVsIGFycmF5IHRvIG9wdF9hdHRyaWJzIGxldHRpbmcgeW91IGFzc2lnbiBsb2NhdGlvbnMgb3IgYW4gZXJyb3IgY2FsbGJhY2suCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrfSBbb3B0X2Vycm9yQ2FsbGJhY2tdIGNhbGxiYWNrIGZvciBlcnJvcnMuIEJ5IGRlZmF1bHQgaXQganVzdCBwcmludHMgYW4gZXJyb3IgdG8gdGhlIGNvbnNvbGUKICAgKiAgICAgICAgb24gZXJyb3IuIElmIHlvdSB3YW50IHNvbWV0aGluZyBlbHNlIHBhc3MgYW4gY2FsbGJhY2suIEl0J3MgcGFzc2VkIGFuIGVycm9yIG1lc3NhZ2UuCiAgICogQHJldHVybiB7V2ViR0xQcm9ncmFtP30gdGhlIGNyZWF0ZWQgcHJvZ3JhbSBvciBudWxsIGlmIGVycm9yIG9yIGEgY2FsbGJhY2sgd2FzIHByb3ZpZGVkLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZVByb2dyYW1Gcm9tU291cmNlcygKICAgICAgZ2wsIHNoYWRlclNvdXJjZXMsIG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyb3JDYWxsYmFjaykgewogICAgcmV0dXJuIGNyZWF0ZVByb2dyYW0oZ2wsIHNoYWRlclNvdXJjZXMsIG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyb3JDYWxsYmFjayk7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgYXR0cmlidXRlL3VuaWZvcm0gaXMgYSByZXNlcnZlZC9idWlsdCBpbgogICAqCiAgICogSXQgbWFrZXMgbm8gc2Vuc2UgdG8gbWUgd2h5IEdMIHJldHVybnMgdGhlc2UgYmVjYXVzZSBpdCdzCiAgICogaWxsZWdhbCB0byBjYWxsIGBnbC5nZXRVbmlmb3JtTG9jYXRpb25gIGFuZCBgZ2wuZ2V0QXR0cmliTG9jYXRpb25gCiAgICogd2l0aCBuYW1lcyB0aGF0IHN0YXJ0IHdpdGggYGdsX2AgKGFuZCBgd2ViZ2xfYCBpbiBXZWJHTCkKICAgKgogICAqIEkgY2FuIG9ubHkgYXNzdW1lIHRoZXkgYXJlIHRoZXJlIGJlY2F1c2UgdGhleSBtaWdodCBjb3VudAogICAqIHdoZW4gY29tcHV0aW5nIHRoZSBudW1iZXIgb2YgdW5pZm9ybXMvYXR0cmlidXRlcyB1c2VkIHdoZW4geW91IHdhbnQgdG8KICAgKiBrbm93IGlmIHlvdSBhcmUgbmVhciB0aGUgbGltaXQuIFRoYXQgZG9lc24ndCByZWFsbHkgbWFrZSBzZW5zZQogICAqIHRvIG1lIGJ1dCB0aGUgZmFjdCB0aGF0IHRoZXNlIGdldCByZXR1cm5lZCBhcmUgaW4gdGhlIHNwZWMuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMQWN0aXZlSW5mb30gaW5mbyBBcyByZXR1cm5lZCBmcm9tIGBnbC5nZXRBY3RpdmVVbmlmb3JtYCBvcgogICAqICAgIGBnbC5nZXRBY3RpdmVBdHRyaWJgLgogICAqIEByZXR1cm4ge2Jvb2x9IHRydWUgaWYgaXQncyByZXNlcnZlZAogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gaXNCdWlsdEluKGluZm8pIHsKICAgIGNvbnN0IG5hbWUgPSBpbmZvLm5hbWU7CiAgICByZXR1cm4gbmFtZS5zdGFydHNXaXRoKCJnbF8iKSB8fCBuYW1lLnN0YXJ0c1dpdGgoIndlYmdsXyIpOwogIH0KCiAgY29uc3QgdG9rZW5SRSA9IC8oXC58XFt8XXxcdyspL2c7CiAgY29uc3QgaXNEaWdpdCA9IHMgPT4gcyA+PSAnMCcgJiYgcyA8PSAnOSc7CiAgZnVuY3Rpb24gYWRkU2V0dGVyVG9Vbmlmb3JtVHJlZShmdWxsUGF0aCwgc2V0dGVyLCBub2RlLCB1bmlmb3JtU2V0dGVycykgewogICAgY29uc3QgdG9rZW5zID0gZnVsbFBhdGguc3BsaXQodG9rZW5SRSkuZmlsdGVyKHMgPT4gcyAhPT0gJycpOwogICAgbGV0IHRva2VuTmR4ID0gMDsKICAgIGxldCBwYXRoID0gJyc7CgogICAgZm9yICg7OykgewogICAgICBjb25zdCB0b2tlbiA9IHRva2Vuc1t0b2tlbk5keCsrXTsgIC8vIGhhcyB0byBiZSBuYW1lIG9yIG51bWJlcgogICAgICBwYXRoICs9IHRva2VuOwogICAgICBjb25zdCBpc0FycmF5SW5kZXggPSBpc0RpZ2l0KHRva2VuWzBdKTsKICAgICAgY29uc3QgYWNjZXNzb3IgPSBpc0FycmF5SW5kZXgKICAgICAgICAgID8gcGFyc2VJbnQodG9rZW4pCiAgICAgICAgICA6IHRva2VuOwogICAgICBpZiAoaXNBcnJheUluZGV4KSB7CiAgICAgICAgcGF0aCArPSB0b2tlbnNbdG9rZW5OZHgrK107ICAvLyBza2lwICddJwogICAgICB9CiAgICAgIGNvbnN0IGlzTGFzdFRva2VuID0gdG9rZW5OZHggPT09IHRva2Vucy5sZW5ndGg7CiAgICAgIGlmIChpc0xhc3RUb2tlbikgewogICAgICAgIG5vZGVbYWNjZXNzb3JdID0gc2V0dGVyOwogICAgICAgIGJyZWFrOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zW3Rva2VuTmR4KytdOyAgLy8gaGFzIHRvIGJlIC4gb3IgWwogICAgICAgIGNvbnN0IGlzQXJyYXkgPSB0b2tlbiA9PT0gJ1snOwogICAgICAgIGNvbnN0IGNoaWxkID0gbm9kZVthY2Nlc3Nvcl0gfHwgKGlzQXJyYXkgPyBbXSA6IHt9KTsKICAgICAgICBub2RlW2FjY2Vzc29yXSA9IGNoaWxkOwogICAgICAgIG5vZGUgPSBjaGlsZDsKICAgICAgICB1bmlmb3JtU2V0dGVyc1twYXRoXSA9IHVuaWZvcm1TZXR0ZXJzW3BhdGhdIHx8IGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICBzZXRVbmlmb3JtVHJlZShub2RlLCB2YWx1ZSk7CiAgICAgICAgICB9OwogICAgICAgIH0oY2hpbGQpOwogICAgICAgIHBhdGggKz0gdG9rZW47CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIENyZWF0ZXMgc2V0dGVyIGZ1bmN0aW9ucyBmb3IgYWxsIHVuaWZvcm1zIG9mIGEgc2hhZGVyCiAgICogcHJvZ3JhbS4KICAgKgogICAqIEBzZWUge0BsaW5rIG1vZHVsZTp0d2dsLnNldFVuaWZvcm1zfQogICAqCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQgdG8gdXNlLgogICAqIEBwYXJhbSB7V2ViR0xQcm9ncmFtfSBwcm9ncmFtIHRoZSBwcm9ncmFtIHRvIGNyZWF0ZSBzZXR0ZXJzIGZvci4KICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPn0gYW4gb2JqZWN0IHdpdGggYSBzZXR0ZXIgYnkgbmFtZSBmb3IgZWFjaCB1bmlmb3JtCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlVW5pZm9ybVNldHRlcnMoZ2wsIHByb2dyYW0pIHsKICAgIGxldCB0ZXh0dXJlVW5pdCA9IDA7CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgc2V0dGVyIGZvciBhIHVuaWZvcm0gb2YgdGhlIGdpdmVuIHByb2dyYW0gd2l0aCBpdCdzCiAgICAgKiBsb2NhdGlvbiBlbWJlZGRlZCBpbiB0aGUgc2V0dGVyLgogICAgICogQHBhcmFtIHtXZWJHTFByb2dyYW19IHByb2dyYW0KICAgICAqIEBwYXJhbSB7V2ViR0xVbmlmb3JtSW5mb30gdW5pZm9ybUluZm8KICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbn0gdGhlIGNyZWF0ZWQgc2V0dGVyLgogICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVVbmlmb3JtU2V0dGVyKHByb2dyYW0sIHVuaWZvcm1JbmZvLCBsb2NhdGlvbikgewogICAgICBjb25zdCBpc0FycmF5ID0gdW5pZm9ybUluZm8ubmFtZS5lbmRzV2l0aCgiWzBdIik7CiAgICAgIGNvbnN0IHR5cGUgPSB1bmlmb3JtSW5mby50eXBlOwogICAgICBjb25zdCB0eXBlSW5mbyA9IHR5cGVNYXBbdHlwZV07CiAgICAgIGlmICghdHlwZUluZm8pIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gdHlwZTogMHgke3R5cGUudG9TdHJpbmcoMTYpfWApOyAvLyB3ZSBzaG91bGQgbmV2ZXIgZ2V0IGhlcmUuCiAgICAgIH0KICAgICAgbGV0IHNldHRlcjsKICAgICAgaWYgKHR5cGVJbmZvLmJpbmRQb2ludCkgewogICAgICAgIC8vIGl0J3MgYSBzYW1wbGVyCiAgICAgICAgY29uc3QgdW5pdCA9IHRleHR1cmVVbml0OwogICAgICAgIHRleHR1cmVVbml0ICs9IHVuaWZvcm1JbmZvLnNpemU7CiAgICAgICAgaWYgKGlzQXJyYXkpIHsKICAgICAgICAgIHNldHRlciA9IHR5cGVJbmZvLmFycmF5U2V0dGVyKGdsLCB0eXBlLCB1bml0LCBsb2NhdGlvbiwgdW5pZm9ybUluZm8uc2l6ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldHRlciA9IHR5cGVJbmZvLnNldHRlcihnbCwgdHlwZSwgdW5pdCwgbG9jYXRpb24sIHVuaWZvcm1JbmZvLnNpemUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodHlwZUluZm8uYXJyYXlTZXR0ZXIgJiYgaXNBcnJheSkgewogICAgICAgICAgc2V0dGVyID0gdHlwZUluZm8uYXJyYXlTZXR0ZXIoZ2wsIGxvY2F0aW9uKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2V0dGVyID0gdHlwZUluZm8uc2V0dGVyKGdsLCBsb2NhdGlvbik7CiAgICAgICAgfQogICAgICB9CiAgICAgIHNldHRlci5sb2NhdGlvbiA9IGxvY2F0aW9uOwogICAgICByZXR1cm4gc2V0dGVyOwogICAgfQoKICAgIGNvbnN0IHVuaWZvcm1TZXR0ZXJzID0ge307CiAgICBjb25zdCB1bmlmb3JtVHJlZSA9IHt9OwogICAgY29uc3QgbnVtVW5pZm9ybXMgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIEFDVElWRV9VTklGT1JNUyk7CgogICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVVuaWZvcm1zOyArK2lpKSB7CiAgICAgIGNvbnN0IHVuaWZvcm1JbmZvID0gZ2wuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLCBpaSk7CiAgICAgIGlmIChpc0J1aWx0SW4odW5pZm9ybUluZm8pKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB1bmlmb3JtSW5mby5uYW1lOwogICAgICAvLyByZW1vdmUgdGhlIGFycmF5IHN1ZmZpeC4KICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoIlswXSIpKSB7CiAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gMyk7CiAgICAgIH0KICAgICAgY29uc3QgbG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybUluZm8ubmFtZSk7CiAgICAgIC8vIHRoZSB1bmlmb3JtIHdpbGwgaGF2ZSBubyBsb2NhdGlvbiBpZiBpdCdzIGluIGEgdW5pZm9ybSBibG9jawogICAgICBpZiAobG9jYXRpb24pIHsKICAgICAgICBjb25zdCBzZXR0ZXIgPSBjcmVhdGVVbmlmb3JtU2V0dGVyKHByb2dyYW0sIHVuaWZvcm1JbmZvLCBsb2NhdGlvbik7CiAgICAgICAgdW5pZm9ybVNldHRlcnNbbmFtZV0gPSBzZXR0ZXI7CiAgICAgICAgYWRkU2V0dGVyVG9Vbmlmb3JtVHJlZShuYW1lLCBzZXR0ZXIsIHVuaWZvcm1UcmVlLCB1bmlmb3JtU2V0dGVycyk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdW5pZm9ybVNldHRlcnM7CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBUcmFuc2Zvcm1GZWVkYmFja0luZm8KICAgKiBAcHJvcGVydHkge251bWJlcn0gaW5kZXggaW5kZXggb2YgdHJhbnNmb3JtIGZlZWRiYWNrCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHR5cGUgR0wgdHlwZQogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzaXplIDEgLSA0CiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIENyZWF0ZSBUcmFuc2Zvcm1GZWVkYmFja0luZm8gZm9yIHBhc3NpbmcgdG8gYmluZFRyYW5zZm9ybUZlZWRiYWNrSW5mby4KICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCB0byB1c2UuCiAgICogQHBhcmFtIHtXZWJHTFByb2dyYW19IHByb2dyYW0gYW4gZXhpc3RpbmcgV2ViR0xQcm9ncmFtLgogICAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsIG1vZHVsZTp0d2dsLlRyYW5zZm9ybUZlZWRiYWNrSW5mbz59CiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlVHJhbnNmb3JtRmVlZGJhY2tJbmZvKGdsLCBwcm9ncmFtKSB7CiAgICBjb25zdCBpbmZvID0ge307CiAgICBjb25zdCBudW1WYXJ5aW5ncyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgVFJBTlNGT1JNX0ZFRURCQUNLX1ZBUllJTkdTKTsKICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1WYXJ5aW5nczsgKytpaSkgewogICAgICBjb25zdCB2YXJ5aW5nID0gZ2wuZ2V0VHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5nKHByb2dyYW0sIGlpKTsKICAgICAgaW5mb1t2YXJ5aW5nLm5hbWVdID0gewogICAgICAgIGluZGV4OiBpaSwKICAgICAgICB0eXBlOiB2YXJ5aW5nLnR5cGUsCiAgICAgICAgc2l6ZTogdmFyeWluZy5zaXplLAogICAgICB9OwogICAgfQogICAgcmV0dXJuIGluZm87CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBVbmlmb3JtRGF0YQogICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSB1bmlmb3JtCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHR5cGUgVGhlIFdlYkdMIHR5cGUgZW51bSBmb3IgdGhpcyB1bmlmb3JtCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHNpemUgVGhlIG51bWJlciBvZiBlbGVtZW50cyBmb3IgdGhpcyB1bmlmb3JtCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGJsb2NrTmR4IFRoZSBibG9jayBpbmRleCB0aGlzIHVuaWZvcm0gYXBwZWFycyBpbgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBvZmZzZXQgVGhlIGJ5dGUgb2Zmc2V0IGluIHRoZSBibG9jayBmb3IgdGhpcyB1bmlmb3JtJ3MgdmFsdWUKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogVGhlIHNwZWNpZmljYXRpb24gZm9yIG9uZSBVbmlmb3JtQmxvY2tPYmplY3QKICAgKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IEJsb2NrU3BlYwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGJsb2NrLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzaXplIFRoZSBzaXplIGluIGJ5dGVzIG5lZWRlZCBmb3IgdGhlIGJsb2NrCiAgICogQHByb3BlcnR5IHtudW1iZXJbXX0gdW5pZm9ybUluZGljZXMgVGhlIGluZGljZXMgb2YgdGhlIHVuaWZvcm1zIHVzZWQgYnkgdGhlIGJsb2NrLiBUaGVzZSBpbmRpY2VzCiAgICogICAgY29ycmVzcG9uZCB0byBlbnRyaWVzIGluIGEgVW5pZm9ybURhdGEgYXJyYXkgaW4gdGhlIHtAbGluayBtb2R1bGU6dHdnbC5Vbmlmb3JtQmxvY2tTcGVjfS4KICAgKiBAcHJvcGVydHkge2Jvb2x9IHVzZWRCeVZlcnRleFNoYWRlciBTZWxmIGV4cGxhbmF0b3J5CiAgICogQHByb3BlcnR5IHtib29sfSB1c2VkQnlGcmFnbWVudFNoYWRlciBTZWxmIGV4cGxhbmF0b3J5CiAgICogQHByb3BlcnR5IHtib29sfSB1c2VkIFNlbGYgZXhwbGFuYXRvcnkKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wKICAgKi8KCiAgLyoqCiAgICogQSBgVW5pZm9ybUJsb2NrU3BlY2AgcmVwcmVzZW50cyB0aGUgZGF0YSBuZWVkZWQgdG8gY3JlYXRlIGFuZCBiaW5kCiAgICogVW5pZm9ybUJsb2NrT2JqZWN0cyBmb3IgYSBnaXZlbiBwcm9ncmFtCiAgICoKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBVbmlmb3JtQmxvY2tTcGVjCiAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuQmxvY2tTcGVjPn0gYmxvY2tTcGVjcyBUaGUgQmxvY2tTcGVjIGZvciBlYWNoIGJsb2NrIGJ5IGJsb2NrIG5hbWUKICAgKiBAcHJvcGVydHkge1VuaWZvcm1EYXRhW119IHVuaWZvcm1EYXRhIEFuIGFycmF5IG9mIGRhdGEgZm9yIGVhY2ggdW5pZm9ybSBieSB1bmlmb3JtIGluZGV4LgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBDcmVhdGVzIGEgVW5pZm9ybUJsb2NrU3BlYyBmb3IgdGhlIGdpdmVuIHByb2dyYW0uCiAgICoKICAgKiBBIFVuaWZvcm1CbG9ja1NwZWMgcmVwcmVzZW50cyB0aGUgZGF0YSBuZWVkZWQgdG8gY3JlYXRlIGFuZCBiaW5kCiAgICogVW5pZm9ybUJsb2NrT2JqZWN0cwogICAqCiAgICogQHBhcmFtIHtXZWJHTDJSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMMiBSZW5kZXJpbmcgQ29udGV4dAogICAqIEBwYXJhbSB7V2ViR0xQcm9ncmFtfSBwcm9ncmFtIEEgV2ViR0xQcm9ncmFtIGZvciBhIHN1Y2Nlc3NmdWxseSBsaW5rZWQgcHJvZ3JhbQogICAqIEByZXR1cm4ge21vZHVsZTp0d2dsLlVuaWZvcm1CbG9ja1NwZWN9IFRoZSBjcmVhdGVkIFVuaWZvcm1CbG9ja1NwZWMKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXMKICAgKi8KICBmdW5jdGlvbiBjcmVhdGVVbmlmb3JtQmxvY2tTcGVjRnJvbVByb2dyYW0oZ2wsIHByb2dyYW0pIHsKICAgIGNvbnN0IG51bVVuaWZvcm1zID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBBQ1RJVkVfVU5JRk9STVMpOwogICAgY29uc3QgdW5pZm9ybURhdGEgPSBbXTsKICAgIGNvbnN0IHVuaWZvcm1JbmRpY2VzID0gW107CgogICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVVuaWZvcm1zOyArK2lpKSB7CiAgICAgIHVuaWZvcm1JbmRpY2VzLnB1c2goaWkpOwogICAgICB1bmlmb3JtRGF0YS5wdXNoKHt9KTsKICAgICAgY29uc3QgdW5pZm9ybUluZm8gPSBnbC5nZXRBY3RpdmVVbmlmb3JtKHByb2dyYW0sIGlpKTsKICAgICAgdW5pZm9ybURhdGFbaWldLm5hbWUgPSB1bmlmb3JtSW5mby5uYW1lOwogICAgfQoKICAgIFsKICAgICAgWyAiVU5JRk9STV9UWVBFIiwgInR5cGUiIF0sCiAgICAgIFsgIlVOSUZPUk1fU0laRSIsICJzaXplIiBdLCAgLy8gbnVtIGVsZW1lbnRzCiAgICAgIFsgIlVOSUZPUk1fQkxPQ0tfSU5ERVgiLCAiYmxvY2tOZHgiIF0sCiAgICAgIFsgIlVOSUZPUk1fT0ZGU0VUIiwgIm9mZnNldCIsIF0sCiAgICBdLmZvckVhY2goZnVuY3Rpb24ocGFpcikgewogICAgICBjb25zdCBwbmFtZSA9IHBhaXJbMF07CiAgICAgIGNvbnN0IGtleSA9IHBhaXJbMV07CiAgICAgIGdsLmdldEFjdGl2ZVVuaWZvcm1zKHByb2dyYW0sIHVuaWZvcm1JbmRpY2VzLCBnbFtwbmFtZV0pLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5keCkgewogICAgICAgIHVuaWZvcm1EYXRhW25keF1ba2V5XSA9IHZhbHVlOwogICAgICB9KTsKICAgIH0pOwoKICAgIGNvbnN0IGJsb2NrU3BlY3MgPSB7fTsKCiAgICBjb25zdCBudW1Vbmlmb3JtQmxvY2tzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBBQ1RJVkVfVU5JRk9STV9CTE9DS1MpOwogICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVVuaWZvcm1CbG9ja3M7ICsraWkpIHsKICAgICAgY29uc3QgbmFtZSA9IGdsLmdldEFjdGl2ZVVuaWZvcm1CbG9ja05hbWUocHJvZ3JhbSwgaWkpOwogICAgICBjb25zdCBibG9ja1NwZWMgPSB7CiAgICAgICAgaW5kZXg6IGdsLmdldFVuaWZvcm1CbG9ja0luZGV4KHByb2dyYW0sIG5hbWUpLAogICAgICAgIHVzZWRCeVZlcnRleFNoYWRlcjogZ2wuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKHByb2dyYW0sIGlpLCBVTklGT1JNX0JMT0NLX1JFRkVSRU5DRURfQllfVkVSVEVYX1NIQURFUiksCiAgICAgICAgdXNlZEJ5RnJhZ21lbnRTaGFkZXI6IGdsLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihwcm9ncmFtLCBpaSwgVU5JRk9STV9CTE9DS19SRUZFUkVOQ0VEX0JZX0ZSQUdNRU5UX1NIQURFUiksCiAgICAgICAgc2l6ZTogZ2wuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKHByb2dyYW0sIGlpLCBVTklGT1JNX0JMT0NLX0RBVEFfU0laRSksCiAgICAgICAgdW5pZm9ybUluZGljZXM6IGdsLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihwcm9ncmFtLCBpaSwgVU5JRk9STV9CTE9DS19BQ1RJVkVfVU5JRk9STV9JTkRJQ0VTKSwKICAgICAgfTsKICAgICAgYmxvY2tTcGVjLnVzZWQgPSBibG9ja1NwZWMudXNlZEJ5VmVydGV4U2hhZGVyIHx8IGJsb2NrU3BlYy51c2VkQnlGcmFnbWVudFNoYWRlcjsKICAgICAgYmxvY2tTcGVjc1tuYW1lXSA9IGJsb2NrU3BlYzsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBibG9ja1NwZWNzOiBibG9ja1NwZWNzLAogICAgICB1bmlmb3JtRGF0YTogdW5pZm9ybURhdGEsCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gc2V0VW5pZm9ybVRyZWUodHJlZSwgdmFsdWVzKSB7CiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdmFsdWVzKSB7CiAgICAgIGNvbnN0IHByb3AgPSB0cmVlW25hbWVdOwogICAgICBpZiAodHlwZW9mIHByb3AgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBwcm9wKHZhbHVlc1tuYW1lXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VW5pZm9ybVRyZWUodHJlZVtuYW1lXSwgdmFsdWVzW25hbWVdKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogU2V0IHVuaWZvcm1zIGFuZCBiaW5kcyByZWxhdGVkIHRleHR1cmVzLgogICAqCiAgICogZXhhbXBsZToKICAgKgogICAqICAgICBjb25zdCBwcm9ncmFtSW5mbyA9IGNyZWF0ZVByb2dyYW1JbmZvKAogICAqICAgICAgICAgZ2wsIFsic29tZS12cyIsICJzb21lLWZzIl0pOwogICAqCiAgICogICAgIGNvbnN0IHRleDEgPSBnbC5jcmVhdGVUZXh0dXJlKCk7CiAgICogICAgIGNvbnN0IHRleDIgPSBnbC5jcmVhdGVUZXh0dXJlKCk7CiAgICoKICAgKiAgICAgLi4uIGFzc3VtZSB3ZSBzZXR1cCB0aGUgdGV4dHVyZXMgd2l0aCBkYXRhIC4uLgogICAqCiAgICogICAgIGNvbnN0IHVuaWZvcm1zID0gewogICAqICAgICAgIHVfc29tZVNhbXBsZXI6IHRleDEsCiAgICogICAgICAgdV9zb21lT3RoZXJTYW1wbGVyOiB0ZXgyLAogICAqICAgICAgIHVfc29tZUNvbG9yOiBbMSwwLDAsMV0sCiAgICogICAgICAgdV9zb21lUG9zaXRpb246IFswLDEsMV0sCiAgICogICAgICAgdV9zb21lTWF0cml4OiBbCiAgICogICAgICAgICAxLDAsMCwwLAogICAqICAgICAgICAgMCwxLDAsMCwKICAgKiAgICAgICAgIDAsMCwxLDAsCiAgICogICAgICAgICAwLDAsMCwwLAogICAqICAgICAgIF0sCiAgICogICAgIH07CiAgICoKICAgKiAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtSW5mby5wcm9ncmFtKTsKICAgKgogICAqIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJpbmQgdGhlIHRleHR1cmVzIEFORCBzZXQgdGhlCiAgICogdW5pZm9ybXMuCiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgdW5pZm9ybXMpOwogICAqCiAgICogRm9yIHRoZSBleGFtcGxlIGFib3ZlIGl0IGlzIGVxdWl2YWxlbnQgdG8KICAgKgogICAqICAgICBsZXQgdGV4VW5pdCA9IDA7CiAgICogICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyB0ZXhVbml0KTsKICAgKiAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4MSk7CiAgICogICAgIGdsLnVuaWZvcm0xaSh1X3NvbWVTYW1wbGVyTG9jYXRpb24sIHRleFVuaXQrKyk7CiAgICogICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyB0ZXhVbml0KTsKICAgKiAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4Mik7CiAgICogICAgIGdsLnVuaWZvcm0xaSh1X3NvbWVTYW1wbGVyTG9jYXRpb24sIHRleFVuaXQrKyk7CiAgICogICAgIGdsLnVuaWZvcm00ZnYodV9zb21lQ29sb3JMb2NhdGlvbiwgWzEsIDAsIDAsIDFdKTsKICAgKiAgICAgZ2wudW5pZm9ybTNmdih1X3NvbWVQb3NpdGlvbkxvY2F0aW9uLCBbMCwgMSwgMV0pOwogICAqICAgICBnbC51bmlmb3JtTWF0cml4NGZ2KHVfc29tZU1hdHJpeCwgZmFsc2UsIFsKICAgKiAgICAgICAgIDEsMCwwLDAsCiAgICogICAgICAgICAwLDEsMCwwLAogICAqICAgICAgICAgMCwwLDEsMCwKICAgKiAgICAgICAgIDAsMCwwLDAsCiAgICogICAgICAgXSk7CiAgICoKICAgKiBOb3RlIGl0IGlzIHBlcmZlY3RseSByZWFzb25hYmxlIHRvIGNhbGwgYHNldFVuaWZvcm1zYCBtdWx0aXBsZSB0aW1lcy4gRm9yIGV4YW1wbGUKICAgKgogICAqICAgICBjb25zdCB1bmlmb3JtcyA9IHsKICAgKiAgICAgICB1X3NvbWVTYW1wbGVyOiB0ZXgxLAogICAqICAgICAgIHVfc29tZU90aGVyU2FtcGxlcjogdGV4MiwKICAgKiAgICAgfTsKICAgKgogICAqICAgICBjb25zdCBtb3JlVW5pZm9ybXMgewogICAqICAgICAgIHVfc29tZUNvbG9yOiBbMSwwLDAsMV0sCiAgICogICAgICAgdV9zb21lUG9zaXRpb246IFswLDEsMV0sCiAgICogICAgICAgdV9zb21lTWF0cml4OiBbCiAgICogICAgICAgICAxLDAsMCwwLAogICAqICAgICAgICAgMCwxLDAsMCwKICAgKiAgICAgICAgIDAsMCwxLDAsCiAgICogICAgICAgICAwLDAsMCwwLAogICAqICAgICAgIF0sCiAgICogICAgIH07CiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgdW5pZm9ybXMpOwogICAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCBtb3JlVW5pZm9ybXMpOwogICAqCiAgICogWW91IGNhbiBhbHNvIGFkZCBXZWJHTFNhbXBsZXJzIHRvIHVuaWZvcm0gc2FtcGxlcnMgYXMgaW4KICAgKgogICAqICAgICBjb25zdCB1bmlmb3JtcyA9IHsKICAgKiAgICAgICB1X3NvbWVTYW1wbGVyOiB7CiAgICogICAgICAgICB0ZXh0dXJlOiBzb21lV2ViR0xUZXh0dXJlLAogICAqICAgICAgICAgc2FtcGxlcjogc29tZVdlYkdMU2FtcGxlciwKICAgKiAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogSW4gd2hpY2ggY2FzZSBib3RoIHRoZSBzYW1wbGVyIGFuZCB0ZXh0dXJlIHdpbGwgYmUgYm91bmQgdG8gdGhlCiAgICogc2FtZSB1bml0LgogICAqCiAgICogQHBhcmFtIHsobW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm98T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPil9IHNldHRlcnMgYSBgUHJvZ3JhbUluZm9gIGFzIHJldHVybmVkIGZyb20gYGNyZWF0ZVByb2dyYW1JbmZvYCBvciB0aGUgc2V0dGVycyByZXR1cm5lZCBmcm9tCiAgICogICAgICAgIGBjcmVhdGVVbmlmb3JtU2V0dGVyc2AuCiAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgPz59IHZhbHVlcyBhbiBvYmplY3Qgd2l0aCB2YWx1ZXMgZm9yIHRoZQogICAqICAgICAgICB1bmlmb3Jtcy4KICAgKiAgIFlvdSBjYW4gcGFzcyBtdWx0aXBsZSBvYmplY3RzIGJ5IHB1dHRpbmcgdGhlbSBpbiBhbiBhcnJheSBvciBieSBjYWxsaW5nIHdpdGggbW9yZSBhcmd1bWVudHMuRm9yIGV4YW1wbGUKICAgKgogICAqICAgICBjb25zdCBzaGFyZWRVbmlmb3JtcyA9IHsKICAgKiAgICAgICB1X2ZvZ05lYXI6IDEwLAogICAqICAgICAgIHVfcHJvamVjdGlvbjogLi4uCiAgICogICAgICAgLi4uCiAgICogICAgIH07CiAgICoKICAgKiAgICAgY29uc3QgbG9jYWxVbmlmb3JtcyA9IHsKICAgKiAgICAgICB1X3dvcmxkOiAuLi4KICAgKiAgICAgICB1X2RpZmZ1c2VDb2xvcjogLi4uCiAgICogICAgIH07CiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgc2hhcmVkVW5pZm9ybXMsIGxvY2FsVW5pZm9ybXMpOwogICAqCiAgICogICAgIC8vIGlzIHRoZSBzYW1lIGFzCiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgW3NoYXJlZFVuaWZvcm1zLCBsb2NhbFVuaWZvcm1zXSk7CiAgICoKICAgKiAgICAgLy8gaXMgdGhlIHNhbWUgYXMKICAgKgogICAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCBzaGFyZWRVbmlmb3Jtcyk7CiAgICogICAgIHR3Z2wuc2V0VW5pZm9ybXMocHJvZ3JhbUluZm8sIGxvY2FsVW5pZm9ybXN9OwogICAqCiAgICogICBZb3UgY2FuIGFsc28gZmlsbCBvdXQgc3RydWN0dXJlIGFuZCBhcnJheSB2YWx1ZXMgZWl0aGVyIHZpYQogICAqICAgc2hvcnRjdXQuIEV4YW1wbGUKICAgKgogICAqICAgICAvLyAtLSBpbiBzaGFkZXIgLS0KICAgKiAgICAgc3RydWN0IExpZ2h0IHsKICAgKiAgICAgICBmbG9hdCBpbnRlbnNpdHk7CiAgICogICAgICAgdmVjNCBjb2xvcjsKICAgKiAgICAgICBmbG9hdCBuZWFyRmFyWzJdOwogICAqICAgICB9OwogICAqICAgICB1bmlmb3JtIExpZ2h0IGxpZ2h0c1syXTsKICAgKgogICAqICAgICAvLyBpbiBKYXZhU2NyaXB0CiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgewogICAqICAgICAgIGxpZ2h0czogWwogICAqICAgICAgICAgeyBpbnRlbnNpdHk6IDUuMCwgY29sb3I6IFsxLCAwLCAwLCAxXSwgbmVhckZhclswLjEsIDEwXSB9LAogICAqICAgICAgICAgeyBpbnRlbnNpdHk6IDIuMCwgY29sb3I6IFswLCAwLCAxLCAxXSwgbmVhckZhclswLjIsIDE1XSB9LAogICAqICAgICAgIF0sCiAgICogICAgIH0pOwogICAqCiAgICogICBvciB0aGUgbW9yZSB0cmFkaXRpb25hbCB3YXkKICAgKgogICAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCB7CiAgICogICAgICAgImxpZ2h0c1swXS5pbnRlbnNpdHkiOiA1LjAsCiAgICogICAgICAgImxpZ2h0c1swXS5jb2xvciI6IFsxLCAwLCAwLCAxXSwKICAgKiAgICAgICAibGlnaHRzWzBdLm5lYXJGYXIiOiBbMC4xLCAxMF0sCiAgICogICAgICAgImxpZ2h0c1sxXS5pbnRlbnNpdHkiOiAyLjAsCiAgICogICAgICAgImxpZ2h0c1sxXS5jb2xvciI6IFswLCAwLCAxLCAxXSwKICAgKiAgICAgICAibGlnaHRzWzFdLm5lYXJGYXIiOiBbMC4yLCAxNV0sCiAgICogICAgIH0pOwogICAqCiAgICogICBZb3UgY2FuIGFsc28gc3BlY2lmeSBwYXJ0aWFsIHBhdGhzCiAgICoKICAgKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgewogICAqICAgICAgICdsaWdodHNbMV0nOiB7IGludGVuc2l0eTogNS4wLCBjb2xvcjogWzEsIDAsIDAsIDFdLCBuZWFyRmFyWzAuMiwgMTVdIH0sCiAgICogICAgIH0pOwogICAqCiAgICogICBCdXQgeW91IGNhbiBub3Qgc3BlY2lmeSBsZWFmIGFycmF5IGluZGljZXMKICAgKgogICAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCB7CiAgICogICAgICAgJ2xpZ2h0c1sxXS5uZWFyRmFyWzFdJzogMTUsICAgICAvLyBCQUQhIG5lYXJGYXIgaXMgYSBsZWFmCiAgICogICAgICAgJ2xpZ2h0c1sxXS5uZWFyRmFyJzogWzAuMiwgMTVdLCAvLyBHT09ECiAgICogICAgIH0pOwogICAqCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zCiAgICovCiAgZnVuY3Rpb24gc2V0VW5pZm9ybXMoc2V0dGVycywgLi4uYXJncykgeyAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgY29uc3QgYWN0dWFsU2V0dGVycyA9IHNldHRlcnMudW5pZm9ybVNldHRlcnMgfHwgc2V0dGVyczsKICAgIGNvbnN0IG51bUFyZ3MgPSBhcmdzLmxlbmd0aDsKICAgIGZvciAobGV0IGFOZHggPSAwOyBhTmR4IDwgbnVtQXJnczsgKythTmR4KSB7CiAgICAgIGNvbnN0IHZhbHVlcyA9IGFyZ3NbYU5keF07CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykpIHsKICAgICAgICBjb25zdCBudW1WYWx1ZXMgPSB2YWx1ZXMubGVuZ3RoOwogICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1WYWx1ZXM7ICsraWkpIHsKICAgICAgICAgIHNldFVuaWZvcm1zKGFjdHVhbFNldHRlcnMsIHZhbHVlc1tpaV0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdmFsdWVzKSB7CiAgICAgICAgICBjb25zdCBzZXR0ZXIgPSBhY3R1YWxTZXR0ZXJzW25hbWVdOwogICAgICAgICAgaWYgKHNldHRlcikgewogICAgICAgICAgICBzZXR0ZXIodmFsdWVzW25hbWVdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIENyZWF0ZXMgc2V0dGVyIGZ1bmN0aW9ucyBmb3IgYWxsIGF0dHJpYnV0ZXMgb2YgYSBzaGFkZXIKICAgKiBwcm9ncmFtLiBZb3UgY2FuIHBhc3MgdGhpcyB0byB7QGxpbmsgbW9kdWxlOnR3Z2wuc2V0QnVmZmVyc0FuZEF0dHJpYnV0ZXN9IHRvIHNldCBhbGwgeW91ciBidWZmZXJzIGFuZCBhdHRyaWJ1dGVzLgogICAqCiAgICogQHNlZSB7QGxpbmsgbW9kdWxlOnR3Z2wuc2V0QXR0cmlidXRlc30gZm9yIGV4YW1wbGUKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCB0byB1c2UuCiAgICogQHBhcmFtIHtXZWJHTFByb2dyYW19IHByb2dyYW0gdGhlIHByb2dyYW0gdG8gY3JlYXRlIHNldHRlcnMgZm9yLgogICAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj59IGFuIG9iamVjdCB3aXRoIGEgc2V0dGVyIGZvciBlYWNoIGF0dHJpYnV0ZSBieSBuYW1lLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZVNldHRlcnMoZ2wsIHByb2dyYW0pIHsKICAgIGNvbnN0IGF0dHJpYlNldHRlcnMgPSB7CiAgICB9OwoKICAgIGNvbnN0IG51bUF0dHJpYnMgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIEFDVElWRV9BVFRSSUJVVEVTKTsKICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1BdHRyaWJzOyArK2lpKSB7CiAgICAgIGNvbnN0IGF0dHJpYkluZm8gPSBnbC5nZXRBY3RpdmVBdHRyaWIocHJvZ3JhbSwgaWkpOwogICAgICBpZiAoaXNCdWlsdEluKGF0dHJpYkluZm8pKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgY29uc3QgaW5kZXggPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBhdHRyaWJJbmZvLm5hbWUpOwogICAgICBjb25zdCB0eXBlSW5mbyA9IGF0dHJUeXBlTWFwW2F0dHJpYkluZm8udHlwZV07CiAgICAgIGNvbnN0IHNldHRlciA9IHR5cGVJbmZvLnNldHRlcihnbCwgaW5kZXgsIHR5cGVJbmZvKTsKICAgICAgc2V0dGVyLmxvY2F0aW9uID0gaW5kZXg7CiAgICAgIGF0dHJpYlNldHRlcnNbYXR0cmliSW5mby5uYW1lXSA9IHNldHRlcjsKICAgIH0KCiAgICByZXR1cm4gYXR0cmliU2V0dGVyczsKICB9CgogIC8qKgogICAqIFNldHMgYXR0cmlidXRlcyBhbmQgYmluZHMgYnVmZmVycyAoZGVwcmVjYXRlZC4uLiB1c2Uge0BsaW5rIG1vZHVsZTp0d2dsLnNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzfSkKICAgKgogICAqIEV4YW1wbGU6CiAgICoKICAgKiAgICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0cygKICAgKiAgICAgICAgIGdsLCBbInNvbWUtdnMiLCAic29tZS1mcyIpOwogICAqCiAgICogICAgIGNvbnN0IGF0dHJpYlNldHRlcnMgPSBjcmVhdGVBdHRyaWJ1dGVTZXR0ZXJzKHByb2dyYW0pOwogICAqCiAgICogICAgIGNvbnN0IHBvc2l0aW9uQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7CiAgICogICAgIGNvbnN0IHRleGNvb3JkQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7CiAgICoKICAgKiAgICAgY29uc3QgYXR0cmlicyA9IHsKICAgKiAgICAgICBhX3Bvc2l0aW9uOiB7YnVmZmVyOiBwb3NpdGlvbkJ1ZmZlciwgbnVtQ29tcG9uZW50czogM30sCiAgICogICAgICAgYV90ZXhjb29yZDoge2J1ZmZlcjogdGV4Y29vcmRCdWZmZXIsIG51bUNvbXBvbmVudHM6IDJ9LAogICAqICAgICB9OwogICAqCiAgICogICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7CiAgICoKICAgKiBUaGlzIHdpbGwgYXV0b21hdGljYWxseSBiaW5kIHRoZSBidWZmZXJzIEFORCBzZXQgdGhlCiAgICogYXR0cmlidXRlcy4KICAgKgogICAqICAgICBzZXRBdHRyaWJ1dGVzKGF0dHJpYlNldHRlcnMsIGF0dHJpYnMpOwogICAqCiAgICogUHJvcGVydGllcyBvZiBhdHRyaWJzLiBGb3IgZWFjaCBhdHRyaWIgeW91IGNhbiBhZGQKICAgKiBwcm9wZXJ0aWVzOgogICAqCiAgICogKiAgIHR5cGU6IHRoZSB0eXBlIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlci4gRGVmYXVsdCA9IGdsLkZMT0FUCiAgICogKiAgIG5vcm1hbGl6ZTogd2hldGhlciBvciBub3QgdG8gbm9ybWFsaXplIHRoZSBkYXRhLiBEZWZhdWx0ID0gZmFsc2UKICAgKiAqICAgc3RyaWRlOiB0aGUgc3RyaWRlLiBEZWZhdWx0ID0gMAogICAqICogICBvZmZzZXQ6IG9mZnNldCBpbnRvIHRoZSBidWZmZXIuIERlZmF1bHQgPSAwCiAgICogKiAgIGRpdmlzb3I6IHRoZSBkaXZpc29yIGZvciBpbnN0YW5jZXMuIERlZmF1bHQgPSB1bmRlZmluZWQKICAgKgogICAqIEZvciBleGFtcGxlIGlmIHlvdSBoYWQgMyB2YWx1ZSBmbG9hdCBwb3NpdGlvbnMsIDIgdmFsdWUKICAgKiBmbG9hdCB0ZXhjb29yZCBhbmQgNCB2YWx1ZSB1aW50OCBjb2xvcnMgeW91J2Qgc2V0dXAgeW91cgogICAqIGF0dHJpYnMgbGlrZSB0aGlzCiAgICoKICAgKiAgICAgY29uc3QgYXR0cmlicyA9IHsKICAgKiAgICAgICBhX3Bvc2l0aW9uOiB7YnVmZmVyOiBwb3NpdGlvbkJ1ZmZlciwgbnVtQ29tcG9uZW50czogM30sCiAgICogICAgICAgYV90ZXhjb29yZDoge2J1ZmZlcjogdGV4Y29vcmRCdWZmZXIsIG51bUNvbXBvbmVudHM6IDJ9LAogICAqICAgICAgIGFfY29sb3I6IHsKICAgKiAgICAgICAgIGJ1ZmZlcjogY29sb3JCdWZmZXIsCiAgICogICAgICAgICBudW1Db21wb25lbnRzOiA0LAogICAqICAgICAgICAgdHlwZTogZ2wuVU5TSUdORURfQllURSwKICAgKiAgICAgICAgIG5vcm1hbGl6ZTogdHJ1ZSwKICAgKiAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSBzZXR0ZXJzIEF0dHJpYnV0ZSBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlQXR0cmlidXRlU2V0dGVycwogICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+fSBidWZmZXJzIEF0dHJpYkluZm9zIG1hcHBlZCBieSBhdHRyaWJ1dGUgbmFtZS4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXMKICAgKiBAZGVwcmVjYXRlZCB1c2Uge0BsaW5rIG1vZHVsZTp0d2dsLnNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzfQogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhzZXR0ZXJzLCBidWZmZXJzKSB7CiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gYnVmZmVycykgewogICAgICBjb25zdCBzZXR0ZXIgPSBzZXR0ZXJzW25hbWVdOwogICAgICBpZiAoc2V0dGVyKSB7CiAgICAgICAgc2V0dGVyKGJ1ZmZlcnNbbmFtZV0pOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBTZXRzIGF0dHJpYnV0ZXMgYW5kIGJ1ZmZlcnMgaW5jbHVkaW5nIHRoZSBgRUxFTUVOVF9BUlJBWV9CVUZGRVJgIGlmIGFwcHJvcHJpYXRlCiAgICoKICAgKiBFeGFtcGxlOgogICAqCiAgICogICAgIGNvbnN0IHByb2dyYW1JbmZvID0gY3JlYXRlUHJvZ3JhbUluZm8oCiAgICogICAgICAgICBnbCwgWyJzb21lLXZzIiwgInNvbWUtZnMiKTsKICAgKgogICAqICAgICBjb25zdCBhcnJheXMgPSB7CiAgICogICAgICAgcG9zaXRpb246IHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMCwgMCwgMTAsIDEwLCAwXSwgfSwKICAgKiAgICAgICB0ZXhjb29yZDogeyBudW1Db21wb25lbnRzOiAyLCBkYXRhOiBbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0sICAgICAgICAgICAgICAgICB9LAogICAqICAgICB9OwogICAqCiAgICogICAgIGNvbnN0IGJ1ZmZlckluZm8gPSBjcmVhdGVCdWZmZXJJbmZvRnJvbUFycmF5cyhnbCwgYXJyYXlzKTsKICAgKgogICAqICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW1JbmZvLnByb2dyYW0pOwogICAqCiAgICogVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgYmluZCB0aGUgYnVmZmVycyBBTkQgc2V0IHRoZQogICAqIGF0dHJpYnV0ZXMuCiAgICoKICAgKiAgICAgc2V0QnVmZmVyc0FuZEF0dHJpYnV0ZXMoZ2wsIHByb2dyYW1JbmZvLCBidWZmZXJJbmZvKTsKICAgKgogICAqIEZvciB0aGUgZXhhbXBsZSBhYm92ZSBpdCBpcyBlcXVpdmFsZW50IHRvCiAgICoKICAgKiAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc2l0aW9uQnVmZmVyKTsKICAgKiAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYV9wb3NpdGlvbkxvY2F0aW9uKTsKICAgKiAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihhX3Bvc2l0aW9uTG9jYXRpb24sIDMsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7CiAgICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXhjb29yZEJ1ZmZlcik7CiAgICogICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfdGV4Y29vcmRMb2NhdGlvbik7CiAgICogICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoYV90ZXhjb29yZExvY2F0aW9uLCA0LCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApOwogICAqCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0LgogICAqIEBwYXJhbSB7KG1vZHVsZTp0d2dsLlByb2dyYW1JbmZvfE9iamVjdC48c3RyaW5nLCBmdW5jdGlvbj4pfSBzZXR0ZXJzIEEgYFByb2dyYW1JbmZvYCBhcyByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVQcm9ncmFtSW5mb30gb3IgQXR0cmlidXRlIHNldHRlcnMgYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlQXR0cmlidXRlU2V0dGVyc30KICAgKiBAcGFyYW0geyhtb2R1bGU6dHdnbC5CdWZmZXJJbmZvfG1vZHVsZTp0d2dsLlZlcnRleEFycmF5SW5mbyl9IGJ1ZmZlcnMgYSBgQnVmZmVySW5mb2AgYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXN9LgogICAqICAgb3IgYSBgVmVydGV4QXJyYXlJbmZvYCBhcyByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVWZXJ0ZXhBcnJheUluZm99CiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zCiAgICovCiAgZnVuY3Rpb24gc2V0QnVmZmVyc0FuZEF0dHJpYnV0ZXMoZ2wsIHByb2dyYW1JbmZvLCBidWZmZXJzKSB7CiAgICBpZiAoYnVmZmVycy52ZXJ0ZXhBcnJheU9iamVjdCkgewogICAgICBnbC5iaW5kVmVydGV4QXJyYXkoYnVmZmVycy52ZXJ0ZXhBcnJheU9iamVjdCk7CiAgICB9IGVsc2UgewogICAgICBzZXRBdHRyaWJ1dGVzKHByb2dyYW1JbmZvLmF0dHJpYlNldHRlcnMgfHwgcHJvZ3JhbUluZm8sIGJ1ZmZlcnMuYXR0cmlicyk7CiAgICAgIGlmIChidWZmZXJzLmluZGljZXMpIHsKICAgICAgICBnbC5iaW5kQnVmZmVyKEVMRU1FTlRfQVJSQVlfQlVGRkVSJDEsIGJ1ZmZlcnMuaW5kaWNlcyk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IFByb2dyYW1JbmZvCiAgICogQHByb3BlcnR5IHtXZWJHTFByb2dyYW19IHByb2dyYW0gQSBzaGFkZXIgcHJvZ3JhbQogICAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgZnVuY3Rpb24+fSB1bmlmb3JtU2V0dGVycyBvYmplY3Qgb2Ygc2V0dGVycyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZVVuaWZvcm1TZXR0ZXJzLAogICAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgZnVuY3Rpb24+fSBhdHRyaWJTZXR0ZXJzIG9iamVjdCBvZiBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlQXR0cmliU2V0dGVycywKICAgKiBAcHJvcGVydHkge21vZHVsZTp0d2dsLlVuaWZvcm1CbG9ja1NwZWN9IFt1bmlmb3JtQmxvY2tTcGVjXSBhIHVuaWZvcm0gYmxvY2sgc3BlYyBmb3IgbWFraW5nIFVuaWZvcm1CbG9ja0luZm9zIHdpdGggY3JlYXRlVW5pZm9ybUJsb2NrSW5mbyBldGMuLgogICAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgbW9kdWxlOnR3Z2wuVHJhbnNmb3JtRmVlZGJhY2tJbmZvPn0gW3RyYW5zZm9ybUZlZWRiYWNrSW5mb10gaW5mbyBmb3IgdHJhbnNmb3JtIGZlZWRiYWNrcwogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbAogICAqLwoKICAvKioKICAgKiBDcmVhdGVzIGEgUHJvZ3JhbUluZm8gZnJvbSBhbiBleGlzdGluZyBwcm9ncmFtLgogICAqCiAgICogQSBQcm9ncmFtSW5mbyBjb250YWlucwogICAqCiAgICogICAgIHByb2dyYW1JbmZvID0gewogICAqICAgICAgICBwcm9ncmFtOiBXZWJHTFByb2dyYW0sCiAgICogICAgICAgIHVuaWZvcm1TZXR0ZXJzOiBvYmplY3Qgb2Ygc2V0dGVycyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZVVuaWZvcm1TZXR0ZXJzLAogICAqICAgICAgICBhdHRyaWJTZXR0ZXJzOiBvYmplY3Qgb2Ygc2V0dGVycyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZUF0dHJpYlNldHRlcnMsCiAgICogICAgIH0KICAgKgogICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0CiAgICogICAgICAgIHRvIHVzZS4KICAgKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbX0gcHJvZ3JhbSBhbiBleGlzdGluZyBXZWJHTFByb2dyYW0uCiAgICogQHJldHVybiB7bW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm99IFRoZSBjcmVhdGVkIFByb2dyYW1JbmZvLgogICAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZVByb2dyYW1JbmZvRnJvbVByb2dyYW0oZ2wsIHByb2dyYW0pIHsKICAgIGNvbnN0IHVuaWZvcm1TZXR0ZXJzID0gY3JlYXRlVW5pZm9ybVNldHRlcnMoZ2wsIHByb2dyYW0pOwogICAgY29uc3QgYXR0cmliU2V0dGVycyA9IGNyZWF0ZUF0dHJpYnV0ZVNldHRlcnMoZ2wsIHByb2dyYW0pOwogICAgY29uc3QgcHJvZ3JhbUluZm8gPSB7CiAgICAgIHByb2dyYW0sCiAgICAgIHVuaWZvcm1TZXR0ZXJzLAogICAgICBhdHRyaWJTZXR0ZXJzLAogICAgfTsKCiAgICBpZiAoaXNXZWJHTDIoZ2wpKSB7CiAgICAgIHByb2dyYW1JbmZvLnVuaWZvcm1CbG9ja1NwZWMgPSBjcmVhdGVVbmlmb3JtQmxvY2tTcGVjRnJvbVByb2dyYW0oZ2wsIHByb2dyYW0pOwogICAgICBwcm9ncmFtSW5mby50cmFuc2Zvcm1GZWVkYmFja0luZm8gPSBjcmVhdGVUcmFuc2Zvcm1GZWVkYmFja0luZm8oZ2wsIHByb2dyYW0pOwogICAgfQoKICAgIHJldHVybiBwcm9ncmFtSW5mbzsKICB9CgogIGNvbnN0IG5vdElkUkUgPSAvXHN8e3x9fDsvOwoKICAvKioKICAgKiBDcmVhdGVzIGEgUHJvZ3JhbUluZm8gZnJvbSAyIHNvdXJjZXMuCiAgICoKICAgKiBBIFByb2dyYW1JbmZvIGNvbnRhaW5zCiAgICoKICAgKiAgICAgcHJvZ3JhbUluZm8gPSB7CiAgICogICAgICAgIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwKICAgKiAgICAgICAgdW5pZm9ybVNldHRlcnM6IG9iamVjdCBvZiBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlVW5pZm9ybVNldHRlcnMsCiAgICogICAgICAgIGF0dHJpYlNldHRlcnM6IG9iamVjdCBvZiBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlQXR0cmliU2V0dGVycywKICAgKiAgICAgfQogICAqCiAgICogTk9URTogVGhlcmUgYXJlIDQgc2lnbmF0dXJlcyBmb3IgdGhpcyBmdW5jdGlvbgogICAqCiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUluZm8oZ2wsIFt2cywgZnNdLCBvcHRpb25zKTsKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtSW5mbyhnbCwgW3ZzLCBmc10sIG9wdF9lcnJGdW5jKTsKICAgKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtSW5mbyhnbCwgW3ZzLCBmc10sIG9wdF9hdHRyaWJzLCBvcHRfZXJyRnVuYyk7CiAgICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUluZm8oZ2wsIFt2cywgZnNdLCBvcHRfYXR0cmlicywgb3B0X2xvY2F0aW9ucywgb3B0X2VyckZ1bmMpOwogICAqCiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiAgICAgICAgdG8gdXNlLgogICAqIEBwYXJhbSB7c3RyaW5nW119IHNoYWRlclNvdXJjZXMgQXJyYXkgb2Ygc291cmNlcyBmb3IgdGhlCiAgICogICAgICAgIHNoYWRlcnMgb3IgaWRzLiBUaGUgZmlyc3QgaXMgYXNzdW1lZCB0byBiZSB0aGUgdmVydGV4IHNoYWRlciwKICAgKiAgICAgICAgdGhlIHNlY29uZCB0aGUgZnJhZ21lbnQgc2hhZGVyLgogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuUHJvZ3JhbU9wdGlvbnN8c3RyaW5nW118bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9hdHRyaWJzXSBPcHRpb25zIGZvciB0aGUgcHJvZ3JhbSBvciBhbiBhcnJheSBvZiBhdHRyaWJzIG5hbWVzIG9yIGFuIGVycm9yIGNhbGxiYWNrLiBMb2NhdGlvbnMgd2lsbCBiZSBhc3NpZ25lZCBieSBpbmRleCBpZiBub3QgcGFzc2VkIGluCiAgICogQHBhcmFtIHtudW1iZXJbXX0gW29wdF9sb2NhdGlvbnN8bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja10gVGhlIGxvY2F0aW9ucyBmb3IgdGhlLiBBIHBhcmFsbGVsIGFycmF5IHRvIG9wdF9hdHRyaWJzIGxldHRpbmcgeW91IGFzc2lnbiBsb2NhdGlvbnMgb3IgYW4gZXJyb3IgY2FsbGJhY2suCiAgICogQHBhcmFtIHttb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrfSBbb3B0X2Vycm9yQ2FsbGJhY2tdIGNhbGxiYWNrIGZvciBlcnJvcnMuIEJ5IGRlZmF1bHQgaXQganVzdCBwcmludHMgYW4gZXJyb3IgdG8gdGhlIGNvbnNvbGUKICAgKiAgICAgICAgb24gZXJyb3IuIElmIHlvdSB3YW50IHNvbWV0aGluZyBlbHNlIHBhc3MgYW4gY2FsbGJhY2suIEl0J3MgcGFzc2VkIGFuIGVycm9yIG1lc3NhZ2UuCiAgICogQHJldHVybiB7bW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm8/fSBUaGUgY3JlYXRlZCBQcm9ncmFtSW5mbyBvciBudWxsIGlmIGl0IGZhaWxlZCB0byBsaW5rIG9yIGNvbXBpbGUKICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXMKICAgKi8KICBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtSW5mbygKICAgICAgZ2wsIHNoYWRlclNvdXJjZXMsIG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyb3JDYWxsYmFjaykgewogICAgY29uc3QgcHJvZ09wdGlvbnMgPSBnZXRQcm9ncmFtT3B0aW9ucyhvcHRfYXR0cmlicywgb3B0X2xvY2F0aW9ucywgb3B0X2Vycm9yQ2FsbGJhY2spOwogICAgY29uc3QgZXJyb3JzID0gW107CiAgICBzaGFkZXJTb3VyY2VzID0gc2hhZGVyU291cmNlcy5tYXAoZnVuY3Rpb24oc291cmNlKSB7CiAgICAgIC8vIExldHMgYXNzdW1lIGlmIHRoZXJlIGlzIG5vIFxuIGl0J3MgYW4gaWQKICAgICAgaWYgKCFub3RJZFJFLnRlc3Qoc291cmNlKSkgewogICAgICAgIGNvbnN0IHNjcmlwdCA9IGdldEVsZW1lbnRCeUlkKHNvdXJjZSk7CiAgICAgICAgaWYgKCFzY3JpcHQpIHsKICAgICAgICAgIGNvbnN0IGVyciA9IGBubyBlbGVtZW50IHdpdGggaWQ6ICR7c291cmNlfWA7CiAgICAgICAgICBwcm9nT3B0aW9ucy5lcnJvckNhbGxiYWNrKGVycik7CiAgICAgICAgICBlcnJvcnMucHVzaChlcnIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzb3VyY2UgPSBzY3JpcHQudGV4dDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHNvdXJjZTsKICAgIH0pOwoKICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7CiAgICAgIHJldHVybiByZXBvcnRFcnJvcihwcm9nT3B0aW9ucywgJycpOwogICAgfQoKICAgIGNvbnN0IG9yaWdDYWxsYmFjayA9IHByb2dPcHRpb25zLmNhbGxiYWNrOwogICAgaWYgKG9yaWdDYWxsYmFjaykgewogICAgICBwcm9nT3B0aW9ucy5jYWxsYmFjayA9IChlcnIsIHByb2dyYW0pID0+IHsKICAgICAgICBvcmlnQ2FsbGJhY2soZXJyLCBlcnIgPyB1bmRlZmluZWQgOiBjcmVhdGVQcm9ncmFtSW5mb0Zyb21Qcm9ncmFtKGdsLCBwcm9ncmFtKSk7CiAgICAgIH07CiAgICB9CgogICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW1Gcm9tU291cmNlcyhnbCwgc2hhZGVyU291cmNlcywgcHJvZ09wdGlvbnMpOwogICAgaWYgKCFwcm9ncmFtKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHJldHVybiBjcmVhdGVQcm9ncmFtSW5mb0Zyb21Qcm9ncmFtKGdsLCBwcm9ncmFtKTsKICB9CgogIC8qCiAgICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlcwogICAqCiAgICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAogICAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KICAgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKICAgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKICAgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAqCiAgICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICAgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgKgogICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCiAgICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwogICAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKICAgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAgICovCgogIGNvbnN0IFRSSUFOR0xFUyAgICAgICAgICAgICAgICAgICAgICA9IDB4MDAwNDsKICBjb25zdCBVTlNJR05FRF9TSE9SVCAgICAgICAgICAgICAgICAgPSAweDE0MDM7CgogIC8qKgogICAqIERyYXdpbmcgcmVsYXRlZCBmdW5jdGlvbnMKICAgKgogICAqIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHRoZXkgYXJlIGF2YWlsYWJsZSBhdCBib3RoIGB0d2dsLmRyYXdgIGFuZCBgdHdnbGAKICAgKiBpdHNlbGYKICAgKgogICAqIFNlZSB7QGxpbmsgbW9kdWxlOnR3Z2x9IGZvciBjb3JlIGZ1bmN0aW9ucwogICAqCiAgICogQG1vZHVsZSB0d2dsL2RyYXcKICAgKi8KCiAgLyoqCiAgICogQ2FsbHMgYGdsLmRyYXdFbGVtZW50c2Agb3IgYGdsLmRyYXdBcnJheXNgLCB3aGljaGV2ZXIgaXMgYXBwcm9wcmlhdGUKICAgKgogICAqIG5vcm1hbGx5IHlvdSdkIGNhbGwgYGdsLmRyYXdFbGVtZW50c2Agb3IgYGdsLmRyYXdBcnJheXNgIHlvdXJzZWxmCiAgICogYnV0IGNhbGxpbmcgdGhpcyBtZWFucyBpZiB5b3Ugc3dpdGNoIGZyb20gaW5kZXhlZCBkYXRhIHRvIG5vbi1pbmRleGVkCiAgICogZGF0YSB5b3UgZG9uJ3QgaGF2ZSB0byByZW1lbWJlciB0byB1cGRhdGUgeW91ciBkcmF3IGNhbGwuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHQKICAgKiBAcGFyYW0geyhtb2R1bGU6dHdnbC5CdWZmZXJJbmZvfG1vZHVsZTp0d2dsLlZlcnRleEFycmF5SW5mbyl9IGJ1ZmZlckluZm8gQSBCdWZmZXJJbmZvIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzfSBvcgogICAqICAgYSBWZXJ0ZXhBcnJheUluZm8gYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlVmVydGV4QXJyYXlJbmZvfQogICAqIEBwYXJhbSB7bnVtYmVyfSBbdHlwZV0gZWcgKGdsLlRSSUFOR0xFUywgZ2wuTElORVMsIGdsLlBPSU5UUywgZ2wuVFJJQU5HTEVfU1RSSVAsIC4uLikuIERlZmF1bHRzIHRvIGBnbC5UUklBTkdMRVNgCiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb3VudF0gQW4gb3B0aW9uYWwgY291bnQuIERlZmF1bHRzIHRvIGJ1ZmZlckluZm8ubnVtRWxlbWVudHMKICAgKiBAcGFyYW0ge251bWJlcn0gW29mZnNldF0gQW4gb3B0aW9uYWwgb2Zmc2V0LiBEZWZhdWx0cyB0byAwLgogICAqIEBwYXJhbSB7bnVtYmVyfSBbaW5zdGFuY2VDb3VudF0gQW4gb3B0aW9uYWwgaW5zdGFuY2VDb3VudC4gaWYgc2V0IHRoZW4gYGRyYXdBcnJheXNJbnN0YW5jZWRgIG9yIGBkcmF3RWxlbWVudHNJbnN0YW5jZWRgIHdpbGwgYmUgY2FsbGVkCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL2RyYXcKICAgKi8KICBmdW5jdGlvbiBkcmF3QnVmZmVySW5mbyhnbCwgYnVmZmVySW5mbywgdHlwZSwgY291bnQsIG9mZnNldCwgaW5zdGFuY2VDb3VudCkgewogICAgdHlwZSA9IHR5cGUgPT09IHVuZGVmaW5lZCA/IFRSSUFOR0xFUyA6IHR5cGU7CiAgICBjb25zdCBpbmRpY2VzID0gYnVmZmVySW5mby5pbmRpY2VzOwogICAgY29uc3QgZWxlbWVudFR5cGUgPSBidWZmZXJJbmZvLmVsZW1lbnRUeXBlOwogICAgY29uc3QgbnVtRWxlbWVudHMgPSBjb3VudCA9PT0gdW5kZWZpbmVkID8gYnVmZmVySW5mby5udW1FbGVtZW50cyA6IGNvdW50OwogICAgb2Zmc2V0ID0gb2Zmc2V0ID09PSB1bmRlZmluZWQgPyAwIDogb2Zmc2V0OwogICAgaWYgKGVsZW1lbnRUeXBlIHx8IGluZGljZXMpIHsKICAgICAgaWYgKGluc3RhbmNlQ291bnQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGdsLmRyYXdFbGVtZW50c0luc3RhbmNlZCh0eXBlLCBudW1FbGVtZW50cywgZWxlbWVudFR5cGUgPT09IHVuZGVmaW5lZCA/IFVOU0lHTkVEX1NIT1JUIDogYnVmZmVySW5mby5lbGVtZW50VHlwZSwgb2Zmc2V0LCBpbnN0YW5jZUNvdW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBnbC5kcmF3RWxlbWVudHModHlwZSwgbnVtRWxlbWVudHMsIGVsZW1lbnRUeXBlID09PSB1bmRlZmluZWQgPyBVTlNJR05FRF9TSE9SVCA6IGJ1ZmZlckluZm8uZWxlbWVudFR5cGUsIG9mZnNldCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChpbnN0YW5jZUNvdW50ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBnbC5kcmF3QXJyYXlzSW5zdGFuY2VkKHR5cGUsIG9mZnNldCwgbnVtRWxlbWVudHMsIGluc3RhbmNlQ291bnQpOwogICAgICB9IGVsc2UgewogICAgICAgIGdsLmRyYXdBcnJheXModHlwZSwgb2Zmc2V0LCBudW1FbGVtZW50cyk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qCiAgICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlcwogICAqCiAgICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAogICAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KICAgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKICAgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKICAgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAqCiAgICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICAgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgKgogICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCiAgICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwogICAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKICAgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAgICovCgogIGNvbnN0IEZSQU1FQlVGRkVSICAgICAgICAgICAgICAgICAgICA9IDB4OGQ0MDsKICBjb25zdCBSRU5ERVJCVUZGRVIgICAgICAgICAgICAgICAgICAgPSAweDhkNDE7CiAgY29uc3QgVEVYVFVSRV8yRCAgICAgICAgICAgICAgICAgICAgID0gMHgwZGUxOwoKICBjb25zdCBVTlNJR05FRF9CWVRFICAgICAgICAgICAgICAgICAgPSAweDE0MDE7CgogIC8qIFBpeGVsRm9ybWF0ICovCiAgY29uc3QgREVQVEhfQ09NUE9ORU5UICAgICAgICAgICAgICAgID0gMHgxOTAyOwogIGNvbnN0IFJHQkEgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTkwODsKICBjb25zdCBERVBUSF9DT01QT05FTlQyNCAgICAgICAgICAgICAgPSAweDgxYTY7CiAgY29uc3QgREVQVEhfQ09NUE9ORU5UMzJGICAgICAgICAgICAgID0gMHg4Y2FjOwogIGNvbnN0IERFUFRIMjRfU1RFTkNJTDggICAgICAgICAgICAgICA9IDB4ODhmMDsKICBjb25zdCBERVBUSDMyRl9TVEVOQ0lMOCAgICAgICAgICAgICAgPSAweDhjYWQ7CgogIC8qIEZyYW1lYnVmZmVyIE9iamVjdC4gKi8KICBjb25zdCBSR0JBNCAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgwNTY7CiAgY29uc3QgUkdCNV9BMSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MDU3OwogIGNvbnN0IFJHQjU2NSAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ2MjsKICBjb25zdCBERVBUSF9DT01QT05FTlQxNiAgICAgICAgICAgICAgPSAweDgxQTU7CiAgY29uc3QgU1RFTkNJTF9JTkRFWCAgICAgICAgICAgICAgICAgID0gMHgxOTAxOwogIGNvbnN0IFNURU5DSUxfSU5ERVg4ICAgICAgICAgICAgICAgICA9IDB4OEQ0ODsKICBjb25zdCBERVBUSF9TVEVOQ0lMICAgICAgICAgICAgICAgICAgPSAweDg0Rjk7CiAgY29uc3QgQ09MT1JfQVRUQUNITUVOVDAgICAgICAgICAgICAgID0gMHg4Q0UwOwogIGNvbnN0IERFUFRIX0FUVEFDSE1FTlQgICAgICAgICAgICAgICA9IDB4OEQwMDsKICBjb25zdCBTVEVOQ0lMX0FUVEFDSE1FTlQgICAgICAgICAgICAgPSAweDhEMjA7CiAgY29uc3QgREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UICAgICAgID0gMHg4MjFBOwoKICAvKiBUZXh0dXJlV3JhcE1vZGUgKi8KICBjb25zdCBDTEFNUF9UT19FREdFICAgICAgICAgICAgICAgICAgPSAweDgxMkY7CgogIC8qIFRleHR1cmVNYWdGaWx0ZXIgKi8KICBjb25zdCBMSU5FQVIgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDI2MDE7CgogIC8qKgogICAqIFRoZSBvcHRpb25zIGZvciBhIGZyYW1lYnVmZmVyIGF0dGFjaG1lbnQuCiAgICoKICAgKiBOb3RlOiBGb3IgYSBgZm9ybWF0YCB0aGF0IGlzIGEgdGV4dHVyZSBpbmNsdWRlIGFsbCB0aGUgdGV4dHVyZQogICAqIG9wdGlvbnMgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IGZvciBleGFtcGxlCiAgICogYG1pbmAsIGBtYWdgLCBgY2xhbXBgLCBldGMuLi4gTm90ZSB0aGF0IHVubGlrZSB7QGxpbmsgbW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9CiAgICogYGF1dG9gIGRlZmF1bHRzIHRvIGBmYWxzZWAgZm9yIGF0dGFjaG1lbnQgdGV4dHVyZXMgYnV0IGBtaW5gIGFuZCBgbWFnYCBkZWZhdWx0CiAgICogdG8gYGdsLkxJTkVBUmAgYW5kIGB3cmFwYCBkZWZhdWx0cyB0byBgQ0xBTVBfVE9fRURHRWAKICAgKgogICAqIEB0eXBlZGVmIHtPYmplY3R9IEF0dGFjaG1lbnRPcHRpb25zCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFthdHRhY2htZW50UG9pbnRdIFRoZSBhdHRhY2htZW50IHBvaW50LiBEZWZhdWx0cwogICAqICAgdG8gYGdsLkNPTE9SX0FUVEFDSE1FTlQwICsgbmR4YCB1bmxlc3MgdHlwZSBpcyBhIGRlcHRoIG9yIHN0ZW5jaWwgdHlwZQogICAqICAgdGhlbiBpdCdzIGdsLkRFUFRIX0FUVEFDSE1FTlQgb3IgYGdsLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVGAgZGVwZW5kaW5nCiAgICogICBvbiB0aGUgZm9ybWF0IG9yIGF0dGFjaG1lbnQgdHlwZS4KICAgKiBAcHJvcGVydHkge251bWJlcn0gW2Zvcm1hdF0gVGhlIGZvcm1hdC4gSWYgb25lIG9mIGBnbC5SR0JBNGAsCiAgICogICBgZ2wuUkdCNTY1YCwgYGdsLlJHQjVfQTFgLCBgZ2wuREVQVEhfQ09NUE9ORU5UMTZgLAogICAqICAgYGdsLlNURU5DSUxfSU5ERVg4YCBvciBgZ2wuREVQVEhfU1RFTkNJTGAgdGhlbiB3aWxsIGNyZWF0ZSBhCiAgICogICByZW5kZXJidWZmZXIuIE90aGVyd2lzZSB3aWxsIGNyZWF0ZSBhIHRleHR1cmUuIERlZmF1bHQgPSBgZ2wuUkdCQWAKICAgKiBAcHJvcGVydHkge251bWJlcn0gW3R5cGVdIFRoZSB0eXBlLiBVc2VkIGZvciB0ZXh0dXJlLiBEZWZhdWx0ID0gYGdsLlVOU0lHTkVEX0JZVEVgLgogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGFyZ2V0XSBUaGUgdGV4dHVyZSB0YXJnZXQgZm9yIGBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRGAuCiAgICogICBEZWZhdWx0cyB0byBgZ2wuVEVYVFVSRV8yRGAuIFNldCB0byBhcHByb3ByaWF0ZSBmYWNlIGZvciBjdWJlIG1hcHMuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtzYW1wbGVzXSBUaGUgbnVtYmVyIG9mIHNhbXBsZXMuIERlZmF1bHQgPSAxCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtsZXZlbF0gbGV2ZWwgZm9yIGBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRGAuIERlZmF1bHRzIHRvIDAuCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtsYXllcl0gbGF5ZXIgZm9yIGBnbC5mcmFtZWJ1ZmZlclRleHR1cmVMYXllcmAuIERlZmF1bHRzIHRvIHVuZGVmaW5lZC4KICAgKiAgIElmIHNldCB0aGVuIGBnbC5mcmFtZWJ1ZmZlclRleHR1cmVMYXllcmAgaXMgY2FsbGVkLCBpZiBub3QgdGhlbiBgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkRgCiAgICogQHByb3BlcnR5IHsoV2ViR0xSZW5kZXJidWZmZXIgfCBXZWJHTFRleHR1cmUpfSBbYXR0YWNobWVudF0gQW4gZXhpc3RpbmcgcmVuZGVyYnVmZmVyIG9yIHRleHR1cmUuCiAgICogICAgSWYgcHJvdmlkZWQgd2lsbCBhdHRhY2ggdGhpcyBPYmplY3QuIFRoaXMgYWxsb3dzIHlvdSB0byBzaGFyZQogICAqICAgIGF0dGFjaG1lbnRzIGFjcm9zcyBmcmFtZWJ1ZmZlcnMuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICogQG1peGVzIG1vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zCiAgICovCgogIGNvbnN0IGRlZmF1bHRBdHRhY2htZW50cyA9IFsKICAgIHsgZm9ybWF0OiBSR0JBLCB0eXBlOiBVTlNJR05FRF9CWVRFLCBtaW46IExJTkVBUiwgd3JhcDogQ0xBTVBfVE9fRURHRSwgfSwKICAgIHsgZm9ybWF0OiBERVBUSF9TVEVOQ0lMLCB9LAogIF07CgogIGNvbnN0IGF0dGFjaG1lbnRzQnlGb3JtYXQgPSB7fTsKICBhdHRhY2htZW50c0J5Rm9ybWF0W0RFUFRIX1NURU5DSUxdID0gREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UOwogIGF0dGFjaG1lbnRzQnlGb3JtYXRbU1RFTkNJTF9JTkRFWF0gPSBTVEVOQ0lMX0FUVEFDSE1FTlQ7CiAgYXR0YWNobWVudHNCeUZvcm1hdFtTVEVOQ0lMX0lOREVYOF0gPSBTVEVOQ0lMX0FUVEFDSE1FTlQ7CiAgYXR0YWNobWVudHNCeUZvcm1hdFtERVBUSF9DT01QT05FTlRdID0gREVQVEhfQVRUQUNITUVOVDsKICBhdHRhY2htZW50c0J5Rm9ybWF0W0RFUFRIX0NPTVBPTkVOVDE2XSA9IERFUFRIX0FUVEFDSE1FTlQ7CiAgYXR0YWNobWVudHNCeUZvcm1hdFtERVBUSF9DT01QT05FTlQyNF0gPSBERVBUSF9BVFRBQ0hNRU5UOwogIGF0dGFjaG1lbnRzQnlGb3JtYXRbREVQVEhfQ09NUE9ORU5UMzJGXSA9IERFUFRIX0FUVEFDSE1FTlQ7CiAgYXR0YWNobWVudHNCeUZvcm1hdFtERVBUSDI0X1NURU5DSUw4XSA9IERFUFRIX1NURU5DSUxfQVRUQUNITUVOVDsKICBhdHRhY2htZW50c0J5Rm9ybWF0W0RFUFRIMzJGX1NURU5DSUw4XSA9IERFUFRIX1NURU5DSUxfQVRUQUNITUVOVDsKCiAgZnVuY3Rpb24gZ2V0QXR0YWNobWVudFBvaW50Rm9yRm9ybWF0KGZvcm1hdCwgaW50ZXJuYWxGb3JtYXQpIHsKICAgIHJldHVybiBhdHRhY2htZW50c0J5Rm9ybWF0W2Zvcm1hdF0gfHwgYXR0YWNobWVudHNCeUZvcm1hdFtpbnRlcm5hbEZvcm1hdF07CiAgfQoKICBjb25zdCByZW5kZXJidWZmZXJGb3JtYXRzID0ge307CiAgcmVuZGVyYnVmZmVyRm9ybWF0c1tSR0JBNF0gPSB0cnVlOwogIHJlbmRlcmJ1ZmZlckZvcm1hdHNbUkdCNV9BMV0gPSB0cnVlOwogIHJlbmRlcmJ1ZmZlckZvcm1hdHNbUkdCNTY1XSA9IHRydWU7CiAgcmVuZGVyYnVmZmVyRm9ybWF0c1tERVBUSF9TVEVOQ0lMXSA9IHRydWU7CiAgcmVuZGVyYnVmZmVyRm9ybWF0c1tERVBUSF9DT01QT05FTlQxNl0gPSB0cnVlOwogIHJlbmRlcmJ1ZmZlckZvcm1hdHNbU1RFTkNJTF9JTkRFWF0gPSB0cnVlOwogIHJlbmRlcmJ1ZmZlckZvcm1hdHNbU1RFTkNJTF9JTkRFWDhdID0gdHJ1ZTsKCiAgZnVuY3Rpb24gaXNSZW5kZXJidWZmZXJGb3JtYXQoZm9ybWF0KSB7CiAgICByZXR1cm4gcmVuZGVyYnVmZmVyRm9ybWF0c1tmb3JtYXRdOwogIH0KCiAgY29uc3QgTUFYX0NPTE9SX0FUVEFDSE1FTlRfUE9JTlRTID0gMzI7ICAvLyBldmVuIGFuIDMwOTAgb25seSBzdXBwb3J0cyA4IGJ1dCBXZWJHTC9PcGVuR0wgRVMgZGVmaW5lIGNvbnN0YW50cyBmb3IgMzIKCiAgZnVuY3Rpb24gaXNDb2xvckF0dGFjaG1lbnRQb2ludChhdHRhY2htZW50UG9pbnQpIHsKICAgIHJldHVybiBhdHRhY2htZW50UG9pbnQgPj0gQ09MT1JfQVRUQUNITUVOVDAgJiYgYXR0YWNobWVudFBvaW50IDwgQ09MT1JfQVRUQUNITUVOVDAgKyBNQVhfQ09MT1JfQVRUQUNITUVOVF9QT0lOVFM7CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBGcmFtZWJ1ZmZlckluZm8KICAgKiBAcHJvcGVydHkge1dlYkdMRnJhbWVidWZmZXJ9IGZyYW1lYnVmZmVyIFRoZSBXZWJHTEZyYW1lYnVmZmVyIGZvciB0aGlzIGZyYW1lYnVmZmVySW5mbwogICAqIEBwcm9wZXJ0eSB7QXJyYXkuPChXZWJHTFJlbmRlcmJ1ZmZlciB8IFdlYkdMVGV4dHVyZSk+fSBhdHRhY2htZW50cyBUaGUgY3JlYXRlZCBhdHRhY2htZW50cyBpbiB0aGUgc2FtZSBvcmRlciBhcyBwYXNzZWQgaW4gdG8ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mb30uCiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgZnJhbWVidWZmZXIgYW5kIGl0cyBhdHRhY2htZW50cwogICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoZWlnaHQgVGhlIHdpZHRoIG9mIHRoZSBmcmFtZWJ1ZmZlciBhbmQgaXRzIGF0dGFjaG1lbnRzCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsCiAgICovCgogIC8qKgogICAqIENyZWF0ZXMgYSBmcmFtZWJ1ZmZlciBhbmQgYXR0YWNobWVudHMuCiAgICoKICAgKiBUaGlzIHJldHVybnMgYSB7QGxpbmsgbW9kdWxlOnR3Z2wuRnJhbWVidWZmZXJJbmZvfSBiZWNhdXNlIGl0IG5lZWRzIHRvIHJldHVybiB0aGUgYXR0YWNobWVudHMgYXMgd2VsbCBhcyB0aGUgZnJhbWVidWZmZXIuCiAgICogSXQgYWxzbyBsZWF2ZXMgdGhlIGZyYW1lYnVmZmVyIGl0IGp1c3QgY3JlYXRlZCBhcyB0aGUgY3VycmVudGx5IGJvdW5kIGBGUkFNRUJVRkZFUmAuCiAgICogTm90ZTogSWYgdGhpcyBpcyBXZWJHTDIgb3IgaWYgeW91IGNhbGxlZCB7QGxpbmsgbW9kdWxlOnR3Z2wuYWRkRXh0ZW5zaW9uc1RvQ29udGV4dH0gdGhlbiBpdCB3aWxsIHNldCB0aGUgZHJhd0J1ZmZlcnMKICAgKiB0byBgW0NPTE9SX0FUVEFDSE1FTlQwLCBDT0xPUl9BVFRBQ0hNRU5UMSwgLi4uXWAgZm9yIGhvdyBldmVyIG1hbnkgY29sb3IgYXR0YWNobWVudHMgd2VyZSBjcmVhdGVkLgogICAqCiAgICogVGhlIHNpbXBsZXN0IHVzYWdlCiAgICoKICAgKiAgICAgLy8gY3JlYXRlIGFuIFJHQkEvVU5TSUdORURfQllURSB0ZXh0dXJlIGFuZCBERVBUSF9TVEVOQ0lMIHJlbmRlcmJ1ZmZlcgogICAqICAgICBjb25zdCBmYmkgPSB0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mbyhnbCk7CiAgICoKICAgKiBNb3JlIGNvbXBsZXggdXNhZ2UKICAgKgogICAqICAgICAvLyBjcmVhdGUgYW4gUkdCNTY1IHJlbmRlcmJ1ZmZlciBhbmQgYSBTVEVOQ0lMX0lOREVYOCByZW5kZXJidWZmZXIKICAgKiAgICAgY29uc3QgYXR0YWNobWVudHMgPSBbCiAgICogICAgICAgeyBmb3JtYXQ6IFJHQjU2NSwgbWFnOiBORUFSRVNUIH0sCiAgICogICAgICAgeyBmb3JtYXQ6IFNURU5DSUxfSU5ERVg4IH0sCiAgICogICAgIF0KICAgKiAgICAgY29uc3QgZmJpID0gdHdnbC5jcmVhdGVGcmFtZWJ1ZmZlckluZm8oZ2wsIGF0dGFjaG1lbnRzKTsKICAgKgogICAqIFBhc3NpbmcgaW4gYSBzcGVjaWZpYyBzaXplCiAgICoKICAgKiAgICAgY29uc3Qgd2lkdGggPSAyNTY7CiAgICogICAgIGNvbnN0IGhlaWdodCA9IDI1NjsKICAgKiAgICAgY29uc3QgZmJpID0gdHdnbC5jcmVhdGVGcmFtZWJ1ZmZlckluZm8oZ2wsIGF0dGFjaG1lbnRzLCB3aWR0aCwgaGVpZ2h0KTsKICAgKgogICAqICoqTm90ZSEhKiogSXQgaXMgdXAgdG8geW91IHRvIGNoZWNrIGlmIHRoZSBmcmFtZWJ1ZmZlciBpcyByZW5kZXJhYmxlIGJ5IGNhbGxpbmcgYGdsLmNoZWNrRnJhbWVidWZmZXJTdGF0dXNgLgogICAqIFtXZWJHTDEgb25seSBndWFyYW50ZWVzIDMgY29tYmluYXRpb25zIG9mIGF0dGFjaG1lbnRzIHdvcmtdKGh0dHBzOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL3NwZWNzL2xhdGVzdC8xLjAvIzYuNikuCiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuQXR0YWNobWVudE9wdGlvbnNbXX0gW2F0dGFjaG1lbnRzXSB3aGljaCBhdHRhY2htZW50cyB0byBjcmVhdGUuIElmIG5vdCBwcm92aWRlZCB0aGUgZGVmYXVsdCBpcyBhIGZyYW1lYnVmZmVyIHdpdGggYW4KICAgKiAgICBgUkdCQWAsIGBVTlNJR05FRF9CWVRFYCB0ZXh0dXJlIGBDT0xPUl9BVFRBQ0hNRU5UMGAgYW5kIGEgYERFUFRIX1NURU5DSUxgIHJlbmRlcmJ1ZmZlciBgREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UYC4KICAgKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoXSB0aGUgd2lkdGggZm9yIHRoZSBhdHRhY2htZW50cy4gRGVmYXVsdCA9IHNpemUgb2YgZHJhd2luZ0J1ZmZlcgogICAqIEBwYXJhbSB7bnVtYmVyfSBbaGVpZ2h0XSB0aGUgaGVpZ2h0IGZvciB0aGUgYXR0YWNobWVudHMuIERlZmF1bHQgPSBzaXplIG9mIGRyYXdpbmdCdWZmZXIKICAgKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5GcmFtZWJ1ZmZlckluZm99IHRoZSBmcmFtZWJ1ZmZlciBhbmQgYXR0YWNobWVudHMuCiAgICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL2ZyYW1lYnVmZmVycwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUZyYW1lYnVmZmVySW5mbyhnbCwgYXR0YWNobWVudHMsIHdpZHRoLCBoZWlnaHQpIHsKICAgIGNvbnN0IHRhcmdldCA9IEZSQU1FQlVGRkVSOwogICAgY29uc3QgZmIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpOwogICAgZ2wuYmluZEZyYW1lYnVmZmVyKHRhcmdldCwgZmIpOwogICAgd2lkdGggID0gd2lkdGggIHx8IGdsLmRyYXdpbmdCdWZmZXJXaWR0aDsKICAgIGhlaWdodCA9IGhlaWdodCB8fCBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0OwogICAgYXR0YWNobWVudHMgPSBhdHRhY2htZW50cyB8fCBkZWZhdWx0QXR0YWNobWVudHM7CiAgICBjb25zdCB1c2VkQ29sb3JBdHRhY2htZW50c1BvaW50cyA9IFtdOwogICAgY29uc3QgZnJhbWVidWZmZXJJbmZvID0gewogICAgICBmcmFtZWJ1ZmZlcjogZmIsCiAgICAgIGF0dGFjaG1lbnRzOiBbXSwKICAgICAgd2lkdGg6IHdpZHRoLAogICAgICBoZWlnaHQ6IGhlaWdodCwKICAgIH07CgogICAgYXR0YWNobWVudHMuZm9yRWFjaChmdW5jdGlvbihhdHRhY2htZW50T3B0aW9ucywgaSkgewogICAgICBsZXQgYXR0YWNobWVudCA9IGF0dGFjaG1lbnRPcHRpb25zLmF0dGFjaG1lbnQ7CiAgICAgIGNvbnN0IHNhbXBsZXMgPSBhdHRhY2htZW50T3B0aW9ucy5zYW1wbGVzOwogICAgICBjb25zdCBmb3JtYXQgPSBhdHRhY2htZW50T3B0aW9ucy5mb3JtYXQ7CiAgICAgIGxldCBhdHRhY2htZW50UG9pbnQgPSBhdHRhY2htZW50T3B0aW9ucy5hdHRhY2htZW50UG9pbnQgfHwgZ2V0QXR0YWNobWVudFBvaW50Rm9yRm9ybWF0KGZvcm1hdCwgYXR0YWNobWVudE9wdGlvbnMuaW50ZXJuYWxGb3JtYXQpOwogICAgICBpZiAoIWF0dGFjaG1lbnRQb2ludCkgewogICAgICAgIGF0dGFjaG1lbnRQb2ludCA9IENPTE9SX0FUVEFDSE1FTlQwICsgaTsKICAgICAgfQogICAgICBpZiAoaXNDb2xvckF0dGFjaG1lbnRQb2ludChhdHRhY2htZW50UG9pbnQpKSB7CiAgICAgICAgdXNlZENvbG9yQXR0YWNobWVudHNQb2ludHMucHVzaChhdHRhY2htZW50UG9pbnQpOwogICAgICB9CiAgICAgIGlmICghYXR0YWNobWVudCkgewogICAgICAgIGlmIChzYW1wbGVzICE9PSB1bmRlZmluZWQgfHwgaXNSZW5kZXJidWZmZXJGb3JtYXQoZm9ybWF0KSkgewogICAgICAgICAgYXR0YWNobWVudCA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpOwogICAgICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihSRU5ERVJCVUZGRVIsIGF0dGFjaG1lbnQpOwogICAgICAgICAgaWYgKHNhbXBsZXMgPiAxKSB7CiAgICAgICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZShSRU5ERVJCVUZGRVIsIHNhbXBsZXMsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBnbC5yZW5kZXJidWZmZXJTdG9yYWdlKFJFTkRFUkJVRkZFUiwgZm9ybWF0LCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgdGV4dHVyZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBhdHRhY2htZW50T3B0aW9ucyk7CiAgICAgICAgICB0ZXh0dXJlT3B0aW9ucy53aWR0aCA9IHdpZHRoOwogICAgICAgICAgdGV4dHVyZU9wdGlvbnMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgICAgaWYgKHRleHR1cmVPcHRpb25zLmF1dG8gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICB0ZXh0dXJlT3B0aW9ucy5hdXRvID0gZmFsc2U7CiAgICAgICAgICAgIHRleHR1cmVPcHRpb25zLm1pbiA9IHRleHR1cmVPcHRpb25zLm1pbiB8fCB0ZXh0dXJlT3B0aW9ucy5taW5NYWcgfHwgTElORUFSOwogICAgICAgICAgICB0ZXh0dXJlT3B0aW9ucy5tYWcgPSB0ZXh0dXJlT3B0aW9ucy5tYWcgfHwgdGV4dHVyZU9wdGlvbnMubWluTWFnIHx8IExJTkVBUjsKICAgICAgICAgICAgdGV4dHVyZU9wdGlvbnMud3JhcFMgPSB0ZXh0dXJlT3B0aW9ucy53cmFwUyB8fCB0ZXh0dXJlT3B0aW9ucy53cmFwIHx8IENMQU1QX1RPX0VER0U7CiAgICAgICAgICAgIHRleHR1cmVPcHRpb25zLndyYXBUID0gdGV4dHVyZU9wdGlvbnMud3JhcFQgfHwgdGV4dHVyZU9wdGlvbnMud3JhcCB8fCBDTEFNUF9UT19FREdFOwogICAgICAgICAgfQogICAgICAgICAgYXR0YWNobWVudCA9IGNyZWF0ZVRleHR1cmUoZ2wsIHRleHR1cmVPcHRpb25zKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGlzUmVuZGVyYnVmZmVyKGdsLCBhdHRhY2htZW50KSkgewogICAgICAgIGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKHRhcmdldCwgYXR0YWNobWVudFBvaW50LCBSRU5ERVJCVUZGRVIsIGF0dGFjaG1lbnQpOwogICAgICB9IGVsc2UgaWYgKGlzVGV4dHVyZShnbCwgYXR0YWNobWVudCkpIHsKICAgICAgICBpZiAoYXR0YWNobWVudE9wdGlvbnMubGF5ZXIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlTGF5ZXIoCiAgICAgICAgICAgIHRhcmdldCwKICAgICAgICAgICAgYXR0YWNobWVudFBvaW50LAogICAgICAgICAgICBhdHRhY2htZW50LAogICAgICAgICAgICBhdHRhY2htZW50T3B0aW9ucy5sZXZlbCB8fCAwLAogICAgICAgICAgICBhdHRhY2htZW50T3B0aW9ucy5sYXllcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKAogICAgICAgICAgICAgIHRhcmdldCwKICAgICAgICAgICAgICBhdHRhY2htZW50UG9pbnQsCiAgICAgICAgICAgICAgYXR0YWNobWVudE9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQsCiAgICAgICAgICAgICAgYXR0YWNobWVudCwKICAgICAgICAgICAgICBhdHRhY2htZW50T3B0aW9ucy5sZXZlbCB8fCAwKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGF0dGFjaG1lbnQgdHlwZScpOwogICAgICB9CiAgICAgIGZyYW1lYnVmZmVySW5mby5hdHRhY2htZW50cy5wdXNoKGF0dGFjaG1lbnQpOwogICAgfSk7CiAgICBpZiAoZ2wuZHJhd0J1ZmZlcnMpIHsKICAgICAgZ2wuZHJhd0J1ZmZlcnModXNlZENvbG9yQXR0YWNobWVudHNQb2ludHMpOwogICAgfQogICAgcmV0dXJuIGZyYW1lYnVmZmVySW5mbzsKICB9CgogIC8qKgogICAqIEJpbmRzIGEgZnJhbWVidWZmZXIKICAgKgogICAqIFRoaXMgZnVuY3Rpb24gcHJldHR5IG11Y2ggc29sZWx5IGV4aXN0cyBiZWNhdXNlIEkgc3BlbnQgaG91cnMKICAgKiB0cnlpbmcgdG8gZmlndXJlIG91dCB3aHkgc29tZXRoaW5nIEkgd3JvdGUgd2Fzbid0IHdvcmtpbmcgb25seQogICAqIHRvIHJlYWxpemUgSSBmb3JnZXQgdG8gc2V0IHRoZSB2aWV3cG9ydCBkaW1lbnNpb25zLgogICAqIE15IGhvcGUgaXMgdGhpcyBmdW5jdGlvbiB3aWxsIGZpeCB0aGF0LgogICAqCiAgICogSXQgaXMgZWZmZWN0aXZlbHkgdGhlIHNhbWUgYXMKICAgKgogICAqICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHNvbWVGcmFtZWJ1ZmZlckluZm8uZnJhbWVidWZmZXIpOwogICAqICAgICBnbC52aWV3cG9ydCgwLCAwLCBzb21lRnJhbWVidWZmZXJJbmZvLndpZHRoLCBzb21lRnJhbWVidWZmZXJJbmZvLmhlaWdodCk7CiAgICoKICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dAogICAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRnJhbWVidWZmZXJJbmZvfG51bGx9IFtmcmFtZWJ1ZmZlckluZm9dIGEgZnJhbWVidWZmZXJJbmZvIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mb30uCiAgICogICBJZiBmYWxzeSB3aWxsIGJpbmQgdGhlIGNhbnZhcy4KICAgKiBAcGFyYW0ge251bWJlcn0gW3RhcmdldF0gVGhlIHRhcmdldC4gSWYgbm90IHBhc3NlZCBgZ2wuRlJBTUVCVUZGRVJgIHdpbGwgYmUgdXNlZC4KICAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvZnJhbWVidWZmZXJzCiAgICovCgogIGZ1bmN0aW9uIGJpbmRGcmFtZWJ1ZmZlckluZm8oZ2wsIGZyYW1lYnVmZmVySW5mbywgdGFyZ2V0KSB7CiAgICB0YXJnZXQgPSB0YXJnZXQgfHwgRlJBTUVCVUZGRVI7CiAgICBpZiAoZnJhbWVidWZmZXJJbmZvKSB7CiAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcih0YXJnZXQsIGZyYW1lYnVmZmVySW5mby5mcmFtZWJ1ZmZlcik7CiAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIGZyYW1lYnVmZmVySW5mby53aWR0aCwgZnJhbWVidWZmZXJJbmZvLmhlaWdodCk7CiAgICB9IGVsc2UgewogICAgICBnbC5iaW5kRnJhbWVidWZmZXIodGFyZ2V0LCBudWxsKTsKICAgICAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuZHJhd2luZ0J1ZmZlcldpZHRoLCBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHRleHR1cmUoY29udGV4dCwgc291cmNlKSB7CiAgICByZXR1cm4gKCkgPT4gc291cmNlIGluc3RhbmNlb2YgV2ViR0xUZXh0dXJlID8gc291cmNlIDogY3JlYXRlVGV4dHVyZShjb250ZXh0LCB7CiAgICAgIHNyYzogc291cmNlLAogICAgICB3cmFwOiBjb250ZXh0LkNMQU1QX1RPX0VER0UKICAgIH0pOwogIH0KICBjb25zdCBXRUJHTF9NSU5JTVVNX1RFWFRVUkVfU0laRSA9IDI7CgogIGNsYXNzIFdlYmdsUGlwZWxpbmVQcm9ncmFtIHsKICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgdGhpcy5pZCA9ICJfIjsKICAgICAgY29uc3QgeyBjb250ZXh0LCB3aWR0aCwgaGVpZ2h0IH0gPSBvcHRpb25zOwogICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgICBjb25zdCBkZWZpbmVzID0gdGhpcy5idWlsZERlZmluZXMoKTsKICAgICAgdGhpcy5wcm9ncmFtSW5mbyA9IGNyZWF0ZVByb2dyYW1JbmZvKHRoaXMuY29udGV4dCwgWwogICAgICAgIGRlZmluZXMgKyB0aGlzLmdldFZlcnRleFNoYWRlcigpLAogICAgICAgIGRlZmluZXMgKyB0aGlzLmdldEZyYWdtZW50U2hhZGVyKCkKICAgICAgXSk7CiAgICAgIHRoaXMuYnVmZmVySW5mbyA9IGNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzKAogICAgICAgIHRoaXMuY29udGV4dCwKICAgICAgICB0aGlzLmdldEJ1ZmZlcnMoKQogICAgICApOwogICAgICB0aGlzLmZiaSA9IGNyZWF0ZUZyYW1lYnVmZmVySW5mbygKICAgICAgICB0aGlzLmNvbnRleHQsCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICBmb3JtYXQ6IHRoaXMuY29udGV4dC5SR0JBLAogICAgICAgICAgICB0eXBlOiB0aGlzLmNvbnRleHQuVU5TSUdORURfQllURSwKICAgICAgICAgICAgbWluOiB0aGlzLmNvbnRleHQuTElORUFSLAogICAgICAgICAgICB3cmFwOiB0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRQogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMub3V0cHV0ID0gdGhpcy5mYmkuYXR0YWNobWVudHNbMF07CiAgICB9CiAgICByZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCkgewogICAgICB0aGlzLmZiaSA9IGNyZWF0ZUZyYW1lYnVmZmVySW5mbygKICAgICAgICB0aGlzLmNvbnRleHQsCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICBmb3JtYXQ6IHRoaXMuY29udGV4dC5SR0JBLAogICAgICAgICAgICB0eXBlOiB0aGlzLmNvbnRleHQuVU5TSUdORURfQllURSwKICAgICAgICAgICAgbWluOiB0aGlzLmNvbnRleHQuTElORUFSLAogICAgICAgICAgICB3cmFwOiB0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRQogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMub3B0aW9ucy53aWR0aCA9IHdpZHRoOwogICAgICB0aGlzLm9wdGlvbnMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB0aGlzLm91dHB1dCA9IHRoaXMuZmJpLmF0dGFjaG1lbnRzWzBdOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIGRlZmluZXMgcHJlcGVuZCB0byB0aGUgc2hhZGVycwogICAgICogQHJldHVybnMgT2JqZWN0IHdoZXJlIGtleSBpcyB0aGUgZGVmaW5lIG5hbWUgYW5kIHZhbHVlIHRoZSBkZWZpbmUgdmFsdWUKICAgICAqLwogICAgZ2V0RGVmaW5lcygpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIGJ1ZmZlcnMgdXNlZCBieSB0aGUgcHJvZ3JhbQogICAgICogVGhlIGJ1ZmZlcnMgYXJlIHVwbG9hZGVkIG9ubHkgb25jZSBhdCB0aGUgaW5pdGlhbGl6YXRpb24KICAgICAqIEByZXR1cm5zIEJ1ZmZlciBtYXAKICAgICAqLwogICAgZ2V0QnVmZmVycygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwb3NpdGlvbjogewogICAgICAgICAgbnVtQ29tcG9uZW50czogMiwKICAgICAgICAgIGRhdGE6IFstMSwgLTEsIC0xLCAxLCAxLCAtMSwgMSwgMSwgLTEsIDEsIDEsIC0xXQogICAgICAgIH0sCiAgICAgICAgdGV4dHVyZV9jb29yZDogewogICAgICAgICAgbnVtQ29tcG9uZW50czogMiwKICAgICAgICAgIGRhdGE6IFswLCAwLCAwLCAxLCAxLCAwLCAxLCAxLCAwLCAxLCAxLCAwXQogICAgICAgIH0KICAgICAgfTsKICAgIH0KICAgIC8qKgogICAgICogQnVpbGQgcHJlcGVuZGFibGUgc3RyaW5nIHRvIHNoYWRlcnMgc291cmNlIGNvbnRhaW5pbmcgdGhlIGRlZmluZXMgcmV0dXJuZWQgYnkgZ2V0RGVmaW5lcy4KICAgICAqIEByZXR1cm5zIFByZXBlbmRhYmxlIHN0cmluZwogICAgICovCiAgICBidWlsZERlZmluZXMoKSB7CiAgICAgIGxldCByZXN1bHQgPSAiIjsKICAgICAgY29uc3QgZGVmaW5lcyA9IHRoaXMuZ2V0RGVmaW5lcygpOwogICAgICBmb3IgKGxldCBpIGluIGRlZmluZXMpIHsKICAgICAgICByZXN1bHQgKz0gYCNkZWZpbmUgJHtpfSAke2RlZmluZXNbaV0udG9GaXhlZCgxKX0KYDsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBSdW4gdGhlIHByb2dyYW0KICAgICAqIEBwYXJhbSB1bmlmb3JtcyBEYXRhIHRvIHVzZWQgZm9yIHRoZSB1bmlmb3JtcwogICAgICovCiAgICBydW4odW5pZm9ybXMpIHsKICAgICAgdGhpcy5wcm9maWxlcj8ucHVzaENvbnRleHQoCiAgICAgICAgYFske3RoaXMuaWR9XSBQUk9HIDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YAogICAgICApOwogICAgICB0aGlzLnByb2ZpbGVyPy5wdXNoQ29udGV4dChgWyR7dGhpcy5pZH1dIFVOSUZPUk1TYCk7CiAgICAgIGZvciAoY29uc3QgdSBpbiB1bmlmb3JtcykgewogICAgICAgIGlmICh0eXBlb2YgdW5pZm9ybXNbdV0gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIHRoaXMucHJvZmlsZXI/LnB1c2hDb250ZXh0KGBbJHt0aGlzLmlkfV0gVU5JIDogJHt1fWApOwogICAgICAgICAgdW5pZm9ybXNbdV0gPSB1bmlmb3Jtc1t1XSgpOwogICAgICAgICAgdGhpcy5wcm9maWxlcj8ucG9wQ29udGV4dChgWyR7dGhpcy5pZH1dIFVOSSA6ICR7dX1gKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5wcm9maWxlcj8ucG9wQ29udGV4dChgWyR7dGhpcy5pZH1dIFVOSUZPUk1TYCk7CiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgICAgIGxldCBkZWx0YSA9IDA7CiAgICAgIGlmICh0aGlzLmxhc3RSdW4pIHsKICAgICAgICBkZWx0YSA9IChub3cgLSB0aGlzLmxhc3RSdW4pIC8gMWUzOwogICAgICB9CiAgICAgIHRoaXMubGFzdFJ1biA9IG5vdzsKICAgICAgdGhpcy5jb250ZXh0LnZpZXdwb3J0KAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICB0aGlzLmNvbnRleHQuY2FudmFzLndpZHRoLAogICAgICAgIHRoaXMuY29udGV4dC5jYW52YXMuaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMuY29udGV4dC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbUluZm8ucHJvZ3JhbSk7CiAgICAgIHNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzKAogICAgICAgIHRoaXMuY29udGV4dCwKICAgICAgICB0aGlzLnByb2dyYW1JbmZvLAogICAgICAgIHRoaXMuYnVmZmVySW5mbwogICAgICApOwogICAgICBzZXRVbmlmb3Jtcyh0aGlzLnByb2dyYW1JbmZvLCB7CiAgICAgICAgZGVsdGEsCiAgICAgICAgY2FudmFzOiBbdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCwgdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHRdLAogICAgICAgIC4uLnVuaWZvcm1zCiAgICAgIH0pOwogICAgICBiaW5kRnJhbWVidWZmZXJJbmZvKAogICAgICAgIHRoaXMuY29udGV4dCwKICAgICAgICB0aGlzLm9wdGlvbnMuZGlzYWJsZUZyYW1lYnVmZmVyID8gbnVsbCA6IHRoaXMuZmJpCiAgICAgICk7CiAgICAgIGRyYXdCdWZmZXJJbmZvKHRoaXMuY29udGV4dCwgdGhpcy5idWZmZXJJbmZvKTsKICAgICAgdGhpcy5wcm9maWxlcj8ucG9wQ29udGV4dCgKICAgICAgICBgWyR7dGhpcy5pZH1dIFBST0cgOiAke3RoaXMuY29uc3RydWN0b3IubmFtZX1gCiAgICAgICk7CiAgICB9CiAgICBzZXRQcm9maWxlcihwcm9maWxlcikgewogICAgICB0aGlzLnByb2ZpbGVyID0gcHJvZmlsZXI7CiAgICB9CiAgfQoKICB2YXIgZnJhZ21lbnRTaGFkZXIkOCA9ICJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcblxudmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkO1xuXG51bmlmb3JtIHNhbXBsZXIyRCBiYWNrZ3JvdW5kO1xudW5pZm9ybSBzYW1wbGVyMkQgZm9yZWdyb3VuZDtcbnVuaWZvcm0gc2FtcGxlcjJEIHRocmVzaG9sZDtcblxudm9pZCBtYWluKCkge1xuICB2ZWM0IGJhY2tncm91bmRDb2xvciA9IHRleHR1cmUyRChiYWNrZ3JvdW5kLCBfdGV4dHVyZV9jb29yZCk7XG4gIHZlYzQgZm9yZWdyb3VuZENvbG9yID0gdGV4dHVyZTJEKGZvcmVncm91bmQsIF90ZXh0dXJlX2Nvb3JkKTtcbiAgdmVjNCB0cmVzaG9sZENvbG9yID0gdGV4dHVyZTJEKHRocmVzaG9sZCwgX3RleHR1cmVfY29vcmQpO1xuICBnbF9GcmFnQ29sb3IgPSBmb3JlZ3JvdW5kQ29sb3IgKiB0cmVzaG9sZENvbG9yLmEgK1xuICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgKiAoMS4gLSB0cmVzaG9sZENvbG9yLmEpO1xufVxuIjsKCiAgdmFyIHZlcnRleFNoYWRlciQ4ID0gInZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XG5hdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTtcbiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkO1xuICBfdGV4dHVyZV9jb29yZC55ID0gMS4gLSB0ZXh0dXJlX2Nvb3JkLnk7XG59XG4iOwoKICBjbGFzcyBNaXggZXh0ZW5kcyBXZWJnbFBpcGVsaW5lUHJvZ3JhbSB7CiAgICBnZXRGcmFnbWVudFNoYWRlcigpIHsKICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyJDg7CiAgICB9CiAgICBnZXRWZXJ0ZXhTaGFkZXIoKSB7CiAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXIkODsKICAgIH0KICB9CgogIGNsYXNzIFdlYmdsUGlwZWxpbmUgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIC8qKgogICAgICAgKiBQaXBlbGluZSBwcm9ncmFtIGluZm9zIHRvIHJ1bgogICAgICAgKi8KICAgICAgdGhpcy5zdGVwcyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBwcm9ncmFtIHBpcGVsaW5lIHRvIHRoZSByZW5kZXJpbmcgcGlwZWxpbmUKICAgICAqIEBwYXJhbSBzdGVwIFByb2dyYW0gcGlwZWxpbmUgaW5mb3MKICAgICAqLwogICAgYWRkU3RlcChzdGVwKSB7CiAgICAgIHRoaXMuc3RlcHMucHVzaChzdGVwKTsKICAgIH0KICAgIC8qKgogICAgICogUnVuIHRoZSBwaXBlbGluZQogICAgICovCiAgICBhc3luYyBydW4oKSB7CiAgICAgIGZvciAoY29uc3Qgc3RlcCBvZiB0aGlzLnN0ZXBzKSB7CiAgICAgICAgc3RlcC5wcm9ncmFtLnJ1bihzdGVwLmdldFVuaWZvcm1zKCkpOwogICAgICB9CiAgICB9CiAgICByZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCkgewogICAgICB0aGlzLnByb2ZpbGVyPy5wdXNoQ29udGV4dChgUElQIFske3RoaXMuY29uc3RydWN0b3IubmFtZX1dYCk7CiAgICAgIGZvciAoY29uc3Qgc3RlcCBvZiB0aGlzLnN0ZXBzKSB7CiAgICAgICAgaWYgKCFzdGVwLnByZXZlbnRSZXNpemUpIHsKICAgICAgICAgIHN0ZXAucHJvZ3JhbS5yZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMucHJvZmlsZXI/LnBvcENvbnRleHQoYFBJUCBbJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9XWApOwogICAgfQogICAgc2V0UHJvZmlsZXIocHJvZmlsZXIpIHsKICAgICAgdGhpcy5wcm9maWxlciA9IHByb2ZpbGVyOwogICAgICBmb3IgKGNvbnN0IHN0ZXAgb2YgdGhpcy5zdGVwcykgewogICAgICAgIHN0ZXAucHJvZ3JhbS5zZXRQcm9maWxlcihwcm9maWxlcik7CiAgICAgIH0KICAgIH0KICAgIHNldElkKGlkKSB7CiAgICAgIGZvciAoY29uc3Qgc3RlcCBvZiB0aGlzLnN0ZXBzKSB7CiAgICAgICAgc3RlcC5wcm9ncmFtLmlkID0gaWQ7CiAgICAgIH0KICAgIH0KICB9CgogIGNsYXNzIFdlYmdsVHJhbnNmb3JtZXJQaXBlbGluZSBleHRlbmRzIFdlYmdsUGlwZWxpbmUgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMucHJlY2lzZU1hc2tFbmFibGVkID0gZmFsc2U7CiAgICB9CiAgfQoKICBjbGFzcyBCYWNrZ3JvdW5kSW1hZ2VQaXBlbGluZSBleHRlbmRzIFdlYmdsVHJhbnNmb3JtZXJQaXBlbGluZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMucHJlY2lzZU1hc2tFbmFibGVkID0gdHJ1ZTsKICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAgICAgY29udGV4dCwKICAgICAgICBoZWlnaHQ6IGNvbnRleHQuY2FudmFzLmhlaWdodCwKICAgICAgICB3aWR0aDogY29udGV4dC5jYW52YXMud2lkdGgKICAgICAgfTsKICAgICAgY29uc3QgbWl4ID0gbmV3IE1peCh7IC4uLmRlZmF1bHRPcHRpb25zLCBkaXNhYmxlRnJhbWVidWZmZXI6IHRydWUgfSk7CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogbWl4LAogICAgICAgIGdldFVuaWZvcm1zOiAoKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuaW5wdXRCYWNrZ3JvdW5kSW1hZ2UpLAogICAgICAgICAgICBmb3JlZ3JvdW5kOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuaW5wdXRJbWFnZSksCiAgICAgICAgICAgIHRocmVzaG9sZDogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0TWFzaykKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIHNldERhdGEoaW1hZ2UsIG1hc2spIHsKICAgICAgdGhpcy5pbnB1dEltYWdlID0gaW1hZ2U7CiAgICAgIHRoaXMuaW5wdXRNYXNrID0gbWFzazsKICAgIH0KICB9CgogIHZhciBmcmFnbWVudFNoYWRlciQ3ID0gInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG52YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXG52b2lkIG1haW4oKSB7IGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCk7IH1cbiI7CgogIHZhciB2ZXJ0ZXhTaGFkZXIkNyA9ICJ2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xuYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDtcbnVuaWZvcm0gYm9vbCBpbnZlcnRfeTtcblxudm9pZCBtYWluKCkge1xuICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7XG4gIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDtcbiAgaWYgKGludmVydF95KSB7XG4gICAgX3RleHR1cmVfY29vcmQueSA9IDEuIC0gdGV4dHVyZV9jb29yZC55O1xuICB9XG59XG4iOwoKICBjbGFzcyBSZW5kZXJUZXh0dXJlIGV4dGVuZHMgV2ViZ2xQaXBlbGluZVByb2dyYW0gewogICAgZ2V0RnJhZ21lbnRTaGFkZXIoKSB7CiAgICAgIHJldHVybiBmcmFnbWVudFNoYWRlciQ3OwogICAgfQogICAgZ2V0VmVydGV4U2hhZGVyKCkgewogICAgICByZXR1cm4gdmVydGV4U2hhZGVyJDc7CiAgICB9CiAgfQoKICBjbGFzcyBSZXNpemVJbWFnZVBpcGVsaW5lIGV4dGVuZHMgV2ViZ2xQaXBlbGluZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gewogICAgICAgIGNvbnRleHQsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIHdpZHRoCiAgICAgIH07CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogbmV3IFJlbmRlclRleHR1cmUoewogICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsCiAgICAgICAgICBkaXNhYmxlRnJhbWVidWZmZXI6IHRydWUKICAgICAgICB9KSwKICAgICAgICBnZXRVbmlmb3JtczogKCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0SW1hZ2UpLAogICAgICAgICAgICBpbnZlcnRfeTogdHJ1ZQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgc2V0RGF0YShpbWFnZSkgewogICAgICB0aGlzLmlucHV0SW1hZ2UgPSBpbWFnZTsKICAgIH0KICB9CgogIGFzeW5jIGZ1bmN0aW9uIHdhaXQobXMpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0sIG1zKTsKICAgIH0pOwogIH0KCiAgdmFyIGZyYWdtZW50U2hhZGVyJDYgPSAicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG5cbnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxudW5pZm9ybSB2ZWMyIGNhbnZhcztcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XG5cbnZlYzQgbG9vcCgpO1xuXG52b2lkIG1haW4oKSB7IGdsX0ZyYWdDb2xvciA9IGxvb3AoKTsgfVxuIjsKCiAgdmFyIHZlcnRleFNoYWRlciQ2ID0gInZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XG5hdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTtcbiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkO1xufVxuIjsKCiAgdmFyIEJMVVJfVFlQRSA9IC8qIEBfX1BVUkVfXyAqLyAoKEJMVVJfVFlQRTIpID0+IHsKICAgIEJMVVJfVFlQRTJbQkxVUl9UWVBFMlsiTElORUFSIl0gPSAwXSA9ICJMSU5FQVIiOwogICAgQkxVUl9UWVBFMltCTFVSX1RZUEUyWyJHQVVTU0lBTiJdID0gMV0gPSAiR0FVU1NJQU4iOwogICAgcmV0dXJuIEJMVVJfVFlQRTI7CiAgfSkoQkxVUl9UWVBFIHx8IHt9KTsKICBjbGFzcyBCbHVyIGV4dGVuZHMgV2ViZ2xQaXBlbGluZVByb2dyYW0gewogICAgZ2V0RGVmaW5lcygpIHsKICAgICAgcmV0dXJuIHsgUkFESVVTOiB0aGlzLm9wdGlvbnMucmFkaXVzID8/IDEgfTsKICAgIH0KICAgIGdldEZyYWdtZW50U2hhZGVyKCkgewogICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXIkNiArIHRoaXMuY3JlYXRlTG9vcEZ1bmN0aW9uKCk7CiAgICB9CiAgICBnZXRWZXJ0ZXhTaGFkZXIoKSB7CiAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXIkNjsKICAgIH0KICAgIGNyZWF0ZUxvb3BGdW5jdGlvbigpIHsKICAgICAgbGV0IHJhZGl1cyA9IHRoaXMub3B0aW9ucy5yYWRpdXMgPz8gMTsKICAgICAgcmV0dXJuIGAKCiAgICAgICAgdmVjNCBsb29wKCkgeyAKICAgICAgICAgICAgdmVjNCByZXN1bHQgPSB2ZWM0KDAsMCwwLDApOwogICAgICAgICAgICBmbG9hdCBmYWN0b3JTdW0gPSAwLjsKCiAgICAgICAgICAgIHZlYzIgbm9ybWFsaXplZFJhZGl1cyA9IHZlYzIoLSR7cmFkaXVzfS4pIC8gY2FudmFzOwogICAgICAgICAgICB2ZWMyIG5vcm1hbGl6ZWRJbmNyZW1lbnQgPSB2ZWMyKDEuKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBkaWZmID0gbm9ybWFsaXplZFJhZGl1czsKCiAgICAgICAgICAgIGZvcihpbnQgeT0tJHtyYWRpdXN9OyB5PCR7cmFkaXVzICsgMX07ICsreSkgewogICAgICAgICAgICAgICAgZm9yKGludCB4PS0ke3JhZGl1c307IHg8JHtyYWRpdXMgKyAxfTsgKyt4KSB7CiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFjdG9yID0gMS47CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGZhY3RvciAqIHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpOwogICAgICAgICAgICAgICAgICAgIGZhY3RvclN1bSArPSBmYWN0b3I7CiAgICAgICAgICAgICAgICAgICAgZGlmZi54ICs9IG5vcm1hbGl6ZWRJbmNyZW1lbnQueDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRpZmYueSArPSBub3JtYWxpemVkSW5jcmVtZW50Lnk7CiAgICAgICAgICAgICAgICBkaWZmLnggPSBub3JtYWxpemVkUmFkaXVzLng7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAvIGZhY3RvclN1bTsKICAgICAgICB9YDsKICAgIH0KICAgIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dhdXNzaWFuX2JsdXIKICAgIGdldEZhY3Rvcih4LCB5KSB7CiAgICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnR5cGUpIHsKICAgICAgICBjYXNlIDEgLyogR0FVU1NJQU4gKi86CiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRMaW5lYXJGYWN0b3IoeCwgeSk7CiAgICAgICAgY2FzZSAwIC8qIExJTkVBUiAqLzoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZWFyRmFjdG9yKHgsIHkpOwogICAgICB9CiAgICB9CiAgICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HYXVzc2lhbl9ibHVyCiAgICBnZXRMaW5lYXJGYWN0b3IoeCwgeSkgewogICAgICByZXR1cm4gMTsKICAgIH0KICAgIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dhdXNzaWFuX2JsdXIKICAgIGdldEdhdXNzaWFuRmFjdG9yKHgsIHkpIHsKICAgICAgY29uc3QgVEFVID0gTWF0aC5QSSAqIDI7CiAgICAgIGNvbnN0IHZhcmlhbmNlID0gTWF0aC5tYXgodGhpcy5vcHRpb25zLnJhZGl1cyA/PyAxLCAxKTsKICAgICAgY29uc3QgZUZhY3RvciA9IDEgLyAoVEFVICogdmFyaWFuY2UgKiogMik7CiAgICAgIGNvbnN0IGVQb3dlck51bWVyYXRvciA9IC0oeCAqKiAyICsgeSAqKiAyKTsKICAgICAgY29uc3QgZVBvd2VyID0gZUZhY3RvciAqIGVQb3dlck51bWVyYXRvcjsKICAgICAgcmV0dXJuIGVGYWN0b3IgKiBNYXRoLkUgKiogZVBvd2VyOwogICAgfQogIH0KCiAgY2xhc3MgV2ViZ2xQaXBlbGluZVByb2dyYW1Eb3VibGVCdWZmZXIgZXh0ZW5kcyBXZWJnbFBpcGVsaW5lUHJvZ3JhbSB7CiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIHN1cGVyKG9wdGlvbnMpOwogICAgICB0aGlzLmZiaTIgPSBjcmVhdGVGcmFtZWJ1ZmZlckluZm8oCiAgICAgICAgb3B0aW9ucy5jb250ZXh0LAogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgZm9ybWF0OiBvcHRpb25zLmNvbnRleHQuUkdCQSwKICAgICAgICAgICAgdHlwZTogb3B0aW9ucy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsCiAgICAgICAgICAgIG1pbjogb3B0aW9ucy5jb250ZXh0LkxJTkVBUiwKICAgICAgICAgICAgbWFnOiBvcHRpb25zLmNvbnRleHQuTElORUFSLAogICAgICAgICAgICB3cmFwOiBvcHRpb25zLmNvbnRleHQuQ0xBTVBfVE9fRURHRQogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgb3B0aW9ucy53aWR0aCwKICAgICAgICBvcHRpb25zLmhlaWdodAogICAgICApOwogICAgfQogICAgcnVuKHVuaWZvcm1zKSB7CiAgICAgIGNvbnN0IHRtcCA9IHRoaXMuZmJpOwogICAgICB0aGlzLmZiaSA9IHRoaXMuZmJpMjsKICAgICAgdGhpcy5mYmkyID0gdG1wOwogICAgICB0aGlzLm91dHB1dCA9IHRoaXMuZmJpLmF0dGFjaG1lbnRzWzBdOwogICAgICBzdXBlci5ydW4oewogICAgICAgIC4uLnVuaWZvcm1zLAogICAgICAgIHByZXZpb3VzX3JlbmRlcmluZzogdGhpcy5mYmkyLmF0dGFjaG1lbnRzWzBdCiAgICAgIH0pOwogICAgfQogICAgcmVzaXplT3V0cHV0KHdpZHRoLCBoZWlnaHQpIHsKICAgICAgc3VwZXIucmVzaXplT3V0cHV0KHdpZHRoLCBoZWlnaHQpOwogICAgICB0aGlzLmZiaTIgPSBjcmVhdGVGcmFtZWJ1ZmZlckluZm8oCiAgICAgICAgdGhpcy5jb250ZXh0LAogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgZm9ybWF0OiB0aGlzLmNvbnRleHQuUkdCQSwKICAgICAgICAgICAgdHlwZTogdGhpcy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsCiAgICAgICAgICAgIG1pbjogdGhpcy5jb250ZXh0LkxJTkVBUiwKICAgICAgICAgICAgd3JhcDogdGhpcy5jb250ZXh0LkNMQU1QX1RPX0VER0UKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodAogICAgICApOwogICAgfQogIH0KCiAgdmFyIGZyYWdtZW50U2hhZGVyJDUgPSAicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG5cbnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxuLy8gdW5pZm9ybSBmbG9hdCB0cmVzaG9sZDtcbnVuaWZvcm0gc2FtcGxlcjJEIGltYWdlX25vdztcbnVuaWZvcm0gc2FtcGxlcjJEIGltYWdlX2JlZm9yZTtcbnVuaWZvcm0gc2FtcGxlcjJEIG1hc2tfbm93O1xudW5pZm9ybSBzYW1wbGVyMkQgbWFza19iZWZvcmU7XG51bmlmb3JtIHNhbXBsZXIyRCBwcmV2aW91c19yZW5kZXJpbmc7XG51bmlmb3JtIHZlYzIgY2FudmFzO1xuXG51bmlmb3JtIGZsb2F0IGRlbHRhO1xuXG5mbG9hdCBjdXJyZW50X2ZhY3RvciA9IDAuNjk7XG5mbG9hdCBwcmV2aW91c19mYWN0b3IgPSAwLjc0O1xuZmxvYXQgdGhyZXNob2xkX2FjdGl2YXRpb24gPSAwLjU0O1xuXG5mbG9hdCBtYXAoZmxvYXQgdmFsdWUsIGZsb2F0IG1pbjEsIGZsb2F0IG1heDEsIGZsb2F0IG1pbjIsIGZsb2F0IG1heDIpIHtcbiAgcmV0dXJuIG1pbjIgKyAodmFsdWUgLSBtaW4xKSAqIChtYXgyIC0gbWluMikgLyAobWF4MSAtIG1pbjEpO1xufVxuXG5mbG9hdCBnZXRUaHJlc2hvbGQoKSB7XG4gIHZlYzQgY29sb3IgPSB2ZWM0KDAuKTtcbiAgZm9yIChmbG9hdCB5ID0gLTYuOyB5IDwgNy47IHkgKz0gMS4pIHtcbiAgICBmb3IgKGZsb2F0IHggPSAtNi47IHggPCA3LjsgeCArPSAxLikge1xuICAgICAgdmVjNCBpbWFnZV9ub3dfY29sb3IgPVxuICAgICAgICAgIHRleHR1cmUyRChpbWFnZV9ub3csIF90ZXh0dXJlX2Nvb3JkICsgdmVjMih4LCB5KSAvIGNhbnZhcyk7XG4gICAgICB2ZWM0IGltYWdlX2JlZm9yZV9jb2xvciA9XG4gICAgICAgICAgdGV4dHVyZTJEKGltYWdlX2JlZm9yZSwgX3RleHR1cmVfY29vcmQgKyB2ZWMyKHgsIHkpIC8gY2FudmFzKTtcbiAgICAgIGNvbG9yICs9IGFicyhpbWFnZV9iZWZvcmVfY29sb3IgLSBpbWFnZV9ub3dfY29sb3IpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gKGNvbG9yLnggKyBjb2xvci55ICsgY29sb3IueikgLyAoMy4gKiA5Lik7XG59XG5cbnZvaWQgbWFpbigpIHtcbiAgZmxvYXQgdHJlc2hvbGRfaW5wdXQgPSAuNDtcbiAgZmxvYXQgdHJlc2hvbGRfcHJldmlvdXNfcmVuZGVyaW5nID0gLjk4O1xuXG4gIHZlYzQgbWFza19ub3dfY29sb3IgPSB0ZXh0dXJlMkQobWFza19ub3csIF90ZXh0dXJlX2Nvb3JkKTtcbiAgdmVjNCBtYXNrX2JlZm9yZV9jb2xvciA9IHRleHR1cmUyRChtYXNrX2JlZm9yZSwgX3RleHR1cmVfY29vcmQpO1xuICB2ZWM0IHByZXZpb3VzX3JlbmRlcmluZ19jb2xvciA9IHRleHR1cmUyRChwcmV2aW91c19yZW5kZXJpbmcsIF90ZXh0dXJlX2Nvb3JkKTtcblxuICB2ZWMzIG1hc2tfZGlmZiA9IGFicyhtYXNrX2JlZm9yZV9jb2xvci54eXogLSBtYXNrX25vd19jb2xvci54eXopO1xuICBmbG9hdCBmbGlja2VyaW5nID0gbWFza19kaWZmLng7XG4gIGZsb2F0IHRocmVzaG9sZCA9IGdldFRocmVzaG9sZCgpO1xuICBpZiAodGhyZXNob2xkIDwgdGhyZXNob2xkX2FjdGl2YXRpb24pIHtcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGZsaWNrZXJpbmcsIDAuLCAwLiwgMS4pICogY3VycmVudF9mYWN0b3IgK1xuICAgICAgICAgICAgICAgICAgIHByZXZpb3VzX3JlbmRlcmluZ19jb2xvciAqIHByZXZpb3VzX2ZhY3RvcjtcbiAgICBnbF9GcmFnQ29sb3IgKj0gKDEuIC0gdGhyZXNob2xkKTtcbiAgfVxufVxuIjsKCiAgdmFyIHZlcnRleFNoYWRlciQ1ID0gInZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XG5hdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTtcbiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkO1xufVxuIjsKCiAgY2xhc3MgRmxpY2tlcmluZyBleHRlbmRzIFdlYmdsUGlwZWxpbmVQcm9ncmFtRG91YmxlQnVmZmVyIHsKICAgIGdldEZyYWdtZW50U2hhZGVyKCkgewogICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXIkNTsKICAgIH0KICAgIGdldFZlcnRleFNoYWRlcigpIHsKICAgICAgcmV0dXJuIHZlcnRleFNoYWRlciQ1OwogICAgfQogIH0KCiAgdmFyIGZyYWdtZW50U2hhZGVyJDQgPSAiI3ZlcnNpb24gMzAwIGVzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vVm9sY29taXgvdmlydHVhbC1iYWNrZ3JvdW5kL2Jsb2IvbWFpbi9zcmMvcGlwZWxpbmVzL3dlYmdsMi9qb2ludEJpbGF0ZXJhbEZpbHRlclN0YWdlLnRzXG5cbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcbnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0X2ZyYW1lO1xudW5pZm9ybSBzYW1wbGVyMkQgc2VnbWVudGF0aW9uX21hc2s7XG51bmlmb3JtIHNhbXBsZXIyRCB0aHJlc2hvbGQ7XG51bmlmb3JtIHZlYzIgdGV4ZWxfc2l6ZTtcbnVuaWZvcm0gZmxvYXQgc3RlcDtcbnVuaWZvcm0gZmxvYXQgcmFkaXVzO1xudW5pZm9ybSBmbG9hdCBvZmZzZXQ7XG51bmlmb3JtIGZsb2F0IHNpZ21hX3RleGVsO1xudW5pZm9ybSBmbG9hdCBzaWdtYV9jb2xvcjtcblxuaW4gdmVjMiBfdGV4dHVyZV9jb29yZDtcbm91dCB2ZWM0IG91dENvbG9yO1xuXG5mbG9hdCBnYXVzc2lhbihmbG9hdCB4LCBmbG9hdCBzaWdtYSkge1xuICBmbG9hdCBjb2VmZiA9IC0wLjUgLyAoc2lnbWEgKiBzaWdtYSAqIDQuMCArIDEuMGUtNik7XG4gIHJldHVybiBleHAoKHggKiB4KSAqIGNvZWZmKTtcbn1cblxudm9pZCBtYWluKCkge1xuICB2ZWMyIGNlbnRlckNvb3JkID0gX3RleHR1cmVfY29vcmQ7XG4gIHZlYzMgY2VudGVyQ29sb3IgPSB0ZXh0dXJlKGlucHV0X2ZyYW1lLCBjZW50ZXJDb29yZCkucmdiO1xuICBmbG9hdCBuZXdWYWwgPSAwLjA7XG4gIGZsb2F0IHNwYWNlV2VpZ2h0ID0gMC4wO1xuICBmbG9hdCBjb2xvcldlaWdodCA9IDAuMDtcbiAgZmxvYXQgdG90YWxXZWlnaHQgPSAwLjA7XG4gIC8vIFN1YnNhbXBsZSBrZXJuZWwgc3BhY2UuXG4gIGZvciAoZmxvYXQgaSA9IC1yYWRpdXMgKyBvZmZzZXQ7IGkgPD0gcmFkaXVzOyBpICs9IHN0ZXApIHtcbiAgICBmb3IgKGZsb2F0IGogPSAtcmFkaXVzICsgb2Zmc2V0OyBqIDw9IHJhZGl1czsgaiArPSBzdGVwKSB7XG4gICAgICB2ZWMyIHNoaWZ0ID0gdmVjMihqLCBpKSAqIHRleGVsX3NpemU7XG4gICAgICB2ZWMyIGNvb3JkID0gdmVjMihjZW50ZXJDb29yZCArIHNoaWZ0KTtcbiAgICAgIHZlYzMgZnJhbWVDb2xvciA9IHRleHR1cmUoaW5wdXRfZnJhbWUsIGNvb3JkKS5yZ2I7XG4gICAgICBmbG9hdCB0aHJlc2hvbGQgPSB0ZXh0dXJlKHRocmVzaG9sZCwgY29vcmQpLmE7XG4gICAgICBmbG9hdCBvdXRWYWwgPSB0ZXh0dXJlKHNlZ21lbnRhdGlvbl9tYXNrLCBjb29yZCkuYTtcblxuICAgICAgc3BhY2VXZWlnaHQgPSBnYXVzc2lhbihkaXN0YW5jZShjZW50ZXJDb29yZCwgY29vcmQpLCBzaWdtYV90ZXhlbCk7XG4gICAgICBjb2xvcldlaWdodCA9IGdhdXNzaWFuKGRpc3RhbmNlKGNlbnRlckNvbG9yLCBmcmFtZUNvbG9yKSwgc2lnbWFfY29sb3IpO1xuICAgICAgdG90YWxXZWlnaHQgKz0gc3BhY2VXZWlnaHQgKiBjb2xvcldlaWdodDtcbiAgICAgIG5ld1ZhbCArPSBzcGFjZVdlaWdodCAqIGNvbG9yV2VpZ2h0ICogb3V0VmFsICogdGhyZXNob2xkO1xuICAgIH1cbiAgfVxuICBuZXdWYWwgLz0gdG90YWxXZWlnaHQ7XG4gIG91dENvbG9yID0gdmVjNCh2ZWMzKDAuKSwgbmV3VmFsKTtcbn0iOwoKICB2YXIgdmVydGV4U2hhZGVyJDQgPSAiI3ZlcnNpb24gMzAwIGVzXG5pbiB2ZWMyIHBvc2l0aW9uO1xuaW4gdmVjMiB0ZXh0dXJlX2Nvb3JkO1xub3V0IHZlYzIgX3RleHR1cmVfY29vcmQ7XG52b2lkIG1haW4oKSB7XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4wLCAxLjApO1xuICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7XG59IjsKCiAgY2xhc3MgSm9pbnRCaWxhdGVyYWwgZXh0ZW5kcyBXZWJnbFBpcGVsaW5lUHJvZ3JhbSB7CiAgICBnZXRGcmFnbWVudFNoYWRlcigpIHsKICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyJDQ7CiAgICB9CiAgICBnZXRWZXJ0ZXhTaGFkZXIoKSB7CiAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXIkNDsKICAgIH0KICB9CgogIHZhciBmcmFnbWVudFNoYWRlciQzID0gInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG52YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbnVuaWZvcm0gdmVjMiBjYW52YXM7XG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXG52b2lkIG1haW4oKSB7XG4gIGludCBjb3VudCA9IDA7XG4gIGZvciAoZmxvYXQgeSA9IC0xLjsgeSA8IDIuOyB5ICs9IDEuKSB7XG4gICAgZm9yIChmbG9hdCB4ID0gLTEuOyB4IDwgMi47IHggKz0gMS4pIHtcbiAgICAgIHZlYzIgY29vcmQgPSBfdGV4dHVyZV9jb29yZCArIHZlYzIoeSwgeCkgLyBjYW52YXM7XG4gICAgICB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIGNvb3JkKTtcbiAgICAgIGlmIChjb2xvci5yID4gLjEpIHtcbiAgICAgICAgY291bnQrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGNvdW50ID4gNSkge1xuICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCk7XG4gIH1cbn1cbiI7CgogIHZhciB2ZXJ0ZXhTaGFkZXIkMyA9ICJ2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xuYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDtcblxudm9pZCBtYWluKCkge1xuICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7XG4gIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDtcbn1cbiI7CgogIGNsYXNzIE1pbmltdW1TdXJmYWNlIGV4dGVuZHMgV2ViZ2xQaXBlbGluZVByb2dyYW0gewogICAgZ2V0RnJhZ21lbnRTaGFkZXIoKSB7CiAgICAgIHJldHVybiBmcmFnbWVudFNoYWRlciQzOwogICAgfQogICAgZ2V0VmVydGV4U2hhZGVyKCkgewogICAgICByZXR1cm4gdmVydGV4U2hhZGVyJDM7CiAgICB9CiAgfQoKICB2YXIgZnJhZ21lbnRTaGFkZXIkMiA9ICJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcblxudmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkO1xuXG51bmlmb3JtIHZlYzIgY2FudmFzO1xudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcblxudm9pZCBtYWluKCkge1xuICB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIF90ZXh0dXJlX2Nvb3JkKTtcbiAgZm9yIChmbG9hdCB5ID0gLTIuOyB5IDwgMy47IHkgKz0gMS4pIHtcbiAgICBmb3IgKGZsb2F0IHggPSAtMi47IHggPCAzLjsgeCArPSAxLikge1xuICAgICAgdmVjMiBjb29yZCA9IF90ZXh0dXJlX2Nvb3JkO1xuICAgICAgY29vcmQgKz0gdmVjMih5LCB4KSAvIGNhbnZhcztcbiAgICAgIGNvbG9yICs9IHRleHR1cmUyRCh0ZXh0dXJlLCBjb29yZCkgKiAoMS4gLyA0Lik7XG4gICAgfVxuICB9XG5cbiAgZ2xfRnJhZ0NvbG9yID0gY29sb3I7XG59XG4iOwoKICB2YXIgdmVydGV4U2hhZGVyJDIgPSAidmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkO1xuXG5hdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcbmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7XG5cbnZvaWQgbWFpbigpIHtcbiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pO1xuICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7XG59XG4iOwoKICBjbGFzcyBTbW9vdGggZXh0ZW5kcyBXZWJnbFBpcGVsaW5lUHJvZ3JhbURvdWJsZUJ1ZmZlciB7CiAgICBnZXRGcmFnbWVudFNoYWRlcigpIHsKICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyJDI7CiAgICB9CiAgICBnZXRWZXJ0ZXhTaGFkZXIoKSB7CiAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXIkMjsKICAgIH0KICB9CgogIHZhciBmcmFnbWVudFNoYWRlciQxID0gInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG52YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbnVuaWZvcm0gc2FtcGxlcjJEIHRocmVzaG9sZDtcbnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0cztcblxudm9pZCBtYWluKCkge1xuICB2ZWM0IGlucHV0c19jb2xvciA9IHRleHR1cmUyRChpbnB1dHMsIF90ZXh0dXJlX2Nvb3JkKTtcbiAgdmVjNCB0aHJlc2hvbGRfY29sb3IgPSB0ZXh0dXJlMkQodGhyZXNob2xkLCBfdGV4dHVyZV9jb29yZCk7XG4gIGlmICh0aHJlc2hvbGRfY29sb3IuciA8IC4xICYmIGlucHV0c19jb2xvci5yID4gLjUpIHtcbiAgICBnbF9GcmFnQ29sb3IgPSBpbnB1dHNfY29sb3I7XG4gIH1cbn1cbiI7CgogIHZhciB2ZXJ0ZXhTaGFkZXIkMSA9ICJ2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xuYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDtcblxudm9pZCBtYWluKCkge1xuICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7XG4gIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDtcbn1cbiI7CgogIGNsYXNzIFRyYWNrIGV4dGVuZHMgV2ViZ2xQaXBlbGluZVByb2dyYW1Eb3VibGVCdWZmZXIgewogICAgZ2V0RnJhZ21lbnRTaGFkZXIoKSB7CiAgICAgIHJldHVybiBmcmFnbWVudFNoYWRlciQxOwogICAgfQogICAgZ2V0VmVydGV4U2hhZGVyKCkgewogICAgICByZXR1cm4gdmVydGV4U2hhZGVyJDE7CiAgICB9CiAgfQoKICBjbGFzcyBJbXByb3ZlU2VnbWVudGF0aW9uTWFza1BpcGVsaW5lIGV4dGVuZHMgV2ViZ2xQaXBlbGluZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMub3B0aW9ucyA9IHsKICAgICAgICBjdXJyZW50VGhyZXNob2xkTWluaW11bTogMCwKICAgICAgICBjdXJyZW50VGhyZXNob2xkTWF4aW11bTogMSwKICAgICAgICBwcmV2aW91c1RocmVzaG9sZE1pbmltdW06IDAsCiAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRNYXhpbXVtOiAxLAogICAgICAgIHRocmVzaG9sZE1pbmltdW06IDAsCiAgICAgICAgdGhyZXNob2xkTWF4aW11bTogMSwKICAgICAgICB0aHJlc2hvbGRGYWN0b3I6IDEKICAgICAgfTsKICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAgICAgY29udGV4dCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgd2lkdGgKICAgICAgfTsKICAgICAgY29uc3QgZmxpY2tlcmluZyA9IG5ldyBGbGlja2VyaW5nKGRlZmF1bHRPcHRpb25zKTsKICAgICAgY29uc3QgYmx1ciA9IG5ldyBCbHVyKHsKICAgICAgICAuLi5kZWZhdWx0T3B0aW9ucywKICAgICAgICByYWRpdXM6IDEsCiAgICAgICAgdHlwZTogQkxVUl9UWVBFLkdBVVNTSUFOCiAgICAgIH0pOwogICAgICBjb25zdCB0cmFjayA9IG5ldyBUcmFjayhkZWZhdWx0T3B0aW9ucyk7CiAgICAgIGNvbnN0IHNtb290aCA9IG5ldyBTbW9vdGgoZGVmYXVsdE9wdGlvbnMpOwogICAgICBjb25zdCBtaW5pbXVtU3VyZmFjZSA9IG5ldyBNaW5pbXVtU3VyZmFjZShkZWZhdWx0T3B0aW9ucyk7CiAgICAgIHRoaXMuam9pbnRCaWxhdGVyYWwgPSBuZXcgSm9pbnRCaWxhdGVyYWwoZGVmYXVsdE9wdGlvbnMpOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IGZsaWNrZXJpbmcsCiAgICAgICAgZ2V0VW5pZm9ybXM6ICgpID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGltYWdlX25vdzogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0SW1hZ2UpLAogICAgICAgICAgICBpbWFnZV9iZWZvcmU6IHRleHR1cmUoY29udGV4dCwgdGhpcy5wcmV2aW91c0lucHV0SW1hZ2UpLAogICAgICAgICAgICBtYXNrX25vdzogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0TWFzayksCiAgICAgICAgICAgIG1hc2tfYmVmb3JlOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMucHJldmlvdXNJbnB1dE1hc2spLAogICAgICAgICAgICBjdXJyZW50X3RocmVzaG9sZF9taW5pbXVtOiB0aGlzLm9wdGlvbnMuY3VycmVudFRocmVzaG9sZE1pbmltdW0sCiAgICAgICAgICAgIGN1cnJlbnRfdGhyZXNob2xkX21heGltdW06IHRoaXMub3B0aW9ucy5jdXJyZW50VGhyZXNob2xkTWF4aW11bSwKICAgICAgICAgICAgcHJldmlvdXNfdGhyZXNob2xkX21pbmltdW06IHRoaXMub3B0aW9ucy5wcmV2aW91c1RocmVzaG9sZE1pbmltdW0sCiAgICAgICAgICAgIHByZXZpb3VzX3RocmVzaG9sZF9tYXhpbXVtOiB0aGlzLm9wdGlvbnMucHJldmlvdXNUaHJlc2hvbGRNYXhpbXVtLAogICAgICAgICAgICB0aHJlc2hvbGRfbWluaW11bTogdGhpcy5vcHRpb25zLnRocmVzaG9sZE1pbmltdW0sCiAgICAgICAgICAgIHRocmVzaG9sZF9tYXhpbXVtOiB0aGlzLm9wdGlvbnMudGhyZXNob2xkTWF4aW11bSwKICAgICAgICAgICAgdGhyZXNob2xkX2ZhY3RvcjogdGhpcy5vcHRpb25zLnRocmVzaG9sZEZhY3RvcgogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IHRyYWNrLAogICAgICAgIGdldFVuaWZvcm1zOiAoKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpbnB1dHM6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dE1hc2spLAogICAgICAgICAgICB0aHJlc2hvbGQ6IHRleHR1cmUoY29udGV4dCwgZmxpY2tlcmluZy5vdXRwdXQpCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogbWluaW11bVN1cmZhY2UsCiAgICAgICAgZ2V0VW5pZm9ybXM6ICgpID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUoY29udGV4dCwgdHJhY2sub3V0cHV0KQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IHNtb290aCwKICAgICAgICBnZXRVbmlmb3JtczogKCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZShjb250ZXh0LCBtaW5pbXVtU3VyZmFjZS5vdXRwdXQpCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogYmx1ciwKICAgICAgICBnZXRVbmlmb3JtczogKCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZShjb250ZXh0LCBzbW9vdGgub3V0cHV0KQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IHRoaXMuam9pbnRCaWxhdGVyYWwsCiAgICAgICAgZ2V0VW5pZm9ybXM6ICgpID0+IHsKICAgICAgICAgIGNvbnN0IGtTcGFyc2l0eUZhY3RvciA9IDAuNjY7CiAgICAgICAgICBjb25zdCBvdXRwdXRXaWR0aCA9IHRoaXMuaW5wdXRJbWFnZT8ud2lkdGggPz8gMTsKICAgICAgICAgIGNvbnN0IG91dHB1dEhlaWdodCA9IHRoaXMuaW5wdXRJbWFnZT8uaGVpZ2h0ID8/IDE7CiAgICAgICAgICBjb25zdCBzZWdtZW50YXRpb25XaWR0aCA9IHRoaXMuaW5wdXRNYXNrPy53aWR0aCA/PyAxOwogICAgICAgICAgY29uc3Qgc2VnbWVudGF0aW9uSGVpZ2h0ID0gdGhpcy5pbnB1dE1hc2s/LmhlaWdodCA/PyAxOwogICAgICAgICAgY29uc3Qgc2lnbWFTcGFjZSA9IE1hdGgubWF4KAogICAgICAgICAgICBvdXRwdXRXaWR0aCAvIHNlZ21lbnRhdGlvbldpZHRoLAogICAgICAgICAgICBvdXRwdXRIZWlnaHQgLyBzZWdtZW50YXRpb25IZWlnaHQKICAgICAgICAgICk7CiAgICAgICAgICBjb25zdCBzcGFyc2l0eSA9IE1hdGgubWF4KAogICAgICAgICAgICAxLAogICAgICAgICAgICBNYXRoLnNxcnQoc2lnbWFTcGFjZSkgKiBrU3BhcnNpdHlGYWN0b3IKICAgICAgICAgICk7CiAgICAgICAgICBjb25zdCB0ZXhlbFdpZHRoID0gMSAvIG91dHB1dFdpZHRoOwogICAgICAgICAgY29uc3QgdGV4ZWxIZWlnaHQgPSAxIC8gb3V0cHV0SGVpZ2h0OwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW5wdXRfZnJhbWU6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dEltYWdlKSwKICAgICAgICAgICAgc2VnbWVudGF0aW9uX21hc2s6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dE1hc2spLAogICAgICAgICAgICB0aHJlc2hvbGQ6IHRleHR1cmUoY29udGV4dCwgYmx1ci5vdXRwdXQpLAogICAgICAgICAgICB0ZXhlbF9zaXplOiBbdGV4ZWxXaWR0aCwgdGV4ZWxIZWlnaHRdLAogICAgICAgICAgICBzdGVwOiBzcGFyc2l0eSwKICAgICAgICAgICAgcmFkaXVzOiBzaWdtYVNwYWNlLAogICAgICAgICAgICBvZmZzZXQ6IHNwYXJzaXR5ID4gMSA/IHNwYXJzaXR5ICogMC41IDogMCwKICAgICAgICAgICAgc2lnbWFfdGV4ZWw6IE1hdGgubWF4KHRleGVsV2lkdGgsIHRleGVsSGVpZ2h0KSAqIHNpZ21hU3BhY2UsCiAgICAgICAgICAgIHNpZ21hX2NvbG9yOiAwLjEKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5vdXRwdXQgPSB0aGlzLmpvaW50QmlsYXRlcmFsLm91dHB1dDsKICAgIH0KICAgIHNldERhdGEoaW1hZ2UsIG1hc2spIHsKICAgICAgdGhpcy5wcmV2aW91c0lucHV0SW1hZ2UgPSB0aGlzLmlucHV0SW1hZ2UgPyB0aGlzLmlucHV0SW1hZ2UgOiBpbWFnZTsKICAgICAgdGhpcy5wcmV2aW91c0lucHV0TWFzayA9IHRoaXMuaW5wdXRNYXNrID8gdGhpcy5pbnB1dE1hc2sgOiBtYXNrOwogICAgICB0aGlzLmlucHV0SW1hZ2UgPSBpbWFnZTsKICAgICAgdGhpcy5pbnB1dE1hc2sgPSBtYXNrOwogICAgfQogICAgc2V0T3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICB9CiAgICByZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCkgewogICAgICBzdXBlci5yZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCk7CiAgICAgIHRoaXMub3V0cHV0ID0gdGhpcy5qb2ludEJpbGF0ZXJhbC5vdXRwdXQ7CiAgICB9CiAgfQoKICBjbGFzcyBXZWJnbFByb2ZpbGVyIHsKICAgIGNvbnN0cnVjdG9yKGNvbnRleHQpIHsKICAgICAgdGhpcy5xdWVyaWVzID0gW107CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMuZXh0ZW5zaW9uID0gY29udGV4dC5nZXRFeHRlbnNpb24oCiAgICAgICAgIkVYVF9kaXNqb2ludF90aW1lcl9xdWVyeV93ZWJnbDIiCiAgICAgICk7CiAgICB9CiAgICBzdGFydCgpIHsKICAgIH0KICAgIHN0b3AoKSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZVF1ZXJ5KSB7CiAgICAgICAgdGhpcy5jb250ZXh0LmVuZFF1ZXJ5KHRoaXMuZXh0ZW5zaW9uLlRJTUVfRUxBUFNFRF9FWFQpOwogICAgICB9CiAgICB9CiAgICBwdXNoQ29udGV4dChuYW1lKSB7CiAgICAgIHRoaXMuY3JlYXRlUXVlcnkoIlBVU0giIC8qIFBVU0ggKi8sIG5hbWUpOwogICAgfQogICAgcG9wQ29udGV4dChuYW1lKSB7CiAgICAgIHRoaXMuY3JlYXRlUXVlcnkoIlBPUCIgLyogUE9QICovLCBuYW1lKTsKICAgIH0KICAgIGNyZWF0ZVF1ZXJ5KGFjdGlvbiwgbmFtZSkgewogICAgICBpZiAodGhpcy5hY3RpdmVRdWVyeSkgewogICAgICAgIHRoaXMuY29udGV4dC5lbmRRdWVyeSh0aGlzLmV4dGVuc2lvbi5USU1FX0VMQVBTRURfRVhUKTsKICAgICAgfQogICAgICB0aGlzLmFjdGl2ZVF1ZXJ5ID0gdGhpcy5jb250ZXh0LmNyZWF0ZVF1ZXJ5KCk7CiAgICAgIHRoaXMuY29udGV4dC5iZWdpblF1ZXJ5KAogICAgICAgIHRoaXMuZXh0ZW5zaW9uLlRJTUVfRUxBUFNFRF9FWFQsCiAgICAgICAgdGhpcy5hY3RpdmVRdWVyeQogICAgICApOwogICAgICB0aGlzLnF1ZXJpZXMucHVzaCh7CiAgICAgICAgbmFtZSwKICAgICAgICBhY3Rpb24sCiAgICAgICAgcXVlcnk6IHRoaXMuYWN0aXZlUXVlcnkKICAgICAgfSk7CiAgICB9CiAgICBhc3luYyBnZXRSZXNvbHZlZFF1ZXJpZXMoKSB7CiAgICAgIGNvbnN0IHF1ZXJpZXMgPSAoYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgICAgWy4uLnRoaXMucXVlcmllc10ubWFwKChxdWVyeSkgPT4gdGhpcy5yZXNvbHZlUXVlcnkocXVlcnkpKQogICAgICApKS5maWx0ZXIoKHEpID0+IHEpOwogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHF1ZXJpZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICBxdWVyaWVzW2ldLnRpbWVzdGFtcCArPSBxdWVyaWVzW2kgLSAxXS5kdXJhdGlvbiArIHF1ZXJpZXNbaSAtIDFdLnRpbWVzdGFtcDsKICAgICAgfQogICAgICByZXR1cm4gcXVlcmllczsKICAgIH0KICAgIGFzeW5jIHJlc29sdmVRdWVyeShxdWVyeSkgewogICAgICBpZiAoIWF3YWl0IHRoaXMuYXdhaXRRdWVyeUF2YWlsYWJsZShxdWVyeSkpIHsKICAgICAgICBjb25zb2xlLmxvZygiVW5hd2FpdGFibGUgcXVlcnkiLCBxdWVyeSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxldCBkaXNqb2ludCA9IHRoaXMuY29udGV4dC5nZXRQYXJhbWV0ZXIoCiAgICAgICAgdGhpcy5leHRlbnNpb24uR1BVX0RJU0pPSU5UX0VYVAogICAgICApOwogICAgICBpZiAoZGlzam9pbnQpIHsKICAgICAgICBjb25zb2xlLmxvZygiRGlzam9pbnRlZCBxdWVyeSIsIHF1ZXJ5KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5xdWVyeSwKICAgICAgICBkdXJhdGlvbjogdGhpcy5jb250ZXh0LmdldFF1ZXJ5UGFyYW1ldGVyKAogICAgICAgICAgcXVlcnkucXVlcnksCiAgICAgICAgICB0aGlzLmNvbnRleHQuUVVFUllfUkVTVUxUCiAgICAgICAgKSwKICAgICAgICB0aW1lc3RhbXA6IDAKICAgICAgfTsKICAgIH0KICAgIGFzeW5jIGF3YWl0UXVlcnlBdmFpbGFibGUocXVlcnkpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgKytpKSB7CiAgICAgICAgbGV0IGF2YWlsYWJsZSA9IHRoaXMuY29udGV4dC5nZXRRdWVyeVBhcmFtZXRlcigKICAgICAgICAgIHF1ZXJ5LnF1ZXJ5LAogICAgICAgICAgdGhpcy5jb250ZXh0LlFVRVJZX1JFU1VMVF9BVkFJTEFCTEUKICAgICAgICApOwogICAgICAgIGlmIChhdmFpbGFibGUpIHsKICAgICAgICAgIHJldHVybiBxdWVyeTsKICAgICAgICB9CiAgICAgICAgYXdhaXQgd2FpdCgyMDApOwogICAgICB9CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgfQoKICBjbGFzcyBXZWJnbFJlbmRlcmVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnByZXZpb3VzSW1hZ2VXaWR0aCA9IDA7CiAgICAgIHRoaXMucHJldmlvdXNJbWFnZUhlaWdodCA9IDA7CiAgICAgIHRoaXMucHJldmlvdXNNYXNrV2lkdGggPSBXRUJHTF9NSU5JTVVNX1RFWFRVUkVfU0laRTsKICAgICAgdGhpcy5wcmV2aW91c01hc2tIZWlnaHQgPSBXRUJHTF9NSU5JTVVNX1RFWFRVUkVfU0laRTsKICAgICAgdGhpcy5wb3N0UHJvY2Vzc2luZ0VuYWJsZWQgPSB0cnVlOwogICAgICBjb25zdCBjYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKDAsIDApOwogICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIndlYmdsMiIpOwogICAgICBpZiAoIWNvbnRleHQpIHsKICAgICAgICB0aHJvdyAiRmFpbCB0byByZXRyaWV2ZSB3ZWJnbDIgY29udGV4dCI7CiAgICAgIH0KICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMuaW1wcm92ZU1hc2sgPSBuZXcgSW1wcm92ZVNlZ21lbnRhdGlvbk1hc2tQaXBlbGluZSgKICAgICAgICB0aGlzLmNvbnRleHQsCiAgICAgICAgV0VCR0xfTUlOSU1VTV9URVhUVVJFX1NJWkUsCiAgICAgICAgV0VCR0xfTUlOSU1VTV9URVhUVVJFX1NJWkUKICAgICAgKTsKICAgIH0KICAgIHNldEZsaWNrZXJpbmdPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgdGhpcy5pbXByb3ZlTWFzay5zZXRPcHRpb25zKG9wdGlvbnMpOwogICAgfQogICAgZW5hYmxlUG9zdFByb2Nlc3NpbmcoKSB7CiAgICAgIHRoaXMucG9zdFByb2Nlc3NpbmdFbmFibGVkID0gdHJ1ZTsKICAgIH0KICAgIGRpc2FibGVQb3N0UHJvY2Vzc2luZygpIHsKICAgICAgdGhpcy5wb3N0UHJvY2Vzc2luZ0VuYWJsZWQgPSBmYWxzZTsKICAgIH0KICAgIGFzeW5jIHByb2ZpbGVXZWJnbChkdXJhdGlvbikgewogICAgICBjb25zdCBwcm9maWxlciA9IG5ldyBXZWJnbFByb2ZpbGVyKHRoaXMuY29udGV4dCk7CiAgICAgIHRoaXMucHJvZmlsZXIgPSBwcm9maWxlcjsKICAgICAgcHJvZmlsZXIuc3RhcnQoKTsKICAgICAgYXdhaXQgd2FpdChkdXJhdGlvbik7CiAgICAgIHRoaXMucHJvZmlsZXIgPSB2b2lkIDA7CiAgICAgIHByb2ZpbGVyLnN0b3AoKTsKICAgICAgcmV0dXJuIHByb2ZpbGVyLmdldFJlc29sdmVkUXVlcmllcygpOwogICAgfQogICAgYXN5bmMgcmVuZGVyKGltYWdlLCBtYXNrKSB7CiAgICAgIGlmICghdGhpcy5waXBlbGluZSkgewogICAgICAgIHRocm93ICJtaXNzaW5nIHBpcGVsaW5lIjsKICAgICAgfQogICAgICBpZiAodGhpcy5wcmV2aW91c0ltYWdlSGVpZ2h0ICE9PSBpbWFnZS5oZWlnaHQgfHwgdGhpcy5wcmV2aW91c0ltYWdlV2lkdGggIT09IGltYWdlLndpZHRoKSB7CiAgICAgICAgdGhpcy5yZXNpemVPdXRwdXQoaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucHJldmlvdXNNYXNrSGVpZ2h0ICE9PSBtYXNrLmhlaWdodCB8fCB0aGlzLnByZXZpb3VzTWFza1dpZHRoICE9PSBtYXNrLndpZHRoKSB7CiAgICAgICAgdGhpcy5pbXByb3ZlTWFzay5yZXNpemVPdXRwdXQobWFzay53aWR0aCwgbWFzay5oZWlnaHQpOwogICAgICAgIHRoaXMucHJldmlvdXNNYXNrV2lkdGggPSBtYXNrLndpZHRoOwogICAgICAgIHRoaXMucHJldmlvdXNNYXNrSGVpZ2h0ID0gbWFzay5oZWlnaHQ7CiAgICAgIH0KICAgICAgY29uc3QgcXVlcnkgPSBgcmVuZGVyZXJgOwogICAgICB0aGlzLnByb2ZpbGVyPy5wdXNoQ29udGV4dChxdWVyeSk7CiAgICAgIHRoaXMuaW1wcm92ZU1hc2suc2V0UHJvZmlsZXIodGhpcy5wcm9maWxlcik7CiAgICAgIHRoaXMucGlwZWxpbmUuc2V0UHJvZmlsZXIodGhpcy5wcm9maWxlcik7CiAgICAgIGNvbnN0IGltYWdlQml0bWFwID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAobWFzayk7CiAgICAgIGxldCBmaW5hbE1hc2sgPSBpbWFnZUJpdG1hcDsKICAgICAgaWYgKHRoaXMucG9zdFByb2Nlc3NpbmdFbmFibGVkKSB7CiAgICAgICAgdGhpcy5pbXByb3ZlTWFzay5zZXREYXRhKGltYWdlLCBpbWFnZUJpdG1hcCk7CiAgICAgICAgdGhpcy5pbXByb3ZlTWFzay5ydW4oKTsKICAgICAgICBmaW5hbE1hc2sgPSB0aGlzLmltcHJvdmVNYXNrLm91dHB1dDsKICAgICAgfQogICAgICB0aGlzLnBpcGVsaW5lLnNldERhdGEoaW1hZ2UsIGZpbmFsTWFzayk7CiAgICAgIGF3YWl0IHRoaXMucGlwZWxpbmUucnVuKCk7CiAgICAgIHRoaXMucHJvZmlsZXI/LnBvcENvbnRleHQocXVlcnkpOwogICAgICByZXR1cm4gdGhpcy5jYW52YXM7CiAgICB9CiAgICByZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCkgewogICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpZHRoOwogICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMucGlwZWxpbmU/LnJlc2l6ZU91dHB1dCh3aWR0aCwgaGVpZ2h0KTsKICAgICAgdGhpcy5wcmV2aW91c0ltYWdlV2lkdGggPSB3aWR0aDsKICAgICAgdGhpcy5wcmV2aW91c0ltYWdlSGVpZ2h0ID0gaGVpZ2h0OwogICAgfQogIH0KCiAgY2xhc3MgV2ViZ2xJbWFnZUJhY2tncm91bmRSZW5kZXJlciBleHRlbmRzIFdlYmdsUmVuZGVyZXIgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMucGlwZWxpbmUgPSBuZXcgQmFja2dyb3VuZEltYWdlUGlwZWxpbmUodGhpcy5jb250ZXh0KTsKICAgICAgY29uc3QgY2FudmFzID0gbmV3IE9mZnNjcmVlbkNhbnZhcygwLCAwKTsKICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCJ3ZWJnbDIiKTsKICAgICAgaWYgKCFjb250ZXh0KSB7CiAgICAgICAgdGhyb3cgIkZhaWwgdG8gcmV0cmlldmUgd2ViZ2wgY29udGV4dCI7CiAgICAgIH0KICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXNpemVyQ2FudmFzID0gY2FudmFzOwogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZVJlc2l6ZXJDb250ZXh0ID0gY29udGV4dDsKICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXNpemVyID0gbmV3IFJlc2l6ZUltYWdlUGlwZWxpbmUoCiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXNpemVyQ29udGV4dCwKICAgICAgICAwLAogICAgICAgIDAKICAgICAgKTsKICAgIH0KICAgIHNldEJhY2tncm91bmRJbWFnZShpbWFnZSkgewogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZSA9IGltYWdlOwogICAgICB0aGlzLnVwZGF0ZUJhY2tncm91bmRJbWFnZSgpOwogICAgfQogICAgdXBkYXRlQmFja2dyb3VuZEltYWdlKCkgewogICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuY2FudmFzOwogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZVJlc2l6ZXIucmVzaXplT3V0cHV0KHdpZHRoLCBoZWlnaHQpOwogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZVJlc2l6ZXIuc2V0RGF0YSh0aGlzLmJhY2tncm91bmRJbWFnZSk7CiAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlUmVzaXplci5ydW4oKTsKICAgICAgdGhpcy5waXBlbGluZS5pbnB1dEJhY2tncm91bmRJbWFnZSA9IHRoaXMuYmFja2dyb3VuZEltYWdlUmVzaXplckNhbnZhczsKICAgIH0KICAgIHJlc2l6ZU91dHB1dCh3aWR0aCwgaGVpZ2h0KSB7CiAgICAgIHN1cGVyLnJlc2l6ZU91dHB1dCh3aWR0aCwgaGVpZ2h0KTsKICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXNpemVyQ2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlUmVzaXplckNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlUmVzaXplci5yZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCk7CiAgICAgIHRoaXMudXBkYXRlQmFja2dyb3VuZEltYWdlKCk7CiAgICB9CiAgfQoKICBjbGFzcyBDYW52YXMyZFZpZGVvQmFja2dyb3VuZFJlbmRlcmVyIGV4dGVuZHMgV2ViZ2xJbWFnZUJhY2tncm91bmRSZW5kZXJlciB7CiAgICBzZXRCYWNrZ3JvdW5kVmlkZW8ocmVhZGVyKSB7CiAgICAgIHRoaXMuZnJhbWVSZWFkZXIgPSByZWFkZXI7CiAgICB9CiAgICBhc3luYyByZW5kZXIoaW1hZ2UsIG1hc2spIHsKICAgICAgYXdhaXQgdGhpcy5yZWFkTmV4dFZpZGVvRnJhbWUoKTsKICAgICAgcmV0dXJuIHN1cGVyLnJlbmRlcihpbWFnZSwgbWFzayk7CiAgICB9CiAgICBhc3luYyByZWFkTmV4dFZpZGVvRnJhbWUoKSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZnJhbWVSZWFkZXI/LnJlYWQoKTsKICAgICAgaWYgKHJlc3VsdD8udmFsdWUpIHsKICAgICAgICBjb25zdCBiaXRtYXAgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChyZXN1bHQudmFsdWUpOwogICAgICAgIHRoaXMuc2V0QmFja2dyb3VuZEltYWdlKGJpdG1hcCk7CiAgICAgICAgcmVzdWx0LnZhbHVlLmNsb3NlKCk7CiAgICAgIH0KICAgIH0KICB9CgogIGNsYXNzIENhbnZhczJkUmVuZGVyZXJGYWN0b3J5IHsKICAgIGNvbnN0cnVjdG9yKGNvbmZpZykgewogICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZzsKICAgIH0KICAgIGJsdXJCYWNrZ3JvdW5kKHJhZGl1cykgewogICAgICByZXR1cm4gbmV3IENhbnZhczJkQmFja2dyb3VuZFJlbmRlcmVyKHJhZGl1cyk7CiAgICB9CiAgICBibHVyU2lsaG91ZXR0ZShyYWRpdXMpIHsKICAgICAgcmV0dXJuIG5ldyBDYW52YXMyZEJsdXJTaWxob3VldHRlUmVuZGVyZXIocmFkaXVzKTsKICAgIH0KICAgIGltYWdlQmFja2dyb3VuZCgpIHsKICAgICAgaWYgKHRoaXMuY29uZmlnLnZvbmFnZVNlbGZpZVNlZ21lbnRhdGlvbkVuZ2luZSA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gbmV3IE1hbnVhbEltYWdlQmFja2dyb3VuZFJlbmRlcmVyKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG5ldyBDYW52YXMyZEltYWdlQmFja2dyb3VuZFJlbmRlcmVyKCk7CiAgICB9CiAgICB2aWRlb0JhY2tncm91bmQoKSB7CiAgICAgIHJldHVybiBuZXcgQ2FudmFzMmRWaWRlb0JhY2tncm91bmRSZW5kZXJlcigpOwogICAgfQogIH0KCiAgdmFyIGZyYWdtZW50U2hhZGVyID0gInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG52YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7XG5cbnVuaWZvcm0gdmVjMiBjYW52YXM7XG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xudW5pZm9ybSBzYW1wbGVyMkQgbWFzaztcblxudmVjNCBsb29wKCk7XG5cbnZvaWQgbWFpbigpIHsgZ2xfRnJhZ0NvbG9yID0gbG9vcCgpOyB9XG4iOwoKICB2YXIgdmVydGV4U2hhZGVyID0gInZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDtcblxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XG5hdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTtcbiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkO1xufVxuIjsKCiAgY2xhc3MgQmx1ck1hc2tlZCBleHRlbmRzIFdlYmdsUGlwZWxpbmVQcm9ncmFtIHsKICAgIGdldERlZmluZXMoKSB7CiAgICAgIHJldHVybiB7IFJBRElVUzogdGhpcy5vcHRpb25zLnJhZGl1cyA/PyAxIH07CiAgICB9CiAgICBnZXRGcmFnbWVudFNoYWRlcigpIHsKICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyICsgdGhpcy5jcmVhdGVMb29wRnVuY3Rpb24oKTsKICAgIH0KICAgIGdldFZlcnRleFNoYWRlcigpIHsKICAgICAgcmV0dXJuIHZlcnRleFNoYWRlcjsKICAgIH0KICAgIGNyZWF0ZUxvb3BGdW5jdGlvbigpIHsKICAgICAgbGV0IHJhZGl1cyA9IHRoaXMub3B0aW9ucy5yYWRpdXMgPz8gMTsKICAgICAgcmV0dXJuIGAKCiAgICAgICAgdmVjNCBsb29wKCkgeyAKICAgICAgICAgICAgdmVjNCByZXN1bHQgPSB2ZWM0KDAsMCwwLDApOwogICAgICAgICAgICBmbG9hdCBmYWN0b3JTdW0gPSAwLjsKCiAgICAgICAgICAgIHZlYzIgbm9ybWFsaXplZFJhZGl1cyA9IHZlYzIoLSR7cmFkaXVzfS4pIC8gY2FudmFzOwogICAgICAgICAgICB2ZWMyIG5vcm1hbGl6ZWRJbmNyZW1lbnQgPSB2ZWMyKDEuKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBkaWZmID0gbm9ybWFsaXplZFJhZGl1czsKICAgICAgICAgICAgZmxvYXQgbWF4TGVuZ3RoID0gbGVuZ3RoKG5vcm1hbGl6ZWRSYWRpdXMpOwoKICAgICAgICAgICAgZm9yKGludCB5PS0ke3JhZGl1c307IHk8JHtyYWRpdXMgKyAxfTsgKyt5KSB7CiAgICAgICAgICAgICAgICBmb3IoaW50IHg9LSR7cmFkaXVzfTsgeDwke3JhZGl1cyArIDF9OyArK3gpIHsKICAgICAgICAgICAgICAgICAgICBmbG9hdCBmYWN0b3IgPSAoMS4tIHRleHR1cmUyRChtYXNrLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpLmEpICogKG1heExlbmd0aCAtIGxlbmd0aChkaWZmKSkgLyBtYXhMZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGZhY3RvciAqIHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpOwogICAgICAgICAgICAgICAgICAgIGZhY3RvclN1bSArPSBmYWN0b3I7CiAgICAgICAgICAgICAgICAgICAgZGlmZi54ICs9IG5vcm1hbGl6ZWRJbmNyZW1lbnQueDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRpZmYueSArPSBub3JtYWxpemVkSW5jcmVtZW50Lnk7CiAgICAgICAgICAgICAgICBkaWZmLnggPSBub3JtYWxpemVkUmFkaXVzLng7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAvIGZhY3RvclN1bTsKICAgICAgICB9YDsKICAgIH0KICB9CgogIGNvbnN0IFRIUkVTSE9MRF9SQURJVVNfRkFDVE9SID0gMTA7CiAgY29uc3QgTE9XX1JBRElVU19GQUNUT1IgPSAyOwogIGNvbnN0IEhJR0hfUkFESVVTX0ZBQ1RPUiA9IDg7CiAgY2xhc3MgQmFja2dyb3VuZEJsdXJQaXBlbGluZSBleHRlbmRzIFdlYmdsVHJhbnNmb3JtZXJQaXBlbGluZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCByYWRpdXMpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsKICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7CiAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gewogICAgICAgIGNvbnRleHQsCiAgICAgICAgaGVpZ2h0OiBjb250ZXh0LmNhbnZhcy5oZWlnaHQsCiAgICAgICAgd2lkdGg6IGNvbnRleHQuY2FudmFzLndpZHRoCiAgICAgIH07CiAgICAgIHRoaXMuYmx1ciA9IG5ldyBCbHVyTWFza2VkKHsKICAgICAgICAuLi5kZWZhdWx0T3B0aW9ucywKICAgICAgICByYWRpdXMsCiAgICAgICAgLi4udGhpcy5nZXRCbHVyVGV4dHVyZVNpemUoCiAgICAgICAgICBjb250ZXh0LmNhbnZhcy53aWR0aCwKICAgICAgICAgIGNvbnRleHQuY2FudmFzLmhlaWdodAogICAgICAgICkKICAgICAgfSk7CiAgICAgIGNvbnN0IG1peCA9IG5ldyBNaXgoeyAuLi5kZWZhdWx0T3B0aW9ucywgZGlzYWJsZUZyYW1lYnVmZmVyOiB0cnVlIH0pOwogICAgICB0aGlzLmFkZFN0ZXAoewogICAgICAgIHByb2dyYW06IHRoaXMuYmx1ciwKICAgICAgICBwcmV2ZW50UmVzaXplOiB0cnVlLAogICAgICAgIGdldFVuaWZvcm1zOiAoKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0ZXh0dXJlOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuaW5wdXRJbWFnZSksCiAgICAgICAgICAgIG1hc2s6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dE1hc2spCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYWRkU3RlcCh7CiAgICAgICAgcHJvZ3JhbTogbWl4LAogICAgICAgIGdldFVuaWZvcm1zOiAoKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuYmx1ci5vdXRwdXQpLAogICAgICAgICAgICBmb3JlZ3JvdW5kOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuaW5wdXRJbWFnZSksCiAgICAgICAgICAgIHRocmVzaG9sZDogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0TWFzaykKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIGdldEJsdXJUZXh0dXJlU2l6ZSh3aWR0aCwgaGVpZ2h0KSB7CiAgICAgIGNvbnN0IGZhY3RvciA9IHRoaXMucmFkaXVzID4gVEhSRVNIT0xEX1JBRElVU19GQUNUT1IgPyBISUdIX1JBRElVU19GQUNUT1IgOiBMT1dfUkFESVVTX0ZBQ1RPUjsKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogTWF0aC5tYXgoV0VCR0xfTUlOSU1VTV9URVhUVVJFX1NJWkUsIHdpZHRoIC8gZmFjdG9yKSwKICAgICAgICBoZWlnaHQ6IE1hdGgubWF4KFdFQkdMX01JTklNVU1fVEVYVFVSRV9TSVpFLCBoZWlnaHQgLyBmYWN0b3IpCiAgICAgIH07CiAgICB9CiAgICBzZXREYXRhKGltYWdlLCBtYXNrKSB7CiAgICAgIHRoaXMuaW5wdXRJbWFnZSA9IGltYWdlOwogICAgICB0aGlzLmlucHV0TWFzayA9IG1hc2s7CiAgICB9CiAgICByZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCkgewogICAgICBzdXBlci5yZXNpemVPdXRwdXQod2lkdGgsIGhlaWdodCk7CiAgICAgIGNvbnN0IGJsdXJTaXplID0gdGhpcy5nZXRCbHVyVGV4dHVyZVNpemUod2lkdGgsIGhlaWdodCk7CiAgICAgIHRoaXMuYmx1ci5yZXNpemVPdXRwdXQoYmx1clNpemUud2lkdGgsIGJsdXJTaXplLmhlaWdodCk7CiAgICB9CiAgfQoKICBjbGFzcyBXZWJnbEJsdXJCYWNrZ3JvdW5kUmVuZGVyZXIgZXh0ZW5kcyBXZWJnbFJlbmRlcmVyIHsKICAgIGNvbnN0cnVjdG9yKHJhZGl1cykgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLnBpcGVsaW5lID0gbmV3IEJhY2tncm91bmRCbHVyUGlwZWxpbmUodGhpcy5jb250ZXh0LCByYWRpdXMpOwogICAgICB0aGlzLmRpc2FibGVQb3N0UHJvY2Vzc2luZygpOwogICAgfQogIH0KCiAgY2xhc3MgRm9yZWdyb3VuZEJsdXJQaXBlbGluZSBleHRlbmRzIFdlYmdsVHJhbnNmb3JtZXJQaXBlbGluZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCByYWRpdXMpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsKICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAgICAgY29udGV4dCwKICAgICAgICBoZWlnaHQ6IGNvbnRleHQuY2FudmFzLmhlaWdodCwKICAgICAgICB3aWR0aDogY29udGV4dC5jYW52YXMud2lkdGgKICAgICAgfTsKICAgICAgY29uc3QgYmx1ciA9IG5ldyBCbHVyKHsKICAgICAgICAuLi5kZWZhdWx0T3B0aW9ucywKICAgICAgICByYWRpdXMsCiAgICAgICAgdHlwZTogQkxVUl9UWVBFLkdBVVNTSUFOCiAgICAgIH0pOwogICAgICBjb25zdCBtaXggPSBuZXcgTWl4KHsgLi4uZGVmYXVsdE9wdGlvbnMsIGRpc2FibGVGcmFtZWJ1ZmZlcjogdHJ1ZSB9KTsKICAgICAgdGhpcy5hZGRTdGVwKHsKICAgICAgICBwcm9ncmFtOiBibHVyLAogICAgICAgIGdldFVuaWZvcm1zOiAoKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0ZXh0dXJlOiB0ZXh0dXJlKGNvbnRleHQsIHRoaXMuaW5wdXRJbWFnZSkKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5hZGRTdGVwKHsKICAgICAgICBwcm9ncmFtOiBtaXgsCiAgICAgICAgZ2V0VW5pZm9ybXM6ICgpID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHRleHR1cmUoY29udGV4dCwgdGhpcy5pbnB1dEltYWdlKSwKICAgICAgICAgICAgZm9yZWdyb3VuZDogdGV4dHVyZShjb250ZXh0LCBibHVyLm91dHB1dCksCiAgICAgICAgICAgIHRocmVzaG9sZDogdGV4dHVyZShjb250ZXh0LCB0aGlzLmlucHV0TWFzaykKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIHNldERhdGEoaW1hZ2UsIG1hc2spIHsKICAgICAgdGhpcy5pbnB1dEltYWdlID0gaW1hZ2U7CiAgICAgIHRoaXMuaW5wdXRNYXNrID0gbWFzazsKICAgIH0KICB9CgogIGNsYXNzIFdlYmdsQmx1clNpbGhvdWV0dGVSZW5kZXJlciBleHRlbmRzIFdlYmdsUmVuZGVyZXIgewogICAgY29uc3RydWN0b3IocmFkaXVzKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMucGlwZWxpbmUgPSBuZXcgRm9yZWdyb3VuZEJsdXJQaXBlbGluZSh0aGlzLmNvbnRleHQsIHJhZGl1cyk7CiAgICAgIHRoaXMuZGlzYWJsZVBvc3RQcm9jZXNzaW5nKCk7CiAgICB9CiAgfQoKICBjbGFzcyBCYWNrZ3JvdW5kVmlkZW9QaXBlbGluZSBleHRlbmRzIEJhY2tncm91bmRJbWFnZVBpcGVsaW5lIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlciguLi5hcmd1bWVudHMpOwogICAgICB0aGlzLnByZWNpc2VNYXNrRW5hYmxlZCA9IHRydWU7CiAgICB9CiAgICBzZXQgcmVhZGVyKHJlYWRlcikgewogICAgICB0aGlzLmZyYW1lUmVhZGVyID0gcmVhZGVyOwogICAgfQogICAgYXN5bmMgcnVuKCkgewogICAgICBpZiAodGhpcy5mcmFtZVJlYWRlcikgewogICAgICAgIGF3YWl0IHRoaXMucmVhZE5leHRWaWRlb0ZyYW1lKCk7CiAgICAgICAgYXdhaXQgc3VwZXIucnVuKCk7CiAgICAgIH0KICAgIH0KICAgIGFzeW5jIHJlYWROZXh0VmlkZW9GcmFtZSgpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5mcmFtZVJlYWRlcj8ucmVhZCgpOwogICAgICBpZiAocmVzdWx0Py52YWx1ZSkgewogICAgICAgIHRoaXMuaW5wdXRCYWNrZ3JvdW5kSW1hZ2UgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChyZXN1bHQudmFsdWUpOwogICAgICAgIHJlc3VsdC52YWx1ZS5jbG9zZSgpOwogICAgICB9CiAgICB9CiAgfQoKICBjbGFzcyBXZWJnbFZpZGVvQmFja2dyb3VuZFJlbmRlcmVyIGV4dGVuZHMgV2ViZ2xSZW5kZXJlciB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5waXBlbGluZSA9IG5ldyBCYWNrZ3JvdW5kVmlkZW9QaXBlbGluZSh0aGlzLmNvbnRleHQpOwogICAgfQogICAgc2V0QmFja2dyb3VuZFZpZGVvKHZpZGVvKSB7CiAgICAgIHRoaXMucGlwZWxpbmUucmVhZGVyID0gdmlkZW87CiAgICB9CiAgfQoKICBjbGFzcyBXZWJnbFJlbmRlcmVyRmFjdG9yeSB7CiAgICBibHVyQmFja2dyb3VuZChyYWRpdXMpIHsKICAgICAgcmV0dXJuIG5ldyBXZWJnbEJsdXJCYWNrZ3JvdW5kUmVuZGVyZXIocmFkaXVzKTsKICAgIH0KICAgIGJsdXJTaWxob3VldHRlKHJhZGl1cykgewogICAgICByZXR1cm4gbmV3IFdlYmdsQmx1clNpbGhvdWV0dGVSZW5kZXJlcihyYWRpdXMpOwogICAgfQogICAgaW1hZ2VCYWNrZ3JvdW5kKCkgewogICAgICByZXR1cm4gbmV3IFdlYmdsSW1hZ2VCYWNrZ3JvdW5kUmVuZGVyZXIoKTsKICAgIH0KICAgIHZpZGVvQmFja2dyb3VuZCgpIHsKICAgICAgcmV0dXJuIG5ldyBXZWJnbFZpZGVvQmFja2dyb3VuZFJlbmRlcmVyKCk7CiAgICB9CiAgfQoKICBjbGFzcyBSZW5kZXJlckZhY3RvcnkgewogICAgY29uc3RydWN0b3IocmVuZGVyaW5nVHlwZSwgY29uZmlnKSB7CiAgICAgIHN3aXRjaCAocmVuZGVyaW5nVHlwZSkgewogICAgICAgIGNhc2UgUmVuZGVyaW5nVHlwZS5DQU5WQVM6CiAgICAgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgQ2FudmFzMmRSZW5kZXJlckZhY3RvcnkoY29uZmlnKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgUmVuZGVyaW5nVHlwZS5XRUJHTDoKICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBXZWJnbFJlbmRlcmVyRmFjdG9yeSgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGNvbnN0IGZlYXR1cmUgPSBnZXRQZXJmb3JtYW5jZVN1cHBvcnQoKTsKICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IGZlYXR1cmUuc3VwcG9ydGVkID8gbmV3IFdlYmdsUmVuZGVyZXJGYWN0b3J5KCkgOiBuZXcgQ2FudmFzMmRSZW5kZXJlckZhY3RvcnkoY29uZmlnKTsKICAgICAgfQogICAgfQogICAgYmx1ckJhY2tncm91bmQocmFkaXVzKSB7CiAgICAgIHJldHVybiB0aGlzLmdldEZhY3RvcnkoKS5ibHVyQmFja2dyb3VuZChyYWRpdXMpOwogICAgfQogICAgYmx1clNpbGhvdWV0dGUocmFkaXVzKSB7CiAgICAgIHJldHVybiB0aGlzLmdldEZhY3RvcnkoKS5ibHVyU2lsaG91ZXR0ZShyYWRpdXMpOwogICAgfQogICAgaW1hZ2VCYWNrZ3JvdW5kKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuaW1hZ2VCYWNrZ3JvdW5kKCk7CiAgICB9CiAgICB2aWRlb0JhY2tncm91bmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldEZhY3RvcnkoKS52aWRlb0JhY2tncm91bmQoKTsKICAgIH0KICAgIGdldEZhY3RvcnkoKSB7CiAgICAgIGlmICghdGhpcy5mYWN0b3J5KSB7CiAgICAgICAgdGhyb3cgIkZhY3RvcnkgaXMgbm90IGluaXRpYWxpemVkIjsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mYWN0b3J5OwogICAgfQogIH0KCiAgY2xhc3MgQmFja2dyb3VuZEZpbHRlciB7CiAgICBzZXRCYWNrZ3JvdW5kT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIGNvbnN0IGZhY3RvcnkgPSBuZXcgUmVuZGVyZXJGYWN0b3J5KG9wdGlvbnMucmVuZGVyaW5nT3B0aW9ucz8udHlwZSA/PyBSZW5kZXJpbmdUeXBlLldFQkdMLCBvcHRpb25zKTsKICAgICAgc3dpdGNoIChvcHRpb25zLnRyYW5zZm9ybWVyVHlwZSkgewogICAgICAgIGNhc2UgIkJhY2tncm91bmRCbHVyIjoKICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBmYWN0b3J5LmJsdXJCYWNrZ3JvdW5kKAogICAgICAgICAgICB0aGlzLmdldEJsdXJTaXplKG9wdGlvbnMucmFkaXVzKQogICAgICAgICAgKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlNpbGhvdWV0dGVCbHVyIjoKICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBmYWN0b3J5LmJsdXJTaWxob3VldHRlKAogICAgICAgICAgICB0aGlzLmdldEJsdXJTaXplKG9wdGlvbnMucmFkaXVzKQogICAgICAgICAgKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlZpZGVvQmFja2dyb3VuZCI6CiAgICAgICAgICBjb25zdCB2aWRlb1JlbmRlcmVyID0gZmFjdG9yeS52aWRlb0JhY2tncm91bmQoKTsKICAgICAgICAgIGlmICh0aGlzLmJhY2tncm91bmRWaWRlbykgewogICAgICAgICAgICB2aWRlb1JlbmRlcmVyLnNldEJhY2tncm91bmRWaWRlbyh0aGlzLmJhY2tncm91bmRWaWRlbyk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gdmlkZW9SZW5kZXJlcjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlZpcnR1YWxCYWNrZ3JvdW5kIjoKICAgICAgICAgIGNvbnN0IGltYWdlUmVuZGVyZXIgPSBmYWN0b3J5LmltYWdlQmFja2dyb3VuZCgpOwogICAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZEltYWdlKSB7CiAgICAgICAgICAgIGltYWdlUmVuZGVyZXIuc2V0QmFja2dyb3VuZEltYWdlKHRoaXMuYmFja2dyb3VuZEltYWdlKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBpbWFnZVJlbmRlcmVyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRocm93IGBVbmtub3duIHJlbmRlcmluZyB0eXBlIFske29wdGlvbnMudHJhbnNmb3JtZXJUeXBlfV1gOwogICAgICB9CiAgICAgIGlmIChvcHRpb25zLnJlbmRlcmluZ09wdGlvbnM/LnR5cGUgPT09IFJlbmRlcmluZ1R5cGUuV0VCR0wpIHsKICAgICAgICBpZiAob3B0aW9ucy5yZW5kZXJpbmdPcHRpb25zLnNlbGZpZVNlZ21lbnRhdGlvblR5cGUgPT09IFdlYmdsU2VsZmllU2VnbWVudGF0aW9uVHlwZS5QUkVDSVNFKSB7CiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmVuYWJsZVBvc3RQcm9jZXNzaW5nKCk7CiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlbmRlcmluZ09wdGlvbnMuc2VsZmllU2VnbWVudGF0aW9uVHlwZSA9PT0gV2ViZ2xTZWxmaWVTZWdtZW50YXRpb25UeXBlLkZBU1QpIHsKICAgICAgICAgIHRoaXMucmVuZGVyZXIuZGlzYWJsZVBvc3RQcm9jZXNzaW5nKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBzZXRGbGlja2VyaW5nT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHRoaXMucmVuZGVyZXI/LnNldEZsaWNrZXJpbmdPcHRpb25zKG9wdGlvbnMpOwogICAgfQogICAgc2V0VmlkZW9CR1JlYWRhYmxlKHZpZGVvKSB7CiAgICAgIHRoaXMuYmFja2dyb3VuZFZpZGVvID0gdmlkZW8uZ2V0UmVhZGVyKCk7CiAgICAgIGNvbnN0IHJlbmRlcmVyQXNBbnkgPSB0aGlzLnJlbmRlcmVyOwogICAgICBpZiAocmVuZGVyZXJBc0FueT8uc2V0QmFja2dyb3VuZFZpZGVvKSB7CiAgICAgICAgcmVuZGVyZXJBc0FueS5zZXRCYWNrZ3JvdW5kVmlkZW8odGhpcy5iYWNrZ3JvdW5kVmlkZW8pOwogICAgICB9CiAgICB9CiAgICBhc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShpbWFnZSkgewogICAgICBjb25zdCByZW5kZXJlckFzQW55ID0gdGhpcy5yZW5kZXJlcjsKICAgICAgaWYgKHJlbmRlcmVyQXNBbnk/LnNldEJhY2tncm91bmRJbWFnZSkgewogICAgICAgIHJlbmRlcmVyQXNBbnkuc2V0QmFja2dyb3VuZEltYWdlKGltYWdlKTsKICAgICAgfQogICAgICB0aGlzLmJhY2tncm91bmRJbWFnZSA9IGltYWdlOwogICAgfQogICAgYXN5bmMgcHJvY2Vzcyhmb3JlZ3JvdW5kLCBtYXNrKSB7CiAgICAgIGlmICh0aGlzLnJlbmRlcmVyKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIucmVuZGVyKGZvcmVncm91bmQsIG1hc2spOwogICAgICB9CiAgICB9CiAgICBhc3luYyByZXNpemVGb3JlZ3JvdW5kKHdpZHRoLCBoZWlnaHQpIHsKICAgIH0KICAgIGdldEJsdXJTaXplKHJhZGl1cyA9IEJsdXJSYWRpdXMuTG93KSB7CiAgICAgIHN3aXRjaCAocmFkaXVzKSB7CiAgICAgICAgY2FzZSBCbHVyUmFkaXVzLkxvdzoKICAgICAgICAgIHJldHVybiA1OwogICAgICAgIGNhc2UgQmx1clJhZGl1cy5IaWdoOgogICAgICAgICAgcmV0dXJuIDEyOwogICAgICB9CiAgICAgIHJldHVybiByYWRpdXM7CiAgICB9CiAgICBhc3luYyBwcm9maWxlKGR1cmF0aW9uKSB7CiAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyPy5wcm9maWxlV2ViZ2woZHVyYXRpb24pID8/IFtdOwogICAgfQogIH0KCiAgdmFyIGNyZWF0ZVZvbmFnZVRGTGl0ZVNpbWRNb2R1bGUgPSAoZnVuY3Rpb24oKSB7CiAgICB2YXIgX3NjcmlwdERpciA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY3VycmVudFNjcmlwdCA/IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjIDogdW5kZWZpbmVkOwogICAgCiAgICByZXR1cm4gKAogIGZ1bmN0aW9uKGNyZWF0ZVZvbmFnZVRGTGl0ZVNpbWRNb2R1bGUpIHsKICAgIGNyZWF0ZVZvbmFnZVRGTGl0ZVNpbWRNb2R1bGUgPSBjcmVhdGVWb25hZ2VURkxpdGVTaW1kTW9kdWxlIHx8IHt9OwoKICB2YXIgTW9kdWxlPXR5cGVvZiBjcmVhdGVWb25hZ2VURkxpdGVTaW1kTW9kdWxlIT09InVuZGVmaW5lZCI/Y3JlYXRlVm9uYWdlVEZMaXRlU2ltZE1vZHVsZTp7fTt2YXIgcmVhZHlQcm9taXNlUmVzb2x2ZSxyZWFkeVByb21pc2VSZWplY3Q7TW9kdWxlWyJyZWFkeSJdPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtyZWFkeVByb21pc2VSZXNvbHZlPXJlc29sdmU7cmVhZHlQcm9taXNlUmVqZWN0PXJlamVjdDt9KTt2YXIgbW9kdWxlT3ZlcnJpZGVzPXt9O3ZhciBrZXk7Zm9yKGtleSBpbiBNb2R1bGUpe2lmKE1vZHVsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKXttb2R1bGVPdmVycmlkZXNba2V5XT1Nb2R1bGVba2V5XTt9fXZhciB0aGlzUHJvZ3JhbT0iLi90aGlzLnByb2dyYW0iO3ZhciBxdWl0Xz1mdW5jdGlvbihzdGF0dXMsdG9UaHJvdyl7dGhyb3cgdG9UaHJvd307dmFyIEVOVklST05NRU5UX0lTX1dFQj10cnVlO3ZhciBzY3JpcHREaXJlY3Rvcnk9IiI7ZnVuY3Rpb24gbG9jYXRlRmlsZShwYXRoKXtpZihNb2R1bGVbImxvY2F0ZUZpbGUiXSl7cmV0dXJuIE1vZHVsZVsibG9jYXRlRmlsZSJdKHBhdGgsc2NyaXB0RGlyZWN0b3J5KX1yZXR1cm4gc2NyaXB0RGlyZWN0b3J5K3BhdGh9dmFyIHJlYWRCaW5hcnk7e2lmKHR5cGVvZiBkb2N1bWVudCE9PSJ1bmRlZmluZWQiJiZkb2N1bWVudC5jdXJyZW50U2NyaXB0KXtzY3JpcHREaXJlY3Rvcnk9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7fWlmKF9zY3JpcHREaXIpe3NjcmlwdERpcmVjdG9yeT1fc2NyaXB0RGlyO31pZihzY3JpcHREaXJlY3RvcnkuaW5kZXhPZigiYmxvYjoiKSE9PTApe3NjcmlwdERpcmVjdG9yeT1zY3JpcHREaXJlY3Rvcnkuc3Vic3RyKDAsc2NyaXB0RGlyZWN0b3J5LnJlcGxhY2UoL1s/I10uKi8sIiIpLmxhc3RJbmRleE9mKCIvIikrMSk7fWVsc2Uge3NjcmlwdERpcmVjdG9yeT0iIjt9fXZhciBvdXQ9TW9kdWxlWyJwcmludCJdfHxjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO3ZhciBlcnI9TW9kdWxlWyJwcmludEVyciJdfHxjb25zb2xlLndhcm4uYmluZChjb25zb2xlKTtmb3Ioa2V5IGluIG1vZHVsZU92ZXJyaWRlcyl7aWYobW9kdWxlT3ZlcnJpZGVzLmhhc093blByb3BlcnR5KGtleSkpe01vZHVsZVtrZXldPW1vZHVsZU92ZXJyaWRlc1trZXldO319bW9kdWxlT3ZlcnJpZGVzPW51bGw7aWYoTW9kdWxlWyJhcmd1bWVudHMiXSlNb2R1bGVbImFyZ3VtZW50cyJdO2lmKE1vZHVsZVsidGhpc1Byb2dyYW0iXSl0aGlzUHJvZ3JhbT1Nb2R1bGVbInRoaXNQcm9ncmFtIl07aWYoTW9kdWxlWyJxdWl0Il0pcXVpdF89TW9kdWxlWyJxdWl0Il07dmFyIHdhc21CaW5hcnk7aWYoTW9kdWxlWyJ3YXNtQmluYXJ5Il0pd2FzbUJpbmFyeT1Nb2R1bGVbIndhc21CaW5hcnkiXTt2YXIgbm9FeGl0UnVudGltZT1Nb2R1bGVbIm5vRXhpdFJ1bnRpbWUiXXx8dHJ1ZTtpZih0eXBlb2YgV2ViQXNzZW1ibHkhPT0ib2JqZWN0Iil7YWJvcnQoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt9dmFyIHdhc21NZW1vcnk7dmFyIEFCT1JUPWZhbHNlO3ZhciBVVEY4RGVjb2Rlcj10eXBlb2YgVGV4dERlY29kZXIhPT0idW5kZWZpbmVkIj9uZXcgVGV4dERlY29kZXIoInV0ZjgiKTp1bmRlZmluZWQ7ZnVuY3Rpb24gVVRGOEFycmF5VG9TdHJpbmcoaGVhcCxpZHgsbWF4Qnl0ZXNUb1JlYWQpe3ZhciBlbmRJZHg9aWR4K21heEJ5dGVzVG9SZWFkO3ZhciBlbmRQdHI9aWR4O3doaWxlKGhlYXBbZW5kUHRyXSYmIShlbmRQdHI+PWVuZElkeCkpKytlbmRQdHI7aWYoZW5kUHRyLWlkeD4xNiYmaGVhcC5zdWJhcnJheSYmVVRGOERlY29kZXIpe3JldHVybiBVVEY4RGVjb2Rlci5kZWNvZGUoaGVhcC5zdWJhcnJheShpZHgsZW5kUHRyKSl9ZWxzZSB7dmFyIHN0cj0iIjt3aGlsZShpZHg8ZW5kUHRyKXt2YXIgdTA9aGVhcFtpZHgrK107aWYoISh1MCYxMjgpKXtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUodTApO2NvbnRpbnVlfXZhciB1MT1oZWFwW2lkeCsrXSY2MztpZigodTAmMjI0KT09MTkyKXtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUoKHUwJjMxKTw8Nnx1MSk7Y29udGludWV9dmFyIHUyPWhlYXBbaWR4KytdJjYzO2lmKCh1MCYyNDApPT0yMjQpe3UwPSh1MCYxNSk8PDEyfHUxPDw2fHUyO31lbHNlIHt1MD0odTAmNyk8PDE4fHUxPDwxMnx1Mjw8NnxoZWFwW2lkeCsrXSY2Mzt9aWYodTA8NjU1MzYpe3N0cis9U3RyaW5nLmZyb21DaGFyQ29kZSh1MCk7fWVsc2Uge3ZhciBjaD11MC02NTUzNjtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8Y2g+PjEwLDU2MzIwfGNoJjEwMjMpO319fXJldHVybiBzdHJ9ZnVuY3Rpb24gVVRGOFRvU3RyaW5nKHB0cixtYXhCeXRlc1RvUmVhZCl7cmV0dXJuIHB0cj9VVEY4QXJyYXlUb1N0cmluZyhIRUFQVTgscHRyLG1heEJ5dGVzVG9SZWFkKToiIn1mdW5jdGlvbiB3cml0ZUFzY2lpVG9NZW1vcnkoc3RyLGJ1ZmZlcixkb250QWRkTnVsbCl7Zm9yKHZhciBpPTA7aTxzdHIubGVuZ3RoOysraSl7SEVBUDhbYnVmZmVyKys+PjBdPXN0ci5jaGFyQ29kZUF0KGkpO31IRUFQOFtidWZmZXI+PjBdPTA7fWZ1bmN0aW9uIGFsaWduVXAoeCxtdWx0aXBsZSl7aWYoeCVtdWx0aXBsZT4wKXt4Kz1tdWx0aXBsZS14JW11bHRpcGxlO31yZXR1cm4geH12YXIgYnVmZmVyLEhFQVA4LEhFQVBVOCxIRUFQMzI7ZnVuY3Rpb24gdXBkYXRlR2xvYmFsQnVmZmVyQW5kVmlld3MoYnVmKXtidWZmZXI9YnVmO01vZHVsZVsiSEVBUDgiXT1IRUFQOD1uZXcgSW50OEFycmF5KGJ1Zik7TW9kdWxlWyJIRUFQMTYiXT1uZXcgSW50MTZBcnJheShidWYpO01vZHVsZVsiSEVBUDMyIl09SEVBUDMyPW5ldyBJbnQzMkFycmF5KGJ1Zik7TW9kdWxlWyJIRUFQVTgiXT1IRUFQVTg9bmV3IFVpbnQ4QXJyYXkoYnVmKTtNb2R1bGVbIkhFQVBVMTYiXT1uZXcgVWludDE2QXJyYXkoYnVmKTtNb2R1bGVbIkhFQVBVMzIiXT1uZXcgVWludDMyQXJyYXkoYnVmKTtNb2R1bGVbIkhFQVBGMzIiXT1uZXcgRmxvYXQzMkFycmF5KGJ1Zik7TW9kdWxlWyJIRUFQRjY0Il09bmV3IEZsb2F0NjRBcnJheShidWYpO31Nb2R1bGVbIklOSVRJQUxfTUVNT1JZIl18fDE2Nzc3MjE2O3ZhciB3YXNtVGFibGU7dmFyIF9fQVRQUkVSVU5fXz1bXTt2YXIgX19BVElOSVRfXz1bXTt2YXIgX19BVFBPU1RSVU5fXz1bXTt2YXIgcnVudGltZUtlZXBhbGl2ZUNvdW50ZXI9MDtmdW5jdGlvbiBrZWVwUnVudGltZUFsaXZlKCl7cmV0dXJuIG5vRXhpdFJ1bnRpbWV8fHJ1bnRpbWVLZWVwYWxpdmVDb3VudGVyPjB9ZnVuY3Rpb24gcHJlUnVuKCl7aWYoTW9kdWxlWyJwcmVSdW4iXSl7aWYodHlwZW9mIE1vZHVsZVsicHJlUnVuIl09PSJmdW5jdGlvbiIpTW9kdWxlWyJwcmVSdW4iXT1bTW9kdWxlWyJwcmVSdW4iXV07d2hpbGUoTW9kdWxlWyJwcmVSdW4iXS5sZW5ndGgpe2FkZE9uUHJlUnVuKE1vZHVsZVsicHJlUnVuIl0uc2hpZnQoKSk7fX1jYWxsUnVudGltZUNhbGxiYWNrcyhfX0FUUFJFUlVOX18pO31mdW5jdGlvbiBpbml0UnVudGltZSgpe2NhbGxSdW50aW1lQ2FsbGJhY2tzKF9fQVRJTklUX18pO31mdW5jdGlvbiBwb3N0UnVuKCl7aWYoTW9kdWxlWyJwb3N0UnVuIl0pe2lmKHR5cGVvZiBNb2R1bGVbInBvc3RSdW4iXT09ImZ1bmN0aW9uIilNb2R1bGVbInBvc3RSdW4iXT1bTW9kdWxlWyJwb3N0UnVuIl1dO3doaWxlKE1vZHVsZVsicG9zdFJ1biJdLmxlbmd0aCl7YWRkT25Qb3N0UnVuKE1vZHVsZVsicG9zdFJ1biJdLnNoaWZ0KCkpO319Y2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVFBPU1RSVU5fXyk7fWZ1bmN0aW9uIGFkZE9uUHJlUnVuKGNiKXtfX0FUUFJFUlVOX18udW5zaGlmdChjYik7fWZ1bmN0aW9uIGFkZE9uSW5pdChjYil7X19BVElOSVRfXy51bnNoaWZ0KGNiKTt9ZnVuY3Rpb24gYWRkT25Qb3N0UnVuKGNiKXtfX0FUUE9TVFJVTl9fLnVuc2hpZnQoY2IpO312YXIgcnVuRGVwZW5kZW5jaWVzPTA7dmFyIGRlcGVuZGVuY2llc0Z1bGZpbGxlZD1udWxsO2Z1bmN0aW9uIGFkZFJ1bkRlcGVuZGVuY3koaWQpe3J1bkRlcGVuZGVuY2llcysrO2lmKE1vZHVsZVsibW9uaXRvclJ1bkRlcGVuZGVuY2llcyJdKXtNb2R1bGVbIm1vbml0b3JSdW5EZXBlbmRlbmNpZXMiXShydW5EZXBlbmRlbmNpZXMpO319ZnVuY3Rpb24gcmVtb3ZlUnVuRGVwZW5kZW5jeShpZCl7cnVuRGVwZW5kZW5jaWVzLS07aWYoTW9kdWxlWyJtb25pdG9yUnVuRGVwZW5kZW5jaWVzIl0pe01vZHVsZVsibW9uaXRvclJ1bkRlcGVuZGVuY2llcyJdKHJ1bkRlcGVuZGVuY2llcyk7fWlmKHJ1bkRlcGVuZGVuY2llcz09MCl7aWYoZGVwZW5kZW5jaWVzRnVsZmlsbGVkKXt2YXIgY2FsbGJhY2s9ZGVwZW5kZW5jaWVzRnVsZmlsbGVkO2RlcGVuZGVuY2llc0Z1bGZpbGxlZD1udWxsO2NhbGxiYWNrKCk7fX19TW9kdWxlWyJwcmVsb2FkZWRJbWFnZXMiXT17fTtNb2R1bGVbInByZWxvYWRlZEF1ZGlvcyJdPXt9O2Z1bmN0aW9uIGFib3J0KHdoYXQpe3tpZihNb2R1bGVbIm9uQWJvcnQiXSl7TW9kdWxlWyJvbkFib3J0Il0od2hhdCk7fX13aGF0PSJBYm9ydGVkKCIrd2hhdCsiKSI7ZXJyKHdoYXQpO0FCT1JUPXRydWU7d2hhdCs9Ii4gQnVpbGQgd2l0aCAtcyBBU1NFUlRJT05TPTEgZm9yIG1vcmUgaW5mby4iO3ZhciBlPW5ldyBXZWJBc3NlbWJseS5SdW50aW1lRXJyb3Iod2hhdCk7cmVhZHlQcm9taXNlUmVqZWN0KGUpO3Rocm93IGV9dmFyIGRhdGFVUklQcmVmaXg9ImRhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwiO2Z1bmN0aW9uIGlzRGF0YVVSSShmaWxlbmFtZSl7cmV0dXJuIGZpbGVuYW1lLnN0YXJ0c1dpdGgoZGF0YVVSSVByZWZpeCl9dmFyIHdhc21CaW5hcnlGaWxlO3dhc21CaW5hcnlGaWxlPSJ0ZmxpdGUtc2ltZC53YXNtIjtpZighaXNEYXRhVVJJKHdhc21CaW5hcnlGaWxlKSl7d2FzbUJpbmFyeUZpbGU9bG9jYXRlRmlsZSh3YXNtQmluYXJ5RmlsZSk7fWZ1bmN0aW9uIGdldEJpbmFyeShmaWxlKXt0cnl7aWYoZmlsZT09d2FzbUJpbmFyeUZpbGUmJndhc21CaW5hcnkpe3JldHVybiBuZXcgVWludDhBcnJheSh3YXNtQmluYXJ5KX1pZihyZWFkQmluYXJ5KTtlbHNlIHt0aHJvdyAiYm90aCBhc3luYyBhbmQgc3luYyBmZXRjaGluZyBvZiB0aGUgd2FzbSBmYWlsZWQifX1jYXRjaChlcnIpe2Fib3J0KGVycik7fX1mdW5jdGlvbiBnZXRCaW5hcnlQcm9taXNlKCl7aWYoIXdhc21CaW5hcnkmJihFTlZJUk9OTUVOVF9JU19XRUIpKXtpZih0eXBlb2YgZmV0Y2g9PT0iZnVuY3Rpb24iKXtyZXR1cm4gZmV0Y2god2FzbUJpbmFyeUZpbGUse2NyZWRlbnRpYWxzOiJzYW1lLW9yaWdpbiJ9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtpZighcmVzcG9uc2VbIm9rIl0pe3Rocm93ICJmYWlsZWQgdG8gbG9hZCB3YXNtIGJpbmFyeSBmaWxlIGF0ICciK3dhc21CaW5hcnlGaWxlKyInIn1yZXR1cm4gcmVzcG9uc2VbImFycmF5QnVmZmVyIl0oKX0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGdldEJpbmFyeSh3YXNtQmluYXJ5RmlsZSl9KX19cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZ2V0QmluYXJ5KHdhc21CaW5hcnlGaWxlKX0pfWZ1bmN0aW9uIGNyZWF0ZVdhc20oKXt2YXIgaW5mbz17ImEiOmFzbUxpYnJhcnlBcmd9O2Z1bmN0aW9uIHJlY2VpdmVJbnN0YW5jZShpbnN0YW5jZSxtb2R1bGUpe3ZhciBleHBvcnRzPWluc3RhbmNlLmV4cG9ydHM7TW9kdWxlWyJhc20iXT1leHBvcnRzO3dhc21NZW1vcnk9TW9kdWxlWyJhc20iXVsicSJdO3VwZGF0ZUdsb2JhbEJ1ZmZlckFuZFZpZXdzKHdhc21NZW1vcnkuYnVmZmVyKTt3YXNtVGFibGU9TW9kdWxlWyJhc20iXVsiRSJdO2FkZE9uSW5pdChNb2R1bGVbImFzbSJdWyJyIl0pO3JlbW92ZVJ1bkRlcGVuZGVuY3koKTt9YWRkUnVuRGVwZW5kZW5jeSgpO2Z1bmN0aW9uIHJlY2VpdmVJbnN0YW50aWF0aW9uUmVzdWx0KHJlc3VsdCl7cmVjZWl2ZUluc3RhbmNlKHJlc3VsdFsiaW5zdGFuY2UiXSk7fWZ1bmN0aW9uIGluc3RhbnRpYXRlQXJyYXlCdWZmZXIocmVjZWl2ZXIpe3JldHVybiBnZXRCaW5hcnlQcm9taXNlKCkudGhlbihmdW5jdGlvbihiaW5hcnkpe3JldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShiaW5hcnksaW5mbyl9KS50aGVuKGZ1bmN0aW9uKGluc3RhbmNlKXtyZXR1cm4gaW5zdGFuY2V9KS50aGVuKHJlY2VpdmVyLGZ1bmN0aW9uKHJlYXNvbil7ZXJyKCJmYWlsZWQgdG8gYXN5bmNocm9ub3VzbHkgcHJlcGFyZSB3YXNtOiAiK3JlYXNvbik7YWJvcnQocmVhc29uKTt9KX1mdW5jdGlvbiBpbnN0YW50aWF0ZUFzeW5jKCl7aWYoIXdhc21CaW5hcnkmJnR5cGVvZiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZz09PSJmdW5jdGlvbiImJiFpc0RhdGFVUkkod2FzbUJpbmFyeUZpbGUpJiZ0eXBlb2YgZmV0Y2g9PT0iZnVuY3Rpb24iKXtyZXR1cm4gZmV0Y2god2FzbUJpbmFyeUZpbGUse2NyZWRlbnRpYWxzOiJzYW1lLW9yaWdpbiJ9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXt2YXIgcmVzdWx0PVdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKHJlc3BvbnNlLGluZm8pO3JldHVybiByZXN1bHQudGhlbihyZWNlaXZlSW5zdGFudGlhdGlvblJlc3VsdCxmdW5jdGlvbihyZWFzb24pe2Vycigid2FzbSBzdHJlYW1pbmcgY29tcGlsZSBmYWlsZWQ6ICIrcmVhc29uKTtlcnIoImZhbGxpbmcgYmFjayB0byBBcnJheUJ1ZmZlciBpbnN0YW50aWF0aW9uIik7cmV0dXJuIGluc3RhbnRpYXRlQXJyYXlCdWZmZXIocmVjZWl2ZUluc3RhbnRpYXRpb25SZXN1bHQpfSl9KX1lbHNlIHtyZXR1cm4gaW5zdGFudGlhdGVBcnJheUJ1ZmZlcihyZWNlaXZlSW5zdGFudGlhdGlvblJlc3VsdCl9fWlmKE1vZHVsZVsiaW5zdGFudGlhdGVXYXNtIl0pe3RyeXt2YXIgZXhwb3J0cz1Nb2R1bGVbImluc3RhbnRpYXRlV2FzbSJdKGluZm8scmVjZWl2ZUluc3RhbmNlKTtyZXR1cm4gZXhwb3J0c31jYXRjaChlKXtlcnIoIk1vZHVsZS5pbnN0YW50aWF0ZVdhc20gY2FsbGJhY2sgZmFpbGVkIHdpdGggZXJyb3I6ICIrZSk7cmV0dXJuIGZhbHNlfX1pbnN0YW50aWF0ZUFzeW5jKCkuY2F0Y2gocmVhZHlQcm9taXNlUmVqZWN0KTtyZXR1cm4ge319ZnVuY3Rpb24gY2FsbFJ1bnRpbWVDYWxsYmFja3MoY2FsbGJhY2tzKXt3aGlsZShjYWxsYmFja3MubGVuZ3RoPjApe3ZhciBjYWxsYmFjaz1jYWxsYmFja3Muc2hpZnQoKTtpZih0eXBlb2YgY2FsbGJhY2s9PSJmdW5jdGlvbiIpe2NhbGxiYWNrKE1vZHVsZSk7Y29udGludWV9dmFyIGZ1bmM9Y2FsbGJhY2suZnVuYztpZih0eXBlb2YgZnVuYz09PSJudW1iZXIiKXtpZihjYWxsYmFjay5hcmc9PT11bmRlZmluZWQpe3dhc21UYWJsZS5nZXQoZnVuYykoKTt9ZWxzZSB7d2FzbVRhYmxlLmdldChmdW5jKShjYWxsYmFjay5hcmcpO319ZWxzZSB7ZnVuYyhjYWxsYmFjay5hcmc9PT11bmRlZmluZWQ/bnVsbDpjYWxsYmFjay5hcmcpO319fWZ1bmN0aW9uIF9fX2Fzc2VydF9mYWlsKGNvbmRpdGlvbixmaWxlbmFtZSxsaW5lLGZ1bmMpe2Fib3J0KCJBc3NlcnRpb24gZmFpbGVkOiAiK1VURjhUb1N0cmluZyhjb25kaXRpb24pKyIsIGF0OiAiK1tmaWxlbmFtZT9VVEY4VG9TdHJpbmcoZmlsZW5hbWUpOiJ1bmtub3duIGZpbGVuYW1lIixsaW5lLGZ1bmM/VVRGOFRvU3RyaW5nKGZ1bmMpOiJ1bmtub3duIGZ1bmN0aW9uIl0pO31mdW5jdGlvbiBfX2Rsb3Blbl9qcyhmaWxlbmFtZSxmbGFnKXthYm9ydCgiVG8gdXNlIGRsb3BlbiwgeW91IG5lZWQgdG8gdXNlIEVtc2NyaXB0ZW4ncyBsaW5raW5nIHN1cHBvcnQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZW1zY3JpcHRlbi1jb3JlL2Vtc2NyaXB0ZW4vd2lraS9MaW5raW5nIik7fWZ1bmN0aW9uIF9fZGxzeW1fanMoaGFuZGxlLHN5bWJvbCl7YWJvcnQoIlRvIHVzZSBkbG9wZW4sIHlvdSBuZWVkIHRvIHVzZSBFbXNjcmlwdGVuJ3MgbGlua2luZyBzdXBwb3J0LCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2Vtc2NyaXB0ZW4tY29yZS9lbXNjcmlwdGVuL3dpa2kvTGlua2luZyIpO31mdW5jdGlvbiBfYWJvcnQoKXthYm9ydCgiIik7fXZhciBfZW1zY3JpcHRlbl9nZXRfbm93O19lbXNjcmlwdGVuX2dldF9ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gcGVyZm9ybWFuY2Uubm93KCl9O3ZhciBfZW1zY3JpcHRlbl9nZXRfbm93X2lzX21vbm90b25pYz10cnVlO2Z1bmN0aW9uIHNldEVyck5vKHZhbHVlKXtIRUFQMzJbX19fZXJybm9fbG9jYXRpb24oKT4+Ml09dmFsdWU7cmV0dXJuIHZhbHVlfWZ1bmN0aW9uIF9jbG9ja19nZXR0aW1lKGNsa19pZCx0cCl7dmFyIG5vdztpZihjbGtfaWQ9PT0wKXtub3c9RGF0ZS5ub3coKTt9ZWxzZSBpZigoY2xrX2lkPT09MXx8Y2xrX2lkPT09NCkmJl9lbXNjcmlwdGVuX2dldF9ub3dfaXNfbW9ub3RvbmljKXtub3c9X2Vtc2NyaXB0ZW5fZ2V0X25vdygpO31lbHNlIHtzZXRFcnJObygyOCk7cmV0dXJuIC0xfUhFQVAzMlt0cD4+Ml09bm93LzFlM3wwO0hFQVAzMlt0cCs0Pj4yXT1ub3clMWUzKjFlMyoxZTN8MDtyZXR1cm4gMH1mdW5jdGlvbiBfZW1zY3JpcHRlbl9nZXRfaGVhcF9tYXgoKXtyZXR1cm4gMjE0NzQ4MzY0OH1mdW5jdGlvbiBfZW1zY3JpcHRlbl9tZW1jcHlfYmlnKGRlc3Qsc3JjLG51bSl7SEVBUFU4LmNvcHlXaXRoaW4oZGVzdCxzcmMsc3JjK251bSk7fWZ1bmN0aW9uIGVtc2NyaXB0ZW5fcmVhbGxvY19idWZmZXIoc2l6ZSl7dHJ5e3dhc21NZW1vcnkuZ3JvdyhzaXplLWJ1ZmZlci5ieXRlTGVuZ3RoKzY1NTM1Pj4+MTYpO3VwZGF0ZUdsb2JhbEJ1ZmZlckFuZFZpZXdzKHdhc21NZW1vcnkuYnVmZmVyKTtyZXR1cm4gMX1jYXRjaChlKXt9fWZ1bmN0aW9uIF9lbXNjcmlwdGVuX3Jlc2l6ZV9oZWFwKHJlcXVlc3RlZFNpemUpe3ZhciBvbGRTaXplPUhFQVBVOC5sZW5ndGg7cmVxdWVzdGVkU2l6ZT1yZXF1ZXN0ZWRTaXplPj4+MDt2YXIgbWF4SGVhcFNpemU9MjE0NzQ4MzY0ODtpZihyZXF1ZXN0ZWRTaXplPm1heEhlYXBTaXplKXtyZXR1cm4gZmFsc2V9Zm9yKHZhciBjdXREb3duPTE7Y3V0RG93bjw9NDtjdXREb3duKj0yKXt2YXIgb3Zlckdyb3duSGVhcFNpemU9b2xkU2l6ZSooMSsuMi9jdXREb3duKTtvdmVyR3Jvd25IZWFwU2l6ZT1NYXRoLm1pbihvdmVyR3Jvd25IZWFwU2l6ZSxyZXF1ZXN0ZWRTaXplKzEwMDY2MzI5Nik7dmFyIG5ld1NpemU9TWF0aC5taW4obWF4SGVhcFNpemUsYWxpZ25VcChNYXRoLm1heChyZXF1ZXN0ZWRTaXplLG92ZXJHcm93bkhlYXBTaXplKSw2NTUzNikpO3ZhciByZXBsYWNlbWVudD1lbXNjcmlwdGVuX3JlYWxsb2NfYnVmZmVyKG5ld1NpemUpO2lmKHJlcGxhY2VtZW50KXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIF9lbXNjcmlwdGVuX3RocmVhZF9zbGVlcChtc2Vjcyl7dmFyIHN0YXJ0PV9lbXNjcmlwdGVuX2dldF9ub3coKTt3aGlsZShfZW1zY3JpcHRlbl9nZXRfbm93KCktc3RhcnQ8bXNlY3Mpe319dmFyIEVOVj17fTtmdW5jdGlvbiBnZXRFeGVjdXRhYmxlTmFtZSgpe3JldHVybiB0aGlzUHJvZ3JhbXx8Ii4vdGhpcy5wcm9ncmFtIn1mdW5jdGlvbiBnZXRFbnZTdHJpbmdzKCl7aWYoIWdldEVudlN0cmluZ3Muc3RyaW5ncyl7dmFyIGxhbmc9KHR5cGVvZiBuYXZpZ2F0b3I9PT0ib2JqZWN0IiYmbmF2aWdhdG9yLmxhbmd1YWdlcyYmbmF2aWdhdG9yLmxhbmd1YWdlc1swXXx8IkMiKS5yZXBsYWNlKCItIiwiXyIpKyIuVVRGLTgiO3ZhciBlbnY9eyJVU0VSIjoid2ViX3VzZXIiLCJMT0dOQU1FIjoid2ViX3VzZXIiLCJQQVRIIjoiLyIsIlBXRCI6Ii8iLCJIT01FIjoiL2hvbWUvd2ViX3VzZXIiLCJMQU5HIjpsYW5nLCJfIjpnZXRFeGVjdXRhYmxlTmFtZSgpfTtmb3IodmFyIHggaW4gRU5WKXtpZihFTlZbeF09PT11bmRlZmluZWQpZGVsZXRlIGVudlt4XTtlbHNlIGVudlt4XT1FTlZbeF07fXZhciBzdHJpbmdzPVtdO2Zvcih2YXIgeCBpbiBlbnYpe3N0cmluZ3MucHVzaCh4KyI9IitlbnZbeF0pO31nZXRFbnZTdHJpbmdzLnN0cmluZ3M9c3RyaW5nczt9cmV0dXJuIGdldEVudlN0cmluZ3Muc3RyaW5nc312YXIgU1lTQ0FMTFM9e21hcHBpbmdzOnt9LGJ1ZmZlcnM6W251bGwsW10sW11dLHByaW50Q2hhcjpmdW5jdGlvbihzdHJlYW0sY3Vycil7dmFyIGJ1ZmZlcj1TWVNDQUxMUy5idWZmZXJzW3N0cmVhbV07aWYoY3Vycj09PTB8fGN1cnI9PT0xMCl7KHN0cmVhbT09PTE/b3V0OmVycikoVVRGOEFycmF5VG9TdHJpbmcoYnVmZmVyLDApKTtidWZmZXIubGVuZ3RoPTA7fWVsc2Uge2J1ZmZlci5wdXNoKGN1cnIpO319LHZhcmFyZ3M6dW5kZWZpbmVkLGdldDpmdW5jdGlvbigpe1NZU0NBTExTLnZhcmFyZ3MrPTQ7dmFyIHJldD1IRUFQMzJbU1lTQ0FMTFMudmFyYXJncy00Pj4yXTtyZXR1cm4gcmV0fSxnZXRTdHI6ZnVuY3Rpb24ocHRyKXt2YXIgcmV0PVVURjhUb1N0cmluZyhwdHIpO3JldHVybiByZXR9LGdldDY0OmZ1bmN0aW9uKGxvdyxoaWdoKXtyZXR1cm4gbG93fX07ZnVuY3Rpb24gX2Vudmlyb25fZ2V0KF9fZW52aXJvbixlbnZpcm9uX2J1Zil7dmFyIGJ1ZlNpemU9MDtnZXRFbnZTdHJpbmdzKCkuZm9yRWFjaChmdW5jdGlvbihzdHJpbmcsaSl7dmFyIHB0cj1lbnZpcm9uX2J1ZitidWZTaXplO0hFQVAzMltfX2Vudmlyb24raSo0Pj4yXT1wdHI7d3JpdGVBc2NpaVRvTWVtb3J5KHN0cmluZyxwdHIpO2J1ZlNpemUrPXN0cmluZy5sZW5ndGgrMTt9KTtyZXR1cm4gMH1mdW5jdGlvbiBfZW52aXJvbl9zaXplc19nZXQocGVudmlyb25fY291bnQscGVudmlyb25fYnVmX3NpemUpe3ZhciBzdHJpbmdzPWdldEVudlN0cmluZ3MoKTtIRUFQMzJbcGVudmlyb25fY291bnQ+PjJdPXN0cmluZ3MubGVuZ3RoO3ZhciBidWZTaXplPTA7c3RyaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKHN0cmluZyl7YnVmU2l6ZSs9c3RyaW5nLmxlbmd0aCsxO30pO0hFQVAzMltwZW52aXJvbl9idWZfc2l6ZT4+Ml09YnVmU2l6ZTtyZXR1cm4gMH1mdW5jdGlvbiBfZXhpdChzdGF0dXMpe2V4aXQoc3RhdHVzKTt9ZnVuY3Rpb24gX2ZkX2Nsb3NlKGZkKXtyZXR1cm4gMH1mdW5jdGlvbiBfZmRfc2VlayhmZCxvZmZzZXRfbG93LG9mZnNldF9oaWdoLHdoZW5jZSxuZXdPZmZzZXQpe31mdW5jdGlvbiBfZmRfd3JpdGUoZmQsaW92LGlvdmNudCxwbnVtKXt2YXIgbnVtPTA7Zm9yKHZhciBpPTA7aTxpb3ZjbnQ7aSsrKXt2YXIgcHRyPUhFQVAzMltpb3YraSo4Pj4yXTt2YXIgbGVuPUhFQVAzMltpb3YrKGkqOCs0KT4+Ml07Zm9yKHZhciBqPTA7ajxsZW47aisrKXtTWVNDQUxMUy5wcmludENoYXIoZmQsSEVBUFU4W3B0citqXSk7fW51bSs9bGVuO31IRUFQMzJbcG51bT4+Ml09bnVtO3JldHVybiAwfWZ1bmN0aW9uIGdldFJhbmRvbURldmljZSgpe2lmKHR5cGVvZiBjcnlwdG89PT0ib2JqZWN0IiYmdHlwZW9mIGNyeXB0b1siZ2V0UmFuZG9tVmFsdWVzIl09PT0iZnVuY3Rpb24iKXt2YXIgcmFuZG9tQnVmZmVyPW5ldyBVaW50OEFycmF5KDEpO3JldHVybiBmdW5jdGlvbigpe2NyeXB0by5nZXRSYW5kb21WYWx1ZXMocmFuZG9tQnVmZmVyKTtyZXR1cm4gcmFuZG9tQnVmZmVyWzBdfX1lbHNlIHJldHVybiBmdW5jdGlvbigpe2Fib3J0KCJyYW5kb21EZXZpY2UiKTt9fWZ1bmN0aW9uIF9nZXRlbnRyb3B5KGJ1ZmZlcixzaXplKXtpZighX2dldGVudHJvcHkucmFuZG9tRGV2aWNlKXtfZ2V0ZW50cm9weS5yYW5kb21EZXZpY2U9Z2V0UmFuZG9tRGV2aWNlKCk7fWZvcih2YXIgaT0wO2k8c2l6ZTtpKyspe0hFQVA4W2J1ZmZlcitpPj4wXT1fZ2V0ZW50cm9weS5yYW5kb21EZXZpY2UoKTt9cmV0dXJuIDB9dmFyIGFzbUxpYnJhcnlBcmc9eyJhIjpfX19hc3NlcnRfZmFpbCwiZSI6X19kbG9wZW5fanMsImQiOl9fZGxzeW1fanMsImIiOl9hYm9ydCwibiI6X2Nsb2NrX2dldHRpbWUsImgiOl9lbXNjcmlwdGVuX2dldF9oZWFwX21heCwibCI6X2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZywibSI6X2Vtc2NyaXB0ZW5fcmVzaXplX2hlYXAsInAiOl9lbXNjcmlwdGVuX3RocmVhZF9zbGVlcCwiZiI6X2Vudmlyb25fZ2V0LCJnIjpfZW52aXJvbl9zaXplc19nZXQsImoiOl9leGl0LCJpIjpfZmRfY2xvc2UsImsiOl9mZF9zZWVrLCJjIjpfZmRfd3JpdGUsIm8iOl9nZXRlbnRyb3B5fTtjcmVhdGVXYXNtKCk7TW9kdWxlWyJfX193YXNtX2NhbGxfY3RvcnMiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfX193YXNtX2NhbGxfY3RvcnMiXT1Nb2R1bGVbImFzbSJdWyJyIl0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07TW9kdWxlWyJfZ2V0TW9kZWxCdWZmZXJNZW1vcnlPZmZzZXQiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfZ2V0TW9kZWxCdWZmZXJNZW1vcnlPZmZzZXQiXT1Nb2R1bGVbImFzbSJdWyJzIl0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07TW9kdWxlWyJfZ2V0SW5wdXRNZW1vcnlPZmZzZXQiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfZ2V0SW5wdXRNZW1vcnlPZmZzZXQiXT1Nb2R1bGVbImFzbSJdWyJ0Il0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07TW9kdWxlWyJfZ2V0SW5wdXRIZWlnaHQiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfZ2V0SW5wdXRIZWlnaHQiXT1Nb2R1bGVbImFzbSJdWyJ1Il0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07TW9kdWxlWyJfZ2V0SW5wdXRXaWR0aCJdPWZ1bmN0aW9uKCl7cmV0dXJuIChNb2R1bGVbIl9nZXRJbnB1dFdpZHRoIl09TW9kdWxlWyJhc20iXVsidiJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O01vZHVsZVsiX2dldElucHV0Q2hhbm5lbENvdW50Il09ZnVuY3Rpb24oKXtyZXR1cm4gKE1vZHVsZVsiX2dldElucHV0Q2hhbm5lbENvdW50Il09TW9kdWxlWyJhc20iXVsidyJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O01vZHVsZVsiX2dldE91dHB1dE1lbW9yeU9mZnNldCJdPWZ1bmN0aW9uKCl7cmV0dXJuIChNb2R1bGVbIl9nZXRPdXRwdXRNZW1vcnlPZmZzZXQiXT1Nb2R1bGVbImFzbSJdWyJ4Il0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07TW9kdWxlWyJfZ2V0T3V0cHV0SGVpZ2h0Il09ZnVuY3Rpb24oKXtyZXR1cm4gKE1vZHVsZVsiX2dldE91dHB1dEhlaWdodCJdPU1vZHVsZVsiYXNtIl1bInkiXSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtNb2R1bGVbIl9nZXRPdXRwdXRXaWR0aCJdPWZ1bmN0aW9uKCl7cmV0dXJuIChNb2R1bGVbIl9nZXRPdXRwdXRXaWR0aCJdPU1vZHVsZVsiYXNtIl1bInoiXSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtNb2R1bGVbIl9nZXRPdXRwdXRDaGFubmVsQ291bnQiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfZ2V0T3V0cHV0Q2hhbm5lbENvdW50Il09TW9kdWxlWyJhc20iXVsiQSJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O01vZHVsZVsiX2xvYWRNb2RlbCJdPWZ1bmN0aW9uKCl7cmV0dXJuIChNb2R1bGVbIl9sb2FkTW9kZWwiXT1Nb2R1bGVbImFzbSJdWyJCIl0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07TW9kdWxlWyJfcnVuSW5mZXJlbmNlIl09ZnVuY3Rpb24oKXtyZXR1cm4gKE1vZHVsZVsiX3J1bkluZmVyZW5jZSJdPU1vZHVsZVsiYXNtIl1bIkMiXSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtNb2R1bGVbIl9pc0dQVUVuYWJsZWQiXT1mdW5jdGlvbigpe3JldHVybiAoTW9kdWxlWyJfaXNHUFVFbmFibGVkIl09TW9kdWxlWyJhc20iXVsiRCJdKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3ZhciBfX19lcnJub19sb2NhdGlvbj1Nb2R1bGVbIl9fX2Vycm5vX2xvY2F0aW9uIl09ZnVuY3Rpb24oKXtyZXR1cm4gKF9fX2Vycm5vX2xvY2F0aW9uPU1vZHVsZVsiX19fZXJybm9fbG9jYXRpb24iXT1Nb2R1bGVbImFzbSJdWyJGIl0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX07dmFyIGNhbGxlZFJ1bjtmdW5jdGlvbiBFeGl0U3RhdHVzKHN0YXR1cyl7dGhpcy5uYW1lPSJFeGl0U3RhdHVzIjt0aGlzLm1lc3NhZ2U9IlByb2dyYW0gdGVybWluYXRlZCB3aXRoIGV4aXQoIitzdGF0dXMrIikiO3RoaXMuc3RhdHVzPXN0YXR1czt9ZGVwZW5kZW5jaWVzRnVsZmlsbGVkPWZ1bmN0aW9uIHJ1bkNhbGxlcigpe2lmKCFjYWxsZWRSdW4pcnVuKCk7aWYoIWNhbGxlZFJ1bilkZXBlbmRlbmNpZXNGdWxmaWxsZWQ9cnVuQ2FsbGVyO307ZnVuY3Rpb24gcnVuKGFyZ3Mpe2lmKHJ1bkRlcGVuZGVuY2llcz4wKXtyZXR1cm59cHJlUnVuKCk7aWYocnVuRGVwZW5kZW5jaWVzPjApe3JldHVybn1mdW5jdGlvbiBkb1J1bigpe2lmKGNhbGxlZFJ1bilyZXR1cm47Y2FsbGVkUnVuPXRydWU7TW9kdWxlWyJjYWxsZWRSdW4iXT10cnVlO2lmKEFCT1JUKXJldHVybjtpbml0UnVudGltZSgpO3JlYWR5UHJvbWlzZVJlc29sdmUoTW9kdWxlKTtpZihNb2R1bGVbIm9uUnVudGltZUluaXRpYWxpemVkIl0pTW9kdWxlWyJvblJ1bnRpbWVJbml0aWFsaXplZCJdKCk7cG9zdFJ1bigpO31pZihNb2R1bGVbInNldFN0YXR1cyJdKXtNb2R1bGVbInNldFN0YXR1cyJdKCJSdW5uaW5nLi4uIik7c2V0VGltZW91dChmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtNb2R1bGVbInNldFN0YXR1cyJdKCIiKTt9LDEpO2RvUnVuKCk7fSwxKTt9ZWxzZSB7ZG9SdW4oKTt9fU1vZHVsZVsicnVuIl09cnVuO2Z1bmN0aW9uIGV4aXQoc3RhdHVzLGltcGxpY2l0KXtwcm9jRXhpdChzdGF0dXMpO31mdW5jdGlvbiBwcm9jRXhpdChjb2RlKXtpZigha2VlcFJ1bnRpbWVBbGl2ZSgpKXtpZihNb2R1bGVbIm9uRXhpdCJdKU1vZHVsZVsib25FeGl0Il0oY29kZSk7QUJPUlQ9dHJ1ZTt9cXVpdF8oY29kZSxuZXcgRXhpdFN0YXR1cyhjb2RlKSk7fWlmKE1vZHVsZVsicHJlSW5pdCJdKXtpZih0eXBlb2YgTW9kdWxlWyJwcmVJbml0Il09PSJmdW5jdGlvbiIpTW9kdWxlWyJwcmVJbml0Il09W01vZHVsZVsicHJlSW5pdCJdXTt3aGlsZShNb2R1bGVbInByZUluaXQiXS5sZW5ndGg+MCl7TW9kdWxlWyJwcmVJbml0Il0ucG9wKCkoKTt9fXJ1bigpOwoKCiAgICByZXR1cm4gY3JlYXRlVm9uYWdlVEZMaXRlU2ltZE1vZHVsZS5yZWFkeQogIH0KICApOwogIH0pKCk7CgogIGNsYXNzIFZvbmFnZVRGTGl0ZUluZm8gewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuaXNTSU1EU3VwcG9ydGVkID0gZmFsc2U7CiAgICAgIHRoaXMuaXNUaHJlYWRzU3VwcG9ydGVkID0gZmFsc2U7CiAgICAgIHRoaXMuaW5wdXRXaWR0aCA9IDA7CiAgICAgIHRoaXMuaW5wdXRIZWlnaHQgPSAwOwogICAgICB0aGlzLmlucHV0Q2hhbm5lbENvdW50ID0gMDsKICAgICAgdGhpcy5pbnB1dE1lbW9yeU9mZnNldCA9IDA7CiAgICAgIHRoaXMub3V0cHV0V2lkdGggPSAwOwogICAgICB0aGlzLm91dHB1dEhlaWdodCA9IDA7CiAgICAgIHRoaXMub3V0cHV0Q2hhbm5lbENvdW50ID0gMDsKICAgICAgdGhpcy5vdXRwdXRNZW1vcnlPZmZzZXQgPSAwOwogICAgfQogIH0KICBjb25zdCBkZWZhdWx0V2FzbUFzc2V0VXJpID0gImh0dHBzOi8vZDNvcHFqbXF6eGYwNTcuY2xvdWRmcm9udC5uZXQvdm9uYWdlLXRlbnNvcmZsb3ctd2FzbS90ZmxpdGUtc2ltZC13YXNtLzEuMS4zLyI7CiAgY29uc3QgZGVmYXVsdFRmbGl0ZUFzc2V0VXJpUGF0aCA9ICJodHRwczovL2Qzb3Bxam1xenhmMDU3LmNsb3VkZnJvbnQubmV0L21sL3NlbGZpZV9zZWdtZW50YXRpb24vNC4wLjAvIjsKICBhc3luYyBmdW5jdGlvbiBsb2FkU2VsZmllU2VnbWVudGF0aW9uKHdhc21VcmkgPSBkZWZhdWx0V2FzbUFzc2V0VXJpLCB0ZmxpdGVVcmkgPSBkZWZhdWx0VGZsaXRlQXNzZXRVcmlQYXRoKSB7CiAgICBsZXQgdGZsaXRlSW5mbyA9IG5ldyBWb25hZ2VURkxpdGVJbmZvKCk7CiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICBhc3luYyBmdW5jdGlvbiBsb2FkVEZMaXRlKCkgewogICAgICAgIGNvbnN0IGhlbHBlciA9IHsKICAgICAgICAgIGxvY2F0ZUZpbGU6IGZ1bmN0aW9uKHBhdGgpIHsKICAgICAgICAgICAgcmV0dXJuIHdhc21VcmkgKyBwYXRoOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIGNyZWF0ZVZvbmFnZVRGTGl0ZVNpbWRNb2R1bGUoaGVscGVyKTsKICAgICAgfQogICAgICBhc3luYyBmdW5jdGlvbiBsb2FkVEZMaXRlTW9kZWwodGZsaXRlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlMiwgcmVqZWN0MikgPT4gewogICAgICAgICAgY29uc3QgbmV3U2VsZWN0ZWRURkxpdGUgPSB0ZmxpdGU7CiAgICAgICAgICBpZiAodHlwZW9mIG5ld1NlbGVjdGVkVEZMaXRlID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICByZXR1cm4gcmVqZWN0MihgVEZMaXRlIGJhY2tlbmQgdW5hdmFpbGFibGU6IHdhc21TaW1kYCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBtb2RlbEZpbGVOYW1lID0gInNlbGZpZV9zZWdtZW50YXRpb25fbGFuZHNjYXBlIjsKICAgICAgICAgIGNvbnNvbGUubG9nKCJMb2FkaW5nIHRmbGl0ZSBtb2RlbDoiLCBtb2RlbEZpbGVOYW1lKTsKICAgICAgICAgIGxldCBtb2RlbFVybCA9IHRmbGl0ZVVyaSArIGAke21vZGVsRmlsZU5hbWV9LnRmbGl0ZWA7CiAgICAgICAgICBjb25zb2xlLmxvZygiVEZMaXRlIG1vZGVsVXJsOiAiICsgbW9kZWxVcmwpOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgbW9kZWxSZXNwb25zZSA9IGF3YWl0IGZldGNoKG1vZGVsVXJsKTsKICAgICAgICAgICAgY29uc3QgbW9kZWwgPSBhd2FpdCBtb2RlbFJlc3BvbnNlLmFycmF5QnVmZmVyKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNb2RlbCBidWZmZXIgc2l6ZToiLCBtb2RlbC5ieXRlTGVuZ3RoKTsKICAgICAgICAgICAgY29uc3QgbW9kZWxCdWZmZXJPZmZzZXQgPSBuZXdTZWxlY3RlZFRGTGl0ZS5fZ2V0TW9kZWxCdWZmZXJNZW1vcnlPZmZzZXQoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICAgIk1vZGVsIGJ1ZmZlciBtZW1vcnkgb2Zmc2V0OiIsCiAgICAgICAgICAgICAgbW9kZWxCdWZmZXJPZmZzZXQKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY29uc29sZS5sb2coIkxvYWRpbmcgbW9kZWwgYnVmZmVyLi4uIik7CiAgICAgICAgICAgIG5ld1NlbGVjdGVkVEZMaXRlLkhFQVBVOC5zZXQoCiAgICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkobW9kZWwpLAogICAgICAgICAgICAgIG1vZGVsQnVmZmVyT2Zmc2V0CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGNvbnN0IGxvYWRNb2RlbFJlc3VsdCA9IG5ld1NlbGVjdGVkVEZMaXRlLl9sb2FkTW9kZWwoCiAgICAgICAgICAgICAgbW9kZWwuYnl0ZUxlbmd0aAogICAgICAgICAgICApOwogICAgICAgICAgICBjb25zb2xlLmxvZygiTG9hZCBtb2RlbCByZXN1bHQ6IiwgbG9hZE1vZGVsUmVzdWx0KTsKICAgICAgICAgICAgaWYgKGxvYWRNb2RlbFJlc3VsdCAhPT0gMCkgewogICAgICAgICAgICAgIHJlamVjdDIoIkNhbm5vdCBsb2FkIG1vZGVsIik7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRmbGl0ZUluZm8uaW5wdXRXaWR0aCA9IG5ld1NlbGVjdGVkVEZMaXRlLl9nZXRJbnB1dFdpZHRoKCk7CiAgICAgICAgICAgIHRmbGl0ZUluZm8uaW5wdXRIZWlnaHQgPSBuZXdTZWxlY3RlZFRGTGl0ZS5fZ2V0SW5wdXRIZWlnaHQoKTsKICAgICAgICAgICAgdGZsaXRlSW5mby5pbnB1dENoYW5uZWxDb3VudCA9IG5ld1NlbGVjdGVkVEZMaXRlLl9nZXRJbnB1dENoYW5uZWxDb3VudCgpOwogICAgICAgICAgICB0ZmxpdGVJbmZvLmlucHV0TWVtb3J5T2Zmc2V0ID0gbmV3U2VsZWN0ZWRURkxpdGUuX2dldElucHV0TWVtb3J5T2Zmc2V0KCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICJJbnB1dCBtZW1vcnkgb2Zmc2V0OiIsCiAgICAgICAgICAgICAgdGZsaXRlSW5mby5pbnB1dE1lbW9yeU9mZnNldAogICAgICAgICAgICApOwogICAgICAgICAgICBjb25zb2xlLmxvZygiSW5wdXQgaGVpZ2h0OiIsIHRmbGl0ZUluZm8uaW5wdXRIZWlnaHQpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiSW5wdXQgd2lkdGg6IiwgdGZsaXRlSW5mby5pbnB1dFdpZHRoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICAgIklucHV0IGNoYW5uZWxzOiIsCiAgICAgICAgICAgICAgdGZsaXRlSW5mby5pbnB1dENoYW5uZWxDb3VudAogICAgICAgICAgICApOwogICAgICAgICAgICB0ZmxpdGVJbmZvLm91dHB1dE1lbW9yeU9mZnNldCA9IG5ld1NlbGVjdGVkVEZMaXRlLl9nZXRPdXRwdXRNZW1vcnlPZmZzZXQoKTsKICAgICAgICAgICAgdGZsaXRlSW5mby5vdXRwdXRXaWR0aCA9IG5ld1NlbGVjdGVkVEZMaXRlLl9nZXRPdXRwdXRXaWR0aCgpOwogICAgICAgICAgICB0ZmxpdGVJbmZvLm91dHB1dEhlaWdodCA9IG5ld1NlbGVjdGVkVEZMaXRlLl9nZXRPdXRwdXRIZWlnaHQoKTsKICAgICAgICAgICAgdGZsaXRlSW5mby5vdXRwdXRDaGFubmVsQ291bnQgPSBuZXdTZWxlY3RlZFRGTGl0ZS5fZ2V0T3V0cHV0Q2hhbm5lbENvdW50KCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICJPdXRwdXQgbWVtb3J5IG9mZnNldDoiLAogICAgICAgICAgICAgIHRmbGl0ZUluZm8ub3V0cHV0TWVtb3J5T2Zmc2V0CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJPdXRwdXQgaGVpZ2h0OiIsIHRmbGl0ZUluZm8ub3V0cHV0SGVpZ2h0KTsKICAgICAgICAgICAgY29uc29sZS5sb2coIk91dHB1dCB3aWR0aDoiLCB0ZmxpdGVJbmZvLm91dHB1dFdpZHRoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICAgIk91dHB1dCBjaGFubmVsczoiLAogICAgICAgICAgICAgIHRmbGl0ZUluZm8ub3V0cHV0Q2hhbm5lbENvdW50CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRmbGl0ZUluZm8uc2VsZWN0ZWRURkxpdGUgPSBuZXdTZWxlY3RlZFRGTGl0ZTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIHJlamVjdDIoZXJyb3IpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICByZXNvbHZlMigpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGxvYWRURkxpdGUoKS50aGVuKCh0ZmxpdGUpID0+IHsKICAgICAgICBpZiAodGZsaXRlID09PSBudWxsKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJsb2FkVEZMaXRlIG51bGwiKTsKICAgICAgICAgIHRocm93ICJsb2FkVEZMaXRlIG51bGwiOwogICAgICAgIH0KICAgICAgICBsb2FkVEZMaXRlTW9kZWwodGZsaXRlKS50aGVuKChyZXNvbHZlZCkgPT4gewogICAgICAgICAgcmVzb2x2ZSh0ZmxpdGVJbmZvKTsKICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJsb2FkVEZMaXRlTW9kZWwgZXJyb3IiKTsKICAgICAgICAgIHJlamVjdCgibG9hZFRGTGl0ZU1vZGVsIGVycm9yIik7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKChlKSA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcigibG9hZFRGTGl0ZSBlcnJvcjoiLCBlKTsKICAgICAgICByZWplY3QoImxvYWRURkxpdGUgZXJyb3I6IiArIGUpOwogICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJuIHByb21pc2U7CiAgfQoKICB2YXIgdD0idW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp7fTtmdW5jdGlvbiBlKGUsbil7dDp7Zm9yKHZhciByPVsiQ0xPU1VSRV9GTEFHUyJdLGk9dCxzPTA7czxyLmxlbmd0aDtzKyspaWYobnVsbD09KGk9aVtyW3NdXSkpe3I9bnVsbDticmVhayB0fXI9aTt9cmV0dXJuIG51bGwhPShlPXImJnJbZV0pP2U6bn1mdW5jdGlvbiBuKCl7dGhyb3cgRXJyb3IoIkludmFsaWQgVVRGOCIpfWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4gZT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsZSksbnVsbD09dD9lOnQrZX1sZXQgaSxzO2NvbnN0IG89InVuZGVmaW5lZCIhPXR5cGVvZiBUZXh0RGVjb2RlcjtsZXQgYTtjb25zdCBoPSJ1bmRlZmluZWQiIT10eXBlb2YgVGV4dEVuY29kZXI7ZnVuY3Rpb24gYyh0KXtpZihoKXQ9KGF8fD1uZXcgVGV4dEVuY29kZXIpLmVuY29kZSh0KTtlbHNlIHtsZXQgbj0wO2NvbnN0IHI9bmV3IFVpbnQ4QXJyYXkoMyp0Lmxlbmd0aCk7Zm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBlPXQuY2hhckNvZGVBdChpKTtpZihlPDEyOClyW24rK109ZTtlbHNlIHtpZihlPDIwNDgpcltuKytdPWU+PjZ8MTkyO2Vsc2Uge2lmKGU+PTU1Mjk2JiZlPD01NzM0Myl7aWYoZTw9NTYzMTkmJmk8dC5sZW5ndGgpe2NvbnN0IHM9dC5jaGFyQ29kZUF0KCsraSk7aWYocz49NTYzMjAmJnM8PTU3MzQzKXtlPTEwMjQqKGUtNTUyOTYpK3MtNTYzMjArNjU1MzYscltuKytdPWU+PjE4fDI0MCxyW24rK109ZT4+MTImNjN8MTI4LHJbbisrXT1lPj42JjYzfDEyOCxyW24rK109NjMmZXwxMjg7Y29udGludWV9aS0tO31lPTY1NTMzO31yW24rK109ZT4+MTJ8MjI0LHJbbisrXT1lPj42JjYzfDEyODt9cltuKytdPTYzJmV8MTI4O319dD1uPT09ci5sZW5ndGg/cjpyLnN1YmFycmF5KDAsbik7fXJldHVybiB0fXZhciB1LGw9ZSg2MTA0MDEzMDEsITEpLGY9ZSg2NDUxNzIzNDMsZSgxLCEwKSksZD1lKDY2MDAxNDA5NCwhMSk7Y29uc3QgcD10Lm5hdmlnYXRvcjtmdW5jdGlvbiBnKHQpe3JldHVybiAhIWwmJighIXUmJnUuYnJhbmRzLnNvbWUoKCh7YnJhbmQ6ZX0pPT5lJiYtMSE9ZS5pbmRleE9mKHQpKSkpfWZ1bmN0aW9uIG0oZSl7dmFyIG47cmV0dXJuIChuPXQubmF2aWdhdG9yKSYmKG49bi51c2VyQWdlbnQpfHwobj0iIiksLTEhPW4uaW5kZXhPZihlKX1mdW5jdGlvbiB5KCl7cmV0dXJuICEhbCYmKCEhdSYmdS5icmFuZHMubGVuZ3RoPjApfWZ1bmN0aW9uIF8oKXtyZXR1cm4geSgpP2coIkNocm9taXVtIik6KG0oIkNocm9tZSIpfHxtKCJDcmlPUyIpKSYmISgheSgpJiZtKCJFZGdlIikpfHxtKCJTaWxrIil9ZnVuY3Rpb24gdih0KXtyZXR1cm4gdlsiICJdKHQpLHR9dT1wJiZwLnVzZXJBZ2VudERhdGF8fG51bGwsdlsiICJdPWZ1bmN0aW9uKCl7fTt2YXIgRT0heSgpJiYobSgiVHJpZGVudCIpfHxtKCJNU0lFIikpOyFtKCJBbmRyb2lkIil8fF8oKSxfKCksbSgiU2FmYXJpIikmJihfKCl8fCF5KCkmJm0oIkNvYXN0Iil8fCF5KCkmJm0oIk9wZXJhIil8fCF5KCkmJm0oIkVkZ2UiKXx8KHkoKT9nKCJNaWNyb3NvZnQgRWRnZSIpOm0oIkVkZy8iKSl8fHkoKSYmZygiT3BlcmEiKSk7dmFyIHc9e30sVD1udWxsO2Z1bmN0aW9uIEEodCl7dmFyIGU9dC5sZW5ndGgsbj0zKmUvNDtuJTM/bj1NYXRoLmZsb29yKG4pOi0xIT0iPS4iLmluZGV4T2YodFtlLTFdKSYmKG49LTEhPSI9LiIuaW5kZXhPZih0W2UtMl0pP24tMjpuLTEpO3ZhciByPW5ldyBVaW50OEFycmF5KG4pLGk9MDtyZXR1cm4gZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKGUpe2Zvcig7cjx0Lmxlbmd0aDspe3ZhciBuPXQuY2hhckF0KHIrKyksaT1UW25dO2lmKG51bGwhPWkpcmV0dXJuIGk7aWYoIS9eW1xzXHhhMF0qJC8udGVzdChuKSl0aHJvdyBFcnJvcigiVW5rbm93biBiYXNlNjQgZW5jb2RpbmcgYXQgY2hhcjogIituKX1yZXR1cm4gZX1iKCk7Zm9yKHZhciByPTA7Oyl7dmFyIGk9bigtMSkscz1uKDApLG89big2NCksYT1uKDY0KTtpZig2ND09PWEmJi0xPT09aSlicmVhaztlKGk8PDJ8cz4+NCksNjQhPW8mJihlKHM8PDQmMjQwfG8+PjIpLDY0IT1hJiZlKG88PDYmMTkyfGEpKTt9fSh0LChmdW5jdGlvbih0KXtyW2krK109dDt9KSksaSE9PW4/ci5zdWJhcnJheSgwLGkpOnJ9ZnVuY3Rpb24gYigpe2lmKCFUKXtUPXt9O2Zvcih2YXIgdD0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkiLnNwbGl0KCIiKSxlPVsiKy89IiwiKy8iLCItXz0iLCItXy4iLCItXyJdLG49MDtuPDU7bisrKXt2YXIgcj10LmNvbmNhdChlW25dLnNwbGl0KCIiKSk7d1tuXT1yO2Zvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgcz1yW2ldO3ZvaWQgMD09PVRbc10mJihUW3NdPWkpO319fX12YXIgaz0idW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4QXJyYXksUz0hRSYmImZ1bmN0aW9uIj09dHlwZW9mIGJ0b2E7ZnVuY3Rpb24geCh0KXtpZighUyl7dmFyIGU7dm9pZCAwPT09ZSYmKGU9MCksYigpLGU9d1tlXTt2YXIgbj1BcnJheShNYXRoLmZsb29yKHQubGVuZ3RoLzMpKSxyPWVbNjRdfHwiIjtsZXQgaD0wLGM9MDtmb3IoO2g8dC5sZW5ndGgtMjtoKz0zKXt2YXIgaT10W2hdLHM9dFtoKzFdLG89dFtoKzJdLGE9ZVtpPj4yXTtpPWVbKDMmaSk8PDR8cz4+NF0scz1lWygxNSZzKTw8MnxvPj42XSxvPWVbNjMmb10sbltjKytdPWEraStzK287fXN3aXRjaChhPTAsbz1yLHQubGVuZ3RoLWgpe2Nhc2UgMjpvPWVbKDE1JihhPXRbaCsxXSkpPDwyXXx8cjtjYXNlIDE6dD10W2hdLG5bY109ZVt0Pj4yXStlWygzJnQpPDw0fGE+PjRdK28rcjt9cmV0dXJuIG4uam9pbigiIil9Zm9yKGU9IiIsbj0wLHI9dC5sZW5ndGgtMTAyNDA7bjxyOyllKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdC5zdWJhcnJheShuLG4rPTEwMjQwKSk7cmV0dXJuIGUrPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuP3Quc3ViYXJyYXkobik6dCksYnRvYShlKX1jb25zdCBMPS9bLV8uXS9nLEY9eyItIjoiKyIsXzoiLyIsIi4iOiI9In07ZnVuY3Rpb24gUih0KXtyZXR1cm4gRlt0XXx8IiJ9ZnVuY3Rpb24gTSh0KXtpZighUylyZXR1cm4gQSh0KTtMLnRlc3QodCkmJih0PXQucmVwbGFjZShMLFIpKSx0PWF0b2IodCk7Y29uc3QgZT1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCk7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspZVtuXT10LmNoYXJDb2RlQXQobik7cmV0dXJuIGV9ZnVuY3Rpb24gSSh0KXtyZXR1cm4gayYmbnVsbCE9dCYmdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl9dmFyIFA9e307bGV0IE87ZnVuY3Rpb24gQyh0KXtpZih0IT09UCl0aHJvdyBFcnJvcigiaWxsZWdhbCBleHRlcm5hbCBjYWxsZXIiKX1mdW5jdGlvbiBVKCl7cmV0dXJuIE98fD1uZXcgRChudWxsLFApfWZ1bmN0aW9uIE4odCl7QyhQKTt2YXIgZT10Lmc7cmV0dXJuIG51bGw9PShlPW51bGw9PWV8fEkoZSk/ZToic3RyaW5nIj09dHlwZW9mIGU/TShlKTpudWxsKT9lOnQuZz1lfXZhciBEPWNsYXNze2NvbnN0cnVjdG9yKHQsZSl7aWYoQyhlKSx0aGlzLmc9dCxudWxsIT10JiYwPT09dC5sZW5ndGgpdGhyb3cgRXJyb3IoIkJ5dGVTdHJpbmcgc2hvdWxkIGJlIGNvbnN0cnVjdGVkIHdpdGggbm9uLWVtcHR5IHZhbHVlcyIpfWgoKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoTih0aGlzKXx8MCl9fTtmdW5jdGlvbiBCKHQsZSl7dC5fX2Nsb3N1cmVfX2Vycm9yX19jb250ZXh0X185ODQzODJ8fCh0Ll9fY2xvc3VyZV9fZXJyb3JfX2NvbnRleHRfXzk4NDM4Mj17fSksdC5fX2Nsb3N1cmVfX2Vycm9yX19jb250ZXh0X185ODQzODIuc2V2ZXJpdHk9ZTt9bGV0IEc7ZnVuY3Rpb24gaigpe2NvbnN0IGU9RXJyb3IoKTtCKGUsImluY2lkZW50IiksZnVuY3Rpb24oZSl7dC5zZXRUaW1lb3V0KCgoKT0+e3Rocm93IGV9KSwwKTt9KGUpO31mdW5jdGlvbiBWKHQpe3JldHVybiBCKHQ9RXJyb3IodCksIndhcm5pbmciKSx0fWZ1bmN0aW9uIFgoKXtyZXR1cm4gImZ1bmN0aW9uIj09dHlwZW9mIEJpZ0ludH1mdW5jdGlvbiBIKHQpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KX12YXIgVz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbCgpO2Z1bmN0aW9uIHoodCl7cmV0dXJuICJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sKCk/U3ltYm9sKCk6dH12YXIgSz16KCksWT16KCIwZGkiKSwkPXooIjJleCIpLHE9eigiMW9hIiksWj1XPyh0LGUpPT57dFtLXXw9ZTt9Oih0LGUpPT57dm9pZCAwIT09dC5nP3QuZ3w9ZTpPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LHtnOnt2YWx1ZTplLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCxlbnVtZXJhYmxlOiExfX0pO30sUT1XPyh0LGUpPT57dFtLXSY9fmU7fToodCxlKT0+e3ZvaWQgMCE9PXQuZyYmKHQuZyY9fmUpO30sdHQ9Vz90PT4wfHRbS106dD0+MHx0LmcsZXQ9Vz90PT50W0tdOnQ9PnQuZyxudD1XPyh0LGUpPT57dFtLXT1lO306KHQsZSk9Pnt2b2lkIDAhPT10Lmc/dC5nPWU6T2JqZWN0LmRlZmluZVByb3BlcnRpZXModCx7Zzp7dmFsdWU6ZSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsZW51bWVyYWJsZTohMX19KTt9O2Z1bmN0aW9uIHJ0KHQpe3JldHVybiBaKHQsMzQpLHR9ZnVuY3Rpb24gaXQodCxlKXtudChlLC0xNDU5MSYoMHx0KSk7fWZ1bmN0aW9uIHN0KHQsZSl7bnQoZSwtMTQ1NTcmKDM0fHQpKTt9dmFyIG90LGF0PXt9LGh0PXt9O2Z1bmN0aW9uIGN0KHQpe3JldHVybiAhKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fHQuSmEhPT1odCl9ZnVuY3Rpb24gdXQodCl7cmV0dXJuIG51bGwhPT10JiYib2JqZWN0Ij09dHlwZW9mIHQmJiFBcnJheS5pc0FycmF5KHQpJiZ0LmNvbnN0cnVjdG9yPT09T2JqZWN0fWZ1bmN0aW9uIGx0KHQsZSxuKXtpZihudWxsIT10KWlmKCJzdHJpbmciPT10eXBlb2YgdCl0PXQ/bmV3IEQodCxQKTpVKCk7ZWxzZSBpZih0LmNvbnN0cnVjdG9yIT09RClpZihJKHQpKXQ9dC5sZW5ndGg/bmV3IEQobj90Om5ldyBVaW50OEFycmF5KHQpLFApOlUoKTtlbHNlIHtpZighZSl0aHJvdyBFcnJvcigpO3Q9dm9pZCAwO31yZXR1cm4gdH1mdW5jdGlvbiBmdCh0KXtyZXR1cm4gISghQXJyYXkuaXNBcnJheSh0KXx8dC5sZW5ndGgpJiYhISgxJnR0KHQpKX1jb25zdCBkdD1bXTtmdW5jdGlvbiBwdCh0KXtpZigyJnQpdGhyb3cgRXJyb3IoKX1udChkdCw1NSksb3Q9T2JqZWN0LmZyZWV6ZShkdCk7Y2xhc3MgZ3R7Y29uc3RydWN0b3IodCxlLG4pe3RoaXMubD0wLHRoaXMuZz10LHRoaXMuaD1lLHRoaXMubT1uO31uZXh0KCl7aWYodGhpcy5sPHRoaXMuZy5sZW5ndGgpe2NvbnN0IHQ9dGhpcy5nW3RoaXMubCsrXTtyZXR1cm4ge2RvbmU6ITEsdmFsdWU6dGhpcy5oP3RoaXMuaC5jYWxsKHRoaXMubSx0KTp0fX1yZXR1cm4ge2RvbmU6ITAsdmFsdWU6dm9pZCAwfX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiBuZXcgZ3QodGhpcy5nLHRoaXMuaCx0aGlzLm0pfX1sZXQgbXQseXQ7ZnVuY3Rpb24gX3QodCxlKXsoZT1tdD9lW210XTp2b2lkIDApJiYodFttdF09SChlKSk7fXZhciB2dD1PYmplY3QuZnJlZXplKHt9KTt2YXIgRXQ9T2JqZWN0LmZyZWV6ZSh7fSk7Y29uc3Qgd3Q9ImZ1bmN0aW9uIj09dHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNsaWNlO2xldCBUdCxBdD0wLGJ0PTA7ZnVuY3Rpb24ga3QodCl7Y29uc3QgZT10Pj4+MDtBdD1lLGJ0PSh0LWUpLzQyOTQ5NjcyOTY+Pj4wO31mdW5jdGlvbiBTdCh0KXtpZih0PDApe2t0KC10KTtjb25zdFtlLG5dPVB0KEF0LGJ0KTtBdD1lPj4+MCxidD1uPj4+MDt9ZWxzZSBrdCh0KTt9ZnVuY3Rpb24geHQodCl7Y29uc3QgZT1UdHx8PW5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoOCkpO2Uuc2V0RmxvYXQzMigwLCt0LCEwKSxidD0wLEF0PWUuZ2V0VWludDMyKDAsITApO31mdW5jdGlvbiBMdCh0LGUpe3JldHVybiA0Mjk0OTY3Mjk2KmUrKHQ+Pj4wKX1mdW5jdGlvbiBGdCh0LGUpe2NvbnN0IG49MjE0NzQ4MzY0OCZlO3JldHVybiBuJiYoZT1+ZT4+PjAsMD09KHQ9MSt+dD4+PjApJiYoZT1lKzE+Pj4wKSksdD1MdCh0LGUpLG4/LXQ6dH1mdW5jdGlvbiBSdCh0LGUpe2lmKHQ+Pj49MCwoZT4+Pj0wKTw9MjA5NzE1MSl2YXIgbj0iIisoNDI5NDk2NzI5NiplK3QpO2Vsc2UgWCgpP249IiIrKEJpZ0ludChlKTw8QmlnSW50KDMyKXxCaWdJbnQodCkpOih0PSgxNjc3NzIxNSZ0KSs2Nzc3MjE2KihuPTE2Nzc3MjE1Jih0Pj4+MjR8ZTw8OCkpKzY3MTA2NTYqKGU9ZT4+MTYmNjU1MzUpLG4rPTgxNDc0OTcqZSxlKj0yLHQ+PTFlNyYmKG4rPXQvMWU3Pj4+MCx0JT0xZTcpLG4+PTFlNyYmKGUrPW4vMWU3Pj4+MCxuJT0xZTcpLG49ZStNdChuKStNdCh0KSk7cmV0dXJuIG59ZnVuY3Rpb24gTXQodCl7cmV0dXJuIHQ9U3RyaW5nKHQpLCIwMDAwMDAwIi5zbGljZSh0Lmxlbmd0aCkrdH1mdW5jdGlvbiBJdCh0KXtpZih0Lmxlbmd0aDwxNilTdChOdW1iZXIodCkpO2Vsc2UgaWYoWCgpKXQ9QmlnSW50KHQpLEF0PU51bWJlcih0JkJpZ0ludCg0Mjk0OTY3Mjk1KSk+Pj4wLGJ0PU51bWJlcih0Pj5CaWdJbnQoMzIpJkJpZ0ludCg0Mjk0OTY3Mjk1KSk7ZWxzZSB7Y29uc3QgZT0rKCItIj09PXRbMF0pO2J0PUF0PTA7Y29uc3Qgbj10Lmxlbmd0aDtmb3IobGV0IHI9ZSxpPShuLWUpJTYrZTtpPD1uO3I9aSxpKz02KXtjb25zdCBlPU51bWJlcih0LnNsaWNlKHIsaSkpO2J0Kj0xZTYsQXQ9MWU2KkF0K2UsQXQ+PTQyOTQ5NjcyOTYmJihidCs9TWF0aC50cnVuYyhBdC80Mjk0OTY3Mjk2KSxidD4+Pj0wLEF0Pj4+PTApO31pZihlKXtjb25zdFt0LGVdPVB0KEF0LGJ0KTtBdD10LGJ0PWU7fX19ZnVuY3Rpb24gUHQodCxlKXtyZXR1cm4gZT1+ZSx0P3Q9MSt+dDplKz0xLFt0LGVdfWZ1bmN0aW9uIE90KHQpe3JldHVybiB0LlFhPSEwLHR9dmFyIEN0PU90KCh0PT4ibnVtYmVyIj09dHlwZW9mIHQpKSxVdD1PdCgodD0+InN0cmluZyI9PXR5cGVvZiB0KSksTnQ9T3QoKHQ9PiJib29sZWFuIj09dHlwZW9mIHQpKSxEdD0iZnVuY3Rpb24iPT10eXBlb2YgdC5CaWdJbnQmJiJiaWdpbnQiPT10eXBlb2YgdC5CaWdJbnQoMCksQnQ9T3QoKHQ9PkR0P3Q+PWp0JiZ0PD1YdDoiLSI9PT10WzBdP0h0KHQsR3QpOkh0KHQsVnQpKSk7Y29uc3QgR3Q9TnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIudG9TdHJpbmcoKSxqdD1EdD9CaWdJbnQoTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpOnZvaWQgMCxWdD1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUi50b1N0cmluZygpLFh0PUR0P0JpZ0ludChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUik6dm9pZCAwO2Z1bmN0aW9uIEh0KHQsZSl7aWYodC5sZW5ndGg+ZS5sZW5ndGgpcmV0dXJuICExO2lmKHQubGVuZ3RoPGUubGVuZ3RofHx0PT09ZSlyZXR1cm4gITA7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IHI9dFtuXSxpPWVbbl07aWYocj5pKXJldHVybiAhMTtpZihyPGkpcmV0dXJuICEwfX1mdW5jdGlvbiBXdCh0KXtyZXR1cm4gbnVsbD09dHx8Im51bWJlciI9PXR5cGVvZiB0P3Q6Ik5hTiI9PT10fHwiSW5maW5pdHkiPT09dHx8Ii1JbmZpbml0eSI9PT10P051bWJlcih0KTp2b2lkIDB9ZnVuY3Rpb24genQodCl7cmV0dXJuIG51bGw9PXR8fCJib29sZWFuIj09dHlwZW9mIHQ/dDoibnVtYmVyIj09dHlwZW9mIHQ/ISF0OnZvaWQgMH1jb25zdCBLdD0vXi0/KFsxLTldWzAtOV0qfDApKFwuWzAtOV0rKT8kLztmdW5jdGlvbiBZdCh0KXtjb25zdCBlPXR5cGVvZiB0O3N3aXRjaChlKXtjYXNlImJpZ2ludCI6cmV0dXJuICEwO2Nhc2UibnVtYmVyIjpyZXR1cm4gTnVtYmVyLmlzRmluaXRlKHQpfXJldHVybiAic3RyaW5nIj09PWUmJkt0LnRlc3QodCl9ZnVuY3Rpb24gJHQodCl7aWYobnVsbD09dClyZXR1cm4gdDtpZigic3RyaW5nIj09dHlwZW9mIHQpe2lmKCF0KXJldHVybjt0PSt0O31yZXR1cm4gIm51bWJlciI9PXR5cGVvZiB0JiZOdW1iZXIuaXNGaW5pdGUodCk/MHx0OnZvaWQgMH1mdW5jdGlvbiBxdCh0KXtpZihudWxsPT10KXJldHVybiB0O2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoIXQpcmV0dXJuO3Q9K3Q7fXJldHVybiAibnVtYmVyIj09dHlwZW9mIHQmJk51bWJlci5pc0Zpbml0ZSh0KT90Pj4+MDp2b2lkIDB9ZnVuY3Rpb24gSnQodCl7cmV0dXJuICItIiE9PXRbMF0mJih0Lmxlbmd0aDwyMHx8MjA9PT10Lmxlbmd0aCYmTnVtYmVyKHQuc3Vic3RyaW5nKDAsNikpPDE4NDQ2Nyl9ZnVuY3Rpb24gWnQodCl7cmV0dXJuIHQ9TWF0aC50cnVuYyh0KSxOdW1iZXIuaXNTYWZlSW50ZWdlcih0KXx8KFN0KHQpLHQ9RnQoQXQsYnQpKSx0fWZ1bmN0aW9uIFF0KHQpe3ZhciBlPU1hdGgudHJ1bmMoTnVtYmVyKHQpKTtpZihOdW1iZXIuaXNTYWZlSW50ZWdlcihlKSlyZXR1cm4gU3RyaW5nKGUpO2lmKC0xIT09KGU9dC5pbmRleE9mKCIuIikpJiYodD10LnN1YnN0cmluZygwLGUpKSwhKCItIj09PXRbMF0/dC5sZW5ndGg8MjB8fDIwPT09dC5sZW5ndGgmJk51bWJlcih0LnN1YnN0cmluZygwLDcpKT4tOTIyMzM3OnQubGVuZ3RoPDE5fHwxOT09PXQubGVuZ3RoJiZOdW1iZXIodC5zdWJzdHJpbmcoMCw2KSk8OTIyMzM3KSlpZihJdCh0KSx0PUF0LDIxNDc0ODM2NDgmKGU9YnQpKWlmKFgoKSl0PSIiKyhCaWdJbnQoMHxlKTw8QmlnSW50KDMyKXxCaWdJbnQodD4+PjApKTtlbHNlIHtjb25zdFtuLHJdPVB0KHQsZSk7dD0iLSIrUnQobixyKTt9ZWxzZSB0PVJ0KHQsZSk7cmV0dXJuIHR9ZnVuY3Rpb24gdGUodCl7cmV0dXJuIG51bGw9PXQ/dDoiYmlnaW50Ij09dHlwZW9mIHQ/KEJ0KHQpP3Q9TnVtYmVyKHQpOih0PUJpZ0ludC5hc0ludE4oNjQsdCksdD1CdCh0KT9OdW1iZXIodCk6U3RyaW5nKHQpKSx0KTpZdCh0KT8ibnVtYmVyIj09dHlwZW9mIHQ/WnQodCk6UXQodCk6dm9pZCAwfWZ1bmN0aW9uIGVlKHQpe2lmKG51bGw9PXQpcmV0dXJuIHQ7dmFyIGU9dHlwZW9mIHQ7aWYoImJpZ2ludCI9PT1lKXJldHVybiBTdHJpbmcoQmlnSW50LmFzVWludE4oNjQsdCkpO2lmKFl0KHQpKXtpZigic3RyaW5nIj09PWUpcmV0dXJuIGU9TWF0aC50cnVuYyhOdW1iZXIodCkpLE51bWJlci5pc1NhZmVJbnRlZ2VyKGUpJiZlPj0wP3Q9U3RyaW5nKGUpOigtMSE9PShlPXQuaW5kZXhPZigiLiIpKSYmKHQ9dC5zdWJzdHJpbmcoMCxlKSksSnQodCl8fChJdCh0KSx0PVJ0KEF0LGJ0KSkpLHQ7aWYoIm51bWJlciI9PT1lKXJldHVybiAodD1NYXRoLnRydW5jKHQpKT49MCYmTnVtYmVyLmlzU2FmZUludGVnZXIodCk/dDpmdW5jdGlvbih0KXtpZih0PDApe1N0KHQpO2NvbnN0IGU9UnQoQXQsYnQpO3JldHVybiB0PU51bWJlcihlKSxOdW1iZXIuaXNTYWZlSW50ZWdlcih0KT90OmV9cmV0dXJuIEp0KFN0cmluZyh0KSk/dDooU3QodCksTHQoQXQsYnQpKX0odCl9fWZ1bmN0aW9uIG5lKHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdCl0aHJvdyBFcnJvcigpO3JldHVybiB0fWZ1bmN0aW9uIHJlKHQpe2lmKG51bGwhPXQmJiJzdHJpbmciIT10eXBlb2YgdCl0aHJvdyBFcnJvcigpO3JldHVybiB0fWZ1bmN0aW9uIGllKHQpe3JldHVybiBudWxsPT10fHwic3RyaW5nIj09dHlwZW9mIHQ/dDp2b2lkIDB9ZnVuY3Rpb24gc2UodCxlLG4scil7aWYobnVsbCE9dCYmIm9iamVjdCI9PXR5cGVvZiB0JiZ0Llk9PT1hdClyZXR1cm4gdDtpZighQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gbj8yJnI/KHQ9ZVtZXSk/ZT10OihydCgodD1uZXcgZSkudSksZT1lW1ldPXQpOmU9bmV3IGU6ZT12b2lkIDAsZTtsZXQgaT1uPXR0KHQpO3JldHVybiAwPT09aSYmKGl8PTMyJnIpLGl8PTImcixpIT09biYmbnQodCxpKSxuZXcgZSh0KX1mdW5jdGlvbiBvZSh0LGUsbil7aWYoZSl0OntpZighWXQoZT10KSl0aHJvdyBWKCJpbnQ2NCIpO3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJzdHJpbmciOmU9UXQoZSk7YnJlYWsgdDtjYXNlImJpZ2ludCI6aWYodD1lPUJpZ0ludC5hc0ludE4oNjQsZSksVXQodCkpe2lmKCEvXlxzKig/Oi0/WzEtOV1cZCp8MCk/XHMqJC8udGVzdCh0KSl0aHJvdyBFcnJvcihTdHJpbmcodCkpfWVsc2UgaWYoQ3QodCkmJiFOdW1iZXIuaXNTYWZlSW50ZWdlcih0KSl0aHJvdyBFcnJvcihTdHJpbmcodCkpO2U9RHQ/QmlnSW50KGUpOk50KGUpP2U/IjEiOiIwIjpVdChlKT9lLnRyaW0oKXx8IjAiOlN0cmluZyhlKTticmVhayB0O2RlZmF1bHQ6ZT1adChlKTt9fWVsc2UgZT10ZSh0KTtyZXR1cm4gInN0cmluZyI9PXR5cGVvZihuPW51bGw9PSh0PWUpP24/MDp2b2lkIDA6dCkmJihlPStuLE51bWJlci5pc1NhZmVJbnRlZ2VyKGUpKT9lOm59ZnVuY3Rpb24gYWUodCl7dmFyIGU9aGU/LmdldCh0KTtpZihlKXJldHVybiBlO2lmKE1hdGgucmFuZG9tKCk+LjAxKXJldHVybiB0O2lmKHZvaWQgMD09PXVlKWlmKCJmdW5jdGlvbiIhPXR5cGVvZiBQcm94eSl1ZT1udWxsO2Vsc2UgdHJ5e3VlPS0xIT09UHJveHkudG9TdHJpbmcoKS5pbmRleE9mKCJbbmF0aXZlIGNvZGVdIik/UHJveHk6bnVsbDt9Y2F0Y2h7dWU9bnVsbDt9cmV0dXJuIChlPXVlKT8oZnVuY3Rpb24odCxlKXsoaGV8fD1uZXcgV2Vha01hcCkuc2V0KHQsZSksKGNlfHw9bmV3IFdlYWtNYXApLnNldChlLHQpO30odCxlPW5ldyBlKHQse3NldDoodCxlLG4pPT4oaigpLHRbZV09biwhMCl9KSksZSk6dH1sZXQgaGUsY2UsdWUsbGUsZmUsZGU7ZnVuY3Rpb24gcGUodCl7c3dpdGNoKHR5cGVvZiB0KXtjYXNlImJvb2xlYW4iOnJldHVybiBmZXx8PVswLHZvaWQgMCwhMF07Y2FzZSJudW1iZXIiOnJldHVybiB0PjA/dm9pZCAwOjA9PT10P2RlfHw9WzAsdm9pZCAwXTpbLXQsdm9pZCAwXTtjYXNlInN0cmluZyI6cmV0dXJuIFswLHRdO2Nhc2Uib2JqZWN0IjpyZXR1cm4gdH19ZnVuY3Rpb24gZ2UodCxlKXtyZXR1cm4gbWUodCxlWzBdLGVbMV0pfWZ1bmN0aW9uIG1lKHQsZSxuKXtpZihudWxsPT10JiYodD1sZSksbGU9dm9pZCAwLG51bGw9PXQpe3ZhciByPTk2O24/KHQ9W25dLHJ8PTUxMik6dD1bXSxlJiYocj0tMTY3NjA4MzMmcnwoMTAyMyZlKTw8MTQpO31lbHNlIHtpZighQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBFcnJvcigibmFyciIpO2lmKDIwNDgmKHI9dHQodCkpKXRocm93IEVycm9yKCJmYXJyIik7aWYoNjQmcilyZXR1cm4gdDtpZihyfD02NCxuJiYocnw9NTEyLG4hPT10WzBdKSl0aHJvdyBFcnJvcigibWlkIik7dDp7Y29uc3QgaT0obj10KS5sZW5ndGg7aWYoaSl7Y29uc3QgdD1pLTE7aWYodXQoblt0XSkpe2lmKChlPXQtKCshISg1MTImKHJ8PTI1NikpLTEpKT49MTAyNCl0aHJvdyBFcnJvcigicHZ0bG10Iik7cj0tMTY3NjA4MzMmcnwoMTAyMyZlKTw8MTQ7YnJlYWsgdH19aWYoZSl7aWYoKGU9TWF0aC5tYXgoZSxpLSgrISEoNTEyJnIpLTEpKSk+MTAyNCl0aHJvdyBFcnJvcigic3B2dCIpO3I9LTE2NzYwODMzJnJ8KDEwMjMmZSk8PDE0O319fXJldHVybiBudCh0LHIpLHR9Y29uc3QgeWU9e307bGV0IF9lPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB2KG5ldyBjbGFzcyBleHRlbmRzIE1hcHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7fX0pLCExfWNhdGNoe3JldHVybiAhMH19KCk7Y2xhc3MgdmV7Y29uc3RydWN0b3IoKXt0aGlzLmc9bmV3IE1hcDt9Z2V0KHQpe3JldHVybiB0aGlzLmcuZ2V0KHQpfXNldCh0LGUpe3JldHVybiB0aGlzLmcuc2V0KHQsZSksdGhpcy5zaXplPXRoaXMuZy5zaXplLHRoaXN9ZGVsZXRlKHQpe3JldHVybiB0PXRoaXMuZy5kZWxldGUodCksdGhpcy5zaXplPXRoaXMuZy5zaXplLHR9Y2xlYXIoKXt0aGlzLmcuY2xlYXIoKSx0aGlzLnNpemU9dGhpcy5nLnNpemU7fWhhcyh0KXtyZXR1cm4gdGhpcy5nLmhhcyh0KX1lbnRyaWVzKCl7cmV0dXJuIHRoaXMuZy5lbnRyaWVzKCl9a2V5cygpe3JldHVybiB0aGlzLmcua2V5cygpfXZhbHVlcygpe3JldHVybiB0aGlzLmcudmFsdWVzKCl9Zm9yRWFjaCh0LGUpe3JldHVybiB0aGlzLmcuZm9yRWFjaCh0LGUpfVtTeW1ib2wuaXRlcmF0b3JdKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfX1jb25zdCBFZT1fZT8oT2JqZWN0LnNldFByb3RvdHlwZU9mKHZlLnByb3RvdHlwZSxNYXAucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh2ZS5wcm90b3R5cGUse3NpemU6e3ZhbHVlOjAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsd3JpdGFibGU6ITB9fSksdmUpOmNsYXNzIGV4dGVuZHMgTWFwe2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt9fTtmdW5jdGlvbiB3ZSh0KXtyZXR1cm4gdH1mdW5jdGlvbiBUZSh0KXtpZigyJnQuTCl0aHJvdyBFcnJvcigiQ2Fubm90IG11dGF0ZSBhbiBpbW11dGFibGUgTWFwIil9dmFyIEFlPWNsYXNzIGV4dGVuZHMgRWV7Y29uc3RydWN0b3IodCxlLG49d2Uscj13ZSl7c3VwZXIoKTtsZXQgaT10dCh0KTtpfD02NCxudCh0LGkpLHRoaXMuTD1pLHRoaXMuVj1lLHRoaXMuUz1uLHRoaXMuYWE9dGhpcy5WP2JlOnI7Zm9yKGxldCBzPTA7czx0Lmxlbmd0aDtzKyspe2NvbnN0IG89dFtzXSxhPW4ob1swXSwhMSwhMCk7bGV0IGg9b1sxXTtlP3ZvaWQgMD09PWgmJihoPW51bGwpOmg9cihvWzFdLCExLCEwLHZvaWQgMCx2b2lkIDAsaSksc3VwZXIuc2V0KGEsaCk7fX1vYSh0PWtlKXtpZigwIT09dGhpcy5zaXplKXJldHVybiB0aGlzLloodCl9Wih0PWtlKXtjb25zdCBlPVtdLG49c3VwZXIuZW50cmllcygpO2Zvcih2YXIgcjshKHI9bi5uZXh0KCkpLmRvbmU7KShyPXIudmFsdWUpWzBdPXQoclswXSksclsxXT10KHJbMV0pLGUucHVzaChyKTtyZXR1cm4gZX1jbGVhcigpe1RlKHRoaXMpLHN1cGVyLmNsZWFyKCk7fWRlbGV0ZSh0KXtyZXR1cm4gVGUodGhpcyksc3VwZXIuZGVsZXRlKHRoaXMuUyh0LCEwLCExKSl9ZW50cmllcygpe3ZhciB0PXRoaXMubmEoKTtyZXR1cm4gbmV3IGd0KHQsU2UsdGhpcyl9a2V5cygpe3JldHVybiB0aGlzLklhKCl9dmFsdWVzKCl7dmFyIHQ9dGhpcy5uYSgpO3JldHVybiBuZXcgZ3QodCxBZS5wcm90b3R5cGUuZ2V0LHRoaXMpfWZvckVhY2godCxlKXtzdXBlci5mb3JFYWNoKCgobixyKT0+e3QuY2FsbChlLHRoaXMuZ2V0KHIpLHIsdGhpcyk7fSkpO31zZXQodCxlKXtyZXR1cm4gVGUodGhpcyksbnVsbD09KHQ9dGhpcy5TKHQsITAsITEpKT90aGlzOm51bGw9PWU/KHN1cGVyLmRlbGV0ZSh0KSx0aGlzKTpzdXBlci5zZXQodCx0aGlzLmFhKGUsITAsITAsdGhpcy5WLCExLHRoaXMuTCkpfU9hKHQpe2NvbnN0IGU9dGhpcy5TKHRbMF0sITEsITApO3Q9dFsxXSx0PXRoaXMuVj92b2lkIDA9PT10P251bGw6dDp0aGlzLmFhKHQsITEsITAsdm9pZCAwLCExLHRoaXMuTCksc3VwZXIuc2V0KGUsdCk7fWhhcyh0KXtyZXR1cm4gc3VwZXIuaGFzKHRoaXMuUyh0LCExLCExKSl9Z2V0KHQpe3Q9dGhpcy5TKHQsITEsITEpO2NvbnN0IGU9c3VwZXIuZ2V0KHQpO2lmKHZvaWQgMCE9PWUpe3ZhciBuPXRoaXMuVjtyZXR1cm4gbj8oKG49dGhpcy5hYShlLCExLCEwLG4sdGhpcy50YSx0aGlzLkwpKSE9PWUmJnN1cGVyLnNldCh0LG4pLG4pOmV9fW5hKCl7cmV0dXJuIEFycmF5LmZyb20oc3VwZXIua2V5cygpKX1JYSgpe3JldHVybiBzdXBlci5rZXlzKCl9W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpcy5lbnRyaWVzKCl9fTtmdW5jdGlvbiBiZSh0LGUsbixyLGkscyl7cmV0dXJuIHQ9c2UodCxyLG4scyksaSYmKHQ9VWUodCkpLHR9ZnVuY3Rpb24ga2UodCl7cmV0dXJuIHR9ZnVuY3Rpb24gU2UodCl7cmV0dXJuIFt0LHRoaXMuZ2V0KHQpXX1sZXQgeGU7ZnVuY3Rpb24gTGUoKXtyZXR1cm4geGV8fD1uZXcgQWUocnQoW10pLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHllKX1mdW5jdGlvbiBGZSh0LGUsbixyLGkpe2lmKG51bGwhPXQpe2lmKEFycmF5LmlzQXJyYXkodCkpdD1mdCh0KT92b2lkIDA6aSYmMiZ0dCh0KT90OlJlKHQsZSxuLHZvaWQgMCE9PXIsaSk7ZWxzZSBpZih1dCh0KSl7Y29uc3Qgcz17fTtmb3IobGV0IG8gaW4gdClzW29dPUZlKHRbb10sZSxuLHIsaSk7dD1zO31lbHNlIHQ9ZSh0LHIpO3JldHVybiB0fX1mdW5jdGlvbiBSZSh0LGUsbixyLGkpe2NvbnN0IHM9cnx8bj90dCh0KTowO3I9cj8hISgzMiZzKTp2b2lkIDA7Y29uc3Qgbz1IKHQpO2ZvcihsZXQgdD0wO3Q8by5sZW5ndGg7dCsrKW9bdF09RmUob1t0XSxlLG4scixpKTtyZXR1cm4gbiYmKF90KG8sdCksbihzLG8pKSxvfWZ1bmN0aW9uIE1lKHQpe3JldHVybiBGZSh0LEllLHZvaWQgMCx2b2lkIDAsITEpfWZ1bmN0aW9uIEllKHQpe3JldHVybiB0Llk9PT1hdD90LnRvSlNPTigpOnQgaW5zdGFuY2VvZiBBZT90Lm9hKE1lKTpmdW5jdGlvbih0KXtzd2l0Y2godHlwZW9mIHQpe2Nhc2UibnVtYmVyIjpyZXR1cm4gaXNGaW5pdGUodCk/dDpTdHJpbmcodCk7Y2FzZSJiaWdpbnQiOnJldHVybiBCdCh0KT9OdW1iZXIodCk6U3RyaW5nKHQpO2Nhc2UiYm9vbGVhbiI6cmV0dXJuIHQ/MTowO2Nhc2Uib2JqZWN0IjppZih0KWlmKEFycmF5LmlzQXJyYXkodCkpe2lmKGZ0KHQpKXJldHVybn1lbHNlIHtpZihJKHQpKXJldHVybiB4KHQpO2lmKHQgaW5zdGFuY2VvZiBEKXtjb25zdCBlPXQuZztyZXR1cm4gbnVsbD09ZT8iIjoic3RyaW5nIj09dHlwZW9mIGU/ZTp0Lmc9eChlKX1pZih0IGluc3RhbmNlb2YgQWUpcmV0dXJuIHQub2EoKX19cmV0dXJuIHR9KHQpfWZ1bmN0aW9uIFBlKHQsZSxuPXN0KXtpZihudWxsIT10KXtpZihrJiZ0IGluc3RhbmNlb2YgVWludDhBcnJheSlyZXR1cm4gZT90Om5ldyBVaW50OEFycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkodCkpe3ZhciByPXR0KHQpO3JldHVybiAyJnI/dDooZSYmPTA9PT1yfHwhISgzMiZyKSYmISg2NCZyfHwhKDE2JnIpKSxlPyhudCh0LC0xMjI5MyYoMzR8cikpLHQpOlJlKHQsUGUsNCZyP3N0Om4sITAsITApKX1yZXR1cm4gdC5ZPT09YXQ/KG49dC51LHQ9MiYocj1ldChuKSk/dDpPZSh0LG4sciwhMCkpOnQgaW5zdGFuY2VvZiBBZSYmISgyJnQuTCkmJihuPXJ0KHQuWihQZSkpLHQ9bmV3IEFlKG4sdC5WLHQuUyx0LmFhKSksdH19ZnVuY3Rpb24gT2UodCxlLG4scil7cmV0dXJuIHQ9dC5jb25zdHJ1Y3RvcixsZT1lPUNlKGUsbixyKSxlPW5ldyB0KGUpLGxlPXZvaWQgMCxlfWZ1bmN0aW9uIENlKHQsZSxuKXtjb25zdCByPW58fDImZT9zdDppdCxpPSEhKDMyJmUpO3JldHVybiB0PWZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPUgodCk7dmFyIGk9ci5sZW5ndGg7Y29uc3Qgcz0yNTYmZT9yW2ktMV06dm9pZCAwO2ZvcihpKz1zPy0xOjAsZT01MTImZT8xOjA7ZTxpO2UrKylyW2VdPW4ocltlXSk7aWYocyl7ZT1yW2VdPXt9O2Zvcihjb25zdCB0IGluIHMpZVt0XT1uKHNbdF0pO31yZXR1cm4gX3Qocix0KSxyfSh0LGUsKHQ9PlBlKHQsaSxyKSkpLFoodCwzMnwobj8yOjApKSx0fWZ1bmN0aW9uIFVlKHQpe2NvbnN0IGU9dC51LG49ZXQoZSk7cmV0dXJuIDImbj9PZSh0LGUsbiwhMSk6dH1mdW5jdGlvbiBOZSh0LGUsbixyKXtyZXR1cm4gISg0JmUpfHxudWxsIT1ufWZ1bmN0aW9uIERlKHQsZSl7cmV0dXJuIEdlKHQ9dC51LGV0KHQpLGUpfWZ1bmN0aW9uIEJlKHQsZSxuLHIpe2lmKCEoKGU9cisoKyEhKDUxMiZlKS0xKSk8MHx8ZT49dC5sZW5ndGh8fGU+PW4pKXJldHVybiB0W2VdfWZ1bmN0aW9uIEdlKHQsZSxuLHIpe2lmKC0xPT09bilyZXR1cm4gbnVsbDtjb25zdCBpPWU+PjE0JjEwMjN8fDUzNjg3MDkxMjtpZighKG4+PWkpKXt2YXIgcz10Lmxlbmd0aDtyZXR1cm4gciYmMjU2JmUmJm51bGwhPShyPXRbcy0xXVtuXSk/KEJlKHQsZSxpLG4pJiZudWxsIT0kJiYoKGU9KHQ9Rz8/PXt9KVskXXx8MCk+PTR8fCh0WyRdPWUrMSxqKCkpKSxyKTpCZSh0LGUsaSxuKX1yZXR1cm4gMjU2JmU/dFt0Lmxlbmd0aC0xXVtuXTp2b2lkIDB9ZnVuY3Rpb24gamUodCxlLG4scil7Y29uc3QgaT10LnU7bGV0IHM9ZXQoaSk7cmV0dXJuIHB0KHMpLFZlKGkscyxlLG4sciksdH1mdW5jdGlvbiBWZSh0LGUsbixyLGkpe2NvbnN0IHM9ZT4+MTQmMTAyM3x8NTM2ODcwOTEyO2lmKG4+PXN8fGkmJiFmKXtsZXQgbz1lO2lmKDI1NiZlKWk9dFt0Lmxlbmd0aC0xXTtlbHNlIHtpZihudWxsPT1yKXJldHVybiBvO2k9dFtzKygrISEoNTEyJmUpLTEpXT17fSxvfD0yNTY7fXJldHVybiBpW25dPXIsbjxzJiYodFtuKygrISEoNTEyJmUpLTEpXT12b2lkIDApLG8hPT1lJiZudCh0LG8pLG99cmV0dXJuIHRbbisoKyEhKDUxMiZlKS0xKV09ciwyNTYmZSYmKG4gaW4odD10W3QubGVuZ3RoLTFdKSYmZGVsZXRlIHRbbl0pLGV9ZnVuY3Rpb24gWGUodCxlLG4scixpKXt2YXIgcz0yJmU7bGV0IG89R2UodCxlLG4saSk7QXJyYXkuaXNBcnJheShvKXx8KG89b3QpO2NvbnN0IGE9ISgyJnIpO3I9ISgxJnIpO2NvbnN0IGg9ISEoMzImZSk7bGV0IGM9dHQobyk7cmV0dXJuIDAhPT1jfHwhaHx8c3x8YT8xJmN8fChjfD0xLG50KG8sYykpOihjfD0zMyxudChvLGMpKSxzPyh0PSExLDImY3x8KHJ0KG8pLHQ9ISEoNCZjKSksKHJ8fHQpJiZPYmplY3QuZnJlZXplKG8pKToocz0hISgyJmMpfHwhISgyMDQ4JmMpLHImJnM/KG89SChvKSxyPTEsaCYmIWEmJihyfD0zMiksbnQobyxyKSxWZSh0LGUsbixvLGkpKTphJiYzMiZjJiYhcyYmUShvLDMyKSksb31mdW5jdGlvbiBIZSh0LGUpe3Q9dC51O2xldCBuPWV0KHQpO2NvbnN0IHI9R2UodCxuLGUpLGk9V3Qocik7cmV0dXJuIG51bGwhPWkmJmkhPT1yJiZWZSh0LG4sZSxpKSxpfWZ1bmN0aW9uIFdlKHQpe3Q9dC51O2xldCBlPWV0KHQpO2NvbnN0IG49R2UodCxlLDEpLHI9bHQobiwhMCwhISgzNCZlKSk7cmV0dXJuIG51bGwhPXImJnIhPT1uJiZWZSh0LGUsMSxyKSxyfWZ1bmN0aW9uIHplKHQsZSxuKXt2YXIgcj12b2lkIDA9PT12dD8yOjU7Y29uc3QgaT10LnU7dmFyIHM9ZXQoaSk7Y29uc3Qgbz0yJnM/MTpyO3I9S2UoaSxzLGUpO3ZhciBhPXR0KHIpO2lmKE5lKHQsYSx2b2lkIDApKXsoNCZhfHxPYmplY3QuaXNGcm96ZW4ocikpJiYocj1IKHIpLGE9Zm4oYSxzKSxzPVZlKGkscyxlLHIpKTtsZXQgbz10PTA7Zm9yKDt0PHIubGVuZ3RoO3QrKyl7Y29uc3QgZT1uKHJbdF0pO251bGwhPWUmJihyW28rK109ZSk7fW88dCYmKHIubGVuZ3RoPW8pLGE9LTQwOTcmKDIwfChhPVllKGEscykpKSxudChyLGEmPS04MTkzKSwyJmEmJk9iamVjdC5mcmVlemUocik7fWxldCBoO3JldHVybiAxPT09b3x8ND09PW8mJjMyJmE/JGUoYSl8fChzPWEsKGF8PTIpIT09cyYmbnQocixhKSxPYmplY3QuZnJlZXplKHIpKToobj01PT09byYmKCEhKDMyJmEpfHwkZShhKXx8ISFoZT8uZ2V0KHIpKSwoMj09PW98fG4pJiYkZShhKSYmKHI9SChyKSxhPWRuKGE9Zm4oYSxzKSxzLCExKSxudChyLGEpLHM9VmUoaSxzLGUscikpLCRlKGEpfHwoZT1hLChhPWRuKGEscywhMSkpIT09ZSYmbnQocixhKSksbiYmKGg9YWUocikpKSxofHxyfWZ1bmN0aW9uIEtlKHQsZSxuKXtyZXR1cm4gdD1HZSh0LGUsbiksQXJyYXkuaXNBcnJheSh0KT90Om90fWZ1bmN0aW9uIFllKHQsZSl7cmV0dXJuIDA9PT10JiYodD1mbih0LGUpKSwxfHR9ZnVuY3Rpb24gJGUodCl7cmV0dXJuICEhKDImdCkmJiEhKDQmdCl8fCEhKDIwNDgmdCl9ZnVuY3Rpb24gcWUodCl7dD1IKHQpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXtjb25zdCBuPXRbZV09SCh0W2VdKTtBcnJheS5pc0FycmF5KG5bMV0pJiYoblsxXT1ydChuWzFdKSk7fXJldHVybiB0fWZ1bmN0aW9uIEplKHQsZSxuLHIpe3Q9dC51O2xldCBpPWV0KHQpO3B0KGkpLFZlKHQsaSxlLCgiMCI9PT1yPzA9PT1OdW1iZXIobik6bj09PXIpP3ZvaWQgMDpuKTt9ZnVuY3Rpb24gWmUodCxlLG4scil7Y29uc3QgaT1ldCh0KTtwdChpKSx0PVhlKHQsaSxlLDIpLHI9bihyLCg0JihlPXR0KHQpKT80MDk2JmU/NDA5Njo4MTkyJmU/ODE5MjowOnZvaWQgMCk/PzApLHQucHVzaChyKTt9ZnVuY3Rpb24gUWUodCl7cmV0dXJuIHR9ZnVuY3Rpb24gdG4odCxlKXt2YXIgbj1fcztyZXR1cm4gcm4oZW4odD10LnUpLHQsZXQodCksbik9PT1lP2U6LTF9ZnVuY3Rpb24gZW4odCl7aWYoVylyZXR1cm4gdFtxXT8/KHRbcV09bmV3IE1hcCk7aWYocSBpbiB0KXJldHVybiB0W3FdO2NvbnN0IGU9bmV3IE1hcDtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscSx7dmFsdWU6ZX0pLGV9ZnVuY3Rpb24gbm4odCxlLG4scil7Y29uc3QgaT1lbih0KSxzPXJuKGksdCxlLG4pO3JldHVybiBzIT09ciYmKHMmJihlPVZlKHQsZSxzKSksaS5zZXQobixyKSksZX1mdW5jdGlvbiBybih0LGUsbixyKXtsZXQgaT10LmdldChyKTtpZihudWxsIT1pKXJldHVybiBpO2k9MDtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyl7Y29uc3Qgcz1yW3RdO251bGwhPUdlKGUsbixzKSYmKDAhPT1pJiYobj1WZShlLG4saSkpLGk9cyk7fXJldHVybiB0LnNldChyLGkpLGl9ZnVuY3Rpb24gc24odCxlLG4scil7bGV0IGk9ZXQodCk7Y29uc3Qgcz1HZSh0LGksbixyKTtsZXQgbztpZihudWxsIT1zJiZzLlk9PT1hdClyZXR1cm4gKGU9VWUocykpIT09cyYmVmUodCxpLG4sZSxyKSxlLnU7aWYoQXJyYXkuaXNBcnJheShzKSl7Y29uc3QgdD10dChzKTtvPTImdD9DZShzLHQsITEpOnMsbz1nZShvLGUpO31lbHNlIG89Z2Uodm9pZCAwLGUpO3JldHVybiBvIT09cyYmVmUodCxpLG4sbyxyKSxvfWZ1bmN0aW9uIG9uKHQsZSxuLHIpe3Q9dC51O2xldCBpPWV0KHQpO2NvbnN0IHM9R2UodCxpLG4scik7cmV0dXJuIChlPXNlKHMsZSwhMSxpKSkhPT1zJiZudWxsIT1lJiZWZSh0LGksbixlLHIpLGV9ZnVuY3Rpb24gYW4odCxlLG4scj0hMSl7aWYobnVsbD09KGU9b24odCxlLG4scikpKXJldHVybiBlO3Q9dC51O2xldCBpPWV0KHQpO2lmKCEoMiZpKSl7Y29uc3Qgcz1VZShlKTtzIT09ZSYmVmUodCxpLG4sZT1zLHIpO31yZXR1cm4gZX1mdW5jdGlvbiBobih0LGUsbixyLGkscyxvKXt2YXIgYT0hISgyJmUpO2k9YT8xOmkscz0hIXMsbyYmPSFhLGE9S2UodCxlLHIpO3ZhciBoPXR0KGEpLGM9ISEoNCZoKTtpZighYyl7dmFyIHU9YSxsPWU7Y29uc3QgdD0hISgyJihoPVllKGgsZSkpKTt0JiYobHw9Mik7bGV0IHI9IXQsaT0hMCxzPTAsbz0wO2Zvcig7czx1Lmxlbmd0aDtzKyspe2NvbnN0IGU9c2UodVtzXSxuLCExLGwpO2lmKGUgaW5zdGFuY2VvZiBuKXtpZighdCl7Y29uc3QgdD0hISgyJnR0KGUudSkpO3ImJj0hdCxpJiY9dDt9dVtvKytdPWU7fX1vPHMmJih1Lmxlbmd0aD1vKSxofD00LGg9aT8xNnxoOi0xNyZoLG50KHUsaD1yPzh8aDotOSZoKSx0JiZPYmplY3QuZnJlZXplKHUpO31pZihvJiYhKDgmaHx8IWEubGVuZ3RoJiYoMT09PWl8fDQ9PT1pJiYzMiZoKSkpe2ZvcigkZShoKSYmKGE9SChhKSxoPWZuKGgsZSksZT1WZSh0LGUscixhKSksbj1hLG89aCx1PTA7dTxuLmxlbmd0aDt1KyspKGg9blt1XSkhPT0obD1VZShoKSkmJihuW3VdPWwpO298PTgsbz1uLmxlbmd0aD8tMTcmbzoxNnxvLG50KG4sbyksaD1vO31sZXQgZjtyZXR1cm4gMT09PWl8fDQ9PT1pJiYzMiZoPyRlKGgpfHwoZT1oLChofD0hYS5sZW5ndGh8fDE2JmgmJighY3x8MzImaCk/MjoyMDQ4KSE9PWUmJm50KGEsaCksT2JqZWN0LmZyZWV6ZShhKSk6KGM9NT09PWkmJighISgzMiZoKXx8JGUoaCl8fCEhaGU/LmdldChhKSksKDI9PT1pfHxjKSYmJGUoaCkmJihhPUgoYSksaD1kbihoPWZuKGgsZSksZSxzKSxudChhLGgpLGU9VmUodCxlLHIsYSkpLCRlKGgpfHwodD1oLChoPWRuKGgsZSxzKSkhPT10JiZudChhLGgpKSxjJiYoZj1hZShhKSkpLGZ8fGF9ZnVuY3Rpb24gY24odCxlLG4pe3Q9dC51O2NvbnN0IHI9ZXQodCk7cmV0dXJuIGhuKHQscixlLG4sdm9pZCAwPT09dnQ/Mjo1LCExLCEoMiZyKSl9ZnVuY3Rpb24gdW4odCxlLG4scixpKXtyZXR1cm4gbnVsbD09ciYmKHI9dm9pZCAwKSxqZSh0LG4scixpKX1mdW5jdGlvbiBsbih0LGUsbixyKXtudWxsPT1yJiYocj12b2lkIDApO3Q6e3Q9dC51O2xldCBpPWV0KHQpO2lmKHB0KGkpLG51bGw9PXIpe2NvbnN0IHI9ZW4odCk7aWYocm4ocix0LGksbikhPT1lKWJyZWFrIHQ7ci5zZXQobiwwKTt9ZWxzZSBpPW5uKHQsaSxuLGUpO1ZlKHQsaSxlLHIpO319ZnVuY3Rpb24gZm4odCxlKXtyZXR1cm4gLTIwNDkmKHQ9MzJ8KDImZT8yfHQ6LTMmdCkpfWZ1bmN0aW9uIGRuKHQsZSxuKXtyZXR1cm4gMzImZSYmbnx8KHQmPS0zMyksdH1mdW5jdGlvbiBwbih0LGUsbixyKXt0PXQudTtjb25zdCBpPWV0KHQpO3B0KGkpLGU9aG4odCxpLG4sZSwyLCEwKSxuPW51bGwhPXI/cjpuZXcgbixlLnB1c2gobiksMiZ0dChuLnUpP1EoZSw4KTpRKGUsMTYpO31mdW5jdGlvbiBnbih0LGUpe3JldHVybiB0Pz9lfWZ1bmN0aW9uIG1uKHQsZSl7cmV0dXJuICR0KERlKHQsZSkpfWZ1bmN0aW9uIHluKHQsZSl7cmV0dXJuIGduKEhlKHQsZSksMCl9ZnVuY3Rpb24gX24odCxlKXtyZXR1cm4gZ24oaWUoRGUodCxlKSksIiIpfWZ1bmN0aW9uIHZuKHQsZSxuKXtpZihudWxsIT1uJiYiYm9vbGVhbiIhPXR5cGVvZiBuKXRocm93IHQ9dHlwZW9mIG4sRXJyb3IoYEV4cGVjdGVkIGJvb2xlYW4gYnV0IGdvdCAkeyJvYmplY3QiIT10P3Q6bj9BcnJheS5pc0FycmF5KG4pPyJhcnJheSI6dDoibnVsbCJ9OiAke259YCk7amUodCxlLG4pO31mdW5jdGlvbiBFbih0LGUsbil7aWYobnVsbCE9bil7aWYoIm51bWJlciIhPXR5cGVvZiBuKXRocm93IFYoImludDMyIik7aWYoIU51bWJlci5pc0Zpbml0ZShuKSl0aHJvdyBWKCJpbnQzMiIpO258PTA7fWplKHQsZSxuKTt9ZnVuY3Rpb24gd24odCxlLG4pe2lmKG51bGwhPW4mJiJudW1iZXIiIT10eXBlb2Ygbil0aHJvdyBFcnJvcihgVmFsdWUgb2YgZmxvYXQvZG91YmxlIGZpZWxkIG11c3QgYmUgYSBudW1iZXIsIGZvdW5kICR7dHlwZW9mIG59OiAke259YCk7amUodCxlLG4pO31mdW5jdGlvbiBUbih0LGUsbil7e2NvbnN0IGE9dC51O2xldCBoPWV0KGEpO2lmKHB0KGgpLG51bGw9PW4pVmUoYSxoLGUpO2Vsc2Uge249Y2U/LmdldChuKXx8bjt2YXIgcixpPXR0KG4pLHM9aSxvPSEhKDImaSl8fE9iamVjdC5pc0Zyb3plbihuKTtpZigocj0hbykmJihyPXZvaWQgMD09PUV0fHwhMSksTmUodCxpKSlmb3IoaT0yMSxvJiYobj1IKG4pLHM9MCxpPWRuKGk9Zm4oaSxoKSxoLCEwKSksdD0wO3Q8bi5sZW5ndGg7dCsrKW5bdF09bmUoblt0XSk7ciYmKG49SChuKSxzPTAsaT1kbihpPWZuKGksaCksaCwhMCkpLGkhPT1zJiZudChuLGkpLFZlKGEsaCxlLG4pO319fWZ1bmN0aW9uIEFuKHQsZSl7cmV0dXJuIEVycm9yKGBJbnZhbGlkIHdpcmUgdHlwZTogJHt0fSAoYXQgcG9zaXRpb24gJHtlfSlgKX1mdW5jdGlvbiBibigpe3JldHVybiBFcnJvcigiRmFpbGVkIHRvIHJlYWQgdmFyaW50LCBlbmNvZGluZyBpcyBpbnZhbGlkLiIpfWZ1bmN0aW9uIGtuKHQsZSl7cmV0dXJuIEVycm9yKGBUcmllZCB0byByZWFkIHBhc3QgdGhlIGVuZCBvZiB0aGUgZGF0YSAke2V9ID4gJHt0fWApfWZ1bmN0aW9uIFNuKHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm4ge2J1ZmZlcjpNKHQpLE46ITF9O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHtidWZmZXI6bmV3IFVpbnQ4QXJyYXkodCksTjohMX07aWYodC5jb25zdHJ1Y3Rvcj09PVVpbnQ4QXJyYXkpcmV0dXJuIHtidWZmZXI6dCxOOiExfTtpZih0LmNvbnN0cnVjdG9yPT09QXJyYXlCdWZmZXIpcmV0dXJuIHtidWZmZXI6bmV3IFVpbnQ4QXJyYXkodCksTjohMX07aWYodC5jb25zdHJ1Y3Rvcj09PUQpcmV0dXJuIHtidWZmZXI6Tih0KXx8bmV3IFVpbnQ4QXJyYXkoMCksTjohMH07aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcmV0dXJuIHtidWZmZXI6bmV3IFVpbnQ4QXJyYXkodC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCksTjohMX07dGhyb3cgRXJyb3IoIlR5cGUgbm90IGNvbnZlcnRpYmxlIHRvIGEgVWludDhBcnJheSwgZXhwZWN0ZWQgYSBVaW50OEFycmF5LCBhbiBBcnJheUJ1ZmZlciwgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcsIGEgQnl0ZVN0cmluZyBvciBhbiBBcnJheSBvZiBudW1iZXJzIil9ZnVuY3Rpb24geG4odCxlKXtsZXQgbixyPTAsaT0wLHM9MDtjb25zdCBvPXQuaDtsZXQgYT10Lmc7ZG97bj1vW2ErK10scnw9KDEyNyZuKTw8cyxzKz03O313aGlsZShzPDMyJiYxMjgmbik7Zm9yKHM+MzImJihpfD0oMTI3Jm4pPj40KSxzPTM7czwzMiYmMTI4Jm47cys9NyluPW9bYSsrXSxpfD0oMTI3Jm4pPDxzO2lmKENuKHQsYSksbjwxMjgpcmV0dXJuIGUocj4+PjAsaT4+PjApO3Rocm93IGJuKCl9ZnVuY3Rpb24gTG4odCl7bGV0IGU9MCxuPXQuZztjb25zdCByPW4rMTAsaT10Lmg7Zm9yKDtuPHI7KXtjb25zdCByPWlbbisrXTtpZihlfD1yLDA9PSgxMjgmcikpcmV0dXJuIENuKHQsbiksISEoMTI3JmUpfXRocm93IGJuKCl9ZnVuY3Rpb24gRm4odCl7Y29uc3QgZT10Lmg7bGV0IG49dC5nLHI9ZVtuKytdLGk9MTI3JnI7aWYoMTI4JnImJihyPWVbbisrXSxpfD0oMTI3JnIpPDw3LDEyOCZyJiYocj1lW24rK10saXw9KDEyNyZyKTw8MTQsMTI4JnImJihyPWVbbisrXSxpfD0oMTI3JnIpPDwyMSwxMjgmciYmKHI9ZVtuKytdLGl8PXI8PDI4LDEyOCZyJiYxMjgmZVtuKytdJiYxMjgmZVtuKytdJiYxMjgmZVtuKytdJiYxMjgmZVtuKytdJiYxMjgmZVtuKytdKSkpKSl0aHJvdyBibigpO3JldHVybiBDbih0LG4pLGl9ZnVuY3Rpb24gUm4odCl7cmV0dXJuIEZuKHQpPj4+MH1mdW5jdGlvbiBNbih0KXt2YXIgZT10Lmg7Y29uc3Qgbj10Lmcscj1lW25dLGk9ZVtuKzFdLHM9ZVtuKzJdO3JldHVybiBlPWVbbiszXSxDbih0LHQuZys0KSwocjw8MHxpPDw4fHM8PDE2fGU8PDI0KT4+PjB9ZnVuY3Rpb24gSW4odCl7dmFyIGU9TW4odCk7dD0yKihlPj4zMSkrMTtjb25zdCBuPWU+Pj4yMyYyNTU7cmV0dXJuIGUmPTgzODg2MDcsMjU1PT1uP2U/TmFOOnQqKDEvMCk6MD09bj90Kk1hdGgucG93KDIsLTE0OSkqZTp0Kk1hdGgucG93KDIsbi0xNTApKihlK01hdGgucG93KDIsMjMpKX1mdW5jdGlvbiBQbih0KXtyZXR1cm4gRm4odCl9ZnVuY3Rpb24gT24odCxlLHtkYTpuPSExfT17fSl7dC5kYT1uLGUmJihlPVNuKGUpLHQuaD1lLmJ1ZmZlcix0Lm09ZS5OLHQuaj0wLHQubD10LmgubGVuZ3RoLHQuZz10LmopO31mdW5jdGlvbiBDbih0LGUpe2lmKHQuZz1lLGU+dC5sKXRocm93IGtuKHQubCxlKX1mdW5jdGlvbiBVbih0LGUpe2lmKGU8MCl0aHJvdyBFcnJvcihgVHJpZWQgdG8gcmVhZCBhIG5lZ2F0aXZlIGJ5dGUgbGVuZ3RoOiAke2V9YCk7Y29uc3Qgbj10Lmcscj1uK2U7aWYocj50LmwpdGhyb3cga24oZSx0Lmwtbik7cmV0dXJuIHQuZz1yLG59ZnVuY3Rpb24gTm4odCxlKXtpZigwPT1lKXJldHVybiBVKCk7dmFyIG49VW4odCxlKTtyZXR1cm4gdC5kYSYmdC5tP249dC5oLnN1YmFycmF5KG4sbitlKToodD10Lmgsbj1uPT09KGU9bitlKT9uZXcgVWludDhBcnJheSgwKTp3dD90LnNsaWNlKG4sZSk6bmV3IFVpbnQ4QXJyYXkodC5zdWJhcnJheShuLGUpKSksMD09bi5sZW5ndGg/VSgpOm5ldyBEKG4sUCl9QWUucHJvdG90eXBlLnRvSlNPTj12b2lkIDAsQWUucHJvdG90eXBlLkphPWh0O3ZhciBEbj1bXTtmdW5jdGlvbiBCbih0KXt2YXIgZT10Lmc7aWYoZS5nPT1lLmwpcmV0dXJuICExO3QubD10LmcuZzt2YXIgbj1Sbih0LmcpO2lmKGU9bj4+PjMsISgobiY9Nyk+PTAmJm48PTUpKXRocm93IEFuKG4sdC5sKTtpZihlPDEpdGhyb3cgRXJyb3IoYEludmFsaWQgZmllbGQgbnVtYmVyOiAke2V9IChhdCBwb3NpdGlvbiAke3QubH0pYCk7cmV0dXJuIHQubT1lLHQuaD1uLCEwfWZ1bmN0aW9uIEduKHQpe3N3aXRjaCh0Lmgpe2Nhc2UgMDowIT10Lmg/R24odCk6TG4odC5nKTticmVhaztjYXNlIDE6Q24odD10LmcsdC5nKzgpO2JyZWFrO2Nhc2UgMjppZigyIT10LmgpR24odCk7ZWxzZSB7dmFyIGU9Um4odC5nKTtDbih0PXQuZyx0LmcrZSk7fWJyZWFrO2Nhc2UgNTpDbih0PXQuZyx0LmcrNCk7YnJlYWs7Y2FzZSAzOmZvcihlPXQubTs7KXtpZighQm4odCkpdGhyb3cgRXJyb3IoIlVubWF0Y2hlZCBzdGFydC1ncm91cCB0YWc6IHN0cmVhbSBFT0YiKTtpZig0PT10Lmgpe2lmKHQubSE9ZSl0aHJvdyBFcnJvcigiVW5tYXRjaGVkIGVuZC1ncm91cCB0YWciKTticmVha31Hbih0KTt9YnJlYWs7ZGVmYXVsdDp0aHJvdyBBbih0LmgsdC5sKX19ZnVuY3Rpb24gam4odCxlLG4pe2NvbnN0IHI9dC5nLmwsaT1Sbih0LmcpLHM9dC5nLmcraTtsZXQgbz1zLXI7aWYobzw9MCYmKHQuZy5sPXMsbihlLHQsdm9pZCAwLHZvaWQgMCx2b2lkIDApLG89cy10LmcuZyksbyl0aHJvdyBFcnJvcihgTWVzc2FnZSBwYXJzaW5nIGVuZGVkIHVuZXhwZWN0ZWRseS4gRXhwZWN0ZWQgdG8gcmVhZCAke2l9IGJ5dGVzLCBpbnN0ZWFkIHJlYWQgJHtpLW99IGJ5dGVzLCBlaXRoZXIgdGhlIGRhdGEgZW5kZWQgdW5leHBlY3RlZGx5IG9yIHRoZSBtZXNzYWdlIG1pc3JlcG9ydGVkIGl0cyBvd24gbGVuZ3RoYCk7cmV0dXJuIHQuZy5nPXMsdC5nLmw9cixlfWZ1bmN0aW9uIFZuKHQpe3ZhciBlPVJuKHQuZyksYT1Vbih0PXQuZyxlKTtpZih0PXQuaCxvKXt2YXIgaCxjPXQ7KGg9cyl8fChoPXM9bmV3IFRleHREZWNvZGVyKCJ1dGYtOCIse2ZhdGFsOiEwfSkpLGU9YStlLGM9MD09PWEmJmU9PT1jLmxlbmd0aD9jOmMuc3ViYXJyYXkoYSxlKTt0cnl7dmFyIHU9aC5kZWNvZGUoYyk7fWNhdGNoKHQpe2lmKHZvaWQgMD09PWkpe3RyeXtoLmRlY29kZShuZXcgVWludDhBcnJheShbMTI4XSkpO31jYXRjaCh0KXt9dHJ5e2guZGVjb2RlKG5ldyBVaW50OEFycmF5KFs5N10pKSxpPSEwO31jYXRjaCh0KXtpPSExO319dGhyb3cgIWkmJihzPXZvaWQgMCksdH19ZWxzZSB7ZT0odT1hKStlLGE9W107bGV0IGkscz1udWxsO2Zvcig7dTxlOyl7dmFyIGw9dFt1KytdO2w8MTI4P2EucHVzaChsKTpsPDIyND91Pj1lP24oKTooaT10W3UrK10sbDwxOTR8fDEyOCE9KDE5MiZpKT8odS0tLG4oKSk6YS5wdXNoKCgzMSZsKTw8Nnw2MyZpKSk6bDwyNDA/dT49ZS0xP24oKTooaT10W3UrK10sMTI4IT0oMTkyJmkpfHwyMjQ9PT1sJiZpPDE2MHx8MjM3PT09bCYmaT49MTYwfHwxMjghPSgxOTImKGg9dFt1KytdKSk/KHUtLSxuKCkpOmEucHVzaCgoMTUmbCk8PDEyfCg2MyZpKTw8Nnw2MyZoKSk6bDw9MjQ0P3U+PWUtMj9uKCk6KGk9dFt1KytdLDEyOCE9KDE5MiZpKXx8aS0xNDQrKGw8PDI4KT4+MzAhPTB8fDEyOCE9KDE5MiYoaD10W3UrK10pKXx8MTI4IT0oMTkyJihjPXRbdSsrXSkpPyh1LS0sbigpKToobD0oNyZsKTw8MTh8KDYzJmkpPDwxMnwoNjMmaCk8PDZ8NjMmYyxsLT02NTUzNixhLnB1c2goNTUyOTYrKGw+PjEwJjEwMjMpLDU2MzIwKygxMDIzJmwpKSkpOm4oKSxhLmxlbmd0aD49ODE5MiYmKHM9cihzLGEpLGEubGVuZ3RoPTApO311PXIocyxhKTt9cmV0dXJuIHV9ZnVuY3Rpb24gWG4odCl7Y29uc3QgZT1Sbih0LmcpO3JldHVybiBObih0LmcsZSl9ZnVuY3Rpb24gSG4odCxlLG4pe3ZhciByPVJuKHQuZyk7Zm9yKHI9dC5nLmcrcjt0LmcuZzxyOyluLnB1c2goZSh0LmcpKTt9dmFyIFduPVtdO2xldCB6bjtmdW5jdGlvbiBLbih0LGUsbil7ZS5nP2UubSh0LGUuZyxlLmgsbiwhMCk6ZS5tKHQsZS5oLG4sITApO312YXIgWW49Y2xhc3N7Y29uc3RydWN0b3IodCxlKXt0aGlzLnU9bWUodCxlKTt9dG9KU09OKCl7cmV0dXJuICRuKHRoaXMpfWwoKXt2YXIgdD12bztyZXR1cm4gdC5nP3QubCh0aGlzLHQuZyx0LmgsITApOnQubCh0aGlzLHQuaCx0LmRlZmF1bHRWYWx1ZSwhMCl9Y2xvbmUoKXtjb25zdCB0PXRoaXMudTtyZXR1cm4gT2UodGhpcyx0LGV0KHQpLCExKX1OKCl7cmV0dXJuICEhKDImdHQodGhpcy51KSl9fTtmdW5jdGlvbiAkbih0KXt0PXpuP3QudTpSZSh0LnUsSWUsdm9pZCAwLHZvaWQgMCwhMSk7e3ZhciBlPSF6bjtsZXQgYz10Lmxlbmd0aDtpZihjKXt2YXIgbj10W2MtMV0scj11dChuKTtyP2MtLTpuPXZvaWQgMDt2YXIgaT10O2lmKHIpe3Q6e3ZhciBzPW4sbz17fTtpZihyPSExLHMpZm9yKHZhciBhIGluIHMpe2lmKGlzTmFOKCthKSl7b1thXT1zW2FdO2NvbnRpbnVlfWxldCB0PXNbYV07QXJyYXkuaXNBcnJheSh0KSYmKGZ0KHQpfHxjdCh0KSYmMD09PXQuc2l6ZSkmJih0PW51bGwpLG51bGw9PXQmJihyPSEwKSxudWxsIT10JiYob1thXT10KTt9aWYocil7Zm9yKGxldCB0IGluIG8pYnJlYWsgdDtvPW51bGw7fWVsc2Ugbz1zO31zPW51bGw9PW8/bnVsbCE9bjpvIT09bjt9Zm9yKDtjPjAmJihudWxsPT0oYT1pW2MtMV0pfHxmdChhKXx8Y3QoYSkmJjA9PT1hLnNpemUpO2MtLSl2YXIgaD0hMDsoaSE9PXR8fHN8fGgpJiYoZT8oaHx8c3x8bykmJihpLmxlbmd0aD1jKTppPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGksMCxjKSxvJiZpLnB1c2gobykpLGg9aTt9ZWxzZSBoPXQ7fXJldHVybiBofWZ1bmN0aW9uIHFuKHQpe3JldHVybiB0Py9eXGQrJC8udGVzdCh0KT8oSXQodCksbmV3IEpuKEF0LGJ0KSk6bnVsbDpabnx8PW5ldyBKbigwLDApfVluLnByb3RvdHlwZS5ZPWF0LFluLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3RyeXtyZXR1cm4gem49ITAsJG4odGhpcykudG9TdHJpbmcoKX1maW5hbGx5e3puPSExO319O3ZhciBKbj1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuaD10Pj4+MCx0aGlzLmc9ZT4+PjA7fX07bGV0IFpuO2Z1bmN0aW9uIFFuKHQpe3JldHVybiB0Py9eLT9cZCskLy50ZXN0KHQpPyhJdCh0KSxuZXcgdHIoQXQsYnQpKTpudWxsOmVyfHw9bmV3IHRyKDAsMCl9dmFyIHRyPWNsYXNze2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5oPXQ+Pj4wLHRoaXMuZz1lPj4+MDt9fTtsZXQgZXI7ZnVuY3Rpb24gbnIodCxlLG4pe2Zvcig7bj4wfHxlPjEyNzspdC5nLnB1c2goMTI3JmV8MTI4KSxlPShlPj4+N3xuPDwyNSk+Pj4wLG4+Pj49Nzt0LmcucHVzaChlKTt9ZnVuY3Rpb24gcnIodCxlKXtmb3IoO2U+MTI3Oyl0LmcucHVzaCgxMjcmZXwxMjgpLGU+Pj49Nzt0LmcucHVzaChlKTt9ZnVuY3Rpb24gaXIodCxlKXtpZihlPj0wKXJyKHQsZSk7ZWxzZSB7Zm9yKGxldCBuPTA7bjw5O24rKyl0LmcucHVzaCgxMjcmZXwxMjgpLGU+Pj03O3QuZy5wdXNoKDEpO319ZnVuY3Rpb24gc3IodCxlKXt0LmcucHVzaChlPj4+MCYyNTUpLHQuZy5wdXNoKGU+Pj44JjI1NSksdC5nLnB1c2goZT4+PjE2JjI1NSksdC5nLnB1c2goZT4+PjI0JjI1NSk7fWZ1bmN0aW9uIG9yKHQsZSl7MCE9PWUubGVuZ3RoJiYodC5sLnB1c2goZSksdC5oKz1lLmxlbmd0aCk7fWZ1bmN0aW9uIGFyKHQsZSxuKXtycih0LmcsOCplK24pO31mdW5jdGlvbiBocih0LGUpe3JldHVybiBhcih0LGUsMiksZT10LmcuZW5kKCksb3IodCxlKSxlLnB1c2godC5oKSxlfWZ1bmN0aW9uIGNyKHQsZSl7dmFyIG49ZS5wb3AoKTtmb3Iobj10LmgrdC5nLmxlbmd0aCgpLW47bj4xMjc7KWUucHVzaCgxMjcmbnwxMjgpLG4+Pj49Nyx0LmgrKztlLnB1c2gobiksdC5oKys7fWZ1bmN0aW9uIHVyKHQsZSxuKXthcih0LGUsMikscnIodC5nLG4ubGVuZ3RoKSxvcih0LHQuZy5lbmQoKSksb3IodCxuKTt9ZnVuY3Rpb24gbHIodCxlLG4scil7bnVsbCE9biYmKGU9aHIodCxlKSxyKG4sdCksY3IodCxlKSk7fWNsYXNzIGZye2NvbnN0cnVjdG9yKHQsZSxuLHIpe3RoaXMuZz10LHRoaXMuaD1lLHRoaXMubD1uLHRoaXMucGE9cjt9fWZ1bmN0aW9uIGRyKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP3RbMF1pbnN0YW5jZW9mIGZyP3Q6W2dpLHRdOlt0LHZvaWQgMF19ZnVuY3Rpb24gcHIodCxlKXtpZihBcnJheS5pc0FycmF5KGUpKXt2YXIgbj10dChlKTtpZig0Jm4pcmV0dXJuIGU7Zm9yKHZhciByPTAsaT0wO3I8ZS5sZW5ndGg7cisrKXtjb25zdCBuPXQoZVtyXSk7bnVsbCE9biYmKGVbaSsrXT1uKTt9cmV0dXJuIGk8ciYmKGUubGVuZ3RoPWkpLG50KGUsLTEyMjg5Jig1fG4pKSwyJm4mJk9iamVjdC5mcmVlemUoZSksZX19Y29uc3QgZ3I9U3ltYm9sKCk7ZnVuY3Rpb24gbXIodCl7bGV0IGU9dFtncl07aWYoIWUpe2NvbnN0IG49YnIodCkscj1Vcih0KSxpPXIubDtlPWk/KHQsZSk9PmkodCxlLHIpOih0LGUpPT57Zm9yKDtCbihlKSYmNCE9ZS5oOyl7dmFyIGk9ZS5tO2xldCBuPXJbaV07Y29uc3QgYT0hbjtsZXQgaD0hMTtpZighbil7dmFyIHM9ci5VO2lmKHMpe3ZhciBvPXNbaV07byYmKGg9cy5PPy5baV0sKCFkfHxoKSYmKHM9eXIobykpJiYobj1yW2ldPXMpKTt9fW4mJm4oZSx0LGkpfHwoaT0ocz1lKS5sLEduKHMpLHMuaWE/cz12b2lkIDA6KG89cy5nLmctaSxzLmcuZz1pLHM9Tm4ocy5nLG8pKSxpPXQscyYmKG10fHw9U3ltYm9sKCksKG89aVttdF0pP28ucHVzaChzKTppW210XT1bc10pKSxhJiZuJiYhaCYmV3IrKzw1JiZqKCk7fW49PT12cnx8bj09PUVyfHxuLmp8fCh0W3l0fHw9U3ltYm9sKCldPW4pO30sdFtncl09ZTt9cmV0dXJuIGV9ZnVuY3Rpb24geXIodCl7Y29uc3QgZT0odD1kcih0KSlbMF0uZztpZih0PXRbMV0pe2NvbnN0IG49bXIodCkscj1Vcih0KS5UO3JldHVybiAodCxpLHMpPT5lKHQsaSxzLHIsbil9cmV0dXJuIGV9Y2xhc3MgX3J7fWxldCB2cixFcjtjb25zdCB3cj1TeW1ib2woKTtmdW5jdGlvbiBUcih0LGUsbil7Y29uc3Qgcj1uWzFdO2xldCBpO2lmKHIpe2NvbnN0IG49clt3cl07aT1uP24uVDpwZShyWzBdKSx0W2VdPW4/P3I7fWkmJmk9PT1mZT8odC5nfHwodC5nPW5ldyBTZXQpKS5hZGQoZSk6blswXSYmKHQuaHx8KHQuaD1uZXcgU2V0KSkuYWRkKGUpO31mdW5jdGlvbiBBcih0LGUpe3JldHVybiBbdC5sLCFlfHxlWzBdPjA/dm9pZCAwOmVdfWZ1bmN0aW9uIGJyKHQpe3ZhciBlPXRbd3JdO2lmKGUpcmV0dXJuIGU7aWYoIShlPVNyKHQsdFt3cl09bmV3IF9yLEFyLEFyLFRyKSkuVSYmIWUuaCYmIWUuZyl7bGV0IG49ITA7Zm9yKGxldCB0IGluIGUpaXNOYU4odCl8fChuPSExKTtuPyhwZSh0WzBdKT09PWZlP0VyP2U9RXI6KChlPW5ldyBfcikuVD1wZSghMCksZT1Fcj1lKTplPXZyfHw9bmV3IF9yLGU9dFt3cl09ZSk6ZS5qPSEwO31yZXR1cm4gZX1mdW5jdGlvbiBrcih0LGUsbil7dFtlXT1uO31mdW5jdGlvbiBTcih0LGUsbixyLGk9a3Ipe2UuVD1wZSh0WzBdKTtsZXQgcz0wO3ZhciBvPXRbKytzXTtvJiZvLmNvbnN0cnVjdG9yPT09T2JqZWN0JiYoZS5VPW8sImZ1bmN0aW9uIj09dHlwZW9mKG89dFsrK3NdKSYmKGUubD1vLGUubT10Wysrc10sbz10Wysrc10pKTtjb25zdCBhPXt9O2Zvcig7QXJyYXkuaXNBcnJheShvKSYmIm51bWJlciI9PXR5cGVvZiBvWzBdJiZvWzBdPjA7KXtmb3IodmFyIGg9MDtoPG8ubGVuZ3RoO2grKylhW29baF1dPW87bz10Wysrc107fWZvcihoPTE7dm9pZCAwIT09bzspe2xldCBsOyJudW1iZXIiPT10eXBlb2YgbyYmKGgrPW8sbz10Wysrc10pO3ZhciBjPXZvaWQgMDtpZihvIGluc3RhbmNlb2YgZnI/bD1vOihsPW1pLHMtLSksbC5wYSl7bz10Wysrc10sYz10O3ZhciB1PXM7ImZ1bmN0aW9uIj09dHlwZW9mIG8mJihvPW8oKSxjW3VdPW8pLGM9bzt9Zm9yKHU9aCsxLCJudW1iZXIiPT10eXBlb2Yobz10Wysrc10pJiZvPDAmJih1LT1vLG89dFsrK3NdKTtoPHU7aCsrKXtjb25zdCB0PWFbaF07aShlLGgsYz9yKGwsYyx0KTpuKGwsdCkpO319cmV0dXJuIGV9Y29uc3QgeHI9U3ltYm9sKCk7ZnVuY3Rpb24gTHIodCl7bGV0IGU9dFt4cl07aWYoIWUpe2NvbnN0IG49SXIodCk7ZT0odCxlKT0+QnIodCxlLG4pLHRbeHJdPWU7fXJldHVybiBlfWNvbnN0IEZyPVN5bWJvbCgpO2Z1bmN0aW9uIFJyKHQpe3JldHVybiB0Lmh9ZnVuY3Rpb24gTXIodCxlKXtsZXQgbixyO2NvbnN0IGk9dC5oO3JldHVybiAodCxzLG8pPT5pKHQscyxvLHJ8fD1JcihlKS5ULG58fD1McihlKSl9ZnVuY3Rpb24gSXIodCl7bGV0IGU9dFtGcl07cmV0dXJuIGV8fChlPVNyKHQsdFtGcl09e30sUnIsTXIpLE5yKHQpLGUpfWNvbnN0IFByPVN5bWJvbCgpO2Z1bmN0aW9uIE9yKHQsZSl7Y29uc3Qgbj10Lmc7cmV0dXJuIGU/KHQscixpKT0+bih0LHIsaSxlKTpufWZ1bmN0aW9uIENyKHQsZSxuKXtjb25zdCByPXQuZztsZXQgaSxzO3JldHVybiAodCxvLGEpPT5yKHQsbyxhLHN8fD1VcihlKS5ULGl8fD1tcihlKSxuKX1mdW5jdGlvbiBVcih0KXtsZXQgZT10W1ByXTtyZXR1cm4gZXx8KGJyKHQpLGU9U3IodCx0W1ByXT17fSxPcixDciksTnIodCksZSl9ZnVuY3Rpb24gTnIodCl7UHIgaW4gdCYmd3IgaW4gdCYmRnIgaW4gdCYmKHQubGVuZ3RoPTApO31mdW5jdGlvbiBEcih0LGUpe3ZhciBuPXRbZV07aWYobilyZXR1cm4gbjtpZihuPXQuVSl7dmFyIHI9bltlXTtpZihyKXt2YXIgaT0ocj1kcihyKSlbMF0uaDtpZihyPXJbMV0sbj1uLk8/LltlXSwhZHx8bil7aWYocil7Y29uc3QgZT1McihyKSxzPUlyKHIpLlQ7bj0obj10Lm0pP24ocyxlKToodCxuLHIpPT5pKHQsbixyLHMsZSk7fWVsc2Ugbj1pO3JldHVybiB0W2VdPW59fX19ZnVuY3Rpb24gQnIodCxlLG4pe2Zvcih2YXIgcj1ldCh0KSxpPSshISg1MTImciktMSxzPXQubGVuZ3RoLG89NTEyJnI/MTowLGE9cysoMjU2JnI/LTE6MCk7bzxhO28rKyl7Y29uc3Qgcj10W29dO2lmKG51bGw9PXIpY29udGludWU7Y29uc3Qgcz1vLWksYT1EcihuLHMpO2lmKCFhKWNvbnRpbnVlO2NvbnN0IGg9bi5VO2g/LltzXSYmIWg/Lk8/LltzXSYmV3IrKzw1JiZqKCksYShlLHIscyk7fWlmKDI1NiZyKXtyPXRbcy0xXTtmb3IobGV0IHQgaW4gcilpPSt0LCFOdW1iZXIuaXNOYU4oaSkmJihudWxsIT0ocz1yW3RdKSYmKGE9RHIobixpKSkpJiYoKG89bi5VKT8uW2ldJiYhbz8uTz8uW2ldJiZXcisrPDUmJmooKSxhKGUscyxpKSk7fWlmKHQ9bXQ/dFttdF06dm9pZCAwKWZvcihvcihlLGUuZy5lbmQoKSksbj0wO248dC5sZW5ndGg7bisrKW9yKGUsTih0W25dKXx8bmV3IFVpbnQ4QXJyYXkoMCkpO31mdW5jdGlvbiBHcih0LGUpe3JldHVybiBuZXcgZnIodCxlLCExLCExKX1mdW5jdGlvbiBqcih0LGUpe3JldHVybiBuZXcgZnIodCxlLCEwLCExKX1mdW5jdGlvbiBWcih0LGUpe3JldHVybiBuZXcgZnIodCxlLCExLCEwKX1mdW5jdGlvbiBYcih0LGUsbil7VmUodCxldCh0KSxlLG4pO312YXIgSHI9VnIoKGZ1bmN0aW9uKHQsZSxuLHIsaSl7cmV0dXJuIDI9PT10LmgmJih0PWpuKHQsZ2UoW3ZvaWQgMCx2b2lkIDBdLHIpLGkpLHB0KHI9ZXQoZSkpLChpPUdlKGUscixuKSlpbnN0YW5jZW9mIEFlPzAhPSgyJmkuTCk/KChpPWkuWigpKS5wdXNoKHQpLFZlKGUscixuLGkpKTppLk9hKHQpOkFycmF5LmlzQXJyYXkoaSk/KDImdHQoaSkmJlZlKGUscixuLGk9cWUoaSkpLGkucHVzaCh0KSk6VmUoZSxyLG4sW3RdKSwhMCl9KSwoZnVuY3Rpb24odCxlLG4scixpKXtpZihlIGluc3RhbmNlb2YgQWUpZS5mb3JFYWNoKCgoZSxzKT0+e2xyKHQsbixnZShbcyxlXSxyKSxpKTt9KSk7ZWxzZSBpZihBcnJheS5pc0FycmF5KGUpKWZvcihsZXQgcz0wO3M8ZS5sZW5ndGg7cysrKXtjb25zdCBvPWVbc107QXJyYXkuaXNBcnJheShvKSYmbHIodCxuLGdlKG8sciksaSk7fX0pKTtsZXQgV3I9MDtmdW5jdGlvbiB6cih0LGUsbil7ZT1mdW5jdGlvbih0KXtpZihudWxsPT10KXJldHVybiB0O2NvbnN0IGU9dHlwZW9mIHQ7aWYoImJpZ2ludCI9PT1lKXJldHVybiBTdHJpbmcoQmlnSW50LmFzSW50Tig2NCx0KSk7aWYoWXQodCkpe2lmKCJzdHJpbmciPT09ZSlyZXR1cm4gUXQodCk7aWYoIm51bWJlciI9PT1lKXJldHVybiBadCh0KX19KGUpLG51bGwhPWUmJigic3RyaW5nIj09dHlwZW9mIGUmJlFuKGUpLG51bGwhPWUmJihhcih0LG4sMCksIm51bWJlciI9PXR5cGVvZiBlPyh0PXQuZyxTdChlKSxucih0LEF0LGJ0KSk6KG49UW4oZSksbnIodC5nLG4uaCxuLmcpKSkpO31mdW5jdGlvbiBLcih0LGUsbil7bnVsbCE9KGU9JHQoZSkpJiZudWxsIT1lJiYoYXIodCxuLDApLGlyKHQuZyxlKSk7fWZ1bmN0aW9uIFlyKHQsZSxuKXtudWxsIT0oZT16dChlKSkmJihhcih0LG4sMCksdC5nLmcucHVzaChlPzE6MCkpO31mdW5jdGlvbiAkcih0LGUsbil7bnVsbCE9KGU9aWUoZSkpJiZ1cih0LG4sYyhlKSk7fWZ1bmN0aW9uIHFyKHQsZSxuLHIsaSl7bHIodCxuLGUgaW5zdGFuY2VvZiBZbj9lLnU6QXJyYXkuaXNBcnJheShlKT9nZShlLHIpOnZvaWQgMCxpKTt9ZnVuY3Rpb24gSnIodCxlLG4pe251bGwhPShlPW51bGw9PWV8fCJzdHJpbmciPT10eXBlb2YgZXx8SShlKXx8ZSBpbnN0YW5jZW9mIEQ/ZTp2b2lkIDApJiZ1cih0LG4sU24oZSkuYnVmZmVyKTt9ZnVuY3Rpb24gWnIodCxlLG4pe3JldHVybiAoNT09PXQuaHx8Mj09PXQuaCkmJihlPVhlKGUsZXQoZSksbiwyLCExKSwyPT10Lmg/SG4odCxJbixlKTplLnB1c2goSW4odC5nKSksITApfXZhciBRcix0aT1HcigoZnVuY3Rpb24odCxlLG4pe2lmKDEhPT10LmgpcmV0dXJuICExO3ZhciByPXQuZzt0PU1uKHIpO2NvbnN0IGk9TW4ocik7cj0yKihpPj4zMSkrMTtjb25zdCBzPWk+Pj4yMCYyMDQ3O3JldHVybiB0PTQyOTQ5NjcyOTYqKDEwNDg1NzUmaSkrdCxYcihlLG4sMjA0Nz09cz90P05hTjpyKigxLzApOjA9PXM/cipNYXRoLnBvdygyLC0xMDc0KSp0OnIqTWF0aC5wb3coMixzLTEwNzUpKih0KzQ1MDM1OTk2MjczNzA0OTYpKSwhMH0pLChmdW5jdGlvbih0LGUsbil7bnVsbCE9KGU9V3QoZSkpJiYoYXIodCxuLDEpLHQ9dC5nLChuPVR0fHw9bmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSkpLnNldEZsb2F0NjQoMCwrZSwhMCksQXQ9bi5nZXRVaW50MzIoMCwhMCksYnQ9bi5nZXRVaW50MzIoNCwhMCksc3IodCxBdCksc3IodCxidCkpO30pKSxlaT1HcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiA1PT09dC5oJiYoWHIoZSxuLEluKHQuZykpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7bnVsbCE9KGU9V3QoZSkpJiYoYXIodCxuLDUpLHQ9dC5nLHh0KGUpLHNyKHQsQXQpKTt9KSksbmk9anIoWnIsKGZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT0oZT1wcihXdCxlKSkpZm9yKGxldCBvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciByPXQsaT1uLHM9ZVtvXTtudWxsIT1zJiYoYXIocixpLDUpLHI9ci5nLHh0KHMpLHNyKHIsQXQpKTt9fSkpLHJpPWpyKFpyLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9cHIoV3QsZSkpJiZlLmxlbmd0aCl7YXIodCxuLDIpLHJyKHQuZyw0KmUubGVuZ3RoKTtmb3IobGV0IHI9MDtyPGUubGVuZ3RoO3IrKyluPXQuZyx4dChlW3JdKSxzcihuLEF0KTt9fSkpLGlpPUdyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDA9PT10LmgmJihYcihlLG4seG4odC5nLEZ0KSksITApfSksenIpLHNpPUdyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDA9PT10LmgmJihYcihlLG4sMD09PSh0PXhuKHQuZyxGdCkpP3ZvaWQgMDp0KSwhMCl9KSx6ciksb2k9R3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKFhyKGUsbix4bih0LmcsTHQpKSwhMCl9KSwoZnVuY3Rpb24odCxlLG4pe251bGwhPShlPWVlKGUpKSYmKCJzdHJpbmciPT10eXBlb2YgZSYmcW4oZSksbnVsbCE9ZSYmKGFyKHQsbiwwKSwibnVtYmVyIj09dHlwZW9mIGU/KHQ9dC5nLFN0KGUpLG5yKHQsQXQsYnQpKToobj1xbihlKSxucih0Lmcsbi5oLG4uZykpKSk7fSkpLGFpPUdyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDA9PT10LmgmJihYcihlLG4sRm4odC5nKSksITApfSksS3IpLGhpPWpyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuICgwPT09dC5ofHwyPT09dC5oKSYmKGU9WGUoZSxldChlKSxuLDIsITEpLDI9PXQuaD9Ibih0LEZuLGUpOmUucHVzaChGbih0LmcpKSwhMCl9KSwoZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPShlPXByKCR0LGUpKSYmZS5sZW5ndGgpe249aHIodCxuKTtmb3IobGV0IG49MDtuPGUubGVuZ3RoO24rKylpcih0LmcsZVtuXSk7Y3IodCxuKTt9fSkpLGNpPUdyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDA9PT10LmgmJihYcihlLG4sMD09PSh0PUZuKHQuZykpP3ZvaWQgMDp0KSwhMCl9KSxLciksdWk9R3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKFhyKGUsbixMbih0LmcpKSwhMCl9KSxZciksbGk9R3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKFhyKGUsbiwhMT09PSh0PUxuKHQuZykpP3ZvaWQgMDp0KSwhMCl9KSxZciksZmk9anIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMj09PXQuaCYmKFplKGUsbixRZSx0PVZuKHQpKSwhMCl9KSwoZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPShlPXByKGllLGUpKSlmb3IobGV0IG89MDtvPGUubGVuZ3RoO28rKyl7dmFyIHI9dCxpPW4scz1lW29dO251bGwhPXMmJnVyKHIsaSxjKHMpKTt9fSkpLGRpPUdyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDI9PT10LmgmJihYcihlLG4sIiI9PT0odD1Wbih0KSk/dm9pZCAwOnQpLCEwKX0pLCRyKSxwaT1HcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAyPT09dC5oJiYoWHIoZSxuLFZuKHQpKSwhMCl9KSwkciksZ2k9VnIoKGZ1bmN0aW9uKHQsZSxuLHIsaSl7cmV0dXJuIDI9PT10LmgmJihqbih0LHNuKGUscixuLCEwKSxpKSwhMCl9KSxxciksbWk9VnIoKGZ1bmN0aW9uKHQsZSxuLHIsaSl7cmV0dXJuIDI9PT10LmgmJihqbih0LHNuKGUscixuKSxpKSwhMCl9KSxxcik7UXI9bmV3IGZyKChmdW5jdGlvbih0LGUsbixyLGkpe2lmKDIhPT10LmgpcmV0dXJuICExO3I9Z2Uodm9pZCAwLHIpO2xldCBzPWV0KGUpO3B0KHMpO2xldCBvPVhlKGUscyxuLDMpO3JldHVybiBzPWV0KGUpLDQmdHQobykmJihvPUgobyksbnQobywtMjA3OSYoMXx0dChvKSkpLFZlKGUscyxuLG8pKSxvLnB1c2gociksam4odCxyLGkpLCEwfSksKGZ1bmN0aW9uKHQsZSxuLHIsaSl7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKylxcih0LGVbc10sbixyLGkpO30pLCEwLCEwKTt2YXIgeWk9VnIoKGZ1bmN0aW9uKHQsZSxuLHIsaSxzKXtyZXR1cm4gMj09PXQuaCYmKG5uKGUsZXQoZSkscyxuKSxqbih0LGU9c24oZSxyLG4pLGkpLCEwKX0pLHFyKSxfaT1HcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAyPT09dC5oJiYoWHIoZSxuLFhuKHQpKSwhMCl9KSxKciksdmk9anIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gKDA9PT10Lmh8fDI9PT10LmgpJiYoZT1YZShlLGV0KGUpLG4sMiwhMSksMj09dC5oP0huKHQsUm4sZSk6ZS5wdXNoKFJuKHQuZykpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9cHIocXQsZSkpKWZvcihsZXQgbz0wO288ZS5sZW5ndGg7bysrKXt2YXIgcj10LGk9bixzPWVbb107bnVsbCE9cyYmKGFyKHIsaSwwKSxycihyLmcscykpO319KSksRWk9R3IoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKFhyKGUsbixGbih0LmcpKSwhMCl9KSwoZnVuY3Rpb24odCxlLG4pe251bGwhPShlPSR0KGUpKSYmKGU9cGFyc2VJbnQoZSwxMCksYXIodCxuLDApLGlyKHQuZyxlKSk7fSkpO2NsYXNzIHdpe2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5oPXQsdGhpcy5nPWUsdGhpcy5sPWFuLHRoaXMubT11bix0aGlzLmRlZmF1bHRWYWx1ZT12b2lkIDA7fX1mdW5jdGlvbiBUaSh0LGUpe3JldHVybiBuZXcgd2kodCxlKX1mdW5jdGlvbiBBaSh0LGUpe3JldHVybiAobixyKT0+e2lmKFduLmxlbmd0aCl7Y29uc3QgdD1Xbi5wb3AoKTt0Lm8ociksT24odC5nLG4sciksbj10O31lbHNlIG49bmV3IGNsYXNze2NvbnN0cnVjdG9yKHQsZSl7aWYoRG4ubGVuZ3RoKXtjb25zdCBuPURuLnBvcCgpO09uKG4sdCxlKSx0PW47fWVsc2UgdD1uZXcgY2xhc3N7Y29uc3RydWN0b3IodCxlKXt0aGlzLmg9bnVsbCx0aGlzLm09ITEsdGhpcy5nPXRoaXMubD10aGlzLmo9MCxPbih0aGlzLHQsZSk7fWNsZWFyKCl7dGhpcy5oPW51bGwsdGhpcy5tPSExLHRoaXMuZz10aGlzLmw9dGhpcy5qPTAsdGhpcy5kYT0hMTt9fSh0LGUpO3RoaXMuZz10LHRoaXMubD10aGlzLmcuZyx0aGlzLmg9dGhpcy5tPS0xLHRoaXMubyhlKTt9byh7aWE6dD0hMX09e30pe3RoaXMuaWE9dDt9fShuLHIpO3RyeXtjb25zdCByPW5ldyB0LHM9ci51O21yKGUpKHMsbik7dmFyIGk9cjt9ZmluYWxseXtuLmcuY2xlYXIoKSxuLm09LTEsbi5oPS0xLFduLmxlbmd0aDwxMDAmJlduLnB1c2gobik7fXJldHVybiBpfX1mdW5jdGlvbiBiaSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtjb25zdCBlPW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMubD1bXSx0aGlzLmg9MCx0aGlzLmc9bmV3IGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5nPVtdO31sZW5ndGgoKXtyZXR1cm4gdGhpcy5nLmxlbmd0aH1lbmQoKXtjb25zdCB0PXRoaXMuZztyZXR1cm4gdGhpcy5nPVtdLHR9fTt9fTtCcih0aGlzLnUsZSxJcih0KSksb3IoZSxlLmcuZW5kKCkpO2NvbnN0IG49bmV3IFVpbnQ4QXJyYXkoZS5oKSxyPWUubCxpPXIubGVuZ3RoO2xldCBzPTA7Zm9yKGxldCB0PTA7dDxpO3QrKyl7Y29uc3QgZT1yW3RdO24uc2V0KGUscykscys9ZS5sZW5ndGg7fXJldHVybiBlLmw9W25dLG59fXZhciBraT1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LFNpPVswLGRpLEdyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDI9PT10LmgmJihYcihlLG4sKHQ9WG4odCkpPT09VSgpP3ZvaWQgMDp0KSwhMCl9KSwoZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPWUpe2lmKGUgaW5zdGFuY2VvZiBZbil7Y29uc3Qgcj1lLlJhO3JldHVybiB2b2lkKHImJihlPXIoZSksbnVsbCE9ZSYmdXIodCxuLFNuKGUpLmJ1ZmZlcikpKX1pZihBcnJheS5pc0FycmF5KGUpKXJldHVybn1Kcih0LGUsbik7fSkpXSx4aT1bMCxhaSxFaSx1aSwtMSxoaSxFaSwtMV0sTGk9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7fX0sRmk9WzAsdWkscGksdWksRWksLTEsanIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gKDA9PT10Lmh8fDI9PT10LmgpJiYoZT1YZShlLGV0KGUpLG4sMiwhMSksMj09dC5oP0huKHQsUG4sZSk6ZS5wdXNoKEZuKHQuZykpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9cHIoJHQsZSkpJiZlLmxlbmd0aCl7bj1ocih0LG4pO2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKWlyKHQuZyxlW25dKTtjcih0LG4pO319KSkscGksLTEsWzAsdWksLTFdLEVpLHVpXSxSaT1bMCxwaSwtMl0sTWk9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7fX0sSWk9WzBdLFBpPVswLGFpLHVpLDEsdWksLTNdLE9pPVswLHBpLHVpLC0xLGFpLFswLFsxLDIsMyw0LDUsNl0seWksSWkseWksRmkseWksUmkseWksUGkseWkseGkseWksWzAscGksLTJdXSxbMCxwaV0sdWksWzAsWzEsM10sWzIsNF0seWksWzAsaGldLC0xLHlpLFswLGZpXSwtMSxRcixbMCxwaSwtMV1dLHBpXSxDaT1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsMik7fX0sVWk9e30sTmk9VWkuTz17fTtVaVszMzY3ODM4NjNdPU9pLE5pWzMzNjc4Mzg2M109MTt2YXIgRGk9WzAsc2ksLTEsbGksLTMsc2ksaGksZGksY2ksc2ksLTEsbGksY2ksbGksLTIsZGldO2Z1bmN0aW9uIEJpKHQsZSl7SmUodCwyLHJlKGUpLCIiKTt9ZnVuY3Rpb24gR2kodCxlKXtaZSh0LnUsMyxuZSxlKTt9ZnVuY3Rpb24gamkodCxlKXtaZSh0LnUsNCxuZSxlKTt9dmFyIFZpPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCw1MDApO31vKHQpe3JldHVybiB1bih0aGlzLDAsNyx0KX19LFhpPVstMSx7Tzp7fX1dLEhpPVswLHBpLDEsWGldLFdpPVswLHBpLGZpLFhpXTtmdW5jdGlvbiB6aSh0LGUpe3BuKHQsMSxWaSxlKTt9ZnVuY3Rpb24gS2kodCxlKXtaZSh0LnUsMTAsbmUsZSk7fWZ1bmN0aW9uIFlpKHQsZSl7WmUodC51LDE1LG5lLGUpO312YXIgJGk9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LDUwMCk7fW8odCl7cmV0dXJuIHVuKHRoaXMsMCwxMDAxLHQpfX0scWk9Wy01MDAsUXIsWy01MDAsZGksLTEsZmksLTMsWy0yLFVpLHVpXSxRcixTaSxjaSwtMSxIaSxXaSxRcixbMCxkaSxsaV0sZGksRGksY2ksZmksOTg3LGZpXSw0LFFyLFstNTAwLHBpLC0xLFstMSx7Tzp7fX1dLDk5OCxwaV0sUXIsWy01MDAscGksZmksLTEsWy0yLHtPOnt9fSx1aV0sOTk3LGZpLC0xXSxjaSxRcixbLTUwMCxwaSxmaSxYaSw5OTgsZmldLGZpLGNpLEhpLFdpLFFyLFswLGRpLC0xLFhpXSxmaSwtMixEaSxkaSwtMSxsaSw5NzksWGksUXIsU2ldOyRpLnByb3RvdHlwZS5nPWJpKHFpKTt2YXIgSmk9QWkoJGkscWkpLFppPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sUWk9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9Zygpe3JldHVybiBjbih0aGlzLFppLDEpfX0sdHM9WzAsUXIsWzAsYWksZWkscGksLTFdXSxlcz1BaShRaSx0cyksbnM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxycz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LGlzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fWgoKXtyZXR1cm4gYW4odGhpcyxucywyKX1nKCl7cmV0dXJuIGNuKHRoaXMscnMsNSl9fSxzcz1BaShjbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LFswLGZpLGhpLHJpLFswLEVpLFswLGFpLC0zXSxbMCxlaSwtM10sWzAsYWksLTEsWzAsUXIsWzAsYWksLTJdXV0sUXIsWzAsZWksLTEscGksZWldXSxwaSwtMSxpaSxRcixbMCxhaSxlaV0sZmksaWldKSxvcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LGFzPUFpKGNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sWzAsUXIsWzAsZWksLTRdXSksaHM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxjcz1BaShjbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LFswLFFyLFswLGVpLC00XV0pLHVzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sbHM9WzAsYWksLTEscmksRWldLGZzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IoKXtzdXBlcigpO319O2ZzLnByb3RvdHlwZS5nPWJpKFswLGVpLC00LGlpXSk7dmFyIGRzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0scHM9QWkoY2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxbMCxRcixbMCwxLGFpLHBpLHRzXSxpaV0pLGdzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sbXM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9cWEoKXtjb25zdCB0PVdlKHRoaXMpO3JldHVybiBudWxsPT10P1UoKTp0fX0seXM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxfcz1bMSwyXSx2cz1BaShjbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LFswLFFyLFswLF9zLHlpLFswLHJpXSx5aSxbMCxfaV0sYWkscGldLGlpXSksRXM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSx3cz1bMCxwaSxhaSxlaSxmaSwtMV0sVHM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxBcz1bMCx1aSwtMV0sYnM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxrcz1bMSwyLDMsNCw1XSxTcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO31nKCl7cmV0dXJuIG51bGwhPVdlKHRoaXMpfWgoKXtyZXR1cm4gbnVsbCE9aWUoRGUodGhpcywyKSl9fSx4cz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO31nKCl7cmV0dXJuIHp0KERlKHRoaXMsMikpPz8hMX19LExzPVswLF9pLHBpLFswLGFpLGlpLC0xXSxbMCxvaSxpaV1dLEZzPVswLExzLHVpLFswLGtzLHlpLFBpLHlpLEZpLHlpLHhpLHlpLElpLHlpLFJpXSxFaV0sUnM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxNcz1bMCxGcyxlaSwtMSxhaV0sSXM9VGkoNTAyMTQxODk3LFJzKTtVaVs1MDIxNDE4OTddPU1zLE5pWzUwMjE0MTg5N109MTt2YXIgUHM9WzAsTHNdO1VpWzUxMjQ5OTIwMF09UHM7dmFyIE9zPVswLFBzXTtVaVs1MTU3MjM1MDZdPU9zO3ZhciBDcz1BaShjbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LFswLFswLEVpLC0xLG5pLHZpXSxsc10pLFVzPVswLEZzXTtVaVs1MDg5ODE3NjhdPVVzO3ZhciBOcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LERzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sQnM9WzAsRnMsZWksVXMsdWldLEdzPVswLEZzLE1zLEJzLGVpLE9zXTtVaVs1MDg5NjgxNDldPUJzO3ZhciBqcz1UaSg1MDg5NjgxNTAsRHMpO1VpWzUwODk2ODE1MF09R3MsTmlbNTA4OTY4MTUwXT0xLE5pWzUwODk2ODE0OV09MTt2YXIgVnM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxYcz1UaSg1MTM5MTYyMjAsVnMpO1VpWzUxMzkxNjIyMF09WzAsRnMsR3MsYWldLE5pWzUxMzkxNjIyMF09MTt2YXIgSHM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9aCgpe3JldHVybiBhbih0aGlzLEVzLDIpfWcoKXtqZSh0aGlzLDIpO319LFdzPVswLEZzLHdzXTtVaVs0Nzg4MjU0NjVdPVdzLE5pWzQ3ODgyNTQ2NV09MTt2YXIgenM9WzAsRnNdO1VpWzQ3ODgyNTQyMl09enM7dmFyIEtzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sWXM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSwkcz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LHFzPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sSnM9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxacz1bMCxGcyx6cyxXcywtMV0sUXM9WzAsRnMsZWksYWldLHRvPVswLEZzLGVpXSxlbz1bMCxGcyxRcyx0byxlaV0sbm89WzAsRnMsZW8sWnNdO1VpWzQ2MzM3MDQ1Ml09WnMsVWlbNDY0ODY0Mjg4XT1RcyxVaVs0NzQ0NzI0NzBdPXRvO3ZhciBybz1UaSg0NjI3MTMyMDIscXMpO1VpWzQ2MjcxMzIwMl09ZW87dmFyIGlvPVRpKDQ3OTA5NzA1NCxKcyk7VWlbNDc5MDk3MDU0XT1ubyxOaVs0NzkwOTcwNTRdPTEsTmlbNDYzMzcwNDUyXT0xLE5pWzQ2NDg2NDI4OF09MSxOaVs0NjI3MTMyMDJdPTEsTmlbNDc0NDcyNDcwXT0xO3ZhciBzbz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LG9vPWNsYXNzIGV4dGVuZHMgWW57Y29uc3RydWN0b3IodCl7c3VwZXIodCk7fX0sYW89Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxobz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt9fSxjbz1bMCxGcyxlaSwtMSxhaV0sdW89WzAsRnMsZWksdWldO2hvLnByb3RvdHlwZS5nPWJpKFswLEZzLHRvLFswLEZzXSxNcyxCcyxjbyx1b10pLFVpWzUxNDc3NDgxM109Y28sVWlbNTE4OTI4Mzg0XT11bzt2YXIgbG89Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxmbz1UaSg0NTYzODMzODMsbG8pO1VpWzQ1NjM4MzM4M109WzAsRnMsd3NdLE5pWzQ1NjM4MzM4M109MTt2YXIgcG89Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxnbz1UaSg0NzYzNDgxODcscG8pO1VpWzQ3NjM0ODE4N109WzAsRnMsQXNdLE5pWzQ3NjM0ODE4N109MTt2YXIgbW89Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSx5bz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LF9vPVswLEVpLC0xXSx2bz1UaSg0NTgxMDU4NzYsY2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9Zygpe3ZhciB0PXRoaXMudTtjb25zdCBlPWV0KHQpO2NvbnN0IG49MiZlO3JldHVybiB0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj15bztjb25zdCBpPTImZTtsZXQgcz0hMTtpZihudWxsPT1uKXtpZihpKXJldHVybiBMZSgpO249W107fWVsc2UgaWYobi5jb25zdHJ1Y3Rvcj09PUFlKXtpZigwPT0oMiZuLkwpfHxpKXJldHVybiBuO249bi5aKCk7fWVsc2UgQXJyYXkuaXNBcnJheShuKT9zPSEhKDImdHQobikpOm49W107aWYoaSl7aWYoIW4ubGVuZ3RoKXJldHVybiBMZSgpO3N8fChzPSEwLHJ0KG4pKTt9ZWxzZSBzJiYocz0hMSxuPXFlKG4pKTtyZXR1cm4gc3x8KDY0JnR0KG4pP1EobiwzMik6MzImZSYmWihuLDMyKSksVmUodCxlLDIscj1uZXcgQWUobixyLG9lLHZvaWQgMCksITEpLHJ9KHQsZSxHZSh0LGUsMikpLCFuJiZ5byYmKHQudGE9ITApLHR9fSk7VWlbNDU4MTA1ODc2XT1bMCxfbyxIcixbITAsaWksWzAscGksLTEsZmldXV0sTmlbNDU4MTA1ODc2XT0xO3ZhciBFbz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LHdvPVRpKDQ1ODEwNTc1OCxFbyk7VWlbNDU4MTA1NzU4XT1bMCxGcyxwaSxfb10sTmlbNDU4MTA1NzU4XT0xO3ZhciBUbz1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LEFvPVRpKDQ0MzQ0MjA1OCxUbyk7VWlbNDQzNDQyMDU4XT1bMCxGcyxwaSxhaSxlaSxmaSwtMV0sTmlbNDQzNDQyMDU4XT0xLE5pWzUxNDc3NDgxM109MTt2YXIgYm89Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt9fSxrbz1UaSg1MTY1ODcyMzAsYm8pO2Z1bmN0aW9uIFNvKHQsZSl7cmV0dXJuIGU9ZT9lLmNsb25lKCk6bmV3IEVzLHZvaWQgMCE9PXQuZGlzcGxheU5hbWVzTG9jYWxlP2plKGUsMSxyZSh0LmRpc3BsYXlOYW1lc0xvY2FsZSkpOnZvaWQgMD09PXQuZGlzcGxheU5hbWVzTG9jYWxlJiZqZShlLDEpLHZvaWQgMCE9PXQubWF4UmVzdWx0cz9FbihlLDIsdC5tYXhSZXN1bHRzKToibWF4UmVzdWx0cyJpbiB0JiZqZShlLDIpLHZvaWQgMCE9PXQuc2NvcmVUaHJlc2hvbGQ/d24oZSwzLHQuc2NvcmVUaHJlc2hvbGQpOiJzY29yZVRocmVzaG9sZCJpbiB0JiZqZShlLDMpLHZvaWQgMCE9PXQuY2F0ZWdvcnlBbGxvd2xpc3Q/VG4oZSw0LHQuY2F0ZWdvcnlBbGxvd2xpc3QpOiJjYXRlZ29yeUFsbG93bGlzdCJpbiB0JiZqZShlLDQpLHZvaWQgMCE9PXQuY2F0ZWdvcnlEZW55bGlzdD9UbihlLDUsdC5jYXRlZ29yeURlbnlsaXN0KToiY2F0ZWdvcnlEZW55bGlzdCJpbiB0JiZqZShlLDUpLGV9ZnVuY3Rpb24geG8odCxlPS0xLG49IiIpe3JldHVybiB7Y2F0ZWdvcmllczp0Lm1hcCgodD0+KHtpbmRleDpnbihtbih0LDEpLDApPz8tMSxzY29yZTp5bih0LDIpPz8wLGNhdGVnb3J5TmFtZTpfbih0LDMpPz8iIixkaXNwbGF5TmFtZTpfbih0LDQpPz8iIn0pKSksaGVhZEluZGV4OmUsaGVhZE5hbWU6bn19ZnVuY3Rpb24gTG8odCl7dmFyIGU9emUodCwzLFd0KSxuPXplKHQsMiwkdCkscj16ZSh0LDEsaWUpLGk9emUodCw5LGllKTtjb25zdCBzPXtjYXRlZ29yaWVzOltdLGtleXBvaW50czpbXX07Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspcy5jYXRlZ29yaWVzLnB1c2goe3Njb3JlOmVbdF0saW5kZXg6blt0XT8/LTEsY2F0ZWdvcnlOYW1lOnJbdF0/PyIiLGRpc3BsYXlOYW1lOmlbdF0/PyIifSk7aWYoKGU9YW4odCxpcyw0KT8uaCgpKSYmKHMuYm91bmRpbmdCb3g9e29yaWdpblg6bW4oZSwxKT8/MCxvcmlnaW5ZOm1uKGUsMik/PzAsd2lkdGg6bW4oZSwzKT8/MCxoZWlnaHQ6bW4oZSw0KT8/MCxhbmdsZTowfSksYW4odCxpcyw0KT8uZygpLmxlbmd0aClmb3IoY29uc3QgZSBvZiBhbih0LGlzLDQpLmcoKSlzLmtleXBvaW50cy5wdXNoKHt4OkhlKGUsMSk/PzAseTpIZShlLDIpPz8wLHNjb3JlOkhlKGUsNCk/PzAsbGFiZWw6aWUoRGUoZSwzKSk/PyIifSk7cmV0dXJuIHN9ZnVuY3Rpb24gRm8odCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgbiBvZiBjbih0LGhzLDEpKWUucHVzaCh7eDp5bihuLDEpPz8wLHk6eW4obiwyKT8/MCx6OnluKG4sMyk/PzAsdmlzaWJpbGl0eTp5bihuLDQpPz8wfSk7cmV0dXJuIGV9ZnVuY3Rpb24gUm8odCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgbiBvZiBjbih0LG9zLDEpKWUucHVzaCh7eDp5bihuLDEpPz8wLHk6eW4obiwyKT8/MCx6OnluKG4sMyk/PzAsdmlzaWJpbGl0eTp5bihuLDQpPz8wfSk7cmV0dXJuIGV9ZnVuY3Rpb24gTW8odCl7cmV0dXJuIEFycmF5LmZyb20odCwodD0+dD4xMjc/dC0yNTY6dCkpfWZ1bmN0aW9uIElvKHQsZSl7aWYodC5sZW5ndGghPT1lLmxlbmd0aCl0aHJvdyBFcnJvcihgQ2Fubm90IGNvbXB1dGUgY29zaW5lIHNpbWlsYXJpdHkgYmV0d2VlbiBlbWJlZGRpbmdzIG9mIGRpZmZlcmVudCBzaXplcyAoJHt0Lmxlbmd0aH0gdnMuICR7ZS5sZW5ndGh9KS5gKTtsZXQgbj0wLHI9MCxpPTA7Zm9yKGxldCBzPTA7czx0Lmxlbmd0aDtzKyspbis9dFtzXSplW3NdLHIrPXRbc10qdFtzXSxpKz1lW3NdKmVbc107aWYocjw9MHx8aTw9MCl0aHJvdyBFcnJvcigiQ2Fubm90IGNvbXB1dGUgY29zaW5lIHNpbWlsYXJpdHkgb24gZW1iZWRkaW5nIHdpdGggMCBub3JtLiIpO3JldHVybiBuL01hdGguc3FydChyKmkpfWxldCBQbztVaVs1MTY1ODcyMzBdPVswLEZzLGNvLHVvLGVpXSxOaVs1MTY1ODcyMzBdPTEsTmlbNTE4OTI4Mzg0XT0xO2NvbnN0IE9vPW5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDUsMSw5NiwwLDEsMTIzLDMsMiwxLDAsMTAsMTAsMSw4LDAsNjUsMCwyNTMsMTUsMjUzLDk4LDExXSk7YXN5bmMgZnVuY3Rpb24gQ28oKXtpZih2b2lkIDA9PT1Qbyl0cnl7YXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoT28pLFBvPSEwO31jYXRjaHtQbz0hMTt9cmV0dXJuIFBvfWFzeW5jIGZ1bmN0aW9uIFVvKHQsZT0iIil7Y29uc3Qgbj1hd2FpdCBDbygpPyJ3YXNtX2ludGVybmFsIjoid2FzbV9ub3NpbWRfaW50ZXJuYWwiO3JldHVybiB7d2FzbUxvYWRlclBhdGg6YCR7ZX0vJHt0fV8ke259LmpzYCx3YXNtQmluYXJ5UGF0aDpgJHtlfS8ke3R9XyR7bn0ud2FzbWB9fXZhciBObz1jbGFzc3t9O2Z1bmN0aW9uIERvKCl7dmFyIHQ9bmF2aWdhdG9yO3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIE9mZnNjcmVlbkNhbnZhcyYmKCFmdW5jdGlvbih0PW5hdmlnYXRvcil7cmV0dXJuICh0PXQudXNlckFnZW50KS5pbmNsdWRlcygiU2FmYXJpIikmJiF0LmluY2x1ZGVzKCJDaHJvbWUiKX0odCl8fCEhKCh0PXQudXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXC8oW1xkXSspLipTYWZhcmkvKSkmJnQubGVuZ3RoPj0xJiZOdW1iZXIodFsxXSk+PTE3KSl9YXN5bmMgZnVuY3Rpb24gQm8odCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGltcG9ydFNjcmlwdHMpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7cmV0dXJuIGUuc3JjPXQudG9TdHJpbmcoKSxlLmNyb3NzT3JpZ2luPSJhbm9ueW1vdXMiLG5ldyBQcm9taXNlKCgodCxuKT0+e2UuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsKCgpPT57dCgpO30pLCExKSxlLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIiwodD0+e24odCk7fSksITEpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSk7fSkpfWltcG9ydFNjcmlwdHModC50b1N0cmluZygpKTt9ZnVuY3Rpb24gR28odCl7cmV0dXJuIHZvaWQgMCE9PXQudmlkZW9XaWR0aD9bdC52aWRlb1dpZHRoLHQudmlkZW9IZWlnaHRdOnZvaWQgMCE9PXQubmF0dXJhbFdpZHRoP1t0Lm5hdHVyYWxXaWR0aCx0Lm5hdHVyYWxIZWlnaHRdOnZvaWQgMCE9PXQuZGlzcGxheVdpZHRoP1t0LmRpc3BsYXlXaWR0aCx0LmRpc3BsYXlIZWlnaHRdOlt0LndpZHRoLHQuaGVpZ2h0XX1mdW5jdGlvbiBqbyh0LGUsbil7dC5tfHxjb25zb2xlLmVycm9yKCJObyB3YXNtIG11bHRpc3RyZWFtIHN1cHBvcnQgZGV0ZWN0ZWQ6IGVuc3VyZSBkZXBlbmRlbmN5IGluY2x1c2lvbiBvZiA6Z2xfZ3JhcGhfcnVubmVyX2ludGVybmFsX211bHRpX2lucHV0IHRhcmdldCIpLG4oZT10Lmkuc3RyaW5nVG9OZXdVVEY4KGUpKSx0LmkuX2ZyZWUoZSk7fWZ1bmN0aW9uIFZvKHQsZSxuKXtpZighdC5pLmNhbnZhcyl0aHJvdyBFcnJvcigiTm8gT3BlbkdMIGNhbnZhcyBjb25maWd1cmVkLiIpO2lmKG4/dC5pLl9iaW5kVGV4dHVyZVRvU3RyZWFtKG4pOnQuaS5fYmluZFRleHR1cmVUb0NhbnZhcygpLCEobj10LmkuY2FudmFzLmdldENvbnRleHQoIndlYmdsMiIpfHx0LmkuY2FudmFzLmdldENvbnRleHQoIndlYmdsIikpKXRocm93IEVycm9yKCJGYWlsZWQgdG8gb2J0YWluIFdlYkdMIGNvbnRleHQgZnJvbSB0aGUgcHJvdmlkZWQgY2FudmFzLiBgZ2V0Q29udGV4dCgpYCBzaG91bGQgb25seSBiZSBpbnZva2VkIHdpdGggYHdlYmdsYCBvciBgd2ViZ2wyYC4iKTt0LmkuZ3B1T3JpZ2luRm9yV2ViVGV4dHVyZXNJc0JvdHRvbUxlZnQmJm4ucGl4ZWxTdG9yZWkobi5VTlBBQ0tfRkxJUF9ZX1dFQkdMLCEwKSxuLnRleEltYWdlMkQobi5URVhUVVJFXzJELDAsbi5SR0JBLG4uUkdCQSxuLlVOU0lHTkVEX0JZVEUsZSksdC5pLmdwdU9yaWdpbkZvcldlYlRleHR1cmVzSXNCb3R0b21MZWZ0JiZuLnBpeGVsU3RvcmVpKG4uVU5QQUNLX0ZMSVBfWV9XRUJHTCwhMSk7Y29uc3RbcixpXT1HbyhlKTtyZXR1cm4gIXQubHx8cj09PXQuaS5jYW52YXMud2lkdGgmJmk9PT10LmkuY2FudmFzLmhlaWdodHx8KHQuaS5jYW52YXMud2lkdGg9cix0LmkuY2FudmFzLmhlaWdodD1pKSxbcixpXX1mdW5jdGlvbiBYbyh0LGUsbil7dC5tfHxjb25zb2xlLmVycm9yKCJObyB3YXNtIG11bHRpc3RyZWFtIHN1cHBvcnQgZGV0ZWN0ZWQ6IGVuc3VyZSBkZXBlbmRlbmN5IGluY2x1c2lvbiBvZiA6Z2xfZ3JhcGhfcnVubmVyX2ludGVybmFsX211bHRpX2lucHV0IHRhcmdldCIpO2NvbnN0IHI9bmV3IFVpbnQzMkFycmF5KGUubGVuZ3RoKTtmb3IobGV0IG49MDtuPGUubGVuZ3RoO24rKylyW25dPXQuaS5zdHJpbmdUb05ld1VURjgoZVtuXSk7ZT10LmkuX21hbGxvYyg0KnIubGVuZ3RoKSx0LmkuSEVBUFUzMi5zZXQocixlPj4yKSxuKGUpO2Zvcihjb25zdCBlIG9mIHIpdC5pLl9mcmVlKGUpO3QuaS5fZnJlZShlKTt9ZnVuY3Rpb24gSG8odCxlLG4pe3QuaS5zaW1wbGVMaXN0ZW5lcnM9dC5pLnNpbXBsZUxpc3RlbmVyc3x8e30sdC5pLnNpbXBsZUxpc3RlbmVyc1tlXT1uO31mdW5jdGlvbiBXbyh0LGUsbil7bGV0IHI9W107dC5pLnNpbXBsZUxpc3RlbmVycz10Lmkuc2ltcGxlTGlzdGVuZXJzfHx7fSx0Lmkuc2ltcGxlTGlzdGVuZXJzW2VdPSh0LGUsaSk9PntlPyhuKHIsaSkscj1bXSk6ci5wdXNoKHQpO307fU5vLmZvclZpc2lvblRhc2tzPWZ1bmN0aW9uKHQpe3JldHVybiBVbygidmlzaW9uIix0KX0sTm8uZm9yVGV4dFRhc2tzPWZ1bmN0aW9uKHQpe3JldHVybiBVbygidGV4dCIsdCl9LE5vLmZvckdlbkFpRXhwZXJpbWVudGFsVGFza3M9ZnVuY3Rpb24odCl7cmV0dXJuIFVvKCJnZW5haV9leHBlcmltZW50YWwiLHQpfSxOby5mb3JHZW5BaVRhc2tzPWZ1bmN0aW9uKHQpe3JldHVybiBVbygiZ2VuYWkiLHQpfSxOby5mb3JBdWRpb1Rhc2tzPWZ1bmN0aW9uKHQpe3JldHVybiBVbygiYXVkaW8iLHQpfSxOby5pc1NpbWRTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gQ28oKX07YXN5bmMgZnVuY3Rpb24gem8odCxlLG4scil7cmV0dXJuIHQ9YXdhaXQoYXN5bmModCxlLG4scixpKT0+e2lmKGUmJmF3YWl0IEJvKGUpLCFzZWxmLk1vZHVsZUZhY3RvcnkpdGhyb3cgRXJyb3IoIk1vZHVsZUZhY3Rvcnkgbm90IHNldC4iKTtpZihuJiYoYXdhaXQgQm8obiksIXNlbGYuTW9kdWxlRmFjdG9yeSkpdGhyb3cgRXJyb3IoIk1vZHVsZUZhY3Rvcnkgbm90IHNldC4iKTtyZXR1cm4gc2VsZi5Nb2R1bGUmJmkmJigoZT1zZWxmLk1vZHVsZSkubG9jYXRlRmlsZT1pLmxvY2F0ZUZpbGUsaS5tYWluU2NyaXB0VXJsT3JCbG9iJiYoZS5tYWluU2NyaXB0VXJsT3JCbG9iPWkubWFpblNjcmlwdFVybE9yQmxvYikpLGk9YXdhaXQgc2VsZi5Nb2R1bGVGYWN0b3J5KHNlbGYuTW9kdWxlfHxpKSxzZWxmLk1vZHVsZUZhY3Rvcnk9c2VsZi5Nb2R1bGU9dm9pZCAwLG5ldyB0KGkscil9KSh0LG4ud2FzbUxvYWRlclBhdGgsbi5hc3NldExvYWRlclBhdGgsZSx7bG9jYXRlRmlsZTp0PT50LmVuZHNXaXRoKCIud2FzbSIpP24ud2FzbUJpbmFyeVBhdGgudG9TdHJpbmcoKTpuLmFzc2V0QmluYXJ5UGF0aCYmdC5lbmRzV2l0aCgiLmRhdGEiKT9uLmFzc2V0QmluYXJ5UGF0aC50b1N0cmluZygpOnR9KSxhd2FpdCB0Lm8ociksdH1mdW5jdGlvbiBLbyh0LGUpe2NvbnN0IG49YW4odC5iYXNlT3B0aW9ucyxTcywxKXx8bmV3IFNzOyJzdHJpbmciPT10eXBlb2YgZT8oamUobiwyLHJlKGUpKSxqZShuLDEpKTplIGluc3RhbmNlb2YgVWludDhBcnJheSYmKGplKG4sMSxsdChlLCExLCExKSksamUobiwyKSksdW4odC5iYXNlT3B0aW9ucywwLDEsbik7fWZ1bmN0aW9uIFlvKHQpe3RyeXtjb25zdCBlPXQuRy5sZW5ndGg7aWYoMT09PWUpdGhyb3cgRXJyb3IodC5HWzBdLm1lc3NhZ2UpO2lmKGU+MSl0aHJvdyBFcnJvcigiRW5jb3VudGVyZWQgbXVsdGlwbGUgZXJyb3JzOiAiK3QuRy5tYXAoKHQ9PnQubWVzc2FnZSkpLmpvaW4oIiwgIikpfWZpbmFsbHl7dC5HPVtdO319ZnVuY3Rpb24gJG8odCxlKXt0LkI9TWF0aC5tYXgodC5CLGUpO31mdW5jdGlvbiBxbyh0LGUpe3QuQT1uZXcgVmksQmkodC5BLCJQYXNzVGhyb3VnaENhbGN1bGF0b3IiKSxHaSh0LkEsImZyZWVfbWVtb3J5IiksamkodC5BLCJmcmVlX21lbW9yeV91bnVzZWRfb3V0IiksS2koZSwiZnJlZV9tZW1vcnkiKSx6aShlLHQuQSk7fWZ1bmN0aW9uIEpvKHQsZSl7R2kodC5BLGUpLGppKHQuQSxlKyJfdW51c2VkX291dCIpO31mdW5jdGlvbiBabyh0KXt0LmcuYWRkQm9vbFRvU3RyZWFtKCEwLCJmcmVlX21lbW9yeSIsdC5CKTt9dmFyIFFvPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuZz10LHRoaXMuRz1bXSx0aGlzLkI9MCx0aGlzLmcuc2V0QXV0b1JlbmRlclRvU2NyZWVuKCExKTt9bCh0LGU9ITApe2lmKGUpe2NvbnN0IGU9dC5iYXNlT3B0aW9uc3x8e307aWYodC5iYXNlT3B0aW9ucz8ubW9kZWxBc3NldEJ1ZmZlciYmdC5iYXNlT3B0aW9ucz8ubW9kZWxBc3NldFBhdGgpdGhyb3cgRXJyb3IoIkNhbm5vdCBzZXQgYm90aCBiYXNlT3B0aW9ucy5tb2RlbEFzc2V0UGF0aCBhbmQgYmFzZU9wdGlvbnMubW9kZWxBc3NldEJ1ZmZlciIpO2lmKCEoYW4odGhpcy5iYXNlT3B0aW9ucyxTcywxKT8uZygpfHxhbih0aGlzLmJhc2VPcHRpb25zLFNzLDEpPy5oKCl8fHQuYmFzZU9wdGlvbnM/Lm1vZGVsQXNzZXRCdWZmZXJ8fHQuYmFzZU9wdGlvbnM/Lm1vZGVsQXNzZXRQYXRoKSl0aHJvdyBFcnJvcigiRWl0aGVyIGJhc2VPcHRpb25zLm1vZGVsQXNzZXRQYXRoIG9yIGJhc2VPcHRpb25zLm1vZGVsQXNzZXRCdWZmZXIgbXVzdCBiZSBzZXQiKTtpZihmdW5jdGlvbih0LGUpe2xldCBuPWFuKHQuYmFzZU9wdGlvbnMsYnMsMyk7aWYoIW4pe3ZhciByPW49bmV3IGJzLGk9bmV3IE1pO2xuKHIsNCxrcyxpKTt9ImRlbGVnYXRlImluIGUmJigiR1BVIj09PWUuZGVsZWdhdGU/KGU9bixyPW5ldyBMaSxsbihlLDIsa3MscikpOihlPW4scj1uZXcgTWksbG4oZSw0LGtzLHIpKSksdW4odC5iYXNlT3B0aW9ucywwLDMsbik7fSh0aGlzLGUpLGUubW9kZWxBc3NldFBhdGgpcmV0dXJuIGZldGNoKGUubW9kZWxBc3NldFBhdGgudG9TdHJpbmcoKSkudGhlbigodD0+e2lmKHQub2spcmV0dXJuIHQuYXJyYXlCdWZmZXIoKTt0aHJvdyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIG1vZGVsOiAke2UubW9kZWxBc3NldFBhdGh9ICgke3Quc3RhdHVzfSlgKX0pKS50aGVuKCh0PT57dHJ5e3RoaXMuZy5pLkZTX3VubGluaygiL21vZGVsLmRhdCIpO31jYXRjaHt9dGhpcy5nLmkuRlNfY3JlYXRlRGF0YUZpbGUoIi8iLCJtb2RlbC5kYXQiLG5ldyBVaW50OEFycmF5KHQpLCEwLCExLCExKSxLbyh0aGlzLCIvbW9kZWwuZGF0IiksdGhpcy5tKCksdGhpcy5JKCk7fSkpO2lmKGUubW9kZWxBc3NldEJ1ZmZlciBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpS28odGhpcyxlLm1vZGVsQXNzZXRCdWZmZXIpO2Vsc2UgaWYoZS5tb2RlbEFzc2V0QnVmZmVyKXJldHVybiBhc3luYyBmdW5jdGlvbih0KXtjb25zdCBlPVtdO2Zvcih2YXIgbj0wOzspe2NvbnN0e2RvbmU6cix2YWx1ZTppfT1hd2FpdCB0LnJlYWQoKTtpZihyKWJyZWFrO2UucHVzaChpKSxuKz1pLmxlbmd0aDt9aWYoMD09PWUubGVuZ3RoKXJldHVybiBuZXcgVWludDhBcnJheSgwKTtpZigxPT09ZS5sZW5ndGgpcmV0dXJuIGVbMF07dD1uZXcgVWludDhBcnJheShuKSxuPTA7Zm9yKGNvbnN0IHIgb2YgZSl0LnNldChyLG4pLG4rPXIubGVuZ3RoO3JldHVybiB0fShlLm1vZGVsQXNzZXRCdWZmZXIpLnRoZW4oKHQ9PntLbyh0aGlzLHQpLHRoaXMubSgpLHRoaXMuSSgpO30pKX1yZXR1cm4gdGhpcy5tKCksdGhpcy5JKCksUHJvbWlzZS5yZXNvbHZlKCl9SSgpe31mYSgpe2xldCB0O2lmKHRoaXMuZy5mYSgoZT0+e3Q9SmkoZSk7fSkpLCF0KXRocm93IEVycm9yKCJGYWlsZWQgdG8gcmV0cmlldmUgQ2FsY3VsYXRvckdyYXBoQ29uZmlnIik7cmV0dXJuIHR9c2V0R3JhcGgodCxlKXt0aGlzLmcuYXR0YWNoRXJyb3JMaXN0ZW5lcigoKHQsZSk9Pnt0aGlzLkcucHVzaChFcnJvcihlKSk7fSkpLHRoaXMuZy5NYSgpLHRoaXMuZy5zZXRHcmFwaCh0LGUpLHRoaXMuQT12b2lkIDAsWW8odGhpcyk7fWZpbmlzaFByb2Nlc3NpbmcoKXt0aGlzLmcuZmluaXNoUHJvY2Vzc2luZygpLFlvKHRoaXMpO31jbG9zZSgpe3RoaXMuQT12b2lkIDAsdGhpcy5nLmNsb3NlR3JhcGgoKTt9fTtmdW5jdGlvbiB0YSh0LGUpe2lmKCF0KXRocm93IEVycm9yKGBVbmFibGUgdG8gb2J0YWluIHJlcXVpcmVkIFdlYkdMIHJlc291cmNlOiAke2V9YCk7cmV0dXJuIHR9UW8ucHJvdG90eXBlLmNsb3NlPVFvLnByb3RvdHlwZS5jbG9zZSxmdW5jdGlvbihlLG4pe2U9ZS5zcGxpdCgiLiIpO3ZhciByLGk9dDtlWzBdaW4gaXx8dm9pZCAwPT09aS5leGVjU2NyaXB0fHxpLmV4ZWNTY3JpcHQoInZhciAiK2VbMF0pO2Zvcig7ZS5sZW5ndGgmJihyPWUuc2hpZnQoKSk7KWUubGVuZ3RofHx2b2lkIDA9PT1uP2k9aVtyXSYmaVtyXSE9PU9iamVjdC5wcm90b3R5cGVbcl0/aVtyXTppW3JdPXt9Omlbcl09bjt9KCJUYXNrUnVubmVyIixRbyk7Y2xhc3MgZWF7Y29uc3RydWN0b3IodCxlLG4scil7dGhpcy5nPXQsdGhpcy5oPWUsdGhpcy5tPW4sdGhpcy5sPXI7fWJpbmQoKXt0aGlzLmcuYmluZFZlcnRleEFycmF5KHRoaXMuaCk7fWNsb3NlKCl7dGhpcy5nLmRlbGV0ZVZlcnRleEFycmF5KHRoaXMuaCksdGhpcy5nLmRlbGV0ZUJ1ZmZlcih0aGlzLm0pLHRoaXMuZy5kZWxldGVCdWZmZXIodGhpcy5sKTt9fWZ1bmN0aW9uIG5hKHQsZSxuKXtjb25zdCByPXQuZztpZihuPXRhKHIuY3JlYXRlU2hhZGVyKG4pLCJGYWlsZWQgdG8gY3JlYXRlIFdlYkdMIHNoYWRlciIpLHIuc2hhZGVyU291cmNlKG4sZSksci5jb21waWxlU2hhZGVyKG4pLCFyLmdldFNoYWRlclBhcmFtZXRlcihuLHIuQ09NUElMRV9TVEFUVVMpKXRocm93IEVycm9yKGBDb3VsZCBub3QgY29tcGlsZSBXZWJHTCBzaGFkZXI6ICR7ci5nZXRTaGFkZXJJbmZvTG9nKG4pfWApO3JldHVybiByLmF0dGFjaFNoYWRlcih0Lmgsbiksbn1mdW5jdGlvbiByYSh0LGUpe2NvbnN0IG49dC5nLHI9dGEobi5jcmVhdGVWZXJ0ZXhBcnJheSgpLCJGYWlsZWQgdG8gY3JlYXRlIHZlcnRleCBhcnJheSIpO24uYmluZFZlcnRleEFycmF5KHIpO2NvbnN0IGk9dGEobi5jcmVhdGVCdWZmZXIoKSwiRmFpbGVkIHRvIGNyZWF0ZSBidWZmZXIiKTtuLmJpbmRCdWZmZXIobi5BUlJBWV9CVUZGRVIsaSksbi5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0LlApLG4udmVydGV4QXR0cmliUG9pbnRlcih0LlAsMixuLkZMT0FULCExLDAsMCksbi5idWZmZXJEYXRhKG4uQVJSQVlfQlVGRkVSLG5ldyBGbG9hdDMyQXJyYXkoWy0xLC0xLC0xLDEsMSwxLDEsLTFdKSxuLlNUQVRJQ19EUkFXKTtjb25zdCBzPXRhKG4uY3JlYXRlQnVmZmVyKCksIkZhaWxlZCB0byBjcmVhdGUgYnVmZmVyIik7cmV0dXJuIG4uYmluZEJ1ZmZlcihuLkFSUkFZX0JVRkZFUixzKSxuLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHQuSSksbi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHQuSSwyLG4uRkxPQVQsITEsMCwwKSxuLmJ1ZmZlckRhdGEobi5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShlP1swLDEsMCwwLDEsMCwxLDFdOlswLDAsMCwxLDEsMSwxLDBdKSxuLlNUQVRJQ19EUkFXKSxuLmJpbmRCdWZmZXIobi5BUlJBWV9CVUZGRVIsbnVsbCksbi5iaW5kVmVydGV4QXJyYXkobnVsbCksbmV3IGVhKG4scixpLHMpfWZ1bmN0aW9uIGlhKHQsZSl7aWYodC5nKXtpZihlIT09dC5nKXRocm93IEVycm9yKCJDYW5ub3QgY2hhbmdlIEdMIGNvbnRleHQgb25jZSBpbml0aWFsaXplZCIpfWVsc2UgdC5nPWU7fWZ1bmN0aW9uIHNhKHQsZSxuLHIpe3JldHVybiBpYSh0LGUpLHQuaHx8KHQubSgpLHQuQygpKSxuPyh0LnN8fCh0LnM9cmEodCwhMCkpLG49dC5zKToodC52fHwodC52PXJhKHQsITEpKSxuPXQudiksZS51c2VQcm9ncmFtKHQuaCksbi5iaW5kKCksdC5sKCksdD1yKCksbi5nLmJpbmRWZXJ0ZXhBcnJheShudWxsKSx0fWZ1bmN0aW9uIG9hKHQsZSxuKXtyZXR1cm4gaWEodCxlKSx0PXRhKGUuY3JlYXRlVGV4dHVyZSgpLCJGYWlsZWQgdG8gY3JlYXRlIHRleHR1cmUiKSxlLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCx0KSxlLnRleFBhcmFtZXRlcmkoZS5URVhUVVJFXzJELGUuVEVYVFVSRV9XUkFQX1MsZS5DTEFNUF9UT19FREdFKSxlLnRleFBhcmFtZXRlcmkoZS5URVhUVVJFXzJELGUuVEVYVFVSRV9XUkFQX1QsZS5DTEFNUF9UT19FREdFKSxlLnRleFBhcmFtZXRlcmkoZS5URVhUVVJFXzJELGUuVEVYVFVSRV9NSU5fRklMVEVSLG4/P2UuTElORUFSKSxlLnRleFBhcmFtZXRlcmkoZS5URVhUVVJFXzJELGUuVEVYVFVSRV9NQUdfRklMVEVSLG4/P2UuTElORUFSKSxlLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCxudWxsKSx0fWZ1bmN0aW9uIGFhKHQsZSxuKXtpYSh0LGUpLHQuQXx8KHQuQT10YShlLmNyZWF0ZUZyYW1lYnVmZmVyKCksIkZhaWxlZCB0byBjcmVhdGUgZnJhbWVidWZmZS4iKSksZS5iaW5kRnJhbWVidWZmZXIoZS5GUkFNRUJVRkZFUix0LkEpLGUuZnJhbWVidWZmZXJUZXh0dXJlMkQoZS5GUkFNRUJVRkZFUixlLkNPTE9SX0FUVEFDSE1FTlQwLGUuVEVYVFVSRV8yRCxuLDApO31mdW5jdGlvbiBoYSh0KXt0Lmc/LmJpbmRGcmFtZWJ1ZmZlcih0LmcuRlJBTUVCVUZGRVIsbnVsbCk7fXZhciBjYT1jbGFzc3tHKCl7cmV0dXJuICJcbiAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4gIHZhcnlpbmcgdmVjMiB2VGV4O1xuICB1bmlmb3JtIHNhbXBsZXIyRCBpbnB1dFRleHR1cmU7XG4gIHZvaWQgbWFpbigpIHtcbiAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoaW5wdXRUZXh0dXJlLCB2VGV4KTtcbiAgfVxuICJ9bSgpe2NvbnN0IHQ9dGhpcy5nO2lmKHRoaXMuaD10YSh0LmNyZWF0ZVByb2dyYW0oKSwiRmFpbGVkIHRvIGNyZWF0ZSBXZWJHTCBwcm9ncmFtIiksdGhpcy5jYT1uYSh0aGlzLCJcbiAgYXR0cmlidXRlIHZlYzIgYVZlcnRleDtcbiAgYXR0cmlidXRlIHZlYzIgYVRleDtcbiAgdmFyeWluZyB2ZWMyIHZUZXg7XG4gIHZvaWQgbWFpbih2b2lkKSB7XG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFWZXJ0ZXgsIDAuMCwgMS4wKTtcbiAgICB2VGV4ID0gYVRleDtcbiAgfSIsdC5WRVJURVhfU0hBREVSKSx0aGlzLmJhPW5hKHRoaXMsdGhpcy5HKCksdC5GUkFHTUVOVF9TSEFERVIpLHQubGlua1Byb2dyYW0odGhpcy5oKSwhdC5nZXRQcm9ncmFtUGFyYW1ldGVyKHRoaXMuaCx0LkxJTktfU1RBVFVTKSl0aHJvdyBFcnJvcihgRXJyb3IgZHVyaW5nIHByb2dyYW0gbGlua2luZzogJHt0LmdldFByb2dyYW1JbmZvTG9nKHRoaXMuaCl9YCk7dGhpcy5QPXQuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5oLCJhVmVydGV4IiksdGhpcy5JPXQuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5oLCJhVGV4Iik7fUMoKXt9bCgpe31jbG9zZSgpe2lmKHRoaXMuaCl7Y29uc3QgdD10aGlzLmc7dC5kZWxldGVQcm9ncmFtKHRoaXMuaCksdC5kZWxldGVTaGFkZXIodGhpcy5jYSksdC5kZWxldGVTaGFkZXIodGhpcy5iYSk7fXRoaXMuQSYmdGhpcy5nLmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuQSksdGhpcy52JiZ0aGlzLnYuY2xvc2UoKSx0aGlzLnMmJnRoaXMucy5jbG9zZSgpO319O2Z1bmN0aW9uIGZhKHQsZSl7c3dpdGNoKGUpe2Nhc2UgMDpyZXR1cm4gdC5nLmZpbmQoKHQ9PnQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSk7Y2FzZSAxOnJldHVybiB0LmcuZmluZCgodD0+dCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkpO2Nhc2UgMjpyZXR1cm4gdC5nLmZpbmQoKHQ9PiJ1bmRlZmluZWQiIT10eXBlb2YgV2ViR0xUZXh0dXJlJiZ0IGluc3RhbmNlb2YgV2ViR0xUZXh0dXJlKSk7ZGVmYXVsdDp0aHJvdyBFcnJvcihgVHlwZSBpcyBub3Qgc3VwcG9ydGVkOiAke2V9YCl9fWZ1bmN0aW9uIGRhKHQpe3ZhciBlPWZhKHQsMSk7aWYoIWUpe2lmKGU9ZmEodCwwKSllPW5ldyBGbG9hdDMyQXJyYXkoZSkubWFwKCh0PT50LzI1NSkpO2Vsc2Uge2U9bmV3IEZsb2F0MzJBcnJheSh0LndpZHRoKnQuaGVpZ2h0KTtjb25zdCByPWdhKHQpO3ZhciBuPXlhKHQpO2lmKGFhKG4scixwYSh0KSksImlQYWQgU2ltdWxhdG9yO2lQaG9uZSBTaW11bGF0b3I7aVBvZCBTaW11bGF0b3I7aVBhZDtpUGhvbmU7aVBvZCIuc3BsaXQoIjsiKS5pbmNsdWRlcyhuYXZpZ2F0b3IucGxhdGZvcm0pfHxuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCJNYWMiKSYmIm9udG91Y2hlbmQiaW4gc2VsZi5kb2N1bWVudCl7bj1uZXcgRmxvYXQzMkFycmF5KHQud2lkdGgqdC5oZWlnaHQqNCksci5yZWFkUGl4ZWxzKDAsMCx0LndpZHRoLHQuaGVpZ2h0LHIuUkdCQSxyLkZMT0FULG4pO2ZvcihsZXQgdD0wLHI9MDt0PGUubGVuZ3RoOysrdCxyKz00KWVbdF09bltyXTt9ZWxzZSByLnJlYWRQaXhlbHMoMCwwLHQud2lkdGgsdC5oZWlnaHQsci5SRUQsci5GTE9BVCxlKTt9dC5nLnB1c2goZSk7fXJldHVybiBlfWZ1bmN0aW9uIHBhKHQpe2xldCBlPWZhKHQsMik7aWYoIWUpe2NvbnN0IG49Z2EodCk7ZT1fYSh0KTtjb25zdCByPWRhKHQpLGk9bWEodCk7bi50ZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLGksdC53aWR0aCx0LmhlaWdodCwwLG4uUkVELG4uRkxPQVQsciksdmEodCk7fXJldHVybiBlfWZ1bmN0aW9uIGdhKHQpe2lmKCF0LmNhbnZhcyl0aHJvdyBFcnJvcigiQ29udmVyc2lvbiB0byBkaWZmZXJlbnQgaW1hZ2UgZm9ybWF0cyByZXF1aXJlIHRoYXQgYSBjYW52YXMgaXMgcGFzc2VkIHdoZW4gaW5pdGlhbGl6aW5nIHRoZSBpbWFnZS4iKTtyZXR1cm4gdC5ofHwodC5oPXRhKHQuY2FudmFzLmdldENvbnRleHQoIndlYmdsMiIpLCJZb3UgY2Fubm90IHVzZSBhIGNhbnZhcyB0aGF0IGlzIGFscmVhZHkgYm91bmQgdG8gYSBkaWZmZXJlbnQgdHlwZSBvZiByZW5kZXJpbmcgY29udGV4dC4iKSksdC5ofWZ1bmN0aW9uIG1hKHQpe2lmKHQ9Z2EodCksIUVhKWlmKHQuZ2V0RXh0ZW5zaW9uKCJFWFRfY29sb3JfYnVmZmVyX2Zsb2F0IikmJnQuZ2V0RXh0ZW5zaW9uKCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXIiKSYmdC5nZXRFeHRlbnNpb24oIkVYVF9mbG9hdF9ibGVuZCIpKUVhPXQuUjMyRjtlbHNlIHtpZighdC5nZXRFeHRlbnNpb24oIkVYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdCIpKXRocm93IEVycm9yKCJHUFUgZG9lcyBub3QgZnVsbHkgc3VwcG9ydCA0LWNoYW5uZWwgZmxvYXQzMiBvciBmbG9hdDE2IGZvcm1hdHMiKTtFYT10LlIxNkY7fXJldHVybiBFYX1mdW5jdGlvbiB5YSh0KXtyZXR1cm4gdC5sfHwodC5sPW5ldyBjYSksdC5sfWZ1bmN0aW9uIF9hKHQpe2NvbnN0IGU9Z2EodCk7ZS52aWV3cG9ydCgwLDAsdC53aWR0aCx0LmhlaWdodCksZS5hY3RpdmVUZXh0dXJlKGUuVEVYVFVSRTApO2xldCBuPWZhKHQsMik7cmV0dXJuIG58fChuPW9hKHlhKHQpLGUsdC5tP2UuTElORUFSOmUuTkVBUkVTVCksdC5nLnB1c2gobiksdC5qPSEwKSxlLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCxuKSxufWZ1bmN0aW9uIHZhKHQpe3QuaC5iaW5kVGV4dHVyZSh0LmguVEVYVFVSRV8yRCxudWxsKTt9dmFyIEVhLHdhPWNsYXNze2NvbnN0cnVjdG9yKHQsZSxuLHIsaSxzLG8pe3RoaXMuZz10LHRoaXMubT1lLHRoaXMuaj1uLHRoaXMuY2FudmFzPXIsdGhpcy5sPWksdGhpcy53aWR0aD1zLHRoaXMuaGVpZ2h0PW8sdGhpcy5qJiYoMD09PS0tVGEmJmNvbnNvbGUuZXJyb3IoIllvdSBzZWVtIHRvIGJlIGNyZWF0aW5nIE1QTWFzayBpbnN0YW5jZXMgd2l0aG91dCBpbnZva2luZyAuY2xvc2UoKS4gVGhpcyBsZWFrcyByZXNvdXJjZXMuIikpO31IYSgpe3JldHVybiAhIWZhKHRoaXMsMCl9bGEoKXtyZXR1cm4gISFmYSh0aGlzLDEpfVIoKXtyZXR1cm4gISFmYSh0aGlzLDIpfWthKCl7cmV0dXJuIChlPWZhKHQ9dGhpcywwKSl8fChlPWRhKHQpLGU9bmV3IFVpbnQ4QXJyYXkoZS5tYXAoKHQ9PjI1NSp0KSkpLHQuZy5wdXNoKGUpKSxlO3ZhciB0LGU7fWphKCl7cmV0dXJuIGRhKHRoaXMpfU0oKXtyZXR1cm4gcGEodGhpcyl9Y2xvbmUoKXtjb25zdCB0PVtdO2Zvcihjb25zdCBlIG9mIHRoaXMuZyl7bGV0IG47aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpbj1uZXcgVWludDhBcnJheShlKTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpbj1uZXcgRmxvYXQzMkFycmF5KGUpO2Vsc2Uge2lmKCEoZSBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZSkpdGhyb3cgRXJyb3IoYFR5cGUgaXMgbm90IHN1cHBvcnRlZDogJHtlfWApO3tjb25zdCB0PWdhKHRoaXMpLGU9eWEodGhpcyk7dC5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTEpLG49b2EoZSx0LHRoaXMubT90LkxJTkVBUjp0Lk5FQVJFU1QpLHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELG4pO2NvbnN0IHI9bWEodGhpcyk7dC50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwwLHIsdGhpcy53aWR0aCx0aGlzLmhlaWdodCwwLHQuUkVELHQuRkxPQVQsbnVsbCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbnVsbCksYWEoZSx0LG4pLHNhKGUsdCwhMSwoKCk9PntfYSh0aGlzKSx0LmNsZWFyQ29sb3IoMCwwLDAsMCksdC5jbGVhcih0LkNPTE9SX0JVRkZFUl9CSVQpLHQuZHJhd0FycmF5cyh0LlRSSUFOR0xFX0ZBTiwwLDQpLHZhKHRoaXMpO30pKSxoYShlKSx2YSh0aGlzKTt9fXQucHVzaChuKTt9cmV0dXJuIG5ldyB3YSh0LHRoaXMubSx0aGlzLlIoKSx0aGlzLmNhbnZhcyx0aGlzLmwsdGhpcy53aWR0aCx0aGlzLmhlaWdodCl9Y2xvc2UoKXt0aGlzLmomJmdhKHRoaXMpLmRlbGV0ZVRleHR1cmUoZmEodGhpcywyKSksVGE9LTE7fX07d2EucHJvdG90eXBlLmNsb3NlPXdhLnByb3RvdHlwZS5jbG9zZSx3YS5wcm90b3R5cGUuY2xvbmU9d2EucHJvdG90eXBlLmNsb25lLHdhLnByb3RvdHlwZS5nZXRBc1dlYkdMVGV4dHVyZT13YS5wcm90b3R5cGUuTSx3YS5wcm90b3R5cGUuZ2V0QXNGbG9hdDMyQXJyYXk9d2EucHJvdG90eXBlLmphLHdhLnByb3RvdHlwZS5nZXRBc1VpbnQ4QXJyYXk9d2EucHJvdG90eXBlLmthLHdhLnByb3RvdHlwZS5oYXNXZWJHTFRleHR1cmU9d2EucHJvdG90eXBlLlIsd2EucHJvdG90eXBlLmhhc0Zsb2F0MzJBcnJheT13YS5wcm90b3R5cGUubGEsd2EucHJvdG90eXBlLmhhc1VpbnQ4QXJyYXk9d2EucHJvdG90eXBlLkhhO3ZhciBUYT0yNTA7ZnVuY3Rpb24gUGEodCxlKXtzd2l0Y2goZSl7Y2FzZSAwOnJldHVybiB0LmcuZmluZCgodD0+dCBpbnN0YW5jZW9mIEltYWdlRGF0YSkpO2Nhc2UgMTpyZXR1cm4gdC5nLmZpbmQoKHQ9PiJ1bmRlZmluZWQiIT10eXBlb2YgSW1hZ2VCaXRtYXAmJnQgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcCkpO2Nhc2UgMjpyZXR1cm4gdC5nLmZpbmQoKHQ9PiJ1bmRlZmluZWQiIT10eXBlb2YgV2ViR0xUZXh0dXJlJiZ0IGluc3RhbmNlb2YgV2ViR0xUZXh0dXJlKSk7ZGVmYXVsdDp0aHJvdyBFcnJvcihgVHlwZSBpcyBub3Qgc3VwcG9ydGVkOiAke2V9YCl9fWZ1bmN0aW9uIE9hKHQpe3ZhciBlPVBhKHQsMCk7aWYoIWUpe2U9VWEodCk7Y29uc3Qgbj1OYSh0KSxyPW5ldyBVaW50OEFycmF5KHQud2lkdGgqdC5oZWlnaHQqNCk7YWEobixlLENhKHQpKSxlLnJlYWRQaXhlbHMoMCwwLHQud2lkdGgsdC5oZWlnaHQsZS5SR0JBLGUuVU5TSUdORURfQllURSxyKSxoYShuKSxlPW5ldyBJbWFnZURhdGEobmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHIuYnVmZmVyKSx0LndpZHRoLHQuaGVpZ2h0KSx0LmcucHVzaChlKTt9cmV0dXJuIGV9ZnVuY3Rpb24gQ2EodCl7bGV0IGU9UGEodCwyKTtpZighZSl7Y29uc3Qgbj1VYSh0KTtlPURhKHQpO2NvbnN0IHI9UGEodCwxKXx8T2EodCk7bi50ZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLG4uUkdCQSxuLlJHQkEsbi5VTlNJR05FRF9CWVRFLHIpLEJhKHQpO31yZXR1cm4gZX1mdW5jdGlvbiBVYSh0KXtpZighdC5jYW52YXMpdGhyb3cgRXJyb3IoIkNvbnZlcnNpb24gdG8gZGlmZmVyZW50IGltYWdlIGZvcm1hdHMgcmVxdWlyZSB0aGF0IGEgY2FudmFzIGlzIHBhc3NlZCB3aGVuIGluaWl0aWFsaXppbmcgdGhlIGltYWdlLiIpO3JldHVybiB0Lmh8fCh0Lmg9dGEodC5jYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wyIiksIllvdSBjYW5ub3QgdXNlIGEgY2FudmFzIHRoYXQgaXMgYWxyZWFkeSBib3VuZCB0byBhIGRpZmZlcmVudCB0eXBlIG9mIHJlbmRlcmluZyBjb250ZXh0LiIpKSx0Lmh9ZnVuY3Rpb24gTmEodCl7cmV0dXJuIHQubHx8KHQubD1uZXcgY2EpLHQubH1mdW5jdGlvbiBEYSh0KXtjb25zdCBlPVVhKHQpO2Uudmlld3BvcnQoMCwwLHQud2lkdGgsdC5oZWlnaHQpLGUuYWN0aXZlVGV4dHVyZShlLlRFWFRVUkUwKTtsZXQgbj1QYSh0LDIpO3JldHVybiBufHwobj1vYShOYSh0KSxlKSx0LmcucHVzaChuKSx0Lm09ITApLGUuYmluZFRleHR1cmUoZS5URVhUVVJFXzJELG4pLG59ZnVuY3Rpb24gQmEodCl7dC5oLmJpbmRUZXh0dXJlKHQuaC5URVhUVVJFXzJELG51bGwpO31mdW5jdGlvbiBHYSh0KXtjb25zdCBlPVVhKHQpO3JldHVybiBzYShOYSh0KSxlLCEwLCgoKT0+ZnVuY3Rpb24odCxlKXtjb25zdCBuPXQuY2FudmFzO2lmKG4ud2lkdGg9PT10LndpZHRoJiZuLmhlaWdodD09PXQuaGVpZ2h0KXJldHVybiBlKCk7Y29uc3Qgcj1uLndpZHRoLGk9bi5oZWlnaHQ7cmV0dXJuIG4ud2lkdGg9dC53aWR0aCxuLmhlaWdodD10LmhlaWdodCx0PWUoKSxuLndpZHRoPXIsbi5oZWlnaHQ9aSx0fSh0LCgoKT0+e2lmKGUuYmluZEZyYW1lYnVmZmVyKGUuRlJBTUVCVUZGRVIsbnVsbCksZS5jbGVhckNvbG9yKDAsMCwwLDApLGUuY2xlYXIoZS5DT0xPUl9CVUZGRVJfQklUKSxlLmRyYXdBcnJheXMoZS5UUklBTkdMRV9GQU4sMCw0KSwhKHQuY2FudmFzIGluc3RhbmNlb2YgT2Zmc2NyZWVuQ2FudmFzKSl0aHJvdyBFcnJvcigiQ29udmVyc2lvbiB0byBJbWFnZUJpdG1hcCByZXF1aXJlcyB0aGF0IHRoZSBNZWRpYVBpcGUgVGFza3MgaXMgaW5pdGlhbGl6ZWQgd2l0aCBhbiBPZmZzY3JlZW5DYW52YXMiKTtyZXR1cm4gdC5jYW52YXMudHJhbnNmZXJUb0ltYWdlQml0bWFwKCl9KSkpKX12YXIgamE9Y2xhc3N7Y29uc3RydWN0b3IodCxlLG4scixpLHMsbyl7dGhpcy5nPXQsdGhpcy5qPWUsdGhpcy5tPW4sdGhpcy5jYW52YXM9cix0aGlzLmw9aSx0aGlzLndpZHRoPXMsdGhpcy5oZWlnaHQ9bywodGhpcy5qfHx0aGlzLm0pJiYoMD09PS0tVmEmJmNvbnNvbGUuZXJyb3IoIllvdSBzZWVtIHRvIGJlIGNyZWF0aW5nIE1QSW1hZ2UgaW5zdGFuY2VzIHdpdGhvdXQgaW52b2tpbmcgLmNsb3NlKCkuIFRoaXMgbGVha3MgcmVzb3VyY2VzLiIpKTt9R2EoKXtyZXR1cm4gISFQYSh0aGlzLDApfW1hKCl7cmV0dXJuICEhUGEodGhpcywxKX1SKCl7cmV0dXJuICEhUGEodGhpcywyKX1FYSgpe3JldHVybiBPYSh0aGlzKX1EYSgpe3ZhciB0PVBhKHRoaXMsMSk7cmV0dXJuIHR8fChDYSh0aGlzKSxEYSh0aGlzKSx0PUdhKHRoaXMpLEJhKHRoaXMpLHRoaXMuZy5wdXNoKHQpLHRoaXMuaj0hMCksdH1NKCl7cmV0dXJuIENhKHRoaXMpfWNsb25lKCl7Y29uc3QgdD1bXTtmb3IoY29uc3QgZSBvZiB0aGlzLmcpe2xldCBuO2lmKGUgaW5zdGFuY2VvZiBJbWFnZURhdGEpbj1uZXcgSW1hZ2VEYXRhKGUuZGF0YSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBXZWJHTFRleHR1cmUpe2NvbnN0IHQ9VWEodGhpcyksZT1OYSh0aGlzKTt0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMSksbj1vYShlLHQpLHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELG4pLHQudGV4SW1hZ2UyRCh0LlRFWFRVUkVfMkQsMCx0LlJHQkEsdGhpcy53aWR0aCx0aGlzLmhlaWdodCwwLHQuUkdCQSx0LlVOU0lHTkVEX0JZVEUsbnVsbCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbnVsbCksYWEoZSx0LG4pLHNhKGUsdCwhMSwoKCk9PntEYSh0aGlzKSx0LmNsZWFyQ29sb3IoMCwwLDAsMCksdC5jbGVhcih0LkNPTE9SX0JVRkZFUl9CSVQpLHQuZHJhd0FycmF5cyh0LlRSSUFOR0xFX0ZBTiwwLDQpLEJhKHRoaXMpO30pKSxoYShlKSxCYSh0aGlzKTt9ZWxzZSB7aWYoIShlIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXApKXRocm93IEVycm9yKGBUeXBlIGlzIG5vdCBzdXBwb3J0ZWQ6ICR7ZX1gKTtDYSh0aGlzKSxEYSh0aGlzKSxuPUdhKHRoaXMpLEJhKHRoaXMpO310LnB1c2gobik7fXJldHVybiBuZXcgamEodCx0aGlzLm1hKCksdGhpcy5SKCksdGhpcy5jYW52YXMsdGhpcy5sLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfWNsb3NlKCl7dGhpcy5qJiZQYSh0aGlzLDEpLmNsb3NlKCksdGhpcy5tJiZVYSh0aGlzKS5kZWxldGVUZXh0dXJlKFBhKHRoaXMsMikpLFZhPS0xO319O2phLnByb3RvdHlwZS5jbG9zZT1qYS5wcm90b3R5cGUuY2xvc2UsamEucHJvdG90eXBlLmNsb25lPWphLnByb3RvdHlwZS5jbG9uZSxqYS5wcm90b3R5cGUuZ2V0QXNXZWJHTFRleHR1cmU9amEucHJvdG90eXBlLk0samEucHJvdG90eXBlLmdldEFzSW1hZ2VCaXRtYXA9amEucHJvdG90eXBlLkRhLGphLnByb3RvdHlwZS5nZXRBc0ltYWdlRGF0YT1qYS5wcm90b3R5cGUuRWEsamEucHJvdG90eXBlLmhhc1dlYkdMVGV4dHVyZT1qYS5wcm90b3R5cGUuUixqYS5wcm90b3R5cGUuaGFzSW1hZ2VCaXRtYXA9amEucHJvdG90eXBlLm1hLGphLnByb3RvdHlwZS5oYXNJbWFnZURhdGE9amEucHJvdG90eXBlLkdhO3ZhciBWYT0yNTA7ZnVuY3Rpb24gWGEoLi4udCl7cmV0dXJuIHQubWFwKCgoW3QsZV0pPT4oe3N0YXJ0OnQsZW5kOmV9KSkpfWNvbnN0IEhhPWZ1bmN0aW9uKHQpe3JldHVybiBjbGFzcyBleHRlbmRzIHR7TWEoKXt0aGlzLmkuX3JlZ2lzdGVyTW9kZWxSZXNvdXJjZXNHcmFwaFNlcnZpY2UoKTt9fX0oKFdhPWNsYXNze2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5sPSEwLHRoaXMuaT10LHRoaXMuZz1udWxsLHRoaXMuaD0wLHRoaXMubT0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5pLl9hZGRJbnRUb0lucHV0U3RyZWFtLHZvaWQgMCE9PWU/dGhpcy5pLmNhbnZhcz1lOkRvKCk/dGhpcy5pLmNhbnZhcz1uZXcgT2Zmc2NyZWVuQ2FudmFzKDEsMSk6KGNvbnNvbGUud2FybigiT2Zmc2NyZWVuQ2FudmFzIG5vdCBzdXBwb3J0ZWQgYW5kIEdyYXBoUnVubmVyIGNvbnN0cnVjdG9yIGdsQ2FudmFzIHBhcmFtZXRlciBpcyB1bmRlZmluZWQuIENyZWF0aW5nIGJhY2t1cCBjYW52YXMuIiksdGhpcy5pLmNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSk7fWFzeW5jIGluaXRpYWxpemVHcmFwaCh0KXtjb25zdCBlPWF3YWl0KGF3YWl0IGZldGNoKHQpKS5hcnJheUJ1ZmZlcigpO3Q9ISh0LmVuZHNXaXRoKCIucGJ0eHQiKXx8dC5lbmRzV2l0aCgiLnRleHRwcm90byIpKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KGUpLHQpO31zZXRHcmFwaEZyb21TdHJpbmcodCl7dGhpcy5zZXRHcmFwaCgobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCksITEpO31zZXRHcmFwaCh0LGUpe2NvbnN0IG49dC5sZW5ndGgscj10aGlzLmkuX21hbGxvYyhuKTt0aGlzLmkuSEVBUFU4LnNldCh0LHIpLGU/dGhpcy5pLl9jaGFuZ2VCaW5hcnlHcmFwaChuLHIpOnRoaXMuaS5fY2hhbmdlVGV4dEdyYXBoKG4sciksdGhpcy5pLl9mcmVlKHIpO31jb25maWd1cmVBdWRpbyh0LGUsbixyLGkpe3RoaXMuaS5fY29uZmlndXJlQXVkaW98fGNvbnNvbGUud2FybignQXR0ZW1wdGluZyB0byB1c2UgY29uZmlndXJlQXVkaW8gd2l0aG91dCBzdXBwb3J0IGZvciBpbnB1dCBhdWRpby4gSXMgYnVpbGQgZGVwICI6Z2xfZ3JhcGhfcnVubmVyX2F1ZGlvIiBtaXNzaW5nPycpLGpvKHRoaXMscnx8ImlucHV0X2F1ZGlvIiwocj0+e2pvKHRoaXMsaT1pfHwiYXVkaW9faGVhZGVyIiwoaT0+e3RoaXMuaS5fY29uZmlndXJlQXVkaW8ocixpLHQsZSxuKTt9KSk7fSkpO31zZXRBdXRvUmVzaXplQ2FudmFzKHQpe3RoaXMubD10O31zZXRBdXRvUmVuZGVyVG9TY3JlZW4odCl7dGhpcy5pLl9zZXRBdXRvUmVuZGVyVG9TY3JlZW4odCk7fXNldEdwdUJ1ZmZlclZlcnRpY2FsRmxpcCh0KXt0aGlzLmkuZ3B1T3JpZ2luRm9yV2ViVGV4dHVyZXNJc0JvdHRvbUxlZnQ9dDt9ZmEodCl7SG8odGhpcywiX19ncmFwaF9jb25maWdfXyIsKGU9Pnt0KGUpO30pKSxqbyh0aGlzLCJfX2dyYXBoX2NvbmZpZ19fIiwodD0+e3RoaXMuaS5fZ2V0R3JhcGhDb25maWcodCx2b2lkIDApO30pKSxkZWxldGUgdGhpcy5pLnNpbXBsZUxpc3RlbmVycy5fX2dyYXBoX2NvbmZpZ19fO31hdHRhY2hFcnJvckxpc3RlbmVyKHQpe3RoaXMuaS5lcnJvckxpc3RlbmVyPXQ7fWF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIodCxlKXt0aGlzLmkuZW1wdHlQYWNrZXRMaXN0ZW5lcnM9dGhpcy5pLmVtcHR5UGFja2V0TGlzdGVuZXJzfHx7fSx0aGlzLmkuZW1wdHlQYWNrZXRMaXN0ZW5lcnNbdF09ZTt9YWRkQXVkaW9Ub1N0cmVhbSh0LGUsbil7dGhpcy5hZGRBdWRpb1RvU3RyZWFtV2l0aFNoYXBlKHQsMCwwLGUsbik7fWFkZEF1ZGlvVG9TdHJlYW1XaXRoU2hhcGUodCxlLG4scixpKXtjb25zdCBzPTQqdC5sZW5ndGg7dGhpcy5oIT09cyYmKHRoaXMuZyYmdGhpcy5pLl9mcmVlKHRoaXMuZyksdGhpcy5nPXRoaXMuaS5fbWFsbG9jKHMpLHRoaXMuaD1zKSx0aGlzLmkuSEVBUEYzMi5zZXQodCx0aGlzLmcvNCksam8odGhpcyxyLCh0PT57dGhpcy5pLl9hZGRBdWRpb1RvSW5wdXRTdHJlYW0odGhpcy5nLGUsbix0LGkpO30pKTt9YWRkR3B1QnVmZmVyVG9TdHJlYW0odCxlLG4pe2pvKHRoaXMsZSwoZT0+e2NvbnN0W3IsaV09Vm8odGhpcyx0LGUpO3RoaXMuaS5fYWRkQm91bmRUZXh0dXJlVG9TdHJlYW0oZSxyLGksbik7fSkpO31hZGRCb29sVG9TdHJlYW0odCxlLG4pe2pvKHRoaXMsZSwoZT0+e3RoaXMuaS5fYWRkQm9vbFRvSW5wdXRTdHJlYW0odCxlLG4pO30pKTt9YWRkRG91YmxlVG9TdHJlYW0odCxlLG4pe2pvKHRoaXMsZSwoZT0+e3RoaXMuaS5fYWRkRG91YmxlVG9JbnB1dFN0cmVhbSh0LGUsbik7fSkpO31hZGRGbG9hdFRvU3RyZWFtKHQsZSxuKXtqbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZEZsb2F0VG9JbnB1dFN0cmVhbSh0LGUsbik7fSkpO31hZGRJbnRUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57dGhpcy5pLl9hZGRJbnRUb0lucHV0U3RyZWFtKHQsZSxuKTt9KSk7fWFkZFVpbnRUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57dGhpcy5pLl9hZGRVaW50VG9JbnB1dFN0cmVhbSh0LGUsbik7fSkpO31hZGRTdHJpbmdUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57am8odGhpcyx0LCh0PT57dGhpcy5pLl9hZGRTdHJpbmdUb0lucHV0U3RyZWFtKHQsZSxuKTt9KSk7fSkpO31hZGRTdHJpbmdSZWNvcmRUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57WG8odGhpcyxPYmplY3Qua2V5cyh0KSwocj0+e1hvKHRoaXMsT2JqZWN0LnZhbHVlcyh0KSwoaT0+e3RoaXMuaS5fYWRkRmxhdEhhc2hNYXBUb0lucHV0U3RyZWFtKHIsaSxPYmplY3Qua2V5cyh0KS5sZW5ndGgsZSxuKTt9KSk7fSkpO30pKTt9YWRkUHJvdG9Ub1N0cmVhbSh0LGUsbixyKXtqbyh0aGlzLG4sKG49Pntqbyh0aGlzLGUsKGU9Pntjb25zdCBpPXRoaXMuaS5fbWFsbG9jKHQubGVuZ3RoKTt0aGlzLmkuSEVBUFU4LnNldCh0LGkpLHRoaXMuaS5fYWRkUHJvdG9Ub0lucHV0U3RyZWFtKGksdC5sZW5ndGgsZSxuLHIpLHRoaXMuaS5fZnJlZShpKTt9KSk7fSkpO31hZGRFbXB0eVBhY2tldFRvU3RyZWFtKHQsZSl7am8odGhpcyx0LCh0PT57dGhpcy5pLl9hZGRFbXB0eVBhY2tldFRvSW5wdXRTdHJlYW0odCxlKTt9KSk7fWFkZEJvb2xWZWN0b3JUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57Y29uc3Qgcj10aGlzLmkuX2FsbG9jYXRlQm9vbFZlY3Rvcih0Lmxlbmd0aCk7aWYoIXIpdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgYm9vbCB2ZWN0b3Igb24gaGVhcC4iKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkQm9vbFZlY3RvckVudHJ5KHIsZSk7dGhpcy5pLl9hZGRCb29sVmVjdG9yVG9JbnB1dFN0cmVhbShyLGUsbik7fSkpO31hZGREb3VibGVWZWN0b3JUb1N0cmVhbSh0LGUsbil7am8odGhpcyxlLChlPT57Y29uc3Qgcj10aGlzLmkuX2FsbG9jYXRlRG91YmxlVmVjdG9yKHQubGVuZ3RoKTtpZighcil0aHJvdyBFcnJvcigiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyBkb3VibGUgdmVjdG9yIG9uIGhlYXAuIik7Zm9yKGNvbnN0IGUgb2YgdCl0aGlzLmkuX2FkZERvdWJsZVZlY3RvckVudHJ5KHIsZSk7dGhpcy5pLl9hZGREb3VibGVWZWN0b3JUb0lucHV0U3RyZWFtKHIsZSxuKTt9KSk7fWFkZEZsb2F0VmVjdG9yVG9TdHJlYW0odCxlLG4pe2pvKHRoaXMsZSwoZT0+e2NvbnN0IHI9dGhpcy5pLl9hbGxvY2F0ZUZsb2F0VmVjdG9yKHQubGVuZ3RoKTtpZighcil0aHJvdyBFcnJvcigiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyBmbG9hdCB2ZWN0b3Igb24gaGVhcC4iKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkRmxvYXRWZWN0b3JFbnRyeShyLGUpO3RoaXMuaS5fYWRkRmxvYXRWZWN0b3JUb0lucHV0U3RyZWFtKHIsZSxuKTt9KSk7fWFkZEludFZlY3RvclRvU3RyZWFtKHQsZSxuKXtqbyh0aGlzLGUsKGU9Pntjb25zdCByPXRoaXMuaS5fYWxsb2NhdGVJbnRWZWN0b3IodC5sZW5ndGgpO2lmKCFyKXRocm93IEVycm9yKCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IGludCB2ZWN0b3Igb24gaGVhcC4iKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkSW50VmVjdG9yRW50cnkocixlKTt0aGlzLmkuX2FkZEludFZlY3RvclRvSW5wdXRTdHJlYW0ocixlLG4pO30pKTt9YWRkVWludFZlY3RvclRvU3RyZWFtKHQsZSxuKXtqbyh0aGlzLGUsKGU9Pntjb25zdCByPXRoaXMuaS5fYWxsb2NhdGVVaW50VmVjdG9yKHQubGVuZ3RoKTtpZighcil0aHJvdyBFcnJvcigiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyB1bnNpZ25lZCBpbnQgdmVjdG9yIG9uIGhlYXAuIik7Zm9yKGNvbnN0IGUgb2YgdCl0aGlzLmkuX2FkZFVpbnRWZWN0b3JFbnRyeShyLGUpO3RoaXMuaS5fYWRkVWludFZlY3RvclRvSW5wdXRTdHJlYW0ocixlLG4pO30pKTt9YWRkU3RyaW5nVmVjdG9yVG9TdHJlYW0odCxlLG4pe2pvKHRoaXMsZSwoZT0+e2NvbnN0IHI9dGhpcy5pLl9hbGxvY2F0ZVN0cmluZ1ZlY3Rvcih0Lmxlbmd0aCk7aWYoIXIpdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgc3RyaW5nIHZlY3RvciBvbiBoZWFwLiIpO2Zvcihjb25zdCBlIG9mIHQpam8odGhpcyxlLCh0PT57dGhpcy5pLl9hZGRTdHJpbmdWZWN0b3JFbnRyeShyLHQpO30pKTt0aGlzLmkuX2FkZFN0cmluZ1ZlY3RvclRvSW5wdXRTdHJlYW0ocixlLG4pO30pKTt9YWRkQm9vbFRvSW5wdXRTaWRlUGFja2V0KHQsZSl7am8odGhpcyxlLChlPT57dGhpcy5pLl9hZGRCb29sVG9JbnB1dFNpZGVQYWNrZXQodCxlKTt9KSk7fWFkZERvdWJsZVRvSW5wdXRTaWRlUGFja2V0KHQsZSl7am8odGhpcyxlLChlPT57dGhpcy5pLl9hZGREb3VibGVUb0lucHV0U2lkZVBhY2tldCh0LGUpO30pKTt9YWRkRmxvYXRUb0lucHV0U2lkZVBhY2tldCh0LGUpe2pvKHRoaXMsZSwoZT0+e3RoaXMuaS5fYWRkRmxvYXRUb0lucHV0U2lkZVBhY2tldCh0LGUpO30pKTt9YWRkSW50VG9JbnB1dFNpZGVQYWNrZXQodCxlKXtqbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZEludFRvSW5wdXRTaWRlUGFja2V0KHQsZSk7fSkpO31hZGRVaW50VG9JbnB1dFNpZGVQYWNrZXQodCxlKXtqbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZFVpbnRUb0lucHV0U2lkZVBhY2tldCh0LGUpO30pKTt9YWRkU3RyaW5nVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtqbyh0aGlzLGUsKGU9Pntqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2FkZFN0cmluZ1RvSW5wdXRTaWRlUGFja2V0KHQsZSk7fSkpO30pKTt9YWRkUHJvdG9Ub0lucHV0U2lkZVBhY2tldCh0LGUsbil7am8odGhpcyxuLChuPT57am8odGhpcyxlLChlPT57Y29uc3Qgcj10aGlzLmkuX21hbGxvYyh0Lmxlbmd0aCk7dGhpcy5pLkhFQVBVOC5zZXQodCxyKSx0aGlzLmkuX2FkZFByb3RvVG9JbnB1dFNpZGVQYWNrZXQocix0Lmxlbmd0aCxlLG4pLHRoaXMuaS5fZnJlZShyKTt9KSk7fSkpO31hZGRCb29sVmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtqbyh0aGlzLGUsKGU9Pntjb25zdCBuPXRoaXMuaS5fYWxsb2NhdGVCb29sVmVjdG9yKHQubGVuZ3RoKTtpZighbil0aHJvdyBFcnJvcigiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyBib29sIHZlY3RvciBvbiBoZWFwLiIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRCb29sVmVjdG9yRW50cnkobixlKTt0aGlzLmkuX2FkZEJvb2xWZWN0b3JUb0lucHV0U2lkZVBhY2tldChuLGUpO30pKTt9YWRkRG91YmxlVmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtqbyh0aGlzLGUsKGU9Pntjb25zdCBuPXRoaXMuaS5fYWxsb2NhdGVEb3VibGVWZWN0b3IodC5sZW5ndGgpO2lmKCFuKXRocm93IEVycm9yKCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IGRvdWJsZSB2ZWN0b3Igb24gaGVhcC4iKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkRG91YmxlVmVjdG9yRW50cnkobixlKTt0aGlzLmkuX2FkZERvdWJsZVZlY3RvclRvSW5wdXRTaWRlUGFja2V0KG4sZSk7fSkpO31hZGRGbG9hdFZlY3RvclRvSW5wdXRTaWRlUGFja2V0KHQsZSl7am8odGhpcyxlLChlPT57Y29uc3Qgbj10aGlzLmkuX2FsbG9jYXRlRmxvYXRWZWN0b3IodC5sZW5ndGgpO2lmKCFuKXRocm93IEVycm9yKCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IGZsb2F0IHZlY3RvciBvbiBoZWFwLiIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRGbG9hdFZlY3RvckVudHJ5KG4sZSk7dGhpcy5pLl9hZGRGbG9hdFZlY3RvclRvSW5wdXRTaWRlUGFja2V0KG4sZSk7fSkpO31hZGRJbnRWZWN0b3JUb0lucHV0U2lkZVBhY2tldCh0LGUpe2pvKHRoaXMsZSwoZT0+e2NvbnN0IG49dGhpcy5pLl9hbGxvY2F0ZUludFZlY3Rvcih0Lmxlbmd0aCk7aWYoIW4pdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgaW50IHZlY3RvciBvbiBoZWFwLiIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRJbnRWZWN0b3JFbnRyeShuLGUpO3RoaXMuaS5fYWRkSW50VmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQobixlKTt9KSk7fWFkZFVpbnRWZWN0b3JUb0lucHV0U2lkZVBhY2tldCh0LGUpe2pvKHRoaXMsZSwoZT0+e2NvbnN0IG49dGhpcy5pLl9hbGxvY2F0ZVVpbnRWZWN0b3IodC5sZW5ndGgpO2lmKCFuKXRocm93IEVycm9yKCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IHVuc2lnbmVkIGludCB2ZWN0b3Igb24gaGVhcC4iKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkVWludFZlY3RvckVudHJ5KG4sZSk7dGhpcy5pLl9hZGRVaW50VmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQobixlKTt9KSk7fWFkZFN0cmluZ1ZlY3RvclRvSW5wdXRTaWRlUGFja2V0KHQsZSl7am8odGhpcyxlLChlPT57Y29uc3Qgbj10aGlzLmkuX2FsbG9jYXRlU3RyaW5nVmVjdG9yKHQubGVuZ3RoKTtpZighbil0aHJvdyBFcnJvcigiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyBzdHJpbmcgdmVjdG9yIG9uIGhlYXAuIik7Zm9yKGNvbnN0IGUgb2YgdClqbyh0aGlzLGUsKHQ9Pnt0aGlzLmkuX2FkZFN0cmluZ1ZlY3RvckVudHJ5KG4sdCk7fSkpO3RoaXMuaS5fYWRkU3RyaW5nVmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQobixlKTt9KSk7fWF0dGFjaEJvb2xMaXN0ZW5lcih0LGUpe0hvKHRoaXMsdCxlKSxqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaEJvb2xMaXN0ZW5lcih0KTt9KSk7fWF0dGFjaEJvb2xWZWN0b3JMaXN0ZW5lcih0LGUpe1dvKHRoaXMsdCxlKSxqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaEJvb2xWZWN0b3JMaXN0ZW5lcih0KTt9KSk7fWF0dGFjaEludExpc3RlbmVyKHQsZSl7SG8odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoSW50TGlzdGVuZXIodCk7fSkpO31hdHRhY2hJbnRWZWN0b3JMaXN0ZW5lcih0LGUpe1dvKHRoaXMsdCxlKSxqbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaEludFZlY3Rvckxpc3RlbmVyKHQpO30pKTt9YXR0YWNoVWludExpc3RlbmVyKHQsZSl7SG8odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoVWludExpc3RlbmVyKHQpO30pKTt9YXR0YWNoVWludFZlY3Rvckxpc3RlbmVyKHQsZSl7V28odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoVWludFZlY3Rvckxpc3RlbmVyKHQpO30pKTt9YXR0YWNoRG91YmxlTGlzdGVuZXIodCxlKXtIbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hEb3VibGVMaXN0ZW5lcih0KTt9KSk7fWF0dGFjaERvdWJsZVZlY3Rvckxpc3RlbmVyKHQsZSl7V28odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoRG91YmxlVmVjdG9yTGlzdGVuZXIodCk7fSkpO31hdHRhY2hGbG9hdExpc3RlbmVyKHQsZSl7SG8odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoRmxvYXRMaXN0ZW5lcih0KTt9KSk7fWF0dGFjaEZsb2F0VmVjdG9yTGlzdGVuZXIodCxlKXtXbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hGbG9hdFZlY3Rvckxpc3RlbmVyKHQpO30pKTt9YXR0YWNoU3RyaW5nTGlzdGVuZXIodCxlKXtIbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hTdHJpbmdMaXN0ZW5lcih0KTt9KSk7fWF0dGFjaFN0cmluZ1ZlY3Rvckxpc3RlbmVyKHQsZSl7V28odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoU3RyaW5nVmVjdG9yTGlzdGVuZXIodCk7fSkpO31hdHRhY2hQcm90b0xpc3RlbmVyKHQsZSxuKXtIbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hQcm90b0xpc3RlbmVyKHQsbnx8ITEpO30pKTt9YXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcih0LGUsbil7V28odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcih0LG58fCExKTt9KSk7fWF0dGFjaEF1ZGlvTGlzdGVuZXIodCxlLG4pe3RoaXMuaS5fYXR0YWNoQXVkaW9MaXN0ZW5lcnx8Y29uc29sZS53YXJuKCdBdHRlbXB0aW5nIHRvIHVzZSBhdHRhY2hBdWRpb0xpc3RlbmVyIHdpdGhvdXQgc3VwcG9ydCBmb3Igb3V0cHV0IGF1ZGlvLiBJcyBidWlsZCBkZXAgIjpnbF9ncmFwaF9ydW5uZXJfYXVkaW9fb3V0IiBtaXNzaW5nPycpLEhvKHRoaXMsdCwoKHQsbik9Pnt0PW5ldyBGbG9hdDMyQXJyYXkodC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQubGVuZ3RoLzQpLGUodCxuKTt9KSksam8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hBdWRpb0xpc3RlbmVyKHQsbnx8ITEpO30pKTt9ZmluaXNoUHJvY2Vzc2luZygpe3RoaXMuaS5fd2FpdFVudGlsSWRsZSgpO31jbG9zZUdyYXBoKCl7dGhpcy5pLl9jbG9zZUdyYXBoKCksdGhpcy5pLnNpbXBsZUxpc3RlbmVycz12b2lkIDAsdGhpcy5pLmVtcHR5UGFja2V0TGlzdGVuZXJzPXZvaWQgMDt9fSxjbGFzcyBleHRlbmRzIFdhe2dldCBoYSgpe3JldHVybiB0aGlzLml9c2EodCxlLG4pe2pvKHRoaXMsZSwoZT0+e2NvbnN0W3IsaV09Vm8odGhpcyx0LGUpO3RoaXMuaGEuX2FkZEJvdW5kVGV4dHVyZUFzSW1hZ2VUb1N0cmVhbShlLHIsaSxuKTt9KSk7fVgodCxlKXtIbyh0aGlzLHQsZSksam8odGhpcyx0LCh0PT57dGhpcy5oYS5fYXR0YWNoSW1hZ2VMaXN0ZW5lcih0KTt9KSk7fWVhKHQsZSl7V28odGhpcyx0LGUpLGpvKHRoaXMsdCwodD0+e3RoaXMuaGEuX2F0dGFjaEltYWdlVmVjdG9yTGlzdGVuZXIodCk7fSkpO319KSk7dmFyIFdhLHphPWNsYXNzIGV4dGVuZHMgSGF7fTthc3luYyBmdW5jdGlvbiBLYSh0LGUsbil7cmV0dXJuIGFzeW5jIGZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB6byh0LGUsbixyKX0odCxuLmNhbnZhcz8/KERvKCk/dm9pZCAwOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpKSxlLG4pfWZ1bmN0aW9uIFlhKHQsZSxuLHIpe2lmKHQuVyl7Y29uc3Qgcz1uZXcgZnM7aWYobj8ucmVnaW9uT2ZJbnRlcmVzdCl7aWYoIXQucmEpdGhyb3cgRXJyb3IoIlRoaXMgdGFzayBkb2Vzbid0IHN1cHBvcnQgcmVnaW9uLW9mLWludGVyZXN0LiIpO3ZhciBpPW4ucmVnaW9uT2ZJbnRlcmVzdDtpZihpLmxlZnQ+PWkucmlnaHR8fGkudG9wPj1pLmJvdHRvbSl0aHJvdyBFcnJvcigiRXhwZWN0ZWQgUmVjdEYgd2l0aCBsZWZ0IDwgcmlnaHQgYW5kIHRvcCA8IGJvdHRvbS4iKTtpZihpLmxlZnQ8MHx8aS50b3A8MHx8aS5yaWdodD4xfHxpLmJvdHRvbT4xKXRocm93IEVycm9yKCJFeHBlY3RlZCBSZWN0RiB2YWx1ZXMgdG8gYmUgaW4gWzAsMV0uIik7d24ocywxLChpLmxlZnQraS5yaWdodCkvMiksd24ocywyLChpLnRvcCtpLmJvdHRvbSkvMiksd24ocyw0LGkucmlnaHQtaS5sZWZ0KSx3bihzLDMsaS5ib3R0b20taS50b3ApO31lbHNlIHduKHMsMSwuNSksd24ocywyLC41KSx3bihzLDQsMSksd24ocywzLDEpO2lmKG4/LnJvdGF0aW9uRGVncmVlcyl7aWYobj8ucm90YXRpb25EZWdyZWVzJTkwIT0wKXRocm93IEVycm9yKCJFeHBlY3RlZCByb3RhdGlvbiB0byBiZSBhIG11bHRpcGxlIG9mIDkwwrAuIik7aWYod24ocyw1LC1NYXRoLlBJKm4ucm90YXRpb25EZWdyZWVzLzE4MCksbj8ucm90YXRpb25EZWdyZWVzJTE4MCE9MCl7Y29uc3RbdCxyXT1HbyhlKTtuPXluKHMsMykqci90LGk9eW4ocyw0KSp0L3Isd24ocyw0LG4pLHduKHMsMyxpKTt9fXQuZy5hZGRQcm90b1RvU3RyZWFtKHMuZygpLCJtZWRpYXBpcGUuTm9ybWFsaXplZFJlY3QiLHQuVyxyKTt9dC5nLnNhKGUsdC5jYSxyPz9wZXJmb3JtYW5jZS5ub3coKSksdC5maW5pc2hQcm9jZXNzaW5nKCk7fWZ1bmN0aW9uICRhKHQsZSxuKXtpZih0LmJhc2VPcHRpb25zPy5nKCkpdGhyb3cgRXJyb3IoIlRhc2sgaXMgbm90IGluaXRpYWxpemVkIHdpdGggaW1hZ2UgbW9kZS4gJ3J1bm5pbmdNb2RlJyBtdXN0IGJlIHNldCB0byAnSU1BR0UnLiIpO1lhKHQsZSxuLHQuQisxKTt9ZnVuY3Rpb24gcWEodCxlLG4scil7aWYoIXQuYmFzZU9wdGlvbnM/LmcoKSl0aHJvdyBFcnJvcigiVGFzayBpcyBub3QgaW5pdGlhbGl6ZWQgd2l0aCB2aWRlbyBtb2RlLiAncnVubmluZ01vZGUnIG11c3QgYmUgc2V0IHRvICdWSURFTycuIik7WWEodCxlLG4scik7fWZ1bmN0aW9uIEphKHQsZSxuLHIpe3ZhciBpPWUuZGF0YTtjb25zdCBzPWUud2lkdGgsbz1zKihlPWUuaGVpZ2h0KTtpZigoaSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fGkgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpJiZpLmxlbmd0aCE9PW8pdGhyb3cgRXJyb3IoIlVuc3VwcG9ydGVkIGNoYW5uZWwgY291bnQ6ICIraS5sZW5ndGgvbyk7cmV0dXJuIHQ9bmV3IHdhKFtpXSxuLCExLHQuZy5pLmNhbnZhcyx0LlAscyxlKSxyP3QuY2xvbmUoKTp0fXZhciBaYT1jbGFzcyBleHRlbmRzIFFve2NvbnN0cnVjdG9yKHQsZSxuLHIpe3N1cGVyKHQpLHRoaXMuZz10LHRoaXMuY2E9ZSx0aGlzLlc9bix0aGlzLnJhPXIsdGhpcy5QPW5ldyBjYTt9bCh0LGU9ITApe2lmKCJydW5uaW5nTW9kZSJpbiB0JiZ2bih0aGlzLmJhc2VPcHRpb25zLDIsISF0LnJ1bm5pbmdNb2RlJiYiSU1BR0UiIT09dC5ydW5uaW5nTW9kZSksdm9pZCAwIT09dC5jYW52YXMmJnRoaXMuZy5pLmNhbnZhcyE9PXQuY2FudmFzKXRocm93IEVycm9yKCJZb3UgbXVzdCBjcmVhdGUgYSBuZXcgdGFzayB0byByZXNldCB0aGUgY2FudmFzLiIpO3JldHVybiBzdXBlci5sKHQsZSl9Y2xvc2UoKXt0aGlzLlAuY2xvc2UoKSxzdXBlci5jbG9zZSgpO319O1phLnByb3RvdHlwZS5jbG9zZT1aYS5wcm90b3R5cGUuY2xvc2U7dmFyIFFhPWNsYXNzIGV4dGVuZHMgWmF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgemEodCxlKSwiaW1hZ2VfaW4iLCJub3JtX3JlY3RfaW4iLCExKSx0aGlzLmo9e2RldGVjdGlvbnM6W119LHVuKHQ9dGhpcy5oPW5ldyBScywwLDEsZT1uZXcgeHMpLHduKHRoaXMuaCwyLC41KSx3bih0aGlzLmgsMywuMyk7fWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBhbih0aGlzLmgseHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3VuKHRoaXMuaCwwLDEsdCk7fW8odCl7cmV0dXJuICJtaW5EZXRlY3Rpb25Db25maWRlbmNlImluIHQmJnduKHRoaXMuaCwyLHQubWluRGV0ZWN0aW9uQ29uZmlkZW5jZT8/LjUpLCJtaW5TdXBwcmVzc2lvblRocmVzaG9sZCJpbiB0JiZ3bih0aGlzLmgsMyx0Lm1pblN1cHByZXNzaW9uVGhyZXNob2xkPz8uMyksdGhpcy5sKHQpfUQodCxlKXtyZXR1cm4gdGhpcy5qPXtkZXRlY3Rpb25zOltdfSwkYSh0aGlzLHQsZSksdGhpcy5qfUYodCxlLG4pe3JldHVybiB0aGlzLmo9e2RldGVjdGlvbnM6W119LHFhKHRoaXMsdCxuLGUpLHRoaXMuan1tKCl7dmFyIHQ9bmV3ICRpO0tpKHQsImltYWdlX2luIiksS2kodCwibm9ybV9yZWN0X2luIiksWWkodCwiZGV0ZWN0aW9ucyIpO2NvbnN0IGU9bmV3IENpO0tuKGUsSXMsdGhpcy5oKTtjb25zdCBuPW5ldyBWaTtCaShuLCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmZhY2VfZGV0ZWN0b3IuRmFjZURldGVjdG9yR3JhcGgiKSxHaShuLCJJTUFHRTppbWFnZV9pbiIpLEdpKG4sIk5PUk1fUkVDVDpub3JtX3JlY3RfaW4iKSxqaShuLCJERVRFQ1RJT05TOmRldGVjdGlvbnMiKSxuLm8oZSksemkodCxuKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigiZGV0ZWN0aW9ucyIsKCh0LGUpPT57Zm9yKGNvbnN0IGUgb2YgdCl0PXNzKGUpLHRoaXMuai5kZXRlY3Rpb25zLnB1c2goTG8odCkpOyRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJkZXRlY3Rpb25zIiwodD0+eyRvKHRoaXMsdCk7fSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07UWEucHJvdG90eXBlLmRldGVjdEZvclZpZGVvPVFhLnByb3RvdHlwZS5GLFFhLnByb3RvdHlwZS5kZXRlY3Q9UWEucHJvdG90eXBlLkQsUWEucHJvdG90eXBlLnNldE9wdGlvbnM9UWEucHJvdG90eXBlLm8sUWEuY3JlYXRlRnJvbU1vZGVsUGF0aD1hc3luYyBmdW5jdGlvbih0LGUpe3JldHVybiBLYShRYSx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sUWEuY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFFhLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LFFhLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFFhLHQsZSl9O3ZhciB0aD1YYShbNjEsMTQ2XSxbMTQ2LDkxXSxbOTEsMTgxXSxbMTgxLDg0XSxbODQsMTddLFsxNywzMTRdLFszMTQsNDA1XSxbNDA1LDMyMV0sWzMyMSwzNzVdLFszNzUsMjkxXSxbNjEsMTg1XSxbMTg1LDQwXSxbNDAsMzldLFszOSwzN10sWzM3LDBdLFswLDI2N10sWzI2NywyNjldLFsyNjksMjcwXSxbMjcwLDQwOV0sWzQwOSwyOTFdLFs3OCw5NV0sWzk1LDg4XSxbODgsMTc4XSxbMTc4LDg3XSxbODcsMTRdLFsxNCwzMTddLFszMTcsNDAyXSxbNDAyLDMxOF0sWzMxOCwzMjRdLFszMjQsMzA4XSxbNzgsMTkxXSxbMTkxLDgwXSxbODAsODFdLFs4MSw4Ml0sWzgyLDEzXSxbMTMsMzEyXSxbMzEyLDMxMV0sWzMxMSwzMTBdLFszMTAsNDE1XSxbNDE1LDMwOF0pLGVoPVhhKFsyNjMsMjQ5XSxbMjQ5LDM5MF0sWzM5MCwzNzNdLFszNzMsMzc0XSxbMzc0LDM4MF0sWzM4MCwzODFdLFszODEsMzgyXSxbMzgyLDM2Ml0sWzI2Myw0NjZdLFs0NjYsMzg4XSxbMzg4LDM4N10sWzM4NywzODZdLFszODYsMzg1XSxbMzg1LDM4NF0sWzM4NCwzOThdLFszOTgsMzYyXSksbmg9WGEoWzI3NiwyODNdLFsyODMsMjgyXSxbMjgyLDI5NV0sWzI5NSwyODVdLFszMDAsMjkzXSxbMjkzLDMzNF0sWzMzNCwyOTZdLFsyOTYsMzM2XSkscmg9WGEoWzQ3NCw0NzVdLFs0NzUsNDc2XSxbNDc2LDQ3N10sWzQ3Nyw0NzRdKSxpaD1YYShbMzMsN10sWzcsMTYzXSxbMTYzLDE0NF0sWzE0NCwxNDVdLFsxNDUsMTUzXSxbMTUzLDE1NF0sWzE1NCwxNTVdLFsxNTUsMTMzXSxbMzMsMjQ2XSxbMjQ2LDE2MV0sWzE2MSwxNjBdLFsxNjAsMTU5XSxbMTU5LDE1OF0sWzE1OCwxNTddLFsxNTcsMTczXSxbMTczLDEzM10pLHNoPVhhKFs0Niw1M10sWzUzLDUyXSxbNTIsNjVdLFs2NSw1NV0sWzcwLDYzXSxbNjMsMTA1XSxbMTA1LDY2XSxbNjYsMTA3XSksb2g9WGEoWzQ2OSw0NzBdLFs0NzAsNDcxXSxbNDcxLDQ3Ml0sWzQ3Miw0NjldKSxhaD1YYShbMTAsMzM4XSxbMzM4LDI5N10sWzI5NywzMzJdLFszMzIsMjg0XSxbMjg0LDI1MV0sWzI1MSwzODldLFszODksMzU2XSxbMzU2LDQ1NF0sWzQ1NCwzMjNdLFszMjMsMzYxXSxbMzYxLDI4OF0sWzI4OCwzOTddLFszOTcsMzY1XSxbMzY1LDM3OV0sWzM3OSwzNzhdLFszNzgsNDAwXSxbNDAwLDM3N10sWzM3NywxNTJdLFsxNTIsMTQ4XSxbMTQ4LDE3Nl0sWzE3NiwxNDldLFsxNDksMTUwXSxbMTUwLDEzNl0sWzEzNiwxNzJdLFsxNzIsNThdLFs1OCwxMzJdLFsxMzIsOTNdLFs5MywyMzRdLFsyMzQsMTI3XSxbMTI3LDE2Ml0sWzE2MiwyMV0sWzIxLDU0XSxbNTQsMTAzXSxbMTAzLDY3XSxbNjcsMTA5XSxbMTA5LDEwXSksaGg9Wy4uLnRoLC4uLmVoLC4uLm5oLC4uLmloLC4uLnNoLC4uLmFoXSxjaD1YYShbMTI3LDM0XSxbMzQsMTM5XSxbMTM5LDEyN10sWzExLDBdLFswLDM3XSxbMzcsMTFdLFsyMzIsMjMxXSxbMjMxLDEyMF0sWzEyMCwyMzJdLFs3MiwzN10sWzM3LDM5XSxbMzksNzJdLFsxMjgsMTIxXSxbMTIxLDQ3XSxbNDcsMTI4XSxbMjMyLDEyMV0sWzEyMSwxMjhdLFsxMjgsMjMyXSxbMTA0LDY5XSxbNjksNjddLFs2NywxMDRdLFsxNzUsMTcxXSxbMTcxLDE0OF0sWzE0OCwxNzVdLFsxMTgsNTBdLFs1MCwxMDFdLFsxMDEsMTE4XSxbNzMsMzldLFszOSw0MF0sWzQwLDczXSxbOSwxNTFdLFsxNTEsMTA4XSxbMTA4LDldLFs0OCwxMTVdLFsxMTUsMTMxXSxbMTMxLDQ4XSxbMTk0LDIwNF0sWzIwNCwyMTFdLFsyMTEsMTk0XSxbNzQsNDBdLFs0MCwxODVdLFsxODUsNzRdLFs4MCw0Ml0sWzQyLDE4M10sWzE4Myw4MF0sWzQwLDkyXSxbOTIsMTg2XSxbMTg2LDQwXSxbMjMwLDIyOV0sWzIyOSwxMThdLFsxMTgsMjMwXSxbMjAyLDIxMl0sWzIxMiwyMTRdLFsyMTQsMjAyXSxbODMsMThdLFsxOCwxN10sWzE3LDgzXSxbNzYsNjFdLFs2MSwxNDZdLFsxNDYsNzZdLFsxNjAsMjldLFsyOSwzMF0sWzMwLDE2MF0sWzU2LDE1N10sWzE1NywxNzNdLFsxNzMsNTZdLFsxMDYsMjA0XSxbMjA0LDE5NF0sWzE5NCwxMDZdLFsxMzUsMjE0XSxbMjE0LDE5Ml0sWzE5MiwxMzVdLFsyMDMsMTY1XSxbMTY1LDk4XSxbOTgsMjAzXSxbMjEsNzFdLFs3MSw2OF0sWzY4LDIxXSxbNTEsNDVdLFs0NSw0XSxbNCw1MV0sWzE0NCwyNF0sWzI0LDIzXSxbMjMsMTQ0XSxbNzcsMTQ2XSxbMTQ2LDkxXSxbOTEsNzddLFsyMDUsNTBdLFs1MCwxODddLFsxODcsMjA1XSxbMjAxLDIwMF0sWzIwMCwxOF0sWzE4LDIwMV0sWzkxLDEwNl0sWzEwNiwxODJdLFsxODIsOTFdLFs5MCw5MV0sWzkxLDE4MV0sWzE4MSw5MF0sWzg1LDg0XSxbODQsMTddLFsxNyw4NV0sWzIwNiwyMDNdLFsyMDMsMzZdLFszNiwyMDZdLFsxNDgsMTcxXSxbMTcxLDE0MF0sWzE0MCwxNDhdLFs5Miw0MF0sWzQwLDM5XSxbMzksOTJdLFsxOTMsMTg5XSxbMTg5LDI0NF0sWzI0NCwxOTNdLFsxNTksMTU4XSxbMTU4LDI4XSxbMjgsMTU5XSxbMjQ3LDI0Nl0sWzI0NiwxNjFdLFsxNjEsMjQ3XSxbMjM2LDNdLFszLDE5Nl0sWzE5NiwyMzZdLFs1NCw2OF0sWzY4LDEwNF0sWzEwNCw1NF0sWzE5MywxNjhdLFsxNjgsOF0sWzgsMTkzXSxbMTE3LDIyOF0sWzIyOCwzMV0sWzMxLDExN10sWzE4OSwxOTNdLFsxOTMsNTVdLFs1NSwxODldLFs5OCw5N10sWzk3LDk5XSxbOTksOThdLFsxMjYsNDddLFs0NywxMDBdLFsxMDAsMTI2XSxbMTY2LDc5XSxbNzksMjE4XSxbMjE4LDE2Nl0sWzE1NSwxNTRdLFsxNTQsMjZdLFsyNiwxNTVdLFsyMDksNDldLFs0OSwxMzFdLFsxMzEsMjA5XSxbMTM1LDEzNl0sWzEzNiwxNTBdLFsxNTAsMTM1XSxbNDcsMTI2XSxbMTI2LDIxN10sWzIxNyw0N10sWzIyMyw1Ml0sWzUyLDUzXSxbNTMsMjIzXSxbNDUsNTFdLFs1MSwxMzRdLFsxMzQsNDVdLFsyMTEsMTcwXSxbMTcwLDE0MF0sWzE0MCwyMTFdLFs2Nyw2OV0sWzY5LDEwOF0sWzEwOCw2N10sWzQzLDEwNl0sWzEwNiw5MV0sWzkxLDQzXSxbMjMwLDExOV0sWzExOSwxMjBdLFsxMjAsMjMwXSxbMjI2LDEzMF0sWzEzMCwyNDddLFsyNDcsMjI2XSxbNjMsNTNdLFs1Myw1Ml0sWzUyLDYzXSxbMjM4LDIwXSxbMjAsMjQyXSxbMjQyLDIzOF0sWzQ2LDcwXSxbNzAsMTU2XSxbMTU2LDQ2XSxbNzgsNjJdLFs2Miw5Nl0sWzk2LDc4XSxbNDYsNTNdLFs1Myw2M10sWzYzLDQ2XSxbMTQzLDM0XSxbMzQsMjI3XSxbMjI3LDE0M10sWzEyMywxMTddLFsxMTcsMTExXSxbMTExLDEyM10sWzQ0LDEyNV0sWzEyNSwxOV0sWzE5LDQ0XSxbMjM2LDEzNF0sWzEzNCw1MV0sWzUxLDIzNl0sWzIxNiwyMDZdLFsyMDYsMjA1XSxbMjA1LDIxNl0sWzE1NCwxNTNdLFsxNTMsMjJdLFsyMiwxNTRdLFszOSwzN10sWzM3LDE2N10sWzE2NywzOV0sWzIwMCwyMDFdLFsyMDEsMjA4XSxbMjA4LDIwMF0sWzM2LDE0Ml0sWzE0MiwxMDBdLFsxMDAsMzZdLFs1NywyMTJdLFsyMTIsMjAyXSxbMjAyLDU3XSxbMjAsNjBdLFs2MCw5OV0sWzk5LDIwXSxbMjgsMTU4XSxbMTU4LDE1N10sWzE1NywyOF0sWzM1LDIyNl0sWzIyNiwxMTNdLFsxMTMsMzVdLFsxNjAsMTU5XSxbMTU5LDI3XSxbMjcsMTYwXSxbMjA0LDIwMl0sWzIwMiwyMTBdLFsyMTAsMjA0XSxbMTEzLDIyNV0sWzIyNSw0Nl0sWzQ2LDExM10sWzQzLDIwMl0sWzIwMiwyMDRdLFsyMDQsNDNdLFs2Miw3Nl0sWzc2LDc3XSxbNzcsNjJdLFsxMzcsMTIzXSxbMTIzLDExNl0sWzExNiwxMzddLFs0MSwzOF0sWzM4LDcyXSxbNzIsNDFdLFsyMDMsMTI5XSxbMTI5LDE0Ml0sWzE0MiwyMDNdLFs2NCw5OF0sWzk4LDI0MF0sWzI0MCw2NF0sWzQ5LDEwMl0sWzEwMiw2NF0sWzY0LDQ5XSxbNDEsNzNdLFs3Myw3NF0sWzc0LDQxXSxbMjEyLDIxNl0sWzIxNiwyMDddLFsyMDcsMjEyXSxbNDIsNzRdLFs3NCwxODRdLFsxODQsNDJdLFsxNjksMTcwXSxbMTcwLDIxMV0sWzIxMSwxNjldLFsxNzAsMTQ5XSxbMTQ5LDE3Nl0sWzE3NiwxNzBdLFsxMDUsNjZdLFs2Niw2OV0sWzY5LDEwNV0sWzEyMiw2XSxbNiwxNjhdLFsxNjgsMTIyXSxbMTIzLDE0N10sWzE0NywxODddLFsxODcsMTIzXSxbOTYsNzddLFs3Nyw5MF0sWzkwLDk2XSxbNjUsNTVdLFs1NSwxMDddLFsxMDcsNjVdLFs4OSw5MF0sWzkwLDE4MF0sWzE4MCw4OV0sWzEwMSwxMDBdLFsxMDAsMTIwXSxbMTIwLDEwMV0sWzYzLDEwNV0sWzEwNSwxMDRdLFsxMDQsNjNdLFs5MywxMzddLFsxMzcsMjI3XSxbMjI3LDkzXSxbMTUsODZdLFs4Niw4NV0sWzg1LDE1XSxbMTI5LDEwMl0sWzEwMiw0OV0sWzQ5LDEyOV0sWzE0LDg3XSxbODcsODZdLFs4NiwxNF0sWzU1LDhdLFs4LDldLFs5LDU1XSxbMTAwLDQ3XSxbNDcsMTIxXSxbMTIxLDEwMF0sWzE0NSwyM10sWzIzLDIyXSxbMjIsMTQ1XSxbODgsODldLFs4OSwxNzldLFsxNzksODhdLFs2LDEyMl0sWzEyMiwxOTZdLFsxOTYsNl0sWzg4LDk1XSxbOTUsOTZdLFs5Niw4OF0sWzEzOCwxNzJdLFsxNzIsMTM2XSxbMTM2LDEzOF0sWzIxNSw1OF0sWzU4LDE3Ml0sWzE3MiwyMTVdLFsxMTUsNDhdLFs0OCwyMTldLFsyMTksMTE1XSxbNDIsODBdLFs4MCw4MV0sWzgxLDQyXSxbMTk1LDNdLFszLDUxXSxbNTEsMTk1XSxbNDMsMTQ2XSxbMTQ2LDYxXSxbNjEsNDNdLFsxNzEsMTc1XSxbMTc1LDE5OV0sWzE5OSwxNzFdLFs4MSw4Ml0sWzgyLDM4XSxbMzgsODFdLFs1Myw0Nl0sWzQ2LDIyNV0sWzIyNSw1M10sWzE0NCwxNjNdLFsxNjMsMTEwXSxbMTEwLDE0NF0sWzUyLDY1XSxbNjUsNjZdLFs2Niw1Ml0sWzIyOSwyMjhdLFsyMjgsMTE3XSxbMTE3LDIyOV0sWzM0LDEyN10sWzEyNywyMzRdLFsyMzQsMzRdLFsxMDcsMTA4XSxbMTA4LDY5XSxbNjksMTA3XSxbMTA5LDEwOF0sWzEwOCwxNTFdLFsxNTEsMTA5XSxbNDgsNjRdLFs2NCwyMzVdLFsyMzUsNDhdLFs2Miw3OF0sWzc4LDE5MV0sWzE5MSw2Ml0sWzEyOSwyMDldLFsyMDksMTI2XSxbMTI2LDEyOV0sWzExMSwzNV0sWzM1LDE0M10sWzE0MywxMTFdLFsxMTcsMTIzXSxbMTIzLDUwXSxbNTAsMTE3XSxbMjIyLDY1XSxbNjUsNTJdLFs1MiwyMjJdLFsxOSwxMjVdLFsxMjUsMTQxXSxbMTQxLDE5XSxbMjIxLDU1XSxbNTUsNjVdLFs2NSwyMjFdLFszLDE5NV0sWzE5NSwxOTddLFsxOTcsM10sWzI1LDddLFs3LDMzXSxbMzMsMjVdLFsyMjAsMjM3XSxbMjM3LDQ0XSxbNDQsMjIwXSxbNzAsNzFdLFs3MSwxMzldLFsxMzksNzBdLFsxMjIsMTkzXSxbMTkzLDI0NV0sWzI0NSwxMjJdLFsyNDcsMTMwXSxbMTMwLDMzXSxbMzMsMjQ3XSxbNzEsMjFdLFsyMSwxNjJdLFsxNjIsNzFdLFsxNzAsMTY5XSxbMTY5LDE1MF0sWzE1MCwxNzBdLFsxODgsMTc0XSxbMTc0LDE5Nl0sWzE5NiwxODhdLFsyMTYsMTg2XSxbMTg2LDkyXSxbOTIsMjE2XSxbMiw5N10sWzk3LDE2N10sWzE2NywyXSxbMTQxLDEyNV0sWzEyNSwyNDFdLFsyNDEsMTQxXSxbMTY0LDE2N10sWzE2NywzN10sWzM3LDE2NF0sWzcyLDM4XSxbMzgsMTJdLFsxMiw3Ml0sWzM4LDgyXSxbODIsMTNdLFsxMywzOF0sWzYzLDY4XSxbNjgsNzFdLFs3MSw2M10sWzIyNiwzNV0sWzM1LDExMV0sWzExMSwyMjZdLFsxMDEsNTBdLFs1MCwyMDVdLFsyMDUsMTAxXSxbMjA2LDkyXSxbOTIsMTY1XSxbMTY1LDIwNl0sWzIwOSwxOThdLFsxOTgsMjE3XSxbMjE3LDIwOV0sWzE2NSwxNjddLFsxNjcsOTddLFs5NywxNjVdLFsyMjAsMTE1XSxbMTE1LDIxOF0sWzIxOCwyMjBdLFsxMzMsMTEyXSxbMTEyLDI0M10sWzI0MywxMzNdLFsyMzksMjM4XSxbMjM4LDI0MV0sWzI0MSwyMzldLFsyMTQsMTM1XSxbMTM1LDE2OV0sWzE2OSwyMTRdLFsxOTAsMTczXSxbMTczLDEzM10sWzEzMywxOTBdLFsxNzEsMjA4XSxbMjA4LDMyXSxbMzIsMTcxXSxbMTI1LDQ0XSxbNDQsMjM3XSxbMjM3LDEyNV0sWzg2LDg3XSxbODcsMTc4XSxbMTc4LDg2XSxbODUsODZdLFs4NiwxNzldLFsxNzksODVdLFs4NCw4NV0sWzg1LDE4MF0sWzE4MCw4NF0sWzgzLDg0XSxbODQsMTgxXSxbMTgxLDgzXSxbMjAxLDgzXSxbODMsMTgyXSxbMTgyLDIwMV0sWzEzNyw5M10sWzkzLDEzMl0sWzEzMiwxMzddLFs3Niw2Ml0sWzYyLDE4M10sWzE4Myw3Nl0sWzYxLDc2XSxbNzYsMTg0XSxbMTg0LDYxXSxbNTcsNjFdLFs2MSwxODVdLFsxODUsNTddLFsyMTIsNTddLFs1NywxODZdLFsxODYsMjEyXSxbMjE0LDIwN10sWzIwNywxODddLFsxODcsMjE0XSxbMzQsMTQzXSxbMTQzLDE1Nl0sWzE1NiwzNF0sWzc5LDIzOV0sWzIzOSwyMzddLFsyMzcsNzldLFsxMjMsMTM3XSxbMTM3LDE3N10sWzE3NywxMjNdLFs0NCwxXSxbMSw0XSxbNCw0NF0sWzIwMSwxOTRdLFsxOTQsMzJdLFszMiwyMDFdLFs2NCwxMDJdLFsxMDIsMTI5XSxbMTI5LDY0XSxbMjEzLDIxNV0sWzIxNSwxMzhdLFsxMzgsMjEzXSxbNTksMTY2XSxbMTY2LDIxOV0sWzIxOSw1OV0sWzI0Miw5OV0sWzk5LDk3XSxbOTcsMjQyXSxbMiw5NF0sWzk0LDE0MV0sWzE0MSwyXSxbNzUsNTldLFs1OSwyMzVdLFsyMzUsNzVdLFsyNCwxMTBdLFsxMTAsMjI4XSxbMjI4LDI0XSxbMjUsMTMwXSxbMTMwLDIyNl0sWzIyNiwyNV0sWzIzLDI0XSxbMjQsMjI5XSxbMjI5LDIzXSxbMjIsMjNdLFsyMywyMzBdLFsyMzAsMjJdLFsyNiwyMl0sWzIyLDIzMV0sWzIzMSwyNl0sWzExMiwyNl0sWzI2LDIzMl0sWzIzMiwxMTJdLFsxODksMTkwXSxbMTkwLDI0M10sWzI0MywxODldLFsyMjEsNTZdLFs1NiwxOTBdLFsxOTAsMjIxXSxbMjgsNTZdLFs1NiwyMjFdLFsyMjEsMjhdLFsyNywyOF0sWzI4LDIyMl0sWzIyMiwyN10sWzI5LDI3XSxbMjcsMjIzXSxbMjIzLDI5XSxbMzAsMjldLFsyOSwyMjRdLFsyMjQsMzBdLFsyNDcsMzBdLFszMCwyMjVdLFsyMjUsMjQ3XSxbMjM4LDc5XSxbNzksMjBdLFsyMCwyMzhdLFsxNjYsNTldLFs1OSw3NV0sWzc1LDE2Nl0sWzYwLDc1XSxbNzUsMjQwXSxbMjQwLDYwXSxbMTQ3LDE3N10sWzE3NywyMTVdLFsyMTUsMTQ3XSxbMjAsNzldLFs3OSwxNjZdLFsxNjYsMjBdLFsxODcsMTQ3XSxbMTQ3LDIxM10sWzIxMywxODddLFsxMTIsMjMzXSxbMjMzLDI0NF0sWzI0NCwxMTJdLFsyMzMsMTI4XSxbMTI4LDI0NV0sWzI0NSwyMzNdLFsxMjgsMTE0XSxbMTE0LDE4OF0sWzE4OCwxMjhdLFsxMTQsMjE3XSxbMjE3LDE3NF0sWzE3NCwxMTRdLFsxMzEsMTE1XSxbMTE1LDIyMF0sWzIyMCwxMzFdLFsyMTcsMTk4XSxbMTk4LDIzNl0sWzIzNiwyMTddLFsxOTgsMTMxXSxbMTMxLDEzNF0sWzEzNCwxOThdLFsxNzcsMTMyXSxbMTMyLDU4XSxbNTgsMTc3XSxbMTQzLDM1XSxbMzUsMTI0XSxbMTI0LDE0M10sWzExMCwxNjNdLFsxNjMsN10sWzcsMTEwXSxbMjI4LDExMF0sWzExMCwyNV0sWzI1LDIyOF0sWzM1NiwzODldLFszODksMzY4XSxbMzY4LDM1Nl0sWzExLDMwMl0sWzMwMiwyNjddLFsyNjcsMTFdLFs0NTIsMzUwXSxbMzUwLDM0OV0sWzM0OSw0NTJdLFszMDIsMzAzXSxbMzAzLDI2OV0sWzI2OSwzMDJdLFszNTcsMzQzXSxbMzQzLDI3N10sWzI3NywzNTddLFs0NTIsNDUzXSxbNDUzLDM1N10sWzM1Nyw0NTJdLFszMzMsMzMyXSxbMzMyLDI5N10sWzI5NywzMzNdLFsxNzUsMTUyXSxbMTUyLDM3N10sWzM3NywxNzVdLFszNDcsMzQ4XSxbMzQ4LDMzMF0sWzMzMCwzNDddLFszMDMsMzA0XSxbMzA0LDI3MF0sWzI3MCwzMDNdLFs5LDMzNl0sWzMzNiwzMzddLFszMzcsOV0sWzI3OCwyNzldLFsyNzksMzYwXSxbMzYwLDI3OF0sWzQxOCwyNjJdLFsyNjIsNDMxXSxbNDMxLDQxOF0sWzMwNCw0MDhdLFs0MDgsNDA5XSxbNDA5LDMwNF0sWzMxMCw0MTVdLFs0MTUsNDA3XSxbNDA3LDMxMF0sWzI3MCw0MDldLFs0MDksNDEwXSxbNDEwLDI3MF0sWzQ1MCwzNDhdLFszNDgsMzQ3XSxbMzQ3LDQ1MF0sWzQyMiw0MzBdLFs0MzAsNDM0XSxbNDM0LDQyMl0sWzMxMywzMTRdLFszMTQsMTddLFsxNywzMTNdLFszMDYsMzA3XSxbMzA3LDM3NV0sWzM3NSwzMDZdLFszODcsMzg4XSxbMzg4LDI2MF0sWzI2MCwzODddLFsyODYsNDE0XSxbNDE0LDM5OF0sWzM5OCwyODZdLFszMzUsNDA2XSxbNDA2LDQxOF0sWzQxOCwzMzVdLFszNjQsMzY3XSxbMzY3LDQxNl0sWzQxNiwzNjRdLFs0MjMsMzU4XSxbMzU4LDMyN10sWzMyNyw0MjNdLFsyNTEsMjg0XSxbMjg0LDI5OF0sWzI5OCwyNTFdLFsyODEsNV0sWzUsNF0sWzQsMjgxXSxbMzczLDM3NF0sWzM3NCwyNTNdLFsyNTMsMzczXSxbMzA3LDMyMF0sWzMyMCwzMjFdLFszMjEsMzA3XSxbNDI1LDQyN10sWzQyNyw0MTFdLFs0MTEsNDI1XSxbNDIxLDMxM10sWzMxMywxOF0sWzE4LDQyMV0sWzMyMSw0MDVdLFs0MDUsNDA2XSxbNDA2LDMyMV0sWzMyMCw0MDRdLFs0MDQsNDA1XSxbNDA1LDMyMF0sWzMxNSwxNl0sWzE2LDE3XSxbMTcsMzE1XSxbNDI2LDQyNV0sWzQyNSwyNjZdLFsyNjYsNDI2XSxbMzc3LDQwMF0sWzQwMCwzNjldLFszNjksMzc3XSxbMzIyLDM5MV0sWzM5MSwyNjldLFsyNjksMzIyXSxbNDE3LDQ2NV0sWzQ2NSw0NjRdLFs0NjQsNDE3XSxbMzg2LDI1N10sWzI1NywyNThdLFsyNTgsMzg2XSxbNDY2LDI2MF0sWzI2MCwzODhdLFszODgsNDY2XSxbNDU2LDM5OV0sWzM5OSw0MTldLFs0MTksNDU2XSxbMjg0LDMzMl0sWzMzMiwzMzNdLFszMzMsMjg0XSxbNDE3LDI4NV0sWzI4NSw4XSxbOCw0MTddLFszNDYsMzQwXSxbMzQwLDI2MV0sWzI2MSwzNDZdLFs0MTMsNDQxXSxbNDQxLDI4NV0sWzI4NSw0MTNdLFszMjcsNDYwXSxbNDYwLDMyOF0sWzMyOCwzMjddLFszNTUsMzcxXSxbMzcxLDMyOV0sWzMyOSwzNTVdLFszOTIsNDM5XSxbNDM5LDQzOF0sWzQzOCwzOTJdLFszODIsMzQxXSxbMzQxLDI1Nl0sWzI1NiwzODJdLFs0MjksNDIwXSxbNDIwLDM2MF0sWzM2MCw0MjldLFszNjQsMzk0XSxbMzk0LDM3OV0sWzM3OSwzNjRdLFsyNzcsMzQzXSxbMzQzLDQzN10sWzQzNywyNzddLFs0NDMsNDQ0XSxbNDQ0LDI4M10sWzI4Myw0NDNdLFsyNzUsNDQwXSxbNDQwLDM2M10sWzM2MywyNzVdLFs0MzEsMjYyXSxbMjYyLDM2OV0sWzM2OSw0MzFdLFsyOTcsMzM4XSxbMzM4LDMzN10sWzMzNywyOTddLFsyNzMsMzc1XSxbMzc1LDMyMV0sWzMyMSwyNzNdLFs0NTAsNDUxXSxbNDUxLDM0OV0sWzM0OSw0NTBdLFs0NDYsMzQyXSxbMzQyLDQ2N10sWzQ2Nyw0NDZdLFsyOTMsMzM0XSxbMzM0LDI4Ml0sWzI4MiwyOTNdLFs0NTgsNDYxXSxbNDYxLDQ2Ml0sWzQ2Miw0NThdLFsyNzYsMzUzXSxbMzUzLDM4M10sWzM4MywyNzZdLFszMDgsMzI0XSxbMzI0LDMyNV0sWzMyNSwzMDhdLFsyNzYsMzAwXSxbMzAwLDI5M10sWzI5MywyNzZdLFszNzIsMzQ1XSxbMzQ1LDQ0N10sWzQ0NywzNzJdLFszNTIsMzQ1XSxbMzQ1LDM0MF0sWzM0MCwzNTJdLFsyNzQsMV0sWzEsMTldLFsxOSwyNzRdLFs0NTYsMjQ4XSxbMjQ4LDI4MV0sWzI4MSw0NTZdLFs0MzYsNDI3XSxbNDI3LDQyNV0sWzQyNSw0MzZdLFszODEsMjU2XSxbMjU2LDI1Ml0sWzI1MiwzODFdLFsyNjksMzkxXSxbMzkxLDM5M10sWzM5MywyNjldLFsyMDAsMTk5XSxbMTk5LDQyOF0sWzQyOCwyMDBdLFsyNjYsMzMwXSxbMzMwLDMyOV0sWzMyOSwyNjZdLFsyODcsMjczXSxbMjczLDQyMl0sWzQyMiwyODddLFsyNTAsNDYyXSxbNDYyLDMyOF0sWzMyOCwyNTBdLFsyNTgsMjg2XSxbMjg2LDM4NF0sWzM4NCwyNThdLFsyNjUsMzUzXSxbMzUzLDM0Ml0sWzM0MiwyNjVdLFszODcsMjU5XSxbMjU5LDI1N10sWzI1NywzODddLFs0MjQsNDMxXSxbNDMxLDQzMF0sWzQzMCw0MjRdLFszNDIsMzUzXSxbMzUzLDI3Nl0sWzI3NiwzNDJdLFsyNzMsMzM1XSxbMzM1LDQyNF0sWzQyNCwyNzNdLFsyOTIsMzI1XSxbMzI1LDMwN10sWzMwNywyOTJdLFszNjYsNDQ3XSxbNDQ3LDM0NV0sWzM0NSwzNjZdLFsyNzEsMzAzXSxbMzAzLDMwMl0sWzMwMiwyNzFdLFs0MjMsMjY2XSxbMjY2LDM3MV0sWzM3MSw0MjNdLFsyOTQsNDU1XSxbNDU1LDQ2MF0sWzQ2MCwyOTRdLFsyNzksMjc4XSxbMjc4LDI5NF0sWzI5NCwyNzldLFsyNzEsMjcyXSxbMjcyLDMwNF0sWzMwNCwyNzFdLFs0MzIsNDM0XSxbNDM0LDQyN10sWzQyNyw0MzJdLFsyNzIsNDA3XSxbNDA3LDQwOF0sWzQwOCwyNzJdLFszOTQsNDMwXSxbNDMwLDQzMV0sWzQzMSwzOTRdLFszOTUsMzY5XSxbMzY5LDQwMF0sWzQwMCwzOTVdLFszMzQsMzMzXSxbMzMzLDI5OV0sWzI5OSwzMzRdLFszNTEsNDE3XSxbNDE3LDE2OF0sWzE2OCwzNTFdLFszNTIsMjgwXSxbMjgwLDQxMV0sWzQxMSwzNTJdLFszMjUsMzE5XSxbMzE5LDMyMF0sWzMyMCwzMjVdLFsyOTUsMjk2XSxbMjk2LDMzNl0sWzMzNiwyOTVdLFszMTksNDAzXSxbNDAzLDQwNF0sWzQwNCwzMTldLFszMzAsMzQ4XSxbMzQ4LDM0OV0sWzM0OSwzMzBdLFsyOTMsMjk4XSxbMjk4LDMzM10sWzMzMywyOTNdLFszMjMsNDU0XSxbNDU0LDQ0N10sWzQ0NywzMjNdLFsxNSwxNl0sWzE2LDMxNV0sWzMxNSwxNV0sWzM1OCw0MjldLFs0MjksMjc5XSxbMjc5LDM1OF0sWzE0LDE1XSxbMTUsMzE2XSxbMzE2LDE0XSxbMjg1LDMzNl0sWzMzNiw5XSxbOSwyODVdLFszMjksMzQ5XSxbMzQ5LDM1MF0sWzM1MCwzMjldLFszNzQsMzgwXSxbMzgwLDI1Ml0sWzI1MiwzNzRdLFszMTgsNDAyXSxbNDAyLDQwM10sWzQwMywzMThdLFs2LDE5N10sWzE5Nyw0MTldLFs0MTksNl0sWzMxOCwzMTldLFszMTksMzI1XSxbMzI1LDMxOF0sWzM2NywzNjRdLFszNjQsMzY1XSxbMzY1LDM2N10sWzQzNSwzNjddLFszNjcsMzk3XSxbMzk3LDQzNV0sWzM0NCw0MzhdLFs0MzgsNDM5XSxbNDM5LDM0NF0sWzI3MiwyNzFdLFsyNzEsMzExXSxbMzExLDI3Ml0sWzE5NSw1XSxbNSwyODFdLFsyODEsMTk1XSxbMjczLDI4N10sWzI4NywyOTFdLFsyOTEsMjczXSxbMzk2LDQyOF0sWzQyOCwxOTldLFsxOTksMzk2XSxbMzExLDI3MV0sWzI3MSwyNjhdLFsyNjgsMzExXSxbMjgzLDQ0NF0sWzQ0NCw0NDVdLFs0NDUsMjgzXSxbMzczLDI1NF0sWzI1NCwzMzldLFszMzksMzczXSxbMjgyLDMzNF0sWzMzNCwyOTZdLFsyOTYsMjgyXSxbNDQ5LDM0N10sWzM0NywzNDZdLFszNDYsNDQ5XSxbMjY0LDQ0N10sWzQ0Nyw0NTRdLFs0NTQsMjY0XSxbMzM2LDI5Nl0sWzI5NiwyOTldLFsyOTksMzM2XSxbMzM4LDEwXSxbMTAsMTUxXSxbMTUxLDMzOF0sWzI3OCw0MzldLFs0MzksNDU1XSxbNDU1LDI3OF0sWzI5Miw0MDddLFs0MDcsNDE1XSxbNDE1LDI5Ml0sWzM1OCwzNzFdLFszNzEsMzU1XSxbMzU1LDM1OF0sWzM0MCwzNDVdLFszNDUsMzcyXSxbMzcyLDM0MF0sWzM0NiwzNDddLFszNDcsMjgwXSxbMjgwLDM0Nl0sWzQ0Miw0NDNdLFs0NDMsMjgyXSxbMjgyLDQ0Ml0sWzE5LDk0XSxbOTQsMzcwXSxbMzcwLDE5XSxbNDQxLDQ0Ml0sWzQ0MiwyOTVdLFsyOTUsNDQxXSxbMjQ4LDQxOV0sWzQxOSwxOTddLFsxOTcsMjQ4XSxbMjYzLDI1NV0sWzI1NSwzNTldLFszNTksMjYzXSxbNDQwLDI3NV0sWzI3NSwyNzRdLFsyNzQsNDQwXSxbMzAwLDM4M10sWzM4MywzNjhdLFszNjgsMzAwXSxbMzUxLDQxMl0sWzQxMiw0NjVdLFs0NjUsMzUxXSxbMjYzLDQ2N10sWzQ2Nyw0NjZdLFs0NjYsMjYzXSxbMzAxLDM2OF0sWzM2OCwzODldLFszODksMzAxXSxbMzk1LDM3OF0sWzM3OCwzNzldLFszNzksMzk1XSxbNDEyLDM1MV0sWzM1MSw0MTldLFs0MTksNDEyXSxbNDM2LDQyNl0sWzQyNiwzMjJdLFszMjIsNDM2XSxbMiwxNjRdLFsxNjQsMzkzXSxbMzkzLDJdLFszNzAsNDYyXSxbNDYyLDQ2MV0sWzQ2MSwzNzBdLFsxNjQsMF0sWzAsMjY3XSxbMjY3LDE2NF0sWzMwMiwxMV0sWzExLDEyXSxbMTIsMzAyXSxbMjY4LDEyXSxbMTIsMTNdLFsxMywyNjhdLFsyOTMsMzAwXSxbMzAwLDMwMV0sWzMwMSwyOTNdLFs0NDYsMjYxXSxbMjYxLDM0MF0sWzM0MCw0NDZdLFszMzAsMjY2XSxbMjY2LDQyNV0sWzQyNSwzMzBdLFs0MjYsNDIzXSxbNDIzLDM5MV0sWzM5MSw0MjZdLFs0MjksMzU1XSxbMzU1LDQzN10sWzQzNyw0MjldLFszOTEsMzI3XSxbMzI3LDMyNl0sWzMyNiwzOTFdLFs0NDAsNDU3XSxbNDU3LDQzOF0sWzQzOCw0NDBdLFszNDEsMzgyXSxbMzgyLDM2Ml0sWzM2MiwzNDFdLFs0NTksNDU3XSxbNDU3LDQ2MV0sWzQ2MSw0NTldLFs0MzQsNDMwXSxbNDMwLDM5NF0sWzM5NCw0MzRdLFs0MTQsNDYzXSxbNDYzLDM2Ml0sWzM2Miw0MTRdLFszOTYsMzY5XSxbMzY5LDI2Ml0sWzI2MiwzOTZdLFszNTQsNDYxXSxbNDYxLDQ1N10sWzQ1NywzNTRdLFszMTYsNDAzXSxbNDAzLDQwMl0sWzQwMiwzMTZdLFszMTUsNDA0XSxbNDA0LDQwM10sWzQwMywzMTVdLFszMTQsNDA1XSxbNDA1LDQwNF0sWzQwNCwzMTRdLFszMTMsNDA2XSxbNDA2LDQwNV0sWzQwNSwzMTNdLFs0MjEsNDE4XSxbNDE4LDQwNl0sWzQwNiw0MjFdLFszNjYsNDAxXSxbNDAxLDM2MV0sWzM2MSwzNjZdLFszMDYsNDA4XSxbNDA4LDQwN10sWzQwNywzMDZdLFsyOTEsNDA5XSxbNDA5LDQwOF0sWzQwOCwyOTFdLFsyODcsNDEwXSxbNDEwLDQwOV0sWzQwOSwyODddLFs0MzIsNDM2XSxbNDM2LDQxMF0sWzQxMCw0MzJdLFs0MzQsNDE2XSxbNDE2LDQxMV0sWzQxMSw0MzRdLFsyNjQsMzY4XSxbMzY4LDM4M10sWzM4MywyNjRdLFszMDksNDM4XSxbNDM4LDQ1N10sWzQ1NywzMDldLFszNTIsMzc2XSxbMzc2LDQwMV0sWzQwMSwzNTJdLFsyNzQsMjc1XSxbMjc1LDRdLFs0LDI3NF0sWzQyMSw0MjhdLFs0MjgsMjYyXSxbMjYyLDQyMV0sWzI5NCwzMjddLFszMjcsMzU4XSxbMzU4LDI5NF0sWzQzMyw0MTZdLFs0MTYsMzY3XSxbMzY3LDQzM10sWzI4OSw0NTVdLFs0NTUsNDM5XSxbNDM5LDI4OV0sWzQ2MiwzNzBdLFszNzAsMzI2XSxbMzI2LDQ2Ml0sWzIsMzI2XSxbMzI2LDM3MF0sWzM3MCwyXSxbMzA1LDQ2MF0sWzQ2MCw0NTVdLFs0NTUsMzA1XSxbMjU0LDQ0OV0sWzQ0OSw0NDhdLFs0NDgsMjU0XSxbMjU1LDI2MV0sWzI2MSw0NDZdLFs0NDYsMjU1XSxbMjUzLDQ1MF0sWzQ1MCw0NDldLFs0NDksMjUzXSxbMjUyLDQ1MV0sWzQ1MSw0NTBdLFs0NTAsMjUyXSxbMjU2LDQ1Ml0sWzQ1Miw0NTFdLFs0NTEsMjU2XSxbMzQxLDQ1M10sWzQ1Myw0NTJdLFs0NTIsMzQxXSxbNDEzLDQ2NF0sWzQ2NCw0NjNdLFs0NjMsNDEzXSxbNDQxLDQxM10sWzQxMyw0MTRdLFs0MTQsNDQxXSxbMjU4LDQ0Ml0sWzQ0Miw0NDFdLFs0NDEsMjU4XSxbMjU3LDQ0M10sWzQ0Myw0NDJdLFs0NDIsMjU3XSxbMjU5LDQ0NF0sWzQ0NCw0NDNdLFs0NDMsMjU5XSxbMjYwLDQ0NV0sWzQ0NSw0NDRdLFs0NDQsMjYwXSxbNDY3LDM0Ml0sWzM0Miw0NDVdLFs0NDUsNDY3XSxbNDU5LDQ1OF0sWzQ1OCwyNTBdLFsyNTAsNDU5XSxbMjg5LDM5Ml0sWzM5MiwyOTBdLFsyOTAsMjg5XSxbMjkwLDMyOF0sWzMyOCw0NjBdLFs0NjAsMjkwXSxbMzc2LDQzM10sWzQzMyw0MzVdLFs0MzUsMzc2XSxbMjUwLDI5MF0sWzI5MCwzOTJdLFszOTIsMjUwXSxbNDExLDQxNl0sWzQxNiw0MzNdLFs0MzMsNDExXSxbMzQxLDQ2M10sWzQ2Myw0NjRdLFs0NjQsMzQxXSxbNDUzLDQ2NF0sWzQ2NCw0NjVdLFs0NjUsNDUzXSxbMzU3LDQ2NV0sWzQ2NSw0MTJdLFs0MTIsMzU3XSxbMzQzLDQxMl0sWzQxMiwzOTldLFszOTksMzQzXSxbMzYwLDM2M10sWzM2Myw0NDBdLFs0NDAsMzYwXSxbNDM3LDM5OV0sWzM5OSw0NTZdLFs0NTYsNDM3XSxbNDIwLDQ1Nl0sWzQ1NiwzNjNdLFszNjMsNDIwXSxbNDAxLDQzNV0sWzQzNSwyODhdLFsyODgsNDAxXSxbMzcyLDM4M10sWzM4MywzNTNdLFszNTMsMzcyXSxbMzM5LDI1NV0sWzI1NSwyNDldLFsyNDksMzM5XSxbNDQ4LDI2MV0sWzI2MSwyNTVdLFsyNTUsNDQ4XSxbMTMzLDI0M10sWzI0MywxOTBdLFsxOTAsMTMzXSxbMTMzLDE1NV0sWzE1NSwxMTJdLFsxMTIsMTMzXSxbMzMsMjQ2XSxbMjQ2LDI0N10sWzI0NywzM10sWzMzLDEzMF0sWzEzMCwyNV0sWzI1LDMzXSxbMzk4LDM4NF0sWzM4NCwyODZdLFsyODYsMzk4XSxbMzYyLDM5OF0sWzM5OCw0MTRdLFs0MTQsMzYyXSxbMzYyLDQ2M10sWzQ2MywzNDFdLFszNDEsMzYyXSxbMjYzLDM1OV0sWzM1OSw0NjddLFs0NjcsMjYzXSxbMjYzLDI0OV0sWzI0OSwyNTVdLFsyNTUsMjYzXSxbNDY2LDQ2N10sWzQ2NywyNjBdLFsyNjAsNDY2XSxbNzUsNjBdLFs2MCwxNjZdLFsxNjYsNzVdLFsyMzgsMjM5XSxbMjM5LDc5XSxbNzksMjM4XSxbMTYyLDEyN10sWzEyNywxMzldLFsxMzksMTYyXSxbNzIsMTFdLFsxMSwzN10sWzM3LDcyXSxbMTIxLDIzMl0sWzIzMiwxMjBdLFsxMjAsMTIxXSxbNzMsNzJdLFs3MiwzOV0sWzM5LDczXSxbMTE0LDEyOF0sWzEyOCw0N10sWzQ3LDExNF0sWzIzMywyMzJdLFsyMzIsMTI4XSxbMTI4LDIzM10sWzEwMywxMDRdLFsxMDQsNjddLFs2NywxMDNdLFsxNTIsMTc1XSxbMTc1LDE0OF0sWzE0OCwxNTJdLFsxMTksMTE4XSxbMTE4LDEwMV0sWzEwMSwxMTldLFs3NCw3M10sWzczLDQwXSxbNDAsNzRdLFsxMDcsOV0sWzksMTA4XSxbMTA4LDEwN10sWzQ5LDQ4XSxbNDgsMTMxXSxbMTMxLDQ5XSxbMzIsMTk0XSxbMTk0LDIxMV0sWzIxMSwzMl0sWzE4NCw3NF0sWzc0LDE4NV0sWzE4NSwxODRdLFsxOTEsODBdLFs4MCwxODNdLFsxODMsMTkxXSxbMTg1LDQwXSxbNDAsMTg2XSxbMTg2LDE4NV0sWzExOSwyMzBdLFsyMzAsMTE4XSxbMTE4LDExOV0sWzIxMCwyMDJdLFsyMDIsMjE0XSxbMjE0LDIxMF0sWzg0LDgzXSxbODMsMTddLFsxNyw4NF0sWzc3LDc2XSxbNzYsMTQ2XSxbMTQ2LDc3XSxbMTYxLDE2MF0sWzE2MCwzMF0sWzMwLDE2MV0sWzE5MCw1Nl0sWzU2LDE3M10sWzE3MywxOTBdLFsxODIsMTA2XSxbMTA2LDE5NF0sWzE5NCwxODJdLFsxMzgsMTM1XSxbMTM1LDE5Ml0sWzE5MiwxMzhdLFsxMjksMjAzXSxbMjAzLDk4XSxbOTgsMTI5XSxbNTQsMjFdLFsyMSw2OF0sWzY4LDU0XSxbNSw1MV0sWzUxLDRdLFs0LDVdLFsxNDUsMTQ0XSxbMTQ0LDIzXSxbMjMsMTQ1XSxbOTAsNzddLFs3Nyw5MV0sWzkxLDkwXSxbMjA3LDIwNV0sWzIwNSwxODddLFsxODcsMjA3XSxbODMsMjAxXSxbMjAxLDE4XSxbMTgsODNdLFsxODEsOTFdLFs5MSwxODJdLFsxODIsMTgxXSxbMTgwLDkwXSxbOTAsMTgxXSxbMTgxLDE4MF0sWzE2LDg1XSxbODUsMTddLFsxNywxNl0sWzIwNSwyMDZdLFsyMDYsMzZdLFszNiwyMDVdLFsxNzYsMTQ4XSxbMTQ4LDE0MF0sWzE0MCwxNzZdLFsxNjUsOTJdLFs5MiwzOV0sWzM5LDE2NV0sWzI0NSwxOTNdLFsxOTMsMjQ0XSxbMjQ0LDI0NV0sWzI3LDE1OV0sWzE1OSwyOF0sWzI4LDI3XSxbMzAsMjQ3XSxbMjQ3LDE2MV0sWzE2MSwzMF0sWzE3NCwyMzZdLFsyMzYsMTk2XSxbMTk2LDE3NF0sWzEwMyw1NF0sWzU0LDEwNF0sWzEwNCwxMDNdLFs1NSwxOTNdLFsxOTMsOF0sWzgsNTVdLFsxMTEsMTE3XSxbMTE3LDMxXSxbMzEsMTExXSxbMjIxLDE4OV0sWzE4OSw1NV0sWzU1LDIyMV0sWzI0MCw5OF0sWzk4LDk5XSxbOTksMjQwXSxbMTQyLDEyNl0sWzEyNiwxMDBdLFsxMDAsMTQyXSxbMjE5LDE2Nl0sWzE2NiwyMThdLFsyMTgsMjE5XSxbMTEyLDE1NV0sWzE1NSwyNl0sWzI2LDExMl0sWzE5OCwyMDldLFsyMDksMTMxXSxbMTMxLDE5OF0sWzE2OSwxMzVdLFsxMzUsMTUwXSxbMTUwLDE2OV0sWzExNCw0N10sWzQ3LDIxN10sWzIxNywxMTRdLFsyMjQsMjIzXSxbMjIzLDUzXSxbNTMsMjI0XSxbMjIwLDQ1XSxbNDUsMTM0XSxbMTM0LDIyMF0sWzMyLDIxMV0sWzIxMSwxNDBdLFsxNDAsMzJdLFsxMDksNjddLFs2NywxMDhdLFsxMDgsMTA5XSxbMTQ2LDQzXSxbNDMsOTFdLFs5MSwxNDZdLFsyMzEsMjMwXSxbMjMwLDEyMF0sWzEyMCwyMzFdLFsxMTMsMjI2XSxbMjI2LDI0N10sWzI0NywxMTNdLFsxMDUsNjNdLFs2Myw1Ml0sWzUyLDEwNV0sWzI0MSwyMzhdLFsyMzgsMjQyXSxbMjQyLDI0MV0sWzEyNCw0Nl0sWzQ2LDE1Nl0sWzE1NiwxMjRdLFs5NSw3OF0sWzc4LDk2XSxbOTYsOTVdLFs3MCw0Nl0sWzQ2LDYzXSxbNjMsNzBdLFsxMTYsMTQzXSxbMTQzLDIyN10sWzIyNywxMTZdLFsxMTYsMTIzXSxbMTIzLDExMV0sWzExMSwxMTZdLFsxLDQ0XSxbNDQsMTldLFsxOSwxXSxbMywyMzZdLFsyMzYsNTFdLFs1MSwzXSxbMjA3LDIxNl0sWzIxNiwyMDVdLFsyMDUsMjA3XSxbMjYsMTU0XSxbMTU0LDIyXSxbMjIsMjZdLFsxNjUsMzldLFszOSwxNjddLFsxNjcsMTY1XSxbMTk5LDIwMF0sWzIwMCwyMDhdLFsyMDgsMTk5XSxbMTAxLDM2XSxbMzYsMTAwXSxbMTAwLDEwMV0sWzQzLDU3XSxbNTcsMjAyXSxbMjAyLDQzXSxbMjQyLDIwXSxbMjAsOTldLFs5OSwyNDJdLFs1NiwyOF0sWzI4LDE1N10sWzE1Nyw1Nl0sWzEyNCwzNV0sWzM1LDExM10sWzExMywxMjRdLFsyOSwxNjBdLFsxNjAsMjddLFsyNywyOV0sWzIxMSwyMDRdLFsyMDQsMjEwXSxbMjEwLDIxMV0sWzEyNCwxMTNdLFsxMTMsNDZdLFs0NiwxMjRdLFsxMDYsNDNdLFs0MywyMDRdLFsyMDQsMTA2XSxbOTYsNjJdLFs2Miw3N10sWzc3LDk2XSxbMjI3LDEzN10sWzEzNywxMTZdLFsxMTYsMjI3XSxbNzMsNDFdLFs0MSw3Ml0sWzcyLDczXSxbMzYsMjAzXSxbMjAzLDE0Ml0sWzE0MiwzNl0sWzIzNSw2NF0sWzY0LDI0MF0sWzI0MCwyMzVdLFs0OCw0OV0sWzQ5LDY0XSxbNjQsNDhdLFs0Miw0MV0sWzQxLDc0XSxbNzQsNDJdLFsyMTQsMjEyXSxbMjEyLDIwN10sWzIwNywyMTRdLFsxODMsNDJdLFs0MiwxODRdLFsxODQsMTgzXSxbMjEwLDE2OV0sWzE2OSwyMTFdLFsyMTEsMjEwXSxbMTQwLDE3MF0sWzE3MCwxNzZdLFsxNzYsMTQwXSxbMTA0LDEwNV0sWzEwNSw2OV0sWzY5LDEwNF0sWzE5MywxMjJdLFsxMjIsMTY4XSxbMTY4LDE5M10sWzUwLDEyM10sWzEyMywxODddLFsxODcsNTBdLFs4OSw5Nl0sWzk2LDkwXSxbOTAsODldLFs2Niw2NV0sWzY1LDEwN10sWzEwNyw2Nl0sWzE3OSw4OV0sWzg5LDE4MF0sWzE4MCwxNzldLFsxMTksMTAxXSxbMTAxLDEyMF0sWzEyMCwxMTldLFs2OCw2M10sWzYzLDEwNF0sWzEwNCw2OF0sWzIzNCw5M10sWzkzLDIyN10sWzIyNywyMzRdLFsxNiwxNV0sWzE1LDg1XSxbODUsMTZdLFsyMDksMTI5XSxbMTI5LDQ5XSxbNDksMjA5XSxbMTUsMTRdLFsxNCw4Nl0sWzg2LDE1XSxbMTA3LDU1XSxbNTUsOV0sWzksMTA3XSxbMTIwLDEwMF0sWzEwMCwxMjFdLFsxMjEsMTIwXSxbMTUzLDE0NV0sWzE0NSwyMl0sWzIyLDE1M10sWzE3OCw4OF0sWzg4LDE3OV0sWzE3OSwxNzhdLFsxOTcsNl0sWzYsMTk2XSxbMTk2LDE5N10sWzg5LDg4XSxbODgsOTZdLFs5Niw4OV0sWzEzNSwxMzhdLFsxMzgsMTM2XSxbMTM2LDEzNV0sWzEzOCwyMTVdLFsyMTUsMTcyXSxbMTcyLDEzOF0sWzIxOCwxMTVdLFsxMTUsMjE5XSxbMjE5LDIxOF0sWzQxLDQyXSxbNDIsODFdLFs4MSw0MV0sWzUsMTk1XSxbMTk1LDUxXSxbNTEsNV0sWzU3LDQzXSxbNDMsNjFdLFs2MSw1N10sWzIwOCwxNzFdLFsxNzEsMTk5XSxbMTk5LDIwOF0sWzQxLDgxXSxbODEsMzhdLFszOCw0MV0sWzIyNCw1M10sWzUzLDIyNV0sWzIyNSwyMjRdLFsyNCwxNDRdLFsxNDQsMTEwXSxbMTEwLDI0XSxbMTA1LDUyXSxbNTIsNjZdLFs2NiwxMDVdLFsxMTgsMjI5XSxbMjI5LDExN10sWzExNywxMThdLFsyMjcsMzRdLFszNCwyMzRdLFsyMzQsMjI3XSxbNjYsMTA3XSxbMTA3LDY5XSxbNjksNjZdLFsxMCwxMDldLFsxMDksMTUxXSxbMTUxLDEwXSxbMjE5LDQ4XSxbNDgsMjM1XSxbMjM1LDIxOV0sWzE4Myw2Ml0sWzYyLDE5MV0sWzE5MSwxODNdLFsxNDIsMTI5XSxbMTI5LDEyNl0sWzEyNiwxNDJdLFsxMTYsMTExXSxbMTExLDE0M10sWzE0MywxMTZdLFsxMTgsMTE3XSxbMTE3LDUwXSxbNTAsMTE4XSxbMjIzLDIyMl0sWzIyMiw1Ml0sWzUyLDIyM10sWzk0LDE5XSxbMTksMTQxXSxbMTQxLDk0XSxbMjIyLDIyMV0sWzIyMSw2NV0sWzY1LDIyMl0sWzE5NiwzXSxbMywxOTddLFsxOTcsMTk2XSxbNDUsMjIwXSxbMjIwLDQ0XSxbNDQsNDVdLFsxNTYsNzBdLFs3MCwxMzldLFsxMzksMTU2XSxbMTg4LDEyMl0sWzEyMiwyNDVdLFsyNDUsMTg4XSxbMTM5LDcxXSxbNzEsMTYyXSxbMTYyLDEzOV0sWzE0OSwxNzBdLFsxNzAsMTUwXSxbMTUwLDE0OV0sWzEyMiwxODhdLFsxODgsMTk2XSxbMTk2LDEyMl0sWzIwNiwyMTZdLFsyMTYsOTJdLFs5MiwyMDZdLFsxNjQsMl0sWzIsMTY3XSxbMTY3LDE2NF0sWzI0MiwxNDFdLFsxNDEsMjQxXSxbMjQxLDI0Ml0sWzAsMTY0XSxbMTY0LDM3XSxbMzcsMF0sWzExLDcyXSxbNzIsMTJdLFsxMiwxMV0sWzEyLDM4XSxbMzgsMTNdLFsxMywxMl0sWzcwLDYzXSxbNjMsNzFdLFs3MSw3MF0sWzMxLDIyNl0sWzIyNiwxMTFdLFsxMTEsMzFdLFszNiwxMDFdLFsxMDEsMjA1XSxbMjA1LDM2XSxbMjAzLDIwNl0sWzIwNiwxNjVdLFsxNjUsMjAzXSxbMTI2LDIwOV0sWzIwOSwyMTddLFsyMTcsMTI2XSxbOTgsMTY1XSxbMTY1LDk3XSxbOTcsOThdLFsyMzcsMjIwXSxbMjIwLDIxOF0sWzIxOCwyMzddLFsyMzcsMjM5XSxbMjM5LDI0MV0sWzI0MSwyMzddLFsyMTAsMjE0XSxbMjE0LDE2OV0sWzE2OSwyMTBdLFsxNDAsMTcxXSxbMTcxLDMyXSxbMzIsMTQwXSxbMjQxLDEyNV0sWzEyNSwyMzddLFsyMzcsMjQxXSxbMTc5LDg2XSxbODYsMTc4XSxbMTc4LDE3OV0sWzE4MCw4NV0sWzg1LDE3OV0sWzE3OSwxODBdLFsxODEsODRdLFs4NCwxODBdLFsxODAsMTgxXSxbMTgyLDgzXSxbODMsMTgxXSxbMTgxLDE4Ml0sWzE5NCwyMDFdLFsyMDEsMTgyXSxbMTgyLDE5NF0sWzE3NywxMzddLFsxMzcsMTMyXSxbMTMyLDE3N10sWzE4NCw3Nl0sWzc2LDE4M10sWzE4MywxODRdLFsxODUsNjFdLFs2MSwxODRdLFsxODQsMTg1XSxbMTg2LDU3XSxbNTcsMTg1XSxbMTg1LDE4Nl0sWzIxNiwyMTJdLFsyMTIsMTg2XSxbMTg2LDIxNl0sWzE5MiwyMTRdLFsyMTQsMTg3XSxbMTg3LDE5Ml0sWzEzOSwzNF0sWzM0LDE1Nl0sWzE1NiwxMzldLFsyMTgsNzldLFs3OSwyMzddLFsyMzcsMjE4XSxbMTQ3LDEyM10sWzEyMywxNzddLFsxNzcsMTQ3XSxbNDUsNDRdLFs0NCw0XSxbNCw0NV0sWzIwOCwyMDFdLFsyMDEsMzJdLFszMiwyMDhdLFs5OCw2NF0sWzY0LDEyOV0sWzEyOSw5OF0sWzE5MiwyMTNdLFsyMTMsMTM4XSxbMTM4LDE5Ml0sWzIzNSw1OV0sWzU5LDIxOV0sWzIxOSwyMzVdLFsxNDEsMjQyXSxbMjQyLDk3XSxbOTcsMTQxXSxbOTcsMl0sWzIsMTQxXSxbMTQxLDk3XSxbMjQwLDc1XSxbNzUsMjM1XSxbMjM1LDI0MF0sWzIyOSwyNF0sWzI0LDIyOF0sWzIyOCwyMjldLFszMSwyNV0sWzI1LDIyNl0sWzIyNiwzMV0sWzIzMCwyM10sWzIzLDIyOV0sWzIyOSwyMzBdLFsyMzEsMjJdLFsyMiwyMzBdLFsyMzAsMjMxXSxbMjMyLDI2XSxbMjYsMjMxXSxbMjMxLDIzMl0sWzIzMywxMTJdLFsxMTIsMjMyXSxbMjMyLDIzM10sWzI0NCwxODldLFsxODksMjQzXSxbMjQzLDI0NF0sWzE4OSwyMjFdLFsyMjEsMTkwXSxbMTkwLDE4OV0sWzIyMiwyOF0sWzI4LDIyMV0sWzIyMSwyMjJdLFsyMjMsMjddLFsyNywyMjJdLFsyMjIsMjIzXSxbMjI0LDI5XSxbMjksMjIzXSxbMjIzLDIyNF0sWzIyNSwzMF0sWzMwLDIyNF0sWzIyNCwyMjVdLFsxMTMsMjQ3XSxbMjQ3LDIyNV0sWzIyNSwxMTNdLFs5OSw2MF0sWzYwLDI0MF0sWzI0MCw5OV0sWzIxMywxNDddLFsxNDcsMjE1XSxbMjE1LDIxM10sWzYwLDIwXSxbMjAsMTY2XSxbMTY2LDYwXSxbMTkyLDE4N10sWzE4NywyMTNdLFsyMTMsMTkyXSxbMjQzLDExMl0sWzExMiwyNDRdLFsyNDQsMjQzXSxbMjQ0LDIzM10sWzIzMywyNDVdLFsyNDUsMjQ0XSxbMjQ1LDEyOF0sWzEyOCwxODhdLFsxODgsMjQ1XSxbMTg4LDExNF0sWzExNCwxNzRdLFsxNzQsMTg4XSxbMTM0LDEzMV0sWzEzMSwyMjBdLFsyMjAsMTM0XSxbMTc0LDIxN10sWzIxNywyMzZdLFsyMzYsMTc0XSxbMjM2LDE5OF0sWzE5OCwxMzRdLFsxMzQsMjM2XSxbMjE1LDE3N10sWzE3Nyw1OF0sWzU4LDIxNV0sWzE1NiwxNDNdLFsxNDMsMTI0XSxbMTI0LDE1Nl0sWzI1LDExMF0sWzExMCw3XSxbNywyNV0sWzMxLDIyOF0sWzIyOCwyNV0sWzI1LDMxXSxbMjY0LDM1Nl0sWzM1NiwzNjhdLFszNjgsMjY0XSxbMCwxMV0sWzExLDI2N10sWzI2NywwXSxbNDUxLDQ1Ml0sWzQ1MiwzNDldLFszNDksNDUxXSxbMjY3LDMwMl0sWzMwMiwyNjldLFsyNjksMjY3XSxbMzUwLDM1N10sWzM1NywyNzddLFsyNzcsMzUwXSxbMzUwLDQ1Ml0sWzQ1MiwzNTddLFszNTcsMzUwXSxbMjk5LDMzM10sWzMzMywyOTddLFsyOTcsMjk5XSxbMzk2LDE3NV0sWzE3NSwzNzddLFszNzcsMzk2XSxbMjgwLDM0N10sWzM0NywzMzBdLFszMzAsMjgwXSxbMjY5LDMwM10sWzMwMywyNzBdLFsyNzAsMjY5XSxbMTUxLDldLFs5LDMzN10sWzMzNywxNTFdLFszNDQsMjc4XSxbMjc4LDM2MF0sWzM2MCwzNDRdLFs0MjQsNDE4XSxbNDE4LDQzMV0sWzQzMSw0MjRdLFsyNzAsMzA0XSxbMzA0LDQwOV0sWzQwOSwyNzBdLFsyNzIsMzEwXSxbMzEwLDQwN10sWzQwNywyNzJdLFszMjIsMjcwXSxbMjcwLDQxMF0sWzQxMCwzMjJdLFs0NDksNDUwXSxbNDUwLDM0N10sWzM0Nyw0NDldLFs0MzIsNDIyXSxbNDIyLDQzNF0sWzQzNCw0MzJdLFsxOCwzMTNdLFszMTMsMTddLFsxNywxOF0sWzI5MSwzMDZdLFszMDYsMzc1XSxbMzc1LDI5MV0sWzI1OSwzODddLFszODcsMjYwXSxbMjYwLDI1OV0sWzQyNCwzMzVdLFszMzUsNDE4XSxbNDE4LDQyNF0sWzQzNCwzNjRdLFszNjQsNDE2XSxbNDE2LDQzNF0sWzM5MSw0MjNdLFs0MjMsMzI3XSxbMzI3LDM5MV0sWzMwMSwyNTFdLFsyNTEsMjk4XSxbMjk4LDMwMV0sWzI3NSwyODFdLFsyODEsNF0sWzQsMjc1XSxbMjU0LDM3M10sWzM3MywyNTNdLFsyNTMsMjU0XSxbMzc1LDMwN10sWzMwNywzMjFdLFszMjEsMzc1XSxbMjgwLDQyNV0sWzQyNSw0MTFdLFs0MTEsMjgwXSxbMjAwLDQyMV0sWzQyMSwxOF0sWzE4LDIwMF0sWzMzNSwzMjFdLFszMjEsNDA2XSxbNDA2LDMzNV0sWzMyMSwzMjBdLFszMjAsNDA1XSxbNDA1LDMyMV0sWzMxNCwzMTVdLFszMTUsMTddLFsxNywzMTRdLFs0MjMsNDI2XSxbNDI2LDI2Nl0sWzI2Niw0MjNdLFszOTYsMzc3XSxbMzc3LDM2OV0sWzM2OSwzOTZdLFsyNzAsMzIyXSxbMzIyLDI2OV0sWzI2OSwyNzBdLFs0MTMsNDE3XSxbNDE3LDQ2NF0sWzQ2NCw0MTNdLFszODUsMzg2XSxbMzg2LDI1OF0sWzI1OCwzODVdLFsyNDgsNDU2XSxbNDU2LDQxOV0sWzQxOSwyNDhdLFsyOTgsMjg0XSxbMjg0LDMzM10sWzMzMywyOThdLFsxNjgsNDE3XSxbNDE3LDhdLFs4LDE2OF0sWzQ0OCwzNDZdLFszNDYsMjYxXSxbMjYxLDQ0OF0sWzQxNyw0MTNdLFs0MTMsMjg1XSxbMjg1LDQxN10sWzMyNiwzMjddLFszMjcsMzI4XSxbMzI4LDMyNl0sWzI3NywzNTVdLFszNTUsMzI5XSxbMzI5LDI3N10sWzMwOSwzOTJdLFszOTIsNDM4XSxbNDM4LDMwOV0sWzM4MSwzODJdLFszODIsMjU2XSxbMjU2LDM4MV0sWzI3OSw0MjldLFs0MjksMzYwXSxbMzYwLDI3OV0sWzM2NSwzNjRdLFszNjQsMzc5XSxbMzc5LDM2NV0sWzM1NSwyNzddLFsyNzcsNDM3XSxbNDM3LDM1NV0sWzI4Miw0NDNdLFs0NDMsMjgzXSxbMjgzLDI4Ml0sWzI4MSwyNzVdLFsyNzUsMzYzXSxbMzYzLDI4MV0sWzM5NSw0MzFdLFs0MzEsMzY5XSxbMzY5LDM5NV0sWzI5OSwyOTddLFsyOTcsMzM3XSxbMzM3LDI5OV0sWzMzNSwyNzNdLFsyNzMsMzIxXSxbMzIxLDMzNV0sWzM0OCw0NTBdLFs0NTAsMzQ5XSxbMzQ5LDM0OF0sWzM1OSw0NDZdLFs0NDYsNDY3XSxbNDY3LDM1OV0sWzI4MywyOTNdLFsyOTMsMjgyXSxbMjgyLDI4M10sWzI1MCw0NThdLFs0NTgsNDYyXSxbNDYyLDI1MF0sWzMwMCwyNzZdLFsyNzYsMzgzXSxbMzgzLDMwMF0sWzI5MiwzMDhdLFszMDgsMzI1XSxbMzI1LDI5Ml0sWzI4MywyNzZdLFsyNzYsMjkzXSxbMjkzLDI4M10sWzI2NCwzNzJdLFszNzIsNDQ3XSxbNDQ3LDI2NF0sWzM0NiwzNTJdLFszNTIsMzQwXSxbMzQwLDM0Nl0sWzM1NCwyNzRdLFsyNzQsMTldLFsxOSwzNTRdLFszNjMsNDU2XSxbNDU2LDI4MV0sWzI4MSwzNjNdLFs0MjYsNDM2XSxbNDM2LDQyNV0sWzQyNSw0MjZdLFszODAsMzgxXSxbMzgxLDI1Ml0sWzI1MiwzODBdLFsyNjcsMjY5XSxbMjY5LDM5M10sWzM5MywyNjddLFs0MjEsMjAwXSxbMjAwLDQyOF0sWzQyOCw0MjFdLFszNzEsMjY2XSxbMjY2LDMyOV0sWzMyOSwzNzFdLFs0MzIsMjg3XSxbMjg3LDQyMl0sWzQyMiw0MzJdLFsyOTAsMjUwXSxbMjUwLDMyOF0sWzMyOCwyOTBdLFszODUsMjU4XSxbMjU4LDM4NF0sWzM4NCwzODVdLFs0NDYsMjY1XSxbMjY1LDM0Ml0sWzM0Miw0NDZdLFszODYsMzg3XSxbMzg3LDI1N10sWzI1NywzODZdLFs0MjIsNDI0XSxbNDI0LDQzMF0sWzQzMCw0MjJdLFs0NDUsMzQyXSxbMzQyLDI3Nl0sWzI3Niw0NDVdLFs0MjIsMjczXSxbMjczLDQyNF0sWzQyNCw0MjJdLFszMDYsMjkyXSxbMjkyLDMwN10sWzMwNywzMDZdLFszNTIsMzY2XSxbMzY2LDM0NV0sWzM0NSwzNTJdLFsyNjgsMjcxXSxbMjcxLDMwMl0sWzMwMiwyNjhdLFszNTgsNDIzXSxbNDIzLDM3MV0sWzM3MSwzNThdLFszMjcsMjk0XSxbMjk0LDQ2MF0sWzQ2MCwzMjddLFszMzEsMjc5XSxbMjc5LDI5NF0sWzI5NCwzMzFdLFszMDMsMjcxXSxbMjcxLDMwNF0sWzMwNCwzMDNdLFs0MzYsNDMyXSxbNDMyLDQyN10sWzQyNyw0MzZdLFszMDQsMjcyXSxbMjcyLDQwOF0sWzQwOCwzMDRdLFszOTUsMzk0XSxbMzk0LDQzMV0sWzQzMSwzOTVdLFszNzgsMzk1XSxbMzk1LDQwMF0sWzQwMCwzNzhdLFsyOTYsMzM0XSxbMzM0LDI5OV0sWzI5OSwyOTZdLFs2LDM1MV0sWzM1MSwxNjhdLFsxNjgsNl0sWzM3NiwzNTJdLFszNTIsNDExXSxbNDExLDM3Nl0sWzMwNywzMjVdLFszMjUsMzIwXSxbMzIwLDMwN10sWzI4NSwyOTVdLFsyOTUsMzM2XSxbMzM2LDI4NV0sWzMyMCwzMTldLFszMTksNDA0XSxbNDA0LDMyMF0sWzMyOSwzMzBdLFszMzAsMzQ5XSxbMzQ5LDMyOV0sWzMzNCwyOTNdLFsyOTMsMzMzXSxbMzMzLDMzNF0sWzM2NiwzMjNdLFszMjMsNDQ3XSxbNDQ3LDM2Nl0sWzMxNiwxNV0sWzE1LDMxNV0sWzMxNSwzMTZdLFszMzEsMzU4XSxbMzU4LDI3OV0sWzI3OSwzMzFdLFszMTcsMTRdLFsxNCwzMTZdLFszMTYsMzE3XSxbOCwyODVdLFsyODUsOV0sWzksOF0sWzI3NywzMjldLFszMjksMzUwXSxbMzUwLDI3N10sWzI1MywzNzRdLFszNzQsMjUyXSxbMjUyLDI1M10sWzMxOSwzMThdLFszMTgsNDAzXSxbNDAzLDMxOV0sWzM1MSw2XSxbNiw0MTldLFs0MTksMzUxXSxbMzI0LDMxOF0sWzMxOCwzMjVdLFszMjUsMzI0XSxbMzk3LDM2N10sWzM2NywzNjVdLFszNjUsMzk3XSxbMjg4LDQzNV0sWzQzNSwzOTddLFszOTcsMjg4XSxbMjc4LDM0NF0sWzM0NCw0MzldLFs0MzksMjc4XSxbMzEwLDI3Ml0sWzI3MiwzMTFdLFszMTEsMzEwXSxbMjQ4LDE5NV0sWzE5NSwyODFdLFsyODEsMjQ4XSxbMzc1LDI3M10sWzI3MywyOTFdLFsyOTEsMzc1XSxbMTc1LDM5Nl0sWzM5NiwxOTldLFsxOTksMTc1XSxbMzEyLDMxMV0sWzMxMSwyNjhdLFsyNjgsMzEyXSxbMjc2LDI4M10sWzI4Myw0NDVdLFs0NDUsMjc2XSxbMzkwLDM3M10sWzM3MywzMzldLFszMzksMzkwXSxbMjk1LDI4Ml0sWzI4MiwyOTZdLFsyOTYsMjk1XSxbNDQ4LDQ0OV0sWzQ0OSwzNDZdLFszNDYsNDQ4XSxbMzU2LDI2NF0sWzI2NCw0NTRdLFs0NTQsMzU2XSxbMzM3LDMzNl0sWzMzNiwyOTldLFsyOTksMzM3XSxbMzM3LDMzOF0sWzMzOCwxNTFdLFsxNTEsMzM3XSxbMjk0LDI3OF0sWzI3OCw0NTVdLFs0NTUsMjk0XSxbMzA4LDI5Ml0sWzI5Miw0MTVdLFs0MTUsMzA4XSxbNDI5LDM1OF0sWzM1OCwzNTVdLFszNTUsNDI5XSxbMjY1LDM0MF0sWzM0MCwzNzJdLFszNzIsMjY1XSxbMzUyLDM0Nl0sWzM0NiwyODBdLFsyODAsMzUyXSxbMjk1LDQ0Ml0sWzQ0MiwyODJdLFsyODIsMjk1XSxbMzU0LDE5XSxbMTksMzcwXSxbMzcwLDM1NF0sWzI4NSw0NDFdLFs0NDEsMjk1XSxbMjk1LDI4NV0sWzE5NSwyNDhdLFsyNDgsMTk3XSxbMTk3LDE5NV0sWzQ1Nyw0NDBdLFs0NDAsMjc0XSxbMjc0LDQ1N10sWzMwMSwzMDBdLFszMDAsMzY4XSxbMzY4LDMwMV0sWzQxNywzNTFdLFszNTEsNDY1XSxbNDY1LDQxN10sWzI1MSwzMDFdLFszMDEsMzg5XSxbMzg5LDI1MV0sWzM5NCwzOTVdLFszOTUsMzc5XSxbMzc5LDM5NF0sWzM5OSw0MTJdLFs0MTIsNDE5XSxbNDE5LDM5OV0sWzQxMCw0MzZdLFs0MzYsMzIyXSxbMzIyLDQxMF0sWzMyNiwyXSxbMiwzOTNdLFszOTMsMzI2XSxbMzU0LDM3MF0sWzM3MCw0NjFdLFs0NjEsMzU0XSxbMzkzLDE2NF0sWzE2NCwyNjddLFsyNjcsMzkzXSxbMjY4LDMwMl0sWzMwMiwxMl0sWzEyLDI2OF0sWzMxMiwyNjhdLFsyNjgsMTNdLFsxMywzMTJdLFsyOTgsMjkzXSxbMjkzLDMwMV0sWzMwMSwyOThdLFsyNjUsNDQ2XSxbNDQ2LDM0MF0sWzM0MCwyNjVdLFsyODAsMzMwXSxbMzMwLDQyNV0sWzQyNSwyODBdLFszMjIsNDI2XSxbNDI2LDM5MV0sWzM5MSwzMjJdLFs0MjAsNDI5XSxbNDI5LDQzN10sWzQzNyw0MjBdLFszOTMsMzkxXSxbMzkxLDMyNl0sWzMyNiwzOTNdLFszNDQsNDQwXSxbNDQwLDQzOF0sWzQzOCwzNDRdLFs0NTgsNDU5XSxbNDU5LDQ2MV0sWzQ2MSw0NThdLFszNjQsNDM0XSxbNDM0LDM5NF0sWzM5NCwzNjRdLFs0MjgsMzk2XSxbMzk2LDI2Ml0sWzI2Miw0MjhdLFsyNzQsMzU0XSxbMzU0LDQ1N10sWzQ1NywyNzRdLFszMTcsMzE2XSxbMzE2LDQwMl0sWzQwMiwzMTddLFszMTYsMzE1XSxbMzE1LDQwM10sWzQwMywzMTZdLFszMTUsMzE0XSxbMzE0LDQwNF0sWzQwNCwzMTVdLFszMTQsMzEzXSxbMzEzLDQwNV0sWzQwNSwzMTRdLFszMTMsNDIxXSxbNDIxLDQwNl0sWzQwNiwzMTNdLFszMjMsMzY2XSxbMzY2LDM2MV0sWzM2MSwzMjNdLFsyOTIsMzA2XSxbMzA2LDQwN10sWzQwNywyOTJdLFszMDYsMjkxXSxbMjkxLDQwOF0sWzQwOCwzMDZdLFsyOTEsMjg3XSxbMjg3LDQwOV0sWzQwOSwyOTFdLFsyODcsNDMyXSxbNDMyLDQxMF0sWzQxMCwyODddLFs0MjcsNDM0XSxbNDM0LDQxMV0sWzQxMSw0MjddLFszNzIsMjY0XSxbMjY0LDM4M10sWzM4MywzNzJdLFs0NTksMzA5XSxbMzA5LDQ1N10sWzQ1Nyw0NTldLFszNjYsMzUyXSxbMzUyLDQwMV0sWzQwMSwzNjZdLFsxLDI3NF0sWzI3NCw0XSxbNCwxXSxbNDE4LDQyMV0sWzQyMSwyNjJdLFsyNjIsNDE4XSxbMzMxLDI5NF0sWzI5NCwzNThdLFszNTgsMzMxXSxbNDM1LDQzM10sWzQzMywzNjddLFszNjcsNDM1XSxbMzkyLDI4OV0sWzI4OSw0MzldLFs0MzksMzkyXSxbMzI4LDQ2Ml0sWzQ2MiwzMjZdLFszMjYsMzI4XSxbOTQsMl0sWzIsMzcwXSxbMzcwLDk0XSxbMjg5LDMwNV0sWzMwNSw0NTVdLFs0NTUsMjg5XSxbMzM5LDI1NF0sWzI1NCw0NDhdLFs0NDgsMzM5XSxbMzU5LDI1NV0sWzI1NSw0NDZdLFs0NDYsMzU5XSxbMjU0LDI1M10sWzI1Myw0NDldLFs0NDksMjU0XSxbMjUzLDI1Ml0sWzI1Miw0NTBdLFs0NTAsMjUzXSxbMjUyLDI1Nl0sWzI1Niw0NTFdLFs0NTEsMjUyXSxbMjU2LDM0MV0sWzM0MSw0NTJdLFs0NTIsMjU2XSxbNDE0LDQxM10sWzQxMyw0NjNdLFs0NjMsNDE0XSxbMjg2LDQ0MV0sWzQ0MSw0MTRdLFs0MTQsMjg2XSxbMjg2LDI1OF0sWzI1OCw0NDFdLFs0NDEsMjg2XSxbMjU4LDI1N10sWzI1Nyw0NDJdLFs0NDIsMjU4XSxbMjU3LDI1OV0sWzI1OSw0NDNdLFs0NDMsMjU3XSxbMjU5LDI2MF0sWzI2MCw0NDRdLFs0NDQsMjU5XSxbMjYwLDQ2N10sWzQ2Nyw0NDVdLFs0NDUsMjYwXSxbMzA5LDQ1OV0sWzQ1OSwyNTBdLFsyNTAsMzA5XSxbMzA1LDI4OV0sWzI4OSwyOTBdLFsyOTAsMzA1XSxbMzA1LDI5MF0sWzI5MCw0NjBdLFs0NjAsMzA1XSxbNDAxLDM3Nl0sWzM3Niw0MzVdLFs0MzUsNDAxXSxbMzA5LDI1MF0sWzI1MCwzOTJdLFszOTIsMzA5XSxbMzc2LDQxMV0sWzQxMSw0MzNdLFs0MzMsMzc2XSxbNDUzLDM0MV0sWzM0MSw0NjRdLFs0NjQsNDUzXSxbMzU3LDQ1M10sWzQ1Myw0NjVdLFs0NjUsMzU3XSxbMzQzLDM1N10sWzM1Nyw0MTJdLFs0MTIsMzQzXSxbNDM3LDM0M10sWzM0MywzOTldLFszOTksNDM3XSxbMzQ0LDM2MF0sWzM2MCw0NDBdLFs0NDAsMzQ0XSxbNDIwLDQzN10sWzQzNyw0NTZdLFs0NTYsNDIwXSxbMzYwLDQyMF0sWzQyMCwzNjNdLFszNjMsMzYwXSxbMzYxLDQwMV0sWzQwMSwyODhdLFsyODgsMzYxXSxbMjY1LDM3Ml0sWzM3MiwzNTNdLFszNTMsMjY1XSxbMzkwLDMzOV0sWzMzOSwyNDldLFsyNDksMzkwXSxbMzM5LDQ0OF0sWzQ0OCwyNTVdLFsyNTUsMzM5XSk7ZnVuY3Rpb24gdWgodCl7dC5qPXtmYWNlTGFuZG1hcmtzOltdLGZhY2VCbGVuZHNoYXBlczpbXSxmYWNpYWxUcmFuc2Zvcm1hdGlvbk1hdHJpeGVzOltdfTt9dmFyIGxoPWNsYXNzIGV4dGVuZHMgWmF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgemEodCxlKSwiaW1hZ2VfaW4iLCJub3JtX3JlY3QiLCExKSx0aGlzLmo9e2ZhY2VMYW5kbWFya3M6W10sZmFjZUJsZW5kc2hhcGVzOltdLGZhY2lhbFRyYW5zZm9ybWF0aW9uTWF0cml4ZXM6W119LHRoaXMub3V0cHV0RmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlcz10aGlzLm91dHB1dEZhY2VCbGVuZHNoYXBlcz0hMSx1bih0PXRoaXMuaD1uZXcgRHMsMCwxLGU9bmV3IHhzKSx0aGlzLnY9bmV3IE5zLHVuKHRoaXMuaCwwLDMsdGhpcy52KSx0aGlzLnM9bmV3IFJzLHVuKHRoaXMuaCwwLDIsdGhpcy5zKSxFbih0aGlzLnMsNCwxKSx3bih0aGlzLnMsMiwuNSksd24odGhpcy52LDIsLjUpLHduKHRoaXMuaCw0LC41KTt9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGFuKHRoaXMuaCx4cywxKX1zZXQgYmFzZU9wdGlvbnModCl7dW4odGhpcy5oLDAsMSx0KTt9byh0KXtyZXR1cm4gIm51bUZhY2VzImluIHQmJkVuKHRoaXMucyw0LHQubnVtRmFjZXM/PzEpLCJtaW5GYWNlRGV0ZWN0aW9uQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLnMsMix0Lm1pbkZhY2VEZXRlY3Rpb25Db25maWRlbmNlPz8uNSksIm1pblRyYWNraW5nQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLmgsNCx0Lm1pblRyYWNraW5nQ29uZmlkZW5jZT8/LjUpLCJtaW5GYWNlUHJlc2VuY2VDb25maWRlbmNlImluIHQmJnduKHRoaXMudiwyLHQubWluRmFjZVByZXNlbmNlQ29uZmlkZW5jZT8/LjUpLCJvdXRwdXRGYWNlQmxlbmRzaGFwZXMiaW4gdCYmKHRoaXMub3V0cHV0RmFjZUJsZW5kc2hhcGVzPSEhdC5vdXRwdXRGYWNlQmxlbmRzaGFwZXMpLCJvdXRwdXRGYWNpYWxUcmFuc2Zvcm1hdGlvbk1hdHJpeGVzImluIHQmJih0aGlzLm91dHB1dEZhY2lhbFRyYW5zZm9ybWF0aW9uTWF0cml4ZXM9ISF0Lm91dHB1dEZhY2lhbFRyYW5zZm9ybWF0aW9uTWF0cml4ZXMpLHRoaXMubCh0KX1EKHQsZSl7cmV0dXJuIHVoKHRoaXMpLCRhKHRoaXMsdCxlKSx0aGlzLmp9Rih0LGUsbil7cmV0dXJuIHVoKHRoaXMpLHFhKHRoaXMsdCxuLGUpLHRoaXMuan1tKCl7dmFyIHQ9bmV3ICRpO0tpKHQsImltYWdlX2luIiksS2kodCwibm9ybV9yZWN0IiksWWkodCwiZmFjZV9sYW5kbWFya3MiKTtjb25zdCBlPW5ldyBDaTtLbihlLGpzLHRoaXMuaCk7Y29uc3Qgbj1uZXcgVmk7QmkobiwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5mYWNlX2xhbmRtYXJrZXIuRmFjZUxhbmRtYXJrZXJHcmFwaCIpLEdpKG4sIklNQUdFOmltYWdlX2luIiksR2kobiwiTk9STV9SRUNUOm5vcm1fcmVjdCIpLGppKG4sIk5PUk1fTEFORE1BUktTOmZhY2VfbGFuZG1hcmtzIiksbi5vKGUpLHppKHQsbiksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoImZhY2VfbGFuZG1hcmtzIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXQ9Y3MoZSksdGhpcy5qLmZhY2VMYW5kbWFya3MucHVzaChGbyh0KSk7JG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImZhY2VfbGFuZG1hcmtzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHRoaXMub3V0cHV0RmFjZUJsZW5kc2hhcGVzJiYoWWkodCwiYmxlbmRzaGFwZXMiKSxqaShuLCJCTEVORFNIQVBFUzpibGVuZHNoYXBlcyIpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJibGVuZHNoYXBlcyIsKCh0LGUpPT57aWYodGhpcy5vdXRwdXRGYWNlQmxlbmRzaGFwZXMpZm9yKGNvbnN0IGUgb2YgdCl0PWVzKGUpLHRoaXMuai5mYWNlQmxlbmRzaGFwZXMucHVzaCh4byh0LmcoKT8/W10pKTskbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiYmxlbmRzaGFwZXMiLCh0PT57JG8odGhpcyx0KTt9KSkpLHRoaXMub3V0cHV0RmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlcyYmKFlpKHQsImZhY2VfZ2VvbWV0cnkiKSxqaShuLCJGQUNFX0dFT01FVFJZOmZhY2VfZ2VvbWV0cnkiKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigiZmFjZV9nZW9tZXRyeSIsKCh0LGUpPT57aWYodGhpcy5vdXRwdXRGYWNpYWxUcmFuc2Zvcm1hdGlvbk1hdHJpeGVzKWZvcihjb25zdCBlIG9mIHQpKHQ9YW4oQ3MoZSksdXMsMikpJiZ0aGlzLmouZmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlcy5wdXNoKHtyb3dzOmduKG1uKHQsMSksMCk/PzAsY29sdW1uczpnbihtbih0LDIpLDApPz8wLGRhdGE6emUodCwzLFd0KS5zbGljZSgpPz9bXX0pOyRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJmYWNlX2dlb21ldHJ5IiwodD0+eyRvKHRoaXMsdCk7fSkpKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApO319O2xoLnByb3RvdHlwZS5kZXRlY3RGb3JWaWRlbz1saC5wcm90b3R5cGUuRixsaC5wcm90b3R5cGUuZGV0ZWN0PWxoLnByb3RvdHlwZS5ELGxoLnByb3RvdHlwZS5zZXRPcHRpb25zPWxoLnByb3RvdHlwZS5vLGxoLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EobGgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LGxoLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBLYShsaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxsaC5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBLYShsaCx0LGUpfSxsaC5GQUNFX0xBTkRNQVJLU19MSVBTPXRoLGxoLkZBQ0VfTEFORE1BUktTX0xFRlRfRVlFPWVoLGxoLkZBQ0VfTEFORE1BUktTX0xFRlRfRVlFQlJPVz1uaCxsaC5GQUNFX0xBTkRNQVJLU19MRUZUX0lSSVM9cmgsbGguRkFDRV9MQU5ETUFSS1NfUklHSFRfRVlFPWloLGxoLkZBQ0VfTEFORE1BUktTX1JJR0hUX0VZRUJST1c9c2gsbGguRkFDRV9MQU5ETUFSS1NfUklHSFRfSVJJUz1vaCxsaC5GQUNFX0xBTkRNQVJLU19GQUNFX09WQUw9YWgsbGguRkFDRV9MQU5ETUFSS1NfQ09OVE9VUlM9aGgsbGguRkFDRV9MQU5ETUFSS1NfVEVTU0VMQVRJT049Y2g7dmFyIGZoPWNsYXNzIGV4dGVuZHMgWmF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgemEodCxlKSwiaW1hZ2VfaW4iLCJub3JtX3JlY3QiLCEwKSx1bih0PXRoaXMuaj1uZXcgVnMsMCwxLGU9bmV3IHhzKTt9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGFuKHRoaXMuaix4cywxKX1zZXQgYmFzZU9wdGlvbnModCl7dW4odGhpcy5qLDAsMSx0KTt9byh0KXtyZXR1cm4gc3VwZXIubCh0KX1QYSh0LGUsbil7Y29uc3Qgcj0iZnVuY3Rpb24iIT10eXBlb2YgZT9lOnt9O2lmKHRoaXMuaD0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOm4sJGEodGhpcyx0LHI/P3t9KSwhdGhpcy5oKXJldHVybiB0aGlzLnN9bSgpe3ZhciB0PW5ldyAkaTtLaSh0LCJpbWFnZV9pbiIpLEtpKHQsIm5vcm1fcmVjdCIpLFlpKHQsInN0eWxpemVkX2ltYWdlIik7Y29uc3QgZT1uZXcgQ2k7S24oZSxYcyx0aGlzLmopO2NvbnN0IG49bmV3IFZpO0JpKG4sIm1lZGlhcGlwZS50YXNrcy52aXNpb24uZmFjZV9zdHlsaXplci5GYWNlU3R5bGl6ZXJHcmFwaCIpLEdpKG4sIklNQUdFOmltYWdlX2luIiksR2kobiwiTk9STV9SRUNUOm5vcm1fcmVjdCIpLGppKG4sIlNUWUxJWkVEX0lNQUdFOnN0eWxpemVkX2ltYWdlIiksbi5vKGUpLHppKHQsbiksdGhpcy5nLlgoInN0eWxpemVkX2ltYWdlIiwoKHQsZSk9Pnt2YXIgbj0hdGhpcy5oLHI9dC5kYXRhLGk9dC53aWR0aDtjb25zdCBzPWkqKHQ9dC5oZWlnaHQpO2lmKHIgaW5zdGFuY2VvZiBVaW50OEFycmF5KWlmKHIubGVuZ3RoPT09MypzKXtjb25zdCBlPW5ldyBVaW50OENsYW1wZWRBcnJheSg0KnMpO2ZvcihsZXQgdD0wO3Q8czsrK3QpZVs0KnRdPXJbMyp0XSxlWzQqdCsxXT1yWzMqdCsxXSxlWzQqdCsyXT1yWzMqdCsyXSxlWzQqdCszXT0yNTU7cj1uZXcgSW1hZ2VEYXRhKGUsaSx0KTt9ZWxzZSB7aWYoci5sZW5ndGghPT00KnMpdGhyb3cgRXJyb3IoIlVuc3VwcG9ydGVkIGNoYW5uZWwgY291bnQ6ICIrci5sZW5ndGgvcyk7cj1uZXcgSW1hZ2VEYXRhKG5ldyBVaW50OENsYW1wZWRBcnJheShyLmJ1ZmZlcixyLmJ5dGVPZmZzZXQsci5sZW5ndGgpLGksdCk7fWVsc2UgaWYoIShyIGluc3RhbmNlb2YgV2ViR0xUZXh0dXJlKSl0aHJvdyBFcnJvcihgVW5zdXBwb3J0ZWQgZm9ybWF0OiAke3IuY29uc3RydWN0b3IubmFtZX1gKTtpPW5ldyBqYShbcl0sITEsITEsdGhpcy5nLmkuY2FudmFzLHRoaXMuUCxpLHQpLHRoaXMucz1uPW4/aS5jbG9uZSgpOmksdGhpcy5oJiZ0aGlzLmgobiksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoInN0eWxpemVkX2ltYWdlIiwodD0+e3RoaXMucz1udWxsLHRoaXMuaCYmdGhpcy5oKG51bGwpLCRvKHRoaXMsdCk7fSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07ZmgucHJvdG90eXBlLnN0eWxpemU9ZmgucHJvdG90eXBlLlBhLGZoLnByb3RvdHlwZS5zZXRPcHRpb25zPWZoLnByb3RvdHlwZS5vLGZoLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoZmgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LGZoLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBLYShmaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxmaC5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBLYShmaCx0LGUpfTt2YXIgZGg9WGEoWzAsMV0sWzEsMl0sWzIsM10sWzMsNF0sWzAsNV0sWzUsNl0sWzYsN10sWzcsOF0sWzUsOV0sWzksMTBdLFsxMCwxMV0sWzExLDEyXSxbOSwxM10sWzEzLDE0XSxbMTQsMTVdLFsxNSwxNl0sWzEzLDE3XSxbMCwxN10sWzE3LDE4XSxbMTgsMTldLFsxOSwyMF0pO2Z1bmN0aW9uIHBoKHQpe3QuZ2VzdHVyZXM9W10sdC5sYW5kbWFya3M9W10sdC53b3JsZExhbmRtYXJrcz1bXSx0LmhhbmRlZG5lc3M9W107fWZ1bmN0aW9uIGdoKHQpe3JldHVybiAwPT09dC5nZXN0dXJlcy5sZW5ndGg/e2dlc3R1cmVzOltdLGxhbmRtYXJrczpbXSx3b3JsZExhbmRtYXJrczpbXSxoYW5kZWRuZXNzOltdLGhhbmRlZG5lc3NlczpbXX06e2dlc3R1cmVzOnQuZ2VzdHVyZXMsbGFuZG1hcmtzOnQubGFuZG1hcmtzLHdvcmxkTGFuZG1hcmtzOnQud29ybGRMYW5kbWFya3MsaGFuZGVkbmVzczp0LmhhbmRlZG5lc3MsaGFuZGVkbmVzc2VzOnQuaGFuZGVkbmVzc319ZnVuY3Rpb24gbWgodCxlPSEwKXtjb25zdCBuPVtdO2Zvcihjb25zdCBpIG9mIHQpe3ZhciByPWVzKGkpO3Q9W107Zm9yKGNvbnN0IG4gb2Ygci5nKCkpcj1lJiZudWxsIT1tbihuLDEpP2duKG1uKG4sMSksMCk6LTEsdC5wdXNoKHtzY29yZTp5bihuLDIpPz8wLGluZGV4OnIsY2F0ZWdvcnlOYW1lOl9uKG4sMyk/PyIiLGRpc3BsYXlOYW1lOl9uKG4sNCk/PyIifSk7bi5wdXNoKHQpO31yZXR1cm4gbn12YXIgeWg9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbWFnZV9pbiIsIm5vcm1fcmVjdCIsITEpLHRoaXMuZ2VzdHVyZXM9W10sdGhpcy5sYW5kbWFya3M9W10sdGhpcy53b3JsZExhbmRtYXJrcz1bXSx0aGlzLmhhbmRlZG5lc3M9W10sdW4odD10aGlzLmo9bmV3IEpzLDAsMSxlPW5ldyB4cyksdGhpcy5zPW5ldyBxcyx1bih0aGlzLmosMCwyLHRoaXMucyksdGhpcy5DPW5ldyAkcyx1bih0aGlzLnMsMCwzLHRoaXMuQyksdGhpcy52PW5ldyBZcyx1bih0aGlzLnMsMCwyLHRoaXMudiksdGhpcy5oPW5ldyBLcyx1bih0aGlzLmosMCwzLHRoaXMuaCksd24odGhpcy52LDIsLjUpLHduKHRoaXMucyw0LC41KSx3bih0aGlzLkMsMiwuNSk7fWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBhbih0aGlzLmoseHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3VuKHRoaXMuaiwwLDEsdCk7fW8odCl7aWYoRW4odGhpcy52LDMsdC5udW1IYW5kcz8/MSksIm1pbkhhbmREZXRlY3Rpb25Db25maWRlbmNlImluIHQmJnduKHRoaXMudiwyLHQubWluSGFuZERldGVjdGlvbkNvbmZpZGVuY2U/Py41KSwibWluVHJhY2tpbmdDb25maWRlbmNlImluIHQmJnduKHRoaXMucyw0LHQubWluVHJhY2tpbmdDb25maWRlbmNlPz8uNSksIm1pbkhhbmRQcmVzZW5jZUNvbmZpZGVuY2UiaW4gdCYmd24odGhpcy5DLDIsdC5taW5IYW5kUHJlc2VuY2VDb25maWRlbmNlPz8uNSksdC5jYW5uZWRHZXN0dXJlc0NsYXNzaWZpZXJPcHRpb25zKXt2YXIgZT1uZXcgSHMsbj1lLHI9U28odC5jYW5uZWRHZXN0dXJlc0NsYXNzaWZpZXJPcHRpb25zLGFuKHRoaXMuaCxIcywzKT8uaCgpKTt1bihuLDAsMixyKSx1bih0aGlzLmgsMCwzLGUpO31lbHNlIHZvaWQgMD09PXQuY2FubmVkR2VzdHVyZXNDbGFzc2lmaWVyT3B0aW9ucyYmYW4odGhpcy5oLEhzLDMpPy5nKCk7cmV0dXJuIHQuY3VzdG9tR2VzdHVyZXNDbGFzc2lmaWVyT3B0aW9ucz8odW4obj1lPW5ldyBIcywwLDIscj1Tbyh0LmN1c3RvbUdlc3R1cmVzQ2xhc3NpZmllck9wdGlvbnMsYW4odGhpcy5oLEhzLDQpPy5oKCkpKSx1bih0aGlzLmgsMCw0LGUpKTp2b2lkIDA9PT10LmN1c3RvbUdlc3R1cmVzQ2xhc3NpZmllck9wdGlvbnMmJmFuKHRoaXMuaCxIcyw0KT8uZygpLHRoaXMubCh0KX1LYSh0LGUpe3JldHVybiBwaCh0aGlzKSwkYSh0aGlzLHQsZSksZ2godGhpcyl9TGEodCxlLG4pe3JldHVybiBwaCh0aGlzKSxxYSh0aGlzLHQsbixlKSxnaCh0aGlzKX1tKCl7dmFyIHQ9bmV3ICRpO0tpKHQsImltYWdlX2luIiksS2kodCwibm9ybV9yZWN0IiksWWkodCwiaGFuZF9nZXN0dXJlcyIpLFlpKHQsImhhbmRfbGFuZG1hcmtzIiksWWkodCwid29ybGRfaGFuZF9sYW5kbWFya3MiKSxZaSh0LCJoYW5kZWRuZXNzIik7Y29uc3QgZT1uZXcgQ2k7S24oZSxpbyx0aGlzLmopO2NvbnN0IG49bmV3IFZpO0JpKG4sIm1lZGlhcGlwZS50YXNrcy52aXNpb24uZ2VzdHVyZV9yZWNvZ25pemVyLkdlc3R1cmVSZWNvZ25pemVyR3JhcGgiKSxHaShuLCJJTUFHRTppbWFnZV9pbiIpLEdpKG4sIk5PUk1fUkVDVDpub3JtX3JlY3QiKSxqaShuLCJIQU5EX0dFU1RVUkVTOmhhbmRfZ2VzdHVyZXMiKSxqaShuLCJMQU5ETUFSS1M6aGFuZF9sYW5kbWFya3MiKSxqaShuLCJXT1JMRF9MQU5ETUFSS1M6d29ybGRfaGFuZF9sYW5kbWFya3MiKSxqaShuLCJIQU5ERURORVNTOmhhbmRlZG5lc3MiKSxuLm8oZSksemkodCxuKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigiaGFuZF9sYW5kbWFya3MiLCgodCxlKT0+e2Zvcihjb25zdCBlIG9mIHQpe3Q9Y3MoZSk7Y29uc3Qgbj1bXTtmb3IoY29uc3QgZSBvZiBjbih0LGhzLDEpKW4ucHVzaCh7eDp5bihlLDEpPz8wLHk6eW4oZSwyKT8/MCx6OnluKGUsMyk/PzAsdmlzaWJpbGl0eTp5bihlLDQpPz8wfSk7dGhpcy5sYW5kbWFya3MucHVzaChuKTt9JG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImhhbmRfbGFuZG1hcmtzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJ3b3JsZF9oYW5kX2xhbmRtYXJrcyIsKCh0LGUpPT57Zm9yKGNvbnN0IGUgb2YgdCl7dD1hcyhlKTtjb25zdCBuPVtdO2Zvcihjb25zdCBlIG9mIGNuKHQsb3MsMSkpbi5wdXNoKHt4OnluKGUsMSk/PzAseTp5bihlLDIpPz8wLHo6eW4oZSwzKT8/MCx2aXNpYmlsaXR5OnluKGUsNCk/PzB9KTt0aGlzLndvcmxkTGFuZG1hcmtzLnB1c2gobik7fSRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJ3b3JsZF9oYW5kX2xhbmRtYXJrcyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigiaGFuZF9nZXN0dXJlcyIsKCh0LGUpPT57dGhpcy5nZXN0dXJlcy5wdXNoKC4uLm1oKHQsITEpKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiaGFuZF9nZXN0dXJlcyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigiaGFuZGVkbmVzcyIsKCh0LGUpPT57dGhpcy5oYW5kZWRuZXNzLnB1c2goLi4ubWgodCkpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJoYW5kZWRuZXNzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07ZnVuY3Rpb24gX2godCl7cmV0dXJuIHtsYW5kbWFya3M6dC5sYW5kbWFya3Msd29ybGRMYW5kbWFya3M6dC53b3JsZExhbmRtYXJrcyxoYW5kZWRuZXNzZXM6dC5oYW5kZWRuZXNzLGhhbmRlZG5lc3M6dC5oYW5kZWRuZXNzfX15aC5wcm90b3R5cGUucmVjb2duaXplRm9yVmlkZW89eWgucHJvdG90eXBlLkxhLHloLnByb3RvdHlwZS5yZWNvZ25pemU9eWgucHJvdG90eXBlLkthLHloLnByb3RvdHlwZS5zZXRPcHRpb25zPXloLnByb3RvdHlwZS5vLHloLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoeWgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LHloLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBLYSh5aCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSx5aC5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBLYSh5aCx0LGUpfSx5aC5IQU5EX0NPTk5FQ1RJT05TPWRoO3ZhciB2aD1jbGFzcyBleHRlbmRzIFphe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IHphKHQsZSksImltYWdlX2luIiwibm9ybV9yZWN0IiwhMSksdGhpcy5sYW5kbWFya3M9W10sdGhpcy53b3JsZExhbmRtYXJrcz1bXSx0aGlzLmhhbmRlZG5lc3M9W10sdW4odD10aGlzLmg9bmV3IHFzLDAsMSxlPW5ldyB4cyksdGhpcy5zPW5ldyAkcyx1bih0aGlzLmgsMCwzLHRoaXMucyksdGhpcy5qPW5ldyBZcyx1bih0aGlzLmgsMCwyLHRoaXMuaiksRW4odGhpcy5qLDMsMSksd24odGhpcy5qLDIsLjUpLHduKHRoaXMucywyLC41KSx3bih0aGlzLmgsNCwuNSk7fWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBhbih0aGlzLmgseHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3VuKHRoaXMuaCwwLDEsdCk7fW8odCl7cmV0dXJuICJudW1IYW5kcyJpbiB0JiZFbih0aGlzLmosMyx0Lm51bUhhbmRzPz8xKSwibWluSGFuZERldGVjdGlvbkNvbmZpZGVuY2UiaW4gdCYmd24odGhpcy5qLDIsdC5taW5IYW5kRGV0ZWN0aW9uQ29uZmlkZW5jZT8/LjUpLCJtaW5UcmFja2luZ0NvbmZpZGVuY2UiaW4gdCYmd24odGhpcy5oLDQsdC5taW5UcmFja2luZ0NvbmZpZGVuY2U/Py41KSwibWluSGFuZFByZXNlbmNlQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLnMsMix0Lm1pbkhhbmRQcmVzZW5jZUNvbmZpZGVuY2U/Py41KSx0aGlzLmwodCl9RCh0LGUpe3JldHVybiB0aGlzLmxhbmRtYXJrcz1bXSx0aGlzLndvcmxkTGFuZG1hcmtzPVtdLHRoaXMuaGFuZGVkbmVzcz1bXSwkYSh0aGlzLHQsZSksX2godGhpcyl9Rih0LGUsbil7cmV0dXJuIHRoaXMubGFuZG1hcmtzPVtdLHRoaXMud29ybGRMYW5kbWFya3M9W10sdGhpcy5oYW5kZWRuZXNzPVtdLHFhKHRoaXMsdCxuLGUpLF9oKHRoaXMpfW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW1hZ2VfaW4iKSxLaSh0LCJub3JtX3JlY3QiKSxZaSh0LCJoYW5kX2xhbmRtYXJrcyIpLFlpKHQsIndvcmxkX2hhbmRfbGFuZG1hcmtzIiksWWkodCwiaGFuZGVkbmVzcyIpO2NvbnN0IGU9bmV3IENpO0tuKGUscm8sdGhpcy5oKTtjb25zdCBuPW5ldyBWaTtCaShuLCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmhhbmRfbGFuZG1hcmtlci5IYW5kTGFuZG1hcmtlckdyYXBoIiksR2kobiwiSU1BR0U6aW1hZ2VfaW4iKSxHaShuLCJOT1JNX1JFQ1Q6bm9ybV9yZWN0IiksamkobiwiTEFORE1BUktTOmhhbmRfbGFuZG1hcmtzIiksamkobiwiV09STERfTEFORE1BUktTOndvcmxkX2hhbmRfbGFuZG1hcmtzIiksamkobiwiSEFOREVETkVTUzpoYW5kZWRuZXNzIiksbi5vKGUpLHppKHQsbiksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoImhhbmRfbGFuZG1hcmtzIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXQ9Y3MoZSksdGhpcy5sYW5kbWFya3MucHVzaChGbyh0KSk7JG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImhhbmRfbGFuZG1hcmtzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJ3b3JsZF9oYW5kX2xhbmRtYXJrcyIsKCh0LGUpPT57Zm9yKGNvbnN0IGUgb2YgdCl0PWFzKGUpLHRoaXMud29ybGRMYW5kbWFya3MucHVzaChSbyh0KSk7JG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoIndvcmxkX2hhbmRfbGFuZG1hcmtzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKCJoYW5kZWRuZXNzIiwoKHQsZSk9Pnt2YXIgbj10aGlzLmhhbmRlZG5lc3Mscj1uLnB1c2g7Y29uc3QgaT1bXTtmb3IoY29uc3QgZSBvZiB0KXt0PWVzKGUpO2NvbnN0IG49W107Zm9yKGNvbnN0IGUgb2YgdC5nKCkpbi5wdXNoKHtzY29yZTp5bihlLDIpPz8wLGluZGV4OmduKG1uKGUsMSksMCk/Py0xLGNhdGVnb3J5TmFtZTpfbihlLDMpPz8iIixkaXNwbGF5TmFtZTpfbihlLDQpPz8iIn0pO2kucHVzaChuKTt9ci5jYWxsKG4sLi4uaSksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImhhbmRlZG5lc3MiLCh0PT57JG8odGhpcyx0KTt9KSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKTt9fTt2aC5wcm90b3R5cGUuZGV0ZWN0Rm9yVmlkZW89dmgucHJvdG90eXBlLkYsdmgucHJvdG90eXBlLmRldGVjdD12aC5wcm90b3R5cGUuRCx2aC5wcm90b3R5cGUuc2V0T3B0aW9ucz12aC5wcm90b3R5cGUubyx2aC5jcmVhdGVGcm9tTW9kZWxQYXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKHZoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSx2aC5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EodmgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sdmguY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EodmgsdCxlKX0sdmguSEFORF9DT05ORUNUSU9OUz1kaDt2YXIgRWg9WGEoWzAsMV0sWzEsMl0sWzIsM10sWzMsN10sWzAsNF0sWzQsNV0sWzUsNl0sWzYsOF0sWzksMTBdLFsxMSwxMl0sWzExLDEzXSxbMTMsMTVdLFsxNSwxN10sWzE1LDE5XSxbMTUsMjFdLFsxNywxOV0sWzEyLDE0XSxbMTQsMTZdLFsxNiwxOF0sWzE2LDIwXSxbMTYsMjJdLFsxOCwyMF0sWzExLDIzXSxbMTIsMjRdLFsyMywyNF0sWzIzLDI1XSxbMjQsMjZdLFsyNSwyN10sWzI2LDI4XSxbMjcsMjldLFsyOCwzMF0sWzI5LDMxXSxbMzAsMzJdLFsyNywzMV0sWzI4LDMyXSk7ZnVuY3Rpb24gd2godCl7dC5oPXtmYWNlTGFuZG1hcmtzOltdLGZhY2VCbGVuZHNoYXBlczpbXSxwb3NlTGFuZG1hcmtzOltdLHBvc2VXb3JsZExhbmRtYXJrczpbXSxwb3NlU2VnbWVudGF0aW9uTWFza3M6W10sbGVmdEhhbmRMYW5kbWFya3M6W10sbGVmdEhhbmRXb3JsZExhbmRtYXJrczpbXSxyaWdodEhhbmRMYW5kbWFya3M6W10scmlnaHRIYW5kV29ybGRMYW5kbWFya3M6W119O31mdW5jdGlvbiBUaCh0KXt0cnl7aWYoIXQuQylyZXR1cm4gdC5oO3QuQyh0LmgpO31maW5hbGx5e1pvKHQpO319ZnVuY3Rpb24gQWgodCxlKXt0PWNzKHQpLGUucHVzaChGbyh0KSk7fXZhciBiaD1jbGFzcyBleHRlbmRzIFphe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IHphKHQsZSksImlucHV0X2ZyYW1lc19pbWFnZSIsbnVsbCwhMSksdGhpcy5oPXtmYWNlTGFuZG1hcmtzOltdLGZhY2VCbGVuZHNoYXBlczpbXSxwb3NlTGFuZG1hcmtzOltdLHBvc2VXb3JsZExhbmRtYXJrczpbXSxwb3NlU2VnbWVudGF0aW9uTWFza3M6W10sbGVmdEhhbmRMYW5kbWFya3M6W10sbGVmdEhhbmRXb3JsZExhbmRtYXJrczpbXSxyaWdodEhhbmRMYW5kbWFya3M6W10scmlnaHRIYW5kV29ybGRMYW5kbWFya3M6W119LHRoaXMub3V0cHV0UG9zZVNlZ21lbnRhdGlvbk1hc2tzPXRoaXMub3V0cHV0RmFjZUJsZW5kc2hhcGVzPSExLHVuKHQ9dGhpcy5qPW5ldyBobywwLDEsZT1uZXcgeHMpLHRoaXMuSj1uZXcgJHMsdW4odGhpcy5qLDAsMix0aGlzLkopLHRoaXMuYmE9bmV3IHNvLHVuKHRoaXMuaiwwLDMsdGhpcy5iYSksdGhpcy5zPW5ldyBScyx1bih0aGlzLmosMCw0LHRoaXMucyksdGhpcy5IPW5ldyBOcyx1bih0aGlzLmosMCw1LHRoaXMuSCksdGhpcy52PW5ldyBvbyx1bih0aGlzLmosMCw2LHRoaXMudiksdGhpcy5LPW5ldyBhbyx1bih0aGlzLmosMCw3LHRoaXMuSyksd24odGhpcy5zLDIsLjUpLHduKHRoaXMucywzLC4zKSx3bih0aGlzLkgsMiwuNSksd24odGhpcy52LDIsLjUpLHduKHRoaXMudiwzLC4zKSx3bih0aGlzLkssMiwuNSksd24odGhpcy5KLDIsLjUpO31nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gYW4odGhpcy5qLHhzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXt1bih0aGlzLmosMCwxLHQpO31vKHQpe3JldHVybiAibWluRmFjZURldGVjdGlvbkNvbmZpZGVuY2UiaW4gdCYmd24odGhpcy5zLDIsdC5taW5GYWNlRGV0ZWN0aW9uQ29uZmlkZW5jZT8/LjUpLCJtaW5GYWNlU3VwcHJlc3Npb25UaHJlc2hvbGQiaW4gdCYmd24odGhpcy5zLDMsdC5taW5GYWNlU3VwcHJlc3Npb25UaHJlc2hvbGQ/Py4zKSwibWluRmFjZVByZXNlbmNlQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLkgsMix0Lm1pbkZhY2VQcmVzZW5jZUNvbmZpZGVuY2U/Py41KSwib3V0cHV0RmFjZUJsZW5kc2hhcGVzImluIHQmJih0aGlzLm91dHB1dEZhY2VCbGVuZHNoYXBlcz0hIXQub3V0cHV0RmFjZUJsZW5kc2hhcGVzKSwibWluUG9zZURldGVjdGlvbkNvbmZpZGVuY2UiaW4gdCYmd24odGhpcy52LDIsdC5taW5Qb3NlRGV0ZWN0aW9uQ29uZmlkZW5jZT8/LjUpLCJtaW5Qb3NlU3VwcHJlc3Npb25UaHJlc2hvbGQiaW4gdCYmd24odGhpcy52LDMsdC5taW5Qb3NlU3VwcHJlc3Npb25UaHJlc2hvbGQ/Py4zKSwibWluUG9zZVByZXNlbmNlQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLkssMix0Lm1pblBvc2VQcmVzZW5jZUNvbmZpZGVuY2U/Py41KSwib3V0cHV0UG9zZVNlZ21lbnRhdGlvbk1hc2tzImluIHQmJih0aGlzLm91dHB1dFBvc2VTZWdtZW50YXRpb25NYXNrcz0hIXQub3V0cHV0UG9zZVNlZ21lbnRhdGlvbk1hc2tzKSwibWluSGFuZExhbmRtYXJrc0NvbmZpZGVuY2UiaW4gdCYmd24odGhpcy5KLDIsdC5taW5IYW5kTGFuZG1hcmtzQ29uZmlkZW5jZT8/LjUpLHRoaXMubCh0KX1EKHQsZSxuKXtjb25zdCByPSJmdW5jdGlvbiIhPXR5cGVvZiBlP2U6e307cmV0dXJuIHRoaXMuQz0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOm4sd2godGhpcyksJGEodGhpcyx0LHIpLFRoKHRoaXMpfUYodCxlLG4scil7Y29uc3QgaT0iZnVuY3Rpb24iIT10eXBlb2Ygbj9uOnt9O3JldHVybiB0aGlzLkM9ImZ1bmN0aW9uIj09dHlwZW9mIG4/bjpyLHdoKHRoaXMpLHFhKHRoaXMsdCxpLGUpLFRoKHRoaXMpfW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW5wdXRfZnJhbWVzX2ltYWdlIiksWWkodCwicG9zZV9sYW5kbWFya3MiKSxZaSh0LCJwb3NlX3dvcmxkX2xhbmRtYXJrcyIpLFlpKHQsImZhY2VfbGFuZG1hcmtzIiksWWkodCwibGVmdF9oYW5kX2xhbmRtYXJrcyIpLFlpKHQsImxlZnRfaGFuZF93b3JsZF9sYW5kbWFya3MiKSxZaSh0LCJyaWdodF9oYW5kX2xhbmRtYXJrcyIpLFlpKHQsInJpZ2h0X2hhbmRfd29ybGRfbGFuZG1hcmtzIik7Y29uc3QgZT1uZXcgQ2ksbj1uZXcga2k7SmUobiwxLHJlKCJ0eXBlLmdvb2dsZWFwaXMuY29tL21lZGlhcGlwZS50YXNrcy52aXNpb24uaG9saXN0aWNfbGFuZG1hcmtlci5wcm90by5Ib2xpc3RpY0xhbmRtYXJrZXJHcmFwaE9wdGlvbnMiKSwiIiksZnVuY3Rpb24odCxlKXtpZihudWxsIT1lKWlmKEFycmF5LmlzQXJyYXkoZSkpamUodCwyLFJlKGUsSWUsdm9pZCAwLHZvaWQgMCwhMSkpO2Vsc2Uge2lmKCEoInN0cmluZyI9PXR5cGVvZiBlfHxlIGluc3RhbmNlb2YgRHx8SShlKSkpdGhyb3cgRXJyb3IoImludmFsaWQgdmFsdWUgaW4gQW55LnZhbHVlIGZpZWxkOiAiK2UrIiBleHBlY3RlZCBhIEJ5dGVTdHJpbmcsIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nLCBhIFVpbnQ4QXJyYXkgb3IgYSBqc3BiIGFycmF5Iik7SmUodCwyLGx0KGUsITEsITEpLFUoKSk7fX0obix0aGlzLmouZygpKTtjb25zdCByPW5ldyBWaTtCaShyLCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmhvbGlzdGljX2xhbmRtYXJrZXIuSG9saXN0aWNMYW5kbWFya2VyR3JhcGgiKSxwbihyLDgsa2ksbiksR2kociwiSU1BR0U6aW5wdXRfZnJhbWVzX2ltYWdlIiksamkociwiUE9TRV9MQU5ETUFSS1M6cG9zZV9sYW5kbWFya3MiKSxqaShyLCJQT1NFX1dPUkxEX0xBTkRNQVJLUzpwb3NlX3dvcmxkX2xhbmRtYXJrcyIpLGppKHIsIkZBQ0VfTEFORE1BUktTOmZhY2VfbGFuZG1hcmtzIiksamkociwiTEVGVF9IQU5EX0xBTkRNQVJLUzpsZWZ0X2hhbmRfbGFuZG1hcmtzIiksamkociwiTEVGVF9IQU5EX1dPUkxEX0xBTkRNQVJLUzpsZWZ0X2hhbmRfd29ybGRfbGFuZG1hcmtzIiksamkociwiUklHSFRfSEFORF9MQU5ETUFSS1M6cmlnaHRfaGFuZF9sYW5kbWFya3MiKSxqaShyLCJSSUdIVF9IQU5EX1dPUkxEX0xBTkRNQVJLUzpyaWdodF9oYW5kX3dvcmxkX2xhbmRtYXJrcyIpLHIubyhlKSx6aSh0LHIpLHFvKHRoaXMsdCksdGhpcy5nLmF0dGFjaFByb3RvTGlzdGVuZXIoInBvc2VfbGFuZG1hcmtzIiwoKHQsZSk9PntBaCh0LHRoaXMuaC5wb3NlTGFuZG1hcmtzKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigicG9zZV9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdGhpcy5nLmF0dGFjaFByb3RvTGlzdGVuZXIoInBvc2Vfd29ybGRfbGFuZG1hcmtzIiwoKHQsZSk9Pnt2YXIgbj10aGlzLmgucG9zZVdvcmxkTGFuZG1hcmtzO3Q9YXModCksbi5wdXNoKFJvKHQpKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigicG9zZV93b3JsZF9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdGhpcy5vdXRwdXRQb3NlU2VnbWVudGF0aW9uTWFza3MmJihqaShyLCJQT1NFX1NFR01FTlRBVElPTl9NQVNLOnBvc2Vfc2VnbWVudGF0aW9uX21hc2siKSxKbyh0aGlzLCJwb3NlX3NlZ21lbnRhdGlvbl9tYXNrIiksdGhpcy5nLlgoInBvc2Vfc2VnbWVudGF0aW9uX21hc2siLCgodCxlKT0+e3RoaXMuaC5wb3NlU2VnbWVudGF0aW9uTWFza3M9W0phKHRoaXMsdCwhMCwhdGhpcy5DKV0sJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoInBvc2Vfc2VnbWVudGF0aW9uX21hc2siLCh0PT57dGhpcy5oLnBvc2VTZWdtZW50YXRpb25NYXNrcz1bXSwkbyh0aGlzLHQpO30pKSksdGhpcy5nLmF0dGFjaFByb3RvTGlzdGVuZXIoImZhY2VfbGFuZG1hcmtzIiwoKHQsZSk9PntBaCh0LHRoaXMuaC5mYWNlTGFuZG1hcmtzKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiZmFjZV9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdGhpcy5vdXRwdXRGYWNlQmxlbmRzaGFwZXMmJihZaSh0LCJleHRyYV9ibGVuZHNoYXBlcyIpLGppKHIsIkZBQ0VfQkxFTkRTSEFQRVM6ZXh0cmFfYmxlbmRzaGFwZXMiKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcigiZXh0cmFfYmxlbmRzaGFwZXMiLCgodCxlKT0+e3ZhciBuPXRoaXMuaC5mYWNlQmxlbmRzaGFwZXM7dGhpcy5vdXRwdXRGYWNlQmxlbmRzaGFwZXMmJih0PWVzKHQpLG4ucHVzaCh4byh0LmcoKT8/W10pKSksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImV4dHJhX2JsZW5kc2hhcGVzIiwodD0+eyRvKHRoaXMsdCk7fSkpKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcigibGVmdF9oYW5kX2xhbmRtYXJrcyIsKCh0LGUpPT57QWgodCx0aGlzLmgubGVmdEhhbmRMYW5kbWFya3MpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJsZWZ0X2hhbmRfbGFuZG1hcmtzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHRoaXMuZy5hdHRhY2hQcm90b0xpc3RlbmVyKCJsZWZ0X2hhbmRfd29ybGRfbGFuZG1hcmtzIiwoKHQsZSk9Pnt2YXIgbj10aGlzLmgubGVmdEhhbmRXb3JsZExhbmRtYXJrczt0PWFzKHQpLG4ucHVzaChSbyh0KSksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImxlZnRfaGFuZF93b3JsZF9sYW5kbWFya3MiLCh0PT57JG8odGhpcyx0KTt9KSksdGhpcy5nLmF0dGFjaFByb3RvTGlzdGVuZXIoInJpZ2h0X2hhbmRfbGFuZG1hcmtzIiwoKHQsZSk9PntBaCh0LHRoaXMuaC5yaWdodEhhbmRMYW5kbWFya3MpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJyaWdodF9oYW5kX2xhbmRtYXJrcyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcigicmlnaHRfaGFuZF93b3JsZF9sYW5kbWFya3MiLCgodCxlKT0+e3ZhciBuPXRoaXMuaC5yaWdodEhhbmRXb3JsZExhbmRtYXJrczt0PWFzKHQpLG4ucHVzaChSbyh0KSksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoInJpZ2h0X2hhbmRfd29ybGRfbGFuZG1hcmtzIiwodD0+eyRvKHRoaXMsdCk7fSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07YmgucHJvdG90eXBlLmRldGVjdEZvclZpZGVvPWJoLnByb3RvdHlwZS5GLGJoLnByb3RvdHlwZS5kZXRlY3Q9YmgucHJvdG90eXBlLkQsYmgucHJvdG90eXBlLnNldE9wdGlvbnM9YmgucHJvdG90eXBlLm8sYmguY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBLYShiaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sYmguY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKGJoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LGJoLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKGJoLHQsZSl9LGJoLkhBTkRfQ09OTkVDVElPTlM9ZGgsYmguUE9TRV9DT05ORUNUSU9OUz1FaCxiaC5GQUNFX0xBTkRNQVJLU19MSVBTPXRoLGJoLkZBQ0VfTEFORE1BUktTX0xFRlRfRVlFPWVoLGJoLkZBQ0VfTEFORE1BUktTX0xFRlRfRVlFQlJPVz1uaCxiaC5GQUNFX0xBTkRNQVJLU19MRUZUX0lSSVM9cmgsYmguRkFDRV9MQU5ETUFSS1NfUklHSFRfRVlFPWloLGJoLkZBQ0VfTEFORE1BUktTX1JJR0hUX0VZRUJST1c9c2gsYmguRkFDRV9MQU5ETUFSS1NfUklHSFRfSVJJUz1vaCxiaC5GQUNFX0xBTkRNQVJLU19GQUNFX09WQUw9YWgsYmguRkFDRV9MQU5ETUFSS1NfQ09OVE9VUlM9aGgsYmguRkFDRV9MQU5ETUFSS1NfVEVTU0VMQVRJT049Y2g7dmFyIGtoPWNsYXNzIGV4dGVuZHMgWmF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgemEodCxlKSwiaW5wdXRfaW1hZ2UiLCJub3JtX3JlY3QiLCEwKSx0aGlzLmo9e2NsYXNzaWZpY2F0aW9uczpbXX0sdW4odD10aGlzLmg9bmV3IGxvLDAsMSxlPW5ldyB4cyk7fWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBhbih0aGlzLmgseHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3VuKHRoaXMuaCwwLDEsdCk7fW8odCl7cmV0dXJuIHVuKHRoaXMuaCwwLDIsU28odCxhbih0aGlzLmgsRXMsMikpKSx0aGlzLmwodCl9dWEodCxlKXtyZXR1cm4gdGhpcy5qPXtjbGFzc2lmaWNhdGlvbnM6W119LCRhKHRoaXMsdCxlKSx0aGlzLmp9dmEodCxlLG4pe3JldHVybiB0aGlzLmo9e2NsYXNzaWZpY2F0aW9uczpbXX0scWEodGhpcyx0LG4sZSksdGhpcy5qfW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW5wdXRfaW1hZ2UiKSxLaSh0LCJub3JtX3JlY3QiKSxZaSh0LCJjbGFzc2lmaWNhdGlvbnMiKTtjb25zdCBlPW5ldyBDaTtLbihlLGZvLHRoaXMuaCk7Y29uc3Qgbj1uZXcgVmk7QmkobiwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5pbWFnZV9jbGFzc2lmaWVyLkltYWdlQ2xhc3NpZmllckdyYXBoIiksR2kobiwiSU1BR0U6aW5wdXRfaW1hZ2UiKSxHaShuLCJOT1JNX1JFQ1Q6bm9ybV9yZWN0IiksamkobiwiQ0xBU1NJRklDQVRJT05TOmNsYXNzaWZpY2F0aW9ucyIpLG4ubyhlKSx6aSh0LG4pLHRoaXMuZy5hdHRhY2hQcm90b0xpc3RlbmVyKCJjbGFzc2lmaWNhdGlvbnMiLCgodCxlKT0+e3RoaXMuaj1mdW5jdGlvbih0KXtjb25zdCBlPXtjbGFzc2lmaWNhdGlvbnM6Y24odCxkcywxKS5tYXAoKHQ9PnhvKGFuKHQsUWksNCk/LmcoKT8/W10sZ24obW4odCwyKSwwKSxfbih0LDMpKSkpfTtyZXR1cm4gbnVsbCE9dGUoRGUodCwyKSkmJihlLnRpbWVzdGFtcE1zPWduKHRlKERlKHQsMikpLDApKSxlfShwcyh0KSksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImNsYXNzaWZpY2F0aW9ucyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApO319O2toLnByb3RvdHlwZS5jbGFzc2lmeUZvclZpZGVvPWtoLnByb3RvdHlwZS52YSxraC5wcm90b3R5cGUuY2xhc3NpZnk9a2gucHJvdG90eXBlLnVhLGtoLnByb3RvdHlwZS5zZXRPcHRpb25zPWtoLnByb3RvdHlwZS5vLGtoLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2Eoa2gsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LGtoLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBLYShraCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxraC5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBLYShraCx0LGUpfTt2YXIgU2g9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbWFnZV9pbiIsIm5vcm1fcmVjdCIsITApLHRoaXMuaD1uZXcgcG8sdGhpcy5lbWJlZGRpbmdzPXtlbWJlZGRpbmdzOltdfSx1bih0PXRoaXMuaCwwLDEsZT1uZXcgeHMpO31nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gYW4odGhpcy5oLHhzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXt1bih0aGlzLmgsMCwxLHQpO31vKHQpe3ZhciBlPXRoaXMuaCxuPWFuKHRoaXMuaCxUcywyKTtyZXR1cm4gbj1uP24uY2xvbmUoKTpuZXcgVHMsdm9pZCAwIT09dC5sMk5vcm1hbGl6ZT92bihuLDEsdC5sMk5vcm1hbGl6ZSk6ImwyTm9ybWFsaXplImluIHQmJmplKG4sMSksdm9pZCAwIT09dC5xdWFudGl6ZT92bihuLDIsdC5xdWFudGl6ZSk6InF1YW50aXplImluIHQmJmplKG4sMiksdW4oZSwwLDIsbiksdGhpcy5sKHQpfUJhKHQsZSl7cmV0dXJuICRhKHRoaXMsdCxlKSx0aGlzLmVtYmVkZGluZ3N9Q2EodCxlLG4pe3JldHVybiBxYSh0aGlzLHQsbixlKSx0aGlzLmVtYmVkZGluZ3N9bSgpe3ZhciB0PW5ldyAkaTtLaSh0LCJpbWFnZV9pbiIpLEtpKHQsIm5vcm1fcmVjdCIpLFlpKHQsImVtYmVkZGluZ3Nfb3V0Iik7Y29uc3QgZT1uZXcgQ2k7S24oZSxnbyx0aGlzLmgpO2NvbnN0IG49bmV3IFZpO0JpKG4sIm1lZGlhcGlwZS50YXNrcy52aXNpb24uaW1hZ2VfZW1iZWRkZXIuSW1hZ2VFbWJlZGRlckdyYXBoIiksR2kobiwiSU1BR0U6aW1hZ2VfaW4iKSxHaShuLCJOT1JNX1JFQ1Q6bm9ybV9yZWN0IiksamkobiwiRU1CRURESU5HUzplbWJlZGRpbmdzX291dCIpLG4ubyhlKSx6aSh0LG4pLHRoaXMuZy5hdHRhY2hQcm90b0xpc3RlbmVyKCJlbWJlZGRpbmdzX291dCIsKCh0LGUpPT57dD12cyh0KSx0aGlzLmVtYmVkZGluZ3M9ZnVuY3Rpb24odCl7cmV0dXJuIHtlbWJlZGRpbmdzOmNuKHQseXMsMSkubWFwKCh0PT57Y29uc3QgZT17aGVhZEluZGV4OmduKG1uKHQsMyksMCk/Py0xLGhlYWROYW1lOl9uKHQsNCk/PyIifTtpZih2b2lkIDAhPT1vbih0LGdzLHRuKHQsMSkpKXQ9emUodD1hbih0LGdzLHRuKHQsMSkpLDEsV3QpLGUuZmxvYXRFbWJlZGRpbmc9dC5zbGljZSgpO2Vsc2Uge2NvbnN0IG49bmV3IFVpbnQ4QXJyYXkoMCk7ZS5xdWFudGl6ZWRFbWJlZGRpbmc9YW4odCxtcyx0bih0LDIpKT8ucWEoKT8uaCgpPz9uO31yZXR1cm4gZX0pKSx0aW1lc3RhbXBNczpnbih0ZShEZSh0LDIpKSwwKX19KHQpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJlbWJlZGRpbmdzX291dCIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApO319O1NoLmNvc2luZVNpbWlsYXJpdHk9ZnVuY3Rpb24odCxlKXtpZih0LmZsb2F0RW1iZWRkaW5nJiZlLmZsb2F0RW1iZWRkaW5nKXQ9SW8odC5mbG9hdEVtYmVkZGluZyxlLmZsb2F0RW1iZWRkaW5nKTtlbHNlIHtpZighdC5xdWFudGl6ZWRFbWJlZGRpbmd8fCFlLnF1YW50aXplZEVtYmVkZGluZyl0aHJvdyBFcnJvcigiQ2Fubm90IGNvbXB1dGUgY29zaW5lIHNpbWlsYXJpdHkgYmV0d2VlbiBxdWFudGl6ZWQgYW5kIGZsb2F0IGVtYmVkZGluZ3MuIik7dD1JbyhNbyh0LnF1YW50aXplZEVtYmVkZGluZyksTW8oZS5xdWFudGl6ZWRFbWJlZGRpbmcpKTt9cmV0dXJuIHR9LFNoLnByb3RvdHlwZS5lbWJlZEZvclZpZGVvPVNoLnByb3RvdHlwZS5DYSxTaC5wcm90b3R5cGUuZW1iZWQ9U2gucHJvdG90eXBlLkJhLFNoLnByb3RvdHlwZS5zZXRPcHRpb25zPVNoLnByb3RvdHlwZS5vLFNoLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoU2gsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LFNoLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBLYShTaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxTaC5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBLYShTaCx0LGUpfTt2YXIgeGg9Y2xhc3N7Y29uc3RydWN0b3IodCxlLG4pe3RoaXMuY29uZmlkZW5jZU1hc2tzPXQsdGhpcy5jYXRlZ29yeU1hc2s9ZSx0aGlzLnF1YWxpdHlTY29yZXM9bjt9Y2xvc2UoKXt0aGlzLmNvbmZpZGVuY2VNYXNrcz8uZm9yRWFjaCgodD0+e3QuY2xvc2UoKTt9KSksdGhpcy5jYXRlZ29yeU1hc2s/LmNsb3NlKCk7fX07ZnVuY3Rpb24gTGgodCl7dC5jYXRlZ29yeU1hc2s9dm9pZCAwLHQuY29uZmlkZW5jZU1hc2tzPXZvaWQgMCx0LnF1YWxpdHlTY29yZXM9dm9pZCAwO31mdW5jdGlvbiBGaCh0KXt0cnl7Y29uc3QgZT1uZXcgeGgodC5jb25maWRlbmNlTWFza3MsdC5jYXRlZ29yeU1hc2ssdC5xdWFsaXR5U2NvcmVzKTtpZighdC5qKXJldHVybiBlO3QuaihlKTt9ZmluYWxseXtabyh0KTt9fXhoLnByb3RvdHlwZS5jbG9zZT14aC5wcm90b3R5cGUuY2xvc2U7dmFyIFJoPWNsYXNzIGV4dGVuZHMgWmF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgemEodCxlKSwiaW1hZ2VfaW4iLCJub3JtX3JlY3QiLCExKSx0aGlzLnM9W10sdGhpcy5vdXRwdXRDYXRlZ29yeU1hc2s9ITEsdGhpcy5vdXRwdXRDb25maWRlbmNlTWFza3M9ITAsdGhpcy5oPW5ldyBFbyx0aGlzLnY9bmV3IG1vLHVuKHRoaXMuaCwwLDMsdGhpcy52KSx1bih0PXRoaXMuaCwwLDEsZT1uZXcgeHMpO31nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gYW4odGhpcy5oLHhzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXt1bih0aGlzLmgsMCwxLHQpO31vKHQpe3JldHVybiB2b2lkIDAhPT10LmRpc3BsYXlOYW1lc0xvY2FsZT9qZSh0aGlzLmgsMixyZSh0LmRpc3BsYXlOYW1lc0xvY2FsZSkpOiJkaXNwbGF5TmFtZXNMb2NhbGUiaW4gdCYmamUodGhpcy5oLDIpLCJvdXRwdXRDYXRlZ29yeU1hc2siaW4gdCYmKHRoaXMub3V0cHV0Q2F0ZWdvcnlNYXNrPXQub3V0cHV0Q2F0ZWdvcnlNYXNrPz8hMSksIm91dHB1dENvbmZpZGVuY2VNYXNrcyJpbiB0JiYodGhpcy5vdXRwdXRDb25maWRlbmNlTWFza3M9dC5vdXRwdXRDb25maWRlbmNlTWFza3M/PyEwKSxzdXBlci5sKHQpfUkoKXshZnVuY3Rpb24odCl7Y29uc3QgZT1jbih0LmZhKCksVmksMSkuZmlsdGVyKCh0PT5fbih0LDEpLmluY2x1ZGVzKCJtZWRpYXBpcGUudGFza3MuVGVuc29yc1RvU2VnbWVudGF0aW9uQ2FsY3VsYXRvciIpKSk7aWYodC5zPVtdLGUubGVuZ3RoPjEpdGhyb3cgRXJyb3IoIlRoZSBncmFwaCBoYXMgbW9yZSB0aGFuIG9uZSBtZWRpYXBpcGUudGFza3MuVGVuc29yc1RvU2VnbWVudGF0aW9uQ2FsY3VsYXRvci4iKTsxPT09ZS5sZW5ndGgmJihhbihlWzBdLENpLDcpPy5sKCk/LmcoKT8/bmV3IE1hcCkuZm9yRWFjaCgoKGUsbik9Pnt0LnNbTnVtYmVyKG4pXT1fbihlLDEpO30pKTt9KHRoaXMpO31nYSh0LGUsbil7Y29uc3Qgcj0iZnVuY3Rpb24iIT10eXBlb2YgZT9lOnt9O3JldHVybiB0aGlzLmo9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpuLExoKHRoaXMpLCRhKHRoaXMsdCxyKSxGaCh0aGlzKX1OYSh0LGUsbixyKXtjb25zdCBpPSJmdW5jdGlvbiIhPXR5cGVvZiBuP246e307cmV0dXJuIHRoaXMuaj0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uOnIsTGgodGhpcykscWEodGhpcyx0LGksZSksRmgodGhpcyl9RmEoKXtyZXR1cm4gdGhpcy5zfW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW1hZ2VfaW4iKSxLaSh0LCJub3JtX3JlY3QiKTtjb25zdCBlPW5ldyBDaTtLbihlLHdvLHRoaXMuaCk7Y29uc3Qgbj1uZXcgVmk7QmkobiwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5pbWFnZV9zZWdtZW50ZXIuSW1hZ2VTZWdtZW50ZXJHcmFwaCIpLEdpKG4sIklNQUdFOmltYWdlX2luIiksR2kobiwiTk9STV9SRUNUOm5vcm1fcmVjdCIpLG4ubyhlKSx6aSh0LG4pLHFvKHRoaXMsdCksdGhpcy5vdXRwdXRDb25maWRlbmNlTWFza3MmJihZaSh0LCJjb25maWRlbmNlX21hc2tzIiksamkobiwiQ09ORklERU5DRV9NQVNLUzpjb25maWRlbmNlX21hc2tzIiksSm8odGhpcywiY29uZmlkZW5jZV9tYXNrcyIpLHRoaXMuZy5lYSgiY29uZmlkZW5jZV9tYXNrcyIsKCh0LGUpPT57dGhpcy5jb25maWRlbmNlTWFza3M9dC5tYXAoKHQ9PkphKHRoaXMsdCwhMCwhdGhpcy5qKSkpLCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJjb25maWRlbmNlX21hc2tzIiwodD0+e3RoaXMuY29uZmlkZW5jZU1hc2tzPVtdLCRvKHRoaXMsdCk7fSkpKSx0aGlzLm91dHB1dENhdGVnb3J5TWFzayYmKFlpKHQsImNhdGVnb3J5X21hc2siKSxqaShuLCJDQVRFR09SWV9NQVNLOmNhdGVnb3J5X21hc2siKSxKbyh0aGlzLCJjYXRlZ29yeV9tYXNrIiksdGhpcy5nLlgoImNhdGVnb3J5X21hc2siLCgodCxlKT0+e3RoaXMuY2F0ZWdvcnlNYXNrPUphKHRoaXMsdCwhMSwhdGhpcy5qKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiY2F0ZWdvcnlfbWFzayIsKHQ9Pnt0aGlzLmNhdGVnb3J5TWFzaz12b2lkIDAsJG8odGhpcyx0KTt9KSkpLFlpKHQsInF1YWxpdHlfc2NvcmVzIiksamkobiwiUVVBTElUWV9TQ09SRVM6cXVhbGl0eV9zY29yZXMiKSx0aGlzLmcuYXR0YWNoRmxvYXRWZWN0b3JMaXN0ZW5lcigicXVhbGl0eV9zY29yZXMiLCgodCxlKT0+e3RoaXMucXVhbGl0eVNjb3Jlcz10LCRvKHRoaXMsZSk7fSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKCJxdWFsaXR5X3Njb3JlcyIsKHQ9Pnt0aGlzLmNhdGVnb3J5TWFzaz12b2lkIDAsJG8odGhpcyx0KTt9KSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKTt9fTtSaC5wcm90b3R5cGUuZ2V0TGFiZWxzPVJoLnByb3RvdHlwZS5GYSxSaC5wcm90b3R5cGUuc2VnbWVudEZvclZpZGVvPVJoLnByb3RvdHlwZS5OYSxSaC5wcm90b3R5cGUuc2VnbWVudD1SaC5wcm90b3R5cGUuZ2EsUmgucHJvdG90eXBlLnNldE9wdGlvbnM9UmgucHJvdG90eXBlLm8sUmguY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBLYShSaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sUmguY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFJoLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LFJoLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFJoLHQsZSl9O3ZhciBNaD1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUsbil7dGhpcy5jb25maWRlbmNlTWFza3M9dCx0aGlzLmNhdGVnb3J5TWFzaz1lLHRoaXMucXVhbGl0eVNjb3Jlcz1uO31jbG9zZSgpe3RoaXMuY29uZmlkZW5jZU1hc2tzPy5mb3JFYWNoKCh0PT57dC5jbG9zZSgpO30pKSx0aGlzLmNhdGVnb3J5TWFzaz8uY2xvc2UoKTt9fTtNaC5wcm90b3R5cGUuY2xvc2U9TWgucHJvdG90eXBlLmNsb3NlO3ZhciBJaD1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LFBoPVswLGFpLC0yXSxPaD1bMCx0aSwtMyx1aSx0aSwtMV0sQ2g9WzAsT2hdLFVoPVswLE9oLGFpLC0xXSxOaD1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LERoPVswLHRpLC0xLHVpXSxCaD1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt9fSxHaD1jbGFzcyBleHRlbmRzIFlue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO319LGpoPVsxLDIsMyw0LDUsNiw3LDgsOSwxMCwxNCwxNV0sVmg9Y2xhc3MgZXh0ZW5kcyBZbntjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7fX07VmgucHJvdG90eXBlLmc9YmkoWzAsUXIsWzAsamgseWksT2gseWksWzAsT2gsUGhdLHlpLENoLHlpLFswLENoLFBoXSx5aSxEaCx5aSxbMCx0aSwtMyx1aSxFaV0seWksWzAsdGksLTMsdWldLHlpLFswLHBpLHRpLC0yLHVpLGFpLHVpLC0xLDIsdGksUGhdLHlpLFVoLHlpLFswLFVoLFBoXSx0aSxQaCxwaSx5aSxbMCx0aSwtMyx1aSxQaCwtMV0seWksWzAsUXIsRGhdXSxwaSxbMCxwaSxhaSwtMSx1aV1dKTt2YXIgWGg9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbWFnZV9pbiIsIm5vcm1fcmVjdF9pbiIsITEpLHRoaXMub3V0cHV0Q2F0ZWdvcnlNYXNrPSExLHRoaXMub3V0cHV0Q29uZmlkZW5jZU1hc2tzPSEwLHRoaXMuaD1uZXcgRW8sdGhpcy5zPW5ldyBtbyx1bih0aGlzLmgsMCwzLHRoaXMucyksdW4odD10aGlzLmgsMCwxLGU9bmV3IHhzKTt9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGFuKHRoaXMuaCx4cywxKX1zZXQgYmFzZU9wdGlvbnModCl7dW4odGhpcy5oLDAsMSx0KTt9byh0KXtyZXR1cm4gIm91dHB1dENhdGVnb3J5TWFzayJpbiB0JiYodGhpcy5vdXRwdXRDYXRlZ29yeU1hc2s9dC5vdXRwdXRDYXRlZ29yeU1hc2s/PyExKSwib3V0cHV0Q29uZmlkZW5jZU1hc2tzImluIHQmJih0aGlzLm91dHB1dENvbmZpZGVuY2VNYXNrcz10Lm91dHB1dENvbmZpZGVuY2VNYXNrcz8/ITApLHN1cGVyLmwodCl9Z2EodCxlLG4scil7Y29uc3QgaT0iZnVuY3Rpb24iIT10eXBlb2Ygbj9uOnt9O3RoaXMuaj0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uOnIsdGhpcy5xdWFsaXR5U2NvcmVzPXRoaXMuY2F0ZWdvcnlNYXNrPXRoaXMuY29uZmlkZW5jZU1hc2tzPXZvaWQgMCxuPXRoaXMuQisxLHI9bmV3IFZoO2NvbnN0IHM9bmV3IEdoO3ZhciBvPW5ldyBJaDtpZihFbihvLDEsMjU1KSx1bihzLDAsMTIsbyksZS5rZXlwb2ludCYmZS5zY3JpYmJsZSl0aHJvdyBFcnJvcigiQ2Fubm90IHByb3ZpZGUgYm90aCBrZXlwb2ludCBhbmQgc2NyaWJibGUuIik7aWYoZS5rZXlwb2ludCl7dmFyIGE9bmV3IE5oO3ZuKGEsMywhMCksd24oYSwxLGUua2V5cG9pbnQueCksd24oYSwyLGUua2V5cG9pbnQueSksbG4ocyw1LGpoLGEpO31lbHNlIHtpZighZS5zY3JpYmJsZSl0aHJvdyBFcnJvcigiTXVzdCBwcm92aWRlIGVpdGhlciBhIGtleXBvaW50IG9yIGEgc2NyaWJibGUuIik7Zm9yKGEgb2Yobz1uZXcgQmgsZS5zY3JpYmJsZSkpdm4oZT1uZXcgTmgsMywhMCksd24oZSwxLGEueCksd24oZSwyLGEueSkscG4obywxLE5oLGUpO2xuKHMsMTUsamgsbyk7fXBuKHIsMSxHaCxzKSx0aGlzLmcuYWRkUHJvdG9Ub1N0cmVhbShyLmcoKSwiZHJpc2h0aS5SZW5kZXJEYXRhIiwicm9pX2luIixuKSwkYSh0aGlzLHQsaSk7dDp7dHJ5e2NvbnN0IHQ9bmV3IE1oKHRoaXMuY29uZmlkZW5jZU1hc2tzLHRoaXMuY2F0ZWdvcnlNYXNrLHRoaXMucXVhbGl0eVNjb3Jlcyk7aWYoIXRoaXMuail7dmFyIGg9dDticmVhayB0fXRoaXMuaih0KTt9ZmluYWxseXtabyh0aGlzKTt9aD12b2lkIDA7fXJldHVybiBofW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW1hZ2VfaW4iKSxLaSh0LCJyb2lfaW4iKSxLaSh0LCJub3JtX3JlY3RfaW4iKTtjb25zdCBlPW5ldyBDaTtLbihlLHdvLHRoaXMuaCk7Y29uc3Qgbj1uZXcgVmk7QmkobiwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5pbnRlcmFjdGl2ZV9zZWdtZW50ZXIuSW50ZXJhY3RpdmVTZWdtZW50ZXJHcmFwaCIpLEdpKG4sIklNQUdFOmltYWdlX2luIiksR2kobiwiUk9JOnJvaV9pbiIpLEdpKG4sIk5PUk1fUkVDVDpub3JtX3JlY3RfaW4iKSxuLm8oZSksemkodCxuKSxxbyh0aGlzLHQpLHRoaXMub3V0cHV0Q29uZmlkZW5jZU1hc2tzJiYoWWkodCwiY29uZmlkZW5jZV9tYXNrcyIpLGppKG4sIkNPTkZJREVOQ0VfTUFTS1M6Y29uZmlkZW5jZV9tYXNrcyIpLEpvKHRoaXMsImNvbmZpZGVuY2VfbWFza3MiKSx0aGlzLmcuZWEoImNvbmZpZGVuY2VfbWFza3MiLCgodCxlKT0+e3RoaXMuY29uZmlkZW5jZU1hc2tzPXQubWFwKCh0PT5KYSh0aGlzLHQsITAsIXRoaXMuaikpKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiY29uZmlkZW5jZV9tYXNrcyIsKHQ9Pnt0aGlzLmNvbmZpZGVuY2VNYXNrcz1bXSwkbyh0aGlzLHQpO30pKSksdGhpcy5vdXRwdXRDYXRlZ29yeU1hc2smJihZaSh0LCJjYXRlZ29yeV9tYXNrIiksamkobiwiQ0FURUdPUllfTUFTSzpjYXRlZ29yeV9tYXNrIiksSm8odGhpcywiY2F0ZWdvcnlfbWFzayIpLHRoaXMuZy5YKCJjYXRlZ29yeV9tYXNrIiwoKHQsZSk9Pnt0aGlzLmNhdGVnb3J5TWFzaz1KYSh0aGlzLHQsITEsIXRoaXMuaiksJG8odGhpcyxlKTt9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoImNhdGVnb3J5X21hc2siLCh0PT57dGhpcy5jYXRlZ29yeU1hc2s9dm9pZCAwLCRvKHRoaXMsdCk7fSkpKSxZaSh0LCJxdWFsaXR5X3Njb3JlcyIpLGppKG4sIlFVQUxJVFlfU0NPUkVTOnF1YWxpdHlfc2NvcmVzIiksdGhpcy5nLmF0dGFjaEZsb2F0VmVjdG9yTGlzdGVuZXIoInF1YWxpdHlfc2NvcmVzIiwoKHQsZSk9Pnt0aGlzLnF1YWxpdHlTY29yZXM9dCwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigicXVhbGl0eV9zY29yZXMiLCh0PT57dGhpcy5jYXRlZ29yeU1hc2s9dm9pZCAwLCRvKHRoaXMsdCk7fSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07WGgucHJvdG90eXBlLnNlZ21lbnQ9WGgucHJvdG90eXBlLmdhLFhoLnByb3RvdHlwZS5zZXRPcHRpb25zPVhoLnByb3RvdHlwZS5vLFhoLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoWGgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LFhoLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBLYShYaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxYaC5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBLYShYaCx0LGUpfTt2YXIgSGg9Y2xhc3MgZXh0ZW5kcyBaYXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKG5ldyB6YSh0LGUpLCJpbnB1dF9mcmFtZV9ncHUiLCJub3JtX3JlY3QiLCExKSx0aGlzLmo9e2RldGVjdGlvbnM6W119LHVuKHQ9dGhpcy5oPW5ldyBUbywwLDEsZT1uZXcgeHMpO31nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gYW4odGhpcy5oLHhzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXt1bih0aGlzLmgsMCwxLHQpO31vKHQpe3JldHVybiB2b2lkIDAhPT10LmRpc3BsYXlOYW1lc0xvY2FsZT9qZSh0aGlzLmgsMixyZSh0LmRpc3BsYXlOYW1lc0xvY2FsZSkpOiJkaXNwbGF5TmFtZXNMb2NhbGUiaW4gdCYmamUodGhpcy5oLDIpLHZvaWQgMCE9PXQubWF4UmVzdWx0cz9Fbih0aGlzLmgsMyx0Lm1heFJlc3VsdHMpOiJtYXhSZXN1bHRzImluIHQmJmplKHRoaXMuaCwzKSx2b2lkIDAhPT10LnNjb3JlVGhyZXNob2xkP3duKHRoaXMuaCw0LHQuc2NvcmVUaHJlc2hvbGQpOiJzY29yZVRocmVzaG9sZCJpbiB0JiZqZSh0aGlzLmgsNCksdm9pZCAwIT09dC5jYXRlZ29yeUFsbG93bGlzdD9Ubih0aGlzLmgsNSx0LmNhdGVnb3J5QWxsb3dsaXN0KToiY2F0ZWdvcnlBbGxvd2xpc3QiaW4gdCYmamUodGhpcy5oLDUpLHZvaWQgMCE9PXQuY2F0ZWdvcnlEZW55bGlzdD9Ubih0aGlzLmgsNix0LmNhdGVnb3J5RGVueWxpc3QpOiJjYXRlZ29yeURlbnlsaXN0ImluIHQmJmplKHRoaXMuaCw2KSx0aGlzLmwodCl9RCh0LGUpe3JldHVybiB0aGlzLmo9e2RldGVjdGlvbnM6W119LCRhKHRoaXMsdCxlKSx0aGlzLmp9Rih0LGUsbil7cmV0dXJuIHRoaXMuaj17ZGV0ZWN0aW9uczpbXX0scWEodGhpcyx0LG4sZSksdGhpcy5qfW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW5wdXRfZnJhbWVfZ3B1IiksS2kodCwibm9ybV9yZWN0IiksWWkodCwiZGV0ZWN0aW9ucyIpO2NvbnN0IGU9bmV3IENpO0tuKGUsQW8sdGhpcy5oKTtjb25zdCBuPW5ldyBWaTtCaShuLCJtZWRpYXBpcGUudGFza3MudmlzaW9uLk9iamVjdERldGVjdG9yR3JhcGgiKSxHaShuLCJJTUFHRTppbnB1dF9mcmFtZV9ncHUiKSxHaShuLCJOT1JNX1JFQ1Q6bm9ybV9yZWN0IiksamkobiwiREVURUNUSU9OUzpkZXRlY3Rpb25zIiksbi5vKGUpLHppKHQsbiksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoImRldGVjdGlvbnMiLCgodCxlKT0+e2Zvcihjb25zdCBlIG9mIHQpdD1zcyhlKSx0aGlzLmouZGV0ZWN0aW9ucy5wdXNoKExvKHQpKTskbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigiZGV0ZWN0aW9ucyIsKHQ9Pnskbyh0aGlzLHQpO30pKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApO319O0hoLnByb3RvdHlwZS5kZXRlY3RGb3JWaWRlbz1IaC5wcm90b3R5cGUuRixIaC5wcm90b3R5cGUuZGV0ZWN0PUhoLnByb3RvdHlwZS5ELEhoLnByb3RvdHlwZS5zZXRPcHRpb25zPUhoLnByb3RvdHlwZS5vLEhoLmNyZWF0ZUZyb21Nb2RlbFBhdGg9YXN5bmMgZnVuY3Rpb24odCxlKXtyZXR1cm4gS2EoSGgsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LEhoLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBLYShIaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxIaC5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBLYShIaCx0LGUpfTt2YXIgV2g9Y2xhc3N7Y29uc3RydWN0b3IodCxlLG4pe3RoaXMubGFuZG1hcmtzPXQsdGhpcy53b3JsZExhbmRtYXJrcz1lLHRoaXMuc2VnbWVudGF0aW9uTWFza3M9bjt9Y2xvc2UoKXt0aGlzLnNlZ21lbnRhdGlvbk1hc2tzPy5mb3JFYWNoKCh0PT57dC5jbG9zZSgpO30pKTt9fTtmdW5jdGlvbiB6aCh0KXt0LmxhbmRtYXJrcz1bXSx0LndvcmxkTGFuZG1hcmtzPVtdLHQuc2VnbWVudGF0aW9uTWFza3M9dm9pZCAwO31mdW5jdGlvbiBLaCh0KXt0cnl7Y29uc3QgZT1uZXcgV2godC5sYW5kbWFya3MsdC53b3JsZExhbmRtYXJrcyx0LnNlZ21lbnRhdGlvbk1hc2tzKTtpZighdC5zKXJldHVybiBlO3QucyhlKTt9ZmluYWxseXtabyh0KTt9fVdoLnByb3RvdHlwZS5jbG9zZT1XaC5wcm90b3R5cGUuY2xvc2U7dmFyIFloPWNsYXNzIGV4dGVuZHMgWmF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgemEodCxlKSwiaW1hZ2VfaW4iLCJub3JtX3JlY3QiLCExKSx0aGlzLmxhbmRtYXJrcz1bXSx0aGlzLndvcmxkTGFuZG1hcmtzPVtdLHRoaXMub3V0cHV0U2VnbWVudGF0aW9uTWFza3M9ITEsdW4odD10aGlzLmg9bmV3IGJvLDAsMSxlPW5ldyB4cyksdGhpcy52PW5ldyBhbyx1bih0aGlzLmgsMCwzLHRoaXMudiksdGhpcy5qPW5ldyBvbyx1bih0aGlzLmgsMCwyLHRoaXMuaiksRW4odGhpcy5qLDQsMSksd24odGhpcy5qLDIsLjUpLHduKHRoaXMudiwyLC41KSx3bih0aGlzLmgsNCwuNSk7fWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBhbih0aGlzLmgseHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3VuKHRoaXMuaCwwLDEsdCk7fW8odCl7cmV0dXJuICJudW1Qb3NlcyJpbiB0JiZFbih0aGlzLmosNCx0Lm51bVBvc2VzPz8xKSwibWluUG9zZURldGVjdGlvbkNvbmZpZGVuY2UiaW4gdCYmd24odGhpcy5qLDIsdC5taW5Qb3NlRGV0ZWN0aW9uQ29uZmlkZW5jZT8/LjUpLCJtaW5UcmFja2luZ0NvbmZpZGVuY2UiaW4gdCYmd24odGhpcy5oLDQsdC5taW5UcmFja2luZ0NvbmZpZGVuY2U/Py41KSwibWluUG9zZVByZXNlbmNlQ29uZmlkZW5jZSJpbiB0JiZ3bih0aGlzLnYsMix0Lm1pblBvc2VQcmVzZW5jZUNvbmZpZGVuY2U/Py41KSwib3V0cHV0U2VnbWVudGF0aW9uTWFza3MiaW4gdCYmKHRoaXMub3V0cHV0U2VnbWVudGF0aW9uTWFza3M9dC5vdXRwdXRTZWdtZW50YXRpb25NYXNrcz8/ITEpLHRoaXMubCh0KX1EKHQsZSxuKXtjb25zdCByPSJmdW5jdGlvbiIhPXR5cGVvZiBlP2U6e307cmV0dXJuIHRoaXMucz0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOm4semgodGhpcyksJGEodGhpcyx0LHIpLEtoKHRoaXMpfUYodCxlLG4scil7Y29uc3QgaT0iZnVuY3Rpb24iIT10eXBlb2Ygbj9uOnt9O3JldHVybiB0aGlzLnM9ImZ1bmN0aW9uIj09dHlwZW9mIG4/bjpyLHpoKHRoaXMpLHFhKHRoaXMsdCxpLGUpLEtoKHRoaXMpfW0oKXt2YXIgdD1uZXcgJGk7S2kodCwiaW1hZ2VfaW4iKSxLaSh0LCJub3JtX3JlY3QiKSxZaSh0LCJub3JtYWxpemVkX2xhbmRtYXJrcyIpLFlpKHQsIndvcmxkX2xhbmRtYXJrcyIpLFlpKHQsInNlZ21lbnRhdGlvbl9tYXNrcyIpO2NvbnN0IGU9bmV3IENpO0tuKGUsa28sdGhpcy5oKTtjb25zdCBuPW5ldyBWaTtCaShuLCJtZWRpYXBpcGUudGFza3MudmlzaW9uLnBvc2VfbGFuZG1hcmtlci5Qb3NlTGFuZG1hcmtlckdyYXBoIiksR2kobiwiSU1BR0U6aW1hZ2VfaW4iKSxHaShuLCJOT1JNX1JFQ1Q6bm9ybV9yZWN0IiksamkobiwiTk9STV9MQU5ETUFSS1M6bm9ybWFsaXplZF9sYW5kbWFya3MiKSxqaShuLCJXT1JMRF9MQU5ETUFSS1M6d29ybGRfbGFuZG1hcmtzIiksbi5vKGUpLHppKHQsbikscW8odGhpcyx0KSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcigibm9ybWFsaXplZF9sYW5kbWFya3MiLCgodCxlKT0+e3RoaXMubGFuZG1hcmtzPVtdO2Zvcihjb25zdCBlIG9mIHQpdD1jcyhlKSx0aGlzLmxhbmRtYXJrcy5wdXNoKEZvKHQpKTskbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigibm9ybWFsaXplZF9sYW5kbWFya3MiLCh0PT57dGhpcy5sYW5kbWFya3M9W10sJG8odGhpcyx0KTt9KSksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoIndvcmxkX2xhbmRtYXJrcyIsKCh0LGUpPT57dGhpcy53b3JsZExhbmRtYXJrcz1bXTtmb3IoY29uc3QgZSBvZiB0KXQ9YXMoZSksdGhpcy53b3JsZExhbmRtYXJrcy5wdXNoKFJvKHQpKTskbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigid29ybGRfbGFuZG1hcmtzIiwodD0+e3RoaXMud29ybGRMYW5kbWFya3M9W10sJG8odGhpcyx0KTt9KSksdGhpcy5vdXRwdXRTZWdtZW50YXRpb25NYXNrcyYmKGppKG4sIlNFR01FTlRBVElPTl9NQVNLOnNlZ21lbnRhdGlvbl9tYXNrcyIpLEpvKHRoaXMsInNlZ21lbnRhdGlvbl9tYXNrcyIpLHRoaXMuZy5lYSgic2VnbWVudGF0aW9uX21hc2tzIiwoKHQsZSk9Pnt0aGlzLnNlZ21lbnRhdGlvbk1hc2tzPXQubWFwKCh0PT5KYSh0aGlzLHQsITAsIXRoaXMucykpKSwkbyh0aGlzLGUpO30pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcigic2VnbWVudGF0aW9uX21hc2tzIiwodD0+e3RoaXMuc2VnbWVudGF0aW9uTWFza3M9W10sJG8odGhpcyx0KTt9KSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCk7fX07WWgucHJvdG90eXBlLmRldGVjdEZvclZpZGVvPVloLnByb3RvdHlwZS5GLFloLnByb3RvdHlwZS5kZXRlY3Q9WWgucHJvdG90eXBlLkQsWWgucHJvdG90eXBlLnNldE9wdGlvbnM9WWgucHJvdG90eXBlLm8sWWguY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBLYShZaCx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sWWguY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFloLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LFloLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEthKFloLHQsZSl9LFloLlBPU0VfQ09OTkVDVElPTlM9RWg7CgogIGNvbnN0IE1JTl9NQVNLX1RIUkVTSE9MRCA9IDAuMzsKICBjb25zdCBNQVhfTUFTS19USFJFU0hPTEQgPSAxOwogIGNsYXNzIFZvbmFnZVNlbGZpZVNlZ21lbnRhdGlvbiB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5jYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKDAsIDApOwogICAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KAogICAgICAgICIyZCIsCiAgICAgICAgewogICAgICAgICAgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlCiAgICAgICAgfQogICAgICApOwogICAgICB0aGlzLnBpeGVsQ291bnQgPSAwOwogICAgICB0aGlzLmlucHV0T2Zmc2V0ID0gMDsKICAgICAgdGhpcy5vdXRwdXRPZmZzZXQgPSAwOwogICAgfQogICAgYXN5bmMgaW5pdCh3YXNtQXNzZXRVcmlQYXRoLCB0ZmxpdGVBc3NldFVyaVBhdGgpIHsKICAgICAgYXdhaXQgdGhpcy5pbml0V2FzbSh3YXNtQXNzZXRVcmlQYXRoLCB0ZmxpdGVBc3NldFVyaVBhdGgpOwogICAgICBpZiAodGhpcy5pbmZvcykgewogICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5pbmZvcy5pbnB1dFdpZHRoOwogICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaW5mb3MuaW5wdXRIZWlnaHQ7CiAgICAgICAgdGhpcy5waXhlbENvdW50ID0gdGhpcy5pbmZvcy5pbnB1dFdpZHRoICogdGhpcy5pbmZvcy5pbnB1dEhlaWdodDsKICAgICAgICB0aGlzLm1hc2sgPSBuZXcgSW1hZ2VEYXRhKAogICAgICAgICAgdGhpcy5pbmZvcy5pbnB1dFdpZHRoLAogICAgICAgICAgdGhpcy5pbmZvcy5pbnB1dEhlaWdodAogICAgICAgICk7CiAgICAgICAgdGhpcy5pbnB1dE9mZnNldCA9IHRoaXMuaW5mb3MuaW5wdXRNZW1vcnlPZmZzZXQgLyA0OwogICAgICAgIHRoaXMub3V0cHV0T2Zmc2V0ID0gdGhpcy5pbmZvcy5vdXRwdXRNZW1vcnlPZmZzZXQgLyA0OwogICAgICB9CiAgICB9CiAgICBhc3luYyBpbml0V2FzbSh3YXNtQXNzZXRVcmlQYXRoLCB0ZmxpdGVBc3NldFVyaVBhdGgpIHsKICAgICAgdGhpcy5pbmZvcyA9IGF3YWl0IGxvYWRTZWxmaWVTZWdtZW50YXRpb24oCiAgICAgICAgd2FzbUFzc2V0VXJpUGF0aCwKICAgICAgICB0ZmxpdGVBc3NldFVyaVBhdGgKICAgICAgKTsKICAgIH0KICAgIGFzeW5jIHByb2Nlc3MoaW5wdXQsIGZyYW1lKSB7CiAgICAgIGlmICghdGhpcy5tYXNrIHx8ICF0aGlzLmluZm9zKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5pbmZvcy5pbnB1dFdpZHRoOwogICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmluZm9zLmlucHV0SGVpZ2h0OwogICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKAogICAgICAgIGlucHV0LAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICBpbnB1dC53aWR0aCwKICAgICAgICBpbnB1dC5oZWlnaHQsCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodAogICAgICApOwogICAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBoZWFwID0gdGhpcy5pbmZvcy5zZWxlY3RlZFRGTGl0ZS5IRUFQRjMyOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGl4ZWxDb3VudDsgaSsrKSB7CiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5pbnB1dE9mZnNldCArIGkgKiAzOwogICAgICAgIGhlYXBbb2Zmc2V0XSA9IGltYWdlRGF0YS5kYXRhW2kgKiA0XSAvIDI1NTsKICAgICAgICBoZWFwW29mZnNldCArIDFdID0gaW1hZ2VEYXRhLmRhdGFbaSAqIDQgKyAxXSAvIDI1NTsKICAgICAgICBoZWFwW29mZnNldCArIDJdID0gaW1hZ2VEYXRhLmRhdGFbaSAqIDQgKyAyXSAvIDI1NTsKICAgICAgfQogICAgICB0aGlzLmluZm9zLnNlbGVjdGVkVEZMaXRlLl9ydW5JbmZlcmVuY2UoKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBpeGVsQ291bnQ7IGkrKykgewogICAgICAgIGNvbnN0IHBlcnNvbiA9IHRoaXMuaW5mb3Muc2VsZWN0ZWRURkxpdGUuSEVBUEYzMlt0aGlzLm91dHB1dE9mZnNldCArIGldOwogICAgICAgIHRoaXMubWFzay5kYXRhW2kgKiA0XSA9IHRoaXMubWFzay5kYXRhW2kgKiA0ICsgM10gPSAyNTUgKiBwZXJzb247CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMubWFzazsKICAgIH0KICAgIGlzR3B1U3VwcG9ydGVkKCkgewogICAgICByZXR1cm4gdGhpcy5pbmZvcz8uc2VsZWN0ZWRURkxpdGU/Ll9pc0dQVUVuYWJsZWQoKSA/PyBmYWxzZTsKICAgIH0KICB9CiAgY2xhc3MgTWVkaWFwaXBlU2VsZmllU2VnbWVudGF0aW9uIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoMCwgMCk7CiAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoCiAgICAgICAgIjJkIiwKICAgICAgICB7CiAgICAgICAgICB3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWUKICAgICAgICB9CiAgICAgICk7CiAgICAgIHRoaXMud2lkdGggPSAwOwogICAgICB0aGlzLmhlaWdodCA9IDA7CiAgICB9CiAgICBhc3luYyBpbml0KHdhc21Bc3NldFVyaVBhdGgsIHRmbGl0ZUFzc2V0VXJpUGF0aCkgewogICAgICBnbG9iYWxUaGlzLmRvY3VtZW50ID0ge307CiAgICAgIGNvbnN0IHJ1bm5pbmdNb2RlID0gIlZJREVPIjsKICAgICAgY29uc3QgY3JlYXRlSW1hZ2VTZWdtZW50ZXIgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgYXVkaW8gPSBhd2FpdCBOby5mb3JWaXNpb25UYXNrcygKICAgICAgICAgICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0BtZWRpYXBpcGUvdGFza3MtdmlzaW9uQDAuMTAuMTUvd2FzbSIKICAgICAgICApOwogICAgICAgIHRoaXMuaW1hZ2VTZWdtZW50ZXIgPSBhd2FpdCBSaC5jcmVhdGVGcm9tT3B0aW9ucyhhdWRpbywgewogICAgICAgICAgYmFzZU9wdGlvbnM6IHsKICAgICAgICAgICAgLy8gVE9ETzogV2UgbWlnaHQgbmVlZCB0byBob3N0IHRoZSBuZXcgdmVyc2lvbiBvZiB0aGlzIG1vZGVsLgogICAgICAgICAgICBtb2RlbEFzc2V0UGF0aDogImh0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9tZWRpYXBpcGUtbW9kZWxzL2ltYWdlX3NlZ21lbnRlci9zZWxmaWVfc2VnbWVudGVyX2xhbmRzY2FwZS9mbG9hdDE2L2xhdGVzdC9zZWxmaWVfc2VnbWVudGVyX2xhbmRzY2FwZS50ZmxpdGUiLAogICAgICAgICAgICBkZWxlZ2F0ZTogIkdQVSIKICAgICAgICAgIH0sCiAgICAgICAgICBydW5uaW5nTW9kZSwKICAgICAgICAgIG91dHB1dENhdGVnb3J5TWFzazogdHJ1ZSwKICAgICAgICAgIG91dHB1dENvbmZpZGVuY2VNYXNrczogdHJ1ZQogICAgICAgIH0pOwogICAgICB9OwogICAgICBjcmVhdGVJbWFnZVNlZ21lbnRlcigpOwogICAgfQogICAgYXN5bmMgcHJvY2VzcyhpbnB1dCwgZnJhbWUpIHsKICAgICAgaWYgKCF0aGlzLmltYWdlU2VnbWVudGVyKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJJbWFnZVNlZ21lbnRlciBpbnN0YW5jZSBub3QgYXZhaWxhYmxlIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLndpZHRoICE9PSBpbnB1dC53aWR0aCB8fCB0aGlzLmhlaWdodCAhPT0gaW5wdXQuaGVpZ2h0KSB7CiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoID0gaW5wdXQud2lkdGg7CiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgPSBpbnB1dC5oZWlnaHQ7CiAgICAgICAgaWYgKHRoaXMubWFzaykgewogICAgICAgICAgdGhpcy5tYXNrID0gbmV3IEltYWdlRGF0YSgKICAgICAgICAgICAgdGhpcy53aWR0aCwKICAgICAgICAgICAgdGhpcy5oZWlnaHQKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghdGhpcy5tYXNrKSB7CiAgICAgICAgdGhpcy5tYXNrID0gbmV3IEltYWdlRGF0YSgKICAgICAgICAgIHRoaXMud2lkdGgsCiAgICAgICAgICB0aGlzLmhlaWdodAogICAgICAgICk7CiAgICAgIH0KICAgICAgdGhpcy5jb250ZXh0LnNhdmUoKTsKICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSgKICAgICAgICBpbnB1dCwKICAgICAgICAwLAogICAgICAgIDAsCiAgICAgICAgaW5wdXQud2lkdGgsCiAgICAgICAgaW5wdXQuaGVpZ2h0CiAgICAgICk7CiAgICAgIHRoaXMuY29udGV4dC5maWx0ZXIgPSAiYmx1cig1cHgpIjsKICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJzb3VyY2UtaW4iOwogICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKAogICAgICAgIGlucHV0LAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICBpbnB1dC53aWR0aCwKICAgICAgICBpbnB1dC5oZWlnaHQKICAgICAgKTsKICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlcykgPT4gewogICAgICAgIHRoaXMuaW1hZ2VTZWdtZW50ZXI/LnNlZ21lbnRGb3JWaWRlbyh0aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGlucHV0LndpZHRoLCBpbnB1dC5oZWlnaHQpLCBmcmFtZS50aW1lc3RhbXAsIChyZXN1bHQyKSA9PiByZXMocmVzdWx0MikpOwogICAgICB9KTsKICAgICAgY29uc3QgY29uZmlkZW5jZU1hc2tzID0gcmVzdWx0LmNvbmZpZGVuY2VNYXNrcz8uWzBdOwogICAgICBjb25zdCBjb25maWRlbmNlTWFzayA9IGNvbmZpZGVuY2VNYXNrcz8uZ2V0QXNGbG9hdDMyQXJyYXkoKTsKICAgICAgaWYgKCFjb25maWRlbmNlTWFzaykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMucHJldmlvdXNDb25maWRlbmNlTWFzaykgewogICAgICAgIHRoaXMucHJldmlvdXNDb25maWRlbmNlTWFzayA9IGNvbmZpZGVuY2VNYXNrLnNsaWNlKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IGJsZW5kZWRDb25maWRlbmNlTWFzayA9IGNvbmZpZGVuY2VNYXNrLm1hcCgoY29uZmlkZW5jZU1hc2tFbGVtZW50LCBpbmRleCkgPT4gewogICAgICAgIGNvbnN0IHByZXZpb3VzQ29uZmlkZW5jZU1hc2tFbGVtZW50ID0gdGhpcy5wcmV2aW91c0NvbmZpZGVuY2VNYXNrPy5baW5kZXhdOwogICAgICAgIGlmIChwcmV2aW91c0NvbmZpZGVuY2VNYXNrRWxlbWVudCAhPT0gdm9pZCAwKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5ibGVuZChwcmV2aW91c0NvbmZpZGVuY2VNYXNrRWxlbWVudCwgY29uZmlkZW5jZU1hc2tFbGVtZW50KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGNvbmZpZGVuY2VNYXNrRWxlbWVudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb25zdCBtYXNrQ29sb3IgPSBbMjU1LCAwLCAwXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibGVuZGVkQ29uZmlkZW5jZU1hc2s/Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGJsZW5kZWRDb25maWRlbmNlTWFza1tpXSA+IE1JTl9NQVNLX1RIUkVTSE9MRCkgewogICAgICAgICAgaWYgKGJsZW5kZWRDb25maWRlbmNlTWFza1tpXSA8IE1BWF9NQVNLX1RIUkVTSE9MRCkgewogICAgICAgICAgICB0aGlzLm1hc2suZGF0YVtpICogNF0gPSBtYXNrQ29sb3JbMF0gKiBibGVuZGVkQ29uZmlkZW5jZU1hc2tbaV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLm1hc2suZGF0YVtpICogNF0gPSBtYXNrQ29sb3JbMF07CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm1hc2suZGF0YVtpICogNCArIDFdID0gbWFza0NvbG9yWzFdOwogICAgICAgICAgdGhpcy5tYXNrLmRhdGFbaSAqIDQgKyAyXSA9IG1hc2tDb2xvclsyXTsKICAgICAgICAgIHRoaXMubWFzay5kYXRhW2kgKiA0ICsgM10gPSAyNTU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubWFzay5kYXRhW2kgKiA0XSA9IHRoaXMubWFzay5kYXRhW2kgKiA0ICsgMV0gPSB0aGlzLm1hc2suZGF0YVtpICogNCArIDJdID0gdGhpcy5tYXNrLmRhdGFbaSAqIDQgKyAzXSA9IDA7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMucHJldmlvdXNDb25maWRlbmNlTWFzayA9IGJsZW5kZWRDb25maWRlbmNlTWFzay5zbGljZSgpOwogICAgICByZXR1cm4gdGhpcy5tYXNrOwogICAgfQogICAgaXNHcHVTdXBwb3J0ZWQoKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLy8gVHlwZXNjcmlwdCB2ZXJzaW9uIG9mIGh0dHBzOi8vY3Mub3BlbnNvdXJjZS5nb29nbGUvbWVkaWFwaXBlL21lZGlhcGlwZS8rL3JlZnMvdGFncy92MC44LjExOm1lZGlhcGlwZS9jYWxjdWxhdG9ycy9pbWFnZS9zZWdtZW50YXRpb25fc21vb3RoaW5nX2NhbGN1bGF0b3IuY2M7bD0yMTQKICAgIGJsZW5kKHByZXZpb3VzTWFzaywgY3VycmVudE1hc2spIHsKICAgICAgY29uc3QgYzEgPSA1LjY4ODQyOwogICAgICBjb25zdCBjMiA9IC0wLjc0ODY5OTsKICAgICAgY29uc3QgYzMgPSAtNTcuODA1MTsKICAgICAgY29uc3QgYzQgPSAyOTEuMzA5OwogICAgICBjb25zdCBjNSA9IC02MjQuNzE3OwogICAgICBjb25zdCB0ID0gY3VycmVudE1hc2sgLSAwLjU7CiAgICAgIGNvbnN0IHggPSB0ICogdDsKICAgICAgY29uc3QgdW5jZXJ0YWludHkgPSAxIC0gTWF0aC5taW4oMSwgeCAqIChjMSArIHggKiAoYzIgKyB4ICogKGMzICsgeCAqIChjNCArIHggKiBjNSkpKSkpOwogICAgICByZXR1cm4gY3VycmVudE1hc2sgKyAocHJldmlvdXNNYXNrIC0gY3VycmVudE1hc2spICogKHVuY2VydGFpbnR5ICogMC45KTsKICAgIH0KICB9CgogIGNsYXNzIEJhY2tncm91bmRUcmFuc2Zvcm1lciB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5yZXBvcnRlciA9IG5ldyBxJDEoKTsKICAgICAgdGhpcy5pc0VuYWJsZWQgPSB0cnVlOwogICAgfQogICAgYXN5bmMgaW5pdChpZCwgY29uZmlnKSB7CiAgICAgIGlmIChjb25maWcudm9uYWdlU2VsZmllU2VnbWVudGF0aW9uRW5naW5lID09PSBmYWxzZSkgewogICAgICAgIHRoaXMuc2VsZmllU2VnbWVudGF0aW9uID0gbmV3IE1lZGlhcGlwZVNlbGZpZVNlZ21lbnRhdGlvbigpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VsZmllU2VnbWVudGF0aW9uID0gbmV3IFZvbmFnZVNlbGZpZVNlZ21lbnRhdGlvbigpOwogICAgICB9CiAgICAgIGF3YWl0IHRoaXMuc2VsZmllU2VnbWVudGF0aW9uPy5pbml0KAogICAgICAgIGNvbmZpZy53YXNtQXNzZXRVcmlQYXRoLAogICAgICAgIGNvbmZpZy50ZmxpdGVBc3NldFVyaVBhdGgKICAgICAgKTsKICAgICAgdGhpcy5iYWNrZ3JvdW5kRmlsdGVyID0gbmV3IEJhY2tncm91bmRGaWx0ZXIoKTsKICAgICAgdGhpcy5yZXBvcnQoewogICAgICAgIHZhcmlhdGlvbjogIkNyZWF0ZSIKICAgICAgfSk7CiAgICB9CiAgICBhc3luYyB0cmFuc2Zvcm0oZnJhbWUsIGNvbnRyb2xsZXIpIHsKICAgICAgaWYgKCF0aGlzLmlzRW5hYmxlZCkgewogICAgICAgIHJldHVybiBjb250cm9sbGVyLmVucXVldWUoZnJhbWUpOwogICAgICB9CiAgICAgIGxldCBjYW52YXM7CiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGZyYW1lLnRpbWVzdGFtcCA/PyAwOwogICAgICBjb25zdCBpbnB1dCA9IGF3YWl0IGNyZWF0ZUltYWdlQml0bWFwKGZyYW1lKTsKICAgICAgY29uc3QgbWFzayA9IGF3YWl0IHRoaXMuc2VsZmllU2VnbWVudGF0aW9uPy5wcm9jZXNzKGlucHV0LCBmcmFtZSk7CiAgICAgIGlmIChtYXNrKSB7CiAgICAgICAgY2FudmFzID0gYXdhaXQgdGhpcy5iYWNrZ3JvdW5kRmlsdGVyPy5wcm9jZXNzKGlucHV0LCBtYXNrKTsKICAgICAgfQogICAgICBpZiAoY2FudmFzKSB7CiAgICAgICAgZnJhbWUuY2xvc2UoKTsKICAgICAgICBjb250cm9sbGVyLmVucXVldWUoCiAgICAgICAgICBuZXcgVmlkZW9GcmFtZShjYW52YXMsIHsKICAgICAgICAgICAgdGltZXN0YW1wLAogICAgICAgICAgICBhbHBoYTogImRpc2NhcmQiCiAgICAgICAgICB9KQogICAgICAgICk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGZyYW1lKTsKICAgICAgfQogICAgfQogICAgYXN5bmMgc2V0QmFja2dyb3VuZE9wdGlvbnMob3B0aW9ucykgewogICAgICB0aGlzLmJhY2tncm91bmRPcHRpb25zID0gb3B0aW9uczsKICAgICAgYXdhaXQgdGhpcy5iYWNrZ3JvdW5kRmlsdGVyPy5zZXRCYWNrZ3JvdW5kT3B0aW9ucyhvcHRpb25zKTsKICAgICAgdGhpcy5yZXBvcnQoewogICAgICAgIHZhcmlhdGlvbjogIlVwZGF0ZSIKICAgICAgfSk7CiAgICB9CiAgICBhc3luYyBzZXRWaWRlb0JHUmVhZGFibGUoc3RyZWFtKSB7CiAgICAgIGF3YWl0IHRoaXMuYmFja2dyb3VuZEZpbHRlcj8uc2V0VmlkZW9CR1JlYWRhYmxlKHN0cmVhbSk7CiAgICB9CiAgICBhc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShpbWFnZSkgewogICAgICBhd2FpdCB0aGlzLmJhY2tncm91bmRGaWx0ZXI/LnNldFZpcnR1YWxCR0ltYWdlKGltYWdlKTsKICAgIH0KICAgIHNldEZsaWNrZXJpbmdPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgdGhpcy5iYWNrZ3JvdW5kRmlsdGVyPy5zZXRGbGlja2VyaW5nT3B0aW9ucyhvcHRpb25zKTsKICAgICAgdGhpcy5yZXBvcnQoewogICAgICAgIHZhcmlhdGlvbjogIlVwZGF0ZSIKICAgICAgfSk7CiAgICB9CiAgICBhc3luYyBwcm9maWxlKGR1cmF0aW9uKSB7CiAgICAgIHJldHVybiB0aGlzLmJhY2tncm91bmRGaWx0ZXI/LnByb2ZpbGUoZHVyYXRpb24pID8/IFtdOwogICAgfQogICAgZ2V0VHJhbnNmb3JtZXJUeXBlKCkgewogICAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kT3B0aW9ucz8udHJhbnNmb3JtZXJUeXBlID8/ICJVbmRlZmluZWQiOwogICAgfQogICAgZW5hYmxlKCkgewogICAgICB0aGlzLmlzRW5hYmxlZCA9IHRydWU7CiAgICB9CiAgICBkaXNhYmxlKCkgewogICAgICB0aGlzLmlzRW5hYmxlZCA9IGZhbHNlOwogICAgfQogICAgcmVwb3J0KHJlcG9ydCkgewogICAgICB0aGlzLnJlcG9ydGVyLnNlbmQoewogICAgICAgIHZlcnNpb24sCiAgICAgICAgYWN0aW9uOiAiTWxUcmFuc2Zvcm1lcnMiLAogICAgICAgIHRyYW5zZm9ybWVyVHlwZTogdGhpcy5iYWNrZ3JvdW5kT3B0aW9ucz8udHJhbnNmb3JtZXJUeXBlLAogICAgICAgIGNvbmZpZzogSlNPTi5zdHJpbmdpZnkodGhpcy5iYWNrZ3JvdW5kT3B0aW9ucyksCiAgICAgICAgLi4ucmVwb3J0CiAgICAgIH0pOwogICAgfQogIH0KCiAgY2xhc3MgUHJvY2Vzc29yV29ya2VyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lciA9IG5ldyBCYWNrZ3JvdW5kVHJhbnNmb3JtZXIoKTsKICAgICAgdGhpcy5tZWRpYVByb2Nlc3NvciA9IG5ldyBDZSQxKCk7CiAgICAgIHRoaXMucmF0ZSA9IDMwOwogICAgICB0aGlzLmV2ZW50c1F1ZXVlID0gW107CiAgICAgIHRoaXMuZnJhbWVUcmFuc2Zvcm1MYXRlbmN5TXMgPSBbXTsKICAgIH0KICAgIGFzeW5jIGluaXQoaWQsIGNvbmZpZykgewogICAgICB0aGlzLmZyYW1lVHJhbnNmb3JtTGF0ZW5jeU1zID0gW107CiAgICAgIGF3YWl0IHRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyLmluaXQoaWQsIGNvbmZpZyk7CiAgICAgIGF3YWl0IHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhbnNmb3JtZXJzKFt0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lcl0pOwogICAgICB0aGlzLm1lZGlhUHJvY2Vzc29yLnNldFRyYWNrRXhwZWN0ZWRSYXRlKHRoaXMucmF0ZSk7CiAgICAgIHRoaXMubWVkaWFQcm9jZXNzb3Iub25BbnkoKG5hbWUsIGRhdGEpID0+IHsKICAgICAgICBpZiAodGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3NvcikgewogICAgICAgICAgdGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcih7IG5hbWUsIGRhdGEgfSk7CiAgICAgICAgICB0aGlzLnJlc29sdmVPbk1lZGlhUHJvY2Vzc29yID0gdm9pZCAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmV2ZW50c1F1ZXVlLnB1c2goeyBuYW1lLCBkYXRhIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICBlbmFibGUoKSB7CiAgICAgIHRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyLmVuYWJsZSgpOwogICAgfQogICAgZGlzYWJsZSgpIHsKICAgICAgdGhpcy5iYWNrZ3JvdW5kVHJhbnNmb3JtZXIuZGlzYWJsZSgpOwogICAgfQogICAgYXN5bmMgb25NZWRpYVByb2Nlc3NvckV2ZW50KCkgewogICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICBpZiAodGhpcy5ldmVudHNRdWV1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICByZXNvbHZlKHRoaXMuZXZlbnRzUXVldWUuc2hpZnQoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucmVzb2x2ZU9uTWVkaWFQcm9jZXNzb3IgPSByZXNvbHZlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICBhc3luYyBzZXRUcmFja0V4cGVjdGVkUmF0ZShyYXRlKSB7CiAgICAgIHRoaXMucmF0ZSA9IHJhdGU7CiAgICAgIHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhY2tFeHBlY3RlZFJhdGUocmF0ZSk7CiAgICB9CiAgICBhc3luYyB0cmFuc2Zvcm0ocmVhZGFibGUsIHdyaXRhYmxlKSB7CiAgICAgIGxldCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB0aGlzLm1lZGlhUHJvY2Vzc29yLnRyYW5zZm9ybShyZWFkYWJsZSwgd3JpdGFibGUpOwogICAgICB0aGlzLmZyYW1lVHJhbnNmb3JtTGF0ZW5jeU1zLnB1c2gocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCk7CiAgICB9CiAgICBhc3luYyBzZXRCYWNrZ3JvdW5kT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIGF3YWl0IHRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyPy5zZXRCYWNrZ3JvdW5kT3B0aW9ucyhvcHRpb25zKTsKICAgIH0KICAgIHNldFZpZGVvQkdSZWFkYWJsZShzdHJlYW0pIHsKICAgICAgdGhpcy5iYWNrZ3JvdW5kVHJhbnNmb3JtZXIuc2V0VmlkZW9CR1JlYWRhYmxlKHN0cmVhbSk7CiAgICB9CiAgICBhc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShpbWFnZSkgewogICAgICBhd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5zZXRWaXJ0dWFsQkdJbWFnZShpbWFnZSk7CiAgICB9CiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7CiAgICAgIGF3YWl0IHRoaXMubWVkaWFQcm9jZXNzb3IuZGVzdHJveSgpOwogICAgICBjb25zdCBzdW0gPSB0aGlzLmZyYW1lVHJhbnNmb3JtTGF0ZW5jeU1zLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApOwogICAgICBjb25zdCBhdmcgPSBzdW0gLyB0aGlzLmZyYW1lVHJhbnNmb3JtTGF0ZW5jeU1zLmxlbmd0aCB8fCAwOwogICAgICBjb25zb2xlLmxvZyhgVHJhbnNmb3JtIGxhdGVuY3kgYXZlcmFnZSBpczogJHthdmd9IG1zYCk7CiAgICB9CiAgICBzZXRGbGlja2VyaW5nT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyLnNldEZsaWNrZXJpbmdPcHRpb25zKG9wdGlvbnMpOwogICAgfQogICAgc2V0Vm9uYWdlTWV0YWRhdGEobWV0YWRhdGEpIHsKICAgICAgeGUkMShtZXRhZGF0YSk7CiAgICB9CiAgICBhc3luYyBwcm9maWxlKGR1cmF0aW9uKSB7CiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSgKICAgICAgICBhd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5wcm9maWxlKGR1cmF0aW9uKQogICAgICApOwogICAgfQogICAgc3RhdGljIHsKICAgICAgcmVnaXN0ZXJXb3JrZXIoIlByb2Nlc3NvcldvcmtlciIsIHRoaXMpOwogICAgfQogIH0KCn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2Nlc3Nvci13b3JrZXItQ2R1eGlsM3UuanMubWFwCg==",H9=e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0)),ah=typeof self!="undefined"&&self.Blob&&new Blob([H9(dA)],{type:"text/javascript;charset=utf-8"});function x9(e){let t;try{if(t=ah&&(self.URL||self.webkitURL).createObjectURL(ah),!t)throw"";const i=new Worker(t,{name:e==null?void 0:e.name});return i.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),i}catch{return new Worker("data:text/javascript;base64,"+dA,{name:e==null?void 0:e.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const ad=class extends Zc{constructor(t){super(),this.rate=30,this.isEnabled=!0,this.config=t}async setTrackExpectedRate(t){var i;await this.startWorker(),await((i=this.worker)==null?void 0:i.setTrackExpectedRate(t))}async setBackgroundOptions(t){this.backgroundOptions=t,await this.updateBackgroundOptions(t)}async transform(t,i){var n;await this.startWorker(),await((n=this.worker)==null?void 0:n.transform(t,i))}async destroy(){var t;await((t=this.worker)==null?void 0:t.terminate()),this.worker=void 0}async setFlickeringOptions(t){var i;await this.startWorker(),await((i=this.worker)==null?void 0:i.setFlickeringOptions(t))}async profile(t){var n;const i=await((n=this.worker)==null?void 0:n.profile(t));return JSON.parse(i!=null?i:"[]")}async enable(){var t;this.isEnabled=!0,await((t=this.worker)==null?void 0:t.enable())}async disable(){var t;this.isEnabled=!1,await((t=this.worker)==null?void 0:t.disable())}async listenWorker(){var t,i;for(;(t=this.worker)!=null&&t.workerContext.worker;){const{name:n,data:o}=await((i=this.worker)==null?void 0:i.onMediaProcessorEvent());switch(n){case"error":case"warn":this.emit(n,o);break;case"pipelineInfo":switch(this.emit(n,o),o){case"pipeline_ended":case"pipeline_ended_with_error":await this.destroy();return}break}}}async startWorker(){!this.config||this.worker||(this.worker=await Z3(zI,x9),this.isEnabled||await this.worker.disable(),await this.worker.init(`worker_${ad.initCount++}`,this.config),this.backgroundOptions&&await this.updateBackgroundOptions(this.backgroundOptions),await this.worker.setVonageMetadata(gg()),await this.setBackgroundOptions(this.config),this.listenWorker())}async updateBackgroundOptions(t){var n,o,l;await this.startWorker();const{transformerType:i}=t;switch(i){case"VideoBackground":await((n=this.worker)==null?void 0:n.setVideoBGReadable(await J0.createVideoReadable(t.backgroundAssetUri)));break;case"VirtualBackground":await((o=this.worker)==null?void 0:o.setVirtualBGImage(await J0.createImageCanvas(t.backgroundAssetUri)));break}await((l=this.worker)==null?void 0:l.setBackgroundOptions(t))}};let KI=ad;(()=>{ad.initCount=0})();class Y9{constructor(t){this.queries=t}async downloadSpeedscope(){this.download(await this.convertToSpeedscope())}download(t){const i=document.createElement("a");i.href=URL.createObjectURL(new Blob([t],{type:"application/json"})),i.download=`profile-${+new Date}.speedscope.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}convertToSpeedscope(){const t=[],i={},n=[];let o=0;for(const I of this.queries){const m=[];for(const y of I)i[y.name]===void 0&&(i[y.name]=t.length,t.push({name:y.name})),m.push({type:y.action==h2.PUSH?"O":"C",frame:i[y.name],at:y.timestamp}),o=Math.max(o,y.timestamp+y.duration);n.push({events:m,type:"evented",name:"GPU Profile",unit:"nanoseconds",startValue:0,endValue:o})}const l={$schema:"https://www.speedscope.app/file-format-schema.json",shared:{frames:t},profiles:n};return JSON.stringify(l,null,2)}}const Tu=class extends Zc{constructor(t){super(),this.worker=new KI(t),this.connector=new r3(this.worker),this.worker.onAny((i,n)=>this.emit(i,n))}async setBackgroundOptions(t){await this.worker.setBackgroundOptions(t)}async enable(){await this.worker.enable()}async disable(){await this.worker.disable()}setTrackExpectedRate(t){this.worker.setTrackExpectedRate(t)}getConnector(){return this.connector}async profile(t){return this.worker.profile(t)}static async profile(t){const i=await Promise.all(this.instances.map(n=>n.profile(t)));return new Y9(i)}static async create(t){const i=new this(t);return this.instances.push(i),i}};let UI=Tu;(()=>{Tu.instances=[]})();async function N9(e){return await UI.create(e)}const Bs=new WeakMap,Ag=new WeakMap,Ol=new WeakMap,EI=Symbol("anyProducer"),Ih=Promise.resolve(),cd=Symbol("listenerAdded"),gd=Symbol("listenerRemoved");let Sa=!1;function zr(e){if(typeof e!="string"&&typeof e!="symbol")throw new TypeError("eventName must be a string or a symbol")}function og(e){if(typeof e!="function")throw new TypeError("listener must be a function")}function Kr(e,t){const i=Ag.get(e);return i.has(t)||i.set(t,new Set),i.get(t)}function jl(e,t){const i=typeof t=="string"||typeof t=="symbol"?t:EI,n=Ol.get(e);return n.has(i)||n.set(i,new Set),n.get(i)}function M9(e,t,i){const n=Ol.get(e);if(n.has(t))for(const o of n.get(t))o.enqueue(i);if(n.has(EI)){const o=Promise.all([t,i]);for(const l of n.get(EI))l.enqueue(o)}}function Ch(e,t){t=Array.isArray(t)?t:[t];let i=!1,n=()=>{},o=[];const l={enqueue(I){o.push(I),n()},finish(){i=!0,n()}};for(const I of t)jl(e,I).add(l);return{async next(){return o?o.length===0?i?(o=void 0,this.next()):(await new Promise(I=>{n=I}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(I){o=void 0;for(const m of t)jl(e,m).delete(l);return n(),arguments.length>0?{done:!0,value:await I}:{done:!0}},[Symbol.asyncIterator](){return this}}}function uh(e){if(e===void 0)return mh;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!mh.includes(t))throw typeof t!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${t} is not Emittery method`);return e}const wa=e=>e===cd||e===gd;class Cl{static mixin(t,i){return i=uh(i),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const I of i)if(n.prototype[I]!==void 0)throw new Error(`The property \`${I}\` already exists on \`target\``);function o(){return Object.defineProperty(this,t,{enumerable:!1,value:new Cl}),this[t]}Object.defineProperty(n.prototype,t,{enumerable:!1,get:o});const l=I=>function(...m){return this[t][I](...m)};for(const I of i)Object.defineProperty(n.prototype,I,{enumerable:!1,value:l(I)});return n}}static get isDebugEnabled(){if(typeof process!="object")return Sa;const{env:t}=process||{env:{}};return t.DEBUG==="emittery"||t.DEBUG==="*"||Sa}static set isDebugEnabled(t){Sa=t}constructor(t={}){Bs.set(this,new Set),Ag.set(this,new Map),Ol.set(this,new Map),this.debug=t.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(i,n,o,l)=>{try{l=JSON.stringify(l)}catch{l=`Object with the following keys failed to stringify: ${Object.keys(l).join(",")}`}typeof o=="symbol"&&(o=o.toString());const I=new Date,m=`${I.getHours()}:${I.getMinutes()}:${I.getSeconds()}.${I.getMilliseconds()}`;console.log(`[${m}][emittery:${i}][${n}] Event Name: ${o}
	data: ${l}`)})}logIfDebugEnabled(t,i,n){(Cl.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,i,n)}on(t,i){og(i),t=Array.isArray(t)?t:[t];for(const n of t)zr(n),Kr(this,n).add(i),this.logIfDebugEnabled("subscribe",n,void 0),wa(n)||this.emit(cd,{eventName:n,listener:i});return this.off.bind(this,t,i)}off(t,i){og(i),t=Array.isArray(t)?t:[t];for(const n of t)zr(n),Kr(this,n).delete(i),this.logIfDebugEnabled("unsubscribe",n,void 0),wa(n)||this.emit(gd,{eventName:n,listener:i})}once(t){return new Promise(i=>{const n=this.on(t,o=>{n(),i(o)})})}events(t){t=Array.isArray(t)?t:[t];for(const i of t)zr(i);return Ch(this,t)}async emit(t,i){zr(t),this.logIfDebugEnabled("emit",t,i),M9(this,t,i);const n=Kr(this,t),o=Bs.get(this),l=[...n],I=wa(t)?[]:[...o];await Ih,await Promise.all([...l.map(async m=>{if(n.has(m))return m(i)}),...I.map(async m=>{if(o.has(m))return m(t,i)})])}async emitSerial(t,i){zr(t),this.logIfDebugEnabled("emitSerial",t,i);const n=Kr(this,t),o=Bs.get(this),l=[...n],I=[...o];await Ih;for(const m of l)n.has(m)&&await m(i);for(const m of I)o.has(m)&&await m(t,i)}onAny(t){return og(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Bs.get(this).add(t),this.emit(cd,{listener:t}),this.offAny.bind(this,t)}anyEvent(){return Ch(this)}offAny(t){og(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(gd,{listener:t}),Bs.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(const i of t)if(this.logIfDebugEnabled("clear",i,void 0),typeof i=="string"||typeof i=="symbol"){Kr(this,i).clear();const n=jl(this,i);for(const o of n)o.finish();n.clear()}else{Bs.get(this).clear();for(const n of Ag.get(this).values())n.clear();for(const n of Ol.get(this).values()){for(const o of n)o.finish();n.clear()}}}listenerCount(t){t=Array.isArray(t)?t:[t];let i=0;for(const n of t){if(typeof n=="string"){i+=Bs.get(this).size+Kr(this,n).size+jl(this,n).size+jl(this).size;continue}typeof n<"u"&&zr(n),i+=Bs.get(this).size;for(const o of Ag.get(this).values())i+=o.size;for(const o of Ol.get(this).values())i+=o.size}return i}bindMethods(t,i){if(typeof t!="object"||t===null)throw new TypeError("`target` must be an object");i=uh(i);for(const n of i){if(t[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(t,n,{enumerable:!1,value:this[n].bind(this)})}}}const mh=Object.getOwnPropertyNames(Cl.prototype).filter(e=>e!=="constructor");Object.defineProperty(Cl,"listenerAdded",{value:cd,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Cl,"listenerRemoved",{value:gd,writable:!1,enumerable:!0,configurable:!1});const L9=[];for(let e=0;e<256;++e)L9.push((e+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);function Lu(e,t){globalThis.vonage||(globalThis.vonage={}),globalThis.vonage.workerizer||(globalThis.vonage.workerizer={});let i=globalThis.vonage.workerizer;return i[e]||(i[e]=t),i[e]}const xs=Lu("globals",{});var dr=(e=>(e.INIT="INIT",e.FORWARD="FORWARD",e.TERMINATE="TERMINATE",e.GLOBALS_SYNC="GLOBALS_SYNC",e))(dr||{});function aA(e){return[ImageBitmap,ReadableStream,WritableStream].some(t=>e instanceof t)}let J9=0;function T9(e,t,i,n,o){const l=J9++;return e.postMessage({id:l,type:t,functionName:i,args:n},n.filter(I=>aA(I))),new Promise(I=>{o==null||o.set(l,I)})}function Hc(e,t){const{id:i,type:n}=e,o=Array.isArray(t)?t:[t];postMessage({id:i,type:n,result:t},o.filter(l=>aA(l)))}const hh=Lu("workerized",{});function IA(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}async function k9(){if(IA())Hc({type:dr.GLOBALS_SYNC},xs);else{const e=[];for(const t in hh){const{worker:i,resolvers:n}=hh[t].workerContext;i&&e.push(T9(i,dr.GLOBALS_SYNC,"",[xs],n))}await Promise.all(e)}}function dd(e,t){if(Array.isArray(t))t.splice(0,t.length);else if(typeof t=="object")for(const i in t)delete t[i];for(const i in e)Array.isArray(e[i])?(t[i]=[],dd(e[i],t[i])):typeof e[i]=="object"?(t[i]={},dd(e[i],t[i])):t[i]=e[i]}async function z9(e,t){const{functionName:i,args:n}=e;if(!t.instance)throw"instance not initialized";if(!i)throw"missing function name to call";if(!t.instance[i])throw`undefined function [${i}] in class ${t.instance.constructor.workerId}`;Hc(e,await t.instance[i](...n!=null?n:[]))}const K9=Lu("registeredWorkers",{});function U9(e,t){if(!e.args)throw"Missing className while initializing worker";const[i,n]=e.args,o=K9[i];if(o)t.instance=new o(e.args.slice(1));else throw`unknown worker class ${i}`;dd(n,xs),Hc(e,typeof t.instance!==void 0)}async function E9(e,t){const{args:i}=e;if(!t.instance)throw"instance not initialized";let n;t.instance.terminate&&(n=await t.instance.terminate(...i!=null?i:[])),Hc(e,n)}function Q9(e){if(!e.args)throw"Missing globals while syncing";dd(e.args[0],xs),Hc(e,{})}function D9(){const e={};onmessage=async t=>{const i=t.data;switch(i.type){case dr.INIT:U9(i,e);break;case dr.FORWARD:z9(i,e);break;case dr.TERMINATE:E9(i,e);break;case dr.GLOBALS_SYNC:Q9(i);break}}}IA()&&D9();function O9(e,t){return xs[e]||(xs[e]=t),[()=>xs[e],async i=>{xs[e]=i,await k9()}]}function j9(e,t){return O9(e,t)}const[kX,_9]=j9("metadata");function P9(e){_9(e)}const q9="background-enchantments",$9="5.2.0-alpha.2",tX={dev:"vite",build:"tsc && vite build",preview:"vite preview",buildToDocs:"npm run build && node copyToDocs.js"},eX={"@vonage/ml-transformers":"5.2.0-alpha.2","@vonage/vivid":"2.36.0"},iX={typescript:"^4.5.4",vite:"^2.9.9"};var nX={name:q9,private:!0,version:$9,scripts:tX,dependencies:eX,devDependencies:iX};const bh="media/",ph={blurLow:{transformerType:nr.BackgroundBlur,radius:Fs.Low},blurHigh:{transformerType:nr.BackgroundBlur,radius:Fs.High},virtual:{transformerType:nr.VirtualBackground,backgroundAssetUri:`${bh}virtual.jpeg`},video:{transformerType:nr.VideoBackground,backgroundAssetUri:`${bh}bbb.mp4`},silhouetteLow:{transformerType:nr.SilhouetteBlur,radius:Fs.Low},silhouetteHigh:{transformerType:nr.SilhouetteBlur,radius:Fs.High}};function Ur(e){const t=document.getElementById(e);if(!t)throw`Unable to find element #${e}`;return t}async function oX(){let e=new yy,t;async function i(){try{await c3()}catch(P){alert("Something bad happened: "+P)}P9({appId:"test_app_id",sourceType:"video"});try{await e.init()}catch(P){alert("An error happen while initializing camera "+P)}}async function n(){const P=I();return P&&(t=await N9(P),t.on("error",rt=>console.error("error",rt)),t.on("warn",rt=>console.warn("warn",rt)),t.setTrackExpectedRate(30),await e.setMediaProcessorConnector(t.getConnector()),console.log("all done and running")),P!==void 0}async function o(){e.stopMediaProcessorConnector()}function l(){switch(nt.value){case"canvas":return{type:Ys.CANVAS};case"fast":return{type:Ys.WEBGL,selfieSegmentationType:oc.FAST};case"precise":return{type:Ys.WEBGL,selfieSegmentationType:oc.PRECISE}}}function I(){const P=K.value,rt=ph[P];if(!ph[P])throw`Undefined type [${P}]`;return{...rt,vonageSelfieSegmentationEngine:!1,renderingOptions:l()}}async function m(){const P=I();P&&t&&t.setBackgroundOptions(P)}const y=Ur("cameraswitch"),H=Ur("githubButton"),L=Ur("vividButton"),K=Ur("typeSelector"),nt=Ur("renderingSelector"),dt=Ur("version_tag");dt.innerText=`@vonage/ml-transformers version: ${nX.dependencies["@vonage/ml-transformers"]}`,y.addEventListener("change",async()=>{y.checked?await n()||(y.checked=!1):o()}),K.addEventListener("change",()=>{m()}),nt.addEventListener("change",()=>{m()}),H.addEventListener("click",()=>{var P;(P=window.open("https://github.com/Vonage/vonage-media-transformers-samples/tree/main/ML-Transformers/BackgroundEnchantments","_blank"))==null||P.focus()}),L.addEventListener("click",()=>{var P;(P=window.open("https://vivid.vonage.com/?path=/story/introduction-meet-vivid--meet-vivid","_blank"))==null||P.focus()}),await i()}window.onload=oX;export{bi as c};
